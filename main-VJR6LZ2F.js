import{$ as Y,$a as cv,$b as Av,A as bt,Aa as Gd,Ab as pv,B as po,Ba as J0,Bb as mv,C as B0,Ca as X0,Cb as me,D as ac,Da as Z0,Db as Ee,E as $0,Ea as x,Eb as Wn,F as q0,Fa as mo,Fb as gt,G as jt,Ga as ev,Gb as gv,H as en,Ha as vr,Hb as vv,I as Xr,Ia as $,Ib as sn,J as Ld,Ja as tv,Jb as ji,K as Ze,Ka as nv,Kb as yv,L as cc,La as rv,Lb as _v,M as fr,Ma as iv,Mb as Yd,N as Fd,Na as dc,Nb as wv,O as z0,Oa as be,Ob as Jd,P as Ud,Pa as yr,Pb as Bi,Q as jd,Qa as $e,Qb as Ev,R as De,Ra as qt,Rb as ei,S as Bd,Sa as W,Sb as Iv,T as Ye,Ta as sv,Tb as wr,U as Pe,Ua as Ve,Ub as bv,V as Bn,Va as lt,Vb as Tv,W as ee,Wa as ov,Wb as Sv,X as pr,Xa as av,Xb as vo,Y as H0,Ya as hc,Yb as Cv,Z as we,Za as Wd,Zb as $i,_ as ne,_a as Kd,_b as xv,a as j,aa as mr,ab as fc,ac as _n,b as pe,ba as G0,bb as M,bc as qe,c as sc,ca as $n,cb as f,cc as St,d as hr,da as Tt,db as p,dc as kv,e as E,ea as q,eb as V,ec as Er,f as V0,fa as z,fb as tn,fc as Ce,g as Pd,ga as K,gb as nn,gc as Rv,h as kt,ha as Z,hb as ue,hc as Dv,i as Md,ia as Rt,ib as F,ic as Pv,j as Nd,ja as Dt,jb as O,jc as Mv,k as Zt,ka as $d,kb as lv,kc as Nv,l as ct,la as qd,lb as uv,lc as Ov,m as L0,ma as lc,mb as dv,mc as qi,n as F0,na as qn,nb as mt,nc as Vv,o as jn,oa as W0,ob as hv,oc as Lv,p as oc,pa as uc,pb as go,pc as Fv,q as Od,qa as Bt,qb as y,r as Vd,ra as $t,rb as se,s as Ae,sa as gr,sb as Me,t as J,ta as K0,tb as _r,u as ho,ua as yn,ub as zn,v as U0,va as Q0,vb as Hn,w as j0,wa as zd,wb as Gn,x as fo,xa as Y0,xb as rn,y as ce,ya as Zr,yb as Qd,z as Ui,za as Hd,zb as fv}from"./chunk-LWSMJ2CT.js";var gc=new we(""),th=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Pe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ne(gc),ne(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),yo=class{_doc;constructor(e){this._doc=e}manager},pc="ng-app-id";function Uv(n){for(let e of n)e.remove()}function jv(n,e){let t=e.createElement("style");return t.textContent=n,t}function z1(n,e,t,r){let i=n.head?.querySelectorAll(`style[${pc}="${e}"],link[${pc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(pc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Zd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var nh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Mv(s),z1(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,jv);r?.forEach(i=>this.addUsage(i,this.external,Zd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Uv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Uv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,jv(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Zd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(pc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ne(Dt),ne(zd),ne(Hd,8),ne(Zr))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Xd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rh=/%COMP%/g;var $v="%COMP%",H1=`_nghost-${$v}`,G1=`_ngcontent-${$v}`,W1=!0,K1=new we("",{providedIn:"root",factory:()=>W1});function Q1(n){return G1.replace(rh,n)}function Y1(n){return H1.replace(rh,n)}function qv(n,e){return e.map(t=>t.replace(rh,n))}var ih=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,c,l,d=null,m=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=m,this.platformIsServer=!1,this.defaultRenderer=new _o(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof mc?i.applyToHost(t):i instanceof wo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,v=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Gd.Emulated:s=new mc(l,d,r,this.appId,m,o,c,v,_);break;case Gd.ShadowDom:return new eh(l,d,t,r,o,c,this.nonce,v,_);default:s=new wo(l,d,r,m,o,c,v,_);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ne(th),ne(nh),ne(zd),ne(K1),ne(Dt),ne(Zr),ne(lt),ne(Hd),ne(sv,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),_o=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Xd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Bv(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Bv(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Pe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Xd[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Xd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mo.DashCase|mo.Important)?e.style.setProperty(t,r,i&mo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=wr().getGlobalEventTarget(this.doc,e),!e))throw new Pe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Bv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var eh=class extends _o{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,l,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=i.styles;m=qv(i.id,m);for(let _ of m){let R=document.createElement("style");c&&R.setAttribute("nonce",c),R.textContent=_,this.shadowRoot.appendChild(R)}let v=i.getExternalStyles?.();if(v)for(let _ of v){let R=Zd(_,s);c&&R.setAttribute("nonce",c),this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wo=class extends _o{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let m=r.styles;this.styles=d?qv(d,m):m,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},mc=class extends wo{contentAttr;hostAttr;constructor(e,t,r,i,s,o,c,l,d){let m=i+"-"+r.id;super(e,t,r,s,o,c,l,d,m),this.contentAttr=Q1(m),this.hostAttr=Y1(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vc=class n extends Tv{supportsDOMEvents=!0;static makeCurrent(){bv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=J1();return t==null?null:X1(t)}resetBaseElement(){Eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rv(document.cookie,e)}},Eo=null;function J1(){return Eo=Eo||document.head.querySelector("base"),Eo?Eo.getAttribute("href"):null}function X1(n){return new URL(n,document.baseURI).pathname}var Z1=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Hv=(()=>{class n extends yo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ne(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),zv=["alt","control","meta","shift"],eT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gv=(()=>{class n extends yo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(t,o.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),zv.forEach(d=>{let m=r.indexOf(d);m>-1&&(r.splice(m,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=eT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zv.forEach(o=>{if(o!==i){let c=tT[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ne(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function sh(n,e){return Ev(j({rootComponent:n},nT(e)))}function nT(n){return{appProviders:[...aT,...n?.providers??[]],platformProviders:oT}}function rT(){vc.makeCurrent()}function iT(){return new qd}function sT(){return Q0(document),document}var oT=[{provide:Zr,useValue:Pv},{provide:Y0,useValue:rT,multi:!0},{provide:Dt,useFactory:sT}];var aT=[{provide:G0,useValue:"root"},{provide:qd,useFactory:iT},{provide:gc,useClass:Hv,multi:!0,deps:[Dt]},{provide:gc,useClass:Gv,multi:!0,deps:[Dt]},ih,nh,th,{provide:ev,useExisting:ih},{provide:Dv,useClass:Z1},[]];var Wv=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ne(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var he="primary",No=Symbol("RouteTitle"),uh=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ri(n){return new uh(n)}function ty(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function lT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wn(n[t],e[t]))return!1;return!0}function wn(n,e){let t=n?dh(n):void 0,r=e?dh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ny(n[i],e[i]))return!1;return!0}function dh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ny(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function ry(n){return n.length>0?n[n.length-1]:null}function Kn(n){return U0(n)?n:hc(n)?Ae(Promise.resolve(n)):J(n)}var uT={exact:sy,subset:oy},iy={exact:dT,subset:hT,ignored:()=>!0};function Kv(n,e,t){return uT[t.paths](n.root,e.root,t.matrixParams)&&iy[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function dT(n,e){return wn(n,e)}function sy(n,e,t){if(!ti(n.segments,e.segments)||!wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sy(n.children[r],e.children[r],t))return!1;return!0}function hT(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ny(n[t],e[t]))}function oy(n,e,t){return ay(n,e,e.segments,t)}function ay(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ti(i,t)||e.hasChildren()||!wc(i,t,r))}else if(n.segments.length===t.length){if(!ti(n.segments,t)||!wc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oy(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ti(n.segments,i)||!wc(n.segments,i,r)||!n.children[he]?!1:ay(n.children[he],e,s,r)}}function wc(n,e,t){return e.every((r,i)=>iy[t](n[i].parameters,r.parameters))}var In=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){return mT.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ec(this)}},Ir=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ri(this.parameters),this._parameterMap}toString(){return ly(this)}};function fT(n,e){return ti(n,e)&&n.every((t,r)=>wn(t.parameters,e[r].parameters))}function ti(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function pT(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var ii=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new br,providedIn:"root"})}return n})(),br=class{parse(e){let t=new fh(e);return new In(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Io(e.root,!0)}`,r=yT(e.queryParams),i=typeof e.fragment=="string"?`#${gT(e.fragment)}`:"";return`${t}${r}${i}`}},mT=new br;function Ec(n){return n.segments.map(e=>ly(e)).join("/")}function Io(n,e){if(!n.hasChildren())return Ec(n);if(e){let t=n.children[he]?Io(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${Io(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=pT(n,(r,i)=>i===he?[Io(n.children[he],!1)]:[`${i}:${Io(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${Ec(n)}/${t[0]}`:`${Ec(n)}/(${t.join("//")})`}}function cy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yc(n){return cy(n).replace(/%3B/gi,";")}function gT(n){return encodeURI(n)}function hh(n){return cy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ic(n){return decodeURIComponent(n)}function Qv(n){return Ic(n.replace(/\+/g,"%20"))}function ly(n){return`${hh(n.path)}${vT(n.parameters)}`}function vT(n){return Object.entries(n).map(([e,t])=>`;${hh(e)}=${hh(t)}`).join("")}function yT(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yc(t)}=${yc(i)}`).join("&"):`${yc(t)}=${yc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _T=/^[^\/()?;#]+/;function oh(n){let e=n.match(_T);return e?e[0]:""}var wT=/^[^\/()?;=#]+/;function ET(n){let e=n.match(wT);return e?e[0]:""}var IT=/^[^=?&#]+/;function bT(n){let e=n.match(IT);return e?e[0]:""}var TT=/^[^&#]+/;function ST(n){let e=n.match(TT);return e?e[0]:""}var fh=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Ie(e,t)),r}parseSegment(){let e=oh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(e),new Ir(Ic(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ET(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=oh(this.remaining);i&&(r=i,this.capture(r))}e[Ic(t)]=Ic(r)}parseQueryParam(e){let t=bT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ST(this.remaining);o&&(r=o,this.capture(r))}let i=Qv(t),s=Qv(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=oh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Pe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[he]:new Ie([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pe(4011,!1)}};function uy(n){return n.segments.length>0?new Ie([],{[he]:n}):n}function dy(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=dy(i);if(r===he&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ie(n.segments,e);return CT(t)}function CT(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Ie(n.segments.concat(e.segments),e.children)}return n}function Tr(n){return n instanceof In}function hy(n,e,t=null,r=null){let i=fy(n);return py(i,e,t,r)}function fy(n){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new Ie(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=uy(r);return e??i}function py(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ah(i,i,i,t,r);let s=xT(e);if(s.toRoot())return ah(i,i,new Ie([],{}),t,r);let o=AT(s,i,n),c=o.processChildren?To(o.segmentGroup,o.index,s.commands):gy(o.segmentGroup,o.index,s.commands);return ah(i,o.segmentGroup,c,t,r)}function bc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Co(n){return typeof n=="object"&&n!=null&&n.outlets}function ah(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`});let o;n===e?o=t:o=my(n,e,t);let c=uy(dy(o));return new In(c,s,i)}function my(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=my(s,e,t)}),new Ie(n.segments,r)}var Tc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bc(r[0]))throw new Pe(4003,!1);let i=r.find(Co);if(i&&i!==ry(r))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Tc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Tc(t,e,r)}var Gi=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AT(n,e,t){if(n.isAbsolute)return new Gi(e,!0,0);if(!t)return new Gi(e,!1,NaN);if(t.parent===null)return new Gi(t,!0,0);let r=bc(n.commands[0])?0:1,i=t.segments.length-1+r;return kT(t,i,n.numberOfDoubleDots)}function kT(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Pe(4005,!1);i=r.segments.length}return new Gi(r,!1,i-s)}function RT(n){return Co(n[0])?n[0].outlets:{[he]:n}}function gy(n,e,t){if(n??=new Ie([],{}),n.segments.length===0&&n.hasChildren())return To(n,e,t);let r=DT(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ie(n.segments.slice(0,r.pathIndex),{});return s.children[he]=new Ie(n.segments.slice(r.pathIndex),n.children),To(s,0,i)}else return r.match&&i.length===0?new Ie(n.segments,{}):r.match&&!n.hasChildren()?ph(n,e,t):r.match?To(n,0,i):ph(n,e,t)}function To(n,e,t){if(t.length===0)return new Ie(n.segments,{});{let r=RT(t),i={};if(Object.keys(r).some(s=>s!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let s=To(n.children[he],e,t);return new Ie(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gy(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(n.segments,i)}}function DT(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Co(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Jv(l,d,o))return s;r+=2}else{if(!Jv(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ph(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Co(s)){let l=PT(s.outlets);return new Ie(r,l)}if(i===0&&bc(t[0])){let l=n.segments[e];r.push(new Ir(l.path,Yv(t[0]))),i++;continue}let o=Co(s)?s.outlets[he]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&bc(c)?(r.push(new Ir(o,Yv(c))),i+=2):(r.push(new Ir(o,{})),i++)}return new Ie(r,{})}function PT(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ph(new Ie([],{}),0,r))}),e}function Yv(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Jv(n,e,t){return n==t.path&&wn(e,t.parameters)}var Wi="imperative",Je=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Je||{}),Mt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Sr=class extends Mt{type=Je.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yt=class extends Mt{urlAfterRedirects;type=Je.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(vt||{}),Qi=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qi||{}),En=class extends Mt{reason;code;type=Je.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bn=class extends Mt{reason;code;type=Je.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Yi=class extends Mt{error;target;type=Je.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xo=class extends Mt{urlAfterRedirects;state;type=Je.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sc=class extends Mt{urlAfterRedirects;state;type=Je.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cc=class extends Mt{urlAfterRedirects;state;shouldActivate;type=Je.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xc=class extends Mt{urlAfterRedirects;state;type=Je.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class extends Mt{urlAfterRedirects;state;type=Je.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kc=class{route;type=Je.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rc=class{route;type=Je.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dc=class{snapshot;type=Je.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pc=class{snapshot;type=Je.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mc=class{snapshot;type=Je.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nc=class{snapshot;type=Je.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ji=class{routerEvent;position;anchor;type=Je.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ao=class{},Xi=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function MT(n){return!(n instanceof Ao)&&!(n instanceof Xi)}function NT(n,e){return n.providers&&!n._injector&&(n._injector=dc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function on(n){return n.outlet||he}function OT(n,e){let t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Oo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Oc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Oo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new si(this.rootInjector)}},si=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Oc(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ne($n))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=mh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=mh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=gh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gh(e,this._root).map(t=>t.value)}};function mh(n,e){if(n===e.value)return e;for(let t of e.children){let r=mh(n,t);if(r)return r}return null}function gh(n,e){if(n===e.value)return[e];for(let t of e.children){let r=gh(n,t);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ko=class extends Vc{snapshot;constructor(e,t){super(e),this.snapshot=t,Th(this,e)}toString(){return this.snapshot.toString()}};function vy(n){let e=VT(n),t=new ct([new Ir("",{})]),r=new ct({}),i=new ct({}),s=new ct({}),o=new ct(""),c=new Ct(t,r,s,o,i,he,n,e.root);return c.snapshot=e.root,new ko(new Pt(c,[]),e)}function VT(n){let e={},t={},r={},i="",s=new ni([],e,r,i,t,he,n,null,{});return new Ro("",new Pt(s,[]))}var Ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ce(d=>d[No]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>ri(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>ri(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&_y(i)&&(r.resolve[No]=i.title),r}var ni=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[No]}constructor(e,t,r,i,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ri(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ro=class extends Vc{url;constructor(e,t){super(t),this.url=e,Th(this,t)}toString(){return yy(this._root)}};function Th(n,e){e.value._routerState=n,e.children.forEach(t=>Th(n,t))}function yy(n){let e=n.children.length>0?` { ${n.children.map(yy).join(", ")} } `:"";return`${n.value}${e}`}function ch(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wn(e.params,t.params)||n.paramsSubject.next(t.params),lT(e.url,t.url)||n.urlSubject.next(t.url),wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vh(n,e){let t=wn(n.params,e.params)&&fT(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||vh(n.parent,e.parent))}function _y(n){return typeof n.title=="string"||n.title===null}var wy=new we(""),Vo=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=_v(void 0);parentContexts=Y(si);location=Y(nv);changeDetector=Y(Bi);inputBinder=Y(Lo,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new yh(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$t]})}return n})(),yh=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ct?this.route:e===si?this.childContexts:e===wy?this.outletData:this.parent.get(e,t)}},Lo=new we(""),Sh=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ui([r.queryParams,r.params,r.data]).pipe(De(([s,o,c],l)=>(c=j(j(j({},s),o),c),l===0?J(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Iv(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Ch=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=be({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&V(0,"router-outlet")},dependencies:[Vo],encapsulation:2})}return n})();function xh(n){let e=n.children&&n.children.map(xh),t=e?pe(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=Ch),t}function LT(n,e,t){let r=Do(n,e._root,t?t._root:void 0);return new ko(r,e)}function Do(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=FT(n,e,t);return new Pt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Do(n,c)),o}}let r=UT(e.value),i=e.children.map(s=>Do(n,s));return new Pt(r,i)}}function FT(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Do(n,r,i);return Do(n,r)})}function UT(n){return new Ct(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Zi=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ey="ngNavigationCancelingError";function Fc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Tr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Iy(!1,vt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Iy(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ey]=!0,t.cancellationCode=e,t}function jT(n){return by(n)&&Tr(n.url)}function by(n){return!!n&&n[Ey]}var BT=(n,e,t,r)=>ce(i=>(new _h(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_h=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ch(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Hi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Hi(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Nc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(ch(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),ch(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Uc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ki=class{component;route;constructor(e,t){this.component=e,this.route=t}};function $T(n,e,t){let r=n._root,i=e?e._root:null;return bo(r,i,t,[r.value])}function qT(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ts(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!H0(n)?n:e.get(n):r}function bo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Hi(e);return n.children.forEach(o=>{zT(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>So(c,t.getContext(o),i)),i}function zT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=HT(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Uc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?bo(n,e,c?c.children:null,r,i):bo(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ki(c.outlet.component,o))}else o&&So(e,c,i),i.canActivateChecks.push(new Uc(r)),s.component?bo(n,null,c?c.children:null,r,i):bo(n,null,t,r,i);return i}function HT(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ti(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ti(n.url,e.url)||!wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vh(n,e)||!wn(n.queryParams,e.queryParams);case"paramsChange":default:return!vh(n,e)}}function So(n,e,t){let r=Hi(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?So(o,e.children.getContext(s),t):So(o,null,t):So(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ki(e.outlet.component,i)):t.canDeactivateChecks.push(new Ki(null,i)):t.canDeactivateChecks.push(new Ki(null,i))}function Fo(n){return typeof n=="function"}function GT(n){return typeof n=="boolean"}function WT(n){return n&&Fo(n.canLoad)}function KT(n){return n&&Fo(n.canActivate)}function QT(n){return n&&Fo(n.canActivateChild)}function YT(n){return n&&Fo(n.canDeactivate)}function JT(n){return n&&Fo(n.canMatch)}function Ty(n){return n instanceof j0||n?.name==="EmptyError"}var _c=Symbol("INITIAL_VALUE");function es(){return De(n=>Ui(n.map(e=>e.pipe(Ze(1),jd(_c)))).pipe(ce(e=>{for(let t of e)if(t!==!0){if(t===_c)return _c;if(t===!1||XT(t))return t}return!0}),jt(e=>e!==_c),Ze(1)))}function XT(n){return Tr(n)||n instanceof Zi}function ZT(n,e){return bt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?J(pe(j({},t),{guardsResult:!0})):eS(o,r,i,n).pipe(bt(c=>c&&GT(c)?tS(r,s,n,e):J(c)),ce(c=>pe(j({},t),{guardsResult:c})))})}function eS(n,e,t,r){return Ae(n).pipe(bt(i=>oS(i.component,i.route,t,e,r)),fr(i=>i!==!0,!0))}function tS(n,e,t,r){return Ae(e).pipe(Xr(i=>B0(rS(i.route.parent,r),nS(i.route,r),sS(n,i.path,t),iS(n,i.route,t))),fr(i=>i!==!0,!0))}function nS(n,e){return n!==null&&e&&e(new Mc(n)),J(!0)}function rS(n,e){return n!==null&&e&&e(new Dc(n)),J(!0)}function iS(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>ac(()=>{let o=Oo(e)??t,c=ts(s,o),l=KT(c)?c.canActivate(e,n):Tt(o,()=>c(e,n));return Kn(l).pipe(fr())}));return J(i).pipe(es())}function sS(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>qT(o)).filter(o=>o!==null).map(o=>ac(()=>{let c=o.guards.map(l=>{let d=Oo(o.node)??t,m=ts(l,d),v=QT(m)?m.canActivateChild(r,n):Tt(d,()=>m(r,n));return Kn(v).pipe(fr())});return J(c).pipe(es())}));return J(s).pipe(es())}function oS(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(c=>{let l=Oo(e)??i,d=ts(c,l),m=YT(d)?d.canDeactivate(n,e,t,r):Tt(l,()=>d(n,e,t,r));return Kn(m).pipe(fr())});return J(o).pipe(es())}function aS(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let c=ts(o,n),l=WT(c)?c.canLoad(e,t):Tt(n,()=>c(e,t));return Kn(l)});return J(s).pipe(es(),Sy(r))}function Sy(n){return Pd(Ye(e=>{if(typeof e!="boolean")throw Fc(n,e)}),ce(e=>e===!0))}function cS(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let c=ts(o,n),l=JT(c)?c.canMatch(e,t):Tt(n,()=>c(e,t));return Kn(l)});return J(s).pipe(es(),Sy(r))}var Po=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Mo=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function zi(n){return ho(new Po(n))}function lS(n){return ho(new Pe(4e3,!1))}function uS(n){return ho(Iy(!1,vt.GuardRejected))}var wh=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[he])return lS(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,s){return dS(t,i,s).pipe(ce(o=>{if(o instanceof In)throw new Mo(o);let c=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Mo(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new In(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new Ie(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Pe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function dS(n,e,t){if(typeof n=="string")return J(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,params:d,data:m,title:v}=e;return Kn(Tt(t,()=>r({params:d,data:m,queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,title:v})))}var Eh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hS(n,e,t,r,i){let s=Cy(n,e,t);return s.matched?(r=NT(e,r),cS(r,e,t,i).pipe(ce(o=>o===!0?s:j({},Eh)))):J(s)}function Cy(n,e,t){if(e.path==="**")return fS(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},Eh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ty)(t,n,e);if(!i)return j({},Eh);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?j(j({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function fS(n){return{matched:!0,parameters:n.length>0?ry(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Xv(n,e,t,r){return t.length>0&&gS(n,t,r)?{segmentGroup:new Ie(e,mS(r,new Ie(t,n.children))),slicedSegments:[]}:t.length===0&&vS(n,t,r)?{segmentGroup:new Ie(n.segments,pS(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ie(n.segments,n.children),slicedSegments:t}}function pS(n,e,t,r){let i={};for(let s of t)if(Bc(n,e,s)&&!r[on(s)]){let o=new Ie([],{});i[on(s)]=o}return j(j({},r),i)}function mS(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&on(r)!==he){let i=new Ie([],{});t[on(r)]=i}return t}function gS(n,e,t){return t.some(r=>Bc(n,e,r)&&on(r)!==he)}function vS(n,e,t){return t.some(r=>Bc(n,e,r))}function Bc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function yS(n,e,t){return e.length===0&&!n.children[t]}var Ih=class{};function _S(n,e,t,r,i,s,o="emptyOnly"){return new bh(n,e,t,r,i,o,s).recognize()}var wS=31,bh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new wh(this.urlSerializer,this.urlTree)}noMatchError(e){return new Pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Xv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:t,rootSnapshot:r})=>{let i=new Pt(r,t),s=new Ro("",i),o=hy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ni([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(ce(r=>({children:r,rootSnapshot:t})),en(r=>{if(r instanceof Mo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Po?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ce(o=>o instanceof Pt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ae(s).pipe(Xr(o=>{let c=r.children[o],l=OT(t,o);return this.processSegmentGroup(e,l,c,o,i)}),Ud((o,c)=>(o.push(...c),o)),Ld(null),z0(),bt(o=>{if(o===null)return zi(r);let c=xy(o);return ES(c),J(c)}))}processSegment(e,t,r,i,s,o,c){return Ae(t).pipe(Xr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,c).pipe(en(d=>{if(d instanceof Po)return J(null);throw d}))),fr(l=>!!l),en(l=>{if(Ty(l))return yS(r,i,s)?J(new Ih):zi(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,l){return on(r)!==o&&(o===he||!Bc(i,s,r))?zi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):zi(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:l,parameters:d,consumedSegments:m,positionalParamSegments:v,remainingSegments:_}=Cy(t,i,s);if(!l)return zi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wS&&(this.allowRedirects=!1));let R=new ni(s,d,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Zv(i),on(i),i.component??i._loadedComponent??null,i,ey(i)),N=Lc(R,c,this.paramsInheritanceStrategy);return R.params=Object.freeze(N.params),R.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(m,i.redirectTo,v,R,e).pipe(De(U=>this.applyRedirects.lineralizeSegments(i,U)),bt(U=>this.processSegment(e,r,t,U.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=hS(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(De(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(De(({routes:d})=>{let m=r._loadedInjector??e,{parameters:v,consumedSegments:_,remainingSegments:R}=l,N=new ni(_,v,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Zv(r),on(r),r.component??r._loadedComponent??null,r,ey(r)),H=Lc(N,o,this.paramsInheritanceStrategy);N.params=Object.freeze(H.params),N.data=Object.freeze(H.data);let{segmentGroup:U,slicedSegments:ae}=Xv(t,_,R,d);if(ae.length===0&&U.hasChildren())return this.processChildren(m,d,U,N).pipe(ce(oe=>new Pt(N,oe)));if(d.length===0&&ae.length===0)return J(new Pt(N,[]));let ie=on(r)===s;return this.processSegment(m,d,U,ae,ie?he:s,!0,N).pipe(ce(oe=>new Pt(N,oe instanceof Pt?[oe]:[])))}))):zi(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):aS(e,t,r,this.urlSerializer).pipe(bt(i=>i?this.configLoader.loadChildren(e,t).pipe(Ye(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):uS(t))):J({routes:[],injector:e})}};function ES(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function IS(n){let e=n.value.routeConfig;return e&&e.path===""}function xy(n){let e=[],t=new Set;for(let r of n){if(!IS(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=xy(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!t.has(r))}function Zv(n){return n.data||{}}function ey(n){return n.resolve||{}}function bS(n,e,t,r,i,s){return bt(o=>_S(n,e,t,r,o.extractedUrl,i,s).pipe(ce(({state:c,tree:l})=>pe(j({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function TS(n,e){return bt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of Ay(l))o.add(d);let c=0;return Ae(o).pipe(Xr(l=>s.has(l)?SS(l,r,n,e):(l.data=Lc(l,l.parent,n).resolve,J(void 0))),Ye(()=>c++),Fd(1),bt(l=>c===o.size?J(t):jn))})}function Ay(n){let e=n.children.map(t=>Ay(t)).flat();return[n,...e]}function SS(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!_y(i)&&(s[No]=i.title),ac(()=>(n.data=Lc(n,n.parent,t).resolve,CS(s,n,e,r).pipe(ce(o=>(n._resolvedData=o,n.data=j(j({},n.data),o),null)))))}function CS(n,e,t,r){let i=dh(n);if(i.length===0)return J({});let s={};return Ae(i).pipe(bt(o=>xS(n[o],e,t,r).pipe(fr(),Ye(c=>{if(c instanceof Zi)throw Fc(new br,c);s[o]=c}))),Fd(1),ce(()=>s),en(o=>Ty(o)?jn:ho(o)))}function xS(n,e,t,r){let i=Oo(e)??r,s=ts(n,i),o=s.resolve?s.resolve(e,t):Tt(i,()=>s(e,t));return Kn(o)}function lh(n){return De(e=>{let t=n(e);return t?Ae(t).pipe(ce(()=>e)):J(e)})}var Ah=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[No]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>Y(ky),providedIn:"root"})}return n})(),ky=(()=>{class n extends Ah{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ne(Wv))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cr=new we("",{providedIn:"root",factory:()=>({})}),oi=new we(""),$c=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Y(gv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kn(t.loadComponent()).pipe(ce(Dy),Ye(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),cc(()=>{this.componentLoaders.delete(t)})),i=new Nd(r,()=>new Zt).pipe(Md());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Ry(r,this.compiler,t,this.onLoadEndListener).pipe(cc(()=>{this.childrenLoaders.delete(r)})),o=new Nd(s,()=>new Zt).pipe(Md());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ry(n,e,t,r){return Kn(n.loadChildren()).pipe(ce(Dy),bt(i=>i instanceof iv||Array.isArray(i)?J(i):Ae(e.compileModuleAsync(i))),ce(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(oi,[],{optional:!0,self:!0}).flat()),{routes:o.map(xh),injector:s}}))}function AS(n){return n&&typeof n=="object"&&"default"in n}function Dy(n){return AS(n)?n.default:n}var qc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>Y(kS),providedIn:"root"})}return n})(),kS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kh=new we(""),Rh=new we("");function Py(n,e,t){let r=n.get(Rh),i=n.get(Dt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),RS(n))),{onViewTransitionCreated:l}=r;return l&&Tt(n,()=>l({transition:c,from:e,to:t})),o}function RS(n){return new Promise(e=>{ov({read:()=>setTimeout(e)},{injector:n})})}var Dh=new we(""),zc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Zt;transitionAbortWithErrorSubject=new Zt;configLoader=Y($c);environmentInjector=Y($n);destroyRef=Y($d);urlSerializer=Y(ii);rootContexts=Y(si);location=Y($i);inputBindingEnabled=Y(Lo,{optional:!0})!==null;titleStrategy=Y(Ah);options=Y(Cr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Y(qc);createViewTransition=Y(kh,{optional:!0});navigationErrorHandler=Y(Dh,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new kc(i)),r=i=>this.events.next(new Rc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new ct(null),this.transitions.pipe(jt(r=>r!==null),De(r=>{let i=!1;return J(r).pipe(De(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),jn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?pe(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&c!=="reload"){let l="";return this.events.next(new bn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Qi.IgnoredSameUrlNavigation)),s.resolve(!1),jn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return J(s).pipe(De(l=>(this.events.next(new Sr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?jn:Promise.resolve(l))),bS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=pe(j({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let d=new xo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:m,restoredState:v,extras:_}=s,R=new Sr(l,this.urlSerializer.serialize(d),m,v);this.events.next(R);let N=vy(this.rootComponentType).snapshot;return this.currentTransition=r=pe(j({},s),{targetSnapshot:N,urlAfterRedirects:d,extras:pe(j({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,J(r)}else{let l="";return this.events.next(new bn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Qi.IgnoredByUrlHandlingStrategy)),s.resolve(!1),jn}}),Ye(s=>{let o=new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),ce(s=>(this.currentTransition=r=pe(j({},s),{guards:$T(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),ZT(this.environmentInjector,s=>this.events.next(s)),Ye(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Fc(this.urlSerializer,s.guardsResult);let o=new Cc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),jt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",vt.GuardRejected),!1)),lh(s=>{if(s.guards.canActivateChecks.length!==0)return J(s).pipe(Ye(o=>{let c=new xc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),De(o=>{let c=!1;return J(o).pipe(TS(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(o,"",vt.NoDataFromResolver)}}))}),Ye(o=>{let c=new Ac(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}))}),lh(s=>{let o=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ye(d=>{c.component=d}),ce(()=>{})));for(let d of c.children)l.push(...o(d));return l};return Ui(o(s.targetSnapshot.root)).pipe(Ld(null),Ze(1))}),lh(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return c?Ae(c).pipe(ce(()=>r)):J(r)}),ce(s=>{let o=LT(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=pe(j({},s),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),Ye(()=>{this.events.next(new Ao)}),BT(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ze(1),Bd(new kt(s=>{let o=r.abortController.signal,c=()=>s.next();return o.addEventListener("abort",c),()=>o.removeEventListener("abort",c)}).pipe(jt(()=>!i&&!r.targetRouterState),Ye(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vt.Aborted)}))),Ye({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Bd(this.transitionAbortWithErrorSubject.pipe(Ye(s=>{throw s}))),cc(()=>{i||this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),en(s=>{if(this.destroyed)return r.resolve(!1),jn;if(i=!0,by(s))this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),jT(s)?this.events.next(new Xi(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Yi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(c instanceof Zi){let{message:l,cancellationCode:d}=Fc(this.urlSerializer,c);this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Xi(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return jn}))}))}cancelNavigationTransition(t,r,i){let s=new En(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DS(n){return n!==Wi}var My=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>Y(PS),providedIn:"root"})}return n})(),jc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},PS=(()=>{class n extends jc{static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ny=(()=>{class n{urlSerializer=Y(ii);options=Y(Cr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Y($i);urlHandlingStrategy=Y(qc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new In;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof In?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=vy(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>Y(MS),providedIn:"root"})}return n})(),MS=(()=>{class n extends Ny{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Sr?this.updateStateMemento():t instanceof bn?this.commitTransition(r):t instanceof xo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ao?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof En&&t.code!==vt.SupersededByNewNavigation&&t.code!==vt.Redirect?this.restoreHistory(r):t instanceof Yi?this.restoreHistory(r,!0):t instanceof yt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=j(j({},o),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=j(j({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hc(n,e){n.events.pipe(jt(t=>t instanceof yt||t instanceof En||t instanceof Yi||t instanceof bn),ce(t=>t instanceof yt||t instanceof bn?0:(t instanceof En?t.code===vt.Redirect||t.code===vt.SupersededByNewNavigation:!1)?2:1),jt(t=>t!==2),Ze(1)).subscribe(()=>{e()})}var NS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Y(av);stateManager=Y(Ny);options=Y(Cr,{optional:!0})||{};pendingTasks=Y(W0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Y(zc);urlSerializer=Y(ii);location=Y($i);urlHandlingStrategy=Y(qc);injector=Y($n);_events=new Zt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Y(My);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Y(oi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Y(Lo,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new V0;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof En&&r.code!==vt.Redirect&&r.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yt)this.navigated=!0;else if(r instanceof Xi){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DS(i.source)},o);this.scheduleNavigation(c,Wi,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}MT(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=j({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s).catch(l=>{this.injector.get(lc)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(xh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:o,m=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":m=j(j({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let v;try{let _=i?i.snapshot:this.routerState.snapshot.root;v=fy(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return py(v,t,m,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Tr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Wi,null,r)}navigate(t,r={skipLocationChange:!1}){return VS(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},NS):r===!1?i=j({},OS):i=r,Tr(t))return Kv(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Kv(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((v,_)=>{c=v,l=_});let m=this.pendingTasks.add();return Hc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(v=>Promise.reject(v))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Pe(4008,!1)}var zt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=qn(null);get href(){return sn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Zt;applicationErrorHandler=Y(lc);options=Y(Cr,{optional:!0});constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.reactiveHref.set(Y(new yv("href"),{optional:!0}));let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof yt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Tr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Tr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)($(Oe),$(Ct),K0("tabindex"),$(vr),$(yn),$(vo))};static \u0275dir=$e({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&F("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&fc("href",i.reactiveHref(),X0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ei],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ei],replaceUrl:[2,"replaceUrl","replaceUrl",ei],routerLink:"routerLink"},features:[$t]})}return n})(),Mh=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ve;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof yt&&this.update()})}ngAfterContentInit(){J(this.links.changes,J(null)).pipe(po()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ae(t).pipe(po()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=LS(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)($(Oe),$(yn),$(vr),$(Bi),$(zt,8))};static \u0275dir=$e({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&lv(s,zt,5),r&2){let o;uv(o=dv())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[$t]})}return n})();function LS(n){return!!n.paths}var Uo=class{};var Oy=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(jt(t=>t instanceof yt),Xr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=dc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Ae(i).pipe(po())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let s=i.pipe(bt(o=>o===null?J(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ae([s,o]).pipe(po())}else return s})}static \u0275fac=function(r){return new(r||n)(ne(Oe),ne($n),ne(Uo),ne($c))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vy=new we(""),FS=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Wi;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bn&&t.code===Qi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ji&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ji(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tv()};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function Nh(n,...e){return mr([{provide:oi,multi:!0,useValue:n},[],{provide:Ct,useFactory:Ly,deps:[Oe]},{provide:Kd,multi:!0,useFactory:Fy},e.map(t=>t.\u0275providers)])}function Ly(n){return n.routerState.root}function jo(n,e){return{\u0275kind:n,\u0275providers:e}}function Fy(){let n=Y(Rt);return e=>{let t=n.get(cv);if(e!==t.components[0])return;let r=n.get(Oe),i=n.get(Uy);n.get(Oh)===1&&r.initialNavigation(),n.get($y,null,{optional:!0})?.setUpPreloading(),n.get(Vy,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Uy=new we("",{factory:()=>new Zt}),Oh=new we("",{providedIn:"root",factory:()=>1});function jy(){let n=[{provide:Oh,useValue:0},Wd(()=>{let e=Y(Rt);return e.get(Sv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Oe),s=e.get(Uy);Hc(i,()=>{r(!0)}),e.get(zc).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))})];return jo(2,n)}function By(){let n=[Wd(()=>{Y(Oe).setUpLocationChangeListener()}),{provide:Oh,useValue:2}];return jo(3,n)}var $y=new we("");function qy(n){return jo(0,[{provide:$y,useExisting:Oy},{provide:Uo,useExisting:n}])}function zy(){return jo(8,[Sh,{provide:Lo,useExisting:Sh}])}function Hy(n){rv("NgRouterViewTransitions");let e=[{provide:kh,useValue:Py},{provide:Rh,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return jo(9,e)}var Gy=[$i,{provide:ii,useClass:br},Oe,si,{provide:Ct,useFactory:Ly,deps:[Oe]},$c,[]],Bo=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[Gy,[],{provide:oi,multi:!0,useValue:t},[],r?.errorHandler?{provide:Dh,useValue:r.errorHandler}:[],{provide:Cr,useValue:r||{}},r?.useHash?jS():BS(),US(),r?.preloadingStrategy?qy(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$S(r):[],r?.bindToComponentInputs?zy().\u0275providers:[],r?.enableViewTransitions?Hy().\u0275providers:[],qS()]}}static forChild(t){return{ngModule:n,providers:[{provide:oi,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=pr({})}return n})();function US(){return{provide:Vy,useFactory:()=>{let n=Y(Nv),e=Y(lt),t=Y(Cr),r=Y(zc),i=Y(ii);return t.scrollOffset&&n.setOffset(t.scrollOffset),new FS(i,r,n,e,t)}}}function jS(){return{provide:vo,useClass:xv}}function BS(){return{provide:vo,useClass:Cv}}function $S(n){return[n.initialNavigation==="disabled"?By().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jy().\u0275providers:[]]}var Ph=new we("");function qS(){return[{provide:Ph,useFactory:Fy},{provide:Kd,multi:!0,useExisting:Ph}]}var Wy=()=>{};var Yy=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,m=s>>2,v=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,R=d&63;l||(R=64,o||(_=64)),r.push(t[m],t[v],t[_],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Yy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||v==null)throw new Lh;let _=s<<2|c>>4;if(r.push(_),d!==64){let R=c<<4&240|d>>2;if(r.push(R),v!==64){let N=d<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Lh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},HS=function(n){let e=Yy(n);return Gc.encodeByteArray(e,!0)},qo=function(n){return HS(n).replace(/\./g,"")},Wc=function(n){try{return Gc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GS=()=>Uh().__FIREBASE_DEFAULTS__,WS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wc(n[1]);return e&&JSON.parse(e)},Kc=()=>{try{return Wy()||GS()||WS()||KS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jh=n=>{var e,t;return(t=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Jy=n=>{let e=jh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Bh=()=>{var n;return(n=Kc())===null||n===void 0?void 0:n.config},$h=n=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${n}`]};var ci=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function xr(n){return n.endsWith(".cloudworkstations.dev")}function Qc(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Xy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qo(JSON.stringify(t)),qo(JSON.stringify(o)),""].join(".")}var $o={};function QS(){let n={prod:[],emulator:[]};for(let e of Object.keys($o))$o[e]?n.emulator.push(e):n.prod.push(e);return n}function YS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Ky=!1;function Yc(n,e){if(typeof window>"u"||typeof document>"u"||!xr(window.location.host)||$o[n]===e||$o[n]||Ky)return;$o[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",s=QS().prod.length>0;function o(){let _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Ky=!0,o()},_}function m(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){let _=YS(r),R=t("text"),N=document.getElementById(R)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),ae=t("preprendIcon"),ie=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let oe=_.element;c(oe),m(U,H);let ke=d();l(ie,ae),oe.append(ie,N,U,ke),document.body.appendChild(oe)}s?(N.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function JS(){var n;let e=(n=Kc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function n_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r_(){let n=et();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function i_(){return!JS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zo(){try{return typeof indexedDB=="object"}catch{return!1}}function s_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var XS="FirebaseError",Nt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=XS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}},cn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ZS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Nt(i,c,r)}};function ZS(n,e){return n.replace(eC,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eC=/\{\$([^}]+)}/g;function o_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ht(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Qy(s)&&Qy(o)){if(!Ht(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Qy(n){return n!==null&&typeof n=="object"}function ns(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function a_(n,e){let t=new Fh(n,e);return t.subscribe.bind(t)}var Fh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vh),i.error===void 0&&(i.error=Vh),i.complete===void 0&&(i.complete=Vh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tC(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vh(){}var rO=4*60*60*1e3;function ze(n){return n&&n._delegate?n._delegate:n}var _t=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var li="[DEFAULT]";var qh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ci;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rC(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nC(n){return n===li?void 0:n}function rC(n){return n.instantiationMode==="EAGER"}var Jc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var iC=[],ge=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ge||{}),sC={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},oC=ge.INFO,aC={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},cC=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=aC[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=oC,this._logHandler=cC,this._userLogHandler=null,iC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}};var lC=(n,e)=>e.some(t=>n instanceof t),c_,l_;function uC(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dC(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var u_=new WeakMap,Hh=new WeakMap,d_=new WeakMap,zh=new WeakMap,Wh=new WeakMap;function hC(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Sn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&u_.set(t,n)}).catch(()=>{}),Wh.set(e,n),e}function fC(n){if(Hh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Hh.set(n,e)}var Gh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||d_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function h_(n){Gh=n(Gh)}function pC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Xc(this),e,...t);return d_.set(r,e.sort?e.sort():[e]),Sn(r)}:dC().includes(n)?function(...e){return n.apply(Xc(this),e),Sn(u_.get(this))}:function(...e){return Sn(n.apply(Xc(this),e))}}function mC(n){return typeof n=="function"?pC(n):(n instanceof IDBTransaction&&fC(n),lC(n,uC())?new Proxy(n,Gh):n)}function Sn(n){if(n instanceof IDBRequest)return hC(n);if(zh.has(n))return zh.get(n);let e=mC(n);return e!==n&&(zh.set(n,e),Wh.set(e,n)),e}var Xc=n=>Wh.get(n);function p_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Sn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Sn(o.result),l.oldVersion,l.newVersion,Sn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var gC=["get","getKey","getAll","getAllKeys","count"],vC=["put","add","delete","clear"],Kh=new Map;function f_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=vC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gC.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Kh.set(e,s),s}h_(n=>pe(j({},n),{get:(e,t,r)=>f_(e,t)||n.get(e,t,r),has:(e,t)=>!!f_(e,t)||n.has(e,t)}));var Yh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yC(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function yC(n){let e=n.getComponent();return e?.type==="VERSION"}var Jh="@firebase/app",m_="0.13.1";var Qn=new Tn("@firebase/app"),_C="@firebase/app-compat",wC="@firebase/analytics-compat",EC="@firebase/analytics",IC="@firebase/app-check-compat",bC="@firebase/app-check",TC="@firebase/auth",SC="@firebase/auth-compat",CC="@firebase/database",xC="@firebase/data-connect",AC="@firebase/database-compat",kC="@firebase/functions",RC="@firebase/functions-compat",DC="@firebase/installations",PC="@firebase/installations-compat",MC="@firebase/messaging",NC="@firebase/messaging-compat",OC="@firebase/performance",VC="@firebase/performance-compat",LC="@firebase/remote-config",FC="@firebase/remote-config-compat",UC="@firebase/storage",jC="@firebase/storage-compat",BC="@firebase/firestore",$C="@firebase/ai",qC="@firebase/firestore-compat",zC="firebase",HC="11.9.0";var Xh="[DEFAULT]",GC={[Jh]:"fire-core",[_C]:"fire-core-compat",[EC]:"fire-analytics",[wC]:"fire-analytics-compat",[bC]:"fire-app-check",[IC]:"fire-app-check-compat",[TC]:"fire-auth",[SC]:"fire-auth-compat",[CC]:"fire-rtdb",[xC]:"fire-data-connect",[AC]:"fire-rtdb-compat",[kC]:"fire-fn",[RC]:"fire-fn-compat",[DC]:"fire-iid",[PC]:"fire-iid-compat",[MC]:"fire-fcm",[NC]:"fire-fcm-compat",[OC]:"fire-perf",[VC]:"fire-perf-compat",[LC]:"fire-rc",[FC]:"fire-rc-compat",[UC]:"fire-gcs",[jC]:"fire-gcs-compat",[BC]:"fire-fst",[qC]:"fire-fst-compat",[$C]:"fire-vertex","fire-js":"fire-js",[zC]:"fire-js-all"};var Ho=new Map,WC=new Map,Zh=new Map;function g_(n,e){try{n.container.addComponent(e)}catch(t){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ln(n){let e=n.name;if(Zh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,n);for(let t of Ho.values())g_(t,n);for(let t of WC.values())g_(t,n);return!0}function rs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ot(n){return n==null?!1:n.settings!==void 0}var KC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new cn("app","Firebase",KC);var ef=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}};var kr=HC;function rf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Xh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ar.create("bad-app-name",{appName:String(i)});if(t||(t=Bh()),!t)throw Ar.create("no-options");let s=Ho.get(i);if(s){if(Ht(t,s.options)&&Ht(r,s.config))return s;throw Ar.create("duplicate-app",{appName:i})}let o=new Jc(i);for(let l of Zh.values())o.addComponent(l);let c=new ef(t,r,o);return Ho.set(i,c),c}function ui(n=Xh){let e=Ho.get(n);if(!e&&n===Xh&&Bh())return rf();if(!e)throw Ar.create("no-app",{appName:n});return e}function Zc(){return Array.from(Ho.values())}function He(n,e,t){var r;let i=(r=GC[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(c.join(" "));return}ln(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var QC="firebase-heartbeat-database",YC=1,Go="firebase-heartbeat-store",Qh=null;function w_(){return Qh||(Qh=p_(QC,YC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Go)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ar.create("idb-open",{originalErrorMessage:n.message})})),Qh}function JC(n){return E(this,null,function*(){try{let t=(yield w_()).transaction(Go),r=yield t.objectStore(Go).get(E_(n));return yield t.done,r}catch(e){if(e instanceof Nt)Qn.warn(e.message);else{let t=Ar.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(t.message)}}})}function v_(n,e){return E(this,null,function*(){try{let r=(yield w_()).transaction(Go,"readwrite");yield r.objectStore(Go).put(e,E_(n)),yield r.done}catch(t){if(t instanceof Nt)Qn.warn(t.message);else{let r=Ar.create("idb-set",{originalErrorMessage:t?.message});Qn.warn(r.message)}}})}function E_(n){return`${n.name}!${n.options.appId}`}var XC=1024,ZC=30,tf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new nf(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>ZC){let o=tx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=y_(),{heartbeatsToSend:r,unsentEntries:i}=ex(this._heartbeatsCache.heartbeats),s=qo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Qn.warn(t),""}})}};function y_(){return new Date().toISOString().substring(0,10)}function ex(n,e=XC){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),__(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),__(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var nf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return zo()?s_().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield JC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return v_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return v_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function __(n){return qo(JSON.stringify({version:2,heartbeats:n})).length}function tx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function nx(n){ln(new _t("platform-logger",e=>new Yh(e),"PRIVATE")),ln(new _t("heartbeat",e=>new tf(e),"PRIVATE")),He(Jh,m_,n),He(Jh,m_,"esm2017"),He("fire-js","")}nx("");var rx="firebase",ix="11.9.1";He(rx,ix,"app");function I_(n){n===void 0&&(n=Y(Rt));let e=n.get(uc);return t=>new kt(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),o()},complete:()=>{r.complete(),o()},error:l=>{r.error(l),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var Rr=new Yd("ANGULARFIRE2_VERSION");function Wo(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ss=(n,e)=>{let t=e?[e]:Zc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},is=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(is||{}),b_=Jd()&&typeof Zone<"u"?is.WARN:is.SILENT;var el=class{zone;delegate;constructor(e,t=F0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Dr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Y(lt);this.outsideAngular=t.runOutsideAngular(()=>new el(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new el(typeof Zone>"u"?void 0:Zone.current,L0))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T_=!1;function sx(n,e){!T_&&(b_>is.SILENT||Jd())&&(T_=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),b_>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function ox(n){let e=Y(lt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function di(n){let e=Y(lt,{optional:!0});return e?e.run(()=>n()):n()}var ax=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Tt(t,()=>di(()=>n.apply(void 0,r)))),Ue=(n,e,t)=>(t||=e?is.WARN:is.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=Y(Dr),o=Y(uc),c=Y($n)}catch{return sx(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=di(()=>o.add())),i[d]=ax(i[d],r,c));let l=ox(()=>n.apply(this,i));return e?l instanceof kt?l.pipe(Vd(s.outsideAngular),Od(s.insideAngular),I_(c)):l instanceof Promise?di(()=>{let d=o.add();return new Promise((m,v)=>{l.then(_=>Tt(c,()=>di(()=>m(_))),_=>Tt(c,()=>di(()=>v(_)))).finally(d)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:di(()=>l):l instanceof kt?l.pipe(Vd(s.outsideAngular),Od(s.insideAngular)):di(()=>l)});var Yn=class{constructor(e){return e}},hi=class{constructor(){return Zc()}};function cx(n){return n&&n.length===1?n[0]:new Yn(ui())}var sf=new we("angularfire2._apps"),lx={provide:Yn,useFactory:cx,deps:[[new Bt,sf]]},ux={provide:hi,deps:[[new Bt,sf]]};function dx(n){return(e,t)=>{let r=t.get(Zr);He("angularfire",Rr.full,"core"),He("angularfire",Rr.full,"app"),He("angular",wv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Yn(i)}}function S_(n,...e){return mr([lx,ux,{provide:sf,useFactory:dx(n),multi:!0,deps:[lt,Rt,Dr,...e]}])}var C_=Ue(rf,!0);var hx=new Map,fx={activated:!1,tokenObservers:[]},px={initialized:!1,enabled:!1};function un(n){return hx.get(n)||Object.assign({},fx)}function R_(){return px}var mx="https://content-firebaseappcheck.googleapis.com/v1";var gx="exchangeDebugToken",x_={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},oV=24*60*60*1e3;var cf=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new ci,this.pending.promise.catch(t=>{}),yield vx(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ci,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function vx(n){return new Promise(e=>{setTimeout(e,n)})}var yx={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pr=new cn("appCheck","AppCheck",yx);function D_(n){if(!un(n).activated)throw Pr.create("use-before-activation",{appName:n.name})}function P_(r,i){return E(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let R=yield o.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(R){throw Pr.create("fetch-network-error",{originalErrorMessage:R?.message})}if(l.status!==200)throw Pr.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(R){throw Pr.create("fetch-parse-error",{originalErrorMessage:R?.message})}let m=d.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let v=Number(m[1])*1e3,_=Date.now();return{token:d.token,expireTimeMillis:_+v,issuedAtTimeMillis:_}})}function M_(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${mx}/projects/${t}/apps/${r}:${gx}?key=${i}`,body:{debug_token:e}}}var _x="firebase-app-check-database",wx=1,lf="firebase-app-check-store";var tl=null;function Ex(){return tl||(tl=new Promise((n,e)=>{try{let t=indexedDB.open(_x,wx);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Pr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lf,{keyPath:"compositeKey"})}}}catch(t){e(Pr.create("storage-open",{originalErrorMessage:t?.message}))}}),tl)}function Ix(n,e){return bx(Tx(n),e)}function bx(n,e){return E(this,null,function*(){let r=(yield Ex()).transaction(lf,"readwrite"),s=r.objectStore(lf).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var d;c(Pr.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function Tx(n){return`${n.options.appId}-${n.name}`}var Ko=new Tn("@firebase/app-check");function of(n,e){return zo()?Ix(n,e).catch(t=>{Ko.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function N_(){return R_().enabled}function O_(){return E(this,null,function*(){let n=R_();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Sx={error:"UNKNOWN_ERROR"};function Cx(n){return Gc.encodeString(JSON.stringify(n),!1)}function uf(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;D_(r);let i=un(r),s=i.token,o;if(s&&!Qo(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(Qo(d)?s=d:yield of(r,void 0))}if(!e&&s&&Qo(s))return{token:s.token};let c=!1;if(N_())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=P_(M_(r,yield O_()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield of(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ko.warn(d.message):t&&Ko.error(d),af(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield un(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ko.warn(d.message):t&&Ko.error(d),o=d}let l;return s?o?Qo(s)?l={token:s.token,internalError:o}:l=af(o):(l={token:s.token},i.token=s,yield of(r,s)):l=af(o),c&&Rx(r,l),l})}function xx(n){return E(this,null,function*(){let e=n.app;D_(e);let{provider:t}=un(e);if(N_()){let r=yield O_(),{token:i}=yield P_(M_(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Ax(n,e,t,r){let{app:i}=n,s=un(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Qo(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),A_(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>A_(n))}function V_(n,e){let t=un(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function A_(n){let{app:e}=n,t=un(e),r=t.tokenRefresher;r||(r=kx(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kx(n){let{app:e}=n;return new cf(()=>E(null,null,function*(){let t=un(e),r;if(t.token?r=yield uf(n,!0):r=yield uf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=un(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},x_.RETRIAL_MIN_WAIT,x_.RETRIAL_MAX_WAIT)}function Rx(n,e){let t=un(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qo(n){return n.expireTimeMillis-Date.now()>0}function af(n){return{token:Cx(Sx),error:n}}var df=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=un(this.app);for(let t of e)V_(this.app,t.next);return Promise.resolve()}};function Dx(n,e){return new df(n,e)}function Px(n){return{getToken:e=>uf(n,e),getLimitedUseToken:()=>xx(n),addTokenListener:e=>Ax(n,"INTERNAL",e),removeTokenListener:e=>V_(n.app,e)}}var Mx="@firebase/app-check",Nx="0.10.0";var Ox="app-check",k_="app-check-internal";function Vx(){ln(new _t(Ox,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Dx(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(k_).initialize()})),ln(new _t(k_,n=>{let e=n.getProvider("app-check").getImmediate();return Px(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),He(Mx,Nx)}Vx();var Lx="app-check";var os=class{constructor(){return ss(Lx)}};var Fx=["localhost","0.0.0.0","127.0.0.1"],_V=typeof window<"u"&&Fx.includes(window.location.hostname);function J_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var X_=J_,Z_=new cn("auth","Firebase",J_());var al=new Tn("@firebase/auth");function Ux(n,...e){al.logLevel<=ge.WARN&&al.warn(`Auth (${kr}): ${n}`,...e)}function rl(n,...e){al.logLevel<=ge.ERROR&&al.error(`Auth (${kr}): ${n}`,...e)}function xn(n,...e){throw kf(n,...e)}function dn(n,...e){return kf(n,...e)}function Af(n,e,t){let r=Object.assign(Object.assign({},X_()),{[e]:t});return new cn("auth","Firebase",r).create(e,{appName:n.name})}function fi(n){return Af(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jx(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&xn(n,"argument-error"),Af(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kf(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Z_.create(n,...e)}function re(n,e,...t){if(!n)throw kf(e,...t)}function Jn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rl(e),new Error(e)}function Zn(n,e){n||Jn(e)}function pf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Bx(){return L_()==="http:"||L_()==="https:"}function L_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function $x(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bx()||t_()||"connection"in navigator)?navigator.onLine:!0}function qx(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var pi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile=Zy()||n_()}get(){return $x()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rf(n,e){Zn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var cl=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Hx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gx=new pi(3e4,6e4);function Df(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function cs(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){return ew(n,i,()=>E(null,null,function*(){let d={},m={};r&&(e==="GET"?m=r:d={body:JSON.stringify(r)});let v=ns(Object.assign({key:n.config.apiKey},m)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:_},d);return e_()||(R.referrerPolicy="no-referrer"),n.emulatorConfig&&xr(n.emulatorConfig.host)&&(R.credentials="include"),cl.fetch()(yield tw(n,n.config.apiHost,t,v),R)}))})}function ew(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},zx),e);try{let i=new mf(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nl(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nl(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw nl(n,"user-disabled",o);let m=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Af(n,m,d);xn(n,m)}}catch(i){if(i instanceof Nt)throw i;xn(n,"network-request-failed",{message:String(i)})}})}function Wx(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){let d=yield cs(n,e,t,r,i);return"mfaPendingCredential"in d&&xn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function tw(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Rf(n.config,i):`${n.config.apiScheme}://${i}`;return Hx.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var mf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),Gx.get())})}};function nl(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=dn(n,e,r);return i.customData._tokenResponse=t,i}function Kx(n,e){return E(this,null,function*(){return cs(n,"POST","/v1/accounts:delete",e)})}function ll(n,e){return E(this,null,function*(){return cs(n,"POST","/v1/accounts:lookup",e)})}function Yo(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Pf(n,e=!1){return E(this,null,function*(){let t=ze(n),r=yield t.getIdToken(e),i=Mf(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Yo(hf(i.auth_time)),issuedAtTime:Yo(hf(i.iat)),expirationTime:Yo(hf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function hf(n){return Number(n)*1e3}function Mf(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wc(t);return i?JSON.parse(i):(rl("Failed to decode base64 JWT payload"),null)}catch(i){return rl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function F_(n){let e=Mf(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xo(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nt&&Qx(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Qx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Zo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yo(this.lastLoginAt),this.creationTime=Yo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ul(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xo(n,ll(t,{idToken:r}));re(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nw(s.providerUserInfo):[],c=Yx(n.providerData,o),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,m=l?d:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Zo(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,v)})}function Nf(n){return E(this,null,function*(){let e=ze(n);yield ul(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Yx(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nw(n){return n.map(e=>{var{providerId:t}=e,r=oc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Jx(n,e){return E(this,null,function*(){let t=yield ew(n,{},()=>E(null,null,function*(){let r=ns({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield tw(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&xr(n.emulatorConfig.host)&&(l.credentials="include"),cl.fetch()(o,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Xx(n,e){return E(this,null,function*(){return cs(n,"POST","/v2/accounts:revokeToken",Df(n,e))})}var Jo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=F_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Jx(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Jn("not implemented")}};function Mr(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Nr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=oc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Xo(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Pf(this,e)}reload(){return Nf(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ul(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Ot(this.auth.app))return Promise.reject(fi(this.auth));let e=yield this.getIdToken();return yield Xo(this,Kx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,d,m;let v=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,H=(c=t.tenantId)!==null&&c!==void 0?c:void 0,U=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,ae=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ie=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:oe,emailVerified:ke,isAnonymous:ht,providerData:Se,stsTokenManager:S}=t;re(oe&&S,e,"internal-error");let w=Jo.fromJSON(this.name,S);re(typeof oe=="string",e,"internal-error"),Mr(v,e.name),Mr(_,e.name),re(typeof ke=="boolean",e,"internal-error"),re(typeof ht=="boolean",e,"internal-error"),Mr(R,e.name),Mr(N,e.name),Mr(H,e.name),Mr(U,e.name),Mr(ae,e.name),Mr(ie,e.name);let b=new n({uid:oe,auth:e,email:_,emailVerified:ke,displayName:v,isAnonymous:ht,photoURL:N,phoneNumber:R,tenantId:H,stsTokenManager:w,createdAt:ae,lastLoginAt:ie});return Se&&Array.isArray(Se)&&(b.providerData=Se.map(T=>Object.assign({},T))),U&&(b._redirectEventId=U),b}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Jo;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ul(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];re(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?nw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Jo;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var U_=new Map;function Xn(n){Zn(n instanceof Function,"Expected a class definition");let e=U_.get(n);return e?(Zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,U_.set(n,e),e)}var Zx=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),vf=Zx;function il(n,e,t){return`firebase:${n}:${e}:${t}`}var dl=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=il(this.userKey,i.apiKey,s),this.fullPersistenceKey=il("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ll(this.auth,{idToken:e}).catch(()=>{});return t?Nr._fromGetAccountInfoResponse(this.auth,t,e):null}return Nr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Xn(vf),e,r);let i=(yield Promise.all(t.map(d=>E(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Xn(vf),o=il(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let m=yield d._get(o);if(m){let v;if(typeof m=="string"){let _=yield ll(e,{idToken:m}).catch(()=>{});if(!_)break;v=yield Nr._fromGetAccountInfoResponse(e,_,m)}else v=Nr._fromJSON(e,m);d!==s&&(c=v),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>E(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function j_(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ow(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cw(e))return"Blackberry";if(lw(e))return"Webos";if(iw(e))return"Safari";if((e.includes("chrome/")||sw(e))&&!e.includes("edge/"))return"Chrome";if(aw(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function rw(n=et()){return/firefox\//i.test(n)}function iw(n=et()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(n=et()){return/crios\//i.test(n)}function ow(n=et()){return/iemobile/i.test(n)}function aw(n=et()){return/android/i.test(n)}function cw(n=et()){return/blackberry/i.test(n)}function lw(n=et()){return/webos/i.test(n)}function Of(n=et()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eA(n=et()){var e;return Of(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tA(){return r_()&&document.documentMode===10}function uw(n=et()){return Of(n)||aw(n)||lw(n)||cw(n)||/windows phone/i.test(n)||ow(n)}function dw(n,e=[]){let t;switch(n){case"Browser":t=j_(et());break;case"Worker":t=`${j_(et())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${kr}/${r}`}var yf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function nA(t){return E(this,arguments,function*(n,e={}){return cs(n,"GET","/v2/passwordPolicy",Df(n,e))})}var rA=6,_f=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:rA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wf=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hl(this),this.idTokenSubscription=new hl(this),this.beforeStateQueue=new yf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield dl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield ll(this,{idToken:e}),r=yield Nr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Ot(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield ul(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=qx()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Ot(this.app))return Promise.reject(fi(this));let t=e?ze(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Ot(this.app)?Promise.reject(fi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ot(this.app)?Promise.reject(fi(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield nA(this),t=new _f(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Xx(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xn(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield dl.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(Ot(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ux(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function wl(n){return ze(n)}var hl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=a_(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vf={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iA(n){Vf=n}function sA(n){return Vf.loadJS(n)}function oA(){return Vf.gapiScript}function hw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Lf(n,e){let t=rs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Ht(s,e??{}))return i;xn(i,"already-initialized")}return t.initialize({options:e})}function aA(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ff(n,e,t){let r=wl(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=fw(e),{host:o,port:c}=cA(e),l=c===null?"":`:${c}`,d={url:`${s}//${o}${l}/`},m=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Ht(d,r.config.emulator)&&Ht(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,xr(o)?(Qc(`${s}//${o}${l}`),Yc("Auth",!0)):i||lA()}function fw(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cA(n){let e=fw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:B_(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:B_(o)}}}function B_(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function lA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ea=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,t){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}};function as(n,e){return E(this,null,function*(){return Wx(n,"POST","/v1/accounts:signInWithIdp",Df(n,e))})}var uA="http://localhost",fl=class n extends ea{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=oc(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return as(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,as(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,as(e,t)}buildRequest(){let e={requestUri:uA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ns(t)}return e}};var ta=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var pl=class extends ta{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Uf=(()=>{class n extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return fl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var na=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield Nr._fromIdTokenResponse(e,r,i),o=$_(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$_(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ef=class n extends Nt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function pw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(n,s,e,r):s})}function dA(n,e,t=!1){return E(this,null,function*(){let r=yield Xo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return na._forOperation(n,"link",r)})}function hA(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Ot(r.app))return Promise.reject(fi(r));let i="reauthenticate";try{let s=yield Xo(n,pw(r,i,e,n),t);re(s.idToken,r,"internal-error");let o=Mf(s.idToken);re(o,r,"internal-error");let{sub:c}=o;return re(n.uid===c,r,"user-mismatch"),na._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&xn(r,"user-mismatch"),s}})}function fA(n,e,t=!1){return E(this,null,function*(){if(Ot(n.app))return Promise.reject(fi(n));let r="signIn",i=yield pw(n,r,e),s=yield na._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function ia(n,e,t,r){return ze(n).onIdTokenChanged(e,t,r)}function jf(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function Bf(n){return ze(n).signOut()}var ml="__sak";var gl=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var pA=1e3,mA=10,gA=(()=>{class n extends gl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);tA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,mA):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},pA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield hr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield hr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield hr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),mw=gA;var vA=(()=>{class n extends gl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),$f=vA;function yA(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var _A=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(m=>E(this,null,function*(){return m(r.origin,o)})),d=yield yA(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function qf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var If=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=qf("",20);i.port1.start();let m=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){let _=v;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(m),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Cn(){return window}function wA(n){Cn().location.href=n}function gw(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}function EA(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function IA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bA(){return gw()?self:null}var vw="firebaseLocalStorageDb",TA=1,vl="firebaseLocalStorage",yw="fbase_key",mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function El(n,e){return n.transaction([vl],e?"readwrite":"readonly").objectStore(vl)}function SA(){let n=indexedDB.deleteDatabase(vw);return new mi(n).toPromise()}function bf(){let n=indexedDB.open(vw,TA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(vl,{keyPath:yw})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(vl)?e(r):(r.close(),yield SA(),e(yield bf()))}))})}function q_(n,e,t){return E(this,null,function*(){let r=El(n,!0).put({[yw]:e,value:t});return new mi(r).toPromise()})}function CA(n,e){return E(this,null,function*(){let t=El(n,!1).get(e),r=yield new mi(t).toPromise();return r===void 0?null:r.value})}function z_(n,e){let t=El(n,!0).delete(e);return new mi(t).toPromise()}var xA=800,AA=3,kA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield bf(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>AA)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return gw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=_A._getInstance(bA()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield EA(),!this.activeServiceWorker)return;this.sender=new If(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||IA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield bf();return yield q_(t,ml,"1"),yield z_(t,ml),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>q_(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>CA(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>z_(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=El(s,!1).getAll();return new mi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),xA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),_w=kA;var kV=hw("rcb"),RV=new pi(3e4,6e4);function ww(n,e){return e?Xn(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ra=class extends ea{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return as(e,this._buildIdpRequest())}_linkToIdToken(e,t){return as(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return as(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function RA(n){return fA(n.auth,new ra(n),n.bypassAuthState)}function DA(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),hA(t,new ra(n),n.bypassAuthState)}function PA(n){return E(this,null,function*(){let{auth:e,user:t}=n;return re(t,e,"internal-error"),dA(t,new ra(n),n.bypassAuthState)})}var yl=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RA;case"linkViaPopup":case"linkViaRedirect":return PA;case"reauthViaPopup":case"reauthViaRedirect":return DA;default:xn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var MA=new pi(2e3,1e4);function zf(n,e,t){return E(this,null,function*(){if(Ot(n.app))return Promise.reject(dn(n,"operation-not-supported-in-this-environment"));let r=wl(n);jx(n,e,ta);let i=ww(r,t);return new NA(r,"signInViaPopup",e,i).executeNotNull()})}var NA=(()=>{class n extends yl{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return E(this,null,function*(){let t=yield this.execute();return re(t,this.auth,"internal-error"),t})}onExecution(){return E(this,null,function*(){Zn(this.filter.length===1,"Popup operations only handle one event");let t=qf();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,MA.get())};t()}}n.currentPopupAction=null;return n})(),OA="pendingRedirect",sl=new Map,Tf=class n extends yl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=sl.get(this.auth._key());if(!e){try{let r=(yield VA(this.resolver,this.auth))?yield hr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return hr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,hr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function VA(n,e){return E(this,null,function*(){let t=UA(e),r=FA(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function LA(n,e){sl.set(n._key(),e)}function FA(n){return Xn(n._redirectPersistence)}function UA(n){return il(OA,n.config.apiKey,n.name)}function jA(n,e,t=!1){return E(this,null,function*(){if(Ot(n.app))return Promise.reject(fi(n));let r=wl(n),i=ww(r,e),o=yield new Tf(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var BA=10*60*1e3,Sf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$A(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ew(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(dn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BA&&this.cachedEventUids.clear(),this.cachedEventUids.has(H_(e))}saveEventToCache(e){this.cachedEventUids.add(H_(e)),this.lastProcessedEventTime=Date.now()}};function H_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ew({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $A(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ew(n);default:return!1}}function qA(t){return E(this,arguments,function*(n,e={}){return cs(n,"GET","/v1/projects",e)})}var zA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HA=/^https?/;function GA(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield qA(n);for(let t of e)try{if(WA(t))return}catch{}xn(n,"unauthorized-domain")})}function WA(n){let e=pf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!HA.test(t))return!1;if(zA.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var KA=new pi(3e4,6e4);function G_(){let n=Cn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function QA(n){return new Promise((e,t)=>{var r,i,s;function o(){G_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G_(),t(dn(n,"network-request-failed"))},timeout:KA.get()})}if(!((i=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Cn().gapi)===null||s===void 0)&&s.load)o();else{let c=hw("iframefcb");return Cn()[c]=()=>{gapi.load?o():t(dn(n,"network-request-failed"))},sA(`${oA()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw ol=null,e})}var ol=null;function YA(n){return ol=ol||QA(n),ol}var JA=new pi(5e3,15e3),XA="__/auth/iframe",ZA="emulator/auth/iframe",ek={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nk(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Rf(e,ZA):`https://${n.config.authDomain}/${XA}`,r={apiKey:e.apiKey,appName:n.name,v:kr},i=tk.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ns(r).slice(1)}`}function rk(n){return E(this,null,function*(){let e=yield YA(n),t=Cn().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:nk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ek,dontclear:!0},r=>new Promise((i,s)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=dn(n,"network-request-failed"),c=Cn().setTimeout(()=>{s(o)},JA.get());function l(){Cn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var ik={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sk=500,ok=600,ak="_blank",ck="http://localhost",_l=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function lk(n,e,t,r=sk,i=ok){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},ik),{width:r.toString(),height:i.toString(),top:s,left:o}),d=et().toLowerCase();t&&(c=sw(d)?ak:t),rw(d)&&(e=e||ck,l.scrollbars="yes");let m=Object.entries(l).reduce((_,[R,N])=>`${_}${R}=${N},`,"");if(eA(d)&&c!=="_self")return uk(e||"",c),new _l(null);let v=window.open(e||"",c,m);re(v,n,"popup-blocked");try{v.focus()}catch{}return new _l(v)}function uk(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var dk="__/auth/handler",hk="emulator/auth/handler",fk=encodeURIComponent("fac");function W_(n,e,t,r,i,s){return E(this,null,function*(){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:kr,eventId:i};if(e instanceof ta){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",o_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,v]of Object.entries(s||{}))o[m]=v}if(e instanceof pl){let m=e.getScopes().filter(v=>v!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let m of Object.keys(c))c[m]===void 0&&delete c[m];let l=yield n._getAppCheckToken(),d=l?`#${fk}=${encodeURIComponent(l)}`:"";return`${pk(n)}?${ns(c).slice(1)}${d}`})}function pk({config:n}){return n.emulator?Rf(n,hk):`https://${n.authDomain}/${dk}`}var ff="webStorageSupport",Cf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$f,this._completeRedirectFn=jA,this._overrideRedirectResult=LA}_openPopup(e,t,r,i){return E(this,null,function*(){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield W_(e,t,r,pf(),i);return lk(e,o,qf())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield W_(e,t,r,pf(),i);return wA(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield rk(e),r=new Sf(e);return t.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ff,{type:ff},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ff];o!==void 0&&t(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uw()||iw()||Of()}},Iw=Cf;var K_="@firebase/auth",Q_="1.10.7";var xf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function mk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gk(n){ln(new _t("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dw(n)},d=new wf(r,i,s,l);return aA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ln(new _t("auth-internal",e=>{let t=wl(e.getProvider("auth").getImmediate());return(r=>new xf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(K_,Q_,mk(n)),He(K_,Q_,"esm2017")}var vk=5*60,yk=$h("authIdTokenMaxAge")||vk,Y_=null,_k=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yk)return;let i=t?.token;Y_!==i&&(Y_=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Hf(n=ui()){let e=rs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Lf(n,{popupRedirectResolver:Iw,persistence:[_w,mw,$f]}),r=$h("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=_k(s.toString());jf(t,o,()=>o(t.currentUser)),ia(t,c=>o(c))}}let i=jh("auth");return i&&Ff(t,`http://${i}`),t}function wk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iA({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=dn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",wk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gk("Browser");function Sw(n){return new kt(function(e){var t=ia(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Cw="auth",gi=class{constructor(e){return e}},sa=class{constructor(){return ss(Cw)}};var Gf=new we("angularfire2.auth-instances");function lR(n,e){let t=Wo(Cw,n,e);return t&&new gi(t)}function uR(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gi(r)}}var dR={provide:sa,deps:[[new Bt,Gf]]},hR={provide:gi,useFactory:lR,deps:[[new Bt,Gf],Yn]};function xw(n,...e){return He("angularfire",Rr.full,"auth"),mr([hR,dR,{provide:Gf,useFactory:uR(n),multi:!0,deps:[lt,Rt,Dr,hi,[new Bt,os],...e]}])}var Aw=Ue(Sw,!0);var kw=Ue(Hf,!0);var Rw=Ue(zf,!0,2);var Dw=Ue(Bf,!0,2);var Pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mw={};var er,Wf;(function(){var n;function e(S,w){function b(){}b.prototype=w.prototype,S.D=w.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(T,C,k){for(var I=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)I[Ln-2]=arguments[Ln];return w.prototype[C].apply(T,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,w,b){b||(b=0);var T=Array(16);if(typeof w=="string")for(var C=0;16>C;++C)T[C]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(C=0;16>C;++C)T[C]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=S.g[0],b=S.g[1],C=S.g[2];var k=S.g[3],I=w+(k^b&(C^k))+T[0]+3614090360&4294967295;w=b+(I<<7&4294967295|I>>>25),I=k+(C^w&(b^C))+T[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=C+(b^k&(w^b))+T[2]+606105819&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(w^C&(k^w))+T[3]+3250441966&4294967295,b=C+(I<<22&4294967295|I>>>10),I=w+(k^b&(C^k))+T[4]+4118548399&4294967295,w=b+(I<<7&4294967295|I>>>25),I=k+(C^w&(b^C))+T[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=C+(b^k&(w^b))+T[6]+2821735955&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(w^C&(k^w))+T[7]+4249261313&4294967295,b=C+(I<<22&4294967295|I>>>10),I=w+(k^b&(C^k))+T[8]+1770035416&4294967295,w=b+(I<<7&4294967295|I>>>25),I=k+(C^w&(b^C))+T[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=C+(b^k&(w^b))+T[10]+4294925233&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(w^C&(k^w))+T[11]+2304563134&4294967295,b=C+(I<<22&4294967295|I>>>10),I=w+(k^b&(C^k))+T[12]+1804603682&4294967295,w=b+(I<<7&4294967295|I>>>25),I=k+(C^w&(b^C))+T[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=C+(b^k&(w^b))+T[14]+2792965006&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(w^C&(k^w))+T[15]+1236535329&4294967295,b=C+(I<<22&4294967295|I>>>10),I=w+(C^k&(b^C))+T[1]+4129170786&4294967295,w=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(w^b))+T[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=C+(w^b&(k^w))+T[11]+643717713&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^w&(C^k))+T[0]+3921069994&4294967295,b=C+(I<<20&4294967295|I>>>12),I=w+(C^k&(b^C))+T[5]+3593408605&4294967295,w=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(w^b))+T[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=C+(w^b&(k^w))+T[15]+3634488961&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^w&(C^k))+T[4]+3889429448&4294967295,b=C+(I<<20&4294967295|I>>>12),I=w+(C^k&(b^C))+T[9]+568446438&4294967295,w=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(w^b))+T[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=C+(w^b&(k^w))+T[3]+4107603335&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^w&(C^k))+T[8]+1163531501&4294967295,b=C+(I<<20&4294967295|I>>>12),I=w+(C^k&(b^C))+T[13]+2850285829&4294967295,w=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(w^b))+T[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=C+(w^b&(k^w))+T[7]+1735328473&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^w&(C^k))+T[12]+2368359562&4294967295,b=C+(I<<20&4294967295|I>>>12),I=w+(b^C^k)+T[5]+4294588738&4294967295,w=b+(I<<4&4294967295|I>>>28),I=k+(w^b^C)+T[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=C+(k^w^b)+T[11]+1839030562&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^w)+T[14]+4259657740&4294967295,b=C+(I<<23&4294967295|I>>>9),I=w+(b^C^k)+T[1]+2763975236&4294967295,w=b+(I<<4&4294967295|I>>>28),I=k+(w^b^C)+T[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=C+(k^w^b)+T[7]+4139469664&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^w)+T[10]+3200236656&4294967295,b=C+(I<<23&4294967295|I>>>9),I=w+(b^C^k)+T[13]+681279174&4294967295,w=b+(I<<4&4294967295|I>>>28),I=k+(w^b^C)+T[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=C+(k^w^b)+T[3]+3572445317&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^w)+T[6]+76029189&4294967295,b=C+(I<<23&4294967295|I>>>9),I=w+(b^C^k)+T[9]+3654602809&4294967295,w=b+(I<<4&4294967295|I>>>28),I=k+(w^b^C)+T[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=C+(k^w^b)+T[15]+530742520&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^w)+T[2]+3299628645&4294967295,b=C+(I<<23&4294967295|I>>>9),I=w+(C^(b|~k))+T[0]+4096336452&4294967295,w=b+(I<<6&4294967295|I>>>26),I=k+(b^(w|~C))+T[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=C+(w^(k|~b))+T[14]+2878612391&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~w))+T[5]+4237533241&4294967295,b=C+(I<<21&4294967295|I>>>11),I=w+(C^(b|~k))+T[12]+1700485571&4294967295,w=b+(I<<6&4294967295|I>>>26),I=k+(b^(w|~C))+T[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=C+(w^(k|~b))+T[10]+4293915773&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~w))+T[1]+2240044497&4294967295,b=C+(I<<21&4294967295|I>>>11),I=w+(C^(b|~k))+T[8]+1873313359&4294967295,w=b+(I<<6&4294967295|I>>>26),I=k+(b^(w|~C))+T[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=C+(w^(k|~b))+T[6]+2734768916&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~w))+T[13]+1309151649&4294967295,b=C+(I<<21&4294967295|I>>>11),I=w+(C^(b|~k))+T[4]+4149444226&4294967295,w=b+(I<<6&4294967295|I>>>26),I=k+(b^(w|~C))+T[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=C+(w^(k|~b))+T[2]+718787259&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~w))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+k&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var b=w-this.blockSize,T=this.B,C=this.h,k=0;k<w;){if(C==0)for(;k<=b;)i(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<w;)if(T[C++]=S.charCodeAt(k++),C==this.blockSize){i(this,T),C=0;break}}else for(;k<w;)if(T[C++]=S[k++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var b=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=b&255,b/=256;for(this.u(S),S=Array(16),w=b=0;4>w;++w)for(var T=0;32>T;T+=8)S[b++]=this.g[w]>>>T&255;return S};function s(S,w){var b=c;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=w(S)}function o(S,w){this.h=w;for(var b=[],T=!0,C=S.length-1;0<=C;C--){var k=S[C]|0;T&&k==w||(b[C]=k,T=!1)}this.g=b}var c={};function l(S){return-128<=S&&128>S?s(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return U(d(-S));for(var w=[],b=1,T=0;S>=b;T++)w[T]=S/b|0,b*=4294967296;return new o(w,0)}function m(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return U(m(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(w,8)),T=v,C=0;C<S.length;C+=8){var k=Math.min(8,S.length-C),I=parseInt(S.substring(C,C+k),w);8>k?(k=d(Math.pow(w,k)),T=T.j(k).add(d(I))):(T=T.j(b),T=T.add(d(I)))}return T}var v=l(0),_=l(1),R=l(16777216);n=o.prototype,n.m=function(){if(H(this))return-U(this).m();for(var S=0,w=1,b=0;b<this.g.length;b++){var T=this.i(b);S+=(0<=T?T:4294967296+T)*w,w*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(H(this))return"-"+U(this).toString(S);for(var w=d(Math.pow(S,6)),b=this,T="";;){var C=ke(b,w).g;b=ae(b,C.j(w));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=C,N(b))return k+T;for(;6>k.length;)k="0"+k;T=k+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function H(S){return S.h==-1}n.l=function(S){return S=ae(this,S),H(S)?-1:N(S)?0:1};function U(S){for(var w=S.g.length,b=[],T=0;T<w;T++)b[T]=~S.g[T];return new o(b,~S.h).add(_)}n.abs=function(){return H(this)?U(this):this},n.add=function(S){for(var w=Math.max(this.g.length,S.g.length),b=[],T=0,C=0;C<=w;C++){var k=T+(this.i(C)&65535)+(S.i(C)&65535),I=(k>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);T=I>>>16,k&=65535,I&=65535,b[C]=I<<16|k}return new o(b,b[b.length-1]&-2147483648?-1:0)};function ae(S,w){return S.add(U(w))}n.j=function(S){if(N(this)||N(S))return v;if(H(this))return H(S)?U(this).j(U(S)):U(U(this).j(S));if(H(S))return U(this.j(U(S)));if(0>this.l(R)&&0>S.l(R))return d(this.m()*S.m());for(var w=this.g.length+S.g.length,b=[],T=0;T<2*w;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<S.g.length;C++){var k=this.i(T)>>>16,I=this.i(T)&65535,Ln=S.i(C)>>>16,Gs=S.i(C)&65535;b[2*T+2*C]+=I*Gs,ie(b,2*T+2*C),b[2*T+2*C+1]+=k*Gs,ie(b,2*T+2*C+1),b[2*T+2*C+1]+=I*Ln,ie(b,2*T+2*C+1),b[2*T+2*C+2]+=k*Ln,ie(b,2*T+2*C+2)}for(T=0;T<w;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=w;T<2*w;T++)b[T]=0;return new o(b,0)};function ie(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function oe(S,w){this.g=S,this.h=w}function ke(S,w){if(N(w))throw Error("division by zero");if(N(S))return new oe(v,v);if(H(S))return w=ke(U(S),w),new oe(U(w.g),U(w.h));if(H(w))return w=ke(S,U(w)),new oe(U(w.g),w.h);if(30<S.g.length){if(H(S)||H(w))throw Error("slowDivide_ only works with positive integers.");for(var b=_,T=w;0>=T.l(S);)b=ht(b),T=ht(T);var C=Se(b,1),k=Se(T,1);for(T=Se(T,2),b=Se(b,2);!N(T);){var I=k.add(T);0>=I.l(S)&&(C=C.add(b),k=I),T=Se(T,1),b=Se(b,1)}return w=ae(S,C.j(w)),new oe(C,w)}for(C=v;0<=S.l(w);){for(b=Math.max(1,Math.floor(S.m()/w.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),k=d(b),I=k.j(w);H(I)||0<I.l(S);)b-=T,k=d(b),I=k.j(w);N(k)&&(k=_),C=C.add(k),S=ae(S,I)}return new oe(C,S)}n.A=function(S){return ke(this,S).h},n.and=function(S){for(var w=Math.max(this.g.length,S.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)&S.i(T);return new o(b,this.h&S.h)},n.or=function(S){for(var w=Math.max(this.g.length,S.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)|S.i(T);return new o(b,this.h|S.h)},n.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)^S.i(T);return new o(b,this.h^S.h)};function ht(S){for(var w=S.g.length+1,b=[],T=0;T<w;T++)b[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(b,S.h)}function Se(S,w){var b=w>>5;w%=32;for(var T=S.g.length-b,C=[],k=0;k<T;k++)C[k]=0<w?S.i(k+b)>>>w|S.i(k+b+1)<<32-w:S.i(k+b);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wf=Mw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,er=Mw.Integer=o}).apply(typeof Pw<"u"?Pw:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var Kf,pR,ls,Qf,oa,bl,Yf,Jf,Xf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var A=a[g];if(!(A in h))break e;h=h[A]}a=a[a.length-1],g=h[a],u=u(g),u!=g&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,g=!1,A={next:function(){if(!g&&h<a.length){var D=h++;return{value:u(D,a[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function m(a,u,h){return a.call.apply(a.bind,arguments)}function v(a,u,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function _(a,u,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,_.apply(null,arguments)}function R(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function N(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,A,D){for(var B=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)B[Re-2]=arguments[Re];return u.prototype[A].apply(g,B)}}function H(a){let u=a.length;if(0<u){let h=Array(u);for(let g=0;g<u;g++)h[g]=a[g];return h}return[]}function U(a,u){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(l(g)){let A=a.length||0,D=g.length||0;a.length=A+D;for(let B=0;B<D;B++)a[A+B]=g[B]}else a.push(g)}}class ae{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ie(a){return/^[\s\xa0]*$/.test(a)}function oe(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ke(a){return ke[" "](a),a}ke[" "]=function(){};var ht=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Se(a,u,h){for(let g in a)u.call(h,a[g],g,a)}function S(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function w(a){let u={};for(let h in a)u[h]=a[h];return u}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,u){let h,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(h in g)a[h]=g[h];for(let D=0;D<b.length;D++)h=b[D],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function C(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function k(a){c.setTimeout(()=>{throw a},0)}function I(){var a=ad;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Ln{constructor(){this.h=this.g=null}add(u,h){let g=Gs.get();g.set(u,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Gs=new ae(()=>new u1,a=>a.reset());class u1{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ws,Ks=!1,ad=new Ln,Og=()=>{let a=c.Promise.resolve(void 0);Ws=()=>{a.then(d1)}};var d1=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){k(h)}var u=Gs;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Ks=!1};function cr(){this.s=this.s,this.C=this.C}cr.prototype.s=!1,cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var h1=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Qs(a,u){if(it.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(ht){e:{try{ke(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:f1[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qs.aa.h.call(this)}}N(Qs,it);var f1={2:"touch",3:"pen",4:"mouse"};Qs.prototype.h=function(){Qs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ys="closure_listenable_"+(1e6*Math.random()|0),p1=0;function m1(a,u,h,g,A){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!g,this.ha=A,this.key=++p1,this.da=this.fa=!1}function $a(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function qa(a){this.src=a,this.g={},this.h=0}qa.prototype.add=function(a,u,h,g,A){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var B=ld(a,u,g,A);return-1<B?(u=a[B],h||(u.fa=!1)):(u=new m1(u,this.src,D,!!g,A),u.fa=h,a.push(u)),u};function cd(a,u){var h=u.type;if(h in a.g){var g=a.g[h],A=Array.prototype.indexOf.call(g,u,void 0),D;(D=0<=A)&&Array.prototype.splice.call(g,A,1),D&&($a(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ld(a,u,h,g){for(var A=0;A<a.length;++A){var D=a[A];if(!D.da&&D.listener==u&&D.capture==!!h&&D.ha==g)return A}return-1}var ud="closure_lm_"+(1e6*Math.random()|0),dd={};function Vg(a,u,h,g,A){if(g&&g.once)return Fg(a,u,h,g,A);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Vg(a,u[D],h,g,A);return null}return h=md(h),a&&a[Ys]?a.K(u,h,d(g)?!!g.capture:!!g,A):Lg(a,u,h,!1,g,A)}function Lg(a,u,h,g,A,D){if(!u)throw Error("Invalid event type");var B=d(A)?!!A.capture:!!A,Re=fd(a);if(Re||(a[ud]=Re=new qa(a)),h=Re.add(u,h,g,B,D),h.proxy)return h;if(g=g1(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)h1||(A=B),A===void 0&&(A=!1),a.addEventListener(u.toString(),g,A);else if(a.attachEvent)a.attachEvent(jg(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function g1(){function a(h){return u.call(a.src,a.listener,h)}let u=v1;return a}function Fg(a,u,h,g,A){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Fg(a,u[D],h,g,A);return null}return h=md(h),a&&a[Ys]?a.L(u,h,d(g)?!!g.capture:!!g,A):Lg(a,u,h,!0,g,A)}function Ug(a,u,h,g,A){if(Array.isArray(u))for(var D=0;D<u.length;D++)Ug(a,u[D],h,g,A);else g=d(g)?!!g.capture:!!g,h=md(h),a&&a[Ys]?(a=a.i,u=String(u).toString(),u in a.g&&(D=a.g[u],h=ld(D,h,g,A),-1<h&&($a(D[h]),Array.prototype.splice.call(D,h,1),D.length==0&&(delete a.g[u],a.h--)))):a&&(a=fd(a))&&(u=a.g[u.toString()],a=-1,u&&(a=ld(u,h,g,A)),(h=-1<a?u[a]:null)&&hd(h))}function hd(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Ys])cd(u.i,a);else{var h=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(h,g,a.capture):u.detachEvent?u.detachEvent(jg(h),g):u.addListener&&u.removeListener&&u.removeListener(g),(h=fd(u))?(cd(h,a),h.h==0&&(h.src=null,u[ud]=null)):$a(a)}}}function jg(a){return a in dd?dd[a]:dd[a]="on"+a}function v1(a,u){if(a.da)a=!0;else{u=new Qs(u,this);var h=a.listener,g=a.ha||a.src;a.fa&&hd(a),a=h.call(g,u)}return a}function fd(a){return a=a[ud],a instanceof qa?a:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(a){return typeof a=="function"?a:(a[pd]||(a[pd]=function(u){return a.handleEvent(u)}),a[pd])}function st(){cr.call(this),this.i=new qa(this),this.M=this,this.F=null}N(st,cr),st.prototype[Ys]=!0,st.prototype.removeEventListener=function(a,u,h,g){Ug(this,a,u,h,g)};function ft(a,u){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new it(u,a);else if(u instanceof it)u.target=u.target||a;else{var A=u;u=new it(g,a),T(u,A)}if(A=!0,h)for(var D=h.length-1;0<=D;D--){var B=u.g=h[D];A=za(B,g,!0,u)&&A}if(B=u.g=a,A=za(B,g,!0,u)&&A,A=za(B,g,!1,u)&&A,h)for(D=0;D<h.length;D++)B=u.g=h[D],A=za(B,g,!1,u)&&A}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],g=0;g<h.length;g++)$a(h[g]);delete a.g[u],a.h--}}this.F=null},st.prototype.K=function(a,u,h,g){return this.i.add(String(a),u,!1,h,g)},st.prototype.L=function(a,u,h,g){return this.i.add(String(a),u,!0,h,g)};function za(a,u,h,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,D=0;D<u.length;++D){var B=u[D];if(B&&!B.da&&B.capture==h){var Re=B.listener,rt=B.ha||B.src;B.fa&&cd(a.i,B),A=Re.call(rt,g)!==!1&&A}}return A&&!g.defaultPrevented}function Bg(a,u,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function $g(a){a.g=Bg(()=>{a.g=null,a.i&&(a.i=!1,$g(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class y1 extends cr{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:$g(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(a){cr.call(this),this.h=a,this.g={}}N(Js,cr);var qg=[];function zg(a){Se(a.g,function(u,h){this.g.hasOwnProperty(h)&&hd(u)},a),a.g={}}Js.prototype.N=function(){Js.aa.N.call(this),zg(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gd=c.JSON.stringify,_1=c.JSON.parse,w1=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function vd(){}vd.prototype.h=null;function Hg(a){return a.h||(a.h=a.i())}function Gg(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){it.call(this,"d")}N(yd,it);function _d(){it.call(this,"c")}N(_d,it);var Kr={},Wg=null;function Ha(){return Wg=Wg||new st}Kr.La="serverreachability";function Kg(a){it.call(this,Kr.La,a)}N(Kg,it);function Zs(a){let u=Ha();ft(u,new Kg(u))}Kr.STAT_EVENT="statevent";function Qg(a,u){it.call(this,Kr.STAT_EVENT,a),this.stat=u}N(Qg,it);function pt(a){let u=Ha();ft(u,new Qg(u,a))}Kr.Ma="timingevent";function Yg(a,u){it.call(this,Kr.Ma,a),this.size=u}N(Yg,it);function eo(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function E1(a,u,h,g,A,D){a.info(function(){if(a.g)if(D)for(var B="",Re=D.split("&"),rt=0;rt<Re.length;rt++){var _e=Re[rt].split("=");if(1<_e.length){var ot=_e[0];_e=_e[1];var at=ot.split("_");B=2<=at.length&&at[1]=="type"?B+(ot+"="+_e+"&"):B+(ot+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+u+`
`+h+`
`+B})}function I1(a,u,h,g,A,D,B){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+u+`
`+h+`
`+D+" "+B})}function Oi(a,u,h,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+T1(a,h)+(g?" "+g:"")})}function b1(a,u){a.info(function(){return"TIMEOUT: "+u})}to.prototype.info=function(){};function T1(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<A.length;B++)A[B]=""}}}}return gd(h)}catch{return u}}var Ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wd;function Wa(){}N(Wa,vd),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},wd=new Wa;function lr(a,u,h,g){this.j=a,this.i=u,this.l=h,this.R=g||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xg}function Xg(){this.i=null,this.g="",this.h=!1}var Zg={},Ed={};function Id(a,u,h){a.L=1,a.v=Ja(Fn(u)),a.m=h,a.P=!0,e0(a,null)}function e0(a,u){a.F=Date.now(),Ka(a),a.A=Fn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),p0(h.i,"t",g),a.C=0,h=a.j.J,a.h=new Xg,a.g=P0(a.j,h?u:null,!a.m),0<a.O&&(a.M=new y1(_(a.Y,a,a.g),a.O)),u=a.U,h=a.g,g=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(qg[0]=A.toString()),A=qg);for(var D=0;D<A.length;D++){var B=Vg(h,A[D],g||u.handleEvent,!1,u.h||u);if(!B)break;u.g[B.key]=B}u=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Zs(),E1(a.i,a.u,a.A,a.l,a.R,a.m)}lr.prototype.ca=function(a){a=a.target;let u=this.M;u&&Un(a)==3?u.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{let at=Un(this.g);var u=this.g.Ba();let Fi=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||E0(this.g)))){this.J||at!=4||u==7||(u==8||0>=Fi?Zs(3):Zs(2)),bd(this);var h=this.g.Z();this.X=h;t:if(t0(this)){var g=E0(this.g);a="";var A=g.length,D=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),no(this);var B="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(g[u],{stream:!(D&&u==A-1)});g.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=h==200,I1(this.i,this.u,this.A,this.l,this.R,at,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,rt=this.g;if((Re=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Re)){var _e=Re;break t}}_e=null}if(h=_e)Oi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Td(this,h);else{this.o=!1,this.s=3,pt(12),Qr(this),no(this);break e}}if(this.P){h=!0;let Xt;for(;!this.J&&this.C<B.length;)if(Xt=S1(this,B),Xt==Ed){at==4&&(this.s=4,pt(14),h=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Zg){this.s=4,pt(15),Oi(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else Oi(this.i,this.l,Xt,null),Td(this,Xt);if(t0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||B.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)Oi(this.i,this.l,B,"[Invalid Chunked Response]"),Qr(this),no(this);else if(0<B.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Rd(ot),ot.M=!0,pt(11))}}else Oi(this.i,this.l,B,null),Td(this,B);at==4&&Qr(this),this.o&&!this.J&&(at==4?A0(this.j,this):(this.o=!1,Ka(this)))}else $1(this.g),h==400&&0<B.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Qr(this),no(this)}}}catch{}finally{}};function t0(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function S1(a,u){var h=a.C,g=u.indexOf(`
`,h);return g==-1?Ed:(h=Number(u.substring(h,g)),isNaN(h)?Zg:(g+=1,g+h>u.length?Ed:(u=u.slice(g,g+h),a.C=g+h,u)))}lr.prototype.cancel=function(){this.J=!0,Qr(this)};function Ka(a){a.S=Date.now()+a.I,n0(a,a.I)}function n0(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=eo(_(a.ba,a),u)}function bd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}lr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(b1(this.i,this.A),this.L!=2&&(Zs(),pt(17)),Qr(this),this.s=2,no(this)):n0(this,this.S-a)};function no(a){a.j.G==0||a.J||A0(a.j,a)}function Qr(a){bd(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,zg(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Td(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||Sd(h.h,a))){if(!a.K&&Sd(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)nc(h),ec(h);else break e;kd(h),pt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=eo(_(h.Za,h),6e3));if(1>=s0(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Jr(h,11)}else if((a.K||h.g==a)&&nc(h),!ie(u))for(A=h.Da.g.parse(u),u=0;u<A.length;u++){let _e=A[u];if(h.T=_e[0],_e=_e[1],h.G==2)if(_e[0]=="c"){h.K=_e[1],h.ia=_e[2];let ot=_e[3];ot!=null&&(h.la=ot,h.j.info("VER="+h.la));let at=_e[4];at!=null&&(h.Aa=at,h.j.info("SVER="+h.Aa));let Fi=_e[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(g=1.5*Fi,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Xt=a.g;if(Xt){let ic=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ic){var D=g.h;D.g||ic.indexOf("spdy")==-1&&ic.indexOf("quic")==-1&&ic.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Cd(D,D.h),D.h=null))}if(g.D){let Dd=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(g.ya=Dd,Ne(g.I,g.D,Dd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var B=a;if(g.qa=D0(g,g.J?g.ia:null,g.W),B.K){o0(g.h,B);var Re=B,rt=g.L;rt&&(Re.I=rt),Re.B&&(bd(Re),Ka(Re)),g.g=B}else C0(g);0<h.i.length&&tc(h)}else _e[0]!="stop"&&_e[0]!="close"||Jr(h,7);else h.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Jr(h,7):Ad(h):_e[0]!="noop"&&h.l&&h.l.ta(_e),h.v=0)}}Zs(4)}catch{}}var C1=class{constructor(a,u){this.g=a,this.map=u}};function r0(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function i0(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function s0(a){return a.h?1:a.g?a.g.size:0}function Sd(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Cd(a,u){a.g?a.g.add(u):a.h=u}function o0(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}r0.prototype.cancel=function(){if(this.i=a0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function a0(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return H(a.i)}function x1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,g=0;g<h;g++)u.push(a[g]);return u}u=[],h=0;for(g in a)u[h++]=a[g];return u}function A1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let g in a)u[h++]=g;return u}}}function c0(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=A1(a),g=x1(a),A=g.length,D=0;D<A;D++)u.call(void 0,g[D],h&&h[D],a)}var l0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k1(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),A=null;if(0<=g){var D=a[h].substring(0,g);A=a[h].substring(g+1)}else D=a[h];u(D,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Yr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Yr){this.h=a.h,Qa(this,a.j),this.o=a.o,this.g=a.g,Ya(this,a.s),this.l=a.l;var u=a.i,h=new so;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),u0(this,h),this.m=a.m}else a&&(u=String(a).match(l0))?(this.h=!1,Qa(this,u[1]||"",!0),this.o=ro(u[2]||""),this.g=ro(u[3]||"",!0),Ya(this,u[4]),this.l=ro(u[5]||"",!0),u0(this,u[6]||"",!0),this.m=ro(u[7]||"")):(this.h=!1,this.i=new so(null,this.h))}Yr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(io(u,d0,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(io(u,d0,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(io(h,h.charAt(0)=="/"?P1:D1,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",io(h,N1)),a.join("")};function Fn(a){return new Yr(a)}function Qa(a,u,h){a.j=h?ro(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Ya(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function u0(a,u,h){u instanceof so?(a.i=u,O1(a.i,a.h)):(h||(u=io(u,M1)),a.i=new so(u,a.h))}function Ne(a,u,h){a.i.set(u,h)}function Ja(a){return Ne(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ro(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function io(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,R1),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function R1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var d0=/[#\/\?@]/g,D1=/[#\?:]/g,P1=/[#\?]/g,M1=/[#\?@]/g,N1=/#/g;function so(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function ur(a){a.g||(a.g=new Map,a.h=0,a.i&&k1(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=so.prototype,n.add=function(a,u){ur(this),this.i=null,a=Vi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function h0(a,u){ur(a),u=Vi(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function f0(a,u){return ur(a),u=Vi(a,u),a.g.has(u)}n.forEach=function(a,u){ur(this),this.g.forEach(function(h,g){h.forEach(function(A){a.call(u,A,g,this)},this)},this)},n.na=function(){ur(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let g=0;g<u.length;g++){let A=a[g];for(let D=0;D<A.length;D++)h.push(u[g])}return h},n.V=function(a){ur(this);let u=[];if(typeof a=="string")f0(this,a)&&(u=u.concat(this.g.get(Vi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return ur(this),this.i=null,a=Vi(this,a),f0(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function p0(a,u,h){h0(a,u),0<h.length&&(a.i=null,a.g.set(Vi(a,u),H(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var g=u[h];let D=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var A=D;B[g]!==""&&(A+="="+encodeURIComponent(String(B[g]))),a.push(A)}}return this.i=a.join("&")};function Vi(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function O1(a,u){u&&!a.j&&(ur(a),a.i=null,a.g.forEach(function(h,g){var A=g.toLowerCase();g!=A&&(h0(this,g),p0(this,A,h))},a)),a.j=u}function V1(a,u){let h=new to;if(c.Image){let g=new Image;g.onload=R(dr,h,"TestLoadImage: loaded",!0,u,g),g.onerror=R(dr,h,"TestLoadImage: error",!1,u,g),g.onabort=R(dr,h,"TestLoadImage: abort",!1,u,g),g.ontimeout=R(dr,h,"TestLoadImage: timeout",!1,u,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function L1(a,u){let h=new to,g=new AbortController,A=setTimeout(()=>{g.abort(),dr(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(A),D.ok?dr(h,"TestPingServer: ok",!0,u):dr(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),dr(h,"TestPingServer: error",!1,u)})}function dr(a,u,h,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(h)}catch{}}function F1(){this.g=new w1}function U1(a,u,h){let g=h||"";try{c0(a,function(A,D){let B=A;d(A)&&(B=gd(A)),u.push(g+D+"="+encodeURIComponent(B))})}catch(A){throw u.push(g+"type="+encodeURIComponent("_badmap")),A}}function oo(a){this.l=a.Ub||null,this.j=a.eb||!1}N(oo,vd),oo.prototype.g=function(){return new Xa(this.l,this.j)},oo.prototype.i=function(a){return function(){return a}}({});function Xa(a,u){st.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Xa,st),n=Xa.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,co(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;m0(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function m0(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ao(this):co(this),this.readyState==3&&m0(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ao(this))},n.Qa=function(a){this.g&&(this.response=a,ao(this))},n.ga=function(){this.g&&ao(this)};function ao(a){a.readyState=4,a.l=null,a.j=null,a.v=null,co(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function co(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function g0(a){let u="";return Se(a,function(h,g){u+=g,u+=":",u+=h,u+=`\r
`}),u}function xd(a,u,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=g0(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ne(a,u,h))}function Be(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Be,st);var j1=/^https?$/i,B1=["POST","PUT"];n=Be.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wd.g(),this.v=this.o?Hg(this.o):Hg(wd),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){v0(this,D);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)h.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let D of g.keys())h.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(D=>D.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(B1,u,void 0))||g||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,B]of h)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{w0(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){v0(this,D)}};function v0(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,y0(a),Za(a)}function y0(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),Za(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Za(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_0(this):this.bb())},n.bb=function(){_0(this)};function _0(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)Bg(a.Ea,0,a);else if(ft(a,"readystatechange"),Un(a)==4){a.h=!1;try{let B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var g;if(g=B===0){var A=String(a.D).match(l0)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),g=!j1.test(A?A.toLowerCase():"")}h=g}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var D=2<Un(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",y0(a)}}finally{Za(a)}}}}function Za(a,u){if(a.g){w0(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ft(a,"ready");try{h.onreadystatechange=g}catch{}}}function w0(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),_1(u)}};function E0(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $1(a){let u={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(ie(a[g]))continue;var h=C(a[g]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let D=u[A]||[];u[A]=D,D.push(h)}S(u,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function I0(a){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,a),this.cb=lo("retryDelaySeedMs",1e4,a),this.Wa=lo("forwardChannelMaxRetries",2,a),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new r0(a&&a.concurrentRequestLimit),this.Da=new F1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=I0.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,g){pt(0),this.W=a,this.H=u||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=D0(this,null,this.W),tc(this)};function Ad(a){if(b0(a),a.G==3){var u=a.U++,h=Fn(a.I);if(Ne(h,"SID",a.K),Ne(h,"RID",u),Ne(h,"TYPE","terminate"),uo(a,h),u=new lr(a,a.j,u),u.L=2,u.v=Ja(Fn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=P0(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ka(u)}R0(a)}function ec(a){a.g&&(Rd(a),a.g.cancel(),a.g=null)}function b0(a){ec(a),a.u&&(c.clearTimeout(a.u),a.u=null),nc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function tc(a){if(!i0(a.h)&&!a.s){a.s=!0;var u=a.Ga;Ws||Og(),Ks||(Ws(),Ks=!0),ad.add(u,a),a.B=0}}function q1(a,u){return s0(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=eo(_(a.Ga,a,u),k0(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new lr(this,this.j,a),D=this.o;if(this.S&&(D?(D=w(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(A.H=D,D=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=S0(this,A,u),h=Fn(this.I),Ne(h,"RID",a),Ne(h,"CVER",22),this.D&&Ne(h,"X-HTTP-Session-Id",this.D),uo(this,h),D&&(this.O?u="headers="+encodeURIComponent(String(g0(D)))+"&"+u:this.m&&xd(h,this.m,D)),Cd(this.h,A),this.Ua&&Ne(h,"TYPE","init"),this.P?(Ne(h,"$req",u),Ne(h,"SID","null"),A.T=!0,Id(A,h,null)):Id(A,h,u),this.G=2}}else this.G==3&&(a?T0(this,a):this.i.length==0||i0(this.h)||T0(this))};function T0(a,u){var h;u?h=u.l:h=a.U++;let g=Fn(a.I);Ne(g,"SID",a.K),Ne(g,"RID",h),Ne(g,"AID",a.T),uo(a,g),a.m&&a.o&&xd(g,a.m,a.o),h=new lr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=S0(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Cd(a.h,h),Id(h,g,u)}function uo(a,u){a.H&&Se(a.H,function(h,g){Ne(u,g,h)}),a.l&&c0({},function(h,g){Ne(u,g,h)})}function S0(a,u,h){h=Math.min(a.i.length,h);var g=a.l?_(a.l.Na,a.l,a):null;e:{var A=a.i;let D=-1;for(;;){let B=["count="+h];D==-1?0<h?(D=A[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let Re=!0;for(let rt=0;rt<h;rt++){let _e=A[rt].g,ot=A[rt].map;if(_e-=D,0>_e)D=Math.max(0,A[rt].g-100),Re=!1;else try{U1(ot,B,"req"+_e+"_")}catch{g&&g(ot)}}if(Re){g=B.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,g}function C0(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Ws||Og(),Ks||(Ws(),Ks=!0),ad.add(u,a),a.v=0}}function kd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=eo(_(a.Fa,a),k0(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,x0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=eo(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),ec(this),x0(this))};function Rd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function x0(a){a.g=new lr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Fn(a.qa);Ne(u,"RID","rpc"),Ne(u,"SID",a.K),Ne(u,"AID",a.T),Ne(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ne(u,"TO",a.ja),Ne(u,"TYPE","xmlhttp"),uo(a,u),a.m&&a.o&&xd(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ja(Fn(u)),h.m=null,h.P=!0,e0(h,a)}n.Za=function(){this.C!=null&&(this.C=null,ec(this),kd(this),pt(19))};function nc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function A0(a,u){var h=null;if(a.g==u){nc(a),Rd(a),a.g=null;var g=2}else if(Sd(a.h,u))h=u.D,o0(a.h,u),g=1;else return;if(a.G!=0){if(u.o)if(g==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;g=Ha(),ft(g,new Yg(g,h)),tc(a)}else C0(a);else if(A=u.s,A==3||A==0&&0<u.X||!(g==1&&q1(a,u)||g==2&&kd(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),A){case 1:Jr(a,5);break;case 4:Jr(a,10);break;case 3:Jr(a,6);break;default:Jr(a,2)}}}function k0(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Jr(a,u){if(a.j.info("Error code "+u),u==2){var h=_(a.fb,a),g=a.Xa;let A=!g;g=new Yr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qa(g,"https"),Ja(g),A?V1(g.toString(),h):L1(g.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(u),R0(a),b0(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function R0(a){if(a.G=0,a.ka=[],a.l){let u=a0(a.h);(u.length!=0||a.i.length!=0)&&(U(a.ka,u),U(a.ka,a.i),a.h.i.length=0,H(a.i),a.i.length=0),a.l.ra()}}function D0(a,u,h){var g=h instanceof Yr?Fn(h):new Yr(h);if(g.g!="")u&&(g.g=u+"."+g.g),Ya(g,g.s);else{var A=c.location;g=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var D=new Yr(null);g&&Qa(D,g),u&&(D.g=u),A&&Ya(D,A),h&&(D.l=h),g=D}return h=a.D,u=a.ya,h&&u&&Ne(g,h,u),Ne(g,"VER",a.la),uo(a,g),g}function P0(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Be(new oo({eb:h})):new Be(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function M0(){}n=M0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rc(){}rc.prototype.g=function(a,u){return new At(a,u)};function At(a,u){st.call(this),this.g=new I0(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!ie(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ie(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Li(this)}N(At,st),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Ad(this.g)},At.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=gd(a),a=h);u.i.push(new C1(u.Ya++,a)),u.G==3&&tc(u)},At.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,At.aa.N.call(this)};function N0(a){yd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}N(N0,yd);function O0(){_d.call(this),this.status=1}N(O0,_d);function Li(a){this.g=a}N(Li,M0),Li.prototype.ua=function(){ft(this.g,"a")},Li.prototype.ta=function(a){ft(this.g,new N0(a))},Li.prototype.sa=function(a){ft(this.g,new O0)},Li.prototype.ra=function(){ft(this.g,"b")},rc.prototype.createWebChannel=rc.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Xf=tr.createWebChannelTransport=function(){return new rc},Jf=tr.getStatEventTarget=function(){return Ha()},Yf=tr.Event=Kr,bl=tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ga.NO_ERROR=0,Ga.TIMEOUT=8,Ga.HTTP_ERROR=6,oa=tr.ErrorCode=Ga,Jg.COMPLETE="complete",Qf=tr.EventType=Jg,Gg.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",st.prototype.listen=st.prototype.K,ls=tr.WebChannel=Gg,pR=tr.FetchXmlHttpFactory=oo,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Kf=tr.XhrIo=Be}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});var Nw="@firebase/firestore",Ow="4.7.17";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var ks="11.9.0";var wi=new Tn("@firebase/firestore");function us(){return wi.logLevel}function Q(n,...e){if(wi.logLevel<=ge.DEBUG){let t=e.map(zm);wi.debug(`Firestore (${ks}): ${n}`,...t)}}function nr(n,...e){if(wi.logLevel<=ge.ERROR){let t=e.map(zm);wi.error(`Firestore (${ks}): ${n}`,...t)}}function vs(n,...e){if(wi.logLevel<=ge.WARN){let t=e.map(zm);wi.warn(`Firestore (${ks}): ${n}`,...t)}}function zm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xE(n,r,t)}function xE(n,e,t){let r=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw nr(r),new Error(r)}function Te(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||xE(e,i,r)}function le(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ip=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},sp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},op=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new Rl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new tt(e)}},ap=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},cp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ap(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Dl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ot(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);let r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Dl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function AE(){return new TextEncoder}var Pl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function fe(n,e){return n<e?-1:n>e?1:0}function up(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fe(r,i);{let s=AE(),o=gR(s.encode(Vw(n,t)),s.encode(Vw(e,t)));return o!==0?o:fe(r,i)}}t+=r>65535?2:1}return fe(n.length,e.length)}function Vw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function gR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fe(n[t],e[t]);return fe(n.length,e.length)}function ys(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Lw=-62135596800,Fw=1e6,Xe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Fw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lw)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fw}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var de=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xe(0,0))}static max(){return new n(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uw="__name__",Ml=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return fe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}},je=class n extends Ml{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class n extends Ml{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uw}static keyField(){return new n([Uw])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new G(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new G(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var ha=-1,dp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};dp.UNKNOWN_ID=-1;function yR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new Ei(i,X.empty(),e)}function _R(n){return new Ei(n.readTime,n.key,ha)}var Ei=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(de.min(),X.empty(),ha)}static max(){return new n(de.max(),X.empty(),ha)}};function wR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:fe(n.largestBatchId,e.largestBatchId))}var ER="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rs(n){return E(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==ER)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(m=>{o[d]=m,++c,c===s&&r(o)},m=>i(m))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function IR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ds(n){return n.name==="IndexedDbTransactionError"}var Hm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Gm=-1;function pu(n){return n==null}function fa(n){return n===0&&1/n==-1/0}function bR(n){return typeof n=="number"&&Number.isInteger(n)&&!fa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var kE="";function TR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jw(e)),e=SR(n.get(t),e);return jw(e)}function SR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case kE:t+="";break;default:t+=s}}return t}function jw(n){return n+kE+""}var CR="remoteDocuments",RE="owner";var DE="mutationQueues";var PE="mutations";var ME="documentMutations",xR="remoteDocumentsV14";var NE="remoteDocumentGlobal";var OE="targets";var VE="targetDocuments";var LE="targetGlobal",FE="collectionParents";var UE="clientMetadata";var jE="bundles";var BE="namedQueries";var AR="indexConfiguration";var kR="indexState";var RR="indexEntries";var $E="documentOverlays";var DR="globals";var PR=[DE,PE,ME,CR,OE,RE,LE,VE,UE,NE,FE,jE,BE],VL=[...PR,$E],MR=[DE,PE,ME,xR,OE,RE,LE,VE,UE,NE,FE,jE,BE,$E],NR=MR,OR=[...NR,AR,kR,RR];var LL=[...OR,DR];function Bw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}},ps=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},An=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}};An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nl(this.data.getIterator())}getIteratorFrom(e){return new Nl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class n{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new n([])}unionWith(e){let t=new nt(Lt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ol=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ol("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(Te(!!n,39018),typeof n=="string"){let e=0,t=VR.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}var zE="server_timestamp",HE="__type__",GE="__previous_value__",WE="__local_write_time__";function Wm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[HE])===null||t===void 0?void 0:t.stringValue)===zE}function mu(n){let e=n.mapValue.fields[GE];return Wm(e)?mu(e):e}function pa(n){let e=rr(n.mapValue.fields[WE].timestampValue);return new Xe(e.seconds,e.nanos)}var fp=class{constructor(e,t,r,i,s,o,c,l,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=m}},Vl="(default)",Ll=class n{constructor(e,t){this.projectId=e,this.database=t||Vl}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Vl}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Km="__type__",KE="__max__",Tl={mapValue:{fields:{__type__:{stringValue:KE}}}},Qm="__vector__",_s="value";function Vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wm(n)?4:YE(n)?9007199254740991:QE(n)?10:11:te(28295,{value:n})}function Dn(n,e){if(n===e)return!0;let t=Vr(n);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pa(n).isEqual(pa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=rr(i.timestampValue),c=rr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ir(i.bytesValue).isEqual(ir(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Le(i.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Le(i.integerValue)===Le(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Le(i.doubleValue),c=Le(s.doubleValue);return o===c?fa(o)===fa(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return ys(n.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Bw(o)!==Bw(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Dn(o[l],c[l])))return!1;return!0}(n,e);default:return te(52216,{left:n})}}function ma(n,e){return(n.values||[]).find(t=>Dn(t,e))!==void 0}function ws(n,e){if(n===e)return 0;let t=Vr(n),r=Vr(e);if(t!==r)return fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return $w(n.timestampValue,e.timestampValue);case 4:return $w(pa(n),pa(e));case 5:return up(n.stringValue,e.stringValue);case 6:return function(s,o){let c=ir(s),l=ir(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let m=fe(c[d],l[d]);if(m!==0)return m}return fe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=fe(Le(s.latitude),Le(o.latitude));return c!==0?c:fe(Le(s.longitude),Le(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qw(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,m;let v=s.fields||{},_=o.fields||{},R=(c=v[_s])===null||c===void 0?void 0:c.arrayValue,N=(l=_[_s])===null||l===void 0?void 0:l.arrayValue,H=fe(((d=R?.values)===null||d===void 0?void 0:d.length)||0,((m=N?.values)===null||m===void 0?void 0:m.length)||0);return H!==0?H:qw(R,N)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Tl.mapValue&&o===Tl.mapValue)return 0;if(s===Tl.mapValue)return 1;if(o===Tl.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},m=Object.keys(d);l.sort(),m.sort();for(let v=0;v<l.length&&v<m.length;++v){let _=up(l[v],m[v]);if(_!==0)return _;let R=ws(c[l[v]],d[m[v]]);if(R!==0)return R}return fe(l.length,m.length)}(n.mapValue,e.mapValue);default:throw te(23264,{Pe:t})}}function $w(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fe(n,e);let t=rr(n),r=rr(e),i=fe(t.seconds,r.seconds);return i!==0?i:fe(t.nanos,r.nanos)}function qw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ws(t[i],r[i]);if(s)return s}return fe(t.length,r.length)}function Es(n){return pp(n)}function pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=rr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ir(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=pp(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${pp(t.fields[o])}`;return i+"}"}(n.mapValue):te(61005,{value:n})}function xl(n){switch(Vr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=mu(n);return e?16+xl(e):16;case 5:return 2*n.stringValue.length;case 6:return ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+xl(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zr(r.fields,(s,o)=>{i+=s.length+xl(o)}),i}(n.mapValue);default:throw te(13486,{value:n})}}function zw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mp(n){return!!n&&"integerValue"in n}function Ym(n){return!!n&&"arrayValue"in n}function Hw(n){return!!n&&"nullValue"in n}function Gw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Al(n){return!!n&&"mapValue"in n}function QE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Km])===null||t===void 0?void 0:t.stringValue)===Qm}function ca(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ca(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ca(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KE}var UL={mapValue:{fields:{[Km]:{stringValue:Qm},[_s]:{arrayValue:{}}}}};var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Al(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(t)}setAll(e){let t=Lt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=ca(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Al(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Al(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ca(this.value))}};function JE(n){let e=[];return zr(n.fields,(t,r)=>{let i=new Lt([t]);if(Al(r)){let s=JE(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Wt(e)}var fn=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,de.min(),de.min(),de.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,de.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,de.min(),de.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,de.min(),de.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Is=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ww(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),t.key):r=ws(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dn(n.position[t],e.position[t]))return!1;return!0}var Ii=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function LR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fl=class{},Qe=class n extends Fl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vp(e,t,r):t==="array-contains"?new wp(e,r):t==="in"?new Ep(e,r):t==="not-in"?new Ip(e,r):t==="array-contains-any"?new bp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yp(e,r):new _p(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ws(t,this.value)):t!==null&&Vr(this.value)===Vr(t)&&this.matchesComparison(ws(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pn=class n extends Fl{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return XE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function XE(n){return n.op==="and"}function ZE(n){return FR(n)&&XE(n)}function FR(n){for(let e of n.filters)if(e instanceof pn)return!1;return!0}function gp(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+Es(n.value);if(ZE(n))return n.filters.map(e=>gp(e)).join(",");{let e=n.filters.map(t=>gp(t)).join(",");return`${n.op}(${e})`}}function eI(n,e){return n instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(n,e):n instanceof pn?function(r,i){return i instanceof pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&eI(o,i.filters[c]),!0):!1}(n,e):void te(19439)}function tI(n){return n instanceof Qe?function(t){return`${t.field.canonicalString()} ${t.op} ${Es(t.value)}`}(n):n instanceof pn?function(t){return t.op.toString()+" {"+t.getFilters().map(tI).join(" ,")+"}"}(n):"Filter"}var vp=class extends Qe{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},yp=class extends Qe{constructor(e,t){super(e,"in",t),this.keys=nI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},_p=class extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=nI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function nI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var wp=class extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ym(t)&&ma(t.arrayValue,this.value)}},Ep=class extends Qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ma(this.value.arrayValue,t)}},Ip=class extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ma(this.value.arrayValue,t)}},bp=class extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ym(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ma(this.value.arrayValue,r))}};var Tp=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Ie=null}};function Qw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Tp(n,e,t,r,i,s,o)}function Jm(n){let e=le(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Es(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Es(r)).join(",")),e.Ie=t}return e.Ie}function Xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kw(n.startAt,e.startAt)&&Kw(n.endAt,e.endAt)}function Sp(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Lr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function UR(n,e,t,r,i,s,o,c){return new Lr(n,e,t,r,i,s,o,c)}function gu(n){return new Lr(n)}function Yw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rI(n){return n.collectionGroup!==null}function la(n){let e=le(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new nt(Lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Ii(s,r))}),t.has(Lt.keyField().canonicalString())||e.Ee.push(new Ii(Lt.keyField(),r))}return e.Ee}function kn(n){let e=le(n);return e.de||(e.de=jR(e,la(n))),e.de}function jR(n,e){if(n.limitType==="F")return Qw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ii(i.field,s)});let t=n.endAt?new Is(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Is(n.startAt.position,n.startAt.inclusive):null;return Qw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cp(n,e){let t=n.filters.concat([e]);return new Lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xp(n,e,t){return new Lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vu(n,e){return Xm(kn(n),kn(e))&&n.limitType===e.limitType}function iI(n){return`${Jm(kn(n))}|lt:${n.limitType}`}function ds(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tI(i)).join(", ")}]`),pu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Es(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Es(i)).join(",")),`Target(${r})`}(kn(n))}; limitType=${n.limitType})`}function yu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of la(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let d=Ww(o,c,l);return o.inclusive?d<=0:d<0}(r.startAt,la(r),i)||r.endAt&&!function(o,c,l){let d=Ww(o,c,l);return o.inclusive?d>=0:d>0}(r.endAt,la(r),i))}(n,e)}function BR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sI(n){return(e,t)=>{let r=!1;for(let i of la(n)){let s=$R(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $R(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?ws(l,d):te(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:n.dir})}}var sr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return qE(this.inner)}size(){return this.innerSize}};var qR=new Ge(X.comparator);function or(){return qR}var oI=new Ge(X.comparator);function aa(...n){let e=oI;for(let t of n)e=e.insert(t.key,t);return e}function aI(n){let e=oI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vi(){return ua()}function cI(){return ua()}function ua(){return new sr(n=>n.toString(),(n,e)=>n.isEqual(e))}var zR=new Ge(X.comparator),HR=new nt(X.comparator);function ve(...n){let e=HR;for(let t of n)e=e.add(t);return e}var GR=new nt(fe);function WR(){return GR}function Zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fa(e)?"-0":e}}function lI(n){return{integerValue:""+n}}function KR(n,e){return bR(e)?lI(e):Zm(n,e)}var bs=class{constructor(){this._=void 0}};function QR(n,e,t){return n instanceof bi?function(i,s){let o={fields:{[HE]:{stringValue:zE},[WE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wm(s)&&(s=mu(s)),s&&(o.fields[GE]=s),{mapValue:o}}(t,e):n instanceof Fr?dI(n,e):n instanceof Ur?hI(n,e):function(i,s){let o=uI(i,s),c=Jw(o)+Jw(i.Re);return mp(o)&&mp(i.Re)?lI(c):Zm(i.serializer,c)}(n,e)}function YR(n,e,t){return n instanceof Fr?dI(n,e):n instanceof Ur?hI(n,e):t}function uI(n,e){return n instanceof Ts?function(r){return mp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var bi=class extends bs{},Fr=class extends bs{constructor(e){super(),this.elements=e}};function dI(n,e){let t=fI(e);for(let r of n.elements)t.some(i=>Dn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ur=class extends bs{constructor(e){super(),this.elements=e}};function hI(n,e){let t=fI(e);for(let r of n.elements)t=t.filter(i=>!Dn(i,r));return{arrayValue:{values:t}}}var Ts=class extends bs{constructor(e,t){super(),this.serializer=e,this.Re=t}};function Jw(n){return Le(n.integerValue||n.doubleValue)}function fI(n){return Ym(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ga=class{constructor(e,t){this.field=e,this.transform=t}};function JR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fr&&i instanceof Fr||r instanceof Ur&&i instanceof Ur?ys(r.elements,i.elements,Dn):r instanceof Ts&&i instanceof Ts?Dn(r.Re,i.Re):r instanceof bi&&i instanceof bi}(n.transform,e.transform)}var Ap=class{constructor(e,t){this.version=e,this.transformResults=t}},Kt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ss=class{};function pI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cs(n.key,Kt.none()):new Ti(n.key,n.data,Kt.none());{let t=n.data,r=Vt.empty(),i=new nt(Lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pn(n.key,r,new Wt(i.toArray()),Kt.none())}}function XR(n,e,t){n instanceof Ti?function(i,s,o){let c=i.value.clone(),l=Zw(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Pn?function(i,s,o){if(!kl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Zw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(mI(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function da(n,e,t,r){return n instanceof Ti?function(s,o,c,l){if(!kl(s.precondition,o))return c;let d=s.value.clone(),m=eE(s.fieldTransforms,l,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pn?function(s,o,c,l){if(!kl(s.precondition,o))return c;let d=eE(s.fieldTransforms,l,o),m=o.data;return m.setAll(mI(s)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(s,o,c){return kl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function ZR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=uI(r.transform,i||null);s!=null&&(t===null&&(t=Vt.empty()),t.set(r.field,s))}return t||null}function Xw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(s,o)=>JR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ti=class extends Ss{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pn=class extends Ss{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Zw(n,e,t){let r=new Map;Te(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,YR(o,c,t[i]))}return r}function eE(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,QR(s,o,e))}return r}var Cs=class extends Ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kp=class extends Ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Rp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&XR(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=da(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=da(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cI();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=pI(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(t,r)=>Xw(t,r))&&ys(this.baseMutations,e.baseMutations,(t,r)=>Xw(t,r))}},Dp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return zR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Pp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Mp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,ye;function eD(n){switch(n){case P.OK:return te(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return te(15467,{code:n})}}function gI(n){if(n===void 0)return nr("GRPC error has no .code"),P.UNKNOWN;switch(n){case We.OK:return P.OK;case We.CANCELLED:return P.CANCELLED;case We.UNKNOWN:return P.UNKNOWN;case We.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case We.INTERNAL:return P.INTERNAL;case We.UNAVAILABLE:return P.UNAVAILABLE;case We.UNAUTHENTICATED:return P.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case We.NOT_FOUND:return P.NOT_FOUND;case We.ALREADY_EXISTS:return P.ALREADY_EXISTS;case We.PERMISSION_DENIED:return P.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case We.ABORTED:return P.ABORTED;case We.OUT_OF_RANGE:return P.OUT_OF_RANGE;case We.UNIMPLEMENTED:return P.UNIMPLEMENTED;case We.DATA_LOSS:return P.DATA_LOSS;default:return te(39323,{code:n})}}(ye=We||(We={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var tE=null;var tD=new er([4294967295,4294967295],0);function nE(n){let e=AE().encode(n),t=new Wf;return t.update(e),new Uint8Array(t.digest())}function rE(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new er([t,r],0),new er([i,s],0)]}var Np=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yi(`Invalid padding: ${t}`);if(r<0)throw new yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yi(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=er.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(er.fromNumber(r)));return i.compare(tD)===1&&(i=new er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=nE(e),[r,i]=rE(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;let t=nE(e),[r,i]=rE(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ul=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(de.min(),i,new Ge(fe),or(),ve())}},va=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var ms=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},jl=class{constructor(e,t){this.targetId=e,this.Ce=t}},Bl=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},$l=class{constructor(){this.Fe=0,this.Me=iE(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ve(),t=ve(),r=ve();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new va(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=iE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Te(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Op=class{constructor(e){this.ze=e,this.je=new Map,this.He=or(),this.Je=Sl(),this.Ye=Sl(),this.Ze=new Ge(fe)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(Sp(s))if(r===0){let o=new X(s.path);this.tt(t,o,fn.newNoDocument(o,de.min()))}else Te(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let c=this.ct(e),l=c?this.lt(c,e,o):1;if(l!==0){this.st(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}tE?.ht(function(m,v,_,R,N){var H,U,ae,ie,oe,ke;let ht={localCacheCount:m,existenceFilterCount:v.count,databaseId:_.database,projectId:_.projectId},Se=v.unchangedNames;return Se&&(ht.bloomFilter={applied:N===0,hashCount:(H=Se?.hashCount)!==null&&H!==void 0?H:0,bitmapLength:(ie=(ae=(U=Se?.bits)===null||U===void 0?void 0:U.bitmap)===null||ae===void 0?void 0:ae.length)!==null&&ie!==void 0?ie:0,padding:(ke=(oe=Se?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&ke!==void 0?ke:0,mightContain:S=>{var w;return(w=R?.mightContain(S))!==null&&w!==void 0&&w}}),ht}(o,e.Ce,this.ze.Pt(),c,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=ir(r).toUint8Array()}catch(l){if(l instanceof Ol)return vs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Np(o,i,s)}catch(l){return vs(l instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let c=this._t(o);if(c){if(s.current&&Sp(c.target)){let l=new X(c.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,fn.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=ve();this.Ye.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this._t(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new Ul(e,t,this.Ze,this.He,r);return this.He=or(),this.Je=Sl(),this.Ye=Sl(),this.Ze=new Ge(fe),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new $l,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new nt(fe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new nt(fe),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new $l),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Sl(){return new Ge(X.comparator)}function iE(){return new Ge(X.comparator)}var nD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iD={and:"AND",or:"OR"},Vp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Lp(n,e){return n.useProto3Json||pu(e)?e:{value:e}}function ql(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sD(n,e){return ql(n,e.toTimestamp())}function Rn(n){return Te(!!n,49232),de.fromTimestamp(function(t){let r=rr(t);return new Xe(r.seconds,r.nanos)}(n))}function eg(n,e){return Fp(n,e).canonicalString()}function Fp(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function yI(n){let e=je.fromString(n);return Te(bI(e),10190,{key:e.toString()}),e}function Up(n,e){return eg(n.databaseId,e.path)}function Zf(n,e){let t=yI(e);if(t.get(1)!==n.databaseId.projectId)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(wI(t))}function _I(n,e){return eg(n.databaseId,e)}function oD(n){let e=yI(n);return e.length===4?je.emptyPath():wI(e)}function jp(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wI(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sE(n,e,t){return{name:Up(n,e),fields:t.value.mapValue.fields}}function aD(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,m){return d.useProto3Json?(Te(m===void 0||typeof m=="string",58123),dt.fromBase64String(m||"")):(Te(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dt.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let m=d.code===void 0?P.UNKNOWN:gI(d.code);return new G(m,d.message||"")}(o);t=new Bl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Zf(n,r.document.name),s=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):de.min(),c=new Vt({mapValue:{fields:r.document.fields}}),l=fn.newFoundDocument(i,s,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new ms(d,m,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Zf(n,r.document),s=r.readTime?Rn(r.readTime):de.min(),o=fn.newNoDocument(i,s),c=r.removedTargetIds||[];t=new ms([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Zf(n,r.document),s=r.removedTargetIds||[];t=new ms([],s,i,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Mp(i,s),c=r.targetId;t=new jl(c,o)}}return t}function cD(n,e){let t;if(e instanceof Ti)t={update:sE(n,e.key,e.value)};else if(e instanceof Cs)t={delete:Up(n,e.key)};else if(e instanceof Pn)t={update:sE(n,e.key,e.data),updateMask:vD(e.fieldMask)};else{if(!(e instanceof kp))return te(16599,{ft:e.type});t={verify:Up(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof bi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ur)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ts)return{fieldPath:o.field.canonicalString(),increment:c.Re};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(n,e.precondition)),t}function lD(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Rn(i.updateTime):Rn(s);return o.isEqual(de.min())&&(o=Rn(s)),new Ap(o,i.transformResults||[])}(t,e))):[]}function uD(n,e){return{documents:[_I(n,e.path)]}}function dD(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_I(n,i);let s=function(d){if(d.length!==0)return II(pn.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(m=>function(_){return{field:hs(_.field),direction:pD(_.dir)}}(m))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Lp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function hD(n){let e=oD(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1,65062);let m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=function(v){let _=EI(v);return _ instanceof pn&&ZE(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(v){return v.map(_=>function(N){return new Ii(fs(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(v){let _;return _=typeof v=="object"?v.value:v,pu(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(v){let _=!!v.before,R=v.values||[];return new Is(R,_)}(t.startAt));let d=null;return t.endAt&&(d=function(v){let _=!v.before,R=v.values||[];return new Is(R,_)}(t.endAt)),UR(e,i,o,s,c,"F",l,d)}function fD(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=fs(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fs(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=fs(t.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=fs(t.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(n):n.fieldFilter!==void 0?function(t){return Qe.create(fs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pn.create(t.compositeFilter.filters.map(r=>EI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(t.compositeFilter.op))}(n):te(30097,{filter:n})}function pD(n){return nD[n]}function mD(n){return rD[n]}function gD(n){return iD[n]}function hs(n){return{fieldPath:n.canonicalString()}}function fs(n){return Lt.fromServerFormat(n.fieldPath)}function II(n){return n instanceof Qe?function(t){if(t.op==="=="){if(Gw(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NAN"}};if(Hw(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gw(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NAN"}};if(Hw(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(t.field),op:mD(t.op),value:t.value}}}(n):n instanceof pn?function(t){let r=t.getFilters().map(i=>II(i));return r.length===1?r[0]:{compositeFilter:{op:gD(t.op),filters:r}}}(n):te(54877,{filter:n})}function vD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ya=class n{constructor(e,t,r,i,s=de.min(),o=de.min(),c=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bp=class{constructor(e){this.wt=e}};function yD(n){let e=hD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}var zl=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),fa(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=rr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ir(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?YE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):QE(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):te(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=_s,c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Le(c)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),X.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};zl.Wt=new zl;var $p=class{constructor(){this.Cn=new qp}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Ei.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},qp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nt(je.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(je.comparator)).toArray()}};var jL=new Uint8Array(0);var oE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040,Gt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(TI,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);var _a=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var aE="LruGarbageCollector",_D=1048576;function cE([n,e],[t,r]){let i=fe(n,t);return i===0?fe(e,r):i}var zp=class{constructor(e){this.Er=e,this.buffer=new nt(cE),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Hp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Q(aE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ds(t)?Q(aE,"Ignoring IndexedDB error during garbage collection: ",t):yield Rs(t)}yield this.mr(3e5)}))}},Gp=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Hm.le);let r=new zp(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(oE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oE):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,c,l,d,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(s=v,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),us()<=ge.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${v} documents in `+(d-l)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}};function wD(n,e){return new Gp(n,e)}var Wp=class{constructor(){this.changes=new sr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Kp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Qp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&da(r.mutation,i,Wt.empty(),Xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=vi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=aa();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=or(),o=ua(),c=function(){return ua()}();return t.forEach((l,d)=>{let m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof Pn)?s=s.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),da(m.mutation,d,m.mutation.getFieldMask(),Xe.now())):o.set(d.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,m)=>o.set(d,m)),t.forEach((d,m)=>{var v;return c.set(d,new Kp(m,(v=o.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){let r=ua(),i=new Ge((o,c)=>o-c),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let m=r.get(l)||Wt.empty();m=c.applyToLocalView(d,m),r.set(l,m);let v=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,v)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,m=l.value,v=cI();m.forEach(_=>{if(!s.has(_)){let R=pI(t.get(_),r.get(_));R!==null&&v.set(_,R),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(vi()),c=ha,l=s;return o.next(d=>L.forEach(d,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{l=l.insert(m,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,ve())).next(m=>({batchId:c,changes:aI(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=aa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=aa();return this.indexManager.getCollectionParents(e,s).next(c=>L.forEach(c,l=>{let d=function(v,_){return new Lr(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((v,_)=>{o=o.insert(v,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,d)=>{let m=d.getKey();o.get(m)===null&&(o=o.insert(m,fn.newInvalidDocument(m)))});let c=aa();return o.forEach((l,d)=>{let m=s.get(l);m!==void 0&&da(m.mutation,d,Wt.empty(),Xe.now()),yu(t,d)&&(c=c.insert(l,d))}),c})}};var Yp=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return L.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:yD(i.bundledQuery),readTime:Rn(i.readTime)}}(t)),L.resolve()}};var Jp=class{constructor(){this.overlays=new Ge(X.comparator),this.Qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vi();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=vi(),s=t.length+1,o=new X(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ge((d,m)=>d-m),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=s.get(d.largestBatchId);m===null&&(m=vi(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}let c=vi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return L.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pp(t,r));let s=this.Qr.get(t);s===void 0&&(s=ve(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}};var Xp=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var wa=class{constructor(){this.$r=new nt(Ke.Ur),this.Kr=new nt(Ke.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ke(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new X(new je([])),r=new Ke(t,e),i=new Ke(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new X(new je([])),r=new Ke(t,e),i=new Ke(t,e+1),s=ve();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ke(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return X.comparator(e.key,t.key)||fe(e.Zr,t.Zr)}static Wr(e,t){return fe(e.Zr,t.Zr)||X.comparator(e.key,t.key)}};var Zp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new nt(Ke.Ur)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Rp(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.Xr=this.Xr.add(new Ke(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Gm:this.nr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{let c=this.ei(o.Zr);s.push(c)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(fe);return t.forEach(i=>{let s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],c=>{r=r.add(c.Zr)})}),L.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;X.isDocumentKey(s)||(s=s.child(""));let o=new Ke(new X(s),0),c=new nt(fe);return this.Xr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Zr)),!0)},o),L.resolve(this.ni(c))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return L.forEach(t.mutations,i=>{let s=new Ke(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Ke(t,0),i=this.Xr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var em=class{constructor(e){this.ii=e,this.docs=function(){return new Ge(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=or();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=or(),o=t.path,c=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:m}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wR(_R(m),r)<=0||(i.has(m.key)||yu(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){te(9500)}si(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tm(this)}getSize(e){return L.resolve(this.size)}},tm=class extends Wp{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var nm=class{constructor(e){this.persistence=e,this.oi=new sr(t=>Jm(t),Xm),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this._i=0,this.ai=new wa,this.targetCount=0,this.ui=_a.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),L.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new _a(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Tr(t),L.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.ai.containsKey(t))}};var Hl=class{constructor(e,t){this.ci={},this.overlays={},this.li=new Hm(0),this.hi=!1,this.hi=!0,this.Pi=new Xp,this.referenceDelegate=e(this),this.Ti=new nm(this),this.indexManager=new $p,this.remoteDocumentCache=function(i){return new em(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Bp(t),this.Ei=new Yp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Zp(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);let i=new rm(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return L.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},rm=class extends hp{constructor(e){super(),this.currentSequenceNumber=e}},im=class n{constructor(e){this.persistence=e,this.Vi=new wa,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw te(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.gi,r=>{let i=X.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,de.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return L.or([()=>L.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Gl=class n{constructor(e,t){this.persistence=e,this.yi=new sr(r=>TR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wD(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return L.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(c=>{c||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xl(e.data.value)),t}Dr(e,t,r){return L.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var sm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=ve(),i=ve();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var om=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var am=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return i_()?8:IR(et())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new om;return this.Ss(e,t,o).next(c=>{if(s.result=c,this.fs)return this.Ds(e,t,o,c.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(us()<=ge.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ds(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),L.resolve()):(us()<=ge.DEBUG&&Q("QueryEngine","Query:",ds(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(us()<=ge.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ds(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(t))):L.resolve())}ws(e,t){if(Yw(t))return L.resolve(null);let r=kn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),r=kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.vs(t,c);return this.Cs(t,d,o,l.readTime)?this.ws(e,xp(t,null,"F")):this.Fs(e,d,t,l)}))})))}bs(e,t,r,i){return Yw(t)||i.isEqual(de.min())?L.resolve(null):this.ys.getDocuments(e,r).next(s=>{let o=this.vs(t,s);return this.Cs(t,o,r,i)?L.resolve(null):(us()<=ge.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ds(t)),this.Fs(e,o,t,yR(i,ha)).next(c=>c))})}vs(e,t){let r=new nt(sI(e));return t.forEach((i,s)=>{yu(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return us()<=ge.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ds(t)),this.ys.getDocumentsMatchingQuery(e,t,Ei.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var tg="LocalStore",ED=3e8,cm=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Ge(fe),this.Os=new sr(s=>Jm(s),Xm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qp(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function ID(n,e,t,r){return new cm(n,e,t,r)}function SI(n,e){return E(this,null,function*(){let t=le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=ve();for(let d of i){o.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}for(let d of s){c.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}return t.localDocuments.getDocuments(r,l).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})})}function bD(n,e){let t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,m){let v=d.batch,_=v.keys(),R=L.resolve();return _.forEach(N=>{R=R.next(()=>m.getEntry(l,N)).next(H=>{let U=d.docVersions.get(N);Te(U!==null,48541),H.version.compareTo(U)<0&&(v.applyToRemoteDocument(H,d),H.isValidDocument()&&(H.setReadTime(d.commitVersion),m.addEntry(H)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(l,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function CI(n){let e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function TD(n,e){let t=le(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let c=[];e.targetChanges.forEach((m,v)=>{let _=i.get(v);if(!_)return;c.push(t.Ti.removeMatchingKeys(s,m.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(s,m.addedDocuments,v)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(dt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,r)),i=i.insert(v,R),function(H,U,ae){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=ED?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0}(_,R,m)&&c.push(t.Ti.updateTargetData(s,R))});let l=or(),d=ve();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))}),c.push(SD(s,o,e.documentUpdates).next(m=>{l=m.qs,d=m.Qs})),!r.isEqual(de.min())){let m=t.Ti.getLastRemoteSnapshotVersion(s).next(v=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(m)}return L.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.xs=i,s))}function SD(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=or();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Q(tg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function CD(n,e){let t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Gm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xD(n,e){let t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new ya(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function lm(n,e,t){return E(this,null,function*(){let r=le(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ds(o))throw o;Q(tg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function lE(n,e,t){let r=le(n),i=de.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,m){let v=le(l),_=v.Os.get(m);return _!==void 0?L.resolve(v.xs.get(_)):v.Ti.getTargetData(d,m)}(r,o,kn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:de.min(),t?s:ve())).next(c=>(AD(r,BR(e),c),{documents:c,$s:s})))}function AD(n,e,t){let r=n.Ns.get(e)||de.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}var Wl=class{constructor(){this.activeTargetIds=WR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var um=class{constructor(){this.xo=new Wl,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Wl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dm=class{No(e){}shutdown(){}};var uE="ConnectivityMonitor",Kl=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Q(uE,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){Q(uE,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cl=null;function hm(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}var ep="RestConnection",kD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fm=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Vl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){let o=hm(),c=this.jo(e,t.toUriEncodedString());Q(ep,`Sending RPC '${e}' ${o}:`,c,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);let{host:d}=new URL(c),m=xr(d);return this.Jo(e,c,l,r,m).then(v=>(Q(ep,`Received RPC '${e}' ${o}: `,v),v),v=>{throw vs(ep,`RPC '${e}' ${o} failed with error: `,v,"url: ",c,"request:",r),v})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ks}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){let r=kD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var pm=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ut="WebChannelConnection",mm=class extends fm{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=hm();return new Promise((c,l)=>{let d=new Kf;d.setWithCredentials(!0),d.listenOnce(Qf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case oa.NO_ERROR:let v=d.getResponseJson();Q(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case oa.TIMEOUT:Q(ut,`RPC '${e}' ${o} timed out`),l(new G(P.DEADLINE_EXCEEDED,"Request time out"));break;case oa.HTTP_ERROR:let _=d.getStatus();if(Q(ut,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);let N=R?.error;if(N&&N.status&&N.message){let H=function(ae){let ie=ae.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(ie)>=0?ie:P.UNKNOWN}(N.status);l(new G(H,N.message))}else l(new G(P.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new G(P.UNAVAILABLE,"Connection failed."));break;default:te(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{Q(ut,`RPC '${e}' ${o} completed.`)}});let m=JSON.stringify(i);Q(ut,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",m,r,15)})}I_(e,t,r){let i=hm(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xf(),c=Jf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let m=s.join("");Q(ut,`Creating RPC '${e}' stream ${i}: ${m}`,l);let v=o.createWebChannel(m,l);this.E_(v);let _=!1,R=!1,N=new pm({Zo:U=>{R?Q(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(_||(Q(ut,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),Q(ut,`RPC '${e}' stream ${i} sending:`,U),v.send(U))},Xo:()=>v.close()}),H=(U,ae,ie)=>{U.listen(ae,oe=>{try{ie(oe)}catch(ke){setTimeout(()=>{throw ke},0)}})};return H(v,ls.EventType.OPEN,()=>{R||(Q(ut,`RPC '${e}' stream ${i} transport opened.`),N.__())}),H(v,ls.EventType.CLOSE,()=>{R||(R=!0,Q(ut,`RPC '${e}' stream ${i} transport closed`),N.u_(),this.d_(v))}),H(v,ls.EventType.ERROR,U=>{R||(R=!0,vs(ut,`RPC '${e}' stream ${i} transport errored. Name:`,U.name,"Message:",U.message),N.u_(new G(P.UNAVAILABLE,"The operation could not be completed")))}),H(v,ls.EventType.MESSAGE,U=>{var ae;if(!R){let ie=U.data[0];Te(!!ie,16349);let oe=ie,ke=oe?.error||((ae=oe[0])===null||ae===void 0?void 0:ae.error);if(ke){Q(ut,`RPC '${e}' stream ${i} received error:`,ke);let ht=ke.status,Se=function(b){let T=We[b];if(T!==void 0)return gI(T)}(ht),S=ke.message;Se===void 0&&(Se=P.INTERNAL,S="Unknown error status: "+ht+" with message "+ke.message),R=!0,N.u_(new G(Se,S)),v.close()}else Q(ut,`RPC '${e}' stream ${i} received:`,ie),N.c_(ie)}}),H(c,Yf.STAT_EVENT,U=>{U.stat===bl.PROXY?Q(ut,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===bl.NOPROXY&&Q(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function tp(){return typeof document<"u"?document:null}function _u(n){return new Vp(n,!0)}var Ql=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var dE="PersistentStream",Yl=class{constructor(e,t,r,i,s,o,c,l){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Ql(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return E(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return E(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return E(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new G(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>E(this,null,function*(){this.state=0,this.start()}))}j_(e){return Q(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Q(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gm=class extends Yl{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=aD(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Rn(o.readTime):de.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=jp(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=Sp(l)?{documents:uD(s,l)}:{query:dD(s,l).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=vI(s,o.resumeToken);let d=Lp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=ql(s,o.snapshotVersion.toTimestamp());let d=Lp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=fD(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=jp(this.serializer),t.removeTarget=e,this.Q_(t)}},vm=class extends Yl{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=lD(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=jp(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>cD(this.serializer,r))};this.Q_(t)}};var ym=class{},_m=class extends ym{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,Fp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(P.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,Fp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(P.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},wm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(nr(t),this.ua=!1):Q("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Si="RemoteStore",Em=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{r.enqueueAndForget(()=>E(this,null,function*(){xi(this)&&(Q(Si,"Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let d=le(l);d.da.add(4),yield Aa(d),d.Va.set("Unknown"),d.da.delete(4),yield wu(d)})}(this))}))}),this.Va=new wm(r,i)}};function wu(n){return E(this,null,function*(){if(xi(n))for(let e of n.Aa)yield e(!0)})}function Aa(n){return E(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function xI(n,e){let t=le(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),sg(t)?ig(t):Ps(t).N_()&&rg(t,e))}function ng(n,e){let t=le(n),r=Ps(t);t.Ea.delete(e),r.N_()&&AI(t,e),t.Ea.size===0&&(r.N_()?r.k_():xi(t)&&t.Va.set("Unknown"))}function rg(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ps(n).Z_(e)}function AI(n,e){n.ma.Ke(e),Ps(n).X_(e)}function ig(n){n.ma=new Op({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ps(n).start(),n.Va.ca()}function sg(n){return xi(n)&&!Ps(n).O_()&&n.Ea.size>0}function xi(n){return le(n).da.size===0}function kI(n){n.ma=void 0}function RD(n){return E(this,null,function*(){n.Va.set("Online")})}function DD(n){return E(this,null,function*(){n.Ea.forEach((e,t)=>{rg(n,e)})})}function PD(n,e){return E(this,null,function*(){kI(n),sg(n)?(n.Va.Pa(e),ig(n)):n.Va.set("Unknown")})}function MD(n,e,t){return E(this,null,function*(){if(n.Va.set("Online"),e instanceof Bl&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.Ea.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Ea.delete(c),i.ma.removeTarget(c))})}(n,e)}catch(r){Q(Si,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jl(n,r)}else if(e instanceof ms?n.ma.Xe(e):e instanceof jl?n.ma.ot(e):n.ma.nt(e),!t.isEqual(de.min()))try{let r=yield CI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.ma.It(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let m=s.Ea.get(d);m&&s.Ea.set(d,m.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let m=s.Ea.get(l);if(!m)return;s.Ea.set(l,m.withResumeToken(dt.EMPTY_BYTE_STRING,m.snapshotVersion)),AI(s,l);let v=new ya(m.target,l,d,m.sequenceNumber);rg(s,v)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Q(Si,"Failed to raise snapshot:",r),yield Jl(n,r)}})}function Jl(n,e,t){return E(this,null,function*(){if(!Ds(e))throw e;n.da.add(1),yield Aa(n),n.Va.set("Offline"),t||(t=()=>CI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){Q(Si,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield wu(n)}))})}function RI(n,e){return e().catch(t=>Jl(n,t,e))}function Eu(n){return E(this,null,function*(){let e=le(n),t=jr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Gm;for(;ND(e);)try{let i=yield CD(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,OD(e,i)}catch(i){yield Jl(e,i)}DI(e)&&PI(e)})}function ND(n){return xi(n)&&n.Ia.length<10}function OD(n,e){n.Ia.push(e);let t=jr(n);t.N_()&&t.ea&&t.ta(e.mutations)}function DI(n){return xi(n)&&!jr(n).O_()&&n.Ia.length>0}function PI(n){jr(n).start()}function VD(n){return E(this,null,function*(){jr(n).ia()})}function LD(n){return E(this,null,function*(){let e=jr(n);for(let t of n.Ia)e.ta(t.mutations)})}function FD(n,e,t){return E(this,null,function*(){let r=n.Ia.shift(),i=Dp.from(r,e,t);yield RI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Eu(n)})}function UD(n,e){return E(this,null,function*(){e&&jr(n).ea&&(yield function(r,i){return E(this,null,function*(){if(function(o){return eD(o)&&o!==P.ABORTED}(i.code)){let s=r.Ia.shift();jr(r).L_(),yield RI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Eu(r)}})}(n,e)),DI(n)&&PI(n)})}function hE(n,e){return E(this,null,function*(){let t=le(n);t.asyncQueue.verifyOperationInProgress(),Q(Si,"RemoteStore received new credentials");let r=xi(t);t.da.add(3),yield Aa(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield wu(t)})}function jD(n,e){return E(this,null,function*(){let t=le(n);e?(t.da.delete(2),yield wu(t)):e||(t.da.add(2),yield Aa(t),t.Va.set("Unknown"))})}function Ps(n){return n.fa||(n.fa=function(t,r,i){let s=le(t);return s.oa(),new gm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:RD.bind(null,n),n_:DD.bind(null,n),i_:PD.bind(null,n),Y_:MD.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.fa.L_(),sg(n)?ig(n):n.Va.set("Unknown")):(yield n.fa.stop(),kI(n))}))),n.fa}function jr(n){return n.ga||(n.ga=function(t,r,i){let s=le(t);return s.oa(),new vm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:VD.bind(null,n),i_:UD.bind(null,n),na:LD.bind(null,n),ra:FD.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.ga.L_(),yield Eu(n)):(yield n.ga.stop(),n.Ia.length>0&&(Q(Si,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var Im=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function og(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Ds(n))return new G(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Xl=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=aa(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Zl=class{constructor(){this.pa=new Ge(X.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):te(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},xs=class n{constructor(e,t,r,i,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Xl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var bm=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},Tm=class{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=le(t),s=i.queries;i.queries=fE(),s.forEach((o,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new G(P.ABORTED,"Firestore shutting down"))}};function fE(){return new sr(n=>iI(n),vu)}function ag(n,e){return E(this,null,function*(){let t=le(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new bm,r=e.va()?0:1);try{switch(r){case 0:s.ba=yield t.onListen(i,!0);break;case 1:s.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=og(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&lg(t)})}function cg(n,e){return E(this,null,function*(){let t=le(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function BD(n,e){let t=le(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.Sa)c.Ma(i)&&(r=!0);o.ba=i}}r&&lg(t)}function $D(n,e,t){let r=le(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function lg(n){n.Ca.forEach(e=>{e.next()})}var Sm,pE;(pE=Sm||(Sm={})).xa="default",pE.Cache="cache";var Ea=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Sm.Cache}};var eu=class{constructor(e){this.key=e}},tu=class{constructor(e){this.key=e}},Cm=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.Za=sI(e),this.Xa=new Xl(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Zl,i=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,v)=>{let _=i.get(m),R=yu(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),U=!1;_&&R?_.data.isEqual(R.data)?N!==H&&(r.track({type:3,doc:R}),U=!0):this.ru(_,R)||(r.track({type:2,doc:R}),U=!0,(l&&this.Za(R,l)>0||d&&this.Za(R,d)<0)&&(c=!0)):!_&&R?(r.track({type:0,doc:R}),U=!0):_&&!R&&(r.track({type:1,doc:_}),U=!0,(l||d)&&(c=!0)),U&&(R?(o=o.add(R),s=H?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{Xa:o,nu:r,Cs:c,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let o=e.nu.wa();o.sort((m,v)=>function(R,N){let H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:U})}};return H(R)-H(N)}(m.type,v.type)||this.Za(m.doc,v.doc)),this.iu(r),i=i!=null&&i;let c=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Ja;return this.Ja=l,o.length!==0||d?{snapshot:new xs(this.query,e.Xa,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Zl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=ve(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new tu(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new eu(r))}),t}au(e){this.Ha=e.$s,this.Ya=ve();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return xs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},ug="SyncEngine",xm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Am=class{constructor(e){this.key=e,this.cu=!1}},km=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new sr(c=>iI(c),vu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ge(X.comparator),this.Eu=new Map,this.du=new wa,this.Au={},this.Ru=new Map,this.Vu=_a.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function qD(n,e,t=!0){return E(this,null,function*(){let r=FI(n),i,s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=yield MI(r,e,t,!0),i})}function zD(n,e){return E(this,null,function*(){let t=FI(n);yield MI(t,e,!0,!1)})}function MI(n,e,t,r){return E(this,null,function*(){let i=yield xD(n.localStore,kn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield HD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&xI(n.remoteStore,i),c})}function HD(n,e,t,r,i){return E(this,null,function*(){n.fu=(v,_,R)=>function(H,U,ae,ie){return E(this,null,function*(){let oe=U.view.tu(ae);oe.Cs&&(oe=yield lE(H.localStore,U.query,!1).then(({documents:S})=>U.view.tu(S,oe)));let ke=ie&&ie.targetChanges.get(U.targetId),ht=ie&&ie.targetMismatches.get(U.targetId)!=null,Se=U.view.applyChanges(oe,H.isPrimaryClient,ke,ht);return gE(H,U.targetId,Se.ou),Se.snapshot})}(n,v,_,R);let s=yield lE(n.localStore,e,!0),o=new Cm(e,s.$s),c=o.tu(s.documents),l=va.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,l);gE(n,t,d.ou);let m=new xm(e,t,o);return n.hu.set(e,m),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),d.snapshot})}function GD(n,e,t){return E(this,null,function*(){let r=le(n),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(o=>!vu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ng(r.remoteStore,i.targetId),Rm(r,i.targetId)}).catch(Rs))):(Rm(r,i.targetId),yield lm(r.localStore,i.targetId,!0))})}function WD(n,e){return E(this,null,function*(){let t=le(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ng(t.remoteStore,r.targetId))})}function KD(n,e,t){return E(this,null,function*(){let r=t2(n);try{let i=yield function(o,c){let l=le(o),d=Xe.now(),m=c.reduce((R,N)=>R.add(N.key),ve()),v,_;return l.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=or(),H=ve();return l.Bs.getEntries(R,m).next(U=>{N=U,N.forEach((ae,ie)=>{ie.isValidDocument()||(H=H.add(ae))})}).next(()=>l.localDocuments.getOverlayedDocuments(R,N)).next(U=>{v=U;let ae=[];for(let ie of c){let oe=ZR(ie,v.get(ie.key).overlayedDocument);oe!=null&&ae.push(new Pn(ie.key,oe,JE(oe.value.mapValue),Kt.exists(!0)))}return l.mutationQueue.addMutationBatch(R,d,ae,c)}).next(U=>{_=U;let ae=U.applyToLocalDocumentSet(v,H);return l.documentOverlayCache.saveOverlays(R,U.batchId,ae)})}).then(()=>({batchId:_.batchId,changes:aI(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let d=o.Au[o.currentUser.toKey()];d||(d=new Ge(fe)),d=d.insert(c,l),o.Au[o.currentUser.toKey()]=d}(r,i.batchId,t),yield ka(r,i.changes),yield Eu(r.remoteStore)}catch(i){let s=og(i,"Failed to persist write");t.reject(s)}})}function NI(n,e){return E(this,null,function*(){let t=le(n);try{let r=yield TD(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Te(o.cu,14607):i.removedDocuments.size>0&&(Te(o.cu,42227),o.cu=!1))}),yield ka(t,r,e)}catch(r){yield Rs(r)}})}function mE(n,e,t){let r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((s,o)=>{let c=o.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=le(o);l.onlineState=c;let d=!1;l.queries.forEach((m,v)=>{for(let _ of v.Sa)_.Fa(c)&&(d=!0)}),d&&lg(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QD(n,e,t){return E(this,null,function*(){let r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ge(X.comparator);o=o.insert(s,fn.newNoDocument(s,de.min()));let c=ve().add(s),l=new Ul(de.min(),new Map,new Ge(fe),o,c);yield NI(r,l),r.Iu=r.Iu.remove(s),r.Eu.delete(e),dg(r)}else yield lm(r.localStore,e,!1).then(()=>Rm(r,e,t)).catch(Rs)})}function YD(n,e){return E(this,null,function*(){let t=le(n),r=e.batch.batchId;try{let i=yield bD(t.localStore,e);VI(t,r,null),OI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ka(t,i)}catch(i){yield Rs(i)}})}function JD(n,e,t){return E(this,null,function*(){let r=le(n);try{let i=yield function(o,c){let l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return l.mutationQueue.lookupMutationBatch(d,c).next(v=>(Te(v!==null,37113),m=v.keys(),l.mutationQueue.removeMutationBatch(d,v))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>l.localDocuments.getDocuments(d,m))})}(r.localStore,e);VI(r,e,t),OI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ka(r,i)}catch(i){yield Rs(i)}})}function OI(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function VI(n,e,t){let r=le(n),i=r.Au[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||LI(n,r)})}function LI(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(ng(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),dg(n))}function gE(n,e,t){for(let r of t)r instanceof eu?(n.du.addReference(r.key,e),XD(n,r)):r instanceof tu?(Q(ug,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||LI(n,r.key)):te(19791,{pu:r})}function XD(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(Q(ug,"New document in limbo: "+t),n.Tu.add(r),dg(n))}function dg(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new X(je.fromString(e)),r=n.Vu.next();n.Eu.set(r,new Am(t)),n.Iu=n.Iu.insert(t,r),xI(n.remoteStore,new ya(kn(gu(t.path)),r,"TargetPurposeLimboResolution",Hm.le))}}function ka(n,e,t){return E(this,null,function*(){let r=le(n),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach((c,l)=>{o.push(r.fu(l,e,t).then(d=>{var m;if((d||t)&&r.isPrimaryClient){let v=d?!d.fromCache:(m=t?.targetChanges.get(l.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(l.targetId,v?"current":"not-current")}if(d){i.push(d);let v=sm.Rs(l.targetId,d);s.push(v)}}))}),yield Promise.all(o),r.lu.Y_(i),yield function(l,d){return E(this,null,function*(){let m=le(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>L.forEach(d,_=>L.forEach(_.ds,R=>m.persistence.referenceDelegate.addReference(v,_.targetId,R)).next(()=>L.forEach(_.As,R=>m.persistence.referenceDelegate.removeReference(v,_.targetId,R)))))}catch(v){if(!Ds(v))throw v;Q(tg,"Failed to update sequence numbers: "+v)}for(let v of d){let _=v.targetId;if(!v.fromCache){let R=m.xs.get(_),N=R.snapshotVersion,H=R.withLastLimboFreeSnapshotVersion(N);m.xs=m.xs.insert(_,H)}}})}(r.localStore,s))})}function ZD(n,e){return E(this,null,function*(){let t=le(n);if(!t.currentUser.isEqual(e)){Q(ug,"User change. New user:",e.toKey());let r=yield SI(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(c=>{c.forEach(l=>{l.reject(new G(P.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ka(t,r.ks)}})}function e2(n,e){let t=le(n),r=t.Eu.get(e);if(r&&r.cu)return ve().add(r.key);{let i=ve(),s=t.Pu.get(e);if(!s)return i;for(let o of s){let c=t.hu.get(o);i=i.unionWith(c.view.eu)}return i}}function FI(n){let e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QD.bind(null,e),e.lu.Y_=BD.bind(null,e.eventManager),e.lu.gu=$D.bind(null,e.eventManager),e}function t2(n){let e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JD.bind(null,e),e}var UI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=_u(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return ID(this.persistence,new am,t.initialUser,this.serializer)}Su(t){return new Hl(im.fi,this.serializer)}bu(t){return new um}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Dm=class extends UI{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Te(this.persistence.referenceDelegate instanceof Gl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Hp(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Hl(r=>Gl.fi(r,t),this.serializer)}};var n2=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZD.bind(null,this.syncEngine),yield jD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Tm}()}createDatastore(t){let r=_u(t.databaseInfo.databaseId),i=function(o){return new mm(o)}(t.databaseInfo);return function(o,c,l,d){return new _m(o,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,l){return new Em(i,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>mE(this.syncEngine,r,0),function(){return Kl.C()?new Kl:new dm}())}createSyncEngine(t,r){return function(s,o,c,l,d,m,v){let _=new km(s,o,c,l,d,m);return v&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(s){return E(this,null,function*(){let o=le(s);Q(Si,"RemoteStore shutting down."),o.da.add(5),yield Aa(o),o.Ra.shutdown(),o.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ia=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Br="FirestoreClient",Pm=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=Pl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>E(this,null,function*(){Q(Br,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(Q(Br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=og(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function np(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q(Br,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield SI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function vE(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield r2(n);Q(Br,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hE(e.remoteStore,i)),n._onlineComponents=e})}function r2(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(Br,"Using user provided OfflineComponentProvider");try{yield np(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;vs("Error using user provided cache. Falling back to memory cache: "+t),yield np(n,new UI)}}else Q(Br,"Using default OfflineComponentProvider"),yield np(n,new Dm(void 0));return n._offlineComponents})}function jI(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(Br,"Using user provided OnlineComponentProvider"),yield vE(n,n._uninitializedComponentsProvider._online)):(Q(Br,"Using default OnlineComponentProvider"),yield vE(n,new n2))),n._onlineComponents})}function i2(n){return jI(n).then(e=>e.syncEngine)}function nu(n){return E(this,null,function*(){let e=yield jI(n),t=e.eventManager;return t.onListen=qD.bind(null,e.syncEngine),t.onUnlisten=GD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WD.bind(null,e.syncEngine),t})}function s2(n,e,t={}){let r=new hn;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(s,o,c,l,d){let m=new Ia({next:_=>{m.xu(),o.enqueueAndForget(()=>cg(s,v));let R=_.docs.has(c);!R&&_.fromCache?d.reject(new G(P.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&l&&l.source==="server"?d.reject(new G(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new Ea(gu(c.path),m,{includeMetadataChanges:!0,Qa:!0});return ag(s,v)}(yield nu(n),n.asyncQueue,e,t,r)})),r.promise}function o2(n,e,t={}){let r=new hn;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(s,o,c,l,d){let m=new Ia({next:_=>{m.xu(),o.enqueueAndForget(()=>cg(s,v)),_.fromCache&&l.source==="server"?d.reject(new G(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new Ea(c,m,{includeMetadataChanges:!0,Qa:!0});return ag(s,v)}(yield nu(n),n.asyncQueue,e,t,r)})),r.promise}function BI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yE=new Map;function $I(n,e,t){if(!t)throw new G(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a2(n,e,t,r){if(e===!0&&r===!0)throw new G(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _E(n){if(!X.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wE(n){if(X.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Iu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te(12329,{type:typeof n})}function Ft(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Iu(n);throw new G(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var qI="firestore.googleapis.com",EE=!0,ru=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qI,this.ssl=EE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_D)throw new G(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},As=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ru({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ru(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ip;switch(r.type){case"firstParty":return new cp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=yE.get(t);r&&(Q("ComponentProvider","Removing Datastore"),yE.delete(t),r.terminate())}(this),Promise.resolve()}};function zI(n,e,t,r={}){var i;n=Ft(n,As);let s=xr(e),o=n._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Qc(`https://${l}`),Yc("Firestore",!0)),o.host!==qI&&o.host!==l&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Ht(d,c)&&(n._setSettings(d),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=tt.MOCK_USER;else{m=Xy(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new G(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new tt(_)}n._authCredentials=new sp(new Rl(m,v))}}var $r=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Or=class n extends $r{constructor(e,t,r){super(e,t,gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function HI(n,e,...t){if(n=ze(n),$I("collection","path",e),n instanceof As){let r=je.fromString(e,...t);return wE(r),new Or(n,null,r)}{if(!(n instanceof wt||n instanceof Or))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return wE(r),new Or(n.firestore,null,r)}}function hg(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Pl.newId()),$I("doc","path",e),n instanceof As){let r=je.fromString(e,...t);return _E(r),new wt(n,null,new X(r))}{if(!(n instanceof wt||n instanceof Or))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return _E(r),new wt(n.firestore,n instanceof Or?n.converter:null,new X(r))}}var IE="AsyncQueue",iu=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Ql(this,"async_queue_retry"),this.rc=()=>{let r=tp();r&&Q(IE,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=tp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new hn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return E(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ds(e))throw e;Q(IE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,nr("INTERNAL UNHANDLED ERROR: ",bE(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=Im.createAndSchedule(this,e,t,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&te(47125,{cc:bE(this.Xu)})}verifyOperationInProgress(){}lc(){return E(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function bE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function TE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var mn=class extends As{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new iu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new iu(e),this._firestoreClient=void 0,yield e}})}};function GI(n,e){let t=typeof n=="object"?n:ui(),r=typeof n=="string"?n:e||Vl,i=rs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Jy("firestore");s&&zI(i,...s)}return i}function Ra(n){if(n._terminated)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||c2(n),n._firestoreClient}function c2(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,m){return new fp(c,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,BI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Pm(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var ba=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new G(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ci=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qr=class{constructor(e){this._methodName=e}};var Ta=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}};var Sa=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var l2=/^__.*__$/,Mm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ti(e,this.data,t,this.fieldTransforms)}},su=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function WI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ic:n})}}var ou=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return cu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(WI(this.Ic)&&l2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},Nm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_u(e)}bc(e,t,r,i=!1){return new ou({Ic:e,methodName:t,wc:r,path:Lt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bu(n){let e=n._freezeSettings(),t=_u(n._databaseId);return new Nm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KI(n,e,t,r,i,s={}){let o=n.bc(s.merge||s.mergeFields?2:0,e,t,i);fg("Data must be an object, but it was:",o,r);let c=XI(r,o),l,d;if(s.merge)l=new Wt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let m=[];for(let v of s.mergeFields){let _=Fm(e,v,t);if(!o.contains(_))throw new G(P.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);eb(m,_)||m.push(_)}l=new Wt(m),d=o.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,d=o.fieldTransforms;return new Mm(new Vt(c),l,d)}var au=class n extends qr{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function QI(n,e,t){return new ou({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Om=class n extends qr{_toFieldTransform(e){return new ga(e.path,new bi)}isEqual(e){return e instanceof n}},Vm=class n extends qr{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=QI(this,e,!0),r=this.Sc.map(s=>Ai(s,t)),i=new Fr(r);return new ga(e.path,i)}isEqual(e){return e instanceof n&&Ht(this.Sc,e.Sc)}},Lm=class n extends qr{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=QI(this,e,!0),r=this.Sc.map(s=>Ai(s,t)),i=new Ur(r);return new ga(e.path,i)}isEqual(e){return e instanceof n&&Ht(this.Sc,e.Sc)}};function YI(n,e,t,r){let i=n.bc(1,e,t);fg("Data must be an object, but it was:",i,r);let s=[],o=Vt.empty();zr(r,(l,d)=>{let m=pg(e,l,t);d=ze(d);let v=i.mc(m);if(d instanceof au)s.push(m);else{let _=Ai(d,v);_!=null&&(s.push(m),o.set(m,_))}});let c=new Wt(s);return new su(o,c,i.fieldTransforms)}function JI(n,e,t,r,i,s){let o=n.bc(1,e,t),c=[Fm(e,r,t)],l=[i];if(s.length%2!=0)throw new G(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(Fm(e,s[_])),l.push(s[_+1]);let d=[],m=Vt.empty();for(let _=c.length-1;_>=0;--_)if(!eb(d,c[_])){let R=c[_],N=l[_];N=ze(N);let H=o.mc(R);if(N instanceof au)d.push(R);else{let U=Ai(N,H);U!=null&&(d.push(R),m.set(R,U))}}let v=new Wt(d);return new su(m,v,o.fieldTransforms)}function u2(n,e,t,r=!1){return Ai(t,n.bc(r?4:3,e))}function Ai(n,e){if(ZI(n=ze(n)))return fg("Unsupported field value:",e,n),XI(n,e);if(n instanceof qr)return function(r,i){if(!WI(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=Ai(c,i.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xe.fromDate(r);return{timestampValue:ql(i.serializer,s)}}if(r instanceof Xe){let s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ql(i.serializer,s)}}if(r instanceof Ta)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:vI(i.serializer,r._byteString)};if(r instanceof wt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:eg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sa)return function(o,c){return{mapValue:{fields:{[Km]:{stringValue:Qm},[_s]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.gc("VectorValues must only contain numeric values.");return Zm(c.serializer,d)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Iu(r)}`)}(n,e)}function XI(n,e){let t={};return qE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(n,(r,i)=>{let s=Ai(i,e.Ac(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function ZI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Ta||n instanceof ba||n instanceof wt||n instanceof qr||n instanceof Sa)}function fg(n,e,t){if(!ZI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Iu(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function Fm(n,e,t){if((e=ze(e))instanceof Ci)return e._internalPath;if(typeof e=="string")return pg(n,e);throw cu("Field path arguments must be of type string or ",n,!1,void 0,t)}var d2=new RegExp("[~\\*/\\[\\]]");function pg(n,e,t){if(e.search(d2)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ci(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cu(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(P.INVALID_ARGUMENT,c+n+l)}function eb(n,e){return n.some(t=>t.isEqual(e))}var lu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Um(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Um=class extends lu{data(){return super.data()}};function Tu(n,e){return typeof e=="string"?pg(n,e):e instanceof Ci?e._internalPath:e._delegate._internalPath}function tb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ca=class{},uu=class extends Ca{};function nb(n,e,...t){let r=[];e instanceof Ca&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof jm).length,c=s.filter(l=>l instanceof du).length;if(o>1||o>0&&c>0)throw new G(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var du=class n extends uu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return sb(e._query,t),new $r(e.firestore,e.converter,Cp(e._query,t))}_parse(e){let t=bu(e.firestore);return function(s,o,c,l,d,m,v){let _;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new G(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){CE(v,m);let N=[];for(let H of v)N.push(SE(l,s,H));_={arrayValue:{values:N}}}else _=SE(l,s,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||CE(v,m),_=u2(c,o,v,m==="in"||m==="not-in");return Qe.create(d,m,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function rb(n,e,t){let r=e,i=Tu("where",n);return du._create(i,r,t)}var jm=class n extends Ca{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:pn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)sb(o,l),o=Cp(o,l)}(e._query,t),new $r(e.firestore,e.converter,Cp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Bm=class n extends uu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new G(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ii(s,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function ib(n,e="asc"){let t=e,r=Tu("orderBy",n);return Bm._create(r,t)}function SE(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new G(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rI(e)&&t.indexOf("/")!==-1)throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!X.isDocumentKey(r))throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zw(n,new X(r))}if(t instanceof wt)return zw(n,t._key);throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(t)}.`)}function CE(n,e){if(!Array.isArray(n)||n.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sb(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var $m=class{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[_s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Le(o.doubleValue));return new Sa(s)}convertGeoPoint(e){return new Ta(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=mu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pa(e));default:return null}}convertTimestamp(e){let t=rr(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);Te(bI(r),9688,{name:e});let i=new Ll(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(t)||nr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function ob(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _i=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hu=class extends lu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Tu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},gs=class extends hu{data(e={}){return super.data(e)}},fu=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _i(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gs(this._firestore,this._userDataWriter,r.key,r,new _i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new gs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new _i(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new gs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new _i(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:h2(c.type),doc:l,oldIndex:d,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function h2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:n})}}function ab(n){n=Ft(n,wt);let e=Ft(n.firestore,mn);return s2(Ra(e),n._key).then(t=>hb(e,n,t))}var xa=class extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}};function cb(n){n=Ft(n,$r);let e=Ft(n.firestore,mn),t=Ra(e),r=new xa(e);return tb(n._query),o2(t,n._query).then(i=>new fu(e,r,n,i))}function lb(n,e,t,...r){n=Ft(n,wt);let i=Ft(n.firestore,mn),s=bu(i),o;return o=typeof(e=ze(e))=="string"||e instanceof Ci?JI(s,"updateDoc",n._key,e,t,r):YI(s,"updateDoc",n._key,e),Su(i,[o.toMutation(n._key,Kt.exists(!0))])}function ub(n){return Su(Ft(n.firestore,mn),[new Cs(n._key,Kt.none())])}function db(n,e){let t=Ft(n.firestore,mn),r=hg(n),i=ob(n.converter,e);return Su(t,[KI(bu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function mg(n,...e){var t,r,i;n=ze(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TE(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TE(e[o])){let v=e[o];e[o]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let l,d,m;if(n instanceof wt)d=Ft(n.firestore,mn),m=gu(n._key.path),l={next:v=>{e[o]&&e[o](hb(d,n,v))},error:e[o+1],complete:e[o+2]};else{let v=Ft(n,$r);d=Ft(v.firestore,mn),m=v._query;let _=new xa(d);l={next:R=>{e[o]&&e[o](new fu(d,_,v,R))},error:e[o+1],complete:e[o+2]},tb(n._query)}return function(_,R,N,H){let U=new Ia(H),ae=new Ea(R,U,N);return _.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return ag(yield nu(_),ae)})),()=>{U.xu(),_.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return cg(yield nu(_),ae)}))}}(Ra(d),m,c,l)}function Su(n,e){return function(r,i){let s=new hn;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return KD(yield i2(r),i,s)})),s.promise}(Ra(n),e)}function hb(n,e,t){let r=t.docs.get(e._key),i=new xa(n);return new hu(n,i,e._key,r,new _i(t.hasPendingWrites,t.fromCache),e.converter)}var qm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bu(e)}set(e,t,r){this._verifyNotCommitted();let i=rp(e,this._firestore),s=ob(i.converter,t,r),o=KI(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Kt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=rp(e,this._firestore),o;return o=typeof(t=ze(t))=="string"||t instanceof Ci?JI(this._dataReader,"WriteBatch.update",s._key,t,r,i):YI(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Kt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=rp(e,this._firestore);return this._mutations=this._mutations.concat(new Cs(t._key,Kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rp(n,e){if((n=ze(n)).firestore!==e)throw new G(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function gg(){return new Om("serverTimestamp")}function fb(...n){return new Vm("arrayUnion",n)}function pb(...n){return new Lm("arrayRemove",n)}function mb(n){return Ra(n=Ft(n,mn)),new qm(n,e=>Su(n,e))}(function(e,t=!0){(function(i){ks=i})(kr),ln(new _t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new mn(new op(r.getProvider("auth-internal")),new lp(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(d.options.projectId,m)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),He(Nw,Ow,e),He(Nw,Ow,"esm2017")})();var Cu=function(){return Cu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cu.apply(this,arguments)};var m2={includeMetadataChanges:!1};function vg(n,e){return e===void 0&&(e=m2),new kt(function(t){var r=mg(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function gb(n){return vg(n,{includeMetadataChanges:!0})}function vb(n,e){return e===void 0&&(e={}),gb(n).pipe(ce(function(t){return yg(t,e)}))}function yg(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Cu(Cu({},r),(t={},t[e.idField]=n.id,t))}function yb(n){return vg(n,{includeMetadataChanges:!0}).pipe(ce(function(e){return e.docs}))}function _b(n,e){return e===void 0&&(e={}),yb(n).pipe(ce(function(t){return t.map(function(r){return yg(r,e)})}))}var gn=class{constructor(e){return e}},wb="firestore",_g=class{constructor(){return ss(wb)}};var wg=new we("angularfire2.firestore-instances");function g2(n,e){let t=Wo(wb,n,e);return t&&new gn(t)}function v2(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gn(r)}}var y2={provide:_g,deps:[[new Bt,wg]]},_2={provide:gn,useFactory:g2,deps:[[new Bt,wg],Yn]};function Eb(n,...e){return He("angularfire",Rr.full,"fst"),mr([_2,y2,{provide:wg,useFactory:v2(n),multi:!0,deps:[lt,Rt,Dr,hi,[new Bt,sa],[new Bt,os],...e]}])}var Ms=Ue(_b,!0);var Ib=Ue(vb,!0);var ki=Ue(db,!0,2);var Mn=Ue(HI,!0,2);var xu=Ue(ub,!0,2);var Et=Ue(hg,!0,2);var Au=Ue(ab,!0);var Ns=Ue(cb,!0);var bb=Ue(GI,!0);var Eg=Ue(ib,!0,2),vn=Ue(nb,!0,2);var Nn=Ue(lb,!0,2);var On=Ue(rb,!0,2),Ig=Ue(mb,!0,2);var Fe=class n{constructor(e){this.auth=e;this.user$=Aw(this.auth)}user$;signInWithGoogle(){let e=new Uf;return Rw(this.auth,e)}signOut(){return Dw(this.auth)}static \u0275fac=function(t){return new(t||n)(ne(gi))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function w2(n,e){if(n&1&&(tn(0),y(1),nn()),n&2){let t=e.ngIf;x(),Me(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function E2(n,e){n&1&&y(0," Welcome! ")}function I2(n,e){n&1&&(f(0,"div",50),V(1,"div",51),f(2,"span",52),y(3,"Loading quote..."),p()())}function b2(n,e){if(n&1&&(f(0,"div",53)(1,"blockquote",54),y(2),p(),f(3,"p",55),y(4),p()()),n&2){let t=O();x(2),Me(' "',t.homeQuote.q,'" '),x(2),Me(" \u2014 ",t.homeQuote.a," ")}}function T2(n,e){if(n&1){let t=ue();f(0,"div",56)(1,"p",57),y(2),p(),f(3,"button",58),F("click",function(){q(t);let i=O();return z(i.refreshQuote())}),y(4," Try again "),p()()}if(n&2){let t=O();x(2),se(t.quoteError)}}var ku=class n{constructor(e,t,r){this.authService=e;this.router=t;this.quotesService=r}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}navigateToFamilyTree(){this.router.navigate(["/family-tree"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)($(Fe),$(Oe),$(Fv))};static \u0275cmp=be({type:n,selectors:[["app-home"]],decls:91,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-yellow-100","dark:bg-yellow-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-yellow-200","dark:group-hover:bg-yellow-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4s-3.5 3-3.5 6c0 1.5 1 4 3.5 4s3.5-2.5 3.5-4c0-3-3.5-6-3.5-6zM12 14v4m-4-4h8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4a4 4 0 100-8 4 4 0 000 8zM3 20h18"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-yellow-600","dark:group-hover:text-yellow-400","transition-colors","duration-200"],["routerLink","/premier-league",1,"card","group"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-red-100","dark:bg-red-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-red-200","dark:group-hover:bg-red-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","sm:w-6","sm:h-6","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-red-600","dark:group-hover:text-red-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,r){if(t&1){let i=ue();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),W(4,w2,2,1,"ng-container",5),me(5,"async"),W(6,E2,1,0,"ng-template",null,0,gt),y(8," Explore some of my utilities, tools and research items. "),p()(),f(9,"div",6)(10,"div",7),F("click",function(){return q(i),z(r.navigateToLists())}),f(11,"div",8)(12,"div",9)(13,"div",10),K(),f(14,"svg",11),V(15,"path",12),p()()(),Z(),f(16,"div",13)(17,"h3",14),y(18," Todo Lists "),p(),f(19,"p",15),y(20," Create and manage your todo lists "),p()()()(),f(21,"div",7),F("click",function(){return q(i),z(r.navigateToIpLookup())}),f(22,"div",8)(23,"div",9)(24,"div",16),K(),f(25,"svg",17),V(26,"path",18)(27,"path",19),p()()(),Z(),f(28,"div",13)(29,"h3",20),y(30," IP Lookup "),p(),f(31,"p",15),y(32," Check your IP address and location "),p()()()(),f(33,"div",7),F("click",function(){return q(i),z(r.navigateToQuotes())}),f(34,"div",8)(35,"div",9)(36,"div",21),K(),f(37,"svg",22),V(38,"path",23),p()()(),Z(),f(39,"div",13)(40,"h3",24),y(41," Quotes "),p(),f(42,"p",15),y(43," Get inspired with random quotes "),p()()()(),f(44,"div",7),F("click",function(){return q(i),z(r.showProfile())}),f(45,"div",8)(46,"div",9)(47,"div",25),K(),f(48,"svg",26),V(49,"path",27),p()()(),Z(),f(50,"div",13)(51,"h3",28),y(52," Profile "),p(),f(53,"p",15),y(54," View your account information "),p()()()(),f(55,"div",7),F("click",function(){return q(i),z(r.navigateToFamilyTree())}),f(56,"div",8)(57,"div",9)(58,"div",29),K(),f(59,"svg",30),V(60,"path",31)(61,"path",32),p()()(),Z(),f(62,"div",13)(63,"h3",33),y(64," Family Tree "),p(),f(65,"p",15),y(66," Manage your family tree "),p()()()(),f(67,"a",34)(68,"div",8)(69,"div",9)(70,"div",35),K(),f(71,"svg",36),V(72,"path",37),p()()(),Z(),f(73,"div",13)(74,"h3",38),y(75," Premier League Standings "),p(),f(76,"p",15),y(77," View the current Premier League standings. "),p()()()()(),f(78,"div",39)(79,"div",40)(80,"div",41)(81,"h2",42),K(),f(82,"svg",43),V(83,"path",23),p(),y(84," Daily Inspiration "),p(),Z(),f(85,"button",44),F("click",function(){return q(i),z(r.refreshQuote())}),K(),f(86,"svg",45),V(87,"path",46),p()()(),W(88,I2,4,0,"div",47)(89,b2,5,2,"div",48)(90,T2,5,1,"div",49),p()()()()}if(t&2){let i=mt(7);x(4),M("ngIf",Ee(5,6,r.user$))("ngIfElse",i),x(81),M("disabled",r.quoteLoading),x(3),M("ngIf",r.quoteLoading),x(),M("ngIf",!r.quoteLoading&&r.homeQuote),x(),M("ngIf",!r.quoteLoading&&!r.homeQuote&&r.quoteError)}},dependencies:[Ce,qe,St,zt],encapsulation:2})};var Ru=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(ne(qi))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function C2(n,e){n&1&&(f(0,"div",8)(1,"div",9),V(2,"div",10),f(3,"span",11),y(4,"Loading IP information..."),p()()())}function x2(n,e){if(n&1&&(f(0,"div",12)(1,"div",13),K(),f(2,"svg",14),V(3,"path",15),p(),Z(),f(4,"div")(5,"h3",16),y(6,"Error"),p(),f(7,"p",17),y(8),p()()()()),n&2){let t=O();x(8),se(t.error)}}function A2(n,e){n&1&&(K(),f(0,"svg",49),V(1,"path",50),p())}function k2(n,e){n&1&&(K(),f(0,"svg",51),V(1,"path",50),p())}function R2(n,e){if(n&1){let t=ue();f(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),K(),f(4,"svg",22),V(5,"path",23),p()(),Z(),f(6,"div")(7,"h2",24),y(8,"Your IP Address"),p(),f(9,"p",11),y(10,"Current network information"),p()()(),f(11,"div",25)(12,"div",26)(13,"div")(14,"label",27),y(15,"IP Address"),p(),f(16,"div",28)(17,"code",29),y(18),p(),f(19,"button",30),F("click",function(){q(t);let i=O();return z(i.copyToClipboard(i.ipInfo.ip))}),K(),f(20,"svg",31),V(21,"path",32),p()()()(),Z(),f(22,"div")(23,"label",27),y(24,"Type"),p(),f(25,"span",33),y(26),p()()(),f(27,"div",26)(28,"div")(29,"label",27),y(30,"Continent"),p(),f(31,"p",34),y(32),p()(),f(33,"div")(34,"label",27),y(35,"Country"),p(),f(36,"p",34),y(37),p()()()()(),f(38,"div",35)(39,"div",19)(40,"h3",36),K(),f(41,"svg",37),V(42,"path",38)(43,"path",39),p(),y(44," Location Details "),p(),Z(),f(45,"div",40)(46,"div",41)(47,"span",42),y(48,"Region:"),p(),f(49,"span",43),y(50),p()(),f(51,"div",41)(52,"span",42),y(53,"City:"),p(),f(54,"span",43),y(55),p()(),f(56,"div",41)(57,"span",42),y(58,"ZIP Code:"),p(),f(59,"span",43),y(60),p()(),f(61,"div",41)(62,"span",42),y(63,"Latitude:"),p(),f(64,"span",43),y(65),p()(),f(66,"div",41)(67,"span",42),y(68,"Longitude:"),p(),f(69,"span",43),y(70),p()()()(),f(71,"div",19)(72,"h3",36),K(),f(73,"svg",37),V(74,"path",44),p(),y(75," Network Information "),p(),Z(),f(76,"div",40)(77,"div",41)(78,"span",42),y(79,"ISP:"),p(),f(80,"span",43),y(81),p()(),f(82,"div",41)(83,"span",42),y(84,"Organization:"),p(),f(85,"span",43),y(86),p()(),f(87,"div",41)(88,"span",42),y(89,"ASN:"),p(),f(90,"span",43),y(91),p()()()()(),f(92,"div",45)(93,"button",46),F("click",function(){q(t);let i=O();return z(i.refreshIpInfo())}),W(94,A2,2,0,"svg",47)(95,k2,2,0,"svg",48),y(96),p()()()}if(n&2){let t=O();x(18),se(t.ipInfo.ip),x(8),Me(" ",t.ipInfo.type||"Unknown"," "),x(6),se(t.ipInfo.continent_name||"Unknown"),x(5),se(t.ipInfo.country_name||"Unknown"),x(13),se(t.ipInfo.region_name||"Unknown"),x(5),se(t.ipInfo.city||"Unknown"),x(5),se(t.ipInfo.zip||"Unknown"),x(5),se(t.ipInfo.latitude||"Unknown"),x(5),se(t.ipInfo.longitude||"Unknown"),x(11),se((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),x(5),se((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),x(5),se((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown"),x(2),M("disabled",t.isLoading),x(),M("ngIf",!t.isLoading),x(),M("ngIf",t.isLoading),x(),Me(" ",t.isLoading?"Refreshing...":"Refresh IP Info"," ")}}var Du=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)($(Ru))};static \u0275cmp=be({type:n,selectors:[["app-ip-lookup"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2","sm:mb-4"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center"],[1,"btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-1.5 sm:mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-1.5 sm:mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2","animate-spin"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4," IP Address Lookup "),p(),f(5,"p",4),y(6," Get detailed information about your current IP address and location "),p()(),W(7,C2,5,0,"div",5)(8,x2,9,1,"div",6)(9,R2,97,16,"div",7),p()()),t&2&&(x(7),M("ngIf",r.isLoading),x(),M("ngIf",r.error),x(),M("ngIf",r.ipInfo&&!r.isLoading))},dependencies:[Ce,qe,Bo],encapsulation:2})};var Ob=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)($(vr),$(yn))};static \u0275dir=$e({type:n})}return n})(),Cg=(()=>{class n extends Ob{static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275dir=$e({type:n,features:[qt]})}return n})(),La=new we("");var D2={provide:La,useExisting:Bn(()=>xt),multi:!0};function P2(){let n=wr()?wr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var M2=new we(""),xt=(()=>{class n extends Ob{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!P2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)($(vr),$(yn),$(M2,8))};static \u0275dir=$e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&F("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[rn([D2]),qt]})}return n})();function xg(n){return n==null||Ag(n)===0}function Ag(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Fa=new we(""),qu=new we(""),N2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,It=class{static min(e){return O2(e)}static max(e){return V2(e)}static required(e){return Vb(e)}static requiredTrue(e){return L2(e)}static email(e){return F2(e)}static minLength(e){return U2(e)}static maxLength(e){return j2(e)}static pattern(e){return B2(e)}static nullValidator(e){return Mu()}static compose(e){return $b(e)}static composeAsync(e){return qb(e)}};function O2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function V2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Vb(n){return xg(n.value)?{required:!0}:null}function L2(n){return n.value===!0?null:{required:!0}}function F2(n){return xg(n.value)||N2.test(n.value)?null:{email:!0}}function U2(n){return e=>{let t=e.value?.length??Ag(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function j2(n){return e=>{let t=e.value?.length??Ag(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function B2(n){if(!n)return Mu;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xg(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Mu(n){return null}function Lb(n){return n!=null}function Fb(n){return hc(n)?Ae(n):n}function Ub(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function jb(n,e){return e.map(t=>t(n))}function $2(n){return!n.validate}function Bb(n){return n.map(e=>$2(e)?e:t=>e.validate(t))}function $b(n){if(!n)return null;let e=n.filter(Lb);return e.length==0?null:function(t){return Ub(jb(t,e))}}function kg(n){return n!=null?$b(Bb(n)):null}function qb(n){if(!n)return null;let e=n.filter(Lb);return e.length==0?null:function(t){let r=jb(t,e).map(Fb);return $0(r).pipe(ce(Ub))}}function Rg(n){return n!=null?qb(Bb(n)):null}function Cb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zb(n){return n._rawValidators}function Hb(n){return n._rawAsyncValidators}function bg(n){return n?Array.isArray(n)?n:[n]:[]}function Nu(n,e){return Array.isArray(n)?n.includes(e):n===e}function xb(n,e){let t=bg(e);return bg(n).forEach(i=>{Nu(t,i)||t.push(i)}),t}function Ab(n,e){return bg(e).filter(t=>!Nu(n,t))}var Ou=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Rg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ar=class extends Ou{name;get formDirective(){return null}get path(){return null}},Ri=class extends Ou{_parent=null;name=null;valueAccessor=null},Vu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},q2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},CF=pe(j({},q2),{"[class.ng-submitted]":"isSubmitted"}),Qt=(()=>{class n extends Vu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(Ri,2))};static \u0275dir=$e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&go("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qt]})}return n})(),Yt=(()=>{class n extends Vu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(ar,10))};static \u0275dir=$e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&go("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[qt]})}return n})();var Da="VALID",Pu="INVALID",Os="PENDING",Pa="DISABLED",Hr=class{},Lu=class extends Hr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Na=class extends Hr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Oa=class extends Hr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Vs=class extends Hr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Fu=class extends Hr{source;constructor(e){super(),this.source=e}},Uu=class extends Hr{source;constructor(e){super(),this.source=e}};function Dg(n){return(zu(n)?n.validators:n)||null}function z2(n){return Array.isArray(n)?kg(n):n||null}function Pg(n,e){return(zu(e)?e.asyncValidators:n)||null}function H2(n){return Array.isArray(n)?Rg(n):n||null}function zu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Gb(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Pe(1e3,"");if(!r[t])throw new Pe(1001,"")}function Wb(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Pe(1002,"")})}var Ls=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return sn(this.statusReactive)}set status(e){sn(()=>this.statusReactive.set(e))}_status=ji(()=>this.statusReactive());statusReactive=qn(void 0);get valid(){return this.status===Da}get invalid(){return this.status===Pu}get pending(){return this.status==Os}get disabled(){return this.status===Pa}get enabled(){return this.status!==Pa}errors;get pristine(){return sn(this.pristineReactive)}set pristine(e){sn(()=>this.pristineReactive.set(e))}_pristine=ji(()=>this.pristineReactive());pristineReactive=qn(!0);get dirty(){return!this.pristine}get touched(){return sn(this.touchedReactive)}set touched(e){sn(()=>this.touchedReactive.set(e))}_touched=ji(()=>this.touchedReactive());touchedReactive=qn(!1);get untouched(){return!this.touched}_events=new Zt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ab(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ab(e,this._rawAsyncValidators))}hasValidator(e){return Nu(this._rawValidators,e)}hasAsyncValidator(e){return Nu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Oa(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Oa(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Na(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Na(!0,r))}markAsPending(e={}){this.status=Os;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pa,this.errors=null,this._forEachChild(i=>{i.disable(pe(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,r)),this._events.next(new Vs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Da,this._forEachChild(r=>{r.enable(pe(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Da||this.status===Os)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,t)),this._events.next(new Vs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pa:Da}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Os,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Fb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Vs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?Pa:this.errors?Pu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Os)?Os:this._anyControlsHaveStatus(Pu)?Pu:Da}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Na(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Oa(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=z2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=H2(this._rawAsyncValidators)}},Fs=class extends Ls{constructor(e,t,r){super(Dg(t),Pg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Wb(this,!0,e),Object.keys(e).forEach(r=>{Gb(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Tg=class extends Fs{};var Ua=new we("",{providedIn:"root",factory:()=>Hu}),Hu="always";function Kb(n,e){return[...e.path,n]}function ju(n,e,t=Hu){Mg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),W2(n,e),Q2(n,e),K2(n,e),G2(n,e)}function kb(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$u(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Bu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Mg(n,e){let t=zb(n);e.validator!==null?n.setValidators(Cb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Hb(n);e.asyncValidator!==null?n.setAsyncValidators(Cb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Bu(e._rawValidators,i),Bu(e._rawAsyncValidators,i)}function $u(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=zb(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Hb(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Bu(e._rawValidators,r),Bu(e._rawAsyncValidators,r),t}function W2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Qb(n,e)})}function K2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Qb(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Qb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Yb(n,e){n==null,Mg(n,e)}function Y2(n,e){return $u(n,e)}function Jb(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J2(n){return Object.getPrototypeOf(n.constructor)===Cg}function Xb(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Zb(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===xt?t=s:J2(s)?r=s:i=s}),i||r||t||null}function X2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Z2={provide:ar,useExisting:Bn(()=>Di)},Ma=Promise.resolve(),Di=(()=>{class n extends ar{callSetDisabledState;get submitted(){return sn(this.submittedReactive)}_submitted=ji(()=>this.submittedReactive());submittedReactive=qn(!1);_directives=new Set;form;ngSubmit=new Ve;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Fs({},kg(t),Rg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ma.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ju(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ma.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ma.then(()=>{let r=this._findContainer(t.path),i=new Fs({});Yb(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ma.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ma.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Xb(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Fu(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Uu(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)($(Fa,10),$(qu,10),$(Ua,8))};static \u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[rn([Z2]),qt]})}return n})();function Rb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Db(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Va=class extends Ls{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Dg(t),Pg(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Db(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Db(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var eP=n=>n instanceof Va;var tP={provide:Ri,useExisting:Bn(()=>Pi)},Pb=Promise.resolve(),Pi=(()=>{class n extends Ri{_changeDetectorRef;callSetDisabledState;control=new Va;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Zb(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Jb(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ju(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Pb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ei(r);Pb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Kb(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)($(ar,9),$(Fa,10),$(qu,10),$(La,10),$(Bi,8),$(Ua,8))};static \u0275dir=$e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[rn([tP]),qt,$t]})}return n})();var Jt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var e1=new we("");var nP={provide:ar,useExisting:Bn(()=>Mi)},Mi=(()=>{class n extends ar{callSetDisabledState;get submitted(){return sn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ji(()=>this._submittedReactive());_submittedReactive=qn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ve;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($u(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ju(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){kb(t.control||null,t,!1),X2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Xb(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Fu(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Uu(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(kb(r||null,t),eP(i)&&(ju(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Yb(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Y2(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mg(this.form,this),this._oldForm&&$u(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)($(Fa,10),$(qu,10),$(Ua,8))};static \u0275dir=$e({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[rn([nP]),qt,$t]})}return n})();var rP={provide:Ri,useExisting:Bn(()=>Ni)},Ni=(()=>{class n extends Ri{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Zb(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Jb(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Kb(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)($(ar,13),$(Fa,10),$(qu,10),$(La,10),$(e1,8))};static \u0275dir=$e({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[rn([rP]),qt,$t]})}return n})();var iP={provide:La,useExisting:Bn(()=>Gu),multi:!0};function t1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sP(n){return n.split(":")[0]}var Gu=(()=>{class n extends Cg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=t1(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=sP(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&F("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rn([iP]),qt]})}return n})(),n1=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(t1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)($(yn),$(vr),$(Gu,9))};static \u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),oP={provide:La,useExisting:Bn(()=>r1),multi:!0};function Mb(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function aP(n){return n.split(":")[0]}var r1=(()=>{class n extends Cg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let c=0;c<o.length;c++){let l=o[c],d=this._getOptionValue(l.value);i.push(d)}}else{let o=r.options;for(let c=0;c<o.length;c++){let l=o[c];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=aP(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&F("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rn([oP]),qt]})}return n})(),i1=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Mb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Mb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)($(yn),$(vr),$(r1,9))};static \u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var cP=(()=>{class n{_validator=Mu;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Mu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,features:[$t]})}return n})();var lP={provide:Fa,useExisting:Bn(()=>ja),multi:!0};var ja=(()=>{class n extends cP{required;inputName="required";normalizeInput=ei;createValidator=t=>Vb;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=gr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&fc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[rn([lP]),qt]})}return n})();var s1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=pr({})}return n})(),Sg=class extends Ls{constructor(e,t,r){super(Dg(t),Pg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Wb(this,!1,e),e.forEach((r,i)=>{Gb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Nb(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Us=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return Nb(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Fs(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Tg(i,r)}control(t,r,i){let s={};return this.useNonNullable?(Nb(r)?s=r:(s.validators=r,s.asyncValidators=i),new Va(t,pe(j({},s),{nonNullable:!0}))):new Va(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new Sg(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Va)return t;if(t instanceof Ls)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var js=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ua,useValue:t.callSetDisabledState??Hu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=pr({imports:[s1]})}return n})(),Bs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:e1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ua,useValue:t.callSetDisabledState??Hu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=pr({imports:[s1]})}return n})();function uP(n,e){if(n&1&&(f(0,"span",26),y(1),p()),n&2){let t=O(3);x(),_r(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function dP(n,e){if(n&1){let t=ue();f(0,"form",9),F("ngSubmit",function(){q(t);let i=O(2);return z(i.saveEditList())}),f(1,"div")(2,"label",10),y(3," Title * "),p(),f(4,"input",11),Gn("ngModelChange",function(i){q(t);let s=O(2);return Hn(s.editListTitle,i)||(s.editListTitle=i),z(i)}),p()(),f(5,"div")(6,"label",12),y(7," Description (optional) "),p(),f(8,"textarea",13),Gn("ngModelChange",function(i){q(t);let s=O(2);return Hn(s.editListDescription,i)||(s.editListDescription=i),z(i)}),p()(),f(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),y(13,"Sharing"),p(),f(14,"p",17),y(15," Share this list with others "),W(16,uP,2,2,"span",18),p()(),f(17,"button",19),F("click",function(){q(t);let i=O(2);return z(i.switchToShare())}),K(),f(18,"svg",20),V(19,"path",21),p(),Z(),f(20,"span"),y(21,"Share"),p()()()(),f(22,"div",22)(23,"button",23),F("click",function(){q(t);let i=O(2);return z(i.onClose())}),y(24,"Cancel"),p(),f(25,"button",24),K(),f(26,"svg",20),V(27,"path",25),p(),Z(),f(28,"span"),y(29,"Save Changes"),p()()()()}if(n&2){let t=O(2);x(4),zn("ngModel",t.editListTitle),x(4),zn("ngModel",t.editListDescription),x(8),M("ngIf",t.getSharedCount(t.list)>0),x(9),M("disabled",!t.editListTitle.trim())}}function hP(n,e){if(n&1){let t=ue();f(0,"form",9),F("ngSubmit",function(){q(t);let i=O(2);return z(i.confirmShare())}),f(1,"div")(2,"label",27),y(3," Email Address "),p(),f(4,"input",28),Gn("ngModelChange",function(i){q(t);let s=O(2);return Hn(s.shareEmail,i)||(s.shareEmail=i),z(i)}),p()(),f(5,"div",22)(6,"button",23),F("click",function(){q(t);let i=O(2);return z(i.switchToEdit())}),y(7,"Back"),p(),f(8,"button",24),K(),f(9,"svg",20),V(10,"path",21),p(),Z(),f(11,"span"),y(12,"Share"),p()()()()}if(n&2){let t=O(2);x(4),zn("ngModel",t.shareEmail),x(4),M("disabled",!t.shareEmail.trim())}}function fP(n,e){if(n&1){let t=ue();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),y(4),p(),f(5,"button",5),F("click",function(){q(t);let i=O();return z(i.onClose())}),K(),f(6,"svg",6),V(7,"path",7),p()()(),W(8,dP,30,4,"form",8)(9,hP,13,2,"form",8),p()()}if(n&2){let t=O();x(4),se(t.mode==="edit"?"Edit List":"Share List"),x(4),M("ngIf",t.mode==="edit"),x(),M("ngIf",t.mode==="share")}}var qs=class n{open=!1;list=null;mode="edit";save=new Ve;share=new Ve;close=new Ve;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[$t],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&W(0,fP,10,3,"div",0),t&2&&M("ngIf",r.open)},dependencies:[Ce,qe,js,Jt,xt,Qt,Yt,ja,Pi,Di],encapsulation:2})};var Gr=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=Mn(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(De(e=>{if(!e)return J([]);let t=vn(this.listsCollection,On("owner","==",e.uid),Eg("updatedAt","desc")),r=vn(this.listsCollection,On("sharedWith","array-contains",e.email),Eg("updatedAt","desc"));return Ae(Promise.all([Ns(t),Ns(r)])).pipe(ce(([i,s])=>{let o=i.docs.map(m=>pe(j({},m.data()),{id:m.id})),c=s.docs.map(m=>pe(j({},m.data()),{id:m.id}));return[...o,...c].filter((m,v,_)=>v===_.findIndex(R=>R.id===m.id)).sort((m,v)=>new Date(v.updatedAt).getTime()-new Date(m.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(Ze(1),De(r=>{if(!r)return J(Promise.reject("User not logged in"));let i=new Date,s={title:e,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),Ae(ki(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=Et(this.firestore,`todoLists/${e.id}`),s=e,{id:r}=s,i=sc(s,["id"]);return i.updatedAt=new Date,Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),console.log("Updating list with data:",i),Nn(t,i)}deleteList(e){let t=Et(this.firestore,`todoLists/${e}`);return xu(t)}shareList(e,t){return E(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let r=Et(this.firestore,`todoLists/${e}`);try{let i=yield Au(r);if(!i.exists())throw new Error("List not found");let s=i.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let o=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",o);let c={sharedWith:o,updatedAt:new Date};console.log("TodoListService: Updating list with data:",c),yield Nn(r,c),console.log("TodoListService: List shared successfully")}catch(i){throw console.error("TodoListService: Error sharing list:",i),i}})}unshareList(e,t){return E(this,null,function*(){let r=Et(this.firestore,`todoLists/${e}`),i=yield Au(r);if(!i.exists())throw new Error("List not found");let o=(i.data().sharedWith||[]).filter(c=>c!==t);yield Nn(r,{sharedWith:o,updatedAt:new Date})})}hasAccess(e){return E(this,null,function*(){return fo(this.authService.user$.pipe(Ze(1),De(t=>t?Ae(Au(Et(this.firestore,`todoLists/${e}`))).pipe(ce(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):J(!1))))})}static \u0275fac=function(t){return new(t||n)(ne(gn),ne(Fe))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wu=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=Mn(this.firestore,"todos")}firestore=Y(gn);todosCollection;getTodosForList(e){return this.authService.user$.pipe(De(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),J([]);console.log("TodoService: Creating query for todos in list:",e);let r=vn(this.todosCollection,On("listId","==",e));return console.log("TodoService: Executing todos query"),Ms(r,{idField:"id"}).pipe(ce(i=>i),en(i=>(console.error("TodoService: Error loading todos:",i),J([]))))}))}addTodo(e,t){return this.authService.user$.pipe(Ze(1),De(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),Ae(Ns(vn(this.todosCollection,On("listId","==",e)))).pipe(De(i=>{let s=i.size,o=new Date,c={title:t,completed:!1,listId:e,position:s,createdBy:r.uid,createdAt:o,updatedAt:o};return console.log("Creating todo with data:",c),Ae(ki(this.todosCollection,c))}))):(console.error("User not logged in"),J(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=Et(this.firestore,`todos/${e.id}`),s=e,{id:r}=s,i=sc(s,["id"]);return i.updatedAt=new Date,Nn(t,i)}deleteTodo(e){let t=Et(this.firestore,`todos/${e}`);return xu(t)}updateTodoPosition(e){let t=Ig(this.firestore);return e.forEach((r,i)=>{if(r.id){let s=Et(this.firestore,`todos/${r.id}`);t.update(s,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return Ae(Ns(vn(this.todosCollection,On("listId","==",e)))).pipe(De(t=>{let r=Ig(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),Ae(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(ne(Fe),ne(Gr))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function mP(n,e){n&1&&(f(0,"div",20)(1,"div",21),V(2,"div",22),f(3,"span",9),y(4,"Loading todo list..."),p()()())}function gP(n,e){if(n&1&&(f(0,"div",23)(1,"div",24),K(),f(2,"svg",25),V(3,"path",26),p(),Z(),f(4,"div")(5,"h3",27),y(6,"Error"),p(),f(7,"p",28),y(8),p()()()()),n&2){let t=O();x(8),se(t.error)}}function vP(n,e){n&1&&(K(),f(0,"svg",48),V(1,"path",49),p())}function yP(n,e){n&1&&(K(),f(0,"svg",50),V(1,"path",51),p())}function _P(n,e){n&1&&(f(0,"div",52),K(),f(1,"svg",53),V(2,"path",54),p(),Z(),f(3,"h3",55),y(4,"No todos yet"),p(),f(5,"p",56),y(6,"Add your first todo item above to get started."),p()())}function wP(n,e){if(n&1){let t=ue();f(0,"div",59)(1,"input",60),F("change",function(){let i=q(t).$implicit,s=O(3);return z(s.toggleTodo(i))}),p(),f(2,"div",3)(3,"input",61),F("blur",function(i){let s=q(t).$implicit,o=O(3);return z(o.updateTodoText(s,i))}),p()(),f(4,"button",62),F("click",function(){let i=q(t).$implicit,s=O(3);return z(s.deleteTodo(i))}),K(),f(5,"svg",12),V(6,"path",63),p()()()}if(n&2){let t=e.$implicit;x(),M("checked",t.completed),x(2),go("line-through",t.completed)("text-gray-500",t.completed),M("value",t.title)}}function EP(n,e){if(n&1&&(f(0,"div",57),W(1,wP,7,6,"div",58),p()),n&2){let t=O(2);x(),M("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function IP(n,e){if(n&1){let t=ue();f(0,"div",29)(1,"div",30)(2,"form",31),F("ngSubmit",function(){q(t);let i=O();return z(i.addTodo())}),f(3,"input",32),Gn("ngModelChange",function(i){q(t);let s=O();return Hn(s.newTodoText,i)||(s.newTodoText=i),z(i)}),p(),f(4,"button",33),W(5,vP,2,0,"svg",34)(6,yP,2,0,"svg",35),f(7,"span"),y(8),p()()()(),f(9,"div",30)(10,"div",36)(11,"h2",37),y(12,"Todo Items"),p(),f(13,"div",38)(14,"span"),y(15),p(),f(16,"div",39),V(17,"div",40),p()()(),W(18,_P,7,0,"div",41)(19,EP,2,2,"div",42),p(),f(20,"div",30)(21,"h3",43),y(22,"List Information"),p(),f(23,"div",44)(24,"div",45)(25,"span",46),y(26,"Created:"),p(),f(27,"span",47),y(28),me(29,"date"),p()(),f(30,"div",45)(31,"span",46),y(32,"Last Updated:"),p(),f(33,"span",47),y(34),me(35,"date"),p()(),f(36,"div",45)(37,"span",46),y(38,"Owner:"),p(),f(39,"span",47),y(40),p()(),f(41,"div",45)(42,"span",46),y(43,"Shared With:"),p(),f(44,"span",47),y(45),p()()()()()}if(n&2){let t=O();x(3),zn("ngModel",t.newTodoText),M("disabled",t.isAdding),x(),M("disabled",!t.newTodoText.trim()||t.isAdding),x(),M("ngIf",!t.isAdding),x(),M("ngIf",t.isAdding),x(2),se(t.isAdding?"Adding...":"Add"),x(7),_r("",t.completedCount," of ",t.todos.length||0," completed"),x(2),hv("width",t.completionPercentage,"%"),x(),M("ngIf",!t.todos.length),x(),M("ngIf",t.todos.length>0),x(9),se(Wn(29,16,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),x(6),se(Wn(35,19,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),x(6),se(t.ownerName||"Loading..."),x(5),Me("",t.todoList.sharedWith.length||0," users")}}var Ku=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.todoListService=r;this.todoService=i;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(Ze(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:r=>{if(console.log("All lists loaded:",r),this.todoList=r.find(i=>i.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(i=>{if(console.log("User has access to list:",i),!i){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let o="Failed to load todos. ";s.code==="permission-denied"?o+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?o+="Please log in to view todos.":o+="Please try again later.",this.error=o,this.isLoading=!1}})}).catch(i=>{console.error("Error checking access:",i),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:r=>{console.error("Error loading todo list:",r),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(pe(j({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let r=t.target.value.trim();!e.id||!r||r===e.title||this.todoService.updateTodo(pe(j({},e),{title:r})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let r=pe(j({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.todoList=r,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(Ze(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)($(Ct),$(Oe),$(Gr),$(Wu),$(Fe))};static \u0275cmp=be({type:n,selectors:[["app-todo"]],decls:27,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","sm:space-x-4","mb-1","sm:mb-2"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","mt-3","sm:mt-0"],[1,"btn-secondary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-1.5","sm:space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),F("click",function(){return r.goBack()}),K(),f(6,"svg",6),V(7,"path",7),p()(),Z(),f(8,"h1",8),y(9),p()(),f(10,"p",9),y(11),p()(),f(12,"div",10)(13,"button",11),F("click",function(){return r.editList()}),K(),f(14,"svg",12),V(15,"path",13),p(),Z(),f(16,"span"),y(17,"Edit List"),p()(),f(18,"button",14),F("click",function(){return r.shareList()}),K(),f(19,"svg",12),V(20,"path",15),p(),Z(),f(21,"span"),y(22,"Share"),p()()()(),W(23,mP,5,0,"div",16)(24,gP,9,1,"div",17)(25,IP,46,22,"div",18),f(26,"app-list-edit-share-modal",19),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),p()()()),t&2&&(x(9),se((r.todoList==null?null:r.todoList.title)||"Loading..."),x(2),se((r.todoList==null?null:r.todoList.description)||"No description"),x(12),M("ngIf",r.isLoading),x(),M("ngIf",r.error),x(),M("ngIf",r.todoList&&!r.isLoading),x(),M("open",r.showEditShareModal)("list",r.todoList)("mode",r.modalMode))},dependencies:[Ce,_n,qe,Er,js,Jt,xt,Qt,Yt,Pi,Di,qs],encapsulation:2})};var Qu=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)($(Fe),$(Oe))};static \u0275cmp=be({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h2"),y(2,"Sign in to Todo List"),p(),f(3,"p"),y(4,"Please sign in to access your personal todo list"),p(),f(5,"button",1),F("click",function(){return r.login()}),V(6,"img",2),y(7," Sign in with Google "),p()())},dependencies:[Ce],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function bP(n,e){n&1&&(f(0,"div",12)(1,"div",13),V(2,"div",14),f(3,"span",15),y(4,"Loading your lists..."),p()()())}function TP(n,e){if(n&1){let t=ue();f(0,"div",12)(1,"div",16),K(),f(2,"svg",17),V(3,"path",18),p(),Z(),f(4,"h3",19),y(5,"No lists yet"),p(),f(6,"p",4),y(7,"Get started by creating your first todo list."),p(),f(8,"button",20),F("click",function(){q(t);let i=O();return z(i.openCreateModal())}),K(),f(9,"svg",6),V(10,"path",7),p(),Z(),f(11,"span"),y(12,"Create First List"),p()()()()}}function SP(n,e){if(n&1&&(f(0,"span",44),K(),f(1,"svg",39),V(2,"path",31),p(),y(3),p()),n&2){let t=O().$implicit;x(3),Me(" ",t.sharedWith.length," shared ")}}function CP(n,e){if(n&1){let t=ue();f(0,"div",23),F("click",function(){let i=q(t).$implicit,s=O(2);return z(s.openList(i))}),f(1,"div",24)(2,"div",25)(3,"h3",26),y(4),p(),f(5,"p",27),y(6),p()(),f(7,"div",28)(8,"button",29),F("click",function(i){let s=q(t).$implicit;return O(2).openShareModal(s),z(i.stopPropagation())}),K(),f(9,"svg",30),V(10,"path",31),p()(),Z(),f(11,"button",32),F("click",function(){let i=q(t).$implicit,s=O(2);return z(s.openEditModal(i))}),K(),f(12,"svg",30),V(13,"path",33),p()(),Z(),f(14,"button",34),F("click",function(i){let s=q(t).$implicit,o=O(2);return z(o.deleteList(s,i))}),K(),f(15,"svg",30),V(16,"path",35),p()()()(),Z(),f(17,"div",36)(18,"div",37)(19,"span",38),K(),f(20,"svg",39),V(21,"path",18),p(),y(22," View items "),p(),Z(),f(23,"span",38),K(),f(24,"svg",39),V(25,"path",40),p(),y(26),me(27,"date"),p(),W(28,SP,4,1,"span",41),p(),f(29,"svg",42),V(30,"path",43),p()()()}if(n&2){let t=e.$implicit,r=O(2);x(4),Me(" ",t.title," "),x(2),Me(" ",t.description||"No description"," "),x(20),Me(" ",Wn(27,4,r.getDateFromTimestamp(t.updatedAt),"short")," "),x(2),M("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function xP(n,e){if(n&1&&(f(0,"div",21),W(1,CP,31,7,"div",22),p()),n&2){let t=O();x(),M("ngForOf",t.todoLists)}}function AP(n,e){if(n&1){let t=ue();f(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),y(4,"Create New List"),p(),f(5,"button",49),F("click",function(){q(t);let i=O();return z(i.closeCreateModal())}),K(),f(6,"svg",50),V(7,"path",51),p()()(),Z(),f(8,"form",52),F("ngSubmit",function(){q(t);let i=O();return z(i.createNewList())}),f(9,"div")(10,"label",53),y(11," Title * "),p(),f(12,"input",54),Gn("ngModelChange",function(i){q(t);let s=O();return Hn(s.newListTitle,i)||(s.newListTitle=i),z(i)}),p()(),f(13,"div")(14,"label",55),y(15," Description (optional) "),p(),f(16,"textarea",56),Gn("ngModelChange",function(i){q(t);let s=O();return Hn(s.newListDescription,i)||(s.newListDescription=i),z(i)}),p()(),f(17,"div",57)(18,"button",58),F("click",function(){q(t);let i=O();return z(i.closeCreateModal())}),y(19," Cancel "),p(),f(20,"button",59),K(),f(21,"svg",6),V(22,"path",7),p(),Z(),f(23,"span"),y(24,"Create List"),p()()()()()()}if(n&2){let t=O();x(12),zn("ngModel",t.newListTitle),x(4),zn("ngModel",t.newListDescription),x(4),M("disabled",!t.newListTitle.trim())}}var Yu=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(Ze(1)).subscribe(r=>{if(console.log("Current user:",r),!r){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:r=>{console.log("List created successfully:",r),this.todoLists.unshift(r),this.closeCreateModal()},error:r=>{console.error("Error creating list:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details});let i="Failed to create list. ";r.code==="permission-denied"?i+="You may not have permission to create lists. Please try logging out and back in.":r.code==="unauthenticated"?i+="Please log in to create lists.":i+="Please try again later.",alert(i)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let r=pe(j({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(r=>r.id!==e.id)}).catch(r=>{console.error("Error deleting list:",r)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)($(Gr),$(Fe),$(Oe))};static \u0275cmp=be({type:n,selectors:[["app-lists"]],decls:18,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),y(5,"Todo Lists"),p(),f(6,"p",4),y(7,"Create and manage your todo lists"),p()(),f(8,"button",5),F("click",function(){return r.openCreateModal()}),K(),f(9,"svg",6),V(10,"path",7),p(),Z(),f(11,"span"),y(12,"New List"),p()()(),W(13,bP,5,0,"div",8)(14,TP,13,0,"div",8)(15,xP,2,1,"div",9),p(),W(16,AP,25,3,"div",10),f(17,"app-list-edit-share-modal",11),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),p()()),t&2&&(x(13),M("ngIf",r.isLoading),x(),M("ngIf",!r.isLoading&&r.todoLists.length===0),x(),M("ngIf",!r.isLoading&&r.todoLists.length>0),x(),M("ngIf",r.showCreateModal),x(),M("open",r.showEditShareModal)("list",r.modalList)("mode",r.modalMode))},dependencies:[Ce,_n,qe,Er,js,Jt,xt,Qt,Yt,ja,Pi,Di,Bo,qs],encapsulation:2})};function kP(n,e){if(n&1&&(tn(0),f(1,"div",14)(2,"div")(3,"label",15),y(4,"Display Name"),p(),f(5,"div",16),y(6),p()(),f(7,"div")(8,"label",15),y(9,"Email"),p(),f(10,"div",16),y(11),p()(),f(12,"div")(13,"label",15),y(14,"User ID"),p(),f(15,"div",17),y(16),p()(),f(17,"div")(18,"label",15),y(19,"Account Created"),p(),f(20,"div",16),y(21),me(22,"date"),p()()(),nn()),n&2){let t=e.ngIf;x(6),Me(" ",(t==null?null:t.displayName)||"Not provided"," "),x(5),Me(" ",(t==null?null:t.email)||"Not provided"," "),x(5),Me(" ",(t==null?null:t.uid)||"Not available"," "),x(5),Me(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Wn(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}var Ju=class n{authService=Y(Fe);router=Y(Oe);user$=this.authService.user$;logout(){this.authService.signOut(),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6","sm:mb-8"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-secondary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4,"Profile"),p(),f(5,"p",4),y(6,"Manage your account information"),p()(),f(7,"div",5)(8,"div",6)(9,"div",2)(10,"h2",7),y(11,"Account Information"),p(),W(12,kP,23,7,"ng-container",8),me(13,"async"),p(),f(14,"div",9)(15,"h3",10),y(16,"Account Actions"),p(),f(17,"div",11)(18,"button",12),F("click",function(){return r.logout()}),y(19," Sign Out "),p(),f(20,"button",13),F("click",function(){return r.goBack()}),y(21," Back to Home "),p()()()()()()()),t&2&&(x(12),M("ngIf",Ee(13,1,r.user$)))},dependencies:[Ce,qe,St,Er],encapsulation:2})};var Wr=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Ze(1),ce(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(ne(Fe),ne(Oe))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xu=class n{constructor(e){this.fb=e;this.shareForm=this.fb.group({email:["",[It.required,It.email]]})}family=null;close=new Ve;share=new Ve;shareForm;onShare(){this.shareForm.valid&&(this.share.emit(this.shareForm.value.email),this.shareForm.reset())}static \u0275fac=function(t){return new(t||n)($(Us))};static \u0275cmp=be({type:n,selectors:[["app-family-share-modal"]],inputs:{family:"family"},outputs:{close:"close",share:"share"},decls:14,vars:3,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","you@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h2",2),y(3),p(),f(4,"form",3),F("ngSubmit",function(){return r.onShare()}),f(5,"div",4)(6,"label",5),y(7,"Email address"),p(),V(8,"input",6),p(),f(9,"div",7)(10,"button",8),F("click",function(){return r.close.emit()}),y(11," Cancel "),p(),f(12,"button",9),y(13," Share "),p()()()()()),t&2&&(x(3),Me('Share "',r.family==null?null:r.family.name,'"'),x(),M("formGroup",r.shareForm),x(8),M("disabled",!r.shareForm.valid))},dependencies:[Ce,Bs,Jt,xt,Qt,Yt,Mi,Ni],encapsulation:2})};var Zu=class n{constructor(e){this.fb=e;this.createForm=this.fb.group({name:["",It.required],description:[""]})}close=new Ve;create=new Ve;createForm;onCreate(){this.createForm.valid&&this.create.emit(this.createForm.value)}static \u0275fac=function(t){return new(t||n)($(Us))};static \u0275cmp=be({type:n,selectors:[["app-create-family-modal"]],outputs:{close:"close",create:"create"},decls:18,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h2",2),y(3,"Create a New Family"),p(),f(4,"form",3),F("ngSubmit",function(){return r.onCreate()}),f(5,"div",4)(6,"label",5),y(7,"Family Name"),p(),V(8,"input",6),p(),f(9,"div",4)(10,"label",7),y(11,"Description"),p(),V(12,"textarea",8),p(),f(13,"div",9)(14,"button",10),F("click",function(){return r.close.emit()}),y(15," Cancel "),p(),f(16,"button",11),y(17," Create Family "),p()()()()()),t&2&&(x(4),M("formGroup",r.createForm),x(12),M("disabled",!r.createForm.valid))},dependencies:[Ce,Bs,Jt,xt,Qt,Yt,Mi,Ni],encapsulation:2})};var zs=class n{constructor(e,t){this.firestore=e;this.auth=t;this.familyCollection=Mn(this.firestore,"families"),this.memberCollection=Mn(this.firestore,"members"),this.familiesCollection=Mn(this.firestore,"families")}familyCollection;memberCollection;familiesCollection;addFamily(e){return E(this,null,function*(){let t=yield fo(this.auth.user$);if(!t)throw new Error("User not logged in");let r={name:e.name,description:e.description||"",owner:t.uid,sharedWith:[],createdAt:gg(),status:"approved"};yield ki(this.familyCollection,r)})}updateFamily(e,t){return E(this,null,function*(){let r=Et(this.firestore,"families",e);yield Nn(r,t)})}removeSharedUser(e,t){return E(this,null,function*(){let r=Et(this.firestore,"families",e);yield Nn(r,{sharedWith:pb(t)})})}getFamilies(){return this.auth.user$.pipe(De(e=>{if(!e||!e.email)return J([]);let t=vn(this.familyCollection,On("owner","==",e.uid)),r=vn(this.familyCollection,On("sharedWith","array-contains",e.email)),i=Ms(t,{idField:"id"}),s=Ms(r,{idField:"id"});return Ui([i,s]).pipe(ce(([o,c])=>[...o,...c].filter((m,v,_)=>v===_.findIndex(R=>R.id===m.id)).sort((m,v)=>m.name.localeCompare(v.name))))}))}shareFamily(e,t){return E(this,null,function*(){let r=Et(this.firestore,"families",e);yield Nn(r,{sharedWith:fb(t)})})}getFamilyById(e){let t=Et(this.firestore,"families",e);return Ib(t,{idField:"id"})}getFamilyMembers(e){let t=Mn(this.firestore,"families",e,"members"),r=vn(t);return Ms(r,{idField:"id"})}addFamilyMember(e,t){return E(this,null,function*(){let r=yield fo(this.auth.user$);if(!r)throw new Error("User not logged in");let i=Mn(this.firestore,"families",e,"members"),s=pe(j({},t),{familyId:e,status:"approved",createdBy:r.uid,createdAt:gg()});yield ki(i,s)})}static \u0275fac=function(t){return new(t||n)(ne(gn),ne(Fe))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var RP=n=>["/family-tree",n];function DP(n,e){if(n&1){let t=ue();f(0,"a",13)(1,"div")(2,"h3",14),y(3),p(),f(4,"p",15),y(5),p()(),f(6,"div")(7,"button",16),F("click",function(){let i=q(t).$implicit,s=O(3);return z(s.openShareModal(i))}),y(8,"Share "),p()()()}if(n&2){let t=e.$implicit;M("routerLink",fv(3,RP,t.id)),x(3),se(t.name),x(2),se(t.description)}}function PP(n,e){if(n&1&&(f(0,"div",11),W(1,DP,9,5,"a",12),p()),n&2){let t=O().ngIf;x(),M("ngForOf",t)}}function MP(n,e){n&1&&(f(0,"p",17),y(1,"You are not a part of any family yet. Create one to get started."),p())}function NP(n,e){if(n&1&&(f(0,"div"),W(1,PP,2,1,"div",10)(2,MP,2,0,"ng-template",null,1,gt),p()),n&2){let t=e.ngIf,r=mt(3);x(),M("ngIf",t.length>0)("ngIfElse",r)}}function OP(n,e){n&1&&(f(0,"p",17),y(1,"Loading families..."),p())}function VP(n,e){if(n&1){let t=ue();f(0,"app-create-family-modal",18),F("close",function(){q(t);let i=O();return z(i.closeCreateModal())})("create",function(i){q(t);let s=O();return z(s.handleCreateFamily(i))}),p()}}function LP(n,e){if(n&1){let t=ue();f(0,"app-family-share-modal",19),F("close",function(){q(t);let i=O();return z(i.closeShareModal())})("share",function(i){q(t);let s=O();return z(s.handleShare(i))}),p()}if(n&2){let t=O();M("family",t.selectedFamily)}}var ed=class n{constructor(e){this.familyTreeService=e;this.families$=this.familyTreeService.getFamilies()}families$;isShareModalOpen=!1;selectedFamily=null;isCreateModalOpen=!1;openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}handleCreateFamily(e){return E(this,null,function*(){yield this.familyTreeService.addFamily(e),this.closeCreateModal()})}openShareModal(e){this.selectedFamily=e,this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1,this.selectedFamily=null}handleShare(e){this.selectedFamily&&this.familyTreeService.shareFamily(this.selectedFamily.id,e),this.closeShareModal()}static \u0275fac=function(t){return new(t||n)($(zs))};static \u0275cmp=be({type:n,selectors:[["app-family-tree"]],decls:13,vars:6,consts:[["loading",""],["noFamilies",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[3,"close","create",4,"ngIf"],[3,"family","close","share",4,"ngIf"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],["class","bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow","p-4","flex","justify-between","items-center","hover:bg-gray-50","dark:hover:bg-gray-700","cursor-pointer",3,"routerLink"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-sm","text-primary-600","dark:text-primary-400","hover:underline",3,"click"],[1,"text-gray-600","dark:text-gray-400"],[3,"close","create"],[3,"close","share","family"]],template:function(t,r){if(t&1){let i=ue();f(0,"div",2)(1,"div",3)(2,"h1",4),y(3,"Family Trees"),p(),f(4,"button",5),F("click",function(){return q(i),z(r.openCreateModal())}),y(5," Create Family "),p()(),f(6,"div",6),W(7,NP,4,2,"div",7),me(8,"async"),W(9,OP,2,0,"ng-template",null,0,gt),p()(),W(11,VP,1,0,"app-create-family-modal",8)(12,LP,1,1,"app-family-share-modal",9)}if(t&2){let i=mt(10);x(7),M("ngIf",Ee(8,4,r.families$))("ngIfElse",i),x(4),M("ngIf",r.isCreateModalOpen),x(),M("ngIf",r.isShareModalOpen)}},dependencies:[Ce,_n,qe,St,Xu,Zu,zt],encapsulation:2})};function FP(n,e){if(n&1&&(f(0,"p",39),y(1),p()),n&2){let t=O(3).ngIf;x(),se(t.description)}}function UP(n,e){if(n&1&&(tn(0),f(1,"h1",37),y(2),p(),W(3,FP,2,1,"p",38),nn()),n&2){let t=O(2).ngIf;x(2),se(t.name),x(),M("ngIf",t.description)}}function jP(n,e){if(n&1){let t=ue();tn(0),f(1,"form",40),F("ngSubmit",function(){q(t);let i=O(3);return z(i.saveChanges())}),f(2,"div",41)(3,"label",42),y(4,"Family Name"),p(),V(5,"input",43),p(),f(6,"div")(7,"label",44),y(8,"Description"),p(),V(9,"textarea",45),p()(),nn()}if(n&2){let t=O(3);x(),M("formGroup",t.editForm)}}function BP(n,e){if(n&1){let t=ue();tn(0),f(1,"button",46),F("click",function(){q(t);let i=O(3);return z(i.startEditing())}),y(2," Edit "),p(),nn()}}function $P(n,e){if(n&1){let t=ue();tn(0),f(1,"div",47)(2,"button",48),y(3," Save "),p(),f(4,"button",49),F("click",function(){q(t);let i=O(3);return z(i.cancelEditing())}),y(5," Cancel "),p()(),nn()}if(n&2){let t=O(3);x(2),M("disabled",!t.editForm.valid||!t.editForm.dirty)}}function qP(n,e){if(n&1&&(f(0,"span",52),y(1),p()),n&2){let t=e.$implicit;x(),Me(" ",t," ")}}function zP(n,e){if(n&1&&(f(0,"div"),W(1,qP,2,1,"span",51),p()),n&2){let t=O(3).ngIf;x(),M("ngForOf",t.sharedWith)}}function HP(n,e){n&1&&(f(0,"p",53),y(1,"This family isn't shared with anyone."),p())}function GP(n,e){if(n&1&&(f(0,"div",50),W(1,zP,2,1,"div",10)(2,HP,2,0,"ng-template",null,3,gt),p()),n&2){let t=mt(3),r=O(2).ngIf;x(),M("ngIf",r.sharedWith&&r.sharedWith.length>0)("ngIfElse",t)}}function WP(n,e){if(n&1){let t=ue();f(0,"div",59)(1,"span",60),y(2),p(),f(3,"button",61),F("click",function(){let i=q(t).$implicit,s=O(5);return z(s.removeSharedUser(i))}),y(4," Remove "),p()()}if(n&2){let t=e.$implicit;x(2),se(t)}}function KP(n,e){if(n&1&&(f(0,"div"),W(1,WP,5,1,"div",58),p()),n&2){let t=O(3).ngIf;x(),M("ngForOf",t.sharedWith)}}function QP(n,e){if(n&1){let t=ue();f(0,"div",54),W(1,KP,2,1,"div",13),f(2,"form",55),F("ngSubmit",function(){q(t);let i=O(3);return z(i.addSharedUser())}),f(3,"div",12)(4,"label",56),y(5,"Add user by email"),p(),V(6,"input",57),p(),f(7,"button",36),y(8," Add "),p()()()}if(n&2){let t=O(2).ngIf,r=O();x(),M("ngIf",t.sharedWith&&t.sharedWith.length>0),x(),M("formGroup",r.addShareUserForm),x(5),M("disabled",!r.addShareUserForm.valid)}}function YP(n,e){if(n&1&&(f(0,"div",64)(1,"h4",65),y(2),p(),f(3,"p",66),y(4),me(5,"titlecase"),p(),f(6,"p",66),y(7),me(8,"date"),p()()),n&2){let t=e.$implicit;x(2),_r("",t.firstName," ",t.lastName),x(2),se(Ee(5,4,t.gender)),x(3),Me("Born: ",Wn(8,6,t.dateOfBirth.toDate(),"longDate"))}}function JP(n,e){if(n&1&&(f(0,"div")(1,"div",62),W(2,YP,9,9,"div",63),p()()),n&2){let t=O().ngIf;x(2),M("ngForOf",t)}}function XP(n,e){n&1&&(f(0,"p",67),y(1,"No members have been added to this family yet."),p())}function ZP(n,e){if(n&1&&(f(0,"div"),W(1,JP,3,1,"div",10)(2,XP,2,0,"ng-template",null,4,gt),p()),n&2){let t=e.ngIf,r=mt(3);x(),M("ngIf",t.length>0)("ngIfElse",r)}}function eM(n,e){n&1&&(f(0,"p",67),y(1,"Loading members..."),p())}function tM(n,e){if(n&1){let t=ue();f(0,"div")(1,"div",11)(2,"div",12),W(3,UP,4,2,"ng-container",13)(4,jP,10,1,"ng-container",13),p(),f(5,"div",14),W(6,BP,3,0,"ng-container",13),me(7,"async"),W(8,$P,6,1,"ng-container",13),p()(),f(9,"div",15)(10,"h2",16),y(11,"Shared With"),p(),W(12,GP,4,2,"div",17)(13,QP,9,3,"div",18),p(),f(14,"div",15)(15,"h2",16),y(16,"Family Members"),p(),f(17,"div",19)(18,"h3",20),y(19,"Add New Member"),p(),f(20,"form",21),F("ngSubmit",function(){q(t);let i=O(2);return z(i.addFamilyMember())}),f(21,"div",22)(22,"div",23)(23,"label",24),y(24,"First Name"),p(),V(25,"input",25),p(),f(26,"div",23)(27,"label",26),y(28,"Last Name"),p(),V(29,"input",27),p(),f(30,"div",23)(31,"label",28),y(32,"Gender"),p(),f(33,"select",29)(34,"option",30),y(35,"Male"),p(),f(36,"option",31),y(37,"Female"),p(),f(38,"option",32),y(39,"Other"),p()()(),f(40,"div",23)(41,"label",33),y(42,"Date of Birth"),p(),V(43,"input",34),p()(),f(44,"div",35)(45,"button",36),y(46," Add Member "),p()()()(),W(47,ZP,4,2,"div",10),me(48,"async"),W(49,eM,2,0,"ng-template",null,2,gt),p()()}if(n&2){let t,r=mt(50),i=O().ngIf,s=O();x(3),M("ngIf",!s.isEditing),x(),M("ngIf",s.isEditing),x(2),M("ngIf",!s.isEditing&&i.owner===((t=Ee(7,10,s.auth.user$))==null?null:t.uid)),x(2),M("ngIf",s.isEditing),x(4),M("ngIf",!s.isEditing),x(),M("ngIf",s.isEditing),x(7),M("formGroup",s.addMemberForm),x(25),M("disabled",!s.addMemberForm.valid),x(2),M("ngIf",Ee(48,12,s.members$))("ngIfElse",r)}}function nM(n,e){n&1&&(f(0,"p",68),y(1,"Family not found."),p())}function rM(n,e){if(n&1&&(f(0,"div"),W(1,tM,51,14,"div",10)(2,nM,2,0,"ng-template",null,1,gt),p()),n&2){let t=e.ngIf,r=mt(3);x(),M("ngIf",t)("ngIfElse",r)}}function iM(n,e){n&1&&(f(0,"p",68),y(1,"Loading family details..."),p())}var td=class n{constructor(e,t,r,i){this.route=e;this.familyTreeService=t;this.fb=r;this.auth=i;this.editForm=this.fb.group({name:["",It.required],description:[""]}),this.addShareUserForm=this.fb.group({email:["",[It.required,It.email]]}),this.addMemberForm=this.fb.group({firstName:["",It.required],lastName:["",It.required],gender:["male",It.required],dateOfBirth:["",It.required]})}family$;members$;familyId=null;isEditing=!1;editForm;addShareUserForm;addMemberForm;currentFamily;ngOnInit(){this.family$=this.route.paramMap.pipe(De(e=>{let t=e.get("familyId");return this.familyId=t,t?(this.members$=this.familyTreeService.getFamilyMembers(t),this.familyTreeService.getFamilyById(t)):J(void 0)}),Ye(e=>{this.currentFamily=e,e&&this.editForm.patchValue({name:e.name,description:e.description})}))}startEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.currentFamily&&this.editForm.patchValue({name:this.currentFamily.name,description:this.currentFamily.description})}saveChanges(){return E(this,null,function*(){this.editForm.valid&&this.familyId&&(yield this.familyTreeService.updateFamily(this.familyId,this.editForm.value),this.isEditing=!1)})}addFamilyMember(){return E(this,null,function*(){if(this.addMemberForm.valid&&this.familyId)try{let e=this.addMemberForm.value,t=new Date(e.dateOfBirth);e.dateOfBirth=Xe.fromDate(t),yield this.familyTreeService.addFamilyMember(this.familyId,e),this.addMemberForm.reset({gender:"male"})}catch(e){console.error("Error adding family member:",e)}})}addSharedUser(){return E(this,null,function*(){if(this.addShareUserForm.valid&&this.familyId){let{email:e}=this.addShareUserForm.value;yield this.familyTreeService.shareFamily(this.familyId,e),this.addShareUserForm.reset()}})}removeSharedUser(e){return E(this,null,function*(){this.familyId&&(yield this.familyTreeService.removeSharedUser(this.familyId,e))})}static \u0275fac=function(t){return new(t||n)($(Ct),$(zs),$(Us),$(Fe))};static \u0275cmp=be({type:n,selectors:[["app-family-detail"]],decls:10,vars:4,consts:[["loading",""],["notFound",""],["loadingMembers",""],["noSharedUsers",""],["noMembers",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],["routerLink","/family-tree",1,"inline-flex","items-center","text-sm","font-semibold","text-primary-600","hover:text-primary-800","dark:text-primary-400","dark:hover:text-primary-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","items-start","mb-8"],[1,"flex-grow"],[4,"ngIf"],[1,"ml-4","flex-shrink-0"],[1,"mt-8"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white","mb-4"],["class","space-y-2",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-800","p-4","rounded-lg","mb-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-3"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"form-field"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","firstName","formControlName","firstName",1,"form-input"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","lastName","formControlName","lastName",1,"form-input"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","gender","formControlName","gender",1,"form-input"],["value","male"],["value","female"],["value","other"],["for","dateOfBirth",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","dateOfBirth","formControlName","dateOfBirth",1,"form-input"],[1,"mt-4"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],["class","mt-2 text-lg text-gray-600 dark:text-gray-400",4,"ngIf"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-400"],["id","editFamilyForm",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"flex","space-x-2"],["type","submit","form","editFamilyForm",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],[1,"space-y-2"],["class","inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-200 mr-2 mb-2",4,"ngFor","ngForOf"],[1,"inline-block","bg-gray-200","dark:bg-gray-700","rounded-full","px-3","py-1","text-sm","font-semibold","text-gray-700","dark:text-gray-200","mr-2","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],[1,"flex","items-end","space-x-2",3,"ngSubmit","formGroup"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","user@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["class","flex items-center justify-between bg-gray-100 dark:bg-gray-700 p-2 rounded-md",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","bg-gray-100","dark:bg-gray-700","p-2","rounded-md"],[1,"text-sm","text-gray-900","dark:text-gray-200"],[1,"text-sm","text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","font-semibold",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white dark:bg-gray-800 rounded-lg shadow p-4",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow","p-4"],[1,"font-semibold","text-lg","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"mt-4","text-gray-500"],[1,"text-center","text-gray-500"]],template:function(t,r){if(t&1&&(f(0,"div",5)(1,"div",6)(2,"a",7),K(),f(3,"svg",8),V(4,"path",9),p(),y(5," Back to Family List "),p()(),W(6,rM,4,2,"div",10),me(7,"async"),W(8,iM,2,0,"ng-template",null,0,gt),p()),t&2){let i=mt(9);x(6),M("ngIf",Ee(7,2,r.family$))("ngIfElse",i)}},dependencies:[Ce,_n,qe,St,kv,Er,Bs,Jt,n1,i1,xt,Gu,Qt,Yt,Mi,Ni,zt],encapsulation:2})};var Ba={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"},premierLeague:{apiKey:"37bddc9782msh83111e8c0e4211ap1438fejsnd95d2f8667ef",apiHost:"premier-league-standings1.p.rapidapi.com"}};var Hs=class n{constructor(e){this.http=e}apiUrl="https://premier-league-standings1.p.rapidapi.com/";getStandings(){let e=new Ov().set("X-RapidAPI-Key",Ba.premierLeague.apiKey).set("X-RapidAPI-Host",Ba.premierLeague.apiHost);return this.http.get(this.apiUrl,{headers:e})}static \u0275fac=function(t){return new(t||n)(ne(qi))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var oM=(n,e,t,r,i,s)=>({"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":n,"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":e,"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":i,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s}),aM=(n,e,t)=>({"text-green-600 dark:text-green-400":n,"text-red-600 dark:text-red-400":e,"text-gray-600 dark:text-gray-400":t});function cM(n,e){if(n&1&&(f(0,"tr",30)(1,"td",31)(2,"span",32),y(3),p()(),f(4,"th",33)(5,"div",24),V(6,"img",34),f(7,"div")(8,"div",35),y(9),p(),f(10,"div",36),y(11),p()()()(),f(12,"td",37),y(13),p(),f(14,"td",38),y(15),p(),f(16,"td",39),y(17),p(),f(18,"td",40),y(19),p(),f(20,"td",37),y(21),p(),f(22,"td",37),y(23),p(),f(24,"td",41),y(25),p(),f(26,"td",42),y(27),p()()),n&2){let t=e.$implicit,r=e.index;x(2),M("ngClass",mv(16,oM,r===0,r===1,r===2,r>=17,r>=3&&r<=6,r>=7&&r<=16)),x(),Me(" ",t.stats.rank," "),x(3),M("src",t.team.logo,J0)("alt",t.team.name),x(3),se(t.team.name),x(2),se(t.team.abbreviation),x(2),se(t.stats.gamesPlayed),x(2),se(t.stats.wins),x(2),se(t.stats.ties),x(2),se(t.stats.losses),x(2),se(t.stats.goalsFor),x(2),se(t.stats.goalsAgainst),x(),M("ngClass",pv(23,aM,t.stats.goalDifference>0,t.stats.goalDifference<0,t.stats.goalDifference===0)),x(),_r(" ",t.stats.goalDifference>0?"+":"","",t.stats.goalDifference," "),x(2),se(t.stats.points)}}function lM(n,e){if(n&1&&(f(0,"div")(1,"div",14)(2,"table",15)(3,"thead",16)(4,"tr")(5,"th",17),y(6,"Pos"),p(),f(7,"th",18),y(8,"Club"),p(),f(9,"th",17),y(10,"P"),p(),f(11,"th",17),y(12,"W"),p(),f(13,"th",17),y(14,"D"),p(),f(15,"th",17),y(16,"L"),p(),f(17,"th",17),y(18,"GF"),p(),f(19,"th",17),y(20,"GA"),p(),f(21,"th",17),y(22,"GD"),p(),f(23,"th",19),y(24,"Pts"),p()()(),f(25,"tbody"),W(26,cM,28,27,"tr",20),p()()(),f(27,"div",21)(28,"h3",22),y(29,"Legend"),p(),f(30,"div",23)(31,"div",24),V(32,"span",25),f(33,"span",26),y(34,"Champions League"),p()(),f(35,"div",24),V(36,"span",27),f(37,"span",26),y(38,"Europa League"),p()(),f(39,"div",24),V(40,"span",28),f(41,"span",26),y(42,"Mid Table"),p()(),f(43,"div",24),V(44,"span",29),f(45,"span",26),y(46,"Relegation"),p()()()()()),n&2){let t=O().ngIf;x(26),M("ngForOf",t)}}function uM(n,e){n&1&&(f(0,"div",43)(1,"div",44),K(),f(2,"svg",45),V(3,"path",46),p()(),Z(),f(4,"h3",47),y(5,"No Data Available"),p(),f(6,"p",26),y(7,"Premier League standings are not currently available."),p()())}function dM(n,e){if(n&1&&(f(0,"div"),W(1,lM,47,1,"div",13)(2,uM,8,0,"ng-template",null,1,gt),p()),n&2){let t=e.ngIf,r=mt(3);x(),M("ngIf",t&&t.length>0)("ngIfElse",r)}}function hM(n,e){if(n&1){let t=ue();f(0,"div",43)(1,"div",49),K(),f(2,"svg",50),V(3,"path",51),p()(),Z(),f(4,"h3",47),y(5,"Error Loading Data"),p(),f(6,"p",52),y(7,"Unable to load Premier League standings. Please try again later."),p(),f(8,"button",53),F("click",function(){q(t);let i=O(2);return z(i.loadStandings())}),K(),f(9,"svg",54),V(10,"path",55),p(),y(11," Retry "),p()()}}function fM(n,e){n&1&&(f(0,"div",43),V(1,"div",56),f(2,"h3",47),y(3,"Loading Standings"),p(),f(4,"p",26),y(5,"Fetching the latest Premier League data..."),p()())}function pM(n,e){if(n&1&&W(0,hM,12,0,"div",48)(1,fM,6,0,"ng-template",null,2,gt),n&2){let t=mt(2),r=O();M("ngIf",r.error)("ngIfElse",t)}}var nd=class n{constructor(e){this.premierLeagueService=e}standings$;error;ngOnInit(){this.loadStandings()}loadStandings(){this.error=null,this.standings$=this.premierLeagueService.getStandings().pipe(en(e=>(this.error=e,console.error(e),J(null))))}static \u0275fac=function(t){return new(t||n)($(Hs))};static \u0275cmp=be({type:n,selectors:[["app-premier-league"]],features:[rn([Hs])],decls:16,vars:4,consts:[["loadingOrError",""],["noData",""],["loading",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"flex","items-center","justify-center","mb-4"],[1,"w-12","h-12","bg-red-100","dark:bg-red-900","rounded-lg","flex","items-center","justify-center","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[1,"card"],[4,"ngIf","ngIfElse"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-4","py-3","text-center"],["scope","col",1,"px-4","py-3"],["scope","col",1,"px-4","py-3","text-center","font-semibold"],["class","border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"mt-6","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white","mb-3"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","text-xs"],[1,"flex","items-center"],[1,"w-3","h-3","bg-yellow-100","border","border-yellow-300","rounded-full","mr-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"w-3","h-3","bg-blue-100","border","border-blue-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-green-100","border","border-green-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-red-100","border","border-red-300","rounded-full","mr-2"],[1,"border-b","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-150"],[1,"px-4","py-4","text-center","font-medium"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-semibold",3,"ngClass"],["scope","row",1,"px-4","py-4","font-medium","text-gray-900","dark:text-white"],[1,"w-8","h-8","mr-3","rounded-full","object-cover",3,"src","alt"],[1,"font-semibold"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"px-4","py-4","text-center"],[1,"px-4","py-4","text-center","text-green-600","dark:text-green-400","font-medium"],[1,"px-4","py-4","text-center","text-gray-600","dark:text-gray-400"],[1,"px-4","py-4","text-center","text-red-600","dark:text-red-400","font-medium"],[1,"px-4","py-4","text-center","font-medium",3,"ngClass"],[1,"px-4","py-4","text-center","font-bold","text-lg"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","dark:bg-gray-700","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-2"],["class","text-center py-12",4,"ngIf","ngIfElse"],[1,"w-16","h-16","bg-red-100","dark:bg-red-900","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-600","dark:text-gray-400","mb-4"],[1,"btn-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600","mx-auto","mb-4"]],template:function(t,r){if(t&1&&(f(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),K(),f(5,"svg",8),V(6,"path",9),p()(),Z(),f(7,"h1",10),y(8,"Premier League Standings"),p()(),f(9,"p",11),y(10," View the current Premier League standings and team statistics "),p()(),f(11,"div",12),W(12,dM,4,2,"div",13),me(13,"async"),W(14,pM,3,2,"ng-template",null,0,gt),p()()()),t&2){let i=mt(15);x(12),M("ngIf",Ee(13,2,r.standings$))("ngIfElse",i)}},dependencies:[Ce,Av,_n,qe,St,Lv],encapsulation:2})};var a1=[{path:"",component:ku},{path:"ip-lookup",component:Du},{path:"login",component:Qu},{path:"profile",component:Ju,canActivate:[Wr]},{path:"lists",component:Yu,canActivate:[Wr]},{path:"todo/:id",component:Ku,canActivate:[Wr]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-MBVCT2WK.js").then(n=>n.QuotesComponent)},{path:"family-tree",component:ed,canActivate:[Wr]},{path:"family-tree/:familyId",component:td,canActivate:[Wr]},{path:"premier-league",component:nd}];var c1={providers:[vv({eventCoalescing:!0}),Nh(a1),Vv(),S_(()=>C_(Ba.firebaseConfig)),Eb(()=>bb()),xw(()=>kw())]};var rd=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new ct(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){q0(this.checkInterval).pipe(De(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new kt(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(ne(qi))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function gM(n,e){if(n&1){let t=ue();f(0,"div",1)(1,"div",2)(2,"div",3),y(3,"\u{1F504}"),p(),f(4,"div",4)(5,"h4"),y(6,"New version available!"),p(),f(7,"p"),y(8,"A new version of the app is ready. Refresh to get the latest features."),p()(),f(9,"div",5)(10,"button",6),F("click",function(){q(t);let i=O();return z(i.update())}),y(11,"Update Now"),p(),f(12,"button",7),F("click",function(){q(t);let i=O();return z(i.dismiss())}),y(13,"Later"),p()()()()}}var id=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)($(rd))};static \u0275cmp=be({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(W(0,gM,14,0,"div",0),me(1,"async")),t&2&&M("ngIf",Ee(1,1,r.updateAvailable$))},dependencies:[Ce,qe,St],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var sd=class n{themeSubject=new ct("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");this.setTheme(r)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var l1=()=>({exact:!0});function yM(n,e){n&1&&(f(0,"a",25),K(),f(1,"svg",26),V(2,"path",27),p(),Z(),f(3,"span"),y(4,"Family Tree"),p()())}function _M(n,e){if(n&1){let t=ue();f(0,"a",34),F("click",function(){q(t);let i=O(3);return z(i.closeMoreMenu())}),y(1,"Profile"),p()}}function wM(n,e){if(n&1){let t=ue();f(0,"div",28)(1,"a",29),F("click",function(){q(t);let i=O(2);return z(i.closeMoreMenu())}),y(2,"Lists"),p(),f(3,"a",30),F("click",function(){q(t);let i=O(2);return z(i.closeMoreMenu())}),y(4,"IP Lookup"),p(),f(5,"a",31),F("click",function(){q(t);let i=O(2);return z(i.closeMoreMenu())}),y(6,"Quotes"),p(),W(7,_M,2,0,"a",32),me(8,"async"),f(9,"a",33),F("click",function(){q(t);let i=O(2);return z(i.closeMoreMenu())}),y(10,"Premier League"),p()()}if(n&2){let t=O(2);x(7),M("ngIf",Ee(8,1,t.user$))}}function EM(n,e){if(n&1){let t=ue();tn(0),f(1,"a",16),K(),f(2,"svg",17),V(3,"path",18),p(),Z(),f(4,"span"),y(5,"Home"),p()(),W(6,yM,5,0,"a",19),me(7,"async"),f(8,"div",20)(9,"button",21),F("click",function(i){q(t);let s=O();return z(s.toggleMoreMenu(i))}),f(10,"span"),y(11,"More"),p(),K(),f(12,"svg",22),V(13,"path",23),p()(),W(14,wM,11,3,"div",24),p(),nn()}if(n&2){let t=O();x(),M("routerLinkActiveOptions",Qd(5,l1)),x(5),M("ngIf",Ee(7,3,t.user$)),x(8),M("ngIf",t.moreMenuOpen)}}function IM(n,e){n&1&&(K(),f(0,"svg",35),V(1,"path",36),p())}function bM(n,e){n&1&&(K(),f(0,"svg",35),V(1,"path",37),p())}function TM(n,e){if(n&1){let t=ue();f(0,"button",38),F("click",function(){q(t);let i=O();return z(i.login())}),K(),f(1,"svg",17),V(2,"path",39),p(),Z(),f(3,"span"),y(4,"Login"),p()()}}function SM(n,e){if(n&1){let t=ue();f(0,"button",40),F("click",function(){q(t);let i=O();return z(i.logout())}),K(),f(1,"svg",17),V(2,"path",41),p(),Z(),f(3,"span"),y(4,"Sign Out"),p()()}}function CM(n,e){n&1&&(K(),f(0,"svg",42),V(1,"path",43),p())}function xM(n,e){n&1&&(K(),f(0,"svg",42),V(1,"path",44),p())}function AM(n,e){if(n&1){let t=ue();f(0,"a",60),F("click",function(){q(t);let i=O(2);return z(i.closeMobileMenu())}),K(),f(1,"svg",26),V(2,"path",27),p(),Z(),f(3,"span"),y(4,"Family Tree"),p()()}}function kM(n,e){if(n&1){let t=ue();f(0,"a",61),F("click",function(){q(t);let i=O(2);return z(i.closeMobileMenu())}),K(),f(1,"svg",17),V(2,"path",62),p(),Z(),f(3,"span"),y(4,"Profile"),p()()}}function RM(n,e){n&1&&(K(),f(0,"svg",22),V(1,"path",36),p())}function DM(n,e){n&1&&(K(),f(0,"svg",22),V(1,"path",37),p())}function PM(n,e){if(n&1){let t=ue();f(0,"button",63),F("click",function(){q(t);let i=O(2);return i.login(),z(i.closeMobileMenu())}),K(),f(1,"svg",17),V(2,"path",39),p(),Z(),f(3,"span"),y(4,"Login"),p()()}}function MM(n,e){if(n&1){let t=ue();f(0,"button",64),F("click",function(){q(t);let i=O(2);return i.logout(),z(i.closeMobileMenu())}),K(),f(1,"svg",17),V(2,"path",41),p(),Z(),f(3,"span"),y(4,"Sign Out"),p()()}}function NM(n,e){if(n&1){let t=ue();f(0,"div",45)(1,"nav",46)(2,"a",47),F("click",function(){q(t);let i=O();return z(i.closeMobileMenu())}),K(),f(3,"svg",17),V(4,"path",18),p(),Z(),f(5,"span"),y(6,"Home"),p()(),f(7,"a",48),F("click",function(){q(t);let i=O();return z(i.closeMobileMenu())}),K(),f(8,"svg",17),V(9,"path",49),p(),Z(),f(10,"span"),y(11,"Lists"),p()(),f(12,"a",50),F("click",function(){q(t);let i=O();return z(i.closeMobileMenu())}),K(),f(13,"svg",17),V(14,"path",51),p(),Z(),f(15,"span"),y(16,"IP Lookup"),p()(),f(17,"a",52),F("click",function(){q(t);let i=O();return z(i.closeMobileMenu())}),K(),f(18,"svg",17),V(19,"path",53),p(),Z(),f(20,"span"),y(21,"Quotes"),p()(),W(22,AM,5,0,"a",54),me(23,"async"),W(24,kM,5,0,"a",55),me(25,"async"),f(26,"button",56),F("click",function(){q(t);let i=O();return z(i.toggleTheme())}),W(27,RM,2,0,"svg",57),me(28,"async"),W(29,DM,2,0,"svg",57),me(30,"async"),f(31,"span"),y(32),me(33,"async"),p()(),W(34,PM,5,0,"button",58),me(35,"async"),W(36,MM,5,0,"button",59),me(37,"async"),p()()}if(n&2){let t=O();x(2),M("routerLinkActiveOptions",Qd(22,l1)),x(20),M("ngIf",Ee(23,8,t.user$)),x(2),M("ngIf",Ee(25,10,t.user$)),x(3),M("ngIf",Ee(28,12,t.theme$)==="light"),x(2),M("ngIf",Ee(30,14,t.theme$)==="dark"),x(3),se(Ee(33,16,t.theme$)==="light"?"Dark Mode":"Light Mode"),x(2),M("ngIf",!Ee(35,18,t.user$)),x(2),M("ngIf",Ee(37,20,t.user$))}}var od=class n{constructor(e,t,r,i){this.authService=e;this.themeService=t;this.router=r;this.elementRef=i;this.user$=this.authService.user$,this.theme$=this.themeService.theme$,this.isDetailPage$=this.router.events.pipe(jt(s=>s instanceof yt),ce(s=>s.urlAfterRedirects!=="/"))}user$;theme$;isMobileMenuOpen=!1;isDetailPage$;moreMenuOpen=!1;onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.moreMenuOpen=!1)}login(){this.authService.signInWithGoogle()}logout(){this.authService.signOut()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleMoreMenu(e){e.stopPropagation(),this.moreMenuOpen=!this.moreMenuOpen}closeMoreMenu(){this.moreMenuOpen=!1}static \u0275fac=function(t){return new(t||n)($(Fe),$(sd),$(Oe),$(yn))};static \u0275cmp=be({type:n,selectors:[["app-root"]],hostBindings:function(t,r){t&1&&F("click",function(s){return r.onDocumentClick(s)},Z0)},decls:28,vars:21,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],[4,"ngIf"],[1,"flex","items-center","space-x-1.5","p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"text-xs","sm:text-sm","font-medium"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"relative"],[1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","dark:bg-gray-800","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["routerLink","/lists",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/ip-lookup",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/quotes",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile","class","block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",3,"click",4,"ngIf"],["routerLink","/premier-league",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,r){t&1&&(f(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),y(5," Manu's Playground "),p()(),f(6,"nav",5),W(7,EM,15,6,"ng-container",6),me(8,"async"),f(9,"button",7),F("click",function(){return r.toggleTheme()}),W(10,IM,2,0,"svg",8),me(11,"async"),W(12,bM,2,0,"svg",8),me(13,"async"),f(14,"span",9),y(15),me(16,"async"),p()(),W(17,TM,5,0,"button",10),me(18,"async"),W(19,SM,5,0,"button",11),me(20,"async"),p(),f(21,"button",12),F("click",function(){return r.toggleMobileMenu()}),W(22,CM,2,0,"svg",13)(23,xM,2,0,"svg",13),p()(),W(24,NM,38,23,"div",14),p()(),f(25,"main",15),V(26,"router-outlet"),p(),V(27,"app-update-notification")),t&2&&(x(7),M("ngIf",Ee(8,9,r.isDetailPage$)),x(3),M("ngIf",Ee(11,11,r.theme$)==="light"),x(2),M("ngIf",Ee(13,13,r.theme$)==="dark"),x(3),se(Ee(16,15,r.theme$)==="light"?"Dark":"Light"),x(2),M("ngIf",!Ee(18,17,r.user$)),x(2),M("ngIf",Ee(20,19,r.user$)),x(3),M("ngIf",!r.isMobileMenuOpen),x(),M("ngIf",r.isMobileMenuOpen),x(),M("ngIf",r.isMobileMenuOpen))},dependencies:[Ce,qe,St,Vo,zt,Mh,id],encapsulation:2})};sh(od,c1).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
