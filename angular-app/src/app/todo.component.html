<div class="todo-container">
  <h2>My To-Do List</h2>

  <!-- Add Todo Form -->
  <form (ngSubmit)="addTodo()" class="add-todo-form">
    <input
      type="text"
      [(ngModel)]="newTodoTitle"
      name="newTodoTitle"
      placeholder="What needs to be done?"
      class="todo-input"
      required
    />
    <button type="submit" class="btn add-btn">Add</button>
  </form>

  <!-- Todo List -->
  <ul class="todo-list">
    <li *ngFor="let todo of todos$ | async" [class.completed]="todo.completed">
      <div *ngIf="editingTodo?.id !== todo.id; else editMode" class="view-mode">
        <input
          type="checkbox"
          [checked]="todo.completed"
          (change)="toggleCompletion(todo)"
          class="todo-checkbox"
        />
        <span class="todo-title">{{ todo.title }}</span>
        <div class="actions">
          <button (click)="editTodo(todo)" class="btn edit-btn">Edit</button>
          <button (click)="deleteTodo(todo.id)" class="btn delete-btn">Delete</button>
        </div>
      </div>
      <ng-template #editMode>
        <div class="edit-mode">
          <input
            type="text"
            [(ngModel)]="editingTodo!.title"
            name="editingTodoTitle"
            (keydown.enter)="saveTodo()"
            (keydown.escape)="cancelEdit()"
            class="edit-input"
          />
          <div class="actions">
            <button (click)="saveTodo()" class="btn save-btn">Save</button>
            <button (click)="cancelEdit()" class="btn cancel-btn">Cancel</button>
          </div>
        </div>
      </ng-template>
    </li>
  </ul>
</div> 