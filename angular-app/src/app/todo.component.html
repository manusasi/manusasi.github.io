<div class="todo-container">
  <h2>My To-Do List</h2>

  <!-- Add Todo Form -->
  <form (ngSubmit)="addTodo()" class="add-todo-form">
    <input
      type="text"
      [(ngModel)]="newTodoTitle"
      name="newTodoTitle"
      placeholder="What needs to be done?"
      class="todo-input"
      required
    />
    <button type="submit" class="btn add-btn">Add</button>
  </form>

  <!-- Todo List -->
  <div class="todo-list">
    <div cdkDropList (cdkDropListDropped)="drop($event)">
      <div *ngFor="let todo of todos" cdkDrag class="todo-item" [class.completed]="todo.completed">
        <div class="todo-item-details">
          <input type="checkbox" [checked]="todo.completed" (change)="toggleCompletion(todo)">
          <div *ngIf="editingTodo?.id !== todo.id; else editTpl" (dblclick)="editTodo(todo)" class="todo-title">
            {{ todo.title }}
          </div>
          <div class="actions">
            <button (click)="editTodo(todo)" class="btn edit-btn">Edit</button>
            <button (click)="deleteTodo(todo.id)" class="btn delete-btn">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #editTpl>
    <div class="edit-mode">
      <input
        type="text"
        [(ngModel)]="editingTodo!.title"
        name="editingTodoTitle"
        (keydown.enter)="saveTodo()"
        (keydown.escape)="cancelEdit()"
        class="edit-input"
      />
      <div class="actions">
        <button (click)="saveTodo()" class="btn save-btn">Save</button>
        <button (click)="cancelEdit()" class="btn cancel-btn">Cancel</button>
      </div>
    </div>
  </ng-template>
</div> 