<div class="todo-container">
  <header class="app-header">
    <a routerLink="/" class="back-link">‚Üê Back to Apps</a>
    <h2>Todo List</h2>
    <p>Manage your tasks with drag-and-drop reordering</p>
    <button (click)="logout()" class="logout-btn">Sign Out</button>
  </header>

  <!-- Add Todo Form -->
  <form class="add-todo-form" (ngSubmit)="addTodo()">
    <input
      type="text"
      [(ngModel)]="newTodoTitle"
      name="newTodoTitle"
      placeholder="Add a new todo..."
      class="todo-input"
    />
    <button type="submit" class="btn add-btn">Add</button>
  </form>

  <!-- Todo List -->
  <div class="todo-list">
    <div cdkDropList (cdkDropListDropped)="drop($event)">
      <div *ngFor="let todo of todos" cdkDrag class="todo-item" [class.completed]="todo.completed">
        <div class="todo-item-details">
          <input type="checkbox" [checked]="todo.completed" (change)="toggleCompletion(todo)">
          <div *ngIf="editingTodo?.id !== todo.id; else editTpl" (dblclick)="editTodo(todo)" class="todo-title">
            {{ todo.title }}
          </div>
          <div class="actions">
            <button (click)="editTodo(todo)" class="btn edit-btn">Edit</button>
            <button (click)="deleteTodo(todo.id)" class="btn delete-btn">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #editTpl>
    <div class="edit-mode">
      <input
        type="text"
        [(ngModel)]="editingTodo!.title"
        name="editTitle"
        class="edit-input"
        (keyup.enter)="saveTodo()"
        (keyup.escape)="cancelEdit()"
        autofocus
      />
      <button (click)="saveTodo()" class="btn save-btn">Save</button>
      <button (click)="cancelEdit()" class="btn cancel-btn">Cancel</button>
    </div>
  </ng-template>
</div> 