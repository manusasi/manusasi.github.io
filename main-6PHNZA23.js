import{$ as Lo,$a as er,A as gn,Aa as bn,B as De,Ba as Bt,C as Mo,Ca as hs,D as wt,Da as ep,E as Oe,Ea as tp,F as dt,Fa as ie,G as Ji,Ga as ue,H as Hf,Ha as Gn,I as No,Ia as En,J as B,Ja as np,K as j,Ka as In,L as F,La as Xi,M as z,Ma as Mc,N as _n,Na as ip,O as _i,Oa as Nc,P as Oo,Pa as rp,Q as kt,Qa as Oc,R as yi,Ra as Lc,S as cs,Sa as sp,T as vi,Ta as Dt,U as Wf,Ua as xe,V as Kf,Va as gt,W as Qf,Wa as op,X as T,Xa as Zi,Y as us,Ya as me,Z as G,Za as ap,_ as he,_a as lp,a as ye,aa as Je,ab as cp,b as Te,ba as Pt,bb as up,c as Yi,ca as H,cb as dp,d as $n,da as Ee,db as Fo,e as v,ea as Zt,eb as hp,f as Ut,fa as Yf,fb as $e,g as Uf,ga as Jf,gb as Uo,h as Do,ha as R,hb as mp,i as Bf,ia as u,ib as fp,j as jf,ja as m,jb as Bo,k as Ro,ka as P,kb as pp,l as Dc,la as ht,lb as _t,m as Rc,ma as mt,n as vt,na as X,o as ct,oa as N,p as as,pa as M,q as Ye,qa as yn,r as $f,ra as Xf,s as qf,sa as ds,t as Gf,ta as Zf,u as Vc,ua as g,v as Vo,va as Y,w as At,wa as le,x as ut,xa as qn,y as zf,ya as vn,z as ls,za as wn}from"./chunk-ONL5GAQE.js";var gp=()=>{};var vp=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},u1=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],a=n[t++],c=n[t++],d=((r&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{let s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},jo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,c=a?n[r+1]:0,d=r+2<n.length,f=d?n[r+2]:0,_=s>>2,w=(s&3)<<4|c>>4,b=(c&15)<<2|f>>6,V=f&63;d||(V=64,a||(b=64)),i.push(t[_],t[w],t[b],t[V])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):u1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let w=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||f==null||w==null)throw new Uc;let b=s<<2|c>>4;if(i.push(b),f!==64){let V=c<<4&240|f>>2;if(i.push(V),w!==64){let U=f<<6&192|w;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Uc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},d1=function(n){let e=vp(n);return jo.encodeByteArray(e,!0)},fs=function(n){return d1(n).replace(/\./g,"")},$o=function(n){try{return jo.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var h1=()=>jc().__FIREBASE_DEFAULTS__,m1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},f1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&$o(n[1]);return e&&JSON.parse(e)},qo=()=>{try{return gp()||h1()||m1()||f1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$c=n=>{var e,t;return(t=(e=qo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},wp=n=>{let e=$c(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},qc=()=>{var n;return(n=qo())===null||n===void 0?void 0:n.config},Gc=n=>{var e;return(e=qo())===null||e===void 0?void 0:e[`_${n}`]};var wi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function zn(n){return n.endsWith(".cloudworkstations.dev")}function Go(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function bp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[fs(JSON.stringify(t)),fs(JSON.stringify(a)),""].join(".")}var ms={};function p1(){let n={prod:[],emulator:[]};for(let e of Object.keys(ms))ms[e]?n.emulator.push(e):n.prod.push(e);return n}function g1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var _p=!1;function zo(n,e){if(typeof window>"u"||typeof document>"u"||!zn(window.location.host)||ms[n]===e||ms[n]||_p)return;ms[n]=e;function t(b){return`__firebase__banner__${b}`}let i="__firebase__banner",s=p1().prod.length>0;function a(){let b=document.getElementById(i);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,V){b.setAttribute("width","24"),b.setAttribute("id",V),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{_p=!0,a()},b}function _(b,V){b.setAttribute("id",V),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function w(){let b=g1(i),V=t("text"),U=document.getElementById(V)||document.createElement("span"),K=t("learnmore"),$=document.getElementById(K)||document.createElement("a"),se=t("preprendIcon"),te=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let oe=b.element;c(oe),_($,K);let ve=f();d(te,se),oe.append(te,U,$,ve),document.body.appendChild(oe)}s?(U.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ep(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function _1(){var n;let e=(n=qo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ip(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sp(){let n=qe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Cp(){return!_1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ps(){try{return typeof indexedDB=="object"}catch{return!1}}function Ap(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var y1="FirebaseError",bt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=y1,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}},jt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?v1(s,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new bt(r,c,i)}};function v1(n,e){return n.replace(w1,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var w1=/\{\$([^}]+)}/g;function kp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rt(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],a=e[r];if(yp(s)&&yp(a)){if(!Rt(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function yp(n){return n!==null&&typeof n=="object"}function tr(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pp(n,e){let t=new Bc(n,e);return t.subscribe.bind(t)}var Bc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");b1(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Fc),r.error===void 0&&(r.error=Fc),r.complete===void 0&&(r.complete=Fc);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function b1(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fc(){}var l2=4*60*60*1e3;function Re(n){return n&&n._delegate?n._delegate:n}var ft=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bi="[DEFAULT]";var zc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new wi;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I1(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:E1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function E1(n){return n===bi?void 0:n}function I1(n){return n.instantiationMode==="EAGER"}var Ho=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new zc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var T1=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),x1={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},S1=ce.INFO,C1={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},A1=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=C1[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},en=class{constructor(e){this.name=e,this._logLevel=S1,this._logHandler=A1,this._userLogHandler=null,T1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var k1=(n,e)=>e.some(t=>n instanceof t),Dp,Rp;function P1(){return Dp||(Dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D1(){return Rp||(Rp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Vp=new WeakMap,Wc=new WeakMap,Mp=new WeakMap,Hc=new WeakMap,Qc=new WeakMap;function R1(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(tn(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Vp.set(t,n)}).catch(()=>{}),Qc.set(e,n),e}function V1(n){if(Wc.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Wc.set(n,e)}var Kc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Mp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return tn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Np(n){Kc=n(Kc)}function M1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Wo(this),e,...t);return Mp.set(i,e.sort?e.sort():[e]),tn(i)}:D1().includes(n)?function(...e){return n.apply(Wo(this),e),tn(Vp.get(this))}:function(...e){return tn(n.apply(Wo(this),e))}}function N1(n){return typeof n=="function"?M1(n):(n instanceof IDBTransaction&&V1(n),k1(n,P1())?new Proxy(n,Kc):n)}function tn(n){if(n instanceof IDBRequest)return R1(n);if(Hc.has(n))return Hc.get(n);let e=N1(n);return e!==n&&(Hc.set(n,e),Qc.set(e,n)),e}var Wo=n=>Qc.get(n);function Lp(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,e),c=tn(a);return i&&a.addEventListener("upgradeneeded",d=>{i(tn(a.result),d.oldVersion,d.newVersion,tn(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}var O1=["get","getKey","getAll","getAllKeys","count"],L1=["put","add","delete","clear"],Yc=new Map;function Op(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yc.get(e))return Yc.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=L1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||O1.includes(t)))return;let s=function(a,...c){return v(this,null,function*(){let d=this.transaction(a,r?"readwrite":"readonly"),f=d.store;return i&&(f=f.index(c.shift())),(yield Promise.all([f[t](...c),r&&d.done]))[0]})};return Yc.set(e,s),s}Np(n=>Te(ye({},n),{get:(e,t,i)=>Op(e,t)||n.get(e,t,i),has:(e,t)=>!!Op(e,t)||n.has(e,t)}));var Xc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F1(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function F1(n){let e=n.getComponent();return e?.type==="VERSION"}var Zc="@firebase/app",Fp="0.13.1";var Tn=new en("@firebase/app"),U1="@firebase/app-compat",B1="@firebase/analytics-compat",j1="@firebase/analytics",$1="@firebase/app-check-compat",q1="@firebase/app-check",G1="@firebase/auth",z1="@firebase/auth-compat",H1="@firebase/database",W1="@firebase/data-connect",K1="@firebase/database-compat",Q1="@firebase/functions",Y1="@firebase/functions-compat",J1="@firebase/installations",X1="@firebase/installations-compat",Z1="@firebase/messaging",ew="@firebase/messaging-compat",tw="@firebase/performance",nw="@firebase/performance-compat",iw="@firebase/remote-config",rw="@firebase/remote-config-compat",sw="@firebase/storage",ow="@firebase/storage-compat",aw="@firebase/firestore",lw="@firebase/ai",cw="@firebase/firestore-compat",uw="firebase",dw="11.9.0";var eu="[DEFAULT]",hw={[Zc]:"fire-core",[U1]:"fire-core-compat",[j1]:"fire-analytics",[B1]:"fire-analytics-compat",[q1]:"fire-app-check",[$1]:"fire-app-check-compat",[G1]:"fire-auth",[z1]:"fire-auth-compat",[H1]:"fire-rtdb",[W1]:"fire-data-connect",[K1]:"fire-rtdb-compat",[Q1]:"fire-fn",[Y1]:"fire-fn-compat",[J1]:"fire-iid",[X1]:"fire-iid-compat",[Z1]:"fire-fcm",[ew]:"fire-fcm-compat",[tw]:"fire-perf",[nw]:"fire-perf-compat",[iw]:"fire-rc",[rw]:"fire-rc-compat",[sw]:"fire-gcs",[ow]:"fire-gcs-compat",[aw]:"fire-fst",[cw]:"fire-fst-compat",[lw]:"fire-vertex","fire-js":"fire-js",[uw]:"fire-js-all"};var gs=new Map,mw=new Map,tu=new Map;function Up(n,e){try{n.container.addComponent(e)}catch(t){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $t(n){let e=n.name;if(tu.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;tu.set(e,n);for(let t of gs.values())Up(t,n);for(let t of mw.values())Up(t,n);return!0}function nr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Et(n){return n==null?!1:n.settings!==void 0}var fw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new jt("app","Firebase",fw);var nu=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}};var Wn=dw;function su(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:eu,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Hn.create("bad-app-name",{appName:String(r)});if(t||(t=qc()),!t)throw Hn.create("no-options");let s=gs.get(r);if(s){if(Rt(t,s.options)&&Rt(i,s.config))return s;throw Hn.create("duplicate-app",{appName:r})}let a=new Ho(r);for(let d of tu.values())a.addComponent(d);let c=new nu(t,i,a);return gs.set(r,c),c}function Ei(n=eu){let e=gs.get(n);if(!e&&n===eu&&qc())return su();if(!e)throw Hn.create("no-app",{appName:n});return e}function Ko(){return Array.from(gs.values())}function Ve(n,e,t){var i;let r=(i=hw[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(c.join(" "));return}$t(new ft(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var pw="firebase-heartbeat-database",gw=1,_s="firebase-heartbeat-store",Jc=null;function qp(){return Jc||(Jc=Lp(pw,gw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_s)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hn.create("idb-open",{originalErrorMessage:n.message})})),Jc}function _w(n){return v(this,null,function*(){try{let t=(yield qp()).transaction(_s),i=yield t.objectStore(_s).get(Gp(n));return yield t.done,i}catch(e){if(e instanceof bt)Tn.warn(e.message);else{let t=Hn.create("idb-get",{originalErrorMessage:e?.message});Tn.warn(t.message)}}})}function Bp(n,e){return v(this,null,function*(){try{let i=(yield qp()).transaction(_s,"readwrite");yield i.objectStore(_s).put(e,Gp(n)),yield i.done}catch(t){if(t instanceof bt)Tn.warn(t.message);else{let i=Hn.create("idb-set",{originalErrorMessage:t?.message});Tn.warn(i.message)}}})}function Gp(n){return`${n.name}!${n.options.appId}`}var yw=1024,vw=30,iu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ru(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>vw){let a=bw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Tn.warn(i)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=jp(),{heartbeatsToSend:i,unsentEntries:r}=ww(this._heartbeatsCache.heartbeats),s=fs(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Tn.warn(t),""}})}};function jp(){return new Date().toISOString().substring(0,10)}function ww(n,e=yw){let t=[],i=n.slice();for(let r of n){let s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),$p(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),$p(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var ru=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ps()?Ap().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _w(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function $p(n){return fs(JSON.stringify({version:2,heartbeats:n})).length}function bw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Ew(n){$t(new ft("platform-logger",e=>new Xc(e),"PRIVATE")),$t(new ft("heartbeat",e=>new iu(e),"PRIVATE")),Ve(Zc,Fp,n),Ve(Zc,Fp,"esm2017"),Ve("fire-js","")}Ew("");var Iw="firebase",Tw="11.9.1";Ve(Iw,Tw,"app");function zp(n){n===void 0&&(n=dt(_n));let e=n.get(Oo);return t=>new Ut(i=>{let r=e.add(),s=!1;function a(){s||(r(),s=!0)}let c=t.subscribe({next:d=>{i.next(d),a()},complete:()=>{i.complete(),a()},error:d=>{i.error(d),a()}});return c.add(()=>{i.unsubscribe(),a()}),c})}var Kn=new Mc("ANGULARFIRE2_VERSION");function ys(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var rr=(n,e)=>{let t=e?[e]:Ko(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},ir=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ir||{}),Hp=Nc()&&typeof Zone<"u"?ir.WARN:ir.SILENT;var Qo=class{zone;delegate;constructor(e,t=jf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(a){r?r.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(s,t,i)}},Qn=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=dt(Zt);this.outsideAngular=t.runOutsideAngular(()=>new Qo(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Qo(typeof Zone>"u"?void 0:Zone.current,Bf))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wp=!1;function xw(n,e){!Wp&&(Hp>ir.SILENT||Nc())&&(Wp=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Hp>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Sw(n){let e=dt(Zt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ii(n){let e=dt(Zt,{optional:!0});return e?e.run(()=>n()):n()}var Cw=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),No(t,()=>Ii(()=>n.apply(void 0,i)))),Ae=(n,e,t)=>(t||=e?ir.WARN:ir.VERBOSE,function(){let i,r=arguments,s,a,c;try{s=dt(Qn),a=dt(Oo),c=dt(Hf)}catch{return xw(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=Ii(()=>a.add())),r[f]=Cw(r[f],i,c));let d=Sw(()=>n.apply(this,r));return e?d instanceof Ut?d.pipe(Rc(s.outsideAngular),Dc(s.insideAngular),zp(c)):d instanceof Promise?Ii(()=>{let f=a.add();return new Promise((_,w)=>{d.then(b=>No(c,()=>Ii(()=>_(b))),b=>No(c,()=>Ii(()=>w(b)))).finally(f)})}):typeof d=="function"&&i?function(){return setTimeout(i,0),d.apply(this,arguments)}:Ii(()=>d):d instanceof Ut?d.pipe(Rc(s.outsideAngular),Dc(s.insideAngular)):Ii(()=>d)});var xn=class{constructor(e){return e}},Ti=class{constructor(){return Ko()}};function Aw(n){return n&&n.length===1?n[0]:new xn(Ei())}var ou=new wt("angularfire2._apps"),kw={provide:xn,useFactory:Aw,deps:[[new kt,ou]]},Pw={provide:Ti,deps:[[new kt,ou]]};function Dw(n){return(e,t)=>{let i=t.get(Wf);Ve("angularfire",Kn.full,"core"),Ve("angularfire",Kn.full,"app"),Ve("angular",ip.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new xn(r)}}function Kp(n,...e){return Ji([kw,Pw,{provide:ou,useFactory:Dw(n),multi:!0,deps:[Zt,_n,Qn,...e]}])}var Qp=Ae(su,!0);var Rw=new Map,Vw={activated:!1,tokenObservers:[]},Mw={initialized:!1,enabled:!1};function qt(n){return Rw.get(n)||Object.assign({},Vw)}function Zp(){return Mw}var Nw="https://content-firebaseappcheck.googleapis.com/v1";var Ow="exchangeDebugToken",Yp={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},hA=24*60*60*1e3;var cu=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new wi,this.pending.promise.catch(t=>{}),yield Lw(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Lw(n){return new Promise(e=>{setTimeout(e,n)})}var Fw={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Yn=new jt("appCheck","AppCheck",Fw);function eg(n){if(!qt(n).activated)throw Yn.create("use-before-activation",{appName:n.name})}function tg(i,r){return v(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let V=yield a.getHeartbeatsHeader();V&&(s["X-Firebase-Client"]=V)}let c={method:"POST",body:JSON.stringify(e),headers:s},d;try{d=yield fetch(n,c)}catch(V){throw Yn.create("fetch-network-error",{originalErrorMessage:V?.message})}if(d.status!==200)throw Yn.create("fetch-status-error",{httpStatus:d.status});let f;try{f=yield d.json()}catch(V){throw Yn.create("fetch-parse-error",{originalErrorMessage:V?.message})}let _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Yn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let w=Number(_[1])*1e3,b=Date.now();return{token:f.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}})}function ng(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Nw}/projects/${t}/apps/${i}:${Ow}?key=${r}`,body:{debug_token:e}}}var Uw="firebase-app-check-database",Bw=1,uu="firebase-app-check-store";var Yo=null;function jw(){return Yo||(Yo=new Promise((n,e)=>{try{let t=indexedDB.open(Uw,Bw);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Yn.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(uu,{keyPath:"compositeKey"})}}}catch(t){e(Yn.create("storage-open",{originalErrorMessage:t?.message}))}}),Yo)}function $w(n,e){return qw(Gw(n),e)}function qw(n,e){return v(this,null,function*(){let i=(yield jw()).transaction(uu,"readwrite"),s=i.objectStore(uu).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=d=>{a()},i.onerror=d=>{var f;c(Yn.create("storage-set",{originalErrorMessage:(f=d.target.error)===null||f===void 0?void 0:f.message}))}})})}function Gw(n){return`${n.options.appId}-${n.name}`}var vs=new en("@firebase/app-check");function au(n,e){return ps()?$w(n,e).catch(t=>{vs.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ig(){return Zp().enabled}function rg(){return v(this,null,function*(){let n=Zp();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zw={error:"UNKNOWN_ERROR"};function Hw(n){return jo.encodeString(JSON.stringify(n),!1)}function du(n,e=!1,t=!1){return v(this,null,function*(){let i=n.app;eg(i);let r=qt(i),s=r.token,a;if(s&&!ws(s)&&(r.token=void 0,s=void 0),!s){let f=yield r.cachedTokenPromise;f&&(ws(f)?s=f:yield au(i,void 0))}if(!e&&s&&ws(s))return{token:s.token};let c=!1;if(ig())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=tg(ng(i,yield rg()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);let f=yield r.exchangeTokenPromise;return yield au(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?vs.warn(f.message):t&&vs.error(f),lu(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),s=yield qt(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?vs.warn(f.message):t&&vs.error(f),a=f}let d;return s?a?ws(s)?d={token:s.token,internalError:a}:d=lu(a):(d={token:s.token},r.token=s,yield au(i,s)):d=lu(a),c&&Yw(i,d),d})}function Ww(n){return v(this,null,function*(){let e=n.app;eg(e);let{provider:t}=qt(e);if(ig()){let i=yield rg(),{token:r}=yield tg(ng(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function Kw(n,e,t,i){let{app:r}=n,s=qt(r),a={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&ws(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),Jp(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Jp(n))}function sg(n,e){let t=qt(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Jp(n){let{app:e}=n,t=qt(e),i=t.tokenRefresher;i||(i=Qw(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Qw(n){let{app:e}=n;return new cu(()=>v(null,null,function*(){let t=qt(e),i;if(t.token?i=yield du(n,!0):i=yield du(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=qt(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Yp.RETRIAL_MIN_WAIT,Yp.RETRIAL_MAX_WAIT)}function Yw(n,e){let t=qt(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ws(n){return n.expireTimeMillis-Date.now()>0}function lu(n){return{token:Hw(zw),error:n}}var hu=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=qt(this.app);for(let t of e)sg(this.app,t.next);return Promise.resolve()}};function Jw(n,e){return new hu(n,e)}function Xw(n){return{getToken:e=>du(n,e),getLimitedUseToken:()=>Ww(n),addTokenListener:e=>Kw(n,"INTERNAL",e),removeTokenListener:e=>sg(n.app,e)}}var Zw="@firebase/app-check",eb="0.10.0";var tb="app-check",Xp="app-check-internal";function nb(){$t(new ft(tb,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Jw(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Xp).initialize()})),$t(new ft(Xp,n=>{let e=n.getProvider("app-check").getImmediate();return Xw(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(Zw,eb)}nb();var ib="app-check";var sr=class{constructor(){return rr(ib)}};var rb=["localhost","0.0.0.0","127.0.0.1"],xA=typeof window<"u"&&rb.includes(window.location.hostname);function wg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bg=wg,Eg=new jt("auth","Firebase",wg());var na=new en("@firebase/auth");function sb(n,...e){na.logLevel<=ce.WARN&&na.warn(`Auth (${Wn}): ${n}`,...e)}function Xo(n,...e){na.logLevel<=ce.ERROR&&na.error(`Auth (${Wn}): ${n}`,...e)}function rn(n,...e){throw Pu(n,...e)}function Gt(n,...e){return Pu(n,...e)}function ku(n,e,t){let i=Object.assign(Object.assign({},bg()),{[e]:t});return new jt("auth","Firebase",i).create(e,{appName:n.name})}function xi(n){return ku(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ob(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rn(n,"argument-error"),ku(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pu(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Eg.create(n,...e)}function ee(n,e,...t){if(!n)throw Pu(e,...t)}function Sn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xo(e),new Error(e)}function An(n,e){n||Sn(e)}function pu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ab(){return og()==="http:"||og()==="https:"}function og(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function lb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ab()||Tp()||"connection"in navigator)?navigator.onLine:!0}function cb(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Si=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,An(t>e,"Short delay should be less than long delay!"),this.isMobile=Ep()||xp()}get(){return lb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Du(n,e){An(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ia=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ub={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var db=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hb=new Si(3e4,6e4);function Ru(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ar(s,a,c,d){return v(this,arguments,function*(n,e,t,i,r={}){return Ig(n,r,()=>v(null,null,function*(){let f={},_={};i&&(e==="GET"?_=i:f={body:JSON.stringify(i)});let w=tr(Object.assign({key:n.config.apiKey},_)).slice(1),b=yield n._getAdditionalHeaders();b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode);let V=Object.assign({method:e,headers:b},f);return Ip()||(V.referrerPolicy="no-referrer"),n.emulatorConfig&&zn(n.emulatorConfig.host)&&(V.credentials="include"),ia.fetch()(yield Tg(n,n.config.apiHost,t,w),V)}))})}function Ig(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},ub),e);try{let r=new gu(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Jo(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jo(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Jo(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Jo(n,"user-disabled",a);let _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ku(n,_,f);rn(n,_)}}catch(r){if(r instanceof bt)throw r;rn(n,"network-request-failed",{message:String(r)})}})}function mb(s,a,c,d){return v(this,arguments,function*(n,e,t,i,r={}){let f=yield ar(n,e,t,i,r);return"mfaPendingCredential"in f&&rn(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function Tg(n,e,t,i){return v(this,null,function*(){let r=`${e}${t}?${i}`,s=n,a=s.config.emulator?Du(n.config,r):`${n.config.apiScheme}://${r}`;return db.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}var gu=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Gt(this.auth,"network-request-failed")),hb.get())})}};function Jo(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Gt(n,e,i);return r.customData._tokenResponse=t,r}function fb(n,e){return v(this,null,function*(){return ar(n,"POST","/v1/accounts:delete",e)})}function ra(n,e){return v(this,null,function*(){return ar(n,"POST","/v1/accounts:lookup",e)})}function bs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Vu(n,e=!1){return v(this,null,function*(){let t=Re(n),i=yield t.getIdToken(e),r=Mu(i);ee(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:bs(mu(r.auth_time)),issuedAtTime:bs(mu(r.iat)),expirationTime:bs(mu(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function mu(n){return Number(n)*1e3}function Mu(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Xo("JWT malformed, contained fewer than 3 sections"),null;try{let r=$o(t);return r?JSON.parse(r):(Xo("Failed to decode base64 JWT payload"),null)}catch(r){return Xo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ag(n){let e=Mu(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Is(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof bt&&pb(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function pb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var _u=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ts=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bs(this.lastLoginAt),this.creationTime=bs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sa(n){return v(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Is(n,ra(t,{idToken:i}));ee(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xg(s.providerUserInfo):[],c=gb(n.providerData,a),d=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!c?.length,_=d?f:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ts(s.createdAt,s.lastLoginAt),isAnonymous:_};Object.assign(n,w)})}function Nu(n){return v(this,null,function*(){let e=Re(n);yield sa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gb(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function xg(n){return n.map(e=>{var{providerId:t}=e,i=Ro(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function _b(n,e){return v(this,null,function*(){let t=yield Ig(n,{},()=>v(null,null,function*(){let i=tr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=yield Tg(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:c,body:i};return n.emulatorConfig&&zn(n.emulatorConfig.host)&&(d.credentials="include"),ia.fetch()(a,d)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function yb(n,e){return v(this,null,function*(){return ar(n,"POST","/v2/accounts:revokeToken",Ru(n,e))})}var Es=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=ag(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield _b(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new n;return i&&(ee(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Sn("not implemented")}};function Jn(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Xn=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Ro(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _u(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ts(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Is(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Vu(this,e)}reload(){return Nu(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield sa(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Et(this.auth.app))return Promise.reject(xi(this.auth));let e=yield this.getIdToken();return yield Is(this,fb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,c,d,f,_;let w=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(r=t.email)!==null&&r!==void 0?r:void 0,V=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,U=(a=t.photoURL)!==null&&a!==void 0?a:void 0,K=(c=t.tenantId)!==null&&c!==void 0?c:void 0,$=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,se=(f=t.createdAt)!==null&&f!==void 0?f:void 0,te=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:oe,emailVerified:ve,isAnonymous:ot,providerData:_e,stsTokenManager:S}=t;ee(oe&&S,e,"internal-error");let y=Es.fromJSON(this.name,S);ee(typeof oe=="string",e,"internal-error"),Jn(w,e.name),Jn(b,e.name),ee(typeof ve=="boolean",e,"internal-error"),ee(typeof ot=="boolean",e,"internal-error"),Jn(V,e.name),Jn(U,e.name),Jn(K,e.name),Jn($,e.name),Jn(se,e.name),Jn(te,e.name);let I=new n({uid:oe,auth:e,email:b,emailVerified:ve,displayName:w,isAnonymous:ot,photoURL:U,phoneNumber:V,tenantId:K,stsTokenManager:y,createdAt:se,lastLoginAt:te});return _e&&Array.isArray(_e)&&(I.providerData=_e.map(x=>Object.assign({},x))),$&&(I._redirectEventId=$),I}static _fromIdTokenResponse(e,t,i=!1){return v(this,null,function*(){let r=new Es;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield sa(s),s})}static _fromGetAccountInfoResponse(e,t,i){return v(this,null,function*(){let r=t.users[0];ee(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?xg(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,c=new Es;c.updateFromIdToken(i);let d=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ts(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(d,f),d})}};var lg=new Map;function Cn(n){An(n instanceof Function,"Expected a class definition");let e=lg.get(n);return e?(An(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lg.set(n,e),e)}var vb=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,i){return v(this,null,function*(){this.storage[t]=i})}_get(t){return v(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),yu=vb;function Zo(n,e,t){return`firebase:${n}:${e}:${t}`}var oa=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Zo(this.userKey,r.apiKey,s),this.fullPersistenceKey=Zo("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ra(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return v(this,null,function*(){if(!t.length)return new n(Cn(yu),e,i);let r=(yield Promise.all(t.map(f=>v(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),s=r[0]||Cn(yu),a=Zo(i,e.config.apiKey,e.name),c=null;for(let f of t)try{let _=yield f._get(a);if(_){let w;if(typeof _=="string"){let b=yield ra(e,{idToken:_}).catch(()=>{});if(!b)break;w=yield Xn._fromGetAccountInfoResponse(e,b,_)}else w=Xn._fromJSON(e,_);f!==s&&(c=w),s=f;break}}catch{}let d=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new n(s,e,i):(s=d[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(f=>v(null,null,function*(){if(f!==s)try{yield f._remove(a)}catch{}}))),new n(s,e,i))})}};function cg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dg(e))return"Blackberry";if(Rg(e))return"Webos";if(Cg(e))return"Safari";if((e.includes("chrome/")||Ag(e))&&!e.includes("edge/"))return"Chrome";if(Pg(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Sg(n=qe()){return/firefox\//i.test(n)}function Cg(n=qe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ag(n=qe()){return/crios\//i.test(n)}function kg(n=qe()){return/iemobile/i.test(n)}function Pg(n=qe()){return/android/i.test(n)}function Dg(n=qe()){return/blackberry/i.test(n)}function Rg(n=qe()){return/webos/i.test(n)}function Ou(n=qe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wb(n=qe()){var e;return Ou(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bb(){return Sp()&&document.documentMode===10}function Vg(n=qe()){return Ou(n)||Pg(n)||Rg(n)||Dg(n)||/windows phone/i.test(n)||kg(n)}function Mg(n,e=[]){let t;switch(n){case"Browser":t=cg(qe());break;case"Worker":t=`${cg(qe())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wn}/${i}`}var vu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((a,c)=>{try{let d=e(s);a(d)}catch(d){c(d)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Eb(t){return v(this,arguments,function*(n,e={}){return ar(n,"GET","/v2/passwordPolicy",Ru(n,e))})}var Ib=6,wu=class{constructor(e){var t,i,r,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Ib,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,a,c;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var bu=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aa(this),this.idTokenSubscription=new aa(this),this.beforeStateQueue=new vu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var i,r,s;if(!this._deleted&&(this.persistenceManager=yield oa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield ra(this,{idToken:e}),i=yield Xn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Et(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield sa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cb()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Et(this.app))return Promise.reject(xi(this));let t=e?Re(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Et(this.app)?Promise.reject(xi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Et(this.app)?Promise.reject(xi(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Cn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Eb(this),t=new wu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield yb(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Cn(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield oa.create(this,[Cn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,i,r);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&sb(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function pa(n){return Re(n)}var aa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pp(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Lu={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tb(n){Lu=n}function xb(n){return Lu.loadJS(n)}function Sb(){return Lu.gapiScript}function Ng(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Fu(n,e){let t=nr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Rt(s,e??{}))return r;rn(r,"already-initialized")}return t.initialize({options:e})}function Cb(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Cn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Uu(n,e,t){let i=pa(n);ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Og(e),{host:a,port:c}=Ab(e),d=c===null?"":`:${c}`,f={url:`${s}//${a}${d}/`},_=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ee(Rt(f,i.config.emulator)&&Rt(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,zn(a)?(Go(`${s}//${a}${d}`),zo("Auth",!0)):r||kb()}function Og(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ab(n){let e=Og(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:ug(i.substr(s.length+1))}}else{let[s,a]=i.split(":");return{host:s,port:ug(a)}}}function ug(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function kb(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var xs=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,t){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}};function or(n,e){return v(this,null,function*(){return mb(n,"POST","/v1/accounts:signInWithIdp",Ru(n,e))})}var Pb="http://localhost",la=class n extends xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Ro(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new n(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return or(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,or(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,or(e,t)}buildRequest(){let e={requestUri:Pb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tr(t)}return e}};var Ss=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ca=class extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Bu=(()=>{class n extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Cs=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return v(this,null,function*(){let s=yield Xn._fromIdTokenResponse(e,i,r),a=dg(i);return new n({user:s,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return v(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=dg(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function dg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Eu=class n extends bt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Lg(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Eu._fromErrorAndOperation(n,s,e,i):s})}function Db(n,e,t=!1){return v(this,null,function*(){let i=yield Is(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Cs._forOperation(n,"link",i)})}function Rb(n,e,t=!1){return v(this,null,function*(){let{auth:i}=n;if(Et(i.app))return Promise.reject(xi(i));let r="reauthenticate";try{let s=yield Is(n,Lg(i,r,e,n),t);ee(s.idToken,i,"internal-error");let a=Mu(s.idToken);ee(a,i,"internal-error");let{sub:c}=a;return ee(n.uid===c,i,"user-mismatch"),Cs._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&rn(i,"user-mismatch"),s}})}function Vb(n,e,t=!1){return v(this,null,function*(){if(Et(n.app))return Promise.reject(xi(n));let i="signIn",r=yield Lg(n,i,e),s=yield Cs._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function ks(n,e,t,i){return Re(n).onIdTokenChanged(e,t,i)}function ju(n,e,t){return Re(n).beforeAuthStateChanged(e,t)}function $u(n){return Re(n).signOut()}var ua="__sak";var da=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ua,"1"),this.storage.removeItem(ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Mb=1e3,Nb=10,Ob=(()=>{class n extends da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);bb()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Nb):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Mb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return v(this,null,function*(){yield $n(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return v(this,null,function*(){let i=yield $n(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return v(this,null,function*(){yield $n(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Fg=Ob;var Lb=(()=>{class n extends da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),qu=Lb;function Fb(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Ub=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let i=t,{eventId:r,eventType:s,data:a}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let d=Array.from(c).map(_=>v(this,null,function*(){return _(i.origin,a)})),f=yield Fb(d);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Gu(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Iu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((c,d)=>{let f=Gu("",20);r.port1.start();let _=setTimeout(()=>{d(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(w){let b=w;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(_),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(_),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function nn(){return window}function Bb(n){nn().location.href=n}function Ug(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}function jb(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $b(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function qb(){return Ug()?self:null}var Bg="firebaseLocalStorageDb",Gb=1,ha="firebaseLocalStorage",jg="fbase_key",Ci=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ga(n,e){return n.transaction([ha],e?"readwrite":"readonly").objectStore(ha)}function zb(){let n=indexedDB.deleteDatabase(Bg);return new Ci(n).toPromise()}function Tu(){let n=indexedDB.open(Bg,Gb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ha,{keyPath:jg})}catch(r){t(r)}}),n.addEventListener("success",()=>v(null,null,function*(){let i=n.result;i.objectStoreNames.contains(ha)?e(i):(i.close(),yield zb(),e(yield Tu()))}))})}function hg(n,e,t){return v(this,null,function*(){let i=ga(n,!0).put({[jg]:e,value:t});return new Ci(i).toPromise()})}function Hb(n,e){return v(this,null,function*(){let t=ga(n,!1).get(e),i=yield new Ci(t).toPromise();return i===void 0?null:i.value})}function mg(n,e){let t=ga(n,!0).delete(e);return new Ci(t).toPromise()}var Wb=800,Kb=3,Qb=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Tu(),this.db)})}_withRetries(t){return v(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>Kb)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return Ug()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Ub._getInstance(qb()),this.receiver._subscribe("keyChanged",(t,i)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,i;if(this.activeServiceWorker=yield jb(),!this.activeServiceWorker)return;this.sender=new Iu(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$b()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Tu();return yield hg(t,ua,"1"),yield mg(t,ua),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>hg(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let i=yield this._withRetries(r=>Hb(r,t));return this.localCache[t]=i,i})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>mg(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let a=ga(s,!1).getAll();return new Ci(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),Wb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),$g=Qb;var NA=Ng("rcb"),OA=new Si(3e4,6e4);function qg(n,e){return e?Cn(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var As=class extends xs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return or(e,this._buildIdpRequest())}_linkToIdToken(e,t){return or(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return or(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Yb(n){return Vb(n.auth,new As(n),n.bypassAuthState)}function Jb(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),Rb(t,new As(n),n.bypassAuthState)}function Xb(n){return v(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),Db(t,new As(n),n.bypassAuthState)})}var ma=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yb;case"linkViaPopup":case"linkViaRedirect":return Xb;case"reauthViaPopup":case"reauthViaRedirect":return Jb;default:rn(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Zb=new Si(2e3,1e4);function zu(n,e,t){return v(this,null,function*(){if(Et(n.app))return Promise.reject(Gt(n,"operation-not-supported-in-this-environment"));let i=pa(n);ob(n,e,Ss);let r=qg(i,t);return new eE(i,"signInViaPopup",e,r).executeNotNull()})}var eE=(()=>{class n extends ma{constructor(t,i,r,s,a){super(t,i,s,a),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return ee(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){An(this.filter.length===1,"Popup operations only handle one event");let t=Gu();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Zb.get())};t()}}n.currentPopupAction=null;return n})(),tE="pendingRedirect",ea=new Map,xu=class n extends ma{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return v(this,null,function*(){let e=ea.get(this.auth._key());if(!e){try{let i=(yield nE(this.resolver,this.auth))?yield $n(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ea.set(this.auth._key(),e)}return this.bypassAuthState||ea.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return $n(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,$n(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function nE(n,e){return v(this,null,function*(){let t=sE(e),i=rE(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function iE(n,e){ea.set(n._key(),e)}function rE(n){return Cn(n._redirectPersistence)}function sE(n){return Zo(tE,n.config.apiKey,n.name)}function oE(n,e,t=!1){return v(this,null,function*(){if(Et(n.app))return Promise.reject(xi(n));let i=pa(n),r=qg(i,e),a=yield new xu(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var aE=10*60*1e3,Su=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Gg(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Gt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aE&&this.cachedEventUids.clear(),this.cachedEventUids.has(fg(e))}saveEventToCache(e){this.cachedEventUids.add(fg(e)),this.lastProcessedEventTime=Date.now()}};function fg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Gg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gg(n);default:return!1}}function cE(t){return v(this,arguments,function*(n,e={}){return ar(n,"GET","/v1/projects",e)})}var uE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dE=/^https?/;function hE(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield cE(n);for(let t of e)try{if(mE(t))return}catch{}rn(n,"unauthorized-domain")})}function mE(n){let e=pu(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!dE.test(t))return!1;if(uE.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var fE=new Si(3e4,6e4);function pg(){let n=nn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pE(n){return new Promise((e,t)=>{var i,r,s;function a(){pg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pg(),t(Gt(n,"network-request-failed"))},timeout:fE.get()})}if(!((r=(i=nn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=nn().gapi)===null||s===void 0)&&s.load)a();else{let c=Ng("iframefcb");return nn()[c]=()=>{gapi.load?a():t(Gt(n,"network-request-failed"))},xb(`${Sb()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw ta=null,e})}var ta=null;function gE(n){return ta=ta||pE(n),ta}var _E=new Si(5e3,15e3),yE="__/auth/iframe",vE="emulator/auth/iframe",wE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EE(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Du(e,vE):`https://${n.config.authDomain}/${yE}`,i={apiKey:e.apiKey,appName:n.name,v:Wn},r=bE.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${tr(i).slice(1)}`}function IE(n){return v(this,null,function*(){let e=yield gE(n),t=nn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:EE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wE,dontclear:!0},i=>new Promise((r,s)=>v(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=Gt(n,"network-request-failed"),c=nn().setTimeout(()=>{s(a)},_E.get());function d(){nn().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{s(a)})})))})}var TE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xE=500,SE=600,CE="_blank",AE="http://localhost",fa=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function kE(n,e,t,i=xE,r=SE){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",d=Object.assign(Object.assign({},TE),{width:i.toString(),height:r.toString(),top:s,left:a}),f=qe().toLowerCase();t&&(c=Ag(f)?CE:t),Sg(f)&&(e=e||AE,d.scrollbars="yes");let _=Object.entries(d).reduce((b,[V,U])=>`${b}${V}=${U},`,"");if(wb(f)&&c!=="_self")return PE(e||"",c),new fa(null);let w=window.open(e||"",c,_);ee(w,n,"popup-blocked");try{w.focus()}catch{}return new fa(w)}function PE(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var DE="__/auth/handler",RE="emulator/auth/handler",VE=encodeURIComponent("fac");function gg(n,e,t,i,r,s){return v(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wn,eventId:r};if(e instanceof Ss){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",kp(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[_,w]of Object.entries(s||{}))a[_]=w}if(e instanceof ca){let _=e.getScopes().filter(w=>w!=="");_.length>0&&(a.scopes=_.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let _ of Object.keys(c))c[_]===void 0&&delete c[_];let d=yield n._getAppCheckToken(),f=d?`#${VE}=${encodeURIComponent(d)}`:"";return`${ME(n)}?${tr(c).slice(1)}${f}`})}function ME({config:n}){return n.emulator?Du(n,RE):`https://${n.authDomain}/${DE}`}var fu="webStorageSupport",Cu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qu,this._completeRedirectFn=oE,this._overrideRedirectResult=iE}_openPopup(e,t,i,r){return v(this,null,function*(){var s;An((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield gg(e,t,i,pu(),r);return kE(e,a,Gu())})}_openRedirect(e,t,i,r){return v(this,null,function*(){yield this._originValidation(e);let s=yield gg(e,t,i,pu(),r);return Bb(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(An(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return v(this,null,function*(){let t=yield IE(e),i=new Su(e);return t.register("authEvent",r=>(ee(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fu,{type:fu},r=>{var s;let a=(s=r?.[0])===null||s===void 0?void 0:s[fu];a!==void 0&&t(!!a),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vg()||Cg()||Ou()}},zg=Cu;var _g="@firebase/auth",yg="1.10.7";var Au=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function NE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OE(n){$t(new ft("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mg(n)},f=new bu(i,r,s,d);return Cb(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$t(new ft("auth-internal",e=>{let t=pa(e.getProvider("auth").getImmediate());return(i=>new Au(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(_g,yg,NE(n)),Ve(_g,yg,"esm2017")}var LE=5*60,FE=Gc("authIdTokenMaxAge")||LE,vg=null,UE=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FE)return;let r=t?.token;vg!==r&&(vg=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Hu(n=Ei()){let e=nr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Fu(n,{popupRedirectResolver:zg,persistence:[$g,Fg,qu]}),i=Gc("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let a=UE(s.toString());ju(t,a,()=>a(t.currentUser)),ks(t,c=>a(c))}}let r=$c("auth");return r&&Uu(t,`http://${r}`),t}function BE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Tb({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Gt("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",BE().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OE("Browser");function Kg(n){return new Ut(function(e){var t=ks(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Qg="auth",Ai=class{constructor(e){return e}},Ps=class{constructor(){return rr(Qg)}};var Wu=new wt("angularfire2.auth-instances");function kI(n,e){let t=ys(Qg,n,e);return t&&new Ai(t)}function PI(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ai(i)}}var DI={provide:Ps,deps:[[new kt,Wu]]},RI={provide:Ai,useFactory:kI,deps:[[new kt,Wu],xn]};function Yg(n,...e){return Ve("angularfire",Kn.full,"auth"),Ji([RI,DI,{provide:Wu,useFactory:PI(n),multi:!0,deps:[Zt,_n,Qn,Ti,[new kt,sr],...e]}])}var Jg=Ae(Kg,!0);var Xg=Ae(Hu,!0);var Zg=Ae(zu,!0,2);var e0=Ae($u,!0,2);var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n0={};var kn,Ku;(function(){var n;function e(S,y){function I(){}I.prototype=y.prototype,S.D=y.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(x,C,k){for(var E=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)E[mn-2]=arguments[mn];return y.prototype[C].apply(x,E)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,y,I){I||(I=0);var x=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)x[C]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(C=0;16>C;++C)x[C]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=S.g[0],I=S.g[1],C=S.g[2];var k=S.g[3],E=y+(k^I&(C^k))+x[0]+3614090360&4294967295;y=I+(E<<7&4294967295|E>>>25),E=k+(C^y&(I^C))+x[1]+3905402710&4294967295,k=y+(E<<12&4294967295|E>>>20),E=C+(I^k&(y^I))+x[2]+606105819&4294967295,C=k+(E<<17&4294967295|E>>>15),E=I+(y^C&(k^y))+x[3]+3250441966&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(k^I&(C^k))+x[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=k+(C^y&(I^C))+x[5]+1200080426&4294967295,k=y+(E<<12&4294967295|E>>>20),E=C+(I^k&(y^I))+x[6]+2821735955&4294967295,C=k+(E<<17&4294967295|E>>>15),E=I+(y^C&(k^y))+x[7]+4249261313&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(k^I&(C^k))+x[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=k+(C^y&(I^C))+x[9]+2336552879&4294967295,k=y+(E<<12&4294967295|E>>>20),E=C+(I^k&(y^I))+x[10]+4294925233&4294967295,C=k+(E<<17&4294967295|E>>>15),E=I+(y^C&(k^y))+x[11]+2304563134&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(k^I&(C^k))+x[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=k+(C^y&(I^C))+x[13]+4254626195&4294967295,k=y+(E<<12&4294967295|E>>>20),E=C+(I^k&(y^I))+x[14]+2792965006&4294967295,C=k+(E<<17&4294967295|E>>>15),E=I+(y^C&(k^y))+x[15]+1236535329&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(C^k&(I^C))+x[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=k+(I^C&(y^I))+x[6]+3225465664&4294967295,k=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(k^y))+x[11]+643717713&4294967295,C=k+(E<<14&4294967295|E>>>18),E=I+(k^y&(C^k))+x[0]+3921069994&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^k&(I^C))+x[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=k+(I^C&(y^I))+x[10]+38016083&4294967295,k=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(k^y))+x[15]+3634488961&4294967295,C=k+(E<<14&4294967295|E>>>18),E=I+(k^y&(C^k))+x[4]+3889429448&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^k&(I^C))+x[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=k+(I^C&(y^I))+x[14]+3275163606&4294967295,k=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(k^y))+x[3]+4107603335&4294967295,C=k+(E<<14&4294967295|E>>>18),E=I+(k^y&(C^k))+x[8]+1163531501&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^k&(I^C))+x[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=k+(I^C&(y^I))+x[2]+4243563512&4294967295,k=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(k^y))+x[7]+1735328473&4294967295,C=k+(E<<14&4294967295|E>>>18),E=I+(k^y&(C^k))+x[12]+2368359562&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(I^C^k)+x[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=k+(y^I^C)+x[8]+2272392833&4294967295,k=y+(E<<11&4294967295|E>>>21),E=C+(k^y^I)+x[11]+1839030562&4294967295,C=k+(E<<16&4294967295|E>>>16),E=I+(C^k^y)+x[14]+4259657740&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^k)+x[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=k+(y^I^C)+x[4]+1272893353&4294967295,k=y+(E<<11&4294967295|E>>>21),E=C+(k^y^I)+x[7]+4139469664&4294967295,C=k+(E<<16&4294967295|E>>>16),E=I+(C^k^y)+x[10]+3200236656&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^k)+x[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=k+(y^I^C)+x[0]+3936430074&4294967295,k=y+(E<<11&4294967295|E>>>21),E=C+(k^y^I)+x[3]+3572445317&4294967295,C=k+(E<<16&4294967295|E>>>16),E=I+(C^k^y)+x[6]+76029189&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^k)+x[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=k+(y^I^C)+x[12]+3873151461&4294967295,k=y+(E<<11&4294967295|E>>>21),E=C+(k^y^I)+x[15]+530742520&4294967295,C=k+(E<<16&4294967295|E>>>16),E=I+(C^k^y)+x[2]+3299628645&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(C^(I|~k))+x[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=k+(I^(y|~C))+x[7]+1126891415&4294967295,k=y+(E<<10&4294967295|E>>>22),E=C+(y^(k|~I))+x[14]+2878612391&4294967295,C=k+(E<<15&4294967295|E>>>17),E=I+(k^(C|~y))+x[5]+4237533241&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~k))+x[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=k+(I^(y|~C))+x[3]+2399980690&4294967295,k=y+(E<<10&4294967295|E>>>22),E=C+(y^(k|~I))+x[10]+4293915773&4294967295,C=k+(E<<15&4294967295|E>>>17),E=I+(k^(C|~y))+x[1]+2240044497&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~k))+x[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=k+(I^(y|~C))+x[15]+4264355552&4294967295,k=y+(E<<10&4294967295|E>>>22),E=C+(y^(k|~I))+x[6]+2734768916&4294967295,C=k+(E<<15&4294967295|E>>>17),E=I+(k^(C|~y))+x[13]+1309151649&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~k))+x[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=k+(I^(y|~C))+x[11]+3174756917&4294967295,k=y+(E<<10&4294967295|E>>>22),E=C+(y^(k|~I))+x[2]+718787259&4294967295,C=k+(E<<15&4294967295|E>>>17),E=I+(k^(C|~y))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+k&4294967295}i.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var I=y-this.blockSize,x=this.B,C=this.h,k=0;k<y;){if(C==0)for(;k<=I;)r(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<y;)if(x[C++]=S.charCodeAt(k++),C==this.blockSize){r(this,x),C=0;break}}else for(;k<y;)if(x[C++]=S[k++],C==this.blockSize){r(this,x),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var I=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=I&255,I/=256;for(this.u(S),S=Array(16),y=I=0;4>y;++y)for(var x=0;32>x;x+=8)S[I++]=this.g[y]>>>x&255;return S};function s(S,y){var I=c;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=y(S)}function a(S,y){this.h=y;for(var I=[],x=!0,C=S.length-1;0<=C;C--){var k=S[C]|0;x&&k==y||(I[C]=k,x=!1)}this.g=I}var c={};function d(S){return-128<=S&&128>S?s(S,function(y){return new a([y|0],0>y?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return w;if(0>S)return $(f(-S));for(var y=[],I=1,x=0;S>=I;x++)y[x]=S/I|0,I*=4294967296;return new a(y,0)}function _(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return $(_(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(y,8)),x=w,C=0;C<S.length;C+=8){var k=Math.min(8,S.length-C),E=parseInt(S.substring(C,C+k),y);8>k?(k=f(Math.pow(y,k)),x=x.j(k).add(f(E))):(x=x.j(I),x=x.add(f(E)))}return x}var w=d(0),b=d(1),V=d(16777216);n=a.prototype,n.m=function(){if(K(this))return-$(this).m();for(var S=0,y=1,I=0;I<this.g.length;I++){var x=this.i(I);S+=(0<=x?x:4294967296+x)*y,y*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(U(this))return"0";if(K(this))return"-"+$(this).toString(S);for(var y=f(Math.pow(S,6)),I=this,x="";;){var C=ve(I,y).g;I=se(I,C.j(y));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=C,U(I))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function U(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function K(S){return S.h==-1}n.l=function(S){return S=se(this,S),K(S)?-1:U(S)?0:1};function $(S){for(var y=S.g.length,I=[],x=0;x<y;x++)I[x]=~S.g[x];return new a(I,~S.h).add(b)}n.abs=function(){return K(this)?$(this):this},n.add=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],x=0,C=0;C<=y;C++){var k=x+(this.i(C)&65535)+(S.i(C)&65535),E=(k>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);x=E>>>16,k&=65535,E&=65535,I[C]=E<<16|k}return new a(I,I[I.length-1]&-2147483648?-1:0)};function se(S,y){return S.add($(y))}n.j=function(S){if(U(this)||U(S))return w;if(K(this))return K(S)?$(this).j($(S)):$($(this).j(S));if(K(S))return $(this.j($(S)));if(0>this.l(V)&&0>S.l(V))return f(this.m()*S.m());for(var y=this.g.length+S.g.length,I=[],x=0;x<2*y;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<S.g.length;C++){var k=this.i(x)>>>16,E=this.i(x)&65535,mn=S.i(C)>>>16,$r=S.i(C)&65535;I[2*x+2*C]+=E*$r,te(I,2*x+2*C),I[2*x+2*C+1]+=k*$r,te(I,2*x+2*C+1),I[2*x+2*C+1]+=E*mn,te(I,2*x+2*C+1),I[2*x+2*C+2]+=k*mn,te(I,2*x+2*C+2)}for(x=0;x<y;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=y;x<2*y;x++)I[x]=0;return new a(I,0)};function te(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function oe(S,y){this.g=S,this.h=y}function ve(S,y){if(U(y))throw Error("division by zero");if(U(S))return new oe(w,w);if(K(S))return y=ve($(S),y),new oe($(y.g),$(y.h));if(K(y))return y=ve(S,$(y)),new oe($(y.g),y.h);if(30<S.g.length){if(K(S)||K(y))throw Error("slowDivide_ only works with positive integers.");for(var I=b,x=y;0>=x.l(S);)I=ot(I),x=ot(x);var C=_e(I,1),k=_e(x,1);for(x=_e(x,2),I=_e(I,2);!U(x);){var E=k.add(x);0>=E.l(S)&&(C=C.add(I),k=E),x=_e(x,1),I=_e(I,1)}return y=se(S,C.j(y)),new oe(C,y)}for(C=w;0<=S.l(y);){for(I=Math.max(1,Math.floor(S.m()/y.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=f(I),E=k.j(y);K(E)||0<E.l(S);)I-=x,k=f(I),E=k.j(y);U(k)&&(k=b),C=C.add(k),S=se(S,E)}return new oe(C,S)}n.A=function(S){return ve(this,S).h},n.and=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],x=0;x<y;x++)I[x]=this.i(x)&S.i(x);return new a(I,this.h&S.h)},n.or=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],x=0;x<y;x++)I[x]=this.i(x)|S.i(x);return new a(I,this.h|S.h)},n.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],x=0;x<y;x++)I[x]=this.i(x)^S.i(x);return new a(I,this.h^S.h)};function ot(S){for(var y=S.g.length+1,I=[],x=0;x<y;x++)I[x]=S.i(x)<<1|S.i(x-1)>>>31;return new a(I,S.h)}function _e(S,y){var I=y>>5;y%=32;for(var x=S.g.length-I,C=[],k=0;k<x;k++)C[k]=0<y?S.i(k+I)>>>y|S.i(k+I+1)<<32-y:S.i(k+I);return new a(C,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ku=n0.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=_,kn=n0.Integer=a}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var _a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pn={};var Qu,MI,lr,Yu,Ds,ya,Ju,Xu,Zu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,l,h){return o==Array.prototype||o==Object.prototype||(o[l]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof _a=="object"&&_a];for(var l=0;l<o.length;++l){var h=o[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(o,l){if(l)e:{var h=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var A=o[p];if(!(A in h))break e;h=h[A]}o=o[o.length-1],p=h[o],l=l(p),l!=p&&l!=null&&e(h,o,{configurable:!0,writable:!0,value:l})}}function s(o,l){o instanceof String&&(o+="");var h=0,p=!1,A={next:function(){if(!p&&h<o.length){var D=h++;return{value:l(D,o[D]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(o){return o||function(){return s(this,function(l,h){return h})}});var a=a||{},c=this||self;function d(o){var l=typeof o;return l=l!="object"?l:o?Array.isArray(o)?"array":l:"null",l=="array"||l=="object"&&typeof o.length=="number"}function f(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function _(o,l,h){return o.call.apply(o.bind,arguments)}function w(o,l,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),o.apply(l,A)}}return function(){return o.apply(l,arguments)}}function b(o,l,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,b.apply(null,arguments)}function V(o,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function U(o,l){function h(){}h.prototype=l.prototype,o.aa=l.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,A,D){for(var q=Array(arguments.length-2),we=2;we<arguments.length;we++)q[we-2]=arguments[we];return l.prototype[A].apply(p,q)}}function K(o){let l=o.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=o[p];return h}return[]}function $(o,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(d(p)){let A=o.length||0,D=p.length||0;o.length=A+D;for(let q=0;q<D;q++)o[A+q]=p[q]}else o.push(p)}}class se{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function te(o){return/^[\s\xa0]*$/.test(o)}function oe(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function ve(o){return ve[" "](o),o}ve[" "]=function(){};var ot=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function _e(o,l,h){for(let p in o)l.call(h,o[p],p,o)}function S(o,l){for(let h in o)l.call(void 0,o[h],h,o)}function y(o){let l={};for(let h in o)l[h]=o[h];return l}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(o,l){let h,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(h in p)o[h]=p[h];for(let D=0;D<I.length;D++)h=I[D],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function C(o){var l=1;o=o.split(":");let h=[];for(;0<l&&o.length;)h.push(o.shift()),l--;return o.length&&h.push(o.join(":")),h}function k(o){c.setTimeout(()=>{throw o},0)}function E(){var o=oc;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class mn{constructor(){this.h=this.g=null}add(l,h){let p=$r.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var $r=new se(()=>new Pv,o=>o.reset());class Pv{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let qr,Gr=!1,oc=new mn,Lm=()=>{let o=c.Promise.resolve(void 0);qr=()=>{o.then(Dv)}};var Dv=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){k(h)}var l=$r;l.j(o),100>l.h&&(l.h++,o.next=l.g,l.g=o)}Gr=!1};function Fn(){this.s=this.s,this.C=this.C}Fn.prototype.s=!1,Fn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var Rv=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return o}();function zr(o,l){if(Xe.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget){if(ot){e:{try{ve(l.nodeName);var A=!0;break e}catch{}A=!1}A||(l=null)}}else h=="mouseover"?l=o.fromElement:h=="mouseout"&&(l=o.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Vv[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&zr.aa.h.call(this)}}U(zr,Xe);var Vv={2:"touch",3:"pen",4:"mouse"};zr.prototype.h=function(){zr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Hr="closure_listenable_"+(1e6*Math.random()|0),Mv=0;function Nv(o,l,h,p,A){this.listener=o,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=A,this.key=++Mv,this.da=this.fa=!1}function fo(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function po(o){this.src=o,this.g={},this.h=0}po.prototype.add=function(o,l,h,p,A){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var q=lc(o,l,p,A);return-1<q?(l=o[q],h||(l.fa=!1)):(l=new Nv(l,this.src,D,!!p,A),l.fa=h,o.push(l)),l};function ac(o,l){var h=l.type;if(h in o.g){var p=o.g[h],A=Array.prototype.indexOf.call(p,l,void 0),D;(D=0<=A)&&Array.prototype.splice.call(p,A,1),D&&(fo(l),o.g[h].length==0&&(delete o.g[h],o.h--))}}function lc(o,l,h,p){for(var A=0;A<o.length;++A){var D=o[A];if(!D.da&&D.listener==l&&D.capture==!!h&&D.ha==p)return A}return-1}var cc="closure_lm_"+(1e6*Math.random()|0),uc={};function Fm(o,l,h,p,A){if(p&&p.once)return Bm(o,l,h,p,A);if(Array.isArray(l)){for(var D=0;D<l.length;D++)Fm(o,l[D],h,p,A);return null}return h=fc(h),o&&o[Hr]?o.K(l,h,f(p)?!!p.capture:!!p,A):Um(o,l,h,!1,p,A)}function Um(o,l,h,p,A,D){if(!l)throw Error("Invalid event type");var q=f(A)?!!A.capture:!!A,we=hc(o);if(we||(o[cc]=we=new po(o)),h=we.add(l,h,p,q,D),h.proxy)return h;if(p=Ov(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Rv||(A=q),A===void 0&&(A=!1),o.addEventListener(l.toString(),p,A);else if(o.attachEvent)o.attachEvent($m(l.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Ov(){function o(h){return l.call(o.src,o.listener,h)}let l=Lv;return o}function Bm(o,l,h,p,A){if(Array.isArray(l)){for(var D=0;D<l.length;D++)Bm(o,l[D],h,p,A);return null}return h=fc(h),o&&o[Hr]?o.L(l,h,f(p)?!!p.capture:!!p,A):Um(o,l,h,!0,p,A)}function jm(o,l,h,p,A){if(Array.isArray(l))for(var D=0;D<l.length;D++)jm(o,l[D],h,p,A);else p=f(p)?!!p.capture:!!p,h=fc(h),o&&o[Hr]?(o=o.i,l=String(l).toString(),l in o.g&&(D=o.g[l],h=lc(D,h,p,A),-1<h&&(fo(D[h]),Array.prototype.splice.call(D,h,1),D.length==0&&(delete o.g[l],o.h--)))):o&&(o=hc(o))&&(l=o.g[l.toString()],o=-1,l&&(o=lc(l,h,p,A)),(h=-1<o?l[o]:null)&&dc(h))}function dc(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[Hr])ac(l.i,o);else{var h=o.type,p=o.proxy;l.removeEventListener?l.removeEventListener(h,p,o.capture):l.detachEvent?l.detachEvent($m(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=hc(l))?(ac(h,o),h.h==0&&(h.src=null,l[cc]=null)):fo(o)}}}function $m(o){return o in uc?uc[o]:uc[o]="on"+o}function Lv(o,l){if(o.da)o=!0;else{l=new zr(l,this);var h=o.listener,p=o.ha||o.src;o.fa&&dc(o),o=h.call(p,l)}return o}function hc(o){return o=o[cc],o instanceof po?o:null}var mc="__closure_events_fn_"+(1e9*Math.random()>>>0);function fc(o){return typeof o=="function"?o:(o[mc]||(o[mc]=function(l){return o.handleEvent(l)}),o[mc])}function Ze(){Fn.call(this),this.i=new po(this),this.M=this,this.F=null}U(Ze,Fn),Ze.prototype[Hr]=!0,Ze.prototype.removeEventListener=function(o,l,h,p){jm(this,o,l,h,p)};function at(o,l){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=l.type||l,typeof l=="string")l=new Xe(l,o);else if(l instanceof Xe)l.target=l.target||o;else{var A=l;l=new Xe(p,o),x(l,A)}if(A=!0,h)for(var D=h.length-1;0<=D;D--){var q=l.g=h[D];A=go(q,p,!0,l)&&A}if(q=l.g=o,A=go(q,p,!0,l)&&A,A=go(q,p,!1,l)&&A,h)for(D=0;D<h.length;D++)q=l.g=h[D],A=go(q,p,!1,l)&&A}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var o=this.i,l;for(l in o.g){for(var h=o.g[l],p=0;p<h.length;p++)fo(h[p]);delete o.g[l],o.h--}}this.F=null},Ze.prototype.K=function(o,l,h,p){return this.i.add(String(o),l,!1,h,p)},Ze.prototype.L=function(o,l,h,p){return this.i.add(String(o),l,!0,h,p)};function go(o,l,h,p){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();for(var A=!0,D=0;D<l.length;++D){var q=l[D];if(q&&!q.da&&q.capture==h){var we=q.listener,Qe=q.ha||q.src;q.fa&&ac(o.i,q),A=we.call(Qe,p)!==!1&&A}}return A&&!p.defaultPrevented}function qm(o,l,h){if(typeof o=="function")h&&(o=b(o,h));else if(o&&typeof o.handleEvent=="function")o=b(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(o,l||0)}function Gm(o){o.g=qm(()=>{o.g=null,o.i&&(o.i=!1,Gm(o))},o.l);let l=o.h;o.h=null,o.m.apply(null,l)}class Fv extends Fn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Gm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(o){Fn.call(this),this.h=o,this.g={}}U(Wr,Fn);var zm=[];function Hm(o){_e(o.g,function(l,h){this.g.hasOwnProperty(h)&&dc(l)},o),o.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),Hm(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pc=c.JSON.stringify,Uv=c.JSON.parse,Bv=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function gc(){}gc.prototype.h=null;function Wm(o){return o.h||(o.h=o.i())}function Km(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _c(){Xe.call(this,"d")}U(_c,Xe);function yc(){Xe.call(this,"c")}U(yc,Xe);var mi={},Qm=null;function _o(){return Qm=Qm||new Ze}mi.La="serverreachability";function Ym(o){Xe.call(this,mi.La,o)}U(Ym,Xe);function Qr(o){let l=_o();at(l,new Ym(l))}mi.STAT_EVENT="statevent";function Jm(o,l){Xe.call(this,mi.STAT_EVENT,o),this.stat=l}U(Jm,Xe);function lt(o){let l=_o();at(l,new Jm(l,o))}mi.Ma="timingevent";function Xm(o,l){Xe.call(this,mi.Ma,o),this.size=l}U(Xm,Xe);function Yr(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},l)}function Jr(){this.g=!0}Jr.prototype.xa=function(){this.g=!1};function jv(o,l,h,p,A,D){o.info(function(){if(o.g)if(D)for(var q="",we=D.split("&"),Qe=0;Qe<we.length;Qe++){var pe=we[Qe].split("=");if(1<pe.length){var et=pe[0];pe=pe[1];var tt=et.split("_");q=2<=tt.length&&tt[1]=="type"?q+(et+"="+pe+"&"):q+(et+"=redacted&")}}else q=null;else q=D;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+l+`
`+h+`
`+q})}function $v(o,l,h,p,A,D,q){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+l+`
`+h+`
`+D+" "+q})}function Hi(o,l,h,p){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+Gv(o,h)+(p?" "+p:"")})}function qv(o,l){o.info(function(){return"TIMEOUT: "+l})}Jr.prototype.info=function(){};function Gv(o,l){if(!o.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return pc(h)}catch{return l}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vc;function vo(){}U(vo,gc),vo.prototype.g=function(){return new XMLHttpRequest},vo.prototype.i=function(){return{}},vc=new vo;function Un(o,l,h,p){this.j=o,this.i=l,this.l=h,this.R=p||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}var tf={},wc={};function bc(o,l,h){o.L=1,o.v=Io(fn(l)),o.m=h,o.P=!0,nf(o,null)}function nf(o,l){o.F=Date.now(),wo(o),o.A=fn(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),_f(h.i,"t",p),o.C=0,h=o.j.J,o.h=new ef,o.g=Nf(o.j,h?l:null,!o.m),0<o.O&&(o.M=new Fv(b(o.Y,o,o.g),o.O)),l=o.U,h=o.g,p=o.ca;var A="readystatechange";Array.isArray(A)||(A&&(zm[0]=A.toString()),A=zm);for(var D=0;D<A.length;D++){var q=Fm(h,A[D],p||l.handleEvent,!1,l.h||l);if(!q)break;l.g[q.key]=q}l=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,l)):(o.u="GET",o.g.ea(o.A,o.u,null,l)),Qr(),jv(o.i,o.u,o.A,o.l,o.R,o.m)}Un.prototype.ca=function(o){o=o.target;let l=this.M;l&&pn(o)==3?l.j():this.Y(o)},Un.prototype.Y=function(o){try{if(o==this.g)e:{let tt=pn(this.g);var l=this.g.Ba();let Qi=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Tf(this.g)))){this.J||tt!=4||l==7||(l==8||0>=Qi?Qr(3):Qr(2)),Ec(this);var h=this.g.Z();this.X=h;t:if(rf(this)){var p=Tf(this.g);o="";var A=p.length,D=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),Xr(this);var q="";break t}this.h.i=new c.TextDecoder}for(l=0;l<A;l++)this.h.h=!0,o+=this.h.i.decode(p[l],{stream:!(D&&l==A-1)});p.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,$v(this.i,this.u,this.A,this.l,this.R,tt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Qe=this.g;if((we=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(we)){var pe=we;break t}}pe=null}if(h=pe)Hi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ic(this,h);else{this.o=!1,this.s=3,lt(12),fi(this),Xr(this);break e}}if(this.P){h=!0;let Ft;for(;!this.J&&this.C<q.length;)if(Ft=zv(this,q),Ft==wc){tt==4&&(this.s=4,lt(14),h=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==tf){this.s=4,lt(15),Hi(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else Hi(this.i,this.l,Ft,null),Ic(this,Ft);if(rf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||q.length!=0||this.h.h||(this.s=1,lt(16),h=!1),this.o=this.o&&h,!h)Hi(this.i,this.l,q,"[Invalid Chunked Response]"),fi(this),Xr(this);else if(0<q.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),kc(et),et.M=!0,lt(11))}}else Hi(this.i,this.l,q,null),Ic(this,q);tt==4&&fi(this),this.o&&!this.J&&(tt==4?Df(this.j,this):(this.o=!1,wo(this)))}else l1(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),fi(this),Xr(this)}}}catch{}finally{}};function rf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function zv(o,l){var h=o.C,p=l.indexOf(`
`,h);return p==-1?wc:(h=Number(l.substring(h,p)),isNaN(h)?tf:(p+=1,p+h>l.length?wc:(l=l.slice(p,p+h),o.C=p+h,l)))}Un.prototype.cancel=function(){this.J=!0,fi(this)};function wo(o){o.S=Date.now()+o.I,sf(o,o.I)}function sf(o,l){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Yr(b(o.ba,o),l)}function Ec(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Un.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(qv(this.i,this.A),this.L!=2&&(Qr(),lt(17)),fi(this),this.s=2,Xr(this)):sf(this,this.S-o)};function Xr(o){o.j.G==0||o.J||Df(o.j,o)}function fi(o){Ec(o);var l=o.M;l&&typeof l.ma=="function"&&l.ma(),o.M=null,Hm(o.U),o.g&&(l=o.g,o.g=null,l.abort(),l.ma())}function Ic(o,l){try{var h=o.j;if(h.G!=0&&(h.g==o||Tc(h.h,o))){if(!o.K&&Tc(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ao(h),So(h);else break e;Ac(h),lt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Yr(b(h.Za,h),6e3));if(1>=lf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else gi(h,11)}else if((o.K||h.g==o)&&Ao(h),!te(l))for(A=h.Da.g.parse(l),l=0;l<A.length;l++){let pe=A[l];if(h.T=pe[0],pe=pe[1],h.G==2)if(pe[0]=="c"){h.K=pe[1],h.ia=pe[2];let et=pe[3];et!=null&&(h.la=et,h.j.info("VER="+h.la));let tt=pe[4];tt!=null&&(h.Aa=tt,h.j.info("SVER="+h.Aa));let Qi=pe[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(p=1.5*Qi,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Ft=o.g;if(Ft){let Po=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var D=p.h;D.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(xc(D,D.h),D.h=null))}if(p.D){let Pc=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Pc&&(p.ya=Pc,Ie(p.I,p.D,Pc))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var q=o;if(p.qa=Mf(p,p.J?p.ia:null,p.W),q.K){cf(p.h,q);var we=q,Qe=p.L;Qe&&(we.I=Qe),we.B&&(Ec(we),wo(we)),p.g=q}else kf(p);0<h.i.length&&Co(h)}else pe[0]!="stop"&&pe[0]!="close"||gi(h,7);else h.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?gi(h,7):Cc(h):pe[0]!="noop"&&h.l&&h.l.ta(pe),h.v=0)}}Qr(4)}catch{}}var Hv=class{constructor(o,l){this.g=o,this.map=l}};function of(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function af(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function lf(o){return o.h?1:o.g?o.g.size:0}function Tc(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function xc(o,l){o.g?o.g.add(l):o.h=l}function cf(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}of.prototype.cancel=function(){if(this.i=uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function uf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let l=o.i;for(let h of o.g.values())l=l.concat(h.D);return l}return K(o.i)}function Wv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(d(o)){for(var l=[],h=o.length,p=0;p<h;p++)l.push(o[p]);return l}l=[],h=0;for(p in o)l[h++]=o[p];return l}function Kv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(d(o)||typeof o=="string"){var l=[];o=o.length;for(var h=0;h<o;h++)l.push(h);return l}l=[],h=0;for(let p in o)l[h++]=p;return l}}}function df(o,l){if(o.forEach&&typeof o.forEach=="function")o.forEach(l,void 0);else if(d(o)||typeof o=="string")Array.prototype.forEach.call(o,l,void 0);else for(var h=Kv(o),p=Wv(o),A=p.length,D=0;D<A;D++)l.call(void 0,p[D],h&&h[D],o)}var hf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qv(o,l){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),A=null;if(0<=p){var D=o[h].substring(0,p);A=o[h].substring(p+1)}else D=o[h];l(D,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function pi(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof pi){this.h=o.h,bo(this,o.j),this.o=o.o,this.g=o.g,Eo(this,o.s),this.l=o.l;var l=o.i,h=new ts;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),mf(this,h),this.m=o.m}else o&&(l=String(o).match(hf))?(this.h=!1,bo(this,l[1]||"",!0),this.o=Zr(l[2]||""),this.g=Zr(l[3]||"",!0),Eo(this,l[4]),this.l=Zr(l[5]||"",!0),mf(this,l[6]||"",!0),this.m=Zr(l[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}pi.prototype.toString=function(){var o=[],l=this.j;l&&o.push(es(l,ff,!0),":");var h=this.g;return(h||l=="file")&&(o.push("//"),(l=this.o)&&o.push(es(l,ff,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(es(h,h.charAt(0)=="/"?Xv:Jv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",es(h,e1)),o.join("")};function fn(o){return new pi(o)}function bo(o,l,h){o.j=h?Zr(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function Eo(o,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);o.s=l}else o.s=null}function mf(o,l,h){l instanceof ts?(o.i=l,t1(o.i,o.h)):(h||(l=es(l,Zv)),o.i=new ts(l,o.h))}function Ie(o,l,h){o.i.set(l,h)}function Io(o){return Ie(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Zr(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function es(o,l,h){return typeof o=="string"?(o=encodeURI(o).replace(l,Yv),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Yv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ff=/[#\/\?@]/g,Jv=/[#\?:]/g,Xv=/[#\?]/g,Zv=/[#\?@]/g,e1=/#/g;function ts(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function Bn(o){o.g||(o.g=new Map,o.h=0,o.i&&Qv(o.i,function(l,h){o.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ts.prototype,n.add=function(o,l){Bn(this),this.i=null,o=Wi(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(l),this.h+=1,this};function pf(o,l){Bn(o),l=Wi(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function gf(o,l){return Bn(o),l=Wi(o,l),o.g.has(l)}n.forEach=function(o,l){Bn(this),this.g.forEach(function(h,p){h.forEach(function(A){o.call(l,A,p,this)},this)},this)},n.na=function(){Bn(this);let o=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let A=o[p];for(let D=0;D<A.length;D++)h.push(l[p])}return h},n.V=function(o){Bn(this);let l=[];if(typeof o=="string")gf(this,o)&&(l=l.concat(this.g.get(Wi(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)l=l.concat(o[h])}return l},n.set=function(o,l){return Bn(this),this.i=null,o=Wi(this,o),gf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=this.V(o),0<o.length?String(o[0]):l):l};function _f(o,l,h){pf(o,l),0<h.length&&(o.i=null,o.g.set(Wi(o,l),K(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let D=encodeURIComponent(String(p)),q=this.V(p);for(p=0;p<q.length;p++){var A=D;q[p]!==""&&(A+="="+encodeURIComponent(String(q[p]))),o.push(A)}}return this.i=o.join("&")};function Wi(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function t1(o,l){l&&!o.j&&(Bn(o),o.i=null,o.g.forEach(function(h,p){var A=p.toLowerCase();p!=A&&(pf(this,p),_f(this,A,h))},o)),o.j=l}function n1(o,l){let h=new Jr;if(c.Image){let p=new Image;p.onload=V(jn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=V(jn,h,"TestLoadImage: error",!1,l,p),p.onabort=V(jn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=V(jn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else l(!1)}function i1(o,l){let h=new Jr,p=new AbortController,A=setTimeout(()=>{p.abort(),jn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:p.signal}).then(D=>{clearTimeout(A),D.ok?jn(h,"TestPingServer: ok",!0,l):jn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),jn(h,"TestPingServer: error",!1,l)})}function jn(o,l,h,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(h)}catch{}}function r1(){this.g=new Bv}function s1(o,l,h){let p=h||"";try{df(o,function(A,D){let q=A;f(A)&&(q=pc(A)),l.push(p+D+"="+encodeURIComponent(q))})}catch(A){throw l.push(p+"type="+encodeURIComponent("_badmap")),A}}function ns(o){this.l=o.Ub||null,this.j=o.eb||!1}U(ns,gc),ns.prototype.g=function(){return new To(this.l,this.j)},ns.prototype.i=function(o){return function(){return o}}({});function To(o,l){Ze.call(this),this.D=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(To,Ze),n=To.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=l,this.readyState=1,rs(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(l.body=o),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function yf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?is(this):rs(this),this.readyState==3&&yf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,is(this))},n.Qa=function(o){this.g&&(this.response=o,is(this))},n.ga=function(){this.g&&is(this)};function is(o){o.readyState=4,o.l=null,o.j=null,o.v=null,rs(o)}n.setRequestHeader=function(o,l){this.u.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=l.next();return o.join(`\r
`)};function rs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function vf(o){let l="";return _e(o,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Sc(o,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=vf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Ie(o,l,h))}function Pe(o){Ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Pe,Ze);var o1=/^https?$/i,a1=["POST","PUT"];n=Pe.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vc.g(),this.v=this.o?Wm(this.o):Wm(vc),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(D){wf(this,D);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)h.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let D of p.keys())h.set(D,p.get(D));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(D=>D.toLowerCase()=="content-type"),A=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(a1,l,void 0))||p||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,q]of h)this.g.setRequestHeader(D,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{If(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){wf(this,D)}};function wf(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.m=5,bf(o),xo(o)}function bf(o){o.A||(o.A=!0,at(o,"complete"),at(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,at(this,"complete"),at(this,"abort"),xo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ef(this):this.bb())},n.bb=function(){Ef(this)};function Ef(o){if(o.h&&typeof a<"u"&&(!o.v[1]||pn(o)!=4||o.Z()!=2)){if(o.u&&pn(o)==4)qm(o.Ea,0,o);else if(at(o,"readystatechange"),pn(o)==4){o.h=!1;try{let q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=q===0){var A=String(o.D).match(hf)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!o1.test(A?A.toLowerCase():"")}h=p}if(h)at(o,"complete"),at(o,"success");else{o.m=6;try{var D=2<pn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",bf(o)}}finally{xo(o)}}}}function xo(o,l){if(o.g){If(o);let h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,l||at(o,"ready");try{h.onreadystatechange=p}catch{}}}function If(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function pn(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),Uv(l)}};function Tf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function l1(o){let l={};o=(o.g&&2<=pn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(te(o[p]))continue;var h=C(o[p]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let D=l[A]||[];l[A]=D,D.push(h)}S(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(o,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||l}function xf(o){this.Aa=0,this.i=[],this.j=new Jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ss("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ss("baseRetryDelayMs",5e3,o),this.cb=ss("retryDelaySeedMs",1e4,o),this.Wa=ss("forwardChannelMaxRetries",2,o),this.wa=ss("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new of(o&&o.concurrentRequestLimit),this.Da=new r1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xf.prototype,n.la=8,n.G=1,n.connect=function(o,l,h,p){lt(0),this.W=o,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Mf(this,null,this.W),Co(this)};function Cc(o){if(Sf(o),o.G==3){var l=o.U++,h=fn(o.I);if(Ie(h,"SID",o.K),Ie(h,"RID",l),Ie(h,"TYPE","terminate"),os(o,h),l=new Un(o,o.j,l),l.L=2,l.v=Io(fn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Nf(l.j,null),l.g.ea(l.v)),l.F=Date.now(),wo(l)}Vf(o)}function So(o){o.g&&(kc(o),o.g.cancel(),o.g=null)}function Sf(o){So(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ao(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Co(o){if(!af(o.h)&&!o.s){o.s=!0;var l=o.Ga;qr||Lm(),Gr||(qr(),Gr=!0),oc.add(l,o),o.B=0}}function c1(o,l){return lf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=l.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Yr(b(o.Ga,o,l),Rf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let A=new Un(this,this.j,o),D=this.o;if(this.S&&(D?(D=y(D),x(D,this.S)):D=this.S),this.m!==null||this.O||(A.H=D,D=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Af(this,A,l),h=fn(this.I),Ie(h,"RID",o),Ie(h,"CVER",22),this.D&&Ie(h,"X-HTTP-Session-Id",this.D),os(this,h),D&&(this.O?l="headers="+encodeURIComponent(String(vf(D)))+"&"+l:this.m&&Sc(h,this.m,D)),xc(this.h,A),this.Ua&&Ie(h,"TYPE","init"),this.P?(Ie(h,"$req",l),Ie(h,"SID","null"),A.T=!0,bc(A,h,null)):bc(A,h,l),this.G=2}}else this.G==3&&(o?Cf(this,o):this.i.length==0||af(this.h)||Cf(this))};function Cf(o,l){var h;l?h=l.l:h=o.U++;let p=fn(o.I);Ie(p,"SID",o.K),Ie(p,"RID",h),Ie(p,"AID",o.T),os(o,p),o.m&&o.o&&Sc(p,o.m,o.o),h=new Un(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),l&&(o.i=l.D.concat(o.i)),l=Af(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),xc(o.h,h),bc(h,p,l)}function os(o,l){o.H&&_e(o.H,function(h,p){Ie(l,p,h)}),o.l&&df({},function(h,p){Ie(l,p,h)})}function Af(o,l,h){h=Math.min(o.i.length,h);var p=o.l?b(o.l.Na,o.l,o):null;e:{var A=o.i;let D=-1;for(;;){let q=["count="+h];D==-1?0<h?(D=A[0].g,q.push("ofs="+D)):D=0:q.push("ofs="+D);let we=!0;for(let Qe=0;Qe<h;Qe++){let pe=A[Qe].g,et=A[Qe].map;if(pe-=D,0>pe)D=Math.max(0,A[Qe].g-100),we=!1;else try{s1(et,q,"req"+pe+"_")}catch{p&&p(et)}}if(we){p=q.join("&");break e}}}return o=o.i.splice(0,h),l.D=o,p}function kf(o){if(!o.g&&!o.u){o.Y=1;var l=o.Fa;qr||Lm(),Gr||(qr(),Gr=!0),oc.add(l,o),o.v=0}}function Ac(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Yr(b(o.Fa,o),Rf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Pf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Yr(b(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),So(this),Pf(this))};function kc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Pf(o){o.g=new Un(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var l=fn(o.qa);Ie(l,"RID","rpc"),Ie(l,"SID",o.K),Ie(l,"AID",o.T),Ie(l,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ie(l,"TO",o.ja),Ie(l,"TYPE","xmlhttp"),os(o,l),o.m&&o.o&&Sc(l,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Io(fn(l)),h.m=null,h.P=!0,nf(h,o)}n.Za=function(){this.C!=null&&(this.C=null,So(this),Ac(this),lt(19))};function Ao(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Df(o,l){var h=null;if(o.g==l){Ao(o),kc(o),o.g=null;var p=2}else if(Tc(o.h,l))h=l.D,cf(o.h,l),p=1;else return;if(o.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var A=o.B;p=_o(),at(p,new Xm(p,h)),Co(o)}else kf(o);else if(A=l.s,A==3||A==0&&0<l.X||!(p==1&&c1(o,l)||p==2&&Ac(o)))switch(h&&0<h.length&&(l=o.h,l.i=l.i.concat(h)),A){case 1:gi(o,5);break;case 4:gi(o,10);break;case 3:gi(o,6);break;default:gi(o,2)}}}function Rf(o,l){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*l}function gi(o,l){if(o.j.info("Error code "+l),l==2){var h=b(o.fb,o),p=o.Xa;let A=!p;p=new pi(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bo(p,"https"),Io(p),A?n1(p.toString(),h):i1(p.toString(),h)}else lt(2);o.G=0,o.l&&o.l.sa(l),Vf(o),Sf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Vf(o){if(o.G=0,o.ka=[],o.l){let l=uf(o.h);(l.length!=0||o.i.length!=0)&&($(o.ka,l),$(o.ka,o.i),o.h.i.length=0,K(o.i),o.i.length=0),o.l.ra()}}function Mf(o,l,h){var p=h instanceof pi?fn(h):new pi(h);if(p.g!="")l&&(p.g=l+"."+p.g),Eo(p,p.s);else{var A=c.location;p=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;var D=new pi(null);p&&bo(D,p),l&&(D.g=l),A&&Eo(D,A),h&&(D.l=h),p=D}return h=o.D,l=o.ya,h&&l&&Ie(p,h,l),Ie(p,"VER",o.la),os(o,p),p}function Nf(o,l,h){if(l&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Ca&&!o.pa?new Pe(new ns({eb:h})):new Pe(o.pa),l.Ha(o.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}n=Of.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ko(){}ko.prototype.g=function(o,l){return new yt(o,l)};function yt(o,l){Ze.call(this),this.g=new xf(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(o?o["X-WebChannel-Client-Profile"]=l.va:o={"X-WebChannel-Client-Profile":l.va}),this.g.S=o,(o=l&&l.Sb)&&!te(o)&&(this.g.m=o),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!te(l)&&(this.g.D=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new Ki(this)}U(yt,Ze),yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){Cc(this.g)},yt.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=pc(o),o=h);l.i.push(new Hv(l.Ya++,o)),l.G==3&&Co(l)},yt.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,yt.aa.N.call(this)};function Lf(o){_c.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(let h in l){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}U(Lf,_c);function Ff(){yc.call(this),this.status=1}U(Ff,yc);function Ki(o){this.g=o}U(Ki,Of),Ki.prototype.ua=function(){at(this.g,"a")},Ki.prototype.ta=function(o){at(this.g,new Lf(o))},Ki.prototype.sa=function(o){at(this.g,new Ff)},Ki.prototype.ra=function(){at(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,Zu=Pn.createWebChannelTransport=function(){return new ko},Xu=Pn.getStatEventTarget=function(){return _o()},Ju=Pn.Event=mi,ya=Pn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,Ds=Pn.ErrorCode=yo,Zm.COMPLETE="complete",Yu=Pn.EventType=Zm,Km.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,lr=Pn.WebChannel=Km,MI=Pn.FetchXmlHttpFactory=ns,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Qu=Pn.XhrIo=Pe}).apply(typeof _a<"u"?_a:typeof self<"u"?self:typeof window<"u"?window:{});var i0="@firebase/firestore",r0="4.7.17";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Ar="11.9.0";var Ri=new en("@firebase/firestore");function cr(){return Ri.logLevel}function Q(n,...e){if(Ri.logLevel<=ce.DEBUG){let t=e.map(zh);Ri.debug(`Firestore (${Ar}): ${n}`,...t)}}function Dn(n,...e){if(Ri.logLevel<=ce.ERROR){let t=e.map(zh);Ri.error(`Firestore (${Ar}): ${n}`,...t)}}function gr(n,...e){if(Ri.logLevel<=ce.WARN){let t=e.map(zh);Ri.warn(`Firestore (${Ar}): ${n}`,...t)}}function zh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Y0(n,i,t)}function Y0(n,e,t){let i=`FIRESTORE (${Ar}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Dn(i),new Error(i)}function ge(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||Y0(e,r,i)}function ne(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ge.UNAUTHENTICATED))}shutdown(){}},od=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ad=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let i=this.i,r=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve(),s=new zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zt,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let d=s;e.enqueueRetryable(()=>v(this,null,function*(){yield d.promise,yield r(this.currentUser)}))},c=d=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?c(d):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string",31837,{l:i}),new xa(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ge(e)}},ld=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},cd=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ld(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sa=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ud=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);let i=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sa(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Sa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function NI(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function J0(){return new TextEncoder}var Ca=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=NI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function ae(n,e){return n<e?-1:n>e?1:0}function dd(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return ae(i,r);{let s=J0(),a=OI(s.encode(s0(n,t)),s.encode(s0(e,t)));return a!==0?a:ae(i,r)}}t+=i>65535?2:1}return ae(n.length,e.length)}function s0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function OI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function _r(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var o0=-62135596800,a0=1e6,Ne=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*a0);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o0)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-o0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ne(0,0))}static max(){return new n(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var l0="__name__",Aa=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Z(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Z(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return ae(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):dd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kn.fromString(e.substring(4,e.length-2))}},ke=class n extends Aa{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},LI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tt=class n extends Aa{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return LI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l0}static keyField(){return new n([l0])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(s(),r++)}if(s(),a)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};var Ls=-1,hd=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};hd.UNKNOWN_ID=-1;function FI(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=re.fromTimestamp(i===1e9?new Ne(t+1,0):new Ne(t,i));return new Vi(r,J.empty(),e)}function UI(n){return new Vi(n.readTime,n.key,Ls)}var Vi=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(re.min(),J.empty(),Ls)}static max(){return new n(re.max(),J.empty(),Ls)}};function BI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var jI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",md=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kr(n){return v(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==jI)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++s,a&&s===r&&t()},d=>i(d))}),a=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,a=new Array(s),c=0;for(let d=0;d<s;d++){let f=d;t(e[f]).next(_=>{a[f]=_,++c,c===s&&i(a)},_=>r(_))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function $I(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pr(n){return n.name==="IndexedDbTransactionError"}var Hh=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Wh=-1;function cl(n){return n==null}function Fs(n){return n===0&&1/n==-1/0}function qI(n){return typeof n=="number"&&Number.isInteger(n)&&!Fs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var X0="";function GI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=c0(e)),e=zI(n.get(t),e);return c0(e)}function zI(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case X0:t+="";break;default:t+=s}}return t}function c0(n){return n+X0+""}var HI="remoteDocuments",Z0="owner";var e_="mutationQueues";var t_="mutations";var n_="documentMutations",WI="remoteDocumentsV14";var i_="remoteDocumentGlobal";var r_="targets";var s_="targetDocuments";var o_="targetGlobal",a_="collectionParents";var l_="clientMetadata";var c_="bundles";var u_="namedQueries";var KI="indexConfiguration";var QI="indexState";var YI="indexEntries";var d_="documentOverlays";var JI="globals";var XI=[e_,t_,n_,HI,r_,Z0,o_,s_,l_,i_,a_,c_,u_],$k=[...XI,d_],ZI=[e_,t_,n_,WI,r_,Z0,o_,s_,l_,i_,a_,c_,u_,d_],eT=ZI,tT=[...eT,KI,QI,YI];var qk=[...tT,JI];function u0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function li(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function h_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Me=class n{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mr(this.root,e,this.comparator,!1)}getReverseIterator(){return new mr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mr(this.root,e,this.comparator,!0)}},mr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}};sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ze=class n{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ka(this.data.getIterator())}getIteratorFrom(e){return new ka(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ka=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mt=class n{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ze(Tt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _r(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Pa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pa("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var nT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(n){if(ge(!!n,39018),typeof n=="string"){let e=0,t=nT.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vn(n){return typeof n=="string"?it.fromBase64String(n):it.fromUint8Array(n)}var m_="server_timestamp",f_="__type__",p_="__previous_value__",g_="__local_write_time__";function Kh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[f_])===null||t===void 0?void 0:t.stringValue)===m_}function ul(n){let e=n.mapValue.fields[p_];return Kh(e)?ul(e):e}function Us(n){let e=Rn(n.mapValue.fields[g_].timestampValue);return new Ne(e.seconds,e.nanos)}var fd=class{constructor(e,t,i,r,s,a,c,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=_}},Da="(default)",Ra=class n{constructor(e,t){this.projectId=e,this.database=t||Da}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Da}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Qh="__type__",__="__max__",va={mapValue:{fields:{__type__:{stringValue:__}}}},Yh="__vector__",yr="value";function ei(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kh(n)?4:v_(n)?9007199254740991:y_(n)?10:11:Z(28295,{value:n})}function ln(n,e){if(n===e)return!0;let t=ei(n);if(t!==ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Us(n).isEqual(Us(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let a=Rn(r.timestampValue),c=Rn(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Vn(r.bytesValue).isEqual(Vn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Se(r.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(r.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Se(r.integerValue)===Se(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let a=Se(r.doubleValue),c=Se(s.doubleValue);return a===c?Fs(a)===Fs(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return _r(n.arrayValue.values||[],e.arrayValue.values||[],ln);case 10:case 11:return function(r,s){let a=r.mapValue.fields||{},c=s.mapValue.fields||{};if(u0(a)!==u0(c))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!ln(a[d],c[d])))return!1;return!0}(n,e);default:return Z(52216,{left:n})}}function Bs(n,e){return(n.values||[]).find(t=>ln(t,e))!==void 0}function vr(n,e){if(n===e)return 0;let t=ei(n),i=ei(e);if(t!==i)return ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=Se(s.integerValue||s.doubleValue),d=Se(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return d0(n.timestampValue,e.timestampValue);case 4:return d0(Us(n),Us(e));case 5:return dd(n.stringValue,e.stringValue);case 6:return function(s,a){let c=Vn(s),d=Vn(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){let _=ae(c[f],d[f]);if(_!==0)return _}return ae(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=ae(Se(s.latitude),Se(a.latitude));return c!==0?c:ae(Se(s.longitude),Se(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return h0(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,d,f,_;let w=s.fields||{},b=a.fields||{},V=(c=w[yr])===null||c===void 0?void 0:c.arrayValue,U=(d=b[yr])===null||d===void 0?void 0:d.arrayValue,K=ae(((f=V?.values)===null||f===void 0?void 0:f.length)||0,((_=U?.values)===null||_===void 0?void 0:_.length)||0);return K!==0?K:h0(V,U)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===va.mapValue&&a===va.mapValue)return 0;if(s===va.mapValue)return 1;if(a===va.mapValue)return-1;let c=s.fields||{},d=Object.keys(c),f=a.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let w=0;w<d.length&&w<_.length;++w){let b=dd(d[w],_[w]);if(b!==0)return b;let V=vr(c[d[w]],f[_[w]]);if(V!==0)return V}return ae(d.length,_.length)}(n.mapValue,e.mapValue);default:throw Z(23264,{Pe:t})}}function d0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Rn(n),i=Rn(e),r=ae(t.seconds,i.seconds);return r!==0?r:ae(t.nanos,i.nanos)}function h0(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=vr(t[r],i[r]);if(s)return s}return ae(t.length,i.length)}function wr(n){return pd(n)}function pd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Rn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=pd(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let a of i)s?s=!1:r+=",",r+=`${a}:${pd(t.fields[a])}`;return r+"}"}(n.mapValue):Z(61005,{value:n})}function Ea(n){switch(ei(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ul(n);return e?16+Ea(e):16;case 5:return 2*n.stringValue.length;case 6:return Vn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Ea(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return li(i.fields,(s,a)=>{r+=s.length+Ea(a)}),r}(n.mapValue);default:throw Z(13486,{value:n})}}function m0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gd(n){return!!n&&"integerValue"in n}function Jh(n){return!!n&&"arrayValue"in n}function f0(n){return!!n&&"nullValue"in n}function p0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ia(n){return!!n&&"mapValue"in n}function y_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Qh])===null||t===void 0?void 0:t.stringValue)===Yh}function Vs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return li(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Vs(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===__}var zk={mapValue:{fields:{[Qh]:{stringValue:Yh},[yr]:{arrayValue:{}}}}};var It=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ia(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(t)}setAll(e){let t=Tt.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let d=this.getFieldsMap(t);this.applyChanges(d,i,r),i={},r=[],t=c.popLast()}a?i[c.lastSegment()]=Vs(a):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ln(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ia(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){li(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Vs(this.value))}};function w_(n){let e=[];return li(n.fields,(t,i)=>{let r=new Tt([t]);if(Ia(i)){let s=w_(i.mapValue).fields;if(s.length===0)e.push(r);else for(let a of s)e.push(r.child(a))}else e.push(r)}),new Mt(e)}var Ht=class n{constructor(e,t,i,r,s,a,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),It.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,re.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),It.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),It.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var br=class{constructor(e,t){this.position=e,this.inclusive=t}};function g0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],a=n.position[r];if(s.field.isKeyField()?i=J.comparator(J.fromName(a.referenceValue),t.key):i=vr(a,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function _0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ln(n.position[t],e.position[t]))return!1;return!0}var Mi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Va=class{},Ue=class n extends Va{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yd(e,t,i):t==="array-contains"?new bd(e,i):t==="in"?new Ed(e,i):t==="not-in"?new Id(e,i):t==="array-contains-any"?new Td(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vd(e,i):new wd(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vr(t,this.value)):t!==null&&ei(this.value)===ei(t)&&this.matchesComparison(vr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wt=class n extends Va{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return b_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function b_(n){return n.op==="and"}function E_(n){return rT(n)&&b_(n)}function rT(n){for(let e of n.filters)if(e instanceof Wt)return!1;return!0}function _d(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+wr(n.value);if(E_(n))return n.filters.map(e=>_d(e)).join(",");{let e=n.filters.map(t=>_d(t)).join(",");return`${n.op}(${e})`}}function I_(n,e){return n instanceof Ue?function(i,r){return r instanceof Ue&&i.op===r.op&&i.field.isEqual(r.field)&&ln(i.value,r.value)}(n,e):n instanceof Wt?function(i,r){return r instanceof Wt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,c)=>s&&I_(a,r.filters[c]),!0):!1}(n,e):void Z(19439)}function T_(n){return n instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${wr(t.value)}`}(n):n instanceof Wt?function(t){return t.op.toString()+" {"+t.getFilters().map(T_).join(" ,")+"}"}(n):"Filter"}var yd=class extends Ue{constructor(e,t,i){super(e,t,i),this.key=J.fromName(i.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},vd=class extends Ue{constructor(e,t){super(e,"in",t),this.keys=x_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wd=class extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=x_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function x_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>J.fromName(i.referenceValue))}var bd=class extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jh(t)&&Bs(t.arrayValue,this.value)}},Ed=class extends Ue{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bs(this.value.arrayValue,t)}},Id=class extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bs(this.value.arrayValue,t)}},Td=class extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Bs(this.value.arrayValue,i))}};var xd=class{constructor(e,t=null,i=[],r=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=c,this.Ie=null}};function y0(n,e=null,t=[],i=[],r=null,s=null,a=null){return new xd(n,e,t,i,r,s,a)}function Xh(n){let e=ne(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>_d(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>wr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>wr(i)).join(",")),e.Ie=t}return e.Ie}function Zh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!I_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_0(n.startAt,e.startAt)&&_0(n.endAt,e.endAt)}function Sd(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ti=class{constructor(e,t=null,i=[],r=[],s=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function sT(n,e,t,i,r,s,a,c){return new ti(n,e,t,i,r,s,a,c)}function dl(n){return new ti(n)}function v0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function S_(n){return n.collectionGroup!==null}function Ms(n){let e=ne(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ze(Tt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Mi(s,i))}),t.has(Tt.keyField().canonicalString())||e.Ee.push(new Mi(Tt.keyField(),i))}return e.Ee}function on(n){let e=ne(n);return e.de||(e.de=oT(e,Ms(n))),e.de}function oT(n,e){if(n.limitType==="F")return y0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Mi(r.field,s)});let t=n.endAt?new br(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new br(n.startAt.position,n.startAt.inclusive):null;return y0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Cd(n,e){let t=n.filters.concat([e]);return new ti(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ad(n,e,t){return new ti(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hl(n,e){return Zh(on(n),on(e))&&n.limitType===e.limitType}function C_(n){return`${Xh(on(n))}|lt:${n.limitType}`}function ur(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>T_(r)).join(", ")}]`),cl(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>wr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>wr(r)).join(",")),`Target(${i})`}(on(n))}; limitType=${n.limitType})`}function ml(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):J.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Ms(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(a,c,d){let f=g0(a,c,d);return a.inclusive?f<=0:f<0}(i.startAt,Ms(i),r)||i.endAt&&!function(a,c,d){let f=g0(a,c,d);return a.inclusive?f>=0:f>0}(i.endAt,Ms(i),r))}(n,e)}function aT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function A_(n){return(e,t)=>{let i=!1;for(let r of Ms(n)){let s=lT(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function lT(n,e,t){let i=n.field.isKeyField()?J.comparator(e.key,t.key):function(s,a,c){let d=a.data.field(s),f=c.data.field(s);return d!==null&&f!==null?vr(d,f):Z(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Z(19790,{direction:n.dir})}}var Mn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return h_(this.inner)}size(){return this.innerSize}};var cT=new Me(J.comparator);function Nn(){return cT}var k_=new Me(J.comparator);function Rs(...n){let e=k_;for(let t of n)e=e.insert(t.key,t);return e}function P_(n){let e=k_;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ki(){return Ns()}function D_(){return Ns()}function Ns(){return new Mn(n=>n.toString(),(n,e)=>n.isEqual(e))}var uT=new Me(J.comparator),dT=new ze(J.comparator);function de(...n){let e=dT;for(let t of n)e=e.add(t);return e}var hT=new ze(ae);function mT(){return hT}function em(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fs(e)?"-0":e}}function R_(n){return{integerValue:""+n}}function fT(n,e){return qI(e)?R_(e):em(n,e)}var Er=class{constructor(){this._=void 0}};function pT(n,e,t){return n instanceof Ni?function(r,s){let a={fields:{[f_]:{stringValue:m_},[g_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Kh(s)&&(s=ul(s)),s&&(a.fields[p_]=s),{mapValue:a}}(t,e):n instanceof ni?M_(n,e):n instanceof ii?N_(n,e):function(r,s){let a=V_(r,s),c=w0(a)+w0(r.Re);return gd(a)&&gd(r.Re)?R_(c):em(r.serializer,c)}(n,e)}function gT(n,e,t){return n instanceof ni?M_(n,e):n instanceof ii?N_(n,e):t}function V_(n,e){return n instanceof Ir?function(i){return gd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Ni=class extends Er{},ni=class extends Er{constructor(e){super(),this.elements=e}};function M_(n,e){let t=O_(e);for(let i of n.elements)t.some(r=>ln(r,i))||t.push(i);return{arrayValue:{values:t}}}var ii=class extends Er{constructor(e){super(),this.elements=e}};function N_(n,e){let t=O_(e);for(let i of n.elements)t=t.filter(r=>!ln(r,i));return{arrayValue:{values:t}}}var Ir=class extends Er{constructor(e,t){super(),this.serializer=e,this.Re=t}};function w0(n){return Se(n.integerValue||n.doubleValue)}function O_(n){return Jh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var js=class{constructor(e,t){this.field=e,this.transform=t}};function _T(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof ni&&r instanceof ni||i instanceof ii&&r instanceof ii?_r(i.elements,r.elements,ln):i instanceof Ir&&r instanceof Ir?ln(i.Re,r.Re):i instanceof Ni&&r instanceof Ni}(n.transform,e.transform)}var kd=class{constructor(e,t){this.version=e,this.transformResults=t}},Nt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ta(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Tr=class{};function L_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xr(n.key,Nt.none()):new Oi(n.key,n.data,Nt.none());{let t=n.data,i=It.empty(),r=new ze(Tt.comparator);for(let s of e.fields)if(!r.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new cn(n.key,i,new Mt(r.toArray()),Nt.none())}}function yT(n,e,t){n instanceof Oi?function(r,s,a){let c=r.value.clone(),d=E0(r.fieldTransforms,s,a.transformResults);c.setAll(d),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof cn?function(r,s,a){if(!Ta(r.precondition,s))return void s.convertToUnknownDocument(a.version);let c=E0(r.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(F_(r)),d.setAll(c),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Os(n,e,t,i){return n instanceof Oi?function(s,a,c,d){if(!Ta(s.precondition,a))return c;let f=s.value.clone(),_=I0(s.fieldTransforms,d,a);return f.setAll(_),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof cn?function(s,a,c,d){if(!Ta(s.precondition,a))return c;let f=I0(s.fieldTransforms,d,a),_=a.data;return _.setAll(F_(s)),_.setAll(f),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(s,a,c){return Ta(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function vT(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=V_(i.transform,r||null);s!=null&&(t===null&&(t=It.empty()),t.set(i.field,s))}return t||null}function b0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_r(i,r,(s,a)=>_T(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Oi=class extends Tr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},cn=class extends Tr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function F_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function E0(n,e,t){let i=new Map;ge(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let r=0;r<t.length;r++){let s=n[r],a=s.transform,c=e.data.field(s.field);i.set(s.field,gT(a,c,t[r]))}return i}function I0(n,e,t){let i=new Map;for(let r of n){let s=r.transform,a=t.data.field(r.field);i.set(r.field,pT(s,a,e))}return i}var xr=class extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pd=class extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Dd=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&yT(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Os(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Os(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=D_();return this.mutations.forEach(r=>{let s=e.get(r.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(r.key)?null:c;let d=L_(a,c);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&_r(this.mutations,e.mutations,(t,i)=>b0(t,i))&&_r(this.baseMutations,e.baseMutations,(t,i)=>b0(t,i))}},Rd=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ge(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return uT}(),s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new n(e,t,i,r)}};var Vd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Md=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Le,fe;function wT(n){switch(n){case O.OK:return Z(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Z(15467,{code:n})}}function U_(n){if(n===void 0)return Dn("GRPC error has no .code"),O.UNKNOWN;switch(n){case Le.OK:return O.OK;case Le.CANCELLED:return O.CANCELLED;case Le.UNKNOWN:return O.UNKNOWN;case Le.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Le.INTERNAL:return O.INTERNAL;case Le.UNAVAILABLE:return O.UNAVAILABLE;case Le.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Le.NOT_FOUND:return O.NOT_FOUND;case Le.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Le.ABORTED:return O.ABORTED;case Le.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Le.DATA_LOSS:return O.DATA_LOSS;default:return Z(39323,{code:n})}}(fe=Le||(Le={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var T0=null;var bT=new kn([4294967295,4294967295],0);function x0(n){let e=J0().encode(n),t=new Ku;return t.update(e),new Uint8Array(t.digest())}function S0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new kn([t,i],0),new kn([r,s],0)]}var Nd=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Pi(`Invalid padding: ${t}`);if(i<0)throw new Pi(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=kn.fromNumber(this.pe)}we(e,t,i){let r=e.add(t.multiply(kn.fromNumber(i)));return r.compare(bT)===1&&(r=new kn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=x0(e),[i,r]=S0(t);for(let s=0;s<this.hashCount;s++){let a=this.we(i,r,s);if(!this.be(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,r,t);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.pe===0)return;let t=x0(e),[i,r]=S0(t);for(let s=0;s<this.hashCount;s++){let a=this.we(i,r,s);this.Se(a)}}Se(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ma=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,$s.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(re.min(),r,new Me(ae),Nn(),de())}},$s=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,de(),de(),de())}};var fr=class{constructor(e,t,i,r){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=r}},Na=class{constructor(e,t){this.targetId=e,this.Ce=t}},Oa=class{constructor(e,t,i=it.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},La=class{constructor(){this.Fe=0,this.Me=C0(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=de(),t=de(),i=de();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Z(38017,{changeType:s})}}),new $s(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=C0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Od=class{constructor(e){this.ze=e,this.je=new Map,this.He=Nn(),this.Je=wa(),this.Ye=wa(),this.Ze=new Me(ae)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,r)=>{this.it(r)&&t(r)})}ot(e){let t=e.targetId,i=e.Ce.count,r=this._t(t);if(r){let s=r.target;if(Sd(s))if(i===0){let a=new J(s.path);this.tt(t,a,Ht.newNoDocument(a,re.min()))}else ge(i===1,20013,{expectedCount:i});else{let a=this.ut(t);if(a!==i){let c=this.ct(e),d=c?this.lt(c,e,a):1;if(d!==0){this.st(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}T0?.ht(function(_,w,b,V,U){var K,$,se,te,oe,ve;let ot={localCacheCount:_,existenceFilterCount:w.count,databaseId:b.database,projectId:b.projectId},_e=w.unchangedNames;return _e&&(ot.bloomFilter={applied:U===0,hashCount:(K=_e?.hashCount)!==null&&K!==void 0?K:0,bitmapLength:(te=(se=($=_e?.bits)===null||$===void 0?void 0:$.bitmap)===null||se===void 0?void 0:se.length)!==null&&te!==void 0?te:0,padding:(ve=(oe=_e?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&ve!==void 0?ve:0,mightContain:S=>{var y;return(y=V?.mightContain(S))!==null&&y!==void 0&&y}}),ot}(a,e.Ce,this.ze.Pt(),c,d))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,a,c;try{a=Vn(i).toUint8Array()}catch(d){if(d instanceof Pa)return gr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Nd(a,r,s)}catch(d){return gr(d instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){let i=this.ze.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let a=this.ze.Pt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,s,null),r++)}),r}It(e){let t=new Map;this.je.forEach((s,a)=>{let c=this._t(a);if(c){if(s.current&&Sd(c.target)){let d=new J(c.target.path);this.Et(d).has(a)||this.dt(a,d)||this.tt(a,d,Ht.newNoDocument(d,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let i=de();this.Ye.forEach((s,a)=>{let c=!0;a.forEachWhile(d=>{let f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));let r=new Ma(e,t,this.Ze,this.He,i);return this.He=Nn(),this.Je=wa(),this.Ye=wa(),this.Ze=new Me(ae),r}et(e,t){if(!this.it(e))return;let i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;let r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new La,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ze(ae),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ze(ae),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new La),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function wa(){return new Me(J.comparator)}function C0(){return new Me(J.comparator)}var ET={asc:"ASCENDING",desc:"DESCENDING"},IT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TT={and:"AND",or:"OR"},Ld=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Fd(n,e){return n.useProto3Json||cl(e)?e:{value:e}}function Fa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xT(n,e){return Fa(n,e.toTimestamp())}function an(n){return ge(!!n,49232),re.fromTimestamp(function(t){let i=Rn(t);return new Ne(i.seconds,i.nanos)}(n))}function tm(n,e){return Ud(n,e).canonicalString()}function Ud(n,e){let t=function(r){return new ke(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function j_(n){let e=ke.fromString(n);return ge(H_(e),10190,{key:e.toString()}),e}function Bd(n,e){return tm(n.databaseId,e.path)}function ed(n,e){let t=j_(e);if(t.get(1)!==n.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(q_(t))}function $_(n,e){return tm(n.databaseId,e)}function ST(n){let e=j_(n);return e.length===4?ke.emptyPath():q_(e)}function jd(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function q_(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function A0(n,e,t){return{name:Bd(n,e),fields:t.value.mapValue.fields}}function CT(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Z(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(ge(_===void 0||typeof _=="string",58123),it.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),it.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let _=f.code===void 0?O.UNKNOWN:U_(f.code);return new W(_,f.message||"")}(a);t=new Oa(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=ed(n,i.document.name),s=an(i.document.updateTime),a=i.document.createTime?an(i.document.createTime):re.min(),c=new It({mapValue:{fields:i.document.fields}}),d=Ht.newFoundDocument(r,s,a,c),f=i.targetIds||[],_=i.removedTargetIds||[];t=new fr(f,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=ed(n,i.document),s=i.readTime?an(i.readTime):re.min(),a=Ht.newNoDocument(r,s),c=i.removedTargetIds||[];t=new fr([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=ed(n,i.document),s=i.removedTargetIds||[];t=new fr([],s,r,null)}else{if(!("filter"in e))return Z(11601,{Vt:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,a=new Md(r,s),c=i.targetId;t=new Na(c,a)}}return t}function AT(n,e){let t;if(e instanceof Oi)t={update:A0(n,e.key,e.value)};else if(e instanceof xr)t={delete:Bd(n,e.key)};else if(e instanceof cn)t={update:A0(n,e.key,e.data),updateMask:LT(e.fieldMask)};else{if(!(e instanceof Pd))return Z(16599,{ft:e.type});t={verify:Bd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,a){let c=a.transform;if(c instanceof Ni)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ni)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ii)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ir)return{fieldPath:a.field.canonicalString(),increment:c.Re};throw Z(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:xT(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(n,e.precondition)),t}function kT(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map(t=>function(r,s){let a=r.updateTime?an(r.updateTime):an(s);return a.isEqual(re.min())&&(a=an(s)),new kd(a,r.transformResults||[])}(t,e))):[]}function PT(n,e){return{documents:[$_(n,e.path)]}}function DT(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$_(n,r);let s=function(f){if(f.length!==0)return z_(Wt.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(f){if(f.length!==0)return f.map(_=>function(b){return{field:dr(b.field),direction:MT(b.dir)}}(_))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=Fd(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:r}}function RT(n){let e=ST(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){ge(i===1,65062);let _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let s=[];t.where&&(s=function(w){let b=G_(w);return b instanceof Wt&&E_(b)?b.getFilters():[b]}(t.where));let a=[];t.orderBy&&(a=function(w){return w.map(b=>function(U){return new Mi(hr(U.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(w){let b;return b=typeof w=="object"?w.value:w,cl(b)?null:b}(t.limit));let d=null;t.startAt&&(d=function(w){let b=!!w.before,V=w.values||[];return new br(V,b)}(t.startAt));let f=null;return t.endAt&&(f=function(w){let b=!w.before,V=w.values||[];return new br(V,b)}(t.endAt)),sT(e,r,a,s,c,"F",d,f)}function VT(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function G_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=hr(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=hr(t.unaryFilter.field);return Ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=hr(t.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=hr(t.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ue.create(hr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wt.create(t.compositeFilter.filters.map(i=>G_(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(t.compositeFilter.op))}(n):Z(30097,{filter:n})}function MT(n){return ET[n]}function NT(n){return IT[n]}function OT(n){return TT[n]}function dr(n){return{fieldPath:n.canonicalString()}}function hr(n){return Tt.fromServerFormat(n.fieldPath)}function z_(n){return n instanceof Ue?function(t){if(t.op==="=="){if(p0(t.value))return{unaryFilter:{field:dr(t.field),op:"IS_NAN"}};if(f0(t.value))return{unaryFilter:{field:dr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p0(t.value))return{unaryFilter:{field:dr(t.field),op:"IS_NOT_NAN"}};if(f0(t.value))return{unaryFilter:{field:dr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(t.field),op:NT(t.op),value:t.value}}}(n):n instanceof Wt?function(t){let i=t.getFilters().map(r=>z_(r));return i.length===1?i[0]:{compositeFilter:{op:OT(t.op),filters:i}}}(n):Z(54877,{filter:n})}function LT(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function H_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qs=class n{constructor(e,t,i,r,s=re.min(),a=re.min(),c=it.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $d=class{constructor(e){this.wt=e}};function FT(n){let e=RT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ad(e,e.limit,"L"):e}var Ua=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Se(e.integerValue));else if("doubleValue"in e){let i=Se(e.doubleValue);isNaN(i)?this.Mt(t,13):(this.Mt(t,15),Fs(i)?t.xt(0):t.xt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Mt(t,20),typeof i=="string"&&(i=Rn(i)),t.Ot(`${i.seconds||""}`),t.xt(i.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Vn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Mt(t,45),t.xt(i.latitude||0),t.xt(i.longitude||0)}else"mapValue"in e?v_(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):y_(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Z(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let i=e.fields||{};this.Mt(t,55);for(let r of Object.keys(i))this.Nt(r,t),this.Ct(i[r],t)}qt(e,t){var i,r;let s=e.fields||{};this.Mt(t,53);let a=yr,c=((r=(i=s[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Mt(t,15),t.xt(Se(c)),this.Nt(a,t),this.Ct(s[a],t)}$t(e,t){let i=e.values||[];this.Mt(t,50);for(let r of i)this.Ct(r,t)}kt(e,t){this.Mt(t,37),J.fromName(e).path.forEach(i=>{this.Mt(t,60),this.Kt(i,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Ua.Wt=new Ua;var qd=class{constructor(){this.Cn=new Gd}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Vi.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Gd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ze(ke.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ze(ke.comparator)).toArray()}};var Hk=new Uint8Array(0);var k0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W_=41943040,Vt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(W_,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Gs=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var P0="LruGarbageCollector",UT=1048576;function D0([n,e],[t,i]){let r=ae(n,t);return r===0?ae(e,i):r}var zd=class{constructor(e){this.Er=e,this.buffer=new ze(D0),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();D0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},Hd=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Q(P0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pr(t)?Q(P0,"Ignoring IndexedDB error during garbage collection: ",t):yield kr(t)}yield this.mr(3e5)}))}},Wd=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Hh.le);let i=new zd(t);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(k0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k0):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,r,s,a,c,d,f,_=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),r=this.params.maximumSequenceNumbersToCollect):r=w,a=Date.now(),this.nthSequenceNumber(e,r))).next(w=>(i=w,c=Date.now(),this.removeTargets(e,i,t))).next(w=>(s=w,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(f=Date.now(),cr()<=ce.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-_}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${s} targets in `+(d-c)+`ms
	Removed ${w} documents in `+(f-d)+`ms
Total Duration: ${f-_}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:w})))}};function BT(n,e){return new Wd(n,e)}var Kd=class{constructor(){this.changes=new Mn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Qd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Yd=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Os(i.mutation,r,Mt.empty(),Ne.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,t,i=de()){let r=ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let a=Rs();return s.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,de()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,i,r){let s=Nn(),a=Ns(),c=function(){return Ns()}();return t.forEach((d,f)=>{let _=i.get(f.key);r.has(f.key)&&(_===void 0||_.mutation instanceof cn)?s=s.insert(f.key,f):_!==void 0?(a.set(f.key,_.mutation.getFieldMask()),Os(_.mutation,f,_.mutation.getFieldMask(),Ne.now())):a.set(f.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((f,_)=>a.set(f,_)),t.forEach((f,_)=>{var w;return c.set(f,new Qd(_,(w=a.get(f))!==null&&w!==void 0?w:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Ns(),r=new Me((a,c)=>a-c),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let _=i.get(d)||Mt.empty();_=c.applyToLocalView(f,_),i.set(d,_);let w=(r.get(c.batchId)||de()).add(d);r=r.insert(c.batchId,w)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let d=c.getNext(),f=d.key,_=d.value,w=D_();_.forEach(b=>{if(!s.has(b)){let V=L_(t.get(b),i.get(b));V!==null&&w.set(b,V),s=s.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,w))}return L.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):S_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):L.resolve(ki()),c=Ls,d=s;return a.next(f=>L.forEach(f,(_,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),s.get(_)?L.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{d=d.insert(_,b)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,d,f,de())).next(_=>({batchId:c,changes:P_(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(i=>{let r=Rs();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,a=Rs();return this.indexManager.getCollectionParents(e,s).next(c=>L.forEach(c,d=>{let f=function(w,b){return new ti(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(_=>{_.forEach((w,b)=>{a=a.insert(w,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(a=>{s.forEach((d,f)=>{let _=f.getKey();a.get(_)===null&&(a=a.insert(_,Ht.newInvalidDocument(_)))});let c=Rs();return a.forEach((d,f)=>{let _=s.get(d);_!==void 0&&Os(_.mutation,f,Mt.empty(),Ne.now()),ml(t,f)&&(c=c.insert(d,f))}),c})}};var Jd=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return L.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:an(r.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(r){return{name:r.name,query:FT(r.bundledQuery),readTime:an(r.readTime)}}(t)),L.resolve()}};var Xd=class{constructor(){this.overlays=new Me(J.comparator),this.Qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ki();return L.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.St(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){let r=ki(),s=t.length+1,a=new J(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&d.largestBatchId>i&&r.set(d.getKey(),d)}return L.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Me((f,_)=>f-_),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let _=s.get(f.largestBatchId);_===null&&(_=ki(),s=s.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}let c=ki(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,_)=>c.set(f,_)),!(c.size()>=r)););return L.resolve(c)}St(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Vd(t,i));let s=this.Qr.get(t);s===void 0&&(s=de(),this.Qr.set(t,s)),this.Qr.set(t,s.add(i.key))}};var Zd=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var zs=class{constructor(){this.$r=new ze(Fe.Ur),this.Kr=new ze(Fe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let i=new Fe(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Fe(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){let t=new J(new ke([])),i=new Fe(t,e),r=new Fe(t,e+1),s=[];return this.Kr.forEachInRange([i,r],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new J(new ke([])),i=new Fe(t,e),r=new Fe(t,e+1),s=de();return this.Kr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new Fe(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Fe=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return J.comparator(e.key,t.key)||ae(e.Zr,t.Zr)}static Wr(e,t){return ae(e.Zr,t.Zr)||J.comparator(e.key,t.key)}};var eh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ze(Fe.Ur)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Dd(s,t,i,r);this.mutationQueue.push(a);for(let c of r)this.Xr=this.Xr.add(new Fe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,t){return L.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.ti(i),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Wh:this.nr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Fe(t,0),r=new Fe(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([i,r],a=>{let c=this.ei(a.Zr);s.push(c)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ze(ae);return t.forEach(r=>{let s=new Fe(r,0),a=new Fe(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],c=>{i=i.add(c.Zr)})}),L.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;J.isDocumentKey(s)||(s=s.child(""));let a=new Fe(new J(s),0),c=new ze(ae);return this.Xr.forEachWhile(d=>{let f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Zr)),!0)},a),L.resolve(this.ni(c))}ni(e){let t=[];return e.forEach(i=>{let r=this.ei(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ge(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return L.forEach(t.mutations,r=>{let s=new Fe(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){let i=new Fe(t,0),r=this.Xr.firstAfterOrEqual(i);return L.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var th=class{constructor(e){this.ii=e,this.docs=function(){return new Me(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,a=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=Nn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ht.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Nn(),a=t.path,c=new J(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){let{key:f,value:{document:_}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||BI(UI(_),i)<=0||(r.has(_.key)||ml(t,_))&&(s=s.insert(_.key,_.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Z(9500)}si(e,t){return L.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new nh(this)}getSize(e){return L.resolve(this.size)}},nh=class extends Kd{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),L.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var ih=class{constructor(e){this.persistence=e,this.oi=new Mn(t=>Xh(t),Zh),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this._i=0,this.ai=new zs,this.targetCount=0,this.ui=Gs.cr()}forEachTarget(e,t){return this.oi.forEach((i,r)=>t(r)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),L.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new Gs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Tr(t),L.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.oi.forEach((a,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let i=this.oi.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let i=this.ai.Yr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this.ai.containsKey(t))}};var Ba=class{constructor(e,t){this.ci={},this.overlays={},this.li=new Hh(0),this.hi=!1,this.hi=!0,this.Pi=new Zd,this.referenceDelegate=e(this),this.Ti=new ih(this),this.indexManager=new qd,this.remoteDocumentCache=function(r){return new th(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new $d(t),this.Ei=new Jd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new eh(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){Q("MemoryPersistence","Starting transaction:",e);let r=new rh(this.li.next());return this.referenceDelegate.di(),i(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(e,t){return L.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}},rh=class extends md{constructor(e){super(),this.currentSequenceNumber=e}},sh=class n{constructor(e){this.persistence=e,this.Vi=new zs,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw Z(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(r=>this.gi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.gi,i=>{let r=J.fromPath(i);return this.pi(e,r).next(s=>{s||t.removeEntry(r,re.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return L.or([()=>L.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},ja=class n{constructor(e,t){this.persistence=e,this.yi=new Mn(i=>GI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=BT(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}br(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return L.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(s=>s?L.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,a=>this.Dr(e,a,t).next(c=>{c||(i++,s.removeEntry(a,re.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ea(e.data.value)),t}Dr(e,t,i){return L.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.yi.get(t);return L.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var oh=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ds=i,this.As=r}static Rs(e,t){let i=de(),r=de();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var ah=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lh=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Cp()?8:$I(qe())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ws(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,t,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new ah;return this.Ss(e,t,a).next(c=>{if(s.result=c,this.fs)return this.Ds(e,t,a,c.size)})}).next(()=>s.result)}Ds(e,t,i,r){return i.documentReadCount<this.gs?(cr()<=ce.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ur(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),L.resolve()):(cr()<=ce.DEBUG&&Q("QueryEngine","Query:",ur(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(cr()<=ce.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ur(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(t))):L.resolve())}ws(e,t){if(v0(t))return L.resolve(null);let i=on(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Ad(t,null,"F"),i=on(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let a=de(...s);return this.ys.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(d=>{let f=this.vs(t,c);return this.Cs(t,f,a,d.readTime)?this.ws(e,Ad(t,null,"F")):this.Fs(e,f,t,d)}))})))}bs(e,t,i,r){return v0(t)||r.isEqual(re.min())?L.resolve(null):this.ys.getDocuments(e,i).next(s=>{let a=this.vs(t,s);return this.Cs(t,a,i,r)?L.resolve(null):(cr()<=ce.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ur(t)),this.Fs(e,a,t,FI(r,Ls)).next(c=>c))})}vs(e,t){let i=new ze(A_(e));return t.forEach((r,s)=>{ml(e,s)&&(i=i.add(s))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,i){return cr()<=ce.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ur(t)),this.ys.getDocumentsMatchingQuery(e,t,Vi.min(),i)}Fs(e,t,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var nm="LocalStore",jT=3e8,ch=class{constructor(e,t,i,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Me(ae),this.Os=new Mn(s=>Xh(s),Zh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yd(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function $T(n,e,t,i){return new ch(n,e,t,i)}function K_(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let a=[],c=[],d=de();for(let f of r){a.push(f.batchId);for(let _ of f.mutations)d=d.add(_.key)}for(let f of s){c.push(f.batchId);for(let _ of f.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(i,d).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:c}))})})})}function qT(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,_){let w=f.batch,b=w.keys(),V=L.resolve();return b.forEach(U=>{V=V.next(()=>_.getEntry(d,U)).next(K=>{let $=f.docVersions.get(U);ge($!==null,48541),K.version.compareTo($)<0&&(w.applyToRemoteDocument(K,f),K.isValidDocument()&&(K.setReadTime(f.commitVersion),_.addEntry(K)))})}),V.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=de();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function Q_(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function GT(n,e){let t=ne(n),i=e.snapshotVersion,r=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.xs;let c=[];e.targetChanges.forEach((_,w)=>{let b=r.get(w);if(!b)return;c.push(t.Ti.removeMatchingKeys(s,_.removedDocuments,w).next(()=>t.Ti.addMatchingKeys(s,_.addedDocuments,w)));let V=b.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(w)!==null?V=V.withResumeToken(it.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,i)),r=r.insert(w,V),function(K,$,se){return K.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=jT?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0}(b,V,_)&&c.push(t.Ti.updateTargetData(s,V))});let d=Nn(),f=de();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,_))}),c.push(zT(s,a,e.documentUpdates).next(_=>{d=_.qs,f=_.Qs})),!i.isEqual(re.min())){let _=t.Ti.getLastRemoteSnapshotVersion(s).next(w=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(_)}return L.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,f)).next(()=>d)}).then(s=>(t.xs=r,s))}function zT(n,e,t){let i=de(),r=de();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let a=Nn();return t.forEach((c,d)=>{let f=s.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual(re.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):Q(nm,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{qs:a,Qs:r}})}function HT(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Wh),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WT(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ti.getTargetData(i,e).next(s=>s?(r=s,L.resolve(r)):t.Ti.allocateTargetId(i).next(a=>(r=new qs(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}function uh(n,e,t){return v(this,null,function*(){let i=ne(n),r=i.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Pr(a))throw a;Q(nm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)})}function R0(n,e,t){let i=ne(n),r=re.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,_){let w=ne(d),b=w.Os.get(_);return b!==void 0?L.resolve(w.xs.get(b)):w.Ti.getTargetData(f,_)}(i,a,on(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(a,c.targetId).next(d=>{s=d})}).next(()=>i.Ms.getDocumentsMatchingQuery(a,e,t?r:re.min(),t?s:de())).next(c=>(KT(i,aT(e),c),{documents:c,$s:s})))}function KT(n,e,t){let i=n.Ns.get(e)||re.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ns.set(e,i)}var $a=class{constructor(){this.activeTargetIds=mT()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dh=class{constructor(){this.xo=new $a,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new $a,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hh=class{No(e){}shutdown(){}};var V0="ConnectivityMonitor",qa=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Q(V0,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){Q(V0,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ba=null;function mh(){return ba===null?ba=function(){return 268435456+Math.round(2147483648*Math.random())}():ba++,"0x"+ba.toString(16)}var td="RestConnection",QT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fh=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===Da?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,t,i,r,s){let a=mh(),c=this.jo(e,t.toUriEncodedString());Q(td,`Sending RPC '${e}' ${a}:`,c,i);let d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,r,s);let{host:f}=new URL(c),_=zn(f);return this.Jo(e,c,d,i,_).then(w=>(Q(td,`Received RPC '${e}' ${a}: `,w),w),w=>{throw gr(td,`RPC '${e}' ${a} failed with error: `,w,"url: ",c,"request:",i),w})}Yo(e,t,i,r,s,a){return this.zo(e,t,i,r,s)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ar}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}jo(e,t){let i=QT[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}};var ph=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var nt="WebChannelConnection",gh=class extends fh{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,s){let a=mh();return new Promise((c,d)=>{let f=new Qu;f.setWithCredentials(!0),f.listenOnce(Yu.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ds.NO_ERROR:let w=f.getResponseJson();Q(nt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(w)),c(w);break;case Ds.TIMEOUT:Q(nt,`RPC '${e}' ${a} timed out`),d(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ds.HTTP_ERROR:let b=f.getStatus();if(Q(nt,`RPC '${e}' ${a} failed with status:`,b,"response text:",f.getResponseText()),b>0){let V=f.getResponseJson();Array.isArray(V)&&(V=V[0]);let U=V?.error;if(U&&U.status&&U.message){let K=function(se){let te=se.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(te)>=0?te:O.UNKNOWN}(U.status);d(new W(K,U.message))}else d(new W(O.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new W(O.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{h_:e,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Q(nt,`RPC '${e}' ${a} completed.`)}});let _=JSON.stringify(r);Q(nt,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",_,i,15)})}I_(e,t,i){let r=mh(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zu(),c=Xu(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;let _=s.join("");Q(nt,`Creating RPC '${e}' stream ${r}: ${_}`,d);let w=a.createWebChannel(_,d);this.E_(w);let b=!1,V=!1,U=new ph({Zo:$=>{V?Q(nt,`Not sending because RPC '${e}' stream ${r} is closed:`,$):(b||(Q(nt,`Opening RPC '${e}' stream ${r} transport.`),w.open(),b=!0),Q(nt,`RPC '${e}' stream ${r} sending:`,$),w.send($))},Xo:()=>w.close()}),K=($,se,te)=>{$.listen(se,oe=>{try{te(oe)}catch(ve){setTimeout(()=>{throw ve},0)}})};return K(w,lr.EventType.OPEN,()=>{V||(Q(nt,`RPC '${e}' stream ${r} transport opened.`),U.__())}),K(w,lr.EventType.CLOSE,()=>{V||(V=!0,Q(nt,`RPC '${e}' stream ${r} transport closed`),U.u_(),this.d_(w))}),K(w,lr.EventType.ERROR,$=>{V||(V=!0,gr(nt,`RPC '${e}' stream ${r} transport errored. Name:`,$.name,"Message:",$.message),U.u_(new W(O.UNAVAILABLE,"The operation could not be completed")))}),K(w,lr.EventType.MESSAGE,$=>{var se;if(!V){let te=$.data[0];ge(!!te,16349);let oe=te,ve=oe?.error||((se=oe[0])===null||se===void 0?void 0:se.error);if(ve){Q(nt,`RPC '${e}' stream ${r} received error:`,ve);let ot=ve.status,_e=function(I){let x=Le[I];if(x!==void 0)return U_(x)}(ot),S=ve.message;_e===void 0&&(_e=O.INTERNAL,S="Unknown error status: "+ot+" with message "+ve.message),V=!0,U.u_(new W(_e,S)),w.close()}else Q(nt,`RPC '${e}' stream ${r} received:`,te),U.c_(te)}}),K(c,Ju.STAT_EVENT,$=>{$.stat===ya.PROXY?Q(nt,`RPC '${e}' stream ${r} detected buffering proxy`):$.stat===ya.NOPROXY&&Q(nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{U.a_()},0),U}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function nd(){return typeof document<"u"?document:null}function fl(n){return new Ld(n,!0)}var Ga=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=i,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-i);r>0&&Q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var M0="PersistentStream",za=class{constructor(e,t,i,r,s,a,c,d){this.xi=e,this.S_=i,this.D_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Ga(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return v(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return v(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return v(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Dn(t.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===t&&this.z_(i,r)},i=>{e(()=>{let r=new W(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(e,t){let i=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(()=>v(this,null,function*(){this.state=0,this.start()}))}j_(e){return Q(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Q(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_h=class extends za{constructor(e,t,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=CT(this.serializer,e),i=function(s){if(!("targetChange"in s))return re.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?re.min():a.readTime?an(a.readTime):re.min()}(e);return this.listener.Y_(t,i)}Z_(e){let t={};t.database=jd(this.serializer),t.addTarget=function(s,a){let c,d=a.target;if(c=Sd(d)?{documents:PT(s,d)}:{query:DT(s,d).gt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=B_(s,a.resumeToken);let f=Fd(s,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(re.min())>0){c.readTime=Fa(s,a.snapshotVersion.toTimestamp());let f=Fd(s,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=VT(this.serializer,e);i&&(t.labels=i),this.Q_(t)}X_(e){let t={};t.database=jd(this.serializer),t.removeTarget=e,this.Q_(t)}},yh=class extends za{constructor(e,t,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=kT(e.writeResults,e.commitTime),i=an(e.commitTime);return this.listener.ra(i,t)}ia(){let e={};e.database=jd(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>AT(this.serializer,i))};this.Q_(t)}};var vh=class{},wh=class extends vh{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,Ud(t,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(O.UNKNOWN,s.toString())})}Yo(e,t,i,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Yo(e,Ud(t,i),r,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(O.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},bh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Dn(t),this.ua=!1):Q("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Li="RemoteStore",Eh=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{i.enqueueAndForget(()=>v(this,null,function*(){Ui(this)&&(Q(Li,"Restarting streams for network reachability change."),yield function(d){return v(this,null,function*(){let f=ne(d);f.da.add(4),yield Zs(f),f.Va.set("Unknown"),f.da.delete(4),yield pl(f)})}(this))}))}),this.Va=new bh(i,r)}};function pl(n){return v(this,null,function*(){if(Ui(n))for(let e of n.Aa)yield e(!0)})}function Zs(n){return v(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function Y_(n,e){let t=ne(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),om(t)?sm(t):Dr(t).N_()&&rm(t,e))}function im(n,e){let t=ne(n),i=Dr(t);t.Ea.delete(e),i.N_()&&J_(t,e),t.Ea.size===0&&(i.N_()?i.k_():Ui(t)&&t.Va.set("Unknown"))}function rm(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dr(n).Z_(e)}function J_(n,e){n.ma.Ke(e),Dr(n).X_(e)}function sm(n){n.ma=new Od({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Dr(n).start(),n.Va.ca()}function om(n){return Ui(n)&&!Dr(n).O_()&&n.Ea.size>0}function Ui(n){return ne(n).da.size===0}function X_(n){n.ma=void 0}function YT(n){return v(this,null,function*(){n.Va.set("Online")})}function JT(n){return v(this,null,function*(){n.Ea.forEach((e,t)=>{rm(n,e)})})}function XT(n,e){return v(this,null,function*(){X_(n),om(n)?(n.Va.Pa(e),sm(n)):n.Va.set("Unknown")})}function ZT(n,e,t){return v(this,null,function*(){if(n.Va.set("Online"),e instanceof Oa&&e.state===2&&e.cause)try{yield function(r,s){return v(this,null,function*(){let a=s.cause;for(let c of s.targetIds)r.Ea.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.Ea.delete(c),r.ma.removeTarget(c))})}(n,e)}catch(i){Q(Li,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Ha(n,i)}else if(e instanceof fr?n.ma.Xe(e):e instanceof Na?n.ma.ot(e):n.ma.nt(e),!t.isEqual(re.min()))try{let i=yield Q_(n.localStore);t.compareTo(i)>=0&&(yield function(s,a){let c=s.ma.It(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let _=s.Ea.get(f);_&&s.Ea.set(f,_.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{let _=s.Ea.get(d);if(!_)return;s.Ea.set(d,_.withResumeToken(it.EMPTY_BYTE_STRING,_.snapshotVersion)),J_(s,d);let w=new qs(_.target,d,f,_.sequenceNumber);rm(s,w)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){Q(Li,"Failed to raise snapshot:",i),yield Ha(n,i)}})}function Ha(n,e,t){return v(this,null,function*(){if(!Pr(e))throw e;n.da.add(1),yield Zs(n),n.Va.set("Offline"),t||(t=()=>Q_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){Q(Li,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield pl(n)}))})}function Z_(n,e){return e().catch(t=>Ha(n,t,e))}function gl(n){return v(this,null,function*(){let e=ne(n),t=ri(e),i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Wh;for(;ex(e);)try{let r=yield HT(e.localStore,i);if(r===null){e.Ia.length===0&&t.k_();break}i=r.batchId,tx(e,r)}catch(r){yield Ha(e,r)}ey(e)&&ty(e)})}function ex(n){return Ui(n)&&n.Ia.length<10}function tx(n,e){n.Ia.push(e);let t=ri(n);t.N_()&&t.ea&&t.ta(e.mutations)}function ey(n){return Ui(n)&&!ri(n).O_()&&n.Ia.length>0}function ty(n){ri(n).start()}function nx(n){return v(this,null,function*(){ri(n).ia()})}function ix(n){return v(this,null,function*(){let e=ri(n);for(let t of n.Ia)e.ta(t.mutations)})}function rx(n,e,t){return v(this,null,function*(){let i=n.Ia.shift(),r=Rd.from(i,e,t);yield Z_(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield gl(n)})}function sx(n,e){return v(this,null,function*(){e&&ri(n).ea&&(yield function(i,r){return v(this,null,function*(){if(function(a){return wT(a)&&a!==O.ABORTED}(r.code)){let s=i.Ia.shift();ri(i).L_(),yield Z_(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield gl(i)}})}(n,e)),ey(n)&&ty(n)})}function N0(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),Q(Li,"RemoteStore received new credentials");let i=Ui(t);t.da.add(3),yield Zs(t),i&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield pl(t)})}function ox(n,e){return v(this,null,function*(){let t=ne(n);e?(t.da.delete(2),yield pl(t)):e||(t.da.add(2),yield Zs(t),t.Va.set("Unknown"))})}function Dr(n){return n.fa||(n.fa=function(t,i,r){let s=ne(t);return s.oa(),new _h(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{e_:YT.bind(null,n),n_:JT.bind(null,n),i_:XT.bind(null,n),Y_:ZT.bind(null,n)}),n.Aa.push(e=>v(null,null,function*(){e?(n.fa.L_(),om(n)?sm(n):n.Va.set("Unknown")):(yield n.fa.stop(),X_(n))}))),n.fa}function ri(n){return n.ga||(n.ga=function(t,i,r){let s=ne(t);return s.oa(),new yh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:nx.bind(null,n),i_:sx.bind(null,n),na:ix.bind(null,n),ra:rx.bind(null,n)}),n.Aa.push(e=>v(null,null,function*(){e?(n.ga.L_(),yield gl(n)):(yield n.ga.stop(),n.Ia.length>0&&(Q(Li,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var Ih=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let a=Date.now()+i,c=new n(e,t,a,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function am(n,e){if(Dn("AsyncQueue",`${e}: ${n}`),Pr(n))return new W(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Wa=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||J.comparator(t.key,i.key):(t,i)=>J.comparator(t.key,i.key),this.keyedMap=Rs(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ka=class{constructor(){this.pa=new Me(J.comparator)}track(e){let t=e.doc.key,i=this.pa.get(t);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(t,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(t):e.type===1&&i.type===2?this.pa=this.pa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Z(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,i)=>{e.push(i)}),e}},Sr=class n{constructor(e,t,i,r,s,a,c,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Wa.emptySet(t),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Th=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},xh=class{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){let r=ne(t),s=r.queries;r.queries=O0(),s.forEach((a,c)=>{for(let d of c.Sa)d.onError(i)})})(this,new W(O.ABORTED,"Firestore shutting down"))}};function O0(){return new Mn(n=>C_(n),hl)}function lm(n,e){return v(this,null,function*(){let t=ne(n),i=3,r=e.query,s=t.queries.get(r);s?!s.Da()&&e.va()&&(i=2):(s=new Th,i=e.va()?0:1);try{switch(i){case 0:s.ba=yield t.onListen(r,!0);break;case 1:s.ba=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let c=am(a,`Initialization of query '${ur(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&um(t)})}function cm(n,e){return v(this,null,function*(){let t=ne(n),i=e.query,r=3,s=t.queries.get(i);if(s){let a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.va()?0:1:!s.Da()&&e.va()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function ax(n,e){let t=ne(n),i=!1;for(let r of e){let s=r.query,a=t.queries.get(s);if(a){for(let c of a.Sa)c.Ma(r)&&(i=!0);a.ba=r}}i&&um(t)}function lx(n,e,t){let i=ne(n),r=i.queries.get(e);if(r)for(let s of r.Sa)s.onError(t);i.queries.delete(e)}function um(n){n.Ca.forEach(e=>{e.next()})}var Sh,L0;(L0=Sh||(Sh={})).xa="default",L0.Cache="cache";var Hs=class{constructor(e,t,i){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Sr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let i=t!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Sr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Sh.Cache}};var Qa=class{constructor(e){this.key=e}},Ya=class{constructor(e){this.key=e}},Ch=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=de(),this.mutatedKeys=de(),this.Za=A_(e),this.Xa=new Wa(this.Za)}get eu(){return this.Ha}tu(e,t){let i=t?t.nu:new Ka,r=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,a=r,c=!1,d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,w)=>{let b=r.get(_),V=ml(this.query,w)?w:null,U=!!b&&this.mutatedKeys.has(b.key),K=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations),$=!1;b&&V?b.data.isEqual(V.data)?U!==K&&(i.track({type:3,doc:V}),$=!0):this.ru(b,V)||(i.track({type:2,doc:V}),$=!0,(d&&this.Za(V,d)>0||f&&this.Za(V,f)<0)&&(c=!0)):!b&&V?(i.track({type:0,doc:V}),$=!0):b&&!V&&(i.track({type:1,doc:b}),$=!0,(d||f)&&(c=!0)),$&&(V?(a=a.add(V),s=K?s.add(_):s.delete(_)):(a=a.delete(_),s=s.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),s=s.delete(_.key),i.track({type:1,doc:_})}return{Xa:a,nu:i,Cs:c,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let a=e.nu.wa();a.sort((_,w)=>function(V,U){let K=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Vt:$})}};return K(V)-K(U)}(_.type,w.type)||this.Za(_.doc,w.doc)),this.iu(i),r=r!=null&&r;let c=t&&!r?this.su():[],d=this.Ya.size===0&&this.current&&!r?1:0,f=d!==this.Ja;return this.Ja=d,a.length!==0||f?{snapshot:new Sr(this.query,e.Xa,s,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ka,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=de(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});let t=[];return e.forEach(i=>{this.Ya.has(i)||t.push(new Ya(i))}),this.Ya.forEach(i=>{e.has(i)||t.push(new Qa(i))}),t}au(e){this.Ha=e.$s,this.Ya=de();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Sr.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},dm="SyncEngine",Ah=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},kh=class{constructor(e){this.key=e,this.cu=!1}},Ph=class{constructor(e,t,i,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Mn(c=>C_(c),hl),this.Pu=new Map,this.Tu=new Set,this.Iu=new Me(J.comparator),this.Eu=new Map,this.du=new zs,this.Au={},this.Ru=new Map,this.Vu=Gs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function cx(n,e,t=!0){return v(this,null,function*(){let i=ay(n),r,s=i.hu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=yield ny(i,e,t,!0),r})}function ux(n,e){return v(this,null,function*(){let t=ay(n);yield ny(t,e,!0,!1)})}function ny(n,e,t,i){return v(this,null,function*(){let r=yield WT(n.localStore,on(e)),s=r.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield dx(n,e,s,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&Y_(n.remoteStore,r),c})}function dx(n,e,t,i,r){return v(this,null,function*(){n.fu=(w,b,V)=>function(K,$,se,te){return v(this,null,function*(){let oe=$.view.tu(se);oe.Cs&&(oe=yield R0(K.localStore,$.query,!1).then(({documents:S})=>$.view.tu(S,oe)));let ve=te&&te.targetChanges.get($.targetId),ot=te&&te.targetMismatches.get($.targetId)!=null,_e=$.view.applyChanges(oe,K.isPrimaryClient,ve,ot);return U0(K,$.targetId,_e.ou),_e.snapshot})}(n,w,b,V);let s=yield R0(n.localStore,e,!0),a=new Ch(e,s.$s),c=a.tu(s.documents),d=$s.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(c,n.isPrimaryClient,d);U0(n,t,f.ou);let _=new Ah(e,t,a);return n.hu.set(e,_),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot})}function hx(n,e,t){return v(this,null,function*(){let i=ne(n),r=i.hu.get(e),s=i.Pu.get(r.targetId);if(s.length>1)return i.Pu.set(r.targetId,s.filter(a=>!hl(a,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield uh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&im(i.remoteStore,r.targetId),Dh(i,r.targetId)}).catch(kr))):(Dh(i,r.targetId),yield uh(i.localStore,r.targetId,!0))})}function mx(n,e){return v(this,null,function*(){let t=ne(n),i=t.hu.get(e),r=t.Pu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),im(t.remoteStore,i.targetId))})}function fx(n,e,t){return v(this,null,function*(){let i=bx(n);try{let r=yield function(a,c){let d=ne(a),f=Ne.now(),_=c.reduce((V,U)=>V.add(U.key),de()),w,b;return d.persistence.runTransaction("Locally write mutations","readwrite",V=>{let U=Nn(),K=de();return d.Bs.getEntries(V,_).next($=>{U=$,U.forEach((se,te)=>{te.isValidDocument()||(K=K.add(se))})}).next(()=>d.localDocuments.getOverlayedDocuments(V,U)).next($=>{w=$;let se=[];for(let te of c){let oe=vT(te,w.get(te.key).overlayedDocument);oe!=null&&se.push(new cn(te.key,oe,w_(oe.value.mapValue),Nt.exists(!0)))}return d.mutationQueue.addMutationBatch(V,f,se,c)}).next($=>{b=$;let se=$.applyToLocalDocumentSet(w,K);return d.documentOverlayCache.saveOverlays(V,$.batchId,se)})}).then(()=>({batchId:b.batchId,changes:P_(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,d){let f=a.Au[a.currentUser.toKey()];f||(f=new Me(ae)),f=f.insert(c,d),a.Au[a.currentUser.toKey()]=f}(i,r.batchId,t),yield eo(i,r.changes),yield gl(i.remoteStore)}catch(r){let s=am(r,"Failed to persist write");t.reject(s)}})}function iy(n,e){return v(this,null,function*(){let t=ne(n);try{let i=yield GT(t.localStore,e);e.targetChanges.forEach((r,s)=>{let a=t.Eu.get(s);a&&(ge(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.cu=!0:r.modifiedDocuments.size>0?ge(a.cu,14607):r.removedDocuments.size>0&&(ge(a.cu,42227),a.cu=!1))}),yield eo(t,i,e)}catch(i){yield kr(i)}})}function F0(n,e,t){let i=ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.hu.forEach((s,a)=>{let c=a.view.Fa(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let d=ne(a);d.onlineState=c;let f=!1;d.queries.forEach((_,w)=>{for(let b of w.Sa)b.Fa(c)&&(f=!0)}),f&&um(d)}(i.eventManager,e),r.length&&i.lu.Y_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function px(n,e,t){return v(this,null,function*(){let i=ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),s=r&&r.key;if(s){let a=new Me(J.comparator);a=a.insert(s,Ht.newNoDocument(s,re.min()));let c=de().add(s),d=new Ma(re.min(),new Map,new Me(ae),a,c);yield iy(i,d),i.Iu=i.Iu.remove(s),i.Eu.delete(e),hm(i)}else yield uh(i.localStore,e,!1).then(()=>Dh(i,e,t)).catch(kr)})}function gx(n,e){return v(this,null,function*(){let t=ne(n),i=e.batch.batchId;try{let r=yield qT(t.localStore,e);sy(t,i,null),ry(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield eo(t,r)}catch(r){yield kr(r)}})}function _x(n,e,t){return v(this,null,function*(){let i=ne(n);try{let r=yield function(a,c){let d=ne(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,c).next(w=>(ge(w!==null,37113),_=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(i.localStore,e);sy(i,e,t),ry(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield eo(i,r)}catch(r){yield kr(r)}})}function ry(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function sy(n,e,t){let i=ne(n),r=i.Au[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Au[i.currentUser.toKey()]=r}}function Dh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Pu.get(e))n.hu.delete(i),t&&n.lu.gu(i,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(i=>{n.du.containsKey(i)||oy(n,i)})}function oy(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(im(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),hm(n))}function U0(n,e,t){for(let i of t)i instanceof Qa?(n.du.addReference(i.key,e),yx(n,i)):i instanceof Ya?(Q(dm,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,e),n.du.containsKey(i.key)||oy(n,i.key)):Z(19791,{pu:i})}function yx(n,e){let t=e.key,i=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(i)||(Q(dm,"New document in limbo: "+t),n.Tu.add(i),hm(n))}function hm(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new J(ke.fromString(e)),i=n.Vu.next();n.Eu.set(i,new kh(t)),n.Iu=n.Iu.insert(t,i),Y_(n.remoteStore,new qs(on(dl(t.path)),i,"TargetPurposeLimboResolution",Hh.le))}}function eo(n,e,t){return v(this,null,function*(){let i=ne(n),r=[],s=[],a=[];i.hu.isEmpty()||(i.hu.forEach((c,d)=>{a.push(i.fu(d,e,t).then(f=>{var _;if((f||t)&&i.isPrimaryClient){let w=f?!f.fromCache:(_=t?.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(f){r.push(f);let w=oh.Rs(d.targetId,f);s.push(w)}}))}),yield Promise.all(a),i.lu.Y_(r),yield function(d,f){return v(this,null,function*(){let _=ne(d);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>L.forEach(f,b=>L.forEach(b.ds,V=>_.persistence.referenceDelegate.addReference(w,b.targetId,V)).next(()=>L.forEach(b.As,V=>_.persistence.referenceDelegate.removeReference(w,b.targetId,V)))))}catch(w){if(!Pr(w))throw w;Q(nm,"Failed to update sequence numbers: "+w)}for(let w of f){let b=w.targetId;if(!w.fromCache){let V=_.xs.get(b),U=V.snapshotVersion,K=V.withLastLimboFreeSnapshotVersion(U);_.xs=_.xs.insert(b,K)}}})}(i.localStore,s))})}function vx(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){Q(dm,"User change. New user:",e.toKey());let i=yield K_(t.localStore,e);t.currentUser=e,function(s,a){s.Ru.forEach(c=>{c.forEach(d=>{d.reject(new W(O.CANCELLED,a))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield eo(t,i.ks)}})}function wx(n,e){let t=ne(n),i=t.Eu.get(e);if(i&&i.cu)return de().add(i.key);{let r=de(),s=t.Pu.get(e);if(!s)return r;for(let a of s){let c=t.hu.get(a);r=r.unionWith(c.view.eu)}return r}}function ay(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=px.bind(null,e),e.lu.Y_=ax.bind(null,e.eventManager),e.lu.gu=lx.bind(null,e.eventManager),e}function bx(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_x.bind(null,e),e}var ly=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=fl(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,i){return null}Cu(t,i){return null}Du(t){return $T(this.persistence,new lh,t.initialUser,this.serializer)}Su(t){return new Ba(sh.fi,this.serializer)}bu(t){return new dh}terminate(){return v(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Rh=class extends ly{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ge(this.persistence.referenceDelegate instanceof ja,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new Hd(i,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new Ba(i=>ja.fi(i,t),this.serializer)}};var Ex=(()=>{class n{initialize(t,i){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vx.bind(null,this.syncEngine),yield ox(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xh}()}createDatastore(t){let i=fl(t.databaseInfo.databaseId),r=function(a){return new gh(a)}(t.databaseInfo);return function(a,c,d,f){return new wh(a,c,d,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,a,c,d){return new Eh(r,s,a,c,d)}(this.localStore,this.datastore,t.asyncQueue,i=>F0(this.syncEngine,i,0),function(){return qa.C()?new qa:new hh}())}createSyncEngine(t,i){return function(s,a,c,d,f,_,w){let b=new Ph(s,a,c,d,f,_);return w&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return v(this,null,function*(){var t,i;yield function(s){return v(this,null,function*(){let a=ne(s);Q(Li,"RemoteStore shutting down."),a.da.add(5),yield Zs(a),a.Ra.shutdown(),a.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Ws=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var si="FirestoreClient",Vh=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ge.UNAUTHENTICATED,this.clientId=Ca.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,a=>v(this,null,function*(){Q(si,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(Q(si,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=am(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function id(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q(si,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>v(null,null,function*(){i.isEqual(r)||(yield K_(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function B0(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ix(n);Q(si,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>N0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>N0(e.remoteStore,r)),n._onlineComponents=e})}function Ix(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(si,"Using user provided OfflineComponentProvider");try{yield id(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===O.FAILED_PRECONDITION||r.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;gr("Error using user provided cache. Falling back to memory cache: "+t),yield id(n,new ly)}}else Q(si,"Using default OfflineComponentProvider"),yield id(n,new Rh(void 0));return n._offlineComponents})}function cy(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(si,"Using user provided OnlineComponentProvider"),yield B0(n,n._uninitializedComponentsProvider._online)):(Q(si,"Using default OnlineComponentProvider"),yield B0(n,new Ex))),n._onlineComponents})}function Tx(n){return cy(n).then(e=>e.syncEngine)}function Ja(n){return v(this,null,function*(){let e=yield cy(n),t=e.eventManager;return t.onListen=cx.bind(null,e.syncEngine),t.onUnlisten=hx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ux.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mx.bind(null,e.syncEngine),t})}function xx(n,e,t={}){let i=new zt;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(s,a,c,d,f){let _=new Ws({next:b=>{_.xu(),a.enqueueAndForget(()=>cm(s,w));let V=b.docs.has(c);!V&&b.fromCache?f.reject(new W(O.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&b.fromCache&&d&&d.source==="server"?f.reject(new W(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),w=new Hs(dl(c.path),_,{includeMetadataChanges:!0,Qa:!0});return lm(s,w)}(yield Ja(n),n.asyncQueue,e,t,i)})),i.promise}function Sx(n,e,t={}){let i=new zt;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(s,a,c,d,f){let _=new Ws({next:b=>{_.xu(),a.enqueueAndForget(()=>cm(s,w)),b.fromCache&&d.source==="server"?f.reject(new W(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),w=new Hs(c,_,{includeMetadataChanges:!0,Qa:!0});return lm(s,w)}(yield Ja(n),n.asyncQueue,e,t,i)})),i.promise}function uy(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var j0=new Map;function dy(n,e,t){if(!t)throw new W(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cx(n,e,t,i){if(e===!0&&i===!0)throw new W(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $0(n){if(!J.isDocumentKey(n))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q0(n){if(J.isDocumentKey(n))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _l(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z(12329,{type:typeof n})}function xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_l(n);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var hy="firestore.googleapis.com",G0=!0,Xa=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hy,this.ssl=G0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:G0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UT)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cr=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xa({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xa(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new sd;switch(i.type){case"firstParty":return new cd(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=j0.get(t);i&&(Q("ComponentProvider","Removing Datastore"),j0.delete(t),i.terminate())}(this),Promise.resolve()}};function my(n,e,t,i={}){var r;n=xt(n,Cr);let s=zn(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;s&&(Go(`https://${d}`),zo("Firestore",!0)),a.host!==hy&&a.host!==d&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:d,ssl:s,emulatorOptions:i});if(!Rt(f,c)&&(n._setSettings(f),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=Ge.MOCK_USER;else{_=bp(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ge(b)}n._authCredentials=new od(new xa(_,w))}}var oi=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},pt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Zn=class n extends oi{constructor(e,t,i){super(e,t,dl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function fy(n,e,...t){if(n=Re(n),dy("collection","path",e),n instanceof Cr){let i=ke.fromString(e,...t);return q0(i),new Zn(n,null,i)}{if(!(n instanceof pt||n instanceof Zn))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ke.fromString(e,...t));return q0(i),new Zn(n.firestore,null,i)}}function mm(n,e,...t){if(n=Re(n),arguments.length===1&&(e=Ca.newId()),dy("doc","path",e),n instanceof Cr){let i=ke.fromString(e,...t);return $0(i),new pt(n,null,new J(i))}{if(!(n instanceof pt||n instanceof Zn))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ke.fromString(e,...t));return $0(i),new pt(n.firestore,n instanceof Zn?n.converter:null,new J(i))}}var z0="AsyncQueue",Za=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Ga(this,"async_queue_retry"),this.rc=()=>{let i=nd();i&&Q(z0,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;let t=nd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=nd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new zt;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return v(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Pr(e))throw e;Q(z0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Dn("INTERNAL UNHANDLED ERROR: ",H0(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=t,t}enqueueAfterDelay(e,t,i){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let r=Ih.createAndSchedule(this,e,t,i,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&Z(47125,{cc:H0(this.Xu)})}verifyOperationInProgress(){}lc(){return v(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function H0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function W0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Kt=class extends Cr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Za,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Za(e),this._firestoreClient=void 0,yield e}})}};function py(n,e){let t=typeof n=="object"?n:Ei(),i=typeof n=="string"?n:e||Da,r=nr(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=wp("firestore");s&&my(r,...s)}return r}function to(n){if(n._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ax(n),n._firestoreClient}function Ax(n){var e,t,i;let r=n._freezeSettings(),s=function(c,d,f,_){return new fd(c,d,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,uy(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Vh(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(n._componentsProvider))}var Ks=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(it.fromBase64String(e))}catch(t){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Fi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ai=class{constructor(e){this._methodName=e}};var Qs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Ys=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var kx=/^__.*__$/,Mh=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oi(e,this.data,t,this.fieldTransforms)}},el=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new cn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ic:n})}}var tl=class n{constructor(e,t,i,r,s,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:i,Rc:!1});return r.Vc(e),r}mc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return il(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(gy(this.Ic)&&kx.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},Nh=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||fl(e)}bc(e,t,i,r=!1){return new tl({Ic:e,methodName:t,wc:i,path:Tt.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yl(n){let e=n._freezeSettings(),t=fl(n._databaseId);return new Nh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _y(n,e,t,i,r,s={}){let a=n.bc(s.merge||s.mergeFields?2:0,e,t,r);fm("Data must be an object, but it was:",a,i);let c=by(i,a),d,f;if(s.merge)d=new Mt(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){let _=[];for(let w of s.mergeFields){let b=Uh(e,w,t);if(!a.contains(b))throw new W(O.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Iy(_,b)||_.push(b)}d=new Mt(_),f=a.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,f=a.fieldTransforms;return new Mh(new It(c),d,f)}var nl=class n extends ai{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function yy(n,e,t){return new tl({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Oh=class n extends ai{_toFieldTransform(e){return new js(e.path,new Ni)}isEqual(e){return e instanceof n}},Lh=class n extends ai{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=yy(this,e,!0),i=this.Sc.map(s=>Bi(s,t)),r=new ni(i);return new js(e.path,r)}isEqual(e){return e instanceof n&&Rt(this.Sc,e.Sc)}},Fh=class n extends ai{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=yy(this,e,!0),i=this.Sc.map(s=>Bi(s,t)),r=new ii(i);return new js(e.path,r)}isEqual(e){return e instanceof n&&Rt(this.Sc,e.Sc)}};function vy(n,e,t,i){let r=n.bc(1,e,t);fm("Data must be an object, but it was:",r,i);let s=[],a=It.empty();li(i,(d,f)=>{let _=pm(e,d,t);f=Re(f);let w=r.mc(_);if(f instanceof nl)s.push(_);else{let b=Bi(f,w);b!=null&&(s.push(_),a.set(_,b))}});let c=new Mt(s);return new el(a,c,r.fieldTransforms)}function wy(n,e,t,i,r,s){let a=n.bc(1,e,t),c=[Uh(e,i,t)],d=[r];if(s.length%2!=0)throw new W(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)c.push(Uh(e,s[b])),d.push(s[b+1]);let f=[],_=It.empty();for(let b=c.length-1;b>=0;--b)if(!Iy(f,c[b])){let V=c[b],U=d[b];U=Re(U);let K=a.mc(V);if(U instanceof nl)f.push(V);else{let $=Bi(U,K);$!=null&&(f.push(V),_.set(V,$))}}let w=new Mt(f);return new el(_,w,a.fieldTransforms)}function Px(n,e,t,i=!1){return Bi(t,n.bc(i?4:3,e))}function Bi(n,e){if(Ey(n=Re(n)))return fm("Unsupported field value:",e,n),by(n,e);if(n instanceof ai)return function(i,r){if(!gy(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,r){let s=[],a=0;for(let c of i){let d=Bi(c,r.fc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fT(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ne.fromDate(i);return{timestampValue:Fa(r.serializer,s)}}if(i instanceof Ne){let s=new Ne(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fa(r.serializer,s)}}if(i instanceof Qs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ks)return{bytesValue:B_(r.serializer,i._byteString)};if(i instanceof pt){let s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ys)return function(a,c){return{mapValue:{fields:{[Qh]:{stringValue:Yh},[yr]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return em(c.serializer,f)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${_l(i)}`)}(n,e)}function by(n,e){let t={};return h_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(n,(i,r)=>{let s=Bi(r,e.Ac(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function Ey(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ne||n instanceof Qs||n instanceof Ks||n instanceof pt||n instanceof ai||n instanceof Ys)}function fm(n,e,t){if(!Ey(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=_l(t);throw i==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+i)}}function Uh(n,e,t){if((e=Re(e))instanceof Fi)return e._internalPath;if(typeof e=="string")return pm(n,e);throw il("Field path arguments must be of type string or ",n,!1,void 0,t)}var Dx=new RegExp("[~\\*/\\[\\]]");function pm(n,e,t){if(e.search(Dx)>=0)throw il(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fi(...e.split("."))._internalPath}catch{throw il(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function il(n,e,t,i,r){let s=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new W(O.INVALID_ARGUMENT,c+n+d)}function Iy(n,e){return n.some(t=>t.isEqual(e))}var rl=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(vl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bh=class extends rl{data(){return super.data()}};function vl(n,e){return typeof e=="string"?pm(n,e):e instanceof Fi?e._internalPath:e._delegate._internalPath}function Ty(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Js=class{},sl=class extends Js{};function xy(n,e,...t){let i=[];e instanceof Js&&i.push(e),i=i.concat(t),function(s){let a=s.filter(d=>d instanceof jh).length,c=s.filter(d=>d instanceof ol).length;if(a>1||a>0&&c>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var ol=class n extends sl{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Ay(e._query,t),new oi(e.firestore,e.converter,Cd(e._query,t))}_parse(e){let t=yl(e.firestore);return function(s,a,c,d,f,_,w){let b;if(f.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Q0(w,_);let U=[];for(let K of w)U.push(K0(d,s,K));b={arrayValue:{values:U}}}else b=K0(d,s,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Q0(w,_),b=Px(c,a,w,_==="in"||_==="not-in");return Ue.create(f,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Sy(n,e,t){let i=e,r=vl("where",n);return ol._create(r,i,t)}var jh=class n extends Js{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Wt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let a=r,c=s.getFlattenedFilters();for(let d of c)Ay(a,d),a=Cd(a,d)}(e._query,t),new oi(e.firestore,e.converter,Cd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $h=class n extends sl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,a){if(r.startAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mi(s,a)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(r,s){let a=r.explicitOrderBy.concat([s]);return new ti(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function Cy(n,e="asc"){let t=e,i=vl("orderBy",n);return $h._create(i,t)}function K0(n,e,t){if(typeof(t=Re(t))=="string"){if(t==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&t.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(ke.fromString(t));if(!J.isDocumentKey(i))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return m0(n,new J(i))}if(t instanceof pt)return m0(n,t._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_l(t)}.`)}function Q0(n,e){if(!Array.isArray(n)||n.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ay(n,e){let t=function(r,s){for(let a of r)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var qh=class{convertValue(e,t="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return li(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[yr].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Se(a.doubleValue));return new Ys(s)}convertGeoPoint(e){return new Qs(Se(e.latitude),Se(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=ul(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Us(e));default:return null}}convertTimestamp(e){let t=Rn(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=ke.fromString(e);ge(H_(i),9688,{name:e});let r=new Ra(i.get(1),i.get(3)),s=new J(i.popFirst(5));return r.isEqual(t)||Dn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function ky(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Di=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},al=class extends rl{constructor(e,t,i,r,s,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(vl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},pr=class extends al{data(e={}){return super.data(e)}},ll=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Di(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pr(this._firestore,this._userDataWriter,i.key,i,new Di(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let d=new pr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Di(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let d=new pr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Di(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,_=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),_=a.indexOf(c.doc.key)),{type:Rx(c.type),doc:d,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Rx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:n})}}function Py(n){n=xt(n,pt);let e=xt(n.firestore,Kt);return xx(to(e),n._key).then(t=>Ny(e,n,t))}var Xs=class extends qh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}};function Dy(n){n=xt(n,oi);let e=xt(n.firestore,Kt),t=to(e),i=new Xs(e);return Ty(n._query),Sx(t,n._query).then(r=>new ll(e,i,n,r))}function Ry(n,e,t,...i){n=xt(n,pt);let r=xt(n.firestore,Kt),s=yl(r),a;return a=typeof(e=Re(e))=="string"||e instanceof Fi?wy(s,"updateDoc",n._key,e,t,i):vy(s,"updateDoc",n._key,e),wl(r,[a.toMutation(n._key,Nt.exists(!0))])}function Vy(n){return wl(xt(n.firestore,Kt),[new xr(n._key,Nt.none())])}function My(n,e){let t=xt(n.firestore,Kt),i=mm(n),r=ky(n.converter,e);return wl(t,[_y(yl(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then(()=>i)}function gm(n,...e){var t,i,r;n=Re(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||W0(e[a])||(s=e[a],a++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(W0(e[a])){let w=e[a];e[a]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[a+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[a+2]=(r=w.complete)===null||r===void 0?void 0:r.bind(w)}let d,f,_;if(n instanceof pt)f=xt(n.firestore,Kt),_=dl(n._key.path),d={next:w=>{e[a]&&e[a](Ny(f,n,w))},error:e[a+1],complete:e[a+2]};else{let w=xt(n,oi);f=xt(w.firestore,Kt),_=w._query;let b=new Xs(f);d={next:V=>{e[a]&&e[a](new ll(f,b,w,V))},error:e[a+1],complete:e[a+2]},Ty(n._query)}return function(b,V,U,K){let $=new Ws(K),se=new Hs(V,$,U);return b.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return lm(yield Ja(b),se)})),()=>{$.xu(),b.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return cm(yield Ja(b),se)}))}}(to(f),_,c,d)}function wl(n,e){return function(i,r){let s=new zt;return i.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return fx(yield Tx(i),r,s)})),s.promise}(to(n),e)}function Ny(n,e,t){let i=t.docs.get(e._key),r=new Xs(n);return new al(n,r,e._key,i,new Di(t.hasPendingWrites,t.fromCache),e.converter)}var Gh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yl(e)}set(e,t,i){this._verifyNotCommitted();let r=rd(e,this._firestore),s=ky(r.converter,t,i),a=_y(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Nt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=rd(e,this._firestore),a;return a=typeof(t=Re(t))=="string"||t instanceof Fi?wy(this._dataReader,"WriteBatch.update",s._key,t,i,r):vy(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new xr(t._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rd(n,e){if((n=Re(n)).firestore!==e)throw new W(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function _m(){return new Oh("serverTimestamp")}function Oy(...n){return new Lh("arrayUnion",n)}function Ly(...n){return new Fh("arrayRemove",n)}function Fy(n){return to(n=xt(n,Kt)),new Gh(n,e=>wl(n,e))}(function(e,t=!0){(function(r){Ar=r})(Wn),$t(new ft("firestore",(i,{instanceIdentifier:r,options:s})=>{let a=i.getProvider("app").getImmediate(),c=new Kt(new ad(i.getProvider("auth-internal")),new ud(a,i.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(f.options.projectId,_)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ve(i0,r0,e),Ve(i0,r0,"esm2017")})();var bl=function(){return bl=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},bl.apply(this,arguments)};var Nx={includeMetadataChanges:!1};function ym(n,e){return e===void 0&&(e=Nx),new Ut(function(t){var i=gm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function Uy(n){return ym(n,{includeMetadataChanges:!0})}function By(n,e){return e===void 0&&(e={}),Uy(n).pipe(Ye(function(t){return vm(t,e)}))}function vm(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:bl(bl({},i),(t={},t[e.idField]=n.id,t))}function jy(n){return ym(n,{includeMetadataChanges:!0}).pipe(Ye(function(e){return e.docs}))}function $y(n,e){return e===void 0&&(e={}),jy(n).pipe(Ye(function(t){return t.map(function(i){return vm(i,e)})}))}var Qt=class{constructor(e){return e}},qy="firestore",wm=class{constructor(){return rr(qy)}};var bm=new wt("angularfire2.firestore-instances");function Ox(n,e){let t=ys(qy,n,e);return t&&new Qt(t)}function Lx(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Qt(i)}}var Fx={provide:wm,deps:[[new kt,bm]]},Ux={provide:Qt,useFactory:Ox,deps:[[new kt,bm],xn]};function Gy(n,...e){return Ve("angularfire",Kn.full,"fst"),Ji([Ux,Fx,{provide:bm,useFactory:Lx(n),multi:!0,deps:[Zt,_n,Qn,Ti,[new kt,Ps],[new kt,sr],...e]}])}var Rr=Ae($y,!0);var zy=Ae(By,!0);var ji=Ae(My,!0,2);var un=Ae(fy,!0,2);var El=Ae(Vy,!0,2);var rt=Ae(mm,!0,2);var Il=Ae(Py,!0);var Vr=Ae(Dy,!0);var Hy=Ae(py,!0);var Em=Ae(Cy,!0,2),Yt=Ae(xy,!0,2);var Jt=Ae(Ry,!0,2);var dn=Ae(Sy,!0,2),Im=Ae(Fy,!0,2);var Ce=class n{constructor(e){this.auth=e;this.user$=Jg(this.auth)}user$;signInWithGoogle(){let e=new Bu;return Zg(this.auth,e)}signOut(){return e0(this.auth)}static \u0275fac=function(t){return new(t||n)(Oe(Ai))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};function Bx(n,e){if(n&1&&(ht(0),g(1),mt()),n&2){let t=e.ngIf;T(),le(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function jx(n,e){n&1&&g(0," Welcome! ")}function $x(n,e){n&1&&(u(0,"div",50),P(1,"div",51),u(2,"span",52),g(3,"Loading quote..."),m()())}function qx(n,e){if(n&1&&(u(0,"div",53)(1,"blockquote",54),g(2),m(),u(3,"p",55),g(4),m()()),n&2){let t=M();T(2),le(' "',t.homeQuote.q,'" '),T(2),le(" \u2014 ",t.homeQuote.a," ")}}function Gx(n,e){if(n&1){let t=X();u(0,"div",56)(1,"p",57),g(2),m(),u(3,"button",58),N("click",function(){B(t);let r=M();return j(r.refreshQuote())}),g(4," Try again "),m()()}if(n&2){let t=M();T(2),Y(t.quoteError)}}var Tl=class n{constructor(e,t,i){this.authService=e;this.router=t;this.quotesService=i}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}navigateToFamilyTree(){this.router.navigate(["/family-tree"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)(G(Ce),G($e),G(pp))};static \u0275cmp=he({type:n,selectors:[["app-home"]],decls:91,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-yellow-100","dark:bg-yellow-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-yellow-200","dark:group-hover:bg-yellow-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4s-3.5 3-3.5 6c0 1.5 1 4 3.5 4s3.5-2.5 3.5-4c0-3-3.5-6-3.5-6zM12 14v4m-4-4h8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4a4 4 0 100-8 4 4 0 000 8zM3 20h18"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-yellow-600","dark:group-hover:text-yellow-400","transition-colors","duration-200"],["routerLink","/premier-league",1,"card","group"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-red-100","dark:bg-red-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-red-200","dark:group-hover:bg-red-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","sm:w-6","sm:h-6","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-red-600","dark:group-hover:text-red-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,i){if(t&1){let r=X();u(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),H(4,Bx,2,1,"ng-container",5),ie(5,"async"),H(6,jx,1,0,"ng-template",null,0,En),g(8," Explore some of my utilities, tools and research items. "),m()(),u(9,"div",6)(10,"div",7),N("click",function(){return B(r),j(i.navigateToLists())}),u(11,"div",8)(12,"div",9)(13,"div",10),F(),u(14,"svg",11),P(15,"path",12),m()()(),z(),u(16,"div",13)(17,"h3",14),g(18," Todo Lists "),m(),u(19,"p",15),g(20," Create and manage your todo lists "),m()()()(),u(21,"div",7),N("click",function(){return B(r),j(i.navigateToIpLookup())}),u(22,"div",8)(23,"div",9)(24,"div",16),F(),u(25,"svg",17),P(26,"path",18)(27,"path",19),m()()(),z(),u(28,"div",13)(29,"h3",20),g(30," IP Lookup "),m(),u(31,"p",15),g(32," Check your IP address and location "),m()()()(),u(33,"div",7),N("click",function(){return B(r),j(i.navigateToQuotes())}),u(34,"div",8)(35,"div",9)(36,"div",21),F(),u(37,"svg",22),P(38,"path",23),m()()(),z(),u(39,"div",13)(40,"h3",24),g(41," Quotes "),m(),u(42,"p",15),g(43," Get inspired with random quotes "),m()()()(),u(44,"div",7),N("click",function(){return B(r),j(i.showProfile())}),u(45,"div",8)(46,"div",9)(47,"div",25),F(),u(48,"svg",26),P(49,"path",27),m()()(),z(),u(50,"div",13)(51,"h3",28),g(52," Profile "),m(),u(53,"p",15),g(54," View your account information "),m()()()(),u(55,"div",7),N("click",function(){return B(r),j(i.navigateToFamilyTree())}),u(56,"div",8)(57,"div",9)(58,"div",29),F(),u(59,"svg",30),P(60,"path",31)(61,"path",32),m()()(),z(),u(62,"div",13)(63,"h3",33),g(64," Family Tree "),m(),u(65,"p",15),g(66," Manage your family tree "),m()()()(),u(67,"a",34)(68,"div",8)(69,"div",9)(70,"div",35),F(),u(71,"svg",36),P(72,"path",37),m()()(),z(),u(73,"div",13)(74,"h3",38),g(75," Premier League Standings "),m(),u(76,"p",15),g(77," View the current Premier League standings. "),m()()()()(),u(78,"div",39)(79,"div",40)(80,"div",41)(81,"h2",42),F(),u(82,"svg",43),P(83,"path",23),m(),g(84," Daily Inspiration "),m(),z(),u(85,"button",44),N("click",function(){return B(r),j(i.refreshQuote())}),F(),u(86,"svg",45),P(87,"path",46),m()()(),H(88,$x,4,0,"div",47)(89,qx,5,2,"div",48)(90,Gx,5,1,"div",49),m()()()()}if(t&2){let r=yn(7);T(4),R("ngIf",ue(5,6,i.user$))("ngIfElse",r),T(81),R("disabled",i.quoteLoading),T(3),R("ngIf",i.quoteLoading),T(),R("ngIf",!i.quoteLoading&&i.homeQuote),T(),R("ngIf",!i.quoteLoading&&!i.homeQuote&&i.quoteError)}},dependencies:[me,xe,gt,Uo],encapsulation:2})};var xl=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(Oe(er))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};function Hx(n,e){n&1&&(u(0,"div",6)(1,"div",7),P(2,"div",8),u(3,"span",9),g(4,"Loading IP information..."),m()()())}function Wx(n,e){if(n&1&&(u(0,"div",10)(1,"div",11),F(),u(2,"svg",12),P(3,"path",13),m(),z(),u(4,"div")(5,"h3",14),g(6,"Error"),m(),u(7,"p",15),g(8),m()()()()),n&2){let t=M();T(8),Y(t.error)}}function Kx(n,e){n&1&&(F(),u(0,"svg",51),P(1,"path",52),m())}function Qx(n,e){n&1&&(F(),u(0,"svg",53),P(1,"path",52),m())}function Yx(n,e){if(n&1){let t=X();u(0,"div",16)(1,"div",17)(2,"div",18)(3,"h1",19),g(4,"IP Address Lookup"),m(),u(5,"p",20),g(6,"Get detailed information about your current IP address and location"),m()(),u(7,"div",21)(8,"button",22),N("click",function(){B(t);let r=M();return j(r.refreshIpInfo())}),H(9,Kx,2,0,"svg",23)(10,Qx,2,0,"svg",24),u(11,"span"),g(12),m()()()(),u(13,"div",25)(14,"div",26)(15,"div",27),F(),u(16,"svg",28),P(17,"path",29),m()(),z(),u(18,"div")(19,"h2",30),g(20,"Your IP Address"),m(),u(21,"p",9),g(22,"Current network information"),m()()(),u(23,"div",31)(24,"div",32)(25,"div")(26,"label",33),g(27,"IP Address"),m(),u(28,"div",34)(29,"code",35),g(30),m(),u(31,"button",36),N("click",function(){B(t);let r=M();return j(r.copyToClipboard(r.ipInfo.ip))}),F(),u(32,"svg",37),P(33,"path",38),m()()()(),z(),u(34,"div")(35,"label",33),g(36,"Type"),m(),u(37,"span",39),g(38),m()()(),u(39,"div",32)(40,"div")(41,"label",33),g(42,"Continent"),m(),u(43,"p",40),g(44),m()(),u(45,"div")(46,"label",33),g(47,"Country"),m(),u(48,"p",40),g(49),m()()()()(),u(50,"div",41)(51,"div",25)(52,"h3",42),F(),u(53,"svg",43),P(54,"path",44)(55,"path",45),m(),g(56," Location Details "),m(),z(),u(57,"div",46)(58,"div",47)(59,"span",48),g(60,"Region:"),m(),u(61,"span",49),g(62),m()(),u(63,"div",47)(64,"span",48),g(65,"City:"),m(),u(66,"span",49),g(67),m()(),u(68,"div",47)(69,"span",48),g(70,"ZIP Code:"),m(),u(71,"span",49),g(72),m()(),u(73,"div",47)(74,"span",48),g(75,"Latitude:"),m(),u(76,"span",49),g(77),m()(),u(78,"div",47)(79,"span",48),g(80,"Longitude:"),m(),u(81,"span",49),g(82),m()()()(),u(83,"div",25)(84,"h3",42),F(),u(85,"svg",43),P(86,"path",50),m(),g(87," Network Information "),m(),z(),u(88,"div",46)(89,"div",47)(90,"span",48),g(91,"ISP:"),m(),u(92,"span",49),g(93),m()(),u(94,"div",47)(95,"span",48),g(96,"Organization:"),m(),u(97,"span",49),g(98),m()(),u(99,"div",47)(100,"span",48),g(101,"ASN:"),m(),u(102,"span",49),g(103),m()()()()()()}if(n&2){let t=M();T(8),R("disabled",t.isLoading),T(),R("ngIf",!t.isLoading),T(),R("ngIf",t.isLoading),T(2),Y(t.isLoading?"Refreshing...":"Refresh"),T(18),Y(t.ipInfo.ip),T(8),le(" ",t.ipInfo.type||"Unknown"," "),T(6),Y(t.ipInfo.continent_name||"Unknown"),T(5),Y(t.ipInfo.country_name||"Unknown"),T(13),Y(t.ipInfo.region_name||"Unknown"),T(5),Y(t.ipInfo.city||"Unknown"),T(5),Y(t.ipInfo.zip||"Unknown"),T(5),Y(t.ipInfo.latitude||"Unknown"),T(5),Y(t.ipInfo.longitude||"Unknown"),T(11),Y((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),T(5),Y((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),T(5),Y((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown")}}var Sl=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;breadcrumbItems=[{label:"Home",route:"/"},{label:"IP Lookup",route:void 0}];ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)(G(xl))};static \u0275cmp=he({type:n,selectors:[["app-ip-lookup"]],decls:6,vars:4,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-300","mt-1","sm:mt-2"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"click","disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),P(2,"app-breadcrumb",2),H(3,Hx,5,0,"div",3)(4,Wx,9,1,"div",4)(5,Yx,104,16,"div",5),m()()),t&2&&(T(2),R("items",i.breadcrumbItems),T(),R("ngIf",i.isLoading),T(),R("ngIf",i.error),T(),R("ngIf",i.ipInfo&&!i.isLoading))},dependencies:[me,xe,Bo,_t],encapsulation:2})};var rv=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(G(us),G(vi))};static \u0275dir=Je({type:n})}return n})(),Cm=(()=>{class n extends rv{static \u0275fac=(()=>{let t;return function(r){return(t||(t=cs(n)))(r||n)}})();static \u0275dir=Je({type:n,features:[Pt]})}return n})(),lo=new wt("");var Jx={provide:lo,useExisting:gn(()=>je),multi:!0};function Xx(){let n=Lc()?Lc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Zx=new wt(""),je=(()=>{class n extends rv{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Xx())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(G(us),G(vi),G(Zx,8))};static \u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&N("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Bt([Jx]),Pt]})}return n})();function Am(n){return n==null||km(n)===0}function km(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var co=new wt(""),Fl=new wt(""),eS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Be=class{static min(e){return tS(e)}static max(e){return nS(e)}static required(e){return sv(e)}static requiredTrue(e){return iS(e)}static email(e){return rS(e)}static minLength(e){return sS(e)}static maxLength(e){return oS(e)}static pattern(e){return aS(e)}static nullValidator(e){return Al()}static compose(e){return dv(e)}static composeAsync(e){return hv(e)}};function tS(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function nS(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function sv(n){return Am(n.value)?{required:!0}:null}function iS(n){return n.value===!0?null:{required:!0}}function rS(n){return Am(n.value)||eS.test(n.value)?null:{email:!0}}function sS(n){return e=>{let t=e.value?.length??km(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function oS(n){return e=>{let t=e.value?.length??km(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function aS(n){if(!n)return Al;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Am(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Al(n){return null}function ov(n){return n!=null}function av(n){return Yf(n)?vt(n):n}function lv(n){let e={};return n.forEach(t=>{e=t!=null?ye(ye({},e),t):e}),Object.keys(e).length===0?null:e}function cv(n,e){return e.map(t=>t(n))}function lS(n){return!n.validate}function uv(n){return n.map(e=>lS(e)?e:t=>e.validate(t))}function dv(n){if(!n)return null;let e=n.filter(ov);return e.length==0?null:function(t){return lv(cv(t,e))}}function Pm(n){return n!=null?dv(uv(n)):null}function hv(n){if(!n)return null;let e=n.filter(ov);return e.length==0?null:function(t){let i=cv(t,e).map(av);return qf(i).pipe(Ye(lv))}}function Dm(n){return n!=null?hv(uv(n)):null}function Qy(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mv(n){return n._rawValidators}function fv(n){return n._rawAsyncValidators}function Tm(n){return n?Array.isArray(n)?n:[n]:[]}function kl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Yy(n,e){let t=Tm(e);return Tm(n).forEach(r=>{kl(t,r)||t.push(r)}),t}function Jy(n,e){return Tm(e).filter(t=>!kl(n,t))}var Pl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Pm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},On=class extends Pl{name;get formDirective(){return null}get path(){return null}},qi=class extends Pl{_parent=null;name=null;valueAccessor=null},Dl=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},OD=Te(ye({},cS),{"[class.ng-submitted]":"isSubmitted"}),He=(()=>{class n extends Dl{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(G(qi,2))};static \u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ds("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Pt]})}return n})(),We=(()=>{class n extends Dl{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(G(On,10))};static \u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ds("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Pt]})}return n})();var no="VALID",Cl="INVALID",Mr="PENDING",io="DISABLED",ci=class{},Rl=class extends ci{value;source;constructor(e,t){super(),this.value=e,this.source=t}},so=class extends ci{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},oo=class extends ci{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Nr=class extends ci{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Vl=class extends ci{source;constructor(e){super(),this.source=e}},Ml=class extends ci{source;constructor(e){super(),this.source=e}};function Rm(n){return(Ul(n)?n.validators:n)||null}function uS(n){return Array.isArray(n)?Pm(n):n||null}function Vm(n,e){return(Ul(e)?e.asyncValidators:n)||null}function dS(n){return Array.isArray(n)?Dm(n):n||null}function Ul(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function pv(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new ls(1e3,"");if(!i[t])throw new ls(1001,"")}function gv(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new ls(1002,"")})}var Or=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return In(this.statusReactive)}set status(e){In(()=>this.statusReactive.set(e))}_status=Xi(()=>this.statusReactive());statusReactive=_i(void 0);get valid(){return this.status===no}get invalid(){return this.status===Cl}get pending(){return this.status==Mr}get disabled(){return this.status===io}get enabled(){return this.status!==io}errors;get pristine(){return In(this.pristineReactive)}set pristine(e){In(()=>this.pristineReactive.set(e))}_pristine=Xi(()=>this.pristineReactive());pristineReactive=_i(!0);get dirty(){return!this.pristine}get touched(){return In(this.touchedReactive)}set touched(e){In(()=>this.touchedReactive.set(e))}_touched=Xi(()=>this.touchedReactive());touchedReactive=_i(!1);get untouched(){return!this.touched}_events=new Uf;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jy(e,this._rawAsyncValidators))}hasValidator(e){return kl(this._rawValidators,e)}hasAsyncValidator(e){return kl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Te(ye({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new oo(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new oo(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Te(ye({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new so(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new so(!0,i))}markAsPending(e={}){this.status=Mr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Te(ye({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=io,this.errors=null,this._forEachChild(r=>{r.disable(Te(ye({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rl(this.value,i)),this._events.next(new Nr(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te(ye({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=no,this._forEachChild(i=>{i.enable(Te(ye({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te(ye({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===no||this.status===Mr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rl(this.value,t)),this._events.next(new Nr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Te(ye({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?io:no}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Mr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=av(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Nr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?io:this.errors?Cl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mr)?Mr:this._anyControlsHaveStatus(Cl)?Cl:no}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new so(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new oo(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ul(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dS(this._rawAsyncValidators)}},Lr=class extends Or{constructor(e,t,i){super(Rm(t),Vm(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){gv(this,!0,e),Object.keys(e).forEach(i=>{pv(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xm=class extends Lr{};var uo=new wt("",{providedIn:"root",factory:()=>Bl}),Bl="always";function _v(n,e){return[...e.path,n]}function Nl(n,e,t=Bl){Mm(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),mS(n,e),pS(n,e),fS(n,e),hS(n,e)}function Xy(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ll(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ol(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hS(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Mm(n,e){let t=mv(n);e.validator!==null?n.setValidators(Qy(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=fv(n);e.asyncValidator!==null?n.setAsyncValidators(Qy(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Ol(e._rawValidators,r),Ol(e._rawAsyncValidators,r)}function Ll(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=mv(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=fv(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Ol(e._rawValidators,i),Ol(e._rawAsyncValidators,i),t}function mS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yv(n,e)})}function fS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yv(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pS(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vv(n,e){n==null,Mm(n,e)}function gS(n,e){return Ll(n,e)}function wv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _S(n){return Object.getPrototypeOf(n.constructor)===Cm}function bv(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ev(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===je?t=s:_S(s)?i=s:r=s}),r||i||t||null}function yS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var vS={provide:On,useExisting:gn(()=>Gi)},ro=Promise.resolve(),Gi=(()=>{class n extends On{callSetDisabledState;get submitted(){return In(this.submittedReactive)}_submitted=Xi(()=>this.submittedReactive());submittedReactive=_i(!1);_directives=new Set;form;ngSubmit=new Ee;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Lr({},Pm(t),Dm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ro.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Nl(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ro.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ro.then(()=>{let i=this._findContainer(t.path),r=new Lr({});vv(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ro.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){ro.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),bv(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Vl(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Ml(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(G(co,10),G(Fl,10),G(uo,8))};static \u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&N("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bt([vS]),Pt]})}return n})();function Zy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ev(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ao=class extends Or{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Rm(t),Vm(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ul(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ev(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zy(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zy(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ev(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wS=n=>n instanceof ao;var bS={provide:qi,useExisting:gn(()=>zi)},tv=Promise.resolve(),zi=(()=>{class n extends qi{_changeDetectorRef;callSetDisabledState;control=new ao;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(t,i,r,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ev(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Nl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){tv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Oc(i);tv.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?_v(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(G(On,9),G(co,10),G(Fl,10),G(lo,10),G(rp,8),G(uo,8))};static \u0275dir=Je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bt([bS]),Pt,yi]})}return n})();var Ke=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Iv=new wt("");var ES={provide:On,useExisting:gn(()=>St)},St=(()=>{class n extends On{callSetDisabledState;get submitted(){return In(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Xi(()=>this._submittedReactive());_submittedReactive=_i(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ee;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ll(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Nl(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Xy(t.control||null,t,!1),yS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),bv(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Vl(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Ml(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Xy(i||null,t),wS(r)&&(Nl(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);vv(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&gS(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mm(this.form,this),this._oldForm&&Ll(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(G(co,10),G(Fl,10),G(uo,8))};static \u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&N("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bt([ES]),Pt,yi]})}return n})();var IS={provide:qi,useExisting:gn(()=>Ct)},Ct=(()=>{class n extends qi{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ee;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,a){super(),this._ngModelWarningConfig=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ev(this,s)}ngOnChanges(t){this._added||this._setUpControl(),wv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return _v(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(G(On,13),G(co,10),G(Fl,10),G(lo,10),G(Iv,8))};static \u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Bt([IS]),Pt,yi]})}return n})();var TS={provide:lo,useExisting:gn(()=>Fr),multi:!0};function Tv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function xS(n){return n.split(":")[0]}var Fr=(()=>{class n extends Cm{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=Tv(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=xS(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=cs(n)))(r||n)}})();static \u0275dir=Je({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&N("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([TS]),Pt]})}return n})(),jl=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Tv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(G(vi),G(us),G(Fr,9))};static \u0275dir=Je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),SS={provide:lo,useExisting:gn(()=>xv),multi:!0};function nv(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function CS(n){return n.split(":")[0]}var xv=(()=>{class n extends Cm{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let d=a[c],f=this._getOptionValue(d.value);r.push(f)}}else{let a=i.options;for(let c=0;c<a.length;c++){let d=a[c];if(d.selected){let f=this._getOptionValue(d.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=CS(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=cs(n)))(r||n)}})();static \u0275dir=Je({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&N("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([SS]),Pt]})}return n})(),$l=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(nv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(nv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(G(vi),G(us),G(xv,9))};static \u0275dir=Je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var AS=(()=>{class n{_validator=Al;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Al,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Je({type:n,features:[yi]})}return n})();var kS={provide:co,useExisting:gn(()=>ho),multi:!0};var ho=(()=>{class n extends AS{required;inputName="required";normalizeInput=Oc;createValidator=t=>sv;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=cs(n)))(r||n)}})();static \u0275dir=Je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Jf("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Bt([kS]),Pt]})}return n})();var Sv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Lo({type:n});static \u0275inj=Mo({})}return n})(),Sm=class extends Or{constructor(e,t,i){super(Rm(t),Vm(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){gv(this,!1,e),e.forEach((i,r)=>{pv(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function iv(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ot=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return iv(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Lr(r,s)}record(t,i=null){let r=this._reduceControls(t);return new xm(r,i)}control(t,i,r){let s={};return this.useNonNullable?(iv(i)?s=i:(s.validators=i,s.asyncValidators=r),new ao(t,Te(ye({},s),{nonNullable:!0}))):new ao(t,i,r)}array(t,i,r){let s=t.map(a=>this._createControl(a));return new Sm(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof ao)return t;if(t instanceof Or)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ur=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uo,useValue:t.callSetDisabledState??Bl}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Lo({type:n});static \u0275inj=Mo({imports:[Sv]})}return n})(),Lt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Iv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uo,useValue:t.callSetDisabledState??Bl}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Lo({type:n});static \u0275inj=Mo({imports:[Sv]})}return n})();function PS(n,e){if(n&1&&(u(0,"span",26),g(1),m()),n&2){let t=M(3);T(),qn(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function DS(n,e){if(n&1){let t=X();u(0,"form",9),N("ngSubmit",function(){B(t);let r=M(2);return j(r.saveEditList())}),u(1,"div")(2,"label",10),g(3," Title * "),m(),u(4,"input",11),bn("ngModelChange",function(r){B(t);let s=M(2);return wn(s.editListTitle,r)||(s.editListTitle=r),j(r)}),m()(),u(5,"div")(6,"label",12),g(7," Description (optional) "),m(),u(8,"textarea",13),bn("ngModelChange",function(r){B(t);let s=M(2);return wn(s.editListDescription,r)||(s.editListDescription=r),j(r)}),m()(),u(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),g(13,"Sharing"),m(),u(14,"p",17),g(15," Share this list with others "),H(16,PS,2,2,"span",18),m()(),u(17,"button",19),N("click",function(){B(t);let r=M(2);return j(r.switchToShare())}),F(),u(18,"svg",20),P(19,"path",21),m(),z(),u(20,"span"),g(21,"Share"),m()()()(),u(22,"div",22)(23,"button",23),N("click",function(){B(t);let r=M(2);return j(r.onClose())}),g(24,"Cancel"),m(),u(25,"button",24),F(),u(26,"svg",20),P(27,"path",25),m(),z(),u(28,"span"),g(29,"Save Changes"),m()()()()}if(n&2){let t=M(2);T(4),vn("ngModel",t.editListTitle),T(4),vn("ngModel",t.editListDescription),T(8),R("ngIf",t.getSharedCount(t.list)>0),T(9),R("disabled",!t.editListTitle.trim())}}function RS(n,e){if(n&1){let t=X();u(0,"form",9),N("ngSubmit",function(){B(t);let r=M(2);return j(r.confirmShare())}),u(1,"div")(2,"label",27),g(3," Email Address "),m(),u(4,"input",28),bn("ngModelChange",function(r){B(t);let s=M(2);return wn(s.shareEmail,r)||(s.shareEmail=r),j(r)}),m()(),u(5,"div",22)(6,"button",23),N("click",function(){B(t);let r=M(2);return j(r.switchToEdit())}),g(7,"Back"),m(),u(8,"button",24),F(),u(9,"svg",20),P(10,"path",21),m(),z(),u(11,"span"),g(12,"Share"),m()()()()}if(n&2){let t=M(2);T(4),vn("ngModel",t.shareEmail),T(4),R("disabled",!t.shareEmail.trim())}}function VS(n,e){if(n&1){let t=X();u(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),g(4),m(),u(5,"button",5),N("click",function(){B(t);let r=M();return j(r.onClose())}),F(),u(6,"svg",6),P(7,"path",7),m()()(),H(8,DS,30,4,"form",8)(9,RS,13,2,"form",8),m()()}if(n&2){let t=M();T(4),Y(t.mode==="edit"?"Edit List":"Share List"),T(4),R("ngIf",t.mode==="edit"),T(),R("ngIf",t.mode==="share")}}var Br=class n{open=!1;list=null;mode="edit";save=new Ee;share=new Ee;close=new Ee;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[yi],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&H(0,VS,10,3,"div",0),t&2&&R("ngIf",i.open)},dependencies:[me,xe,Ur,Ke,je,He,We,ho,zi,Gi],encapsulation:2})};var ui=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=un(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(ut(e=>{if(!e)return ct([]);let t=Yt(this.listsCollection,dn("owner","==",e.uid),Em("updatedAt","desc")),i=Yt(this.listsCollection,dn("sharedWith","array-contains",e.email),Em("updatedAt","desc"));return vt(Promise.all([Vr(t),Vr(i)])).pipe(Ye(([r,s])=>{let a=r.docs.map(_=>Te(ye({},_.data()),{id:_.id})),c=s.docs.map(_=>Te(ye({},_.data()),{id:_.id}));return[...a,...c].filter((_,w,b)=>w===b.findIndex(V=>V.id===_.id)).sort((_,w)=>new Date(w.updatedAt).getTime()-new Date(_.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(At(1),ut(i=>{if(!i)return ct(Promise.reject("User not logged in"));let r=new Date,s={title:e,owner:i.uid,sharedWith:[],createdAt:r,updatedAt:r,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),vt(ji(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=rt(this.firestore,`todoLists/${e.id}`),s=e,{id:i}=s,r=Yi(s,["id"]);return r.updatedAt=new Date,Object.keys(r).forEach(a=>{r[a]===void 0&&delete r[a]}),console.log("Updating list with data:",r),Jt(t,r)}deleteList(e){let t=rt(this.firestore,`todoLists/${e}`);return El(t)}shareList(e,t){return v(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let i=rt(this.firestore,`todoLists/${e}`);try{let r=yield Il(i);if(!r.exists())throw new Error("List not found");let s=r.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let a=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",a);let c={sharedWith:a,updatedAt:new Date};console.log("TodoListService: Updating list with data:",c),yield Jt(i,c),console.log("TodoListService: List shared successfully")}catch(r){throw console.error("TodoListService: Error sharing list:",r),r}})}unshareList(e,t){return v(this,null,function*(){let i=rt(this.firestore,`todoLists/${e}`),r=yield Il(i);if(!r.exists())throw new Error("List not found");let a=(r.data().sharedWith||[]).filter(c=>c!==t);yield Jt(i,{sharedWith:a,updatedAt:new Date})})}hasAccess(e){return v(this,null,function*(){return as(this.authService.user$.pipe(At(1),ut(t=>t?vt(Il(rt(this.firestore,`todoLists/${e}`))).pipe(Ye(i=>{if(!i.exists())return!1;let r=i.data();return r.owner===t.uid||(r.sharedWith||[]).includes(t.email||"")||r.isPublic||!1})):ct(!1))))})}static \u0275fac=function(t){return new(t||n)(Oe(Qt),Oe(Ce))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};var ql=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=un(this.firestore,"todos")}firestore=dt(Qt);todosCollection;getTodosForList(e){return this.authService.user$.pipe(ut(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),ct([]);console.log("TodoService: Creating query for todos in list:",e);let i=Yt(this.todosCollection,dn("listId","==",e));return console.log("TodoService: Executing todos query"),Rr(i,{idField:"id"}).pipe(Ye(r=>r),Vo(r=>(console.error("TodoService: Error loading todos:",r),ct([]))))}))}addTodo(e,t){return this.authService.user$.pipe(At(1),ut(i=>i?(console.log("Adding todo for user:",i.uid,"to list:",e),vt(Vr(Yt(this.todosCollection,dn("listId","==",e)))).pipe(ut(r=>{let s=r.size,a=new Date,c={title:t,completed:!1,listId:e,position:s,createdBy:i.uid,createdAt:a,updatedAt:a};return console.log("Creating todo with data:",c),vt(ji(this.todosCollection,c))}))):(console.error("User not logged in"),ct(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=rt(this.firestore,`todos/${e.id}`),s=e,{id:i}=s,r=Yi(s,["id"]);return r.updatedAt=new Date,Jt(t,r)}deleteTodo(e){let t=rt(this.firestore,`todos/${e}`);return El(t)}updateTodoPosition(e){let t=Im(this.firestore);return e.forEach((i,r)=>{if(i.id){let s=rt(this.firestore,`todos/${i.id}`);t.update(s,{position:r,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return vt(Vr(Yt(this.todosCollection,dn("listId","==",e)))).pipe(ut(t=>{let i=Im(this.firestore);return t.docs.forEach(r=>{i.delete(r.ref)}),vt(i.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(Oe(Ce),Oe(ui))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};function NS(n,e){n&1&&(u(0,"div",7)(1,"div",8),P(2,"div",9),u(3,"span",10),g(4,"Loading todo list..."),m()()())}function OS(n,e){if(n&1&&(u(0,"div",11)(1,"div",12),F(),u(2,"svg",13),P(3,"path",14),m(),z(),u(4,"div")(5,"h3",15),g(6,"Error"),m(),u(7,"p",16),g(8),m()()()()),n&2){let t=M();T(8),Y(t.error)}}function LS(n,e){n&1&&(F(),u(0,"svg",24),P(1,"path",46),m())}function FS(n,e){n&1&&(F(),u(0,"svg",47),P(1,"path",48),m())}function US(n,e){n&1&&(u(0,"div",49),F(),u(1,"svg",50),P(2,"path",51),m(),z(),u(3,"h3",52),g(4,"No todos yet"),m(),u(5,"p",53),g(6,"Add your first todo item above to get started."),m()())}function BS(n,e){if(n&1){let t=X();u(0,"div",56)(1,"input",57),N("change",function(){let r=B(t).$implicit,s=M(3);return j(s.toggleTodo(r))}),m(),u(2,"div",19)(3,"input",58),N("blur",function(r){let s=B(t).$implicit,a=M(3);return j(a.updateTodoText(s,r))}),m()(),u(4,"button",59),N("click",function(){let r=B(t).$implicit,s=M(3);return j(s.deleteTodo(r))}),F(),u(5,"svg",60),P(6,"path",61),m()()()}if(n&2){let t=e.$implicit;T(),R("checked",t.completed),T(2),ds("line-through",t.completed)("text-gray-500",t.completed),R("value",t.title)}}function jS(n,e){if(n&1&&(u(0,"div",54),H(1,BS,7,6,"div",55),m()),n&2){let t=M(2);T(),R("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function $S(n,e){if(n&1){let t=X();u(0,"div",17)(1,"div",18)(2,"div",19)(3,"h1",20),g(4),m(),u(5,"p",21),g(6),m()(),u(7,"div",22)(8,"button",23),N("click",function(){B(t);let r=M();return j(r.editList())}),F(),u(9,"svg",24),P(10,"path",25),m(),z(),u(11,"span"),g(12,"Edit List"),m()(),u(13,"button",26),N("click",function(){B(t);let r=M();return j(r.shareList())}),F(),u(14,"svg",24),P(15,"path",27),m(),z(),u(16,"span"),g(17,"Share"),m()()()(),u(18,"div",28)(19,"form",29),N("ngSubmit",function(){B(t);let r=M();return j(r.addTodo())}),u(20,"input",30),bn("ngModelChange",function(r){B(t);let s=M();return wn(s.newTodoText,r)||(s.newTodoText=r),j(r)}),m(),u(21,"button",31),H(22,LS,2,0,"svg",32)(23,FS,2,0,"svg",33),u(24,"span"),g(25),m()()()(),u(26,"div",28)(27,"div",34)(28,"h2",35),g(29,"Todo Items"),m(),u(30,"div",36)(31,"span"),g(32),m(),u(33,"div",37),P(34,"div",38),m()()(),H(35,US,7,0,"div",39)(36,jS,2,2,"div",40),m(),u(37,"div",28)(38,"h3",41),g(39,"List Information"),m(),u(40,"div",42)(41,"div",43)(42,"span",44),g(43,"Created:"),m(),u(44,"span",45),g(45),ie(46,"date"),m()(),u(47,"div",43)(48,"span",44),g(49,"Last Updated:"),m(),u(50,"span",45),g(51),ie(52,"date"),m()(),u(53,"div",43)(54,"span",44),g(55,"Owner:"),m(),u(56,"span",45),g(57),m()(),u(58,"div",43)(59,"span",44),g(60,"Shared With:"),m(),u(61,"span",45),g(62),m()()()()()}if(n&2){let t=M();T(4),Y((t.todoList==null?null:t.todoList.title)||"Loading..."),T(2),Y((t.todoList==null?null:t.todoList.description)||"No description"),T(14),vn("ngModel",t.newTodoText),R("disabled",t.isAdding),T(),R("disabled",!t.newTodoText.trim()||t.isAdding),T(),R("ngIf",!t.isAdding),T(),R("ngIf",t.isAdding),T(2),Y(t.isAdding?"Adding...":"Add"),T(7),qn("",t.completedCount," of ",t.todos.length||0," completed"),T(2),Xf("width",t.completionPercentage,"%"),T(),R("ngIf",!t.todos.length),T(),R("ngIf",t.todos.length>0),T(9),Y(Gn(46,18,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),T(6),Y(Gn(52,21,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),T(6),Y(t.ownerName||"Loading..."),T(5),le("",t.todoList.sharedWith.length||0," users")}}var Gl=class n{constructor(e,t,i,r,s){this.route=e;this.router=t;this.todoListService=i;this.todoService=r;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";breadcrumbItems=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(At(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:i=>{if(console.log("All lists loaded:",i),this.todoList=i.find(r=>r.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.updateBreadcrumbs(this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(r=>{if(console.log("User has access to list:",r),!r){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let a="Failed to load todos. ";s.code==="permission-denied"?a+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?a+="Please log in to view todos.":a+="Please try again later.",this.error=a,this.isLoading=!1}})}).catch(r=>{console.error("Error checking access:",r),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:i=>{console.error("Error loading todo list:",i),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}updateBreadcrumbs(e){this.breadcrumbItems=[{label:"Home",route:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{label:"Lists",route:"/lists",icon:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},{label:e.title,icon:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"}]}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(Te(ye({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let i=t.target.value.trim();!e.id||!i||i===e.title||this.todoService.updateTodo(Te(ye({},e),{title:i})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let i=Te(ye({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(i).then(()=>{this.todoList=i,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(At(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)(G(Fo),G($e),G(ui),G(ql),G(Ce))};static \u0275cmp=he({type:n,selectors:[["app-todo"]],decls:7,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300","mt-1","sm:mt-2"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),P(2,"app-breadcrumb",2),H(3,NS,5,0,"div",3)(4,OS,9,1,"div",4)(5,$S,63,24,"div",5),u(6,"app-list-edit-share-modal",6),N("save",function(s){return i.handleSaveEdit(s)})("share",function(s){return i.handleShare(s)})("close",function(){return i.closeModal()}),m()()()),t&2&&(T(2),R("items",i.breadcrumbItems),T(),R("ngIf",i.isLoading),T(),R("ngIf",i.error),T(),R("ngIf",i.todoList&&!i.isLoading),T(),R("open",i.showEditShareModal)("list",i.todoList)("mode",i.modalMode))},dependencies:[me,Dt,xe,Zi,Ur,Ke,je,He,We,zi,Gi,Br,_t],encapsulation:2})};var zl=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(G(Ce),G($e))};static \u0275cmp=he({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"h2"),g(2,"Sign in to Todo List"),m(),u(3,"p"),g(4,"Please sign in to access your personal todo list"),m(),u(5,"button",1),N("click",function(){return i.login()}),P(6,"img",2),g(7," Sign in with Google "),m()())},dependencies:[me],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function qS(n,e){n&1&&(u(0,"div",13)(1,"div",14),P(2,"div",15),u(3,"span",16),g(4,"Loading your lists..."),m()()())}function GS(n,e){if(n&1){let t=X();u(0,"div",13)(1,"div",17),F(),u(2,"svg",18),P(3,"path",19),m(),z(),u(4,"h3",20),g(5,"No lists yet"),m(),u(6,"p",5),g(7,"Get started by creating your first todo list."),m(),u(8,"button",21),N("click",function(){B(t);let r=M();return j(r.openCreateModal())}),F(),u(9,"svg",7),P(10,"path",8),m(),z(),u(11,"span"),g(12,"Create First List"),m()()()()}}function zS(n,e){if(n&1&&(u(0,"span",45),F(),u(1,"svg",40),P(2,"path",32),m(),g(3),m()),n&2){let t=M().$implicit;T(3),le(" ",t.sharedWith.length," shared ")}}function HS(n,e){if(n&1){let t=X();u(0,"div",24),N("click",function(){let r=B(t).$implicit,s=M(2);return j(s.openList(r))}),u(1,"div",25)(2,"div",26)(3,"h3",27),g(4),m(),u(5,"p",28),g(6),m()(),u(7,"div",29)(8,"button",30),N("click",function(r){let s=B(t).$implicit;return M(2).openShareModal(s),j(r.stopPropagation())}),F(),u(9,"svg",31),P(10,"path",32),m()(),z(),u(11,"button",33),N("click",function(){let r=B(t).$implicit,s=M(2);return j(s.openEditModal(r))}),F(),u(12,"svg",31),P(13,"path",34),m()(),z(),u(14,"button",35),N("click",function(r){let s=B(t).$implicit,a=M(2);return j(a.deleteList(s,r))}),F(),u(15,"svg",31),P(16,"path",36),m()()()(),z(),u(17,"div",37)(18,"div",38)(19,"span",39),F(),u(20,"svg",40),P(21,"path",19),m(),g(22," View items "),m(),z(),u(23,"span",39),F(),u(24,"svg",40),P(25,"path",41),m(),g(26),ie(27,"date"),m(),H(28,zS,4,1,"span",42),m(),u(29,"svg",43),P(30,"path",44),m()()()}if(n&2){let t=e.$implicit,i=M(2);T(4),le(" ",t.title," "),T(2),le(" ",t.description||"No description"," "),T(20),le(" ",Gn(27,4,i.getDateFromTimestamp(t.updatedAt),"short")," "),T(2),R("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function WS(n,e){if(n&1&&(u(0,"div",22),H(1,HS,31,7,"div",23),m()),n&2){let t=M();T(),R("ngForOf",t.todoLists)}}function KS(n,e){if(n&1){let t=X();u(0,"div",46)(1,"div",47)(2,"div",48)(3,"h3",49),g(4,"Create New List"),m(),u(5,"button",50),N("click",function(){B(t);let r=M();return j(r.closeCreateModal())}),F(),u(6,"svg",51),P(7,"path",52),m()()(),z(),u(8,"form",53),N("ngSubmit",function(){B(t);let r=M();return j(r.createNewList())}),u(9,"div")(10,"label",54),g(11," Title * "),m(),u(12,"input",55),bn("ngModelChange",function(r){B(t);let s=M();return wn(s.newListTitle,r)||(s.newListTitle=r),j(r)}),m()(),u(13,"div")(14,"label",56),g(15," Description (optional) "),m(),u(16,"textarea",57),bn("ngModelChange",function(r){B(t);let s=M();return wn(s.newListDescription,r)||(s.newListDescription=r),j(r)}),m()(),u(17,"div",58)(18,"button",59),N("click",function(){B(t);let r=M();return j(r.closeCreateModal())}),g(19," Cancel "),m(),u(20,"button",60),F(),u(21,"svg",7),P(22,"path",8),m(),z(),u(23,"span"),g(24,"Create List"),m()()()()()()}if(n&2){let t=M();T(12),vn("ngModel",t.newListTitle),T(4),vn("ngModel",t.newListDescription),T(4),R("disabled",!t.newListTitle.trim())}}var Hl=class n{constructor(e,t,i){this.todoListService=e;this.authService=t;this.router=i}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;breadcrumbItems=[{label:"Home",route:"/"},{label:"Todo Lists",route:void 0}];ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(At(1)).subscribe(i=>{if(console.log("Current user:",i),!i){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:i=>{console.log("List created successfully:",i),this.todoLists.unshift(i),this.closeCreateModal()},error:i=>{console.error("Error creating list:",i),console.error("Error details:",{code:i.code,message:i.message,details:i.details});let r="Failed to create list. ";i.code==="permission-denied"?r+="You may not have permission to create lists. Please try logging out and back in.":i.code==="unauthenticated"?r+="Please log in to create lists.":r+="Please try again later.",alert(r)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let i=Te(ye({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(i).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(i=>i.id!==e.id)}).catch(i=>{console.error("Error deleting list:",i)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)(G(ui),G(Ce),G($e))};static \u0275cmp=he({type:n,selectors:[["app-lists"]],decls:19,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),P(2,"app-breadcrumb",2),u(3,"div",3)(4,"div")(5,"h1",4),g(6,"Todo Lists"),m(),u(7,"p",5),g(8,"Create and manage your todo lists"),m()(),u(9,"button",6),N("click",function(){return i.openCreateModal()}),F(),u(10,"svg",7),P(11,"path",8),m(),z(),u(12,"span"),g(13,"New List"),m()()(),H(14,qS,5,0,"div",9)(15,GS,13,0,"div",9)(16,WS,2,1,"div",10),m(),H(17,KS,25,3,"div",11),u(18,"app-list-edit-share-modal",12),N("save",function(s){return i.handleSaveEdit(s)})("share",function(s){return i.handleShare(s)})("close",function(){return i.closeModal()}),m()()),t&2&&(T(2),R("items",i.breadcrumbItems),T(12),R("ngIf",i.isLoading),T(),R("ngIf",!i.isLoading&&i.todoLists.length===0),T(),R("ngIf",!i.isLoading&&i.todoLists.length>0),T(),R("ngIf",i.showCreateModal),T(),R("open",i.showEditShareModal)("list",i.modalList)("mode",i.modalMode))},dependencies:[me,Dt,xe,Zi,Ur,Ke,je,He,We,ho,zi,Gi,Bo,Br,_t],encapsulation:2})};function QS(n,e){if(n&1&&(ht(0),u(1,"div",24)(2,"div")(3,"label",25),g(4,"Display Name"),m(),u(5,"div",26),g(6),m()(),u(7,"div")(8,"label",25),g(9,"Email"),m(),u(10,"div",26),g(11),m()(),u(12,"div")(13,"label",25),g(14,"User ID"),m(),u(15,"div",37),g(16),m()(),u(17,"div")(18,"label",25),g(19,"Account Created"),m(),u(20,"div",26),g(21),ie(22,"date"),m()()(),mt()),n&2){let t=e.ngIf;T(6),le(" ",(t==null?null:t.displayName)||"Not provided"," "),T(5),le(" ",(t==null?null:t.email)||"Not provided"," "),T(5),le(" ",(t==null?null:t.uid)||"Not available"," "),T(5),le(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Gn(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}function YS(n,e){if(n&1&&(ht(0),u(1,"div",24)(2,"div")(3,"label",25),g(4,"Email Verification"),m(),u(5,"div",38)(6,"div",39),g(7),m(),P(8,"div",40),m()(),u(9,"div")(10,"label",25),g(11,"Last Sign In"),m(),u(12,"div",26),g(13),ie(14,"date"),m()(),u(15,"div")(16,"label",25),g(17,"Account Status"),m(),u(18,"div",38)(19,"div",39),g(20," Active "),m(),P(21,"div",41),m()(),u(22,"div")(23,"label",25),g(24,"Two-Factor Auth"),m(),u(25,"div",38)(26,"div",39),g(27," Not Enabled "),m(),P(28,"div",42),m()()(),mt()),n&2){let t=e.ngIf;T(7),le(" ",t!=null&&t.emailVerified?"Verified":"Not Verified"," "),T(),Zf(t!=null&&t.emailVerified?"bg-green-500":"bg-yellow-500"),T(5),le(" ",!(t==null||t.metadata==null)&&t.metadata.lastSignInTime?Gn(14,4,t.metadata.lastSignInTime,"medium"):"Not available"," ")}}var Wl=class n{authService=dt(Ce);router=dt($e);user$=this.authService.user$;breadcrumbItems=[{label:"Home",route:"/"},{label:"Profile",route:void 0}];stats={todoLists:0,familyTrees:0,lastActivity:"Today",accountAge:"New"};preferences={theme:"System Default",language:"English",notifications:"Enabled",privacy:"Standard"};logout(){this.authService.signOut().then(()=>{this.router.navigate(["/"])})}goBack(){this.router.navigate(["/"])}exportData(){console.log("Export data functionality to be implemented"),alert("Data export functionality will be implemented soon!")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-profile"]],decls:95,vars:15,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6","sm:mb-8"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"mt-4","sm:mt-0","sm:ml-4"],[1,"btn-primary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"space-y-6"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"text-center","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"text-center","p-4","bg-green-50","dark:bg-green-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-center","p-4","bg-purple-50","dark:bg-purple-900/20","rounded-lg"],[1,"text-sm","font-semibold","text-purple-600","dark:text-purple-400"],[1,"text-center","p-4","bg-orange-50","dark:bg-orange-900/20","rounded-lg"],[1,"text-sm","font-semibold","text-orange-600","dark:text-orange-400"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"space-y-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-4"],[1,"text-md","font-medium","text-gray-900","dark:text-white","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["href","/lists",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/family-tree",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/quotes",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/premier-league",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"],[1,"flex","items-center","space-x-2"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","flex-1"],[1,"w-3","h-3","rounded-full"],[1,"w-3","h-3","rounded-full","bg-green-500"],[1,"w-3","h-3","rounded-full","bg-gray-400"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),P(2,"app-breadcrumb",2),u(3,"div",3)(4,"div",4)(5,"h1",5),g(6,"Profile"),m(),u(7,"p",6),g(8,"Manage your account information"),m()(),u(9,"div",7)(10,"button",8),N("click",function(){return i.logout()}),g(11," Sign Out "),m()()(),u(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2",12),g(16,"Account Information"),m(),H(17,QS,23,7,"ng-container",13),ie(18,"async"),m()(),u(19,"div",10)(20,"div",11)(21,"h2",12),g(22,"Account Status & Security"),m(),H(23,YS,29,7,"ng-container",13),ie(24,"async"),m()(),u(25,"div",10)(26,"div",11)(27,"h2",12),g(28,"Usage Statistics"),m(),u(29,"div",14)(30,"div",15)(31,"div",16),g(32),m(),u(33,"div",17),g(34,"Todo Lists"),m()(),u(35,"div",18)(36,"div",19),g(37),m(),u(38,"div",17),g(39,"Family Trees"),m()(),u(40,"div",20)(41,"div",21),g(42),m(),u(43,"div",17),g(44,"Last Activity"),m()(),u(45,"div",22)(46,"div",23),g(47),m(),u(48,"div",17),g(49,"Account Age"),m()()()()(),u(50,"div",10)(51,"div",11)(52,"h2",12),g(53,"Preferences & Settings"),m(),u(54,"div",24)(55,"div")(56,"label",25),g(57,"Theme"),m(),u(58,"div",26),g(59),m()(),u(60,"div")(61,"label",25),g(62,"Language"),m(),u(63,"div",26),g(64),m()(),u(65,"div")(66,"label",25),g(67,"Notifications"),m(),u(68,"div",26),g(69),m()(),u(70,"div")(71,"label",25),g(72,"Privacy Level"),m(),u(73,"div",26),g(74),m()()()()(),u(75,"div",10)(76,"div",11)(77,"h2",12),g(78,"Account Management"),m(),u(79,"div",27)(80,"div",28)(81,"button",29),N("click",function(){return i.exportData()}),g(82," Export Data "),m()(),u(83,"div",30)(84,"h3",31),g(85,"Quick Links"),m(),u(86,"div",32)(87,"a",33),g(88,"View Todo Lists"),m(),u(89,"a",34),g(90,"View Family Trees"),m(),u(91,"a",35),g(92,"Browse Quotes"),m(),u(93,"a",36),g(94,"Premier League"),m()()()()()()()()()),t&2&&(T(2),R("items",i.breadcrumbItems),T(15),R("ngIf",ue(18,11,i.user$)),T(6),R("ngIf",ue(24,13,i.user$)),T(9),Y(i.stats.todoLists||0),T(5),Y(i.stats.familyTrees||0),T(5),le(" ",i.stats.lastActivity||"Today"," "),T(5),le(" ",i.stats.accountAge||"New"," "),T(12),le(" ",i.preferences.theme||"System Default"," "),T(5),le(" ",i.preferences.language||"English"," "),T(5),le(" ",i.preferences.notifications||"Enabled"," "),T(5),le(" ",i.preferences.privacy||"Standard"," "))},dependencies:[me,xe,gt,Zi,_t],encapsulation:2})};var di=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(At(1),Ye(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(Oe(Ce),Oe($e))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kl=class n{constructor(e){this.fb=e;this.shareForm=this.fb.group({email:["",[Be.required,Be.email]]})}family=null;close=new Ee;share=new Ee;shareForm;onShare(){this.shareForm.valid&&(this.share.emit(this.shareForm.value.email),this.shareForm.reset())}static \u0275fac=function(t){return new(t||n)(G(Ot))};static \u0275cmp=he({type:n,selectors:[["app-family-share-modal"]],inputs:{family:"family"},outputs:{close:"close",share:"share"},decls:14,vars:3,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","you@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3),m(),u(4,"form",3),N("ngSubmit",function(){return i.onShare()}),u(5,"div",4)(6,"label",5),g(7,"Email address"),m(),P(8,"input",6),m(),u(9,"div",7)(10,"button",8),N("click",function(){return i.close.emit()}),g(11," Cancel "),m(),u(12,"button",9),g(13," Share "),m()()()()()),t&2&&(T(3),le('Share "',i.family==null?null:i.family.name,'"'),T(),R("formGroup",i.shareForm),T(8),R("disabled",!i.shareForm.valid))},dependencies:[me,Lt,Ke,je,He,We,St,Ct],encapsulation:2})};var Ql=class n{constructor(e){this.fb=e;this.createForm=this.fb.group({name:["",Be.required],description:[""]})}close=new Ee;create=new Ee;createForm;onCreate(){this.createForm.valid&&this.create.emit(this.createForm.value)}static \u0275fac=function(t){return new(t||n)(G(Ot))};static \u0275cmp=he({type:n,selectors:[["app-create-family-modal"]],outputs:{close:"close",create:"create"},decls:18,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"Create a New Family"),m(),u(4,"form",3),N("ngSubmit",function(){return i.onCreate()}),u(5,"div",4)(6,"label",5),g(7,"Family Name"),m(),P(8,"input",6),m(),u(9,"div",4)(10,"label",7),g(11,"Description"),m(),P(12,"textarea",8),m(),u(13,"div",9)(14,"button",10),N("click",function(){return i.close.emit()}),g(15," Cancel "),m(),u(16,"button",11),g(17," Create Family "),m()()()()()),t&2&&(T(4),R("formGroup",i.createForm),T(12),R("disabled",!i.createForm.valid))},dependencies:[me,Lt,Ke,je,He,We,St,Ct],encapsulation:2})};var hi=class n{constructor(e,t){this.firestore=e;this.auth=t;this.familyCollection=un(this.firestore,"families"),this.memberCollection=un(this.firestore,"members"),this.familiesCollection=un(this.firestore,"families")}familyCollection;memberCollection;familiesCollection;addFamily(e){return v(this,null,function*(){let t=yield as(this.auth.user$);if(console.log("Current user:",t),!t)throw new Error("User not logged in");console.log("User UID:",t.uid),console.log("User email:",t.email);let i={name:e.name,description:e.description||"",owner:t.uid,sharedWith:[],status:"approved",createdAt:_m()};console.log("Creating family with data:",i);try{yield ji(this.familyCollection,i),console.log("Family created successfully")}catch(r){throw console.error("Error creating family:",r),r}})}updateFamily(e,t){return v(this,null,function*(){let i=rt(this.firestore,"families",e);yield Jt(i,t)})}removeSharedUser(e,t){return v(this,null,function*(){let i=rt(this.firestore,"families",e);yield Jt(i,{sharedWith:Ly(t)})})}getFamilies(){return this.auth.user$.pipe(ut(e=>{if(console.log("getFamilies - Current user:",e),!e||!e.email)return console.log("getFamilies - No user or email, returning empty array"),ct([]);console.log("getFamilies - User UID:",e.uid),console.log("getFamilies - User email:",e.email);let t=Yt(this.familyCollection,dn("owner","==",e.uid)),i=Yt(this.familyCollection,dn("sharedWith","array-contains",e.email)),r=Rr(t,{idField:"id"}),s=Rr(i,{idField:"id"});return $f([r,s]).pipe(Ye(([a,c])=>{console.log("getFamilies - Owned families:",a),console.log("getFamilies - Shared families:",c);let _=[...a,...c].filter((w,b,V)=>b===V.findIndex(U=>U.id===w.id)).sort((w,b)=>w.name.localeCompare(b.name));return console.log("getFamilies - Final result:",_),_}))}))}shareFamily(e,t){return v(this,null,function*(){let i=rt(this.firestore,"families",e);yield Jt(i,{sharedWith:Oy(t)})})}getFamilyById(e){let t=rt(this.firestore,"families",e);return zy(t,{idField:"id"})}getFamilyMembers(e){let t=un(this.firestore,"families",e,"members"),i=Yt(t);return Rr(i,{idField:"id"})}addFamilyMember(e,t){return v(this,null,function*(){let i=yield as(this.auth.user$);if(!i)throw new Error("User not logged in");let r=un(this.firestore,"families",e,"members"),s=Te(ye({},t),{familyId:e,status:"approved",createdBy:i.uid,createdAt:_m()});yield ji(r,s)})}updateFamilyMember(e,t,i){return v(this,null,function*(){let r=rt(this.firestore,"families",e,"members",t);yield Jt(r,i)})}static \u0275fac=function(t){return new(t||n)(Oe(Qt),Oe(Ce))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};function JS(n,e){n&1&&(u(0,"div",13)(1,"div",14),P(2,"div",15),u(3,"span",16),g(4,"Loading your families..."),m()()())}function XS(n,e){if(n&1){let t=X();u(0,"div",13)(1,"div",18),F(),u(2,"svg",19),P(3,"path",20),m(),z(),u(4,"h3",21),g(5,"No families yet"),m(),u(6,"p",5),g(7,"Get started by creating your first family tree."),m(),u(8,"button",22),N("click",function(){B(t);let r=M(2);return j(r.openCreateModal())}),F(),u(9,"svg",7),P(10,"path",8),m(),z(),u(11,"span"),g(12,"Create First Family"),m()()()()}}function ZS(n,e){if(n&1&&(u(0,"span",41),F(),u(1,"svg",37),P(2,"path",33),m(),g(3),m()),n&2){let t=M().$implicit;T(3),le(" ",t.sharedWith.length," shared ")}}function eC(n,e){if(n&1){let t=X();u(0,"div",25),N("click",function(){let r=B(t).$implicit,s=M(3);return j(s.openFamily(r))}),u(1,"div",26)(2,"div",27)(3,"h3",28),g(4),m(),u(5,"p",29),g(6),m()(),u(7,"div",30)(8,"button",31),N("click",function(r){let s=B(t).$implicit;return M(3).openShareModal(s),j(r.stopPropagation())}),F(),u(9,"svg",32),P(10,"path",33),m()()()(),z(),u(11,"div",34)(12,"div",35)(13,"span",36),F(),u(14,"svg",37),P(15,"path",20),m(),g(16," View family "),m(),H(17,ZS,4,1,"span",38),m(),u(18,"svg",39),P(19,"path",40),m()()()}if(n&2){let t=e.$implicit;T(4),le(" ",t.name," "),T(2),le(" ",t.description||"No description"," "),T(11),R("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function tC(n,e){if(n&1&&(u(0,"div",23),H(1,eC,20,3,"div",24),m()),n&2){let t=M().ngIf;T(),R("ngForOf",t)}}function nC(n,e){if(n&1&&(ht(0),H(1,XS,13,0,"div",9)(2,tC,2,1,"div",17),mt()),n&2){let t=e.ngIf;T(),R("ngIf",t.length===0),T(),R("ngIf",t.length>0)}}function iC(n,e){if(n&1){let t=X();u(0,"app-create-family-modal",42),N("close",function(){B(t);let r=M();return j(r.closeCreateModal())})("create",function(r){B(t);let s=M();return j(s.handleCreateFamily(r))}),m()}}function rC(n,e){if(n&1){let t=X();u(0,"app-family-share-modal",43),N("close",function(){B(t);let r=M();return j(r.closeShareModal())})("share",function(r){B(t);let s=M();return j(s.handleShare(r))}),m()}if(n&2){let t=M();R("family",t.selectedFamily)}}var Yl=class n{constructor(e,t){this.familyTreeService=e;this.router=t;this.families$=this.familyTreeService.getFamilies()}families$;isShareModalOpen=!1;selectedFamily=null;isCreateModalOpen=!1;breadcrumbItems=[{label:"Home",route:"/"},{label:"Family Trees",route:void 0}];openFamily(e){this.router.navigate(["/family-tree",e.id])}openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}handleCreateFamily(e){return v(this,null,function*(){yield this.familyTreeService.addFamily(e),this.closeCreateModal()})}openShareModal(e){this.selectedFamily=e,this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1,this.selectedFamily=null}handleShare(e){this.selectedFamily&&this.familyTreeService.shareFamily(this.selectedFamily.id,e),this.closeShareModal()}static \u0275fac=function(t){return new(t||n)(G(hi),G($e))};static \u0275cmp=he({type:n,selectors:[["app-family-tree"]],decls:20,vars:9,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],[4,"ngIf"],[3,"close","create",4,"ngIf"],[3,"family","close","share",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[3,"close","create"],[3,"close","share","family"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),P(2,"app-breadcrumb",2),u(3,"div",3)(4,"div")(5,"h1",4),g(6,"Family Trees"),m(),u(7,"p",5),g(8,"Create and manage your family trees"),m()(),u(9,"button",6),N("click",function(){return i.openCreateModal()}),F(),u(10,"svg",7),P(11,"path",8),m(),z(),u(12,"span"),g(13,"Create Family"),m()()(),H(14,JS,5,0,"div",9),ie(15,"async"),H(16,nC,3,2,"ng-container",10),ie(17,"async"),m()(),H(18,iC,1,0,"app-create-family-modal",11)(19,rC,1,1,"app-family-share-modal",12)),t&2&&(T(2),R("items",i.breadcrumbItems),T(12),R("ngIf",ue(15,5,i.families$)===null),T(2),R("ngIf",ue(17,7,i.families$)),T(2),R("ngIf",i.isCreateModalOpen),T(),R("ngIf",i.isShareModalOpen))},dependencies:[me,Dt,xe,gt,Kl,Ql,_t],encapsulation:2})};var Jl=class n{constructor(e){this.fb=e;this.addMemberForm=this.fb.group({firstName:["",Be.required],lastName:["",Be.required],gender:["male",Be.required],dateOfBirth:[""]})}familyId="";close=new Ee;addMember=new Ee;addMemberForm;onSubmit(){if(this.addMemberForm.valid){let e=this.addMemberForm.value;if(e.dateOfBirth){let t=e.dateOfBirth.split("-"),i=parseInt(t[0]),r=parseInt(t[1])-1,s=parseInt(t[2]),a=new Date(i,r,s);e.dateOfBirth=Ne.fromDate(a)}else delete e.dateOfBirth;this.addMember.emit(e),this.addMemberForm.reset({gender:"male"})}}onClose(){this.close.emit()}static \u0275fac=function(t){return new(t||n)(G(Ot))};static \u0275cmp=he({type:n,selectors:[["app-add-member-modal"]],inputs:{familyId:"familyId"},outputs:{close:"close",addMember:"addMember"},decls:41,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter first name",1,"input-field","w-full"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter last name",1,"input-field","w-full"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","gender","formControlName","gender",1,"input-field","w-full"],["value","male"],["value","female"],["value","other"],["for","dateOfBirth",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","date","id","dateOfBirth","formControlName","dateOfBirth",1,"input-field","w-full"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Add Family Member"),m(),u(5,"button",4),N("click",function(){return i.onClose()}),F(),u(6,"svg",5),P(7,"path",6),m()()(),z(),u(8,"form",7),N("ngSubmit",function(){return i.onSubmit()}),u(9,"div",8)(10,"div")(11,"label",9),g(12,"First Name *"),m(),P(13,"input",10),m(),u(14,"div")(15,"label",11),g(16,"Last Name *"),m(),P(17,"input",12),m()(),u(18,"div",8)(19,"div")(20,"label",13),g(21,"Gender *"),m(),u(22,"select",14)(23,"option",15),g(24,"Male"),m(),u(25,"option",16),g(26,"Female"),m(),u(27,"option",17),g(28,"Other"),m()()(),u(29,"div")(30,"label",18),g(31,"Date of Birth"),m(),P(32,"input",19),m()(),u(33,"div",20)(34,"button",21),N("click",function(){return i.onClose()}),g(35," Cancel "),m(),u(36,"button",22),F(),u(37,"svg",23),P(38,"path",24),m(),z(),u(39,"span"),g(40,"Add Member"),m()()()()()()),t&2&&(T(8),R("formGroup",i.addMemberForm),T(28),R("disabled",!i.addMemberForm.valid))},dependencies:[me,Lt,Ke,jl,$l,je,Fr,He,We,St,Ct],encapsulation:2})};var Xl=class n{constructor(e){this.fb=e;this.editMemberForm=this.fb.group({firstName:["",Be.required],lastName:["",Be.required],gender:["male",Be.required],dateOfBirth:[""]})}member=null;close=new Ee;updateMember=new Ee;editMemberForm;ngOnInit(){this.member&&this.editMemberForm.patchValue({firstName:this.member.firstName,lastName:this.member.lastName,gender:this.member.gender,dateOfBirth:this.member.dateOfBirth?this.formatDateForInput(this.member.dateOfBirth):""})}formatDateForInput(e){let t=e.toDate(),i=t.getFullYear(),r=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1),s=(t.getDate()<10?"0":"")+t.getDate();return`${i}-${r}-${s}`}onSubmit(){if(this.editMemberForm.valid&&this.member){let e=this.editMemberForm.value;if(e.dateOfBirth){let t=e.dateOfBirth.split("-"),i=parseInt(t[0]),r=parseInt(t[1])-1,s=parseInt(t[2]),a=new Date(i,r,s);e.dateOfBirth=Ne.fromDate(a)}else delete e.dateOfBirth;this.updateMember.emit(ye({memberId:this.member.id},e))}}onClose(){this.close.emit()}static \u0275fac=function(t){return new(t||n)(G(Ot))};static \u0275cmp=he({type:n,selectors:[["app-edit-member-modal"]],inputs:{member:"member"},outputs:{close:"close",updateMember:"updateMember"},decls:41,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","editFirstName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editFirstName","formControlName","firstName","placeholder","Enter first name",1,"input-field","w-full"],["for","editLastName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editLastName","formControlName","lastName","placeholder","Enter last name",1,"input-field","w-full"],["for","editGender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editGender","formControlName","gender",1,"input-field","w-full"],["value","male"],["value","female"],["value","other"],["for","editDateOfBirth",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","date","id","editDateOfBirth","formControlName","dateOfBirth",1,"input-field","w-full"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Edit Family Member"),m(),u(5,"button",4),N("click",function(){return i.onClose()}),F(),u(6,"svg",5),P(7,"path",6),m()()(),z(),u(8,"form",7),N("ngSubmit",function(){return i.onSubmit()}),u(9,"div",8)(10,"div")(11,"label",9),g(12,"First Name *"),m(),P(13,"input",10),m(),u(14,"div")(15,"label",11),g(16,"Last Name *"),m(),P(17,"input",12),m()(),u(18,"div",8)(19,"div")(20,"label",13),g(21,"Gender *"),m(),u(22,"select",14)(23,"option",15),g(24,"Male"),m(),u(25,"option",16),g(26,"Female"),m(),u(27,"option",17),g(28,"Other"),m()()(),u(29,"div")(30,"label",18),g(31,"Date of Birth"),m(),P(32,"input",19),m()(),u(33,"div",20)(34,"button",21),N("click",function(){return i.onClose()}),g(35," Cancel "),m(),u(36,"button",22),F(),u(37,"svg",23),P(38,"path",24),m(),z(),u(39,"span"),g(40,"Update Member"),m()()()()()()),t&2&&(T(8),R("formGroup",i.editMemberForm),T(28),R("disabled",!i.editMemberForm.valid))},dependencies:[me,Lt,Ke,jl,$l,je,Fr,He,We,St,Ct],encapsulation:2})};function sC(n,e){if(n&1){let t=X();u(0,"div",25)(1,"span",26),g(2),m(),u(3,"button",27),N("click",function(){let r=B(t).$implicit,s=M(2);return j(s.removeUser(r))}),F(),u(4,"svg",28),P(5,"path",29),m(),z(),u(6,"span"),g(7,"Remove"),m()()()}if(n&2){let t=e.$implicit;T(2),Y(t)}}function oC(n,e){if(n&1&&(u(0,"div",21)(1,"h3",22),g(2,"Currently Shared With"),m(),u(3,"div",23),H(4,sC,8,1,"div",24),m()()),n&2){let t=M();T(4),R("ngForOf",t.currentSharedUsers)}}function aC(n,e){if(n&1&&(u(0,"div",30)(1,"p",31),g(2),m()()),n&2){let t=M();T(2),Y(t.shareError)}}function lC(n,e){if(n&1&&(u(0,"div",32)(1,"p",33),g(2),m()()),n&2){let t=M();T(2),Y(t.shareSuccess)}}function cC(n,e){n&1&&(F(),u(0,"svg",34),P(1,"circle",35)(2,"path",36),m())}function uC(n,e){n&1&&(F(),u(0,"svg",28),P(1,"path",37),m())}var Zl=class n{constructor(e,t){this.fb=e;this.familyTreeService=t;this.shareForm=this.fb.group({email:["",[Be.required,Be.email]]})}familyId="";familyName="";currentSharedUsers=[];close=new Ee;userAdded=new Ee;shareForm;isSharing=!1;shareError="";shareSuccess="";onSubmit(){return v(this,null,function*(){if(this.shareForm.valid&&this.familyId){this.isSharing=!0,this.shareError="",this.shareSuccess="";try{let{email:e}=this.shareForm.value;if(this.currentSharedUsers.includes(e)){this.shareError="This user is already shared with this family.";return}yield this.familyTreeService.shareFamily(this.familyId,e),this.shareSuccess=`Successfully shared "${this.familyName}" with ${e}`,this.userAdded.emit(e),this.shareForm.reset()}catch(e){console.error("Error sharing family:",e),this.shareError="Failed to share family. Please try again."}finally{this.isSharing=!1}}})}onClose(){this.close.emit()}removeUser(e){this.familyId&&this.familyTreeService.removeSharedUser(this.familyId,e).then(()=>{}).catch(t=>{console.error("Error removing shared user:",t)})}static \u0275fac=function(t){return new(t||n)(G(Ot),G(hi))};static \u0275cmp=he({type:n,selectors:[["app-share-family-modal"]],inputs:{familyId:"familyId",familyName:"familyName",currentSharedUsers:"currentSharedUsers"},outputs:{close:"close",userAdded:"userAdded"},decls:30,vars:10,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-4"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"font-medium","text-gray-900","dark:text-white"],["class","mb-6",4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","formControlName","email","placeholder","user@example.com",1,"input-field","w-full",3,"disabled"],["class","bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",4,"ngIf"],["class","bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["class","animate-spin w-4 h-4","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"mb-6"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-3"],[1,"space-y-2"],["class","flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","bg-gray-50","dark:bg-gray-700","p-3","rounded-lg"],[1,"text-sm","text-gray-900","dark:text-gray-200"],[1,"text-sm","text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","font-medium","flex","items-center","space-x-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"bg-red-50","dark:bg-red-900/20","border","border-red-200","dark:border-red-800","rounded-lg","p-3"],[1,"text-sm","text-red-600","dark:text-red-400"],[1,"bg-green-50","dark:bg-green-900/20","border","border-green-200","dark:border-green-800","rounded-lg","p-3"],[1,"text-sm","text-green-600","dark:text-green-400"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Share Family"),m(),u(5,"button",4),N("click",function(){return i.onClose()}),F(),u(6,"svg",5),P(7,"path",6),m()()(),z(),u(8,"div",7)(9,"p",8),g(10,' Share "'),u(11,"span",9),g(12),m(),g(13,'" with others '),m()(),H(14,oC,5,1,"div",10),u(15,"form",11),N("ngSubmit",function(){return i.onSubmit()}),u(16,"div")(17,"label",12),g(18,"Add user by email"),m(),P(19,"input",13),m(),H(20,aC,3,1,"div",14)(21,lC,3,1,"div",15),u(22,"div",16)(23,"button",17),N("click",function(){return i.onClose()}),g(24," Close "),m(),u(25,"button",18),H(26,cC,3,0,"svg",19)(27,uC,2,0,"svg",20),u(28,"span"),g(29),m()()()()()()),t&2&&(T(12),Y(i.familyName),T(2),R("ngIf",i.currentSharedUsers.length>0),T(),R("formGroup",i.shareForm),T(4),R("disabled",i.isSharing),T(),R("ngIf",i.shareError),T(),R("ngIf",i.shareSuccess),T(4),R("disabled",!i.shareForm.valid||i.isSharing),T(),R("ngIf",i.isSharing),T(),R("ngIf",!i.isSharing),T(2),Y(i.isSharing?"Sharing...":"Share"))},dependencies:[me,Dt,xe,Lt,Ke,je,He,We,St,Ct],encapsulation:2})};var dC=()=>[];function hC(n,e){n&1&&(u(0,"div",10)(1,"div",11),P(2,"div",12),u(3,"span",13),g(4,"Loading family details..."),m()()())}function mC(n,e){if(n&1){let t=X();u(0,"div",10)(1,"div",15),F(),u(2,"svg",16),P(3,"path",17),m(),z(),u(4,"h3",18),g(5,"Family Not Found"),m(),u(6,"p",19),g(7,"The family you're looking for doesn't exist or you don't have access to it."),m(),u(8,"button",20),N("click",function(){B(t);let r=M(2);return j(r.goBack())}),F(),u(9,"svg",21),P(10,"path",22),m(),z(),u(11,"span"),g(12,"Go Back"),m()()()()}}function fC(n,e){if(n&1&&(u(0,"p",19),g(1),m()),n&2){let t=M(3).ngIf;T(),Y(t.description)}}function pC(n,e){if(n&1&&(ht(0),u(1,"h1",33),g(2),m(),H(3,fC,2,1,"p",34),mt()),n&2){let t=M(2).ngIf;T(2),Y(t.name),T(),R("ngIf",t.description)}}function gC(n,e){if(n&1){let t=X();ht(0),u(1,"form",35),N("ngSubmit",function(){B(t);let r=M(3);return j(r.saveChanges())}),u(2,"div")(3,"label",36),g(4,"Family Name"),m(),P(5,"input",37),m(),u(6,"div")(7,"label",38),g(8,"Description"),m(),P(9,"textarea",39),m()(),mt()}if(n&2){let t=M(3);T(),R("formGroup",t.editForm)}}function _C(n,e){if(n&1){let t=X();ht(0),u(1,"button",40),N("click",function(){B(t);let r=M(3);return j(r.openShareModal())}),F(),u(2,"svg",21),P(3,"path",41),m(),z(),u(4,"span"),g(5,"Share"),m()(),u(6,"button",40),N("click",function(){B(t);let r=M(3);return j(r.startEditing())}),F(),u(7,"svg",21),P(8,"path",42),m(),z(),u(9,"span"),g(10,"Edit"),m()(),mt()}}function yC(n,e){if(n&1){let t=X();ht(0),u(1,"button",43),F(),u(2,"svg",21),P(3,"path",44),m(),z(),u(4,"span"),g(5,"Save"),m()(),u(6,"button",45),N("click",function(){B(t);let r=M(3);return j(r.cancelEditing())}),F(),u(7,"svg",21),P(8,"path",46),m(),z(),u(9,"span"),g(10,"Cancel"),m()(),mt()}if(n&2){let t=M(3);T(),R("disabled",!t.editForm.valid||!t.editForm.dirty)}}function vC(n,e){if(n&1&&(u(0,"p",54),F(),u(1,"svg",55),P(2,"path",58),m(),g(3),m()),n&2){let t=M().$implicit,i=M(5);T(3),le(" ",i.formatDateForDisplay(t.dateOfBirth)," ")}}function wC(n,e){if(n&1){let t=X();u(0,"div",50)(1,"button",51),N("click",function(){let r=B(t).$implicit,s=M(5);return j(s.openEditMemberModal(r))}),F(),u(2,"svg",21),P(3,"path",42),m()(),z(),u(4,"h4",52),g(5),m(),u(6,"div",53)(7,"p",54),F(),u(8,"svg",55),P(9,"path",56),m(),g(10),ie(11,"titlecase"),m(),H(12,vC,4,1,"p",57),m()()}if(n&2){let t=e.$implicit;T(5),qn("",t.firstName," ",t.lastName),T(5),le(" ",ue(11,4,t.gender)," "),T(2),R("ngIf",t.dateOfBirth)}}function bC(n,e){if(n&1&&(u(0,"div",48),H(1,wC,13,6,"div",49),m()),n&2){let t=M().ngIf;T(),R("ngForOf",t)}}function EC(n,e){n&1&&(u(0,"div",59),F(),u(1,"svg",16),P(2,"path",60),m(),z(),u(3,"h3",18),g(4,"No members yet"),m(),u(5,"p",19),g(6,"Add your first family member to get started."),m()())}function IC(n,e){if(n&1&&(u(0,"div"),H(1,bC,2,1,"div",47)(2,EC,7,0,"ng-template",null,1,En),m()),n&2){let t=e.ngIf,i=yn(3);T(),R("ngIf",t.length>0)("ngIfElse",i)}}function TC(n,e){n&1&&(u(0,"div",59),P(1,"div",61),u(2,"p",62),g(3,"Loading members..."),m()())}function xC(n,e){if(n&1){let t=X();u(0,"div",23)(1,"div",24)(2,"div",25),H(3,pC,4,2,"ng-container",6)(4,gC,10,1,"ng-container",6),m(),u(5,"div",26),H(6,_C,11,0,"ng-container",6),ie(7,"async"),H(8,yC,11,1,"ng-container",6),m()(),u(9,"div",27)(10,"div",28)(11,"h2",29),g(12,"Family Members"),m(),u(13,"button",30),N("click",function(){B(t);let r=M(2);return j(r.openAddMemberModal())}),F(),u(14,"svg",21),P(15,"path",31),m(),z(),u(16,"span"),g(17,"Add Member"),m()()(),H(18,IC,4,2,"div",32),ie(19,"async"),H(20,TC,4,0,"ng-template",null,0,En),m()()}if(n&2){let t,i=yn(21),r=M().ngIf,s=M();T(3),R("ngIf",!s.isEditing),T(),R("ngIf",s.isEditing),T(2),R("ngIf",!s.isEditing&&r.owner===((t=ue(7,6,s.auth.user$))==null?null:t.uid)),T(2),R("ngIf",s.isEditing),T(10),R("ngIf",ue(19,8,s.members$))("ngIfElse",i)}}function SC(n,e){if(n&1&&(ht(0),H(1,mC,13,0,"div",5)(2,xC,22,10,"div",14),mt()),n&2){let t=e.ngIf;T(),R("ngIf",!t),T(),R("ngIf",t)}}function CC(n,e){if(n&1){let t=X();u(0,"app-add-member-modal",63),N("close",function(){B(t);let r=M();return j(r.closeAddMemberModal())})("addMember",function(r){B(t);let s=M();return j(s.handleAddMember(r))}),m()}if(n&2){let t=M();R("familyId",t.familyId||"")}}function AC(n,e){if(n&1){let t=X();u(0,"app-edit-member-modal",64),N("close",function(){B(t);let r=M();return j(r.closeEditMemberModal())})("updateMember",function(r){B(t);let s=M();return j(s.handleUpdateMember(r))}),m()}if(n&2){let t=M();R("member",t.selectedMember)}}function kC(n,e){if(n&1){let t=X();u(0,"app-share-family-modal",65),ie(1,"async"),ie(2,"async"),N("close",function(){B(t);let r=M();return j(r.closeShareModal())})("userAdded",function(r){B(t);let s=M();return j(s.handleUserAdded(r))}),m()}if(n&2){let t,i,r=M();R("familyId",r.familyId||"")("familyName",((t=ue(1,3,r.family$))==null?null:t.name)||"")("currentSharedUsers",((i=ue(2,5,r.family$))==null?null:i.sharedWith)||hs(7,dC))}}var ec=class n{constructor(e,t,i,r,s){this.route=e;this.router=t;this.familyTreeService=i;this.fb=r;this.auth=s;this.editForm=this.fb.group({name:["",Be.required],description:[""]})}family$;members$;familyId=null;isEditing=!1;isAddMemberModalOpen=!1;isEditMemberModalOpen=!1;isShareModalOpen=!1;selectedMember=null;editForm;breadcrumbItems=[];currentFamily;ngOnInit(){this.family$=this.route.paramMap.pipe(ut(e=>{let t=e.get("familyId");return this.familyId=t,t?(this.members$=this.familyTreeService.getFamilyMembers(t),this.familyTreeService.getFamilyById(t)):ct(void 0)}),zf(e=>{this.currentFamily=e,e&&(this.editForm.patchValue({name:e.name,description:e.description}),this.updateBreadcrumbs(e))}))}updateBreadcrumbs(e){this.breadcrumbItems=[{label:"Home",route:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{label:"Family Trees",route:"/family-tree",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"},{label:e.name,icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"}]}goBack(){this.router.navigate(["/family-tree"])}startEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.currentFamily&&this.editForm.patchValue({name:this.currentFamily.name,description:this.currentFamily.description})}saveChanges(){return v(this,null,function*(){this.editForm.valid&&this.familyId&&(yield this.familyTreeService.updateFamily(this.familyId,this.editForm.value),this.isEditing=!1)})}openAddMemberModal(){this.isAddMemberModalOpen=!0}closeAddMemberModal(){this.isAddMemberModalOpen=!1}openEditMemberModal(e){this.selectedMember=e,this.isEditMemberModalOpen=!0}closeEditMemberModal(){this.isEditMemberModalOpen=!1,this.selectedMember=null}handleAddMember(e){return v(this,null,function*(){if(this.familyId)try{yield this.familyTreeService.addFamilyMember(this.familyId,e),this.closeAddMemberModal()}catch(t){console.error("Error adding family member:",t)}})}handleUpdateMember(e){return v(this,null,function*(){if(this.familyId&&e.memberId)try{let t=e,{memberId:i}=t,r=Yi(t,["memberId"]);yield this.familyTreeService.updateFamilyMember(this.familyId,i,r),this.closeEditMemberModal()}catch(i){console.error("Error updating family member:",i)}})}openShareModal(){this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1}handleUserAdded(e){console.log("User added:",e)}formatDateForDisplay(e){if(!e)return"";let t=e.toDate(),i={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString(void 0,i)}static \u0275fac=function(t){return new(t||n)(G(Fo),G($e),G(hi),G(Ot),G(Ce))};static \u0275cmp=he({type:n,selectors:[["app-family-detail"]],decls:10,vars:10,consts:[["loadingMembers",""],["noMembers",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],[4,"ngIf"],[3,"familyId","close","addMember",4,"ngIf"],[3,"member","close","updateMember",4,"ngIf"],[3,"familyId","familyName","currentSharedUsers","close","userAdded",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","space-y-6 sm:space-y-8",4,"ngIf"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"space-y-6","sm:space-y-8"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[4,"ngIf","ngIfElse"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],["class","mt-1 sm:mt-2 text-sm text-gray-600 dark:text-gray-300",4,"ngIf"],["id","editFamilyForm",1,"space-y-4",3,"ngSubmit","formGroup"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","familyName","formControlName","name","placeholder","Enter family name",1,"input-field","w-full"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","familyDescription","formControlName","description","rows","3","placeholder","Enter family description",1,"input-field","w-full"],[1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","submit","form","editFamilyForm",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200 relative group",4,"ngFor","ngForOf"],[1,"bg-gray-50","dark:bg-gray-700","rounded-lg","p-4","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200","relative","group"],[1,"absolute","top-2","right-2","p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","opacity-0","group-hover:opacity-100","transition-all","duration-200",3,"click"],[1,"font-semibold","text-base","sm:text-lg","text-gray-900","dark:text-white","mb-2","pr-8"],[1,"space-y-1","text-sm","text-gray-600","dark:text-gray-400"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["class","flex items-center",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-center","py-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary-600","mx-auto"],[1,"mt-2","text-sm","text-gray-600","dark:text-gray-400"],[3,"close","addMember","familyId"],[3,"close","updateMember","member"],[3,"close","userAdded","familyId","familyName","currentSharedUsers"]],template:function(t,i){t&1&&(u(0,"div",2)(1,"div",3),P(2,"app-breadcrumb",4),H(3,hC,5,0,"div",5),ie(4,"async"),H(5,SC,3,2,"ng-container",6),ie(6,"async"),m()(),H(7,CC,1,1,"app-add-member-modal",7)(8,AC,1,1,"app-edit-member-modal",8)(9,kC,3,8,"app-share-family-modal",9)),t&2&&(T(2),R("items",i.breadcrumbItems),T(),R("ngIf",ue(4,6,i.family$)===null),T(2),R("ngIf",ue(6,8,i.family$)),T(2),R("ngIf",i.isAddMemberModalOpen),T(),R("ngIf",i.isEditMemberModalOpen),T(),R("ngIf",i.isShareModalOpen))},dependencies:[me,Dt,xe,gt,op,Lt,Ke,je,He,We,St,Ct,_t,Jl,Xl,Zl],encapsulation:2})};var mo={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"},premierLeague:{apiKey:"37bddc9782msh83111e8c0e4211ap1438fejsnd95d2f8667ef",apiHost:"premier-league-standings1.p.rapidapi.com"}};var jr=class n{constructor(e){this.http=e}apiUrl="https://premier-league-standings1.p.rapidapi.com/";getStandings(){let e=new lp().set("X-RapidAPI-Key",mo.premierLeague.apiKey).set("X-RapidAPI-Host",mo.premierLeague.apiHost);return this.http.get(this.apiUrl,{headers:e})}static \u0275fac=function(t){return new(t||n)(Oe(er))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};var DC=(n,e,t,i,r,s)=>({"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":n,"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":e,"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":i,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":r,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s}),RC=(n,e,t)=>({"text-green-600 dark:text-green-400":n,"text-red-600 dark:text-red-400":e,"text-gray-600 dark:text-gray-400":t});function VC(n,e){if(n&1){let t=X();u(0,"tr",31)(1,"td",32)(2,"span",33),g(3),m()(),u(4,"th",34)(5,"div",25)(6,"img",35),N("error",function(r){B(t);let s=M(3);return j(s.onImageError(r))}),m(),u(7,"div")(8,"div",36)(9,"span",37),g(10),m(),u(11,"span",38),g(12),m()(),u(13,"div",39)(14,"span",37),g(15),m(),u(16,"span",38),g(17),m()()()()(),u(18,"td",40),g(19),m(),u(20,"td",41),g(21),m(),u(22,"td",42),g(23),m(),u(24,"td",43),g(25),m(),u(26,"td",40),g(27),m(),u(28,"td",40),g(29),m(),u(30,"td",44),g(31),m(),u(32,"td",45),g(33),m()()}if(n&2){let t=e.$implicit,i=e.index;T(2),R("ngClass",tp(18,DC,i===0,i===1,i===2,i>=17,i>=3&&i<=6,i>=7&&i<=16)),T(),le(" ",t.stats.rank," "),T(3),R("src",t.team.logo,Kf)("alt",t.team.name),T(4),Y(t.team.abbreviation),T(2),Y(t.team.name),T(3),Y(t.team.name),T(2),Y(t.team.abbreviation),T(2),Y(t.stats.gamesPlayed),T(2),Y(t.stats.wins),T(2),Y(t.stats.ties),T(2),Y(t.stats.losses),T(2),Y(t.stats.goalsFor),T(2),Y(t.stats.goalsAgainst),T(),R("ngClass",ep(25,RC,t.stats.goalDifference>0,t.stats.goalDifference<0,t.stats.goalDifference===0)),T(),qn(" ",t.stats.goalDifference>0?"+":"","",t.stats.goalDifference," "),T(2),Y(t.stats.points)}}function MC(n,e){if(n&1&&(u(0,"div")(1,"div",14)(2,"table",15)(3,"thead",16)(4,"tr")(5,"th",17),g(6,"Pos"),m(),u(7,"th",18),g(8,"Team"),m(),u(9,"th",19),g(10,"P"),m(),u(11,"th",19),g(12,"W"),m(),u(13,"th",19),g(14,"D"),m(),u(15,"th",19),g(16,"L"),m(),u(17,"th",19),g(18,"GF"),m(),u(19,"th",19),g(20,"GA"),m(),u(21,"th",19),g(22,"GD"),m(),u(23,"th",20),g(24,"Pts"),m()()(),u(25,"tbody"),H(26,VC,34,29,"tr",21),m()()(),u(27,"div",22)(28,"h3",23),g(29,"Legend"),m(),u(30,"div",24)(31,"div",25),P(32,"span",26),u(33,"span",27),g(34,"Champions League"),m()(),u(35,"div",25),P(36,"span",28),u(37,"span",27),g(38,"Europa League"),m()(),u(39,"div",25),P(40,"span",29),u(41,"span",27),g(42,"Mid Table"),m()(),u(43,"div",25),P(44,"span",30),u(45,"span",27),g(46,"Relegation"),m()()()()()),n&2){let t=M().ngIf;T(26),R("ngForOf",t)}}function NC(n,e){n&1&&(u(0,"div",46)(1,"div",47),F(),u(2,"svg",48),P(3,"path",49),m()(),z(),u(4,"h3",50),g(5,"No Data Available"),m(),u(6,"p",27),g(7,"Premier League standings are not currently available."),m()())}function OC(n,e){if(n&1&&(u(0,"div"),H(1,MC,47,1,"div",13)(2,NC,8,0,"ng-template",null,1,En),m()),n&2){let t=e.ngIf,i=yn(3);T(),R("ngIf",t&&t.length>0)("ngIfElse",i)}}function LC(n,e){if(n&1){let t=X();u(0,"div",46)(1,"div",52),F(),u(2,"svg",53),P(3,"path",54),m()(),z(),u(4,"h3",50),g(5,"Error Loading Data"),m(),u(6,"p",55),g(7,"Unable to load Premier League standings. Please try again later."),m(),u(8,"button",56),N("click",function(){B(t);let r=M(2);return j(r.loadStandings())}),F(),u(9,"svg",57),P(10,"path",11),m(),g(11," Retry "),m()()}}function FC(n,e){n&1&&(u(0,"div",46),P(1,"div",58),u(2,"h3",50),g(3,"Loading Standings"),m(),u(4,"p",27),g(5,"Fetching the latest Premier League data..."),m()())}function UC(n,e){if(n&1&&H(0,LC,12,0,"div",51)(1,FC,6,0,"ng-template",null,2,En),n&2){let t=yn(2),i=M();R("ngIf",i.error)("ngIfElse",t)}}var tc=class n{constructor(e){this.premierLeagueService=e}standings$;error;breadcrumbItems=[{label:"Home",route:"/"},{label:"Premier League",route:void 0}];ngOnInit(){this.loadStandings()}loadStandings(){this.error=null,this.standings$=this.premierLeagueService.getStandings().pipe(Vo(e=>(this.error=e,console.error(e),ct(null))))}onImageError(e){e.target.style.display="none"}static \u0275fac=function(t){return new(t||n)(G(jr))};static \u0275cmp=he({type:n,selectors:[["app-premier-league"]],features:[Bt([jr])],decls:19,vars:5,consts:[["loadingOrError",""],["noData",""],["loading",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"card"],[4,"ngIf","ngIfElse"],[1,"overflow-x-auto"],[1,"w-full","text-xs","sm:text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-2","sm:px-4","py-2","sm:py-3","text-center"],["scope","col",1,"px-2","sm:px-4","py-2","sm:py-3"],["scope","col",1,"px-1","sm:px-4","py-2","sm:py-3","text-center"],["scope","col",1,"px-2","sm:px-4","py-2","sm:py-3","text-center","font-semibold"],["class","border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"mt-4","sm:mt-6","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white","mb-3"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-2","sm:gap-3","text-xs"],[1,"flex","items-center"],[1,"w-3","h-3","bg-yellow-100","border","border-yellow-300","rounded-full","mr-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"w-3","h-3","bg-blue-100","border","border-blue-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-green-100","border","border-green-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-red-100","border","border-red-300","rounded-full","mr-2"],[1,"border-b","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-150"],[1,"px-2","sm:px-4","py-3","sm:py-4","text-center","font-medium"],[1,"inline-flex","items-center","justify-center","w-6","h-6","sm:w-8","sm:h-8","rounded-full","text-xs","sm:text-sm","font-semibold",3,"ngClass"],["scope","row",1,"px-2","sm:px-4","py-3","sm:py-4","font-medium","text-gray-900","dark:text-white"],[1,"w-6","h-6","sm:w-8","sm:h-8","mr-2","sm:mr-3","rounded-full","object-cover",3,"error","src","alt"],[1,"font-semibold"],[1,"sm:hidden"],[1,"hidden","sm:inline"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"px-1","sm:px-4","py-3","sm:py-4","text-center"],[1,"px-1","sm:px-4","py-3","sm:py-4","text-center","text-green-600","dark:text-green-400","font-medium"],[1,"px-1","sm:px-4","py-3","sm:py-4","text-center","text-gray-600","dark:text-gray-400"],[1,"px-1","sm:px-4","py-3","sm:py-4","text-center","text-red-600","dark:text-red-400","font-medium"],[1,"px-1","sm:px-4","py-3","sm:py-4","text-center","font-medium",3,"ngClass"],[1,"px-2","sm:px-4","py-3","sm:py-4","text-center","font-bold","text-sm","sm:text-lg"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","dark:bg-gray-700","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-2"],["class","text-center py-12",4,"ngIf","ngIfElse"],[1,"w-16","h-16","bg-red-100","dark:bg-red-900","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-600","dark:text-gray-400","mb-4"],[1,"btn-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600","mx-auto","mb-4"]],template:function(t,i){if(t&1){let r=X();u(0,"div",3)(1,"div",4),P(2,"app-breadcrumb",5),u(3,"div",6)(4,"div")(5,"h1",7),g(6,"Premier League Standings"),m(),u(7,"p",8),g(8,"View the current Premier League standings and team statistics"),m()(),u(9,"button",9),N("click",function(){return B(r),j(i.loadStandings())}),F(),u(10,"svg",10),P(11,"path",11),m(),z(),u(12,"span"),g(13,"Refresh"),m()()(),u(14,"div",12),H(15,OC,4,2,"div",13),ie(16,"async"),H(17,UC,3,2,"ng-template",null,0,En),m()()()}if(t&2){let r=yn(18);T(2),R("items",i.breadcrumbItems),T(13),R("ngIf",ue(16,3,i.standings$))("ngIfElse",r)}},dependencies:[me,sp,Dt,xe,gt,up,_t],encapsulation:2})};var Cv=[{path:"",component:Tl},{path:"ip-lookup",component:Sl},{path:"login",component:zl},{path:"profile",component:Wl,canActivate:[di]},{path:"lists",component:Hl,canActivate:[di]},{path:"todo/:id",component:Gl,canActivate:[di]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-2WVBNWEN.js").then(n=>n.QuotesComponent)},{path:"family-tree",component:Yl,canActivate:[di]},{path:"family-tree/:familyId",component:ec,canActivate:[di]},{path:"premier-league",component:tc}];var Av={providers:[np({eventCoalescing:!0}),fp(Cv),cp(),Kp(()=>Qp(mo.firebaseConfig)),Gy(()=>Hy()),Yg(()=>Xg())]};var nc=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new Do(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){Gf(this.checkInterval).pipe(ut(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new Ut(e=>{let t=document.querySelector('script[src*="main"]');if(t){let i=this.extractTimestampFromUrl(t.src),r=localStorage.getItem("app-version-timestamp");r&&r!==i&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",i)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(Oe(er))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};function jC(n,e){if(n&1){let t=X();u(0,"div",1)(1,"div",2)(2,"div",3),g(3,"\u{1F504}"),m(),u(4,"div",4)(5,"h4"),g(6,"New version available!"),m(),u(7,"p"),g(8,"A new version of the app is ready. Refresh to get the latest features."),m()(),u(9,"div",5)(10,"button",6),N("click",function(){B(t);let r=M();return j(r.update())}),g(11,"Update Now"),m(),u(12,"button",7),N("click",function(){B(t);let r=M();return j(r.dismiss())}),g(13,"Later"),m()()()()}}var ic=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(G(nc))};static \u0275cmp=he({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,i){t&1&&(H(0,jC,14,0,"div",0),ie(1,"async")),t&2&&R("ngIf",ue(1,1,i.updateAvailable$))},dependencies:[me,xe,gt],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var rc=class n{themeSubject=new Do("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=e||(t?"dark":"light");this.setTheme(i)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})};var kv=()=>({exact:!0});function qC(n,e){n&1&&(u(0,"a",25),F(),u(1,"svg",26),P(2,"path",27),m(),z(),u(3,"span"),g(4,"Family Tree"),m()())}function GC(n,e){if(n&1){let t=X();u(0,"a",34),N("click",function(){B(t);let r=M(3);return j(r.closeMoreMenu())}),g(1,"Profile"),m()}}function zC(n,e){if(n&1){let t=X();u(0,"div",28)(1,"a",29),N("click",function(){B(t);let r=M(2);return j(r.closeMoreMenu())}),g(2,"Lists"),m(),u(3,"a",30),N("click",function(){B(t);let r=M(2);return j(r.closeMoreMenu())}),g(4,"IP Lookup"),m(),u(5,"a",31),N("click",function(){B(t);let r=M(2);return j(r.closeMoreMenu())}),g(6,"Quotes"),m(),H(7,GC,2,0,"a",32),ie(8,"async"),u(9,"a",33),N("click",function(){B(t);let r=M(2);return j(r.closeMoreMenu())}),g(10,"Premier League"),m()()}if(n&2){let t=M(2);T(7),R("ngIf",ue(8,1,t.user$))}}function HC(n,e){if(n&1){let t=X();ht(0),u(1,"a",16),F(),u(2,"svg",17),P(3,"path",18),m(),z(),u(4,"span"),g(5,"Home"),m()(),H(6,qC,5,0,"a",19),ie(7,"async"),u(8,"div",20)(9,"button",21),N("click",function(r){B(t);let s=M();return j(s.toggleMoreMenu(r))}),u(10,"span"),g(11,"More"),m(),F(),u(12,"svg",22),P(13,"path",23),m()(),H(14,zC,11,3,"div",24),m(),mt()}if(n&2){let t=M();T(),R("routerLinkActiveOptions",hs(5,kv)),T(5),R("ngIf",ue(7,3,t.user$)),T(8),R("ngIf",t.moreMenuOpen)}}function WC(n,e){n&1&&(F(),u(0,"svg",35),P(1,"path",36),m())}function KC(n,e){n&1&&(F(),u(0,"svg",35),P(1,"path",37),m())}function QC(n,e){if(n&1){let t=X();u(0,"button",38),N("click",function(){B(t);let r=M();return j(r.login())}),F(),u(1,"svg",17),P(2,"path",39),m(),z(),u(3,"span"),g(4,"Login"),m()()}}function YC(n,e){if(n&1){let t=X();u(0,"button",40),N("click",function(){B(t);let r=M();return j(r.logout())}),F(),u(1,"svg",17),P(2,"path",41),m(),z(),u(3,"span"),g(4,"Sign Out"),m()()}}function JC(n,e){n&1&&(F(),u(0,"svg",42),P(1,"path",43),m())}function XC(n,e){n&1&&(F(),u(0,"svg",42),P(1,"path",44),m())}function ZC(n,e){if(n&1){let t=X();u(0,"a",62),N("click",function(){B(t);let r=M(2);return j(r.closeMobileMenu())}),F(),u(1,"svg",26),P(2,"path",27),m(),z(),u(3,"span"),g(4,"Family Tree"),m()()}}function e2(n,e){if(n&1){let t=X();u(0,"a",63),N("click",function(){B(t);let r=M(2);return j(r.closeMobileMenu())}),F(),u(1,"svg",17),P(2,"path",64),m(),z(),u(3,"span"),g(4,"Profile"),m()()}}function t2(n,e){n&1&&(F(),u(0,"svg",22),P(1,"path",36),m())}function n2(n,e){n&1&&(F(),u(0,"svg",22),P(1,"path",37),m())}function i2(n,e){if(n&1){let t=X();u(0,"button",65),N("click",function(){B(t);let r=M(2);return r.login(),j(r.closeMobileMenu())}),F(),u(1,"svg",17),P(2,"path",39),m(),z(),u(3,"span"),g(4,"Login"),m()()}}function r2(n,e){if(n&1){let t=X();u(0,"button",66),N("click",function(){B(t);let r=M(2);return r.logout(),j(r.closeMobileMenu())}),F(),u(1,"svg",17),P(2,"path",41),m(),z(),u(3,"span"),g(4,"Sign Out"),m()()}}function s2(n,e){if(n&1){let t=X();u(0,"div",45)(1,"nav",46)(2,"a",47),N("click",function(){B(t);let r=M();return j(r.closeMobileMenu())}),F(),u(3,"svg",17),P(4,"path",18),m(),z(),u(5,"span"),g(6,"Home"),m()(),u(7,"a",48),N("click",function(){B(t);let r=M();return j(r.closeMobileMenu())}),F(),u(8,"svg",17),P(9,"path",49),m(),z(),u(10,"span"),g(11,"Lists"),m()(),u(12,"a",50),N("click",function(){B(t);let r=M();return j(r.closeMobileMenu())}),F(),u(13,"svg",17),P(14,"path",51),m(),z(),u(15,"span"),g(16,"IP Lookup"),m()(),u(17,"a",52),N("click",function(){B(t);let r=M();return j(r.closeMobileMenu())}),F(),u(18,"svg",17),P(19,"path",53),m(),z(),u(20,"span"),g(21,"Quotes"),m()(),H(22,ZC,5,0,"a",54),ie(23,"async"),u(24,"a",55),N("click",function(){B(t);let r=M();return j(r.closeMobileMenu())}),F(),u(25,"svg",17),P(26,"path",56),m(),z(),u(27,"span"),g(28,"Premier League"),m()(),H(29,e2,5,0,"a",57),ie(30,"async"),u(31,"button",58),N("click",function(){B(t);let r=M();return j(r.toggleTheme())}),H(32,t2,2,0,"svg",59),ie(33,"async"),H(34,n2,2,0,"svg",59),ie(35,"async"),u(36,"span"),g(37),ie(38,"async"),m()(),H(39,i2,5,0,"button",60),ie(40,"async"),H(41,r2,5,0,"button",61),ie(42,"async"),m()()}if(n&2){let t=M();T(2),R("routerLinkActiveOptions",hs(22,kv)),T(20),R("ngIf",ue(23,8,t.user$)),T(7),R("ngIf",ue(30,10,t.user$)),T(3),R("ngIf",ue(33,12,t.theme$)==="light"),T(2),R("ngIf",ue(35,14,t.theme$)==="dark"),T(3),Y(ue(38,16,t.theme$)==="light"?"Dark Mode":"Light Mode"),T(2),R("ngIf",!ue(40,18,t.user$)),T(2),R("ngIf",ue(42,20,t.user$))}}var sc=class n{constructor(e,t,i,r){this.authService=e;this.themeService=t;this.router=i;this.elementRef=r;this.user$=this.authService.user$,this.theme$=this.themeService.theme$,this.isDetailPage$=this.router.events.pipe(Vc(s=>s instanceof dp),Ye(s=>s.urlAfterRedirects!=="/"))}user$;theme$;isMobileMenuOpen=!1;isDetailPage$;moreMenuOpen=!1;onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.moreMenuOpen=!1)}login(){this.authService.signInWithGoogle()}logout(){this.authService.signOut()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleMoreMenu(e){e.stopPropagation(),this.moreMenuOpen=!this.moreMenuOpen}closeMoreMenu(){this.moreMenuOpen=!1}static \u0275fac=function(t){return new(t||n)(G(Ce),G(rc),G($e),G(vi))};static \u0275cmp=he({type:n,selectors:[["app-root"]],hostBindings:function(t,i){t&1&&N("click",function(s){return i.onDocumentClick(s)},Qf)},decls:28,vars:21,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],[4,"ngIf"],[1,"flex","items-center","space-x-1.5","p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"text-xs","sm:text-sm","font-medium"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"relative"],[1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","dark:bg-gray-800","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["routerLink","/lists",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/ip-lookup",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/quotes",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile","class","block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",3,"click",4,"ngIf"],["routerLink","/premier-league",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/premier-league","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&(u(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),g(5," Manu's Playground "),m()(),u(6,"nav",5),H(7,HC,15,6,"ng-container",6),ie(8,"async"),u(9,"button",7),N("click",function(){return i.toggleTheme()}),H(10,WC,2,0,"svg",8),ie(11,"async"),H(12,KC,2,0,"svg",8),ie(13,"async"),u(14,"span",9),g(15),ie(16,"async"),m()(),H(17,QC,5,0,"button",10),ie(18,"async"),H(19,YC,5,0,"button",11),ie(20,"async"),m(),u(21,"button",12),N("click",function(){return i.toggleMobileMenu()}),H(22,JC,2,0,"svg",13)(23,XC,2,0,"svg",13),m()(),H(24,s2,43,23,"div",14),m()(),u(25,"main",15),P(26,"router-outlet"),m(),P(27,"app-update-notification")),t&2&&(T(7),R("ngIf",ue(8,9,i.isDetailPage$)),T(3),R("ngIf",ue(11,11,i.theme$)==="light"),T(2),R("ngIf",ue(13,13,i.theme$)==="dark"),T(3),Y(ue(16,15,i.theme$)==="light"?"Dark":"Light"),T(2),R("ngIf",!ue(18,17,i.user$)),T(2),R("ngIf",ue(20,19,i.user$)),T(3),R("ngIf",!i.isMobileMenuOpen),T(),R("ngIf",i.isMobileMenuOpen),T(),R("ngIf",i.isMobileMenuOpen))},dependencies:[me,xe,gt,hp,Uo,mp,ic],encapsulation:2})};ap(sc,Av).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
