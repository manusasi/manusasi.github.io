import{$ as Mo,$a as Qi,A as pn,Aa as vn,B as ke,Ba as Mt,C as Do,Ca as Al,D as gt,Da as Kf,E as Ne,Ea as Qf,F as rt,Fa as re,G as Wi,Ga as de,H as Bf,Ha as Kt,I as Vo,Ia as Qt,J as j,Ja as Yf,K as $,Ka as wn,L as U,La as Ki,M as Q,Ma as kl,N as gn,Na as Jf,O as hi,Oa as Pl,P as No,Pa as Xf,Q as Tt,Qa as Rl,R as mi,Ra as Dl,S as as,Sa as Zf,T as fi,Ta as Yt,U as jf,Ua as Pe,V as $f,Va as dt,W as qf,Wa as ep,X as T,Xa as Bn,Y as cs,Ya as _e,Z as z,Za as tp,_ as ge,_a as np,a as we,aa as ze,ab as ip,b as Ie,ba as xt,bb as rp,c as Ao,ca as G,cb as sp,d as Fn,da as He,db as Oo,e as v,ea as Ht,eb as op,f as Nt,fa as Gf,fb as Ue,g as Vf,ga as zf,gb as Lo,h as ko,ha as V,hb as ap,i as Nf,ia as u,ib as cp,j as Mf,ja as m,jb as Fo,k as Po,ka as D,kb as lp,l as xl,la as st,lb as ht,m as Sl,ma as ot,n as pt,na as Z,o as nt,oa as L,p as ss,pa as M,q as Ge,qa as Wt,r as Of,ra as Hf,s as Lf,sa as ls,t as Ff,ta as Wf,u as Cl,ua as _,v as Ro,va as ee,w as bt,wa as ce,x as it,xa as Un,y as Uf,ya as _n,z as os,za as yn}from"./chunk-ONL5GAQE.js";var up=()=>{};var mp=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},a1=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],a=n[t++],l=n[t++],d=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{let s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,l=a?n[r+1]:0,d=r+2<n.length,f=d?n[r+2]:0,g=s>>2,w=(s&3)<<4|l>>4,E=(l&15)<<2|f>>6,R=f&63;d||(R=64,a||(E=64)),i.push(t[g],t[w],t[E],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):a1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let w=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||l==null||f==null||w==null)throw new Nl;let E=s<<2|l>>4;if(i.push(E),f!==64){let R=l<<4&240|f>>2;if(i.push(R),w!==64){let F=f<<6&192|w;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Nl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},c1=function(n){let e=mp(n);return Uo.encodeByteArray(e,!0)},ds=function(n){return c1(n).replace(/\./g,"")},Bo=function(n){try{return Uo.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ol(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l1=()=>Ol().__FIREBASE_DEFAULTS__,u1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},d1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bo(n[1]);return e&&JSON.parse(e)},jo=()=>{try{return up()||l1()||u1()||d1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ll=n=>{var e,t;return(t=(e=jo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fp=n=>{let e=Ll(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Fl=()=>{var n;return(n=jo())===null||n===void 0?void 0:n.config},Ul=n=>{var e;return(e=jo())===null||e===void 0?void 0:e[`_${n}`]};var pi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function jn(n){return n.endsWith(".cloudworkstations.dev")}function $o(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function pp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ds(JSON.stringify(t)),ds(JSON.stringify(a)),""].join(".")}var us={};function h1(){let n={prod:[],emulator:[]};for(let e of Object.keys(us))us[e]?n.emulator.push(e):n.prod.push(e);return n}function m1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dp=!1;function qo(n,e){if(typeof window>"u"||typeof document>"u"||!jn(window.location.host)||us[n]===e||us[n]||dp)return;us[n]=e;function t(E){return`__firebase__banner__${E}`}let i="__firebase__banner",s=h1().prod.length>0;function a(){let E=document.getElementById(i);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{dp=!0,a()},E}function g(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){let E=m1(i),R=t("text"),F=document.getElementById(R)||document.createElement("span"),W=t("learnmore"),B=document.getElementById(W)||document.createElement("a"),se=t("preprendIcon"),te=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let oe=E.element;l(oe),g(B,W);let ye=f();d(te,se),oe.append(te,F,B,ye),document.body.appendChild(oe)}s?(F.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function f1(){var n;let e=(n=jo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _p(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wp(){let n=Be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ep(){return!f1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hs(){try{return typeof indexedDB=="object"}catch{return!1}}function Ip(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var p1="FirebaseError",_t=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=p1,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}},Ot=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?g1(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new _t(r,l,i)}};function g1(n,e){return n.replace(_1,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var _1=/\{\$([^}]+)}/g;function bp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function St(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],a=e[r];if(hp(s)&&hp(a)){if(!St(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function hp(n){return n!==null&&typeof n=="object"}function Yi(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Tp(n,e){let t=new Ml(n,e);return t.subscribe.bind(t)}var Ml=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");y1(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Vl),r.error===void 0&&(r.error=Vl),r.complete===void 0&&(r.complete=Vl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function y1(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vl(){}var tA=4*60*60*1e3;function Re(n){return n&&n._delegate?n._delegate:n}var at=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gi="[DEFAULT]";var Bl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new pi;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w1(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:v1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function v1(n){return n===gi?void 0:n}function w1(n){return n.instantiationMode==="EAGER"}var Go=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Bl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var E1=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),I1={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},b1=le.INFO,T1={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},x1=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=T1[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jt=class{constructor(e){this.name=e,this._logLevel=b1,this._logHandler=x1,this._userLogHandler=null,E1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var S1=(n,e)=>e.some(t=>n instanceof t),xp,Sp;function C1(){return xp||(xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A1(){return Sp||(Sp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Cp=new WeakMap,$l=new WeakMap,Ap=new WeakMap,jl=new WeakMap,Gl=new WeakMap;function k1(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Xt(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Cp.set(t,n)}).catch(()=>{}),Gl.set(e,n),e}function P1(n){if($l.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});$l.set(n,e)}var ql={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $l.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ap.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kp(n){ql=n(ql)}function R1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(zo(this),e,...t);return Ap.set(i,e.sort?e.sort():[e]),Xt(i)}:A1().includes(n)?function(...e){return n.apply(zo(this),e),Xt(Cp.get(this))}:function(...e){return Xt(n.apply(zo(this),e))}}function D1(n){return typeof n=="function"?R1(n):(n instanceof IDBTransaction&&P1(n),S1(n,C1())?new Proxy(n,ql):n)}function Xt(n){if(n instanceof IDBRequest)return k1(n);if(jl.has(n))return jl.get(n);let e=D1(n);return e!==n&&(jl.set(n,e),Gl.set(e,n)),e}var zo=n=>Gl.get(n);function Rp(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,e),l=Xt(a);return i&&a.addEventListener("upgradeneeded",d=>{i(Xt(a.result),d.oldVersion,d.newVersion,Xt(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),l.then(d=>{s&&d.addEventListener("close",()=>s()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var V1=["get","getKey","getAll","getAllKeys","count"],N1=["put","add","delete","clear"],zl=new Map;function Pp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zl.get(e))return zl.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=N1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||V1.includes(t)))return;let s=function(a,...l){return v(this,null,function*(){let d=this.transaction(a,r?"readwrite":"readonly"),f=d.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&d.done]))[0]})};return zl.set(e,s),s}kp(n=>Ie(we({},n),{get:(e,t,i)=>Pp(e,t)||n.get(e,t,i),has:(e,t)=>!!Pp(e,t)||n.has(e,t)}));var Wl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(M1(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function M1(n){let e=n.getComponent();return e?.type==="VERSION"}var Kl="@firebase/app",Dp="0.13.1";var En=new Jt("@firebase/app"),O1="@firebase/app-compat",L1="@firebase/analytics-compat",F1="@firebase/analytics",U1="@firebase/app-check-compat",B1="@firebase/app-check",j1="@firebase/auth",$1="@firebase/auth-compat",q1="@firebase/database",G1="@firebase/data-connect",z1="@firebase/database-compat",H1="@firebase/functions",W1="@firebase/functions-compat",K1="@firebase/installations",Q1="@firebase/installations-compat",Y1="@firebase/messaging",J1="@firebase/messaging-compat",X1="@firebase/performance",Z1="@firebase/performance-compat",ew="@firebase/remote-config",tw="@firebase/remote-config-compat",nw="@firebase/storage",iw="@firebase/storage-compat",rw="@firebase/firestore",sw="@firebase/ai",ow="@firebase/firestore-compat",aw="firebase",cw="11.9.0";var Ql="[DEFAULT]",lw={[Kl]:"fire-core",[O1]:"fire-core-compat",[F1]:"fire-analytics",[L1]:"fire-analytics-compat",[B1]:"fire-app-check",[U1]:"fire-app-check-compat",[j1]:"fire-auth",[$1]:"fire-auth-compat",[q1]:"fire-rtdb",[G1]:"fire-data-connect",[z1]:"fire-rtdb-compat",[H1]:"fire-fn",[W1]:"fire-fn-compat",[K1]:"fire-iid",[Q1]:"fire-iid-compat",[Y1]:"fire-fcm",[J1]:"fire-fcm-compat",[X1]:"fire-perf",[Z1]:"fire-perf-compat",[ew]:"fire-rc",[tw]:"fire-rc-compat",[nw]:"fire-gcs",[iw]:"fire-gcs-compat",[rw]:"fire-fst",[ow]:"fire-fst-compat",[sw]:"fire-vertex","fire-js":"fire-js",[aw]:"fire-js-all"};var ms=new Map,uw=new Map,Yl=new Map;function Vp(n,e){try{n.container.addComponent(e)}catch(t){En.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lt(n){let e=n.name;if(Yl.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;Yl.set(e,n);for(let t of ms.values())Vp(t,n);for(let t of uw.values())Vp(t,n);return!0}function Ji(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yt(n){return n==null?!1:n.settings!==void 0}var dw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new Ot("app","Firebase",dw);var Jl=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new at("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};var qn=cw;function eu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Ql,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(t||(t=Fl()),!t)throw $n.create("no-options");let s=ms.get(r);if(s){if(St(t,s.options)&&St(i,s.config))return s;throw $n.create("duplicate-app",{appName:r})}let a=new Go(r);for(let d of Yl.values())a.addComponent(d);let l=new Jl(t,i,a);return ms.set(r,l),l}function _i(n=Ql){let e=ms.get(n);if(!e&&n===Ql&&Fl())return eu();if(!e)throw $n.create("no-app",{appName:n});return e}function Ho(){return Array.from(ms.values())}function De(n,e,t){var i;let r=(i=lw[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(l.join(" "));return}Lt(new at(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var hw="firebase-heartbeat-database",mw=1,fs="firebase-heartbeat-store",Hl=null;function Lp(){return Hl||(Hl=Rp(hw,mw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fs)}catch(t){console.warn(t)}}}}).catch(n=>{throw $n.create("idb-open",{originalErrorMessage:n.message})})),Hl}function fw(n){return v(this,null,function*(){try{let t=(yield Lp()).transaction(fs),i=yield t.objectStore(fs).get(Fp(n));return yield t.done,i}catch(e){if(e instanceof _t)En.warn(e.message);else{let t=$n.create("idb-get",{originalErrorMessage:e?.message});En.warn(t.message)}}})}function Np(n,e){return v(this,null,function*(){try{let i=(yield Lp()).transaction(fs,"readwrite");yield i.objectStore(fs).put(e,Fp(n)),yield i.done}catch(t){if(t instanceof _t)En.warn(t.message);else{let i=$n.create("idb-set",{originalErrorMessage:t?.message});En.warn(i.message)}}})}function Fp(n){return`${n.name}!${n.options.appId}`}var pw=1024,gw=30,Xl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Zl(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>gw){let a=yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){En.warn(i)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Mp(),{heartbeatsToSend:i,unsentEntries:r}=_w(this._heartbeatsCache.heartbeats),s=ds(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return En.warn(t),""}})}};function Mp(){return new Date().toISOString().substring(0,10)}function _w(n,e=pw){let t=[],i=n.slice();for(let r of n){let s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Op(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Op(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Zl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return hs()?Ip().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Np(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Np(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Op(n){return ds(JSON.stringify({version:2,heartbeats:n})).length}function yw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function vw(n){Lt(new at("platform-logger",e=>new Wl(e),"PRIVATE")),Lt(new at("heartbeat",e=>new Xl(e),"PRIVATE")),De(Kl,Dp,n),De(Kl,Dp,"esm2017"),De("fire-js","")}vw("");var ww="firebase",Ew="11.9.1";De(ww,Ew,"app");function Up(n){n===void 0&&(n=rt(gn));let e=n.get(No);return t=>new Nt(i=>{let r=e.add(),s=!1;function a(){s||(r(),s=!0)}let l=t.subscribe({next:d=>{i.next(d),a()},complete:()=>{i.complete(),a()},error:d=>{i.error(d),a()}});return l.add(()=>{i.unsubscribe(),a()}),l})}var Gn=new kl("ANGULARFIRE2_VERSION");function ps(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Zi=(n,e)=>{let t=e?[e]:Ho(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Xi=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Xi||{}),Bp=Pl()&&typeof Zone<"u"?Xi.WARN:Xi.SILENT;var Wo=class{zone;delegate;constructor(e,t=Mf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(a){r?r.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(s,t,i)}},zn=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=rt(Ht);this.outsideAngular=t.runOutsideAngular(()=>new Wo(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Wo(typeof Zone>"u"?void 0:Zone.current,Nf))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jp=!1;function Iw(n,e){!jp&&(Bp>Xi.SILENT||Pl())&&(jp=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Bp>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function bw(n){let e=rt(Ht,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function yi(n){let e=rt(Ht,{optional:!0});return e?e.run(()=>n()):n()}var Tw=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),Vo(t,()=>yi(()=>n.apply(void 0,i)))),Se=(n,e,t)=>(t||=e?Xi.WARN:Xi.VERBOSE,function(){let i,r=arguments,s,a,l;try{s=rt(zn),a=rt(No),l=rt(Bf)}catch{return Iw(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=yi(()=>a.add())),r[f]=Tw(r[f],i,l));let d=bw(()=>n.apply(this,r));return e?d instanceof Nt?d.pipe(Sl(s.outsideAngular),xl(s.insideAngular),Up(l)):d instanceof Promise?yi(()=>{let f=a.add();return new Promise((g,w)=>{d.then(E=>Vo(l,()=>yi(()=>g(E))),E=>Vo(l,()=>yi(()=>w(E)))).finally(f)})}):typeof d=="function"&&i?function(){return setTimeout(i,0),d.apply(this,arguments)}:yi(()=>d):d instanceof Nt?d.pipe(Sl(s.outsideAngular),xl(s.insideAngular)):yi(()=>d)});var In=class{constructor(e){return e}},vi=class{constructor(){return Ho()}};function xw(n){return n&&n.length===1?n[0]:new In(_i())}var tu=new gt("angularfire2._apps"),Sw={provide:In,useFactory:xw,deps:[[new Tt,tu]]},Cw={provide:vi,deps:[[new Tt,tu]]};function Aw(n){return(e,t)=>{let i=t.get(jf);De("angularfire",Gn.full,"core"),De("angularfire",Gn.full,"app"),De("angular",Jf.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new In(r)}}function $p(n,...e){return Wi([Sw,Cw,{provide:tu,useFactory:Aw(n),multi:!0,deps:[Ht,gn,zn,...e]}])}var qp=Se(eu,!0);var kw=new Map,Pw={activated:!1,tokenObservers:[]},Rw={initialized:!1,enabled:!1};function Ft(n){return kw.get(n)||Object.assign({},Pw)}function Wp(){return Rw}var Dw="https://content-firebaseappcheck.googleapis.com/v1";var Vw="exchangeDebugToken",Gp={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},s2=24*60*60*1e3;var ru=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new pi,this.pending.promise.catch(t=>{}),yield Nw(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new pi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Nw(n){return new Promise(e=>{setTimeout(e,n)})}var Mw={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hn=new Ot("appCheck","AppCheck",Mw);function Kp(n){if(!Ft(n).activated)throw Hn.create("use-before-activation",{appName:n.name})}function Qp(i,r){return v(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let R=yield a.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}let l={method:"POST",body:JSON.stringify(e),headers:s},d;try{d=yield fetch(n,l)}catch(R){throw Hn.create("fetch-network-error",{originalErrorMessage:R?.message})}if(d.status!==200)throw Hn.create("fetch-status-error",{httpStatus:d.status});let f;try{f=yield d.json()}catch(R){throw Hn.create("fetch-parse-error",{originalErrorMessage:R?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Hn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let w=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+w,issuedAtTimeMillis:E}})}function Yp(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Dw}/projects/${t}/apps/${i}:${Vw}?key=${r}`,body:{debug_token:e}}}var Ow="firebase-app-check-database",Lw=1,su="firebase-app-check-store";var Ko=null;function Fw(){return Ko||(Ko=new Promise((n,e)=>{try{let t=indexedDB.open(Ow,Lw);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Hn.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(su,{keyPath:"compositeKey"})}}}catch(t){e(Hn.create("storage-open",{originalErrorMessage:t?.message}))}}),Ko)}function Uw(n,e){return Bw(jw(n),e)}function Bw(n,e){return v(this,null,function*(){let i=(yield Fw()).transaction(su,"readwrite"),s=i.objectStore(su).put({compositeKey:n,value:e});return new Promise((a,l)=>{s.onsuccess=d=>{a()},i.onerror=d=>{var f;l(Hn.create("storage-set",{originalErrorMessage:(f=d.target.error)===null||f===void 0?void 0:f.message}))}})})}function jw(n){return`${n.options.appId}-${n.name}`}var gs=new Jt("@firebase/app-check");function nu(n,e){return hs()?Uw(n,e).catch(t=>{gs.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Jp(){return Wp().enabled}function Xp(){return v(this,null,function*(){let n=Wp();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $w={error:"UNKNOWN_ERROR"};function qw(n){return Uo.encodeString(JSON.stringify(n),!1)}function ou(n,e=!1,t=!1){return v(this,null,function*(){let i=n.app;Kp(i);let r=Ft(i),s=r.token,a;if(s&&!_s(s)&&(r.token=void 0,s=void 0),!s){let f=yield r.cachedTokenPromise;f&&(_s(f)?s=f:yield nu(i,void 0))}if(!e&&s&&_s(s))return{token:s.token};let l=!1;if(Jp())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=Qp(Yp(i,yield Xp()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let f=yield r.exchangeTokenPromise;return yield nu(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?gs.warn(f.message):t&&gs.error(f),iu(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Ft(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?gs.warn(f.message):t&&gs.error(f),a=f}let d;return s?a?_s(s)?d={token:s.token,internalError:a}:d=iu(a):(d={token:s.token},r.token=s,yield nu(i,s)):d=iu(a),l&&Ww(i,d),d})}function Gw(n){return v(this,null,function*(){let e=n.app;Kp(e);let{provider:t}=Ft(e);if(Jp()){let i=yield Xp(),{token:r}=yield Qp(Yp(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function zw(n,e,t,i){let{app:r}=n,s=Ft(r),a={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&_s(s.token)){let l=s.token;Promise.resolve().then(()=>{t({token:l.token}),zp(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>zp(n))}function Zp(n,e){let t=Ft(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function zp(n){let{app:e}=n,t=Ft(e),i=t.tokenRefresher;i||(i=Hw(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Hw(n){let{app:e}=n;return new ru(()=>v(null,null,function*(){let t=Ft(e),i;if(t.token?i=yield ou(n,!0):i=yield ou(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=Ft(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Gp.RETRIAL_MIN_WAIT,Gp.RETRIAL_MAX_WAIT)}function Ww(n,e){let t=Ft(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function _s(n){return n.expireTimeMillis-Date.now()>0}function iu(n){return{token:qw($w),error:n}}var au=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ft(this.app);for(let t of e)Zp(this.app,t.next);return Promise.resolve()}};function Kw(n,e){return new au(n,e)}function Qw(n){return{getToken:e=>ou(n,e),getLimitedUseToken:()=>Gw(n),addTokenListener:e=>zw(n,"INTERNAL",e),removeTokenListener:e=>Zp(n.app,e)}}var Yw="@firebase/app-check",Jw="0.10.0";var Xw="app-check",Hp="app-check-internal";function Zw(){Lt(new at(Xw,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Kw(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Hp).initialize()})),Lt(new at(Hp,n=>{let e=n.getProvider("app-check").getImmediate();return Qw(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),De(Yw,Jw)}Zw();var eE="app-check";var er=class{constructor(){return Zi(eE)}};var tE=["localhost","0.0.0.0","127.0.0.1"],y2=typeof window<"u"&&tE.includes(window.location.hostname);function fg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pg=fg,gg=new Ot("auth","Firebase",fg());var ea=new Jt("@firebase/auth");function nE(n,...e){ea.logLevel<=le.WARN&&ea.warn(`Auth (${qn}): ${n}`,...e)}function Yo(n,...e){ea.logLevel<=le.ERROR&&ea.error(`Auth (${qn}): ${n}`,...e)}function en(n,...e){throw xu(n,...e)}function Ut(n,...e){return xu(n,...e)}function Tu(n,e,t){let i=Object.assign(Object.assign({},pg()),{[e]:t});return new Ot("auth","Firebase",i).create(e,{appName:n.name})}function wi(n){return Tu(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iE(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&en(n,"argument-error"),Tu(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xu(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return gg.create(n,...e)}function X(n,e,...t){if(!n)throw xu(e,...t)}function bn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yo(e),new Error(e)}function xn(n,e){n||bn(e)}function uu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rE(){return eg()==="http:"||eg()==="https:"}function eg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function sE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rE()||yp()||"connection"in navigator)?navigator.onLine:!0}function oE(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ei=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,xn(t>e,"Short delay should be less than long delay!"),this.isMobile=gp()||vp()}get(){return sE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Su(n,e){xn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ta=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var aE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lE=new Ei(3e4,6e4);function Cu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function nr(s,a,l,d){return v(this,arguments,function*(n,e,t,i,r={}){return _g(n,r,()=>v(null,null,function*(){let f={},g={};i&&(e==="GET"?g=i:f={body:JSON.stringify(i)});let w=Yi(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:E},f);return _p()||(R.referrerPolicy="no-referrer"),n.emulatorConfig&&jn(n.emulatorConfig.host)&&(R.credentials="include"),ta.fetch()(yield yg(n,n.config.apiHost,t,w),R)}))})}function _g(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},aE),e);try{let r=new du(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Qo(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let l=s.ok?a.errorMessage:a.error.message,[d,f]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qo(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Qo(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Qo(n,"user-disabled",a);let g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Tu(n,g,f);en(n,g)}}catch(r){if(r instanceof _t)throw r;en(n,"network-request-failed",{message:String(r)})}})}function uE(s,a,l,d){return v(this,arguments,function*(n,e,t,i,r={}){let f=yield nr(n,e,t,i,r);return"mfaPendingCredential"in f&&en(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function yg(n,e,t,i){return v(this,null,function*(){let r=`${e}${t}?${i}`,s=n,a=s.config.emulator?Su(n.config,r):`${n.config.apiScheme}://${r}`;return cE.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}var du=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ut(this.auth,"network-request-failed")),lE.get())})}};function Qo(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Ut(n,e,i);return r.customData._tokenResponse=t,r}function dE(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:delete",e)})}function na(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:lookup",e)})}function ys(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Au(n,e=!1){return v(this,null,function*(){let t=Re(n),i=yield t.getIdToken(e),r=ku(i);X(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:ys(cu(r.auth_time)),issuedAtTime:ys(cu(r.iat)),expirationTime:ys(cu(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function cu(n){return Number(n)*1e3}function ku(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Yo("JWT malformed, contained fewer than 3 sections"),null;try{let r=Bo(t);return r?JSON.parse(r):(Yo("Failed to decode base64 JWT payload"),null)}catch(r){return Yo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function tg(n){let e=ku(n);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ws(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof _t&&hE(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function hE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var hu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Es=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ys(this.lastLoginAt),this.creationTime=ys(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ia(n){return v(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield ws(n,na(t,{idToken:i}));X(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vg(s.providerUserInfo):[],l=mE(n.providerData,a),d=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!l?.length,g=d?f:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Es(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,w)})}function Pu(n){return v(this,null,function*(){let e=Re(n);yield ia(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function mE(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function vg(n){return n.map(e=>{var{providerId:t}=e,i=Po(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function fE(n,e){return v(this,null,function*(){let t=yield _g(n,{},()=>v(null,null,function*(){let i=Yi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=yield yg(n,r,"/v1/token",`key=${s}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:l,body:i};return n.emulatorConfig&&jn(n.emulatorConfig.host)&&(d.credentials="include"),ta.fetch()(a,d)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function pE(n,e){return v(this,null,function*(){return nr(n,"POST","/v2/accounts:revokeToken",Cu(n,e))})}var vs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,"internal-error");let t=tg(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield fE(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new n;return i&&(X(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return bn("not implemented")}};function Wn(n,e){X(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Kn=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Po(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Es(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield ws(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Au(this,e)}reload(){return Pu(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ia(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(yt(this.auth.app))return Promise.reject(wi(this.auth));let e=yield this.getIdToken();return yield ws(this,dE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,l,d,f,g;let w=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,F=(a=t.photoURL)!==null&&a!==void 0?a:void 0,W=(l=t.tenantId)!==null&&l!==void 0?l:void 0,B=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,se=(f=t.createdAt)!==null&&f!==void 0?f:void 0,te=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:oe,emailVerified:ye,isAnonymous:Ze,providerData:pe,stsTokenManager:S}=t;X(oe&&S,e,"internal-error");let y=vs.fromJSON(this.name,S);X(typeof oe=="string",e,"internal-error"),Wn(w,e.name),Wn(E,e.name),X(typeof ye=="boolean",e,"internal-error"),X(typeof Ze=="boolean",e,"internal-error"),Wn(R,e.name),Wn(F,e.name),Wn(W,e.name),Wn(B,e.name),Wn(se,e.name),Wn(te,e.name);let b=new n({uid:oe,auth:e,email:E,emailVerified:ye,displayName:w,isAnonymous:Ze,photoURL:F,phoneNumber:R,tenantId:W,stsTokenManager:y,createdAt:se,lastLoginAt:te});return pe&&Array.isArray(pe)&&(b.providerData=pe.map(x=>Object.assign({},x))),B&&(b._redirectEventId=B),b}static _fromIdTokenResponse(e,t,i=!1){return v(this,null,function*(){let r=new vs;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ia(s),s})}static _fromGetAccountInfoResponse(e,t,i){return v(this,null,function*(){let r=t.users[0];X(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?vg(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,l=new vs;l.updateFromIdToken(i);let d=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Es(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(d,f),d})}};var ng=new Map;function Tn(n){xn(n instanceof Function,"Expected a class definition");let e=ng.get(n);return e?(xn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ng.set(n,e),e)}var gE=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,i){return v(this,null,function*(){this.storage[t]=i})}_get(t){return v(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),mu=gE;function Jo(n,e,t){return`firebase:${n}:${e}:${t}`}var ra=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Jo(this.userKey,r.apiKey,s),this.fullPersistenceKey=Jo("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield na(this.auth,{idToken:e}).catch(()=>{});return t?Kn._fromGetAccountInfoResponse(this.auth,t,e):null}return Kn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return v(this,null,function*(){if(!t.length)return new n(Tn(mu),e,i);let r=(yield Promise.all(t.map(f=>v(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),s=r[0]||Tn(mu),a=Jo(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let g=yield f._get(a);if(g){let w;if(typeof g=="string"){let E=yield na(e,{idToken:g}).catch(()=>{});if(!E)break;w=yield Kn._fromGetAccountInfoResponse(e,E,g)}else w=Kn._fromJSON(e,g);f!==s&&(l=w),s=f;break}}catch{}let d=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new n(s,e,i):(s=d[0],l&&(yield s._set(a,l.toJSON())),yield Promise.all(t.map(f=>v(null,null,function*(){if(f!==s)try{yield f._remove(a)}catch{}}))),new n(s,e,i))})}};function ig(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xg(e))return"Blackberry";if(Sg(e))return"Webos";if(Eg(e))return"Safari";if((e.includes("chrome/")||Ig(e))&&!e.includes("edge/"))return"Chrome";if(Tg(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function wg(n=Be()){return/firefox\//i.test(n)}function Eg(n=Be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ig(n=Be()){return/crios\//i.test(n)}function bg(n=Be()){return/iemobile/i.test(n)}function Tg(n=Be()){return/android/i.test(n)}function xg(n=Be()){return/blackberry/i.test(n)}function Sg(n=Be()){return/webos/i.test(n)}function Ru(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _E(n=Be()){var e;return Ru(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yE(){return wp()&&document.documentMode===10}function Cg(n=Be()){return Ru(n)||Tg(n)||Sg(n)||xg(n)||/windows phone/i.test(n)||bg(n)}function Ag(n,e=[]){let t;switch(n){case"Browser":t=ig(Be());break;case"Worker":t=`${ig(Be())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qn}/${i}`}var fu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((a,l)=>{try{let d=e(s);a(d)}catch(d){l(d)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function vE(t){return v(this,arguments,function*(n,e={}){return nr(n,"GET","/v2/passwordPolicy",Cu(n,e))})}var wE=6,pu=class{constructor(e){var t,i,r,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:wE,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,a,l;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),d}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var gu=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sa(this),this.idTokenSubscription=new sa(this),this.beforeStateQueue=new fu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var i,r,s;if(!this._deleted&&(this.persistenceManager=yield ra.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield na(this,{idToken:e}),i=yield Kn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(yt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===l)&&d?.user&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield ia(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oE()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(yt(this.app))return Promise.reject(wi(this));let t=e?Re(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return yt(this.app)?Promise.reject(wi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yt(this.app)?Promise.reject(wi(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Tn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield vE(this),t=new pu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ot("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield pE(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Tn(e)||this._popupRedirectResolver;X(t,this,"argument-error"),this.redirectPersistenceManager=yield ra.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,i,r);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&nE(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ma(n){return Re(n)}var sa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tp(t=>this.observer=t)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Du={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EE(n){Du=n}function IE(n){return Du.loadJS(n)}function bE(){return Du.gapiScript}function kg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Vu(n,e){let t=Ji(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(St(s,e??{}))return r;en(r,"already-initialized")}return t.initialize({options:e})}function TE(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Tn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Nu(n,e,t){let i=ma(n);X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Pg(e),{host:a,port:l}=xE(e),d=l===null?"":`:${l}`,f={url:`${s}//${a}${d}/`},g=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(St(f,i.config.emulator)&&St(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,jn(a)?($o(`${s}//${a}${d}`),qo("Auth",!0)):r||SE()}function Pg(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function xE(n){let e=Pg(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:rg(i.substr(s.length+1))}}else{let[s,a]=i.split(":");return{host:s,port:rg(a)}}}function rg(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function SE(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Is=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bn("not implemented")}_getIdTokenResponse(e){return bn("not implemented")}_linkToIdToken(e,t){return bn("not implemented")}_getReauthenticationResolver(e){return bn("not implemented")}};function tr(n,e){return v(this,null,function*(){return uE(n,"POST","/v1/accounts:signInWithIdp",Cu(n,e))})}var CE="http://localhost",oa=class n extends Is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):en("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Po(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new n(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return tr(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,tr(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,tr(e,t)}buildRequest(){let e={requestUri:CE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yi(t)}return e}};var bs=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var aa=class extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Mu=(()=>{class n extends aa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return oa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Ts=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return v(this,null,function*(){let s=yield Kn._fromIdTokenResponse(e,i,r),a=sg(i);return new n({user:s,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return v(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=sg(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function sg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var _u=class n extends _t{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Rg(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_u._fromErrorAndOperation(n,s,e,i):s})}function AE(n,e,t=!1){return v(this,null,function*(){let i=yield ws(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ts._forOperation(n,"link",i)})}function kE(n,e,t=!1){return v(this,null,function*(){let{auth:i}=n;if(yt(i.app))return Promise.reject(wi(i));let r="reauthenticate";try{let s=yield ws(n,Rg(i,r,e,n),t);X(s.idToken,i,"internal-error");let a=ku(s.idToken);X(a,i,"internal-error");let{sub:l}=a;return X(n.uid===l,i,"user-mismatch"),Ts._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&en(i,"user-mismatch"),s}})}function PE(n,e,t=!1){return v(this,null,function*(){if(yt(n.app))return Promise.reject(wi(n));let i="signIn",r=yield Rg(n,i,e),s=yield Ts._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Ss(n,e,t,i){return Re(n).onIdTokenChanged(e,t,i)}function Ou(n,e,t){return Re(n).beforeAuthStateChanged(e,t)}function Lu(n){return Re(n).signOut()}var ca="__sak";var la=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RE=1e3,DE=10,VE=(()=>{class n extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);yE()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,DE):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},RE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return v(this,null,function*(){yield Fn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return v(this,null,function*(){let i=yield Fn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return v(this,null,function*(){yield Fn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Dg=VE;var NE=(()=>{class n extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Fu=NE;function ME(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var OE=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let i=t,{eventId:r,eventType:s,data:a}=i.data,l=this.handlersMap[s];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let d=Array.from(l).map(g=>v(this,null,function*(){return g(i.origin,a)})),f=yield ME(d);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Uu(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var yu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,d)=>{let f=Uu("",20);r.port1.start();let g=setTimeout(()=>{d(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(w){let E=w;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(E.data.response);break;default:clearTimeout(g),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Zt(){return window}function LE(n){Zt().location.href=n}function Vg(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}function FE(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function UE(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BE(){return Vg()?self:null}var Ng="firebaseLocalStorageDb",jE=1,ua="firebaseLocalStorage",Mg="fbase_key",Ii=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function fa(n,e){return n.transaction([ua],e?"readwrite":"readonly").objectStore(ua)}function $E(){let n=indexedDB.deleteDatabase(Ng);return new Ii(n).toPromise()}function vu(){let n=indexedDB.open(Ng,jE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ua,{keyPath:Mg})}catch(r){t(r)}}),n.addEventListener("success",()=>v(null,null,function*(){let i=n.result;i.objectStoreNames.contains(ua)?e(i):(i.close(),yield $E(),e(yield vu()))}))})}function og(n,e,t){return v(this,null,function*(){let i=fa(n,!0).put({[Mg]:e,value:t});return new Ii(i).toPromise()})}function qE(n,e){return v(this,null,function*(){let t=fa(n,!1).get(e),i=yield new Ii(t).toPromise();return i===void 0?null:i.value})}function ag(n,e){let t=fa(n,!0).delete(e);return new Ii(t).toPromise()}var GE=800,zE=3,HE=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield vu(),this.db)})}_withRetries(t){return v(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>zE)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return Vg()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=OE._getInstance(BE()),this.receiver._subscribe("keyChanged",(t,i)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,i;if(this.activeServiceWorker=yield FE(),!this.activeServiceWorker)return;this.sender=new yu(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||UE()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield vu();return yield og(t,ca,"1"),yield ag(t,ca),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>og(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let i=yield this._withRetries(r=>qE(r,t));return this.localCache[t]=i,i})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>ag(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let a=fa(s,!1).getAll();return new Ii(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),GE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Og=HE;var A2=kg("rcb"),k2=new Ei(3e4,6e4);function Lg(n,e){return e?Tn(e):(X(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var xs=class extends Is{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tr(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function WE(n){return PE(n.auth,new xs(n),n.bypassAuthState)}function KE(n){let{auth:e,user:t}=n;return X(t,e,"internal-error"),kE(t,new xs(n),n.bypassAuthState)}function QE(n){return v(this,null,function*(){let{auth:e,user:t}=n;return X(t,e,"internal-error"),AE(t,new xs(n),n.bypassAuthState)})}var da=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WE;case"linkViaPopup":case"linkViaRedirect":return QE;case"reauthViaPopup":case"reauthViaRedirect":return KE;default:en(this.auth,"internal-error")}}resolve(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var YE=new Ei(2e3,1e4);function Bu(n,e,t){return v(this,null,function*(){if(yt(n.app))return Promise.reject(Ut(n,"operation-not-supported-in-this-environment"));let i=ma(n);iE(n,e,bs);let r=Lg(i,t);return new JE(i,"signInViaPopup",e,r).executeNotNull()})}var JE=(()=>{class n extends da{constructor(t,i,r,s,a){super(t,i,s,a),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return X(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){xn(this.filter.length===1,"Popup operations only handle one event");let t=Uu();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,YE.get())};t()}}n.currentPopupAction=null;return n})(),XE="pendingRedirect",Xo=new Map,wu=class n extends da{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return v(this,null,function*(){let e=Xo.get(this.auth._key());if(!e){try{let i=(yield ZE(this.resolver,this.auth))?yield Fn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xo.set(this.auth._key(),e)}return this.bypassAuthState||Xo.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Fn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Fn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function ZE(n,e){return v(this,null,function*(){let t=nI(e),i=tI(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function eI(n,e){Xo.set(n._key(),e)}function tI(n){return Tn(n._redirectPersistence)}function nI(n){return Jo(XE,n.config.apiKey,n.name)}function iI(n,e,t=!1){return v(this,null,function*(){if(yt(n.app))return Promise.reject(wi(n));let i=ma(n),r=Lg(i,e),a=yield new wu(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var rI=10*60*1e3,Eu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Fg(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ut(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rI&&this.cachedEventUids.clear(),this.cachedEventUids.has(cg(e))}saveEventToCache(e){this.cachedEventUids.add(cg(e)),this.lastProcessedEventTime=Date.now()}};function cg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Fg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fg(n);default:return!1}}function oI(t){return v(this,arguments,function*(n,e={}){return nr(n,"GET","/v1/projects",e)})}var aI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cI=/^https?/;function lI(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield oI(n);for(let t of e)try{if(uI(t))return}catch{}en(n,"unauthorized-domain")})}function uI(n){let e=uu(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!cI.test(t))return!1;if(aI.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var dI=new Ei(3e4,6e4);function lg(){let n=Zt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hI(n){return new Promise((e,t)=>{var i,r,s;function a(){lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lg(),t(Ut(n,"network-request-failed"))},timeout:dI.get()})}if(!((r=(i=Zt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Zt().gapi)===null||s===void 0)&&s.load)a();else{let l=kg("iframefcb");return Zt()[l]=()=>{gapi.load?a():t(Ut(n,"network-request-failed"))},IE(`${bE()}?onload=${l}`).catch(d=>t(d))}}).catch(e=>{throw Zo=null,e})}var Zo=null;function mI(n){return Zo=Zo||hI(n),Zo}var fI=new Ei(5e3,15e3),pI="__/auth/iframe",gI="emulator/auth/iframe",_I={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vI(n){let e=n.config;X(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Su(e,gI):`https://${n.config.authDomain}/${pI}`,i={apiKey:e.apiKey,appName:n.name,v:qn},r=yI.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Yi(i).slice(1)}`}function wI(n){return v(this,null,function*(){let e=yield mI(n),t=Zt().gapi;return X(t,n,"internal-error"),e.open({where:document.body,url:vI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_I,dontclear:!0},i=>new Promise((r,s)=>v(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=Ut(n,"network-request-failed"),l=Zt().setTimeout(()=>{s(a)},fI.get());function d(){Zt().clearTimeout(l),r(i)}i.ping(d).then(d,()=>{s(a)})})))})}var EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},II=500,bI=600,TI="_blank",xI="http://localhost",ha=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function SI(n,e,t,i=II,r=bI){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",d=Object.assign(Object.assign({},EI),{width:i.toString(),height:r.toString(),top:s,left:a}),f=Be().toLowerCase();t&&(l=Ig(f)?TI:t),wg(f)&&(e=e||xI,d.scrollbars="yes");let g=Object.entries(d).reduce((E,[R,F])=>`${E}${R}=${F},`,"");if(_E(f)&&l!=="_self")return CI(e||"",l),new ha(null);let w=window.open(e||"",l,g);X(w,n,"popup-blocked");try{w.focus()}catch{}return new ha(w)}function CI(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var AI="__/auth/handler",kI="emulator/auth/handler",PI=encodeURIComponent("fac");function ug(n,e,t,i,r,s){return v(this,null,function*(){X(n.config.authDomain,n,"auth-domain-config-required"),X(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qn,eventId:r};if(e instanceof bs){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",bp(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,w]of Object.entries(s||{}))a[g]=w}if(e instanceof aa){let g=e.getScopes().filter(w=>w!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let g of Object.keys(l))l[g]===void 0&&delete l[g];let d=yield n._getAppCheckToken(),f=d?`#${PI}=${encodeURIComponent(d)}`:"";return`${RI(n)}?${Yi(l).slice(1)}${f}`})}function RI({config:n}){return n.emulator?Su(n,kI):`https://${n.authDomain}/${AI}`}var lu="webStorageSupport",Iu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fu,this._completeRedirectFn=iI,this._overrideRedirectResult=eI}_openPopup(e,t,i,r){return v(this,null,function*(){var s;xn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield ug(e,t,i,uu(),r);return SI(e,a,Uu())})}_openRedirect(e,t,i,r){return v(this,null,function*(){yield this._originValidation(e);let s=yield ug(e,t,i,uu(),r);return LE(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(xn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return v(this,null,function*(){let t=yield wI(e),i=new Eu(e);return t.register("authEvent",r=>(X(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lu,{type:lu},r=>{var s;let a=(s=r?.[0])===null||s===void 0?void 0:s[lu];a!==void 0&&t(!!a),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cg()||Eg()||Ru()}},Ug=Iu;var dg="@firebase/auth",hg="1.10.7";var bu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VI(n){Lt(new at("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let d={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(n)},f=new gu(i,r,s,d);return TE(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Lt(new at("auth-internal",e=>{let t=ma(e.getProvider("auth").getImmediate());return(i=>new bu(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(dg,hg,DI(n)),De(dg,hg,"esm2017")}var NI=5*60,MI=Ul("authIdTokenMaxAge")||NI,mg=null,OI=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MI)return;let r=t?.token;mg!==r&&(mg=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function ju(n=_i()){let e=Ji(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Vu(n,{popupRedirectResolver:Ug,persistence:[Og,Dg,Fu]}),i=Ul("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let a=OI(s.toString());Ou(t,a,()=>a(t.currentUser)),Ss(t,l=>a(l))}}let r=Ll("auth");return r&&Nu(t,`http://${r}`),t}function LI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}EE({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Ut("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",LI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VI("Browser");function $g(n){return new Nt(function(e){var t=Ss(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var qg="auth",bi=class{constructor(e){return e}},Cs=class{constructor(){return Zi(qg)}};var $u=new gt("angularfire2.auth-instances");function Sb(n,e){let t=ps(qg,n,e);return t&&new bi(t)}function Cb(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new bi(i)}}var Ab={provide:Cs,deps:[[new Tt,$u]]},kb={provide:bi,useFactory:Sb,deps:[[new Tt,$u],In]};function Gg(n,...e){return De("angularfire",Gn.full,"auth"),Wi([kb,Ab,{provide:$u,useFactory:Cb(n),multi:!0,deps:[Ht,gn,zn,vi,[new Tt,er],...e]}])}var zg=Se($g,!0);var Hg=Se(ju,!0);var Wg=Se(Bu,!0,2);var Kg=Se(Lu,!0,2);var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yg={};var Sn,qu;(function(){var n;function e(S,y){function b(){}b.prototype=y.prototype,S.D=y.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(x,C,k){for(var I=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)I[hn-2]=arguments[hn];return y.prototype[C].apply(x,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,y,b){b||(b=0);var x=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)x[C]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(C=0;16>C;++C)x[C]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=S.g[0],b=S.g[1],C=S.g[2];var k=S.g[3],I=y+(k^b&(C^k))+x[0]+3614090360&4294967295;y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+x[1]+3905402710&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+x[2]+606105819&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+x[3]+3250441966&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+x[4]+4118548399&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+x[5]+1200080426&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+x[6]+2821735955&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+x[7]+4249261313&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+x[8]+1770035416&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+x[9]+2336552879&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+x[10]+4294925233&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+x[11]+2304563134&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+x[12]+1804603682&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+x[13]+4254626195&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+x[14]+2792965006&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+x[15]+1236535329&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(C^k&(b^C))+x[1]+4129170786&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+x[6]+3225465664&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+x[11]+643717713&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+x[0]+3921069994&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+x[5]+3593408605&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+x[10]+38016083&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+x[15]+3634488961&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+x[4]+3889429448&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+x[9]+568446438&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+x[14]+3275163606&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+x[3]+4107603335&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+x[8]+1163531501&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+x[13]+2850285829&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+x[2]+4243563512&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+x[7]+1735328473&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+x[12]+2368359562&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(b^C^k)+x[5]+4294588738&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+x[8]+2272392833&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+x[11]+1839030562&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+x[14]+4259657740&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+x[1]+2763975236&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+x[4]+1272893353&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+x[7]+4139469664&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+x[10]+3200236656&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+x[13]+681279174&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+x[0]+3936430074&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+x[3]+3572445317&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+x[6]+76029189&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+x[9]+3654602809&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+x[12]+3873151461&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+x[15]+530742520&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+x[2]+3299628645&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(C^(b|~k))+x[0]+4096336452&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+x[7]+1126891415&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+x[14]+2878612391&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+x[5]+4237533241&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+x[12]+1700485571&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+x[3]+2399980690&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+x[10]+4293915773&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+x[1]+2240044497&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+x[8]+1873313359&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+x[15]+4264355552&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+x[6]+2734768916&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+x[13]+1309151649&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+x[4]+4149444226&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+x[11]+3174756917&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+x[2]+718787259&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+k&4294967295}i.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var b=y-this.blockSize,x=this.B,C=this.h,k=0;k<y;){if(C==0)for(;k<=b;)r(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<y;)if(x[C++]=S.charCodeAt(k++),C==this.blockSize){r(this,x),C=0;break}}else for(;k<y;)if(x[C++]=S[k++],C==this.blockSize){r(this,x),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var b=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=b&255,b/=256;for(this.u(S),S=Array(16),y=b=0;4>y;++y)for(var x=0;32>x;x+=8)S[b++]=this.g[y]>>>x&255;return S};function s(S,y){var b=l;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=y(S)}function a(S,y){this.h=y;for(var b=[],x=!0,C=S.length-1;0<=C;C--){var k=S[C]|0;x&&k==y||(b[C]=k,x=!1)}this.g=b}var l={};function d(S){return-128<=S&&128>S?s(S,function(y){return new a([y|0],0>y?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return w;if(0>S)return B(f(-S));for(var y=[],b=1,x=0;S>=b;x++)y[x]=S/b|0,b*=4294967296;return new a(y,0)}function g(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return B(g(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(y,8)),x=w,C=0;C<S.length;C+=8){var k=Math.min(8,S.length-C),I=parseInt(S.substring(C,C+k),y);8>k?(k=f(Math.pow(y,k)),x=x.j(k).add(f(I))):(x=x.j(b),x=x.add(f(I)))}return x}var w=d(0),E=d(1),R=d(16777216);n=a.prototype,n.m=function(){if(W(this))return-B(this).m();for(var S=0,y=1,b=0;b<this.g.length;b++){var x=this.i(b);S+=(0<=x?x:4294967296+x)*y,y*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(F(this))return"0";if(W(this))return"-"+B(this).toString(S);for(var y=f(Math.pow(S,6)),b=this,x="";;){var C=ye(b,y).g;b=se(b,C.j(y));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=C,F(b))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function F(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function W(S){return S.h==-1}n.l=function(S){return S=se(this,S),W(S)?-1:F(S)?0:1};function B(S){for(var y=S.g.length,b=[],x=0;x<y;x++)b[x]=~S.g[x];return new a(b,~S.h).add(E)}n.abs=function(){return W(this)?B(this):this},n.add=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],x=0,C=0;C<=y;C++){var k=x+(this.i(C)&65535)+(S.i(C)&65535),I=(k>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);x=I>>>16,k&=65535,I&=65535,b[C]=I<<16|k}return new a(b,b[b.length-1]&-2147483648?-1:0)};function se(S,y){return S.add(B(y))}n.j=function(S){if(F(this)||F(S))return w;if(W(this))return W(S)?B(this).j(B(S)):B(B(this).j(S));if(W(S))return B(this.j(B(S)));if(0>this.l(R)&&0>S.l(R))return f(this.m()*S.m());for(var y=this.g.length+S.g.length,b=[],x=0;x<2*y;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<S.g.length;C++){var k=this.i(x)>>>16,I=this.i(x)&65535,hn=S.i(C)>>>16,Br=S.i(C)&65535;b[2*x+2*C]+=I*Br,te(b,2*x+2*C),b[2*x+2*C+1]+=k*Br,te(b,2*x+2*C+1),b[2*x+2*C+1]+=I*hn,te(b,2*x+2*C+1),b[2*x+2*C+2]+=k*hn,te(b,2*x+2*C+2)}for(x=0;x<y;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=y;x<2*y;x++)b[x]=0;return new a(b,0)};function te(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function oe(S,y){this.g=S,this.h=y}function ye(S,y){if(F(y))throw Error("division by zero");if(F(S))return new oe(w,w);if(W(S))return y=ye(B(S),y),new oe(B(y.g),B(y.h));if(W(y))return y=ye(S,B(y)),new oe(B(y.g),y.h);if(30<S.g.length){if(W(S)||W(y))throw Error("slowDivide_ only works with positive integers.");for(var b=E,x=y;0>=x.l(S);)b=Ze(b),x=Ze(x);var C=pe(b,1),k=pe(x,1);for(x=pe(x,2),b=pe(b,2);!F(x);){var I=k.add(x);0>=I.l(S)&&(C=C.add(b),k=I),x=pe(x,1),b=pe(b,1)}return y=se(S,C.j(y)),new oe(C,y)}for(C=w;0<=S.l(y);){for(b=Math.max(1,Math.floor(S.m()/y.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=f(b),I=k.j(y);W(I)||0<I.l(S);)b-=x,k=f(b),I=k.j(y);F(k)&&(k=E),C=C.add(k),S=se(S,I)}return new oe(C,S)}n.A=function(S){return ye(this,S).h},n.and=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],x=0;x<y;x++)b[x]=this.i(x)&S.i(x);return new a(b,this.h&S.h)},n.or=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],x=0;x<y;x++)b[x]=this.i(x)|S.i(x);return new a(b,this.h|S.h)},n.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],x=0;x<y;x++)b[x]=this.i(x)^S.i(x);return new a(b,this.h^S.h)};function Ze(S){for(var y=S.g.length+1,b=[],x=0;x<y;x++)b[x]=S.i(x)<<1|S.i(x-1)>>>31;return new a(b,S.h)}function pe(S,y){var b=y>>5;y%=32;for(var x=S.g.length-b,C=[],k=0;k<x;k++)C[k]=0<y?S.i(k+b)>>>y|S.i(k+b+1)<<32-y:S.i(k+b);return new a(C,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,qu=Yg.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Sn=Yg.Integer=a}).apply(typeof Qg<"u"?Qg:typeof self<"u"?self:typeof window<"u"?window:{});var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={};var Gu,Rb,ir,zu,As,ga,Hu,Wu,Ku;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pa=="object"&&pa];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(o,c){if(c)e:{var h=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var A=o[p];if(!(A in h))break e;h=h[A]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&e(h,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var h=0,p=!1,A={next:function(){if(!p&&h<o.length){var P=h++;return{value:c(P,o[P]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,h){return h})}});var a=a||{},l=this||self;function d(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function g(o,c,h){return o.call.apply(o.bind,arguments)}function w(o,c,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),o.apply(c,A)}}return function(){return o.apply(c,arguments)}}function E(o,c,h){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:w,E.apply(null,arguments)}function R(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function F(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,A,P){for(var q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)q[ve-2]=arguments[ve];return c.prototype[A].apply(p,q)}}function W(o){let c=o.length;if(0<c){let h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function B(o,c){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(d(p)){let A=o.length||0,P=p.length||0;o.length=A+P;for(let q=0;q<P;q++)o[A+q]=p[q]}else o.push(p)}}class se{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function te(o){return/^[\s\xa0]*$/.test(o)}function oe(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function ye(o){return ye[" "](o),o}ye[" "]=function(){};var Ze=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function pe(o,c,h){for(let p in o)c.call(h,o[p],p,o)}function S(o,c){for(let h in o)c.call(void 0,o[h],h,o)}function y(o){let c={};for(let h in o)c[h]=o[h];return c}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(o,c){let h,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(h in p)o[h]=p[h];for(let P=0;P<b.length;P++)h=b[P],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function C(o){var c=1;o=o.split(":");let h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function k(o){l.setTimeout(()=>{throw o},0)}function I(){var o=el;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class hn{constructor(){this.h=this.g=null}add(c,h){let p=Br.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Br=new se(()=>new Cv,o=>o.reset());class Cv{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let jr,$r=!1,el=new hn,Rm=()=>{let o=l.Promise.resolve(void 0);jr=()=>{o.then(Av)}};var Av=()=>{for(var o;o=I();){try{o.h.call(o.g)}catch(h){k(h)}var c=Br;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$r=!1};function Nn(){this.s=this.s,this.C=this.C}Nn.prototype.s=!1,Nn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var kv=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return o}();function qr(o,c){if(We.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(Ze){e:{try{ye(c.nodeName);var A=!0;break e}catch{}A=!1}A||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Pv[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qr.aa.h.call(this)}}F(qr,We);var Pv={2:"touch",3:"pen",4:"mouse"};qr.prototype.h=function(){qr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Gr="closure_listenable_"+(1e6*Math.random()|0),Rv=0;function Dv(o,c,h,p,A){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=A,this.key=++Rv,this.da=this.fa=!1}function uo(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ho(o){this.src=o,this.g={},this.h=0}ho.prototype.add=function(o,c,h,p,A){var P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);var q=nl(o,c,p,A);return-1<q?(c=o[q],h||(c.fa=!1)):(c=new Dv(c,this.src,P,!!p,A),c.fa=h,o.push(c)),c};function tl(o,c){var h=c.type;if(h in o.g){var p=o.g[h],A=Array.prototype.indexOf.call(p,c,void 0),P;(P=0<=A)&&Array.prototype.splice.call(p,A,1),P&&(uo(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function nl(o,c,h,p){for(var A=0;A<o.length;++A){var P=o[A];if(!P.da&&P.listener==c&&P.capture==!!h&&P.ha==p)return A}return-1}var il="closure_lm_"+(1e6*Math.random()|0),rl={};function Dm(o,c,h,p,A){if(p&&p.once)return Nm(o,c,h,p,A);if(Array.isArray(c)){for(var P=0;P<c.length;P++)Dm(o,c[P],h,p,A);return null}return h=cl(h),o&&o[Gr]?o.K(c,h,f(p)?!!p.capture:!!p,A):Vm(o,c,h,!1,p,A)}function Vm(o,c,h,p,A,P){if(!c)throw Error("Invalid event type");var q=f(A)?!!A.capture:!!A,ve=ol(o);if(ve||(o[il]=ve=new ho(o)),h=ve.add(c,h,p,q,P),h.proxy)return h;if(p=Vv(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)kv||(A=q),A===void 0&&(A=!1),o.addEventListener(c.toString(),p,A);else if(o.attachEvent)o.attachEvent(Om(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Vv(){function o(h){return c.call(o.src,o.listener,h)}let c=Nv;return o}function Nm(o,c,h,p,A){if(Array.isArray(c)){for(var P=0;P<c.length;P++)Nm(o,c[P],h,p,A);return null}return h=cl(h),o&&o[Gr]?o.L(c,h,f(p)?!!p.capture:!!p,A):Vm(o,c,h,!0,p,A)}function Mm(o,c,h,p,A){if(Array.isArray(c))for(var P=0;P<c.length;P++)Mm(o,c[P],h,p,A);else p=f(p)?!!p.capture:!!p,h=cl(h),o&&o[Gr]?(o=o.i,c=String(c).toString(),c in o.g&&(P=o.g[c],h=nl(P,h,p,A),-1<h&&(uo(P[h]),Array.prototype.splice.call(P,h,1),P.length==0&&(delete o.g[c],o.h--)))):o&&(o=ol(o))&&(c=o.g[c.toString()],o=-1,c&&(o=nl(c,h,p,A)),(h=-1<o?c[o]:null)&&sl(h))}function sl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Gr])tl(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(Om(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=ol(c))?(tl(h,o),h.h==0&&(h.src=null,c[il]=null)):uo(o)}}}function Om(o){return o in rl?rl[o]:rl[o]="on"+o}function Nv(o,c){if(o.da)o=!0;else{c=new qr(c,this);var h=o.listener,p=o.ha||o.src;o.fa&&sl(o),o=h.call(p,c)}return o}function ol(o){return o=o[il],o instanceof ho?o:null}var al="__closure_events_fn_"+(1e9*Math.random()>>>0);function cl(o){return typeof o=="function"?o:(o[al]||(o[al]=function(c){return o.handleEvent(c)}),o[al])}function Ke(){Nn.call(this),this.i=new ho(this),this.M=this,this.F=null}F(Ke,Nn),Ke.prototype[Gr]=!0,Ke.prototype.removeEventListener=function(o,c,h,p){Mm(this,o,c,h,p)};function et(o,c){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new We(c,o);else if(c instanceof We)c.target=c.target||o;else{var A=c;c=new We(p,o),x(c,A)}if(A=!0,h)for(var P=h.length-1;0<=P;P--){var q=c.g=h[P];A=mo(q,p,!0,c)&&A}if(q=c.g=o,A=mo(q,p,!0,c)&&A,A=mo(q,p,!1,c)&&A,h)for(P=0;P<h.length;P++)q=c.g=h[P],A=mo(q,p,!1,c)&&A}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],p=0;p<h.length;p++)uo(h[p]);delete o.g[c],o.h--}}this.F=null},Ke.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},Ke.prototype.L=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function mo(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var A=!0,P=0;P<c.length;++P){var q=c[P];if(q&&!q.da&&q.capture==h){var ve=q.listener,qe=q.ha||q.src;q.fa&&tl(o.i,q),A=ve.call(qe,p)!==!1&&A}}return A&&!p.defaultPrevented}function Lm(o,c,h){if(typeof o=="function")h&&(o=E(o,h));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Fm(o){o.g=Lm(()=>{o.g=null,o.i&&(o.i=!1,Fm(o))},o.l);let c=o.h;o.h=null,o.m.apply(null,c)}class Mv extends Nn{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Fm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(o){Nn.call(this),this.h=o,this.g={}}F(zr,Nn);var Um=[];function Bm(o){pe(o.g,function(c,h){this.g.hasOwnProperty(h)&&sl(c)},o),o.g={}}zr.prototype.N=function(){zr.aa.N.call(this),Bm(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ll=l.JSON.stringify,Ov=l.JSON.parse,Lv=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ul(){}ul.prototype.h=null;function jm(o){return o.h||(o.h=o.i())}function $m(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dl(){We.call(this,"d")}F(dl,We);function hl(){We.call(this,"c")}F(hl,We);var ci={},qm=null;function fo(){return qm=qm||new Ke}ci.La="serverreachability";function Gm(o){We.call(this,ci.La,o)}F(Gm,We);function Wr(o){let c=fo();et(c,new Gm(c))}ci.STAT_EVENT="statevent";function zm(o,c){We.call(this,ci.STAT_EVENT,o),this.stat=c}F(zm,We);function tt(o){let c=fo();et(c,new zm(c,o))}ci.Ma="timingevent";function Hm(o,c){We.call(this,ci.Ma,o),this.size=c}F(Hm,We);function Kr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function Fv(o,c,h,p,A,P){o.info(function(){if(o.g)if(P)for(var q="",ve=P.split("&"),qe=0;qe<ve.length;qe++){var me=ve[qe].split("=");if(1<me.length){var Qe=me[0];me=me[1];var Ye=Qe.split("_");q=2<=Ye.length&&Ye[1]=="type"?q+(Qe+"="+me+"&"):q+(Qe+"=redacted&")}}else q=null;else q=P;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+c+`
`+h+`
`+q})}function Uv(o,c,h,p,A,P,q){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+c+`
`+h+`
`+P+" "+q})}function qi(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+jv(o,h)+(p?" "+p:"")})}function Bv(o,c){o.info(function(){return"TIMEOUT: "+c})}Qr.prototype.info=function(){};function jv(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return ll(h)}catch{return c}}var po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ml;function go(){}F(go,ul),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},ml=new go;function Mn(o,c,h,p){this.j=o,this.i=c,this.l=h,this.R=p||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Km}function Km(){this.i=null,this.g="",this.h=!1}var Qm={},fl={};function pl(o,c,h){o.L=1,o.v=wo(mn(c)),o.m=h,o.P=!0,Ym(o,null)}function Ym(o,c){o.F=Date.now(),_o(o),o.A=mn(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),df(h.i,"t",p),o.C=0,h=o.j.J,o.h=new Km,o.g=kf(o.j,h?c:null,!o.m),0<o.O&&(o.M=new Mv(E(o.Y,o,o.g),o.O)),c=o.U,h=o.g,p=o.ca;var A="readystatechange";Array.isArray(A)||(A&&(Um[0]=A.toString()),A=Um);for(var P=0;P<A.length;P++){var q=Dm(h,A[P],p||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Wr(),Fv(o.i,o.u,o.A,o.l,o.R,o.m)}Mn.prototype.ca=function(o){o=o.target;let c=this.M;c&&fn(o)==3?c.j():this.Y(o)},Mn.prototype.Y=function(o){try{if(o==this.g)e:{let Ye=fn(this.g);var c=this.g.Ba();let Hi=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||yf(this.g)))){this.J||Ye!=4||c==7||(c==8||0>=Hi?Wr(3):Wr(2)),gl(this);var h=this.g.Z();this.X=h;t:if(Jm(this)){var p=yf(this.g);o="";var A=p.length,P=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){li(this),Yr(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<A;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(P&&c==A-1)});p.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,Uv(this.i,this.u,this.A,this.l,this.R,Ye,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,qe=this.g;if((ve=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(ve)){var me=ve;break t}}me=null}if(h=me)qi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_l(this,h);else{this.o=!1,this.s=3,tt(12),li(this),Yr(this);break e}}if(this.P){h=!0;let Vt;for(;!this.J&&this.C<q.length;)if(Vt=$v(this,q),Vt==fl){Ye==4&&(this.s=4,tt(14),h=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Qm){this.s=4,tt(15),qi(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else qi(this.i,this.l,Vt,null),_l(this,Vt);if(Jm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||q.length!=0||this.h.h||(this.s=1,tt(16),h=!1),this.o=this.o&&h,!h)qi(this.i,this.l,q,"[Invalid Chunked Response]"),li(this),Yr(this);else if(0<q.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),bl(Qe),Qe.M=!0,tt(11))}}else qi(this.i,this.l,q,null),_l(this,q);Ye==4&&li(this),this.o&&!this.J&&(Ye==4?xf(this.j,this):(this.o=!1,_o(this)))}else s1(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),li(this),Yr(this)}}}catch{}finally{}};function Jm(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $v(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?fl:(h=Number(c.substring(h,p)),isNaN(h)?Qm:(p+=1,p+h>c.length?fl:(c=c.slice(p,p+h),o.C=p+h,c)))}Mn.prototype.cancel=function(){this.J=!0,li(this)};function _o(o){o.S=Date.now()+o.I,Xm(o,o.I)}function Xm(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Kr(E(o.ba,o),c)}function gl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Mn.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Bv(this.i,this.A),this.L!=2&&(Wr(),tt(17)),li(this),this.s=2,Yr(this)):Xm(this,this.S-o)};function Yr(o){o.j.G==0||o.J||xf(o.j,o)}function li(o){gl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Bm(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function _l(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||yl(h.h,o))){if(!o.K&&yl(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)xo(h),bo(h);else break e;Il(h),tt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Kr(E(h.Za,h),6e3));if(1>=tf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else di(h,11)}else if((o.K||h.g==o)&&xo(h),!te(c))for(A=h.Da.g.parse(c),c=0;c<A.length;c++){let me=A[c];if(h.T=me[0],me=me[1],h.G==2)if(me[0]=="c"){h.K=me[1],h.ia=me[2];let Qe=me[3];Qe!=null&&(h.la=Qe,h.j.info("VER="+h.la));let Ye=me[4];Ye!=null&&(h.Aa=Ye,h.j.info("SVER="+h.Aa));let Hi=me[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(p=1.5*Hi,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Vt=o.g;if(Vt){let Co=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var P=p.h;P.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(vl(P,P.h),P.h=null))}if(p.D){let Tl=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(p.ya=Tl,Ee(p.I,p.D,Tl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var q=o;if(p.qa=Af(p,p.J?p.ia:null,p.W),q.K){nf(p.h,q);var ve=q,qe=p.L;qe&&(ve.I=qe),ve.B&&(gl(ve),_o(ve)),p.g=q}else bf(p);0<h.i.length&&To(h)}else me[0]!="stop"&&me[0]!="close"||di(h,7);else h.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?di(h,7):El(h):me[0]!="noop"&&h.l&&h.l.ta(me),h.v=0)}}Wr(4)}catch{}}var qv=class{constructor(o,c){this.g=o,this.map=c}};function Zm(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ef(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function tf(o){return o.h?1:o.g?o.g.size:0}function yl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function vl(o,c){o.g?o.g.add(c):o.h=c}function nf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Zm.prototype.cancel=function(){if(this.i=rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function rf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(let h of o.g.values())c=c.concat(h.D);return c}return W(o.i)}function Gv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(d(o)){for(var c=[],h=o.length,p=0;p<h;p++)c.push(o[p]);return c}c=[],h=0;for(p in o)c[h++]=o[p];return c}function zv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(d(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(let p in o)c[h++]=p;return c}}}function sf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(d(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=zv(o),p=Gv(o),A=p.length,P=0;P<A;P++)c.call(void 0,p[P],h&&h[P],o)}var of=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hv(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),A=null;if(0<=p){var P=o[h].substring(0,p);A=o[h].substring(p+1)}else P=o[h];c(P,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function ui(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ui){this.h=o.h,yo(this,o.j),this.o=o.o,this.g=o.g,vo(this,o.s),this.l=o.l;var c=o.i,h=new Zr;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),af(this,h),this.m=o.m}else o&&(c=String(o).match(of))?(this.h=!1,yo(this,c[1]||"",!0),this.o=Jr(c[2]||""),this.g=Jr(c[3]||"",!0),vo(this,c[4]),this.l=Jr(c[5]||"",!0),af(this,c[6]||"",!0),this.m=Jr(c[7]||"")):(this.h=!1,this.i=new Zr(null,this.h))}ui.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Xr(c,cf,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Xr(c,cf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Xr(h,h.charAt(0)=="/"?Qv:Kv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Xr(h,Jv)),o.join("")};function mn(o){return new ui(o)}function yo(o,c,h){o.j=h?Jr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function vo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function af(o,c,h){c instanceof Zr?(o.i=c,Xv(o.i,o.h)):(h||(c=Xr(c,Yv)),o.i=new Zr(c,o.h))}function Ee(o,c,h){o.i.set(c,h)}function wo(o){return Ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Jr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,Wv),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var cf=/[#\/\?@]/g,Kv=/[#\?:]/g,Qv=/[#\?]/g,Yv=/[#\?@]/g,Jv=/#/g;function Zr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function On(o){o.g||(o.g=new Map,o.h=0,o.i&&Hv(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}n=Zr.prototype,n.add=function(o,c){On(this),this.i=null,o=Gi(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function lf(o,c){On(o),c=Gi(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function uf(o,c){return On(o),c=Gi(o,c),o.g.has(c)}n.forEach=function(o,c){On(this),this.g.forEach(function(h,p){h.forEach(function(A){o.call(c,A,p,this)},this)},this)},n.na=function(){On(this);let o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let p=0;p<c.length;p++){let A=o[p];for(let P=0;P<A.length;P++)h.push(c[p])}return h},n.V=function(o){On(this);let c=[];if(typeof o=="string")uf(this,o)&&(c=c.concat(this.g.get(Gi(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},n.set=function(o,c){return On(this),this.i=null,o=Gi(this,o),uf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},n.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function df(o,c,h){lf(o,c),0<h.length&&(o.i=null,o.g.set(Gi(o,c),W(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var p=c[h];let P=encodeURIComponent(String(p)),q=this.V(p);for(p=0;p<q.length;p++){var A=P;q[p]!==""&&(A+="="+encodeURIComponent(String(q[p]))),o.push(A)}}return this.i=o.join("&")};function Gi(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Xv(o,c){c&&!o.j&&(On(o),o.i=null,o.g.forEach(function(h,p){var A=p.toLowerCase();p!=A&&(lf(this,p),df(this,A,h))},o)),o.j=c}function Zv(o,c){let h=new Qr;if(l.Image){let p=new Image;p.onload=R(Ln,h,"TestLoadImage: loaded",!0,c,p),p.onerror=R(Ln,h,"TestLoadImage: error",!1,c,p),p.onabort=R(Ln,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=R(Ln,h,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function e1(o,c){let h=new Qr,p=new AbortController,A=setTimeout(()=>{p.abort(),Ln(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(P=>{clearTimeout(A),P.ok?Ln(h,"TestPingServer: ok",!0,c):Ln(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(A),Ln(h,"TestPingServer: error",!1,c)})}function Ln(o,c,h,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(h)}catch{}}function t1(){this.g=new Lv}function n1(o,c,h){let p=h||"";try{sf(o,function(A,P){let q=A;f(A)&&(q=ll(A)),c.push(p+P+"="+encodeURIComponent(q))})}catch(A){throw c.push(p+"type="+encodeURIComponent("_badmap")),A}}function es(o){this.l=o.Ub||null,this.j=o.eb||!1}F(es,ul),es.prototype.g=function(){return new Eo(this.l,this.j)},es.prototype.i=function(o){return function(){return o}}({});function Eo(o,c){Ke.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Eo,Ke),n=Eo.prototype,n.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ns(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function hf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ts(this):ns(this),this.readyState==3&&hf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,ts(this))},n.Qa=function(o){this.g&&(this.response=o,ts(this))},n.ga=function(){this.g&&ts(this)};function ts(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ns(o)}n.setRequestHeader=function(o,c){this.u.append(o,c)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function ns(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mf(o){let c="";return pe(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function wl(o,c,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=mf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Ee(o,c,h))}function Ae(o){Ke.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Ae,Ke);var i1=/^https?$/i,r1=["POST","PUT"];n=Ae.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ml.g(),this.v=this.o?jm(this.o):jm(ml),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(P){ff(this,P);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)h.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let P of p.keys())h.set(P,p.get(P));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(P=>P.toLowerCase()=="content-type"),A=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(r1,c,void 0))||p||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,q]of h)this.g.setRequestHeader(P,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_f(this),this.u=!0,this.g.send(o),this.u=!1}catch(P){ff(this,P)}};function ff(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,pf(o),Io(o)}function pf(o){o.A||(o.A=!0,et(o,"complete"),et(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,et(this,"complete"),et(this,"abort"),Io(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Io(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gf(this):this.bb())},n.bb=function(){gf(this)};function gf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||fn(o)!=4||o.Z()!=2)){if(o.u&&fn(o)==4)Lm(o.Ea,0,o);else if(et(o,"readystatechange"),fn(o)==4){o.h=!1;try{let q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var p;if(p=q===0){var A=String(o.D).match(of)[1]||null;!A&&l.self&&l.self.location&&(A=l.self.location.protocol.slice(0,-1)),p=!i1.test(A?A.toLowerCase():"")}h=p}if(h)et(o,"complete"),et(o,"success");else{o.m=6;try{var P=2<fn(o)?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.Z()+"]",pf(o)}}finally{Io(o)}}}}function Io(o,c){if(o.g){_f(o);let h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||et(o,"ready");try{h.onreadystatechange=p}catch{}}}function _f(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function fn(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Ov(c)}};function yf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function s1(o){let c={};o=(o.g&&2<=fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(te(o[p]))continue;var h=C(o[p]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let P=c[A]||[];c[A]=P,P.push(h)}S(c,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function vf(o){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=is("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=is("baseRetryDelayMs",5e3,o),this.cb=is("retryDelaySeedMs",1e4,o),this.Wa=is("forwardChannelMaxRetries",2,o),this.wa=is("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Zm(o&&o.concurrentRequestLimit),this.Da=new t1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vf.prototype,n.la=8,n.G=1,n.connect=function(o,c,h,p){tt(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Af(this,null,this.W),To(this)};function El(o){if(wf(o),o.G==3){var c=o.U++,h=mn(o.I);if(Ee(h,"SID",o.K),Ee(h,"RID",c),Ee(h,"TYPE","terminate"),rs(o,h),c=new Mn(o,o.j,c),c.L=2,c.v=wo(mn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=kf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),_o(c)}Cf(o)}function bo(o){o.g&&(bl(o),o.g.cancel(),o.g=null)}function wf(o){bo(o),o.u&&(l.clearTimeout(o.u),o.u=null),xo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function To(o){if(!ef(o.h)&&!o.s){o.s=!0;var c=o.Ga;jr||Rm(),$r||(jr(),$r=!0),el.add(c,o),o.B=0}}function o1(o,c){return tf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Kr(E(o.Ga,o,c),Sf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let A=new Mn(this,this.j,o),P=this.o;if(this.S&&(P?(P=y(P),x(P,this.S)):P=this.S),this.m!==null||this.O||(A.H=P,P=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=If(this,A,c),h=mn(this.I),Ee(h,"RID",o),Ee(h,"CVER",22),this.D&&Ee(h,"X-HTTP-Session-Id",this.D),rs(this,h),P&&(this.O?c="headers="+encodeURIComponent(String(mf(P)))+"&"+c:this.m&&wl(h,this.m,P)),vl(this.h,A),this.Ua&&Ee(h,"TYPE","init"),this.P?(Ee(h,"$req",c),Ee(h,"SID","null"),A.T=!0,pl(A,h,null)):pl(A,h,c),this.G=2}}else this.G==3&&(o?Ef(this,o):this.i.length==0||ef(this.h)||Ef(this))};function Ef(o,c){var h;c?h=c.l:h=o.U++;let p=mn(o.I);Ee(p,"SID",o.K),Ee(p,"RID",h),Ee(p,"AID",o.T),rs(o,p),o.m&&o.o&&wl(p,o.m,o.o),h=new Mn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=If(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),vl(o.h,h),pl(h,p,c)}function rs(o,c){o.H&&pe(o.H,function(h,p){Ee(c,p,h)}),o.l&&sf({},function(h,p){Ee(c,p,h)})}function If(o,c,h){h=Math.min(o.i.length,h);var p=o.l?E(o.l.Na,o.l,o):null;e:{var A=o.i;let P=-1;for(;;){let q=["count="+h];P==-1?0<h?(P=A[0].g,q.push("ofs="+P)):P=0:q.push("ofs="+P);let ve=!0;for(let qe=0;qe<h;qe++){let me=A[qe].g,Qe=A[qe].map;if(me-=P,0>me)P=Math.max(0,A[qe].g-100),ve=!1;else try{n1(Qe,q,"req"+me+"_")}catch{p&&p(Qe)}}if(ve){p=q.join("&");break e}}}return o=o.i.splice(0,h),c.D=o,p}function bf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;jr||Rm(),$r||(jr(),$r=!0),el.add(c,o),o.v=0}}function Il(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Kr(E(o.Fa,o),Sf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Tf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Kr(E(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),bo(this),Tf(this))};function bl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Tf(o){o.g=new Mn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=mn(o.qa);Ee(c,"RID","rpc"),Ee(c,"SID",o.K),Ee(c,"AID",o.T),Ee(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ee(c,"TO",o.ja),Ee(c,"TYPE","xmlhttp"),rs(o,c),o.m&&o.o&&wl(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=wo(mn(c)),h.m=null,h.P=!0,Ym(h,o)}n.Za=function(){this.C!=null&&(this.C=null,bo(this),Il(this),tt(19))};function xo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function xf(o,c){var h=null;if(o.g==c){xo(o),bl(o),o.g=null;var p=2}else if(yl(o.h,c))h=c.D,nf(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var A=o.B;p=fo(),et(p,new Hm(p,h)),To(o)}else bf(o);else if(A=c.s,A==3||A==0&&0<c.X||!(p==1&&o1(o,c)||p==2&&Il(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),A){case 1:di(o,5);break;case 4:di(o,10);break;case 3:di(o,6);break;default:di(o,2)}}}function Sf(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function di(o,c){if(o.j.info("Error code "+c),c==2){var h=E(o.fb,o),p=o.Xa;let A=!p;p=new ui(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||yo(p,"https"),wo(p),A?Zv(p.toString(),h):e1(p.toString(),h)}else tt(2);o.G=0,o.l&&o.l.sa(c),Cf(o),wf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Cf(o){if(o.G=0,o.ka=[],o.l){let c=rf(o.h);(c.length!=0||o.i.length!=0)&&(B(o.ka,c),B(o.ka,o.i),o.h.i.length=0,W(o.i),o.i.length=0),o.l.ra()}}function Af(o,c,h){var p=h instanceof ui?mn(h):new ui(h);if(p.g!="")c&&(p.g=c+"."+p.g),vo(p,p.s);else{var A=l.location;p=A.protocol,c=c?c+"."+A.hostname:A.hostname,A=+A.port;var P=new ui(null);p&&yo(P,p),c&&(P.g=c),A&&vo(P,A),h&&(P.l=h),p=P}return h=o.D,c=o.ya,h&&c&&Ee(p,h,c),Ee(p,"VER",o.la),rs(o,p),p}function kf(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ae(new es({eb:h})):new Ae(o.pa),c.Ha(o.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pf(){}n=Pf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function So(){}So.prototype.g=function(o,c){return new ft(o,c)};function ft(o,c){Ke.call(this),this.g=new vf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!te(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!te(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new zi(this)}F(ft,Ke),ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ft.prototype.close=function(){El(this.g)},ft.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=ll(o),o=h);c.i.push(new qv(c.Ya++,o)),c.G==3&&To(c)},ft.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,ft.aa.N.call(this)};function Rf(o){dl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(let h in c){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}F(Rf,dl);function Df(){hl.call(this),this.status=1}F(Df,hl);function zi(o){this.g=o}F(zi,Pf),zi.prototype.ua=function(){et(this.g,"a")},zi.prototype.ta=function(o){et(this.g,new Rf(o))},zi.prototype.sa=function(o){et(this.g,new Df)},zi.prototype.ra=function(){et(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,ft.prototype.send=ft.prototype.o,ft.prototype.open=ft.prototype.m,ft.prototype.close=ft.prototype.close,Ku=Cn.createWebChannelTransport=function(){return new So},Wu=Cn.getStatEventTarget=function(){return fo()},Hu=Cn.Event=ci,ga=Cn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,As=Cn.ErrorCode=po,Wm.COMPLETE="complete",zu=Cn.EventType=Wm,$m.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,ir=Cn.WebChannel=$m,Rb=Cn.FetchXmlHttpFactory=es,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Gu=Cn.XhrIo=Ae}).apply(typeof pa<"u"?pa:typeof self<"u"?self:typeof window<"u"?window:{});var Jg="@firebase/firestore",Xg="4.7.17";var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");var br="11.9.0";var Ci=new Jt("@firebase/firestore");function rr(){return Ci.logLevel}function K(n,...e){if(Ci.logLevel<=le.DEBUG){let t=e.map(Bh);Ci.debug(`Firestore (${br}): ${n}`,...t)}}function An(n,...e){if(Ci.logLevel<=le.ERROR){let t=e.map(Bh);Ci.error(`Firestore (${br}): ${n}`,...t)}}function dr(n,...e){if(Ci.logLevel<=le.WARN){let t=e.map(Bh);Ci.warn(`Firestore (${br}): ${n}`,...t)}}function Bh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,G0(n,i,t)}function G0(n,e,t){let i=`FIRESTORE (${br}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw An(i),new Error(i)}function fe(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||G0(e,r,i)}function ne(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends _t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ba=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ed=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(je.UNAUTHENTICATED))}shutdown(){}},td=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},nd=class{constructor(e){this.t=e,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fe(this.o===void 0,42304);let i=this.i,r=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve(),s=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bt,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let d=s;e.enqueueRetryable(()=>v(this,null,function*(){yield d.promise,yield r(this.currentUser)}))},l=d=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?l(d):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string",31837,{l:i}),new ba(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new je(e)}},id=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},rd=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new id(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ta=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){fe(this.o===void 0,3512);let i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ta(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ta(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Db(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function z0(){return new TextEncoder}var xa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=Db(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}};function ae(n,e){return n<e?-1:n>e?1:0}function od(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return ae(i,r);{let s=z0(),a=Vb(s.encode(Zg(n,t)),s.encode(Zg(e,t)));return a!==0?a:ae(i,r)}}t+=i>65535?2:1}return ae(n.length,e.length)}function Zg(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Vb(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function hr(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var e0=-62135596800,t0=1e6,Fe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*t0);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<e0)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t0}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-e0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Fe(0,0))}static max(){return new n(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var n0="__name__",Sa=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&J(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&J(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=n.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return ae(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):od(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sn.fromString(e.substring(4,e.length-2))}},Ce=class n extends Sa{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new H(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Nb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class n extends Sa{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Nb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new n([n0])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new H(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new H(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new H(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new H(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};var Ns=-1,ad=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};ad.UNKNOWN_ID=-1;function Mb(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ie.fromTimestamp(i===1e9?new Fe(t+1,0):new Fe(t,i));return new Ai(r,Y.empty(),e)}function Ob(n){return new Ai(n.readTime,n.key,Ns)}var Ai=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ie.min(),Y.empty(),Ns)}static max(){return new n(ie.max(),Y.empty(),Ns)}};function Lb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var Fb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Tr(n){return v(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Fb)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&t()},d=>i(d))}),a=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,a=new Array(s),l=0;for(let d=0;d<s;d++){let f=d;t(e[f]).next(g=>{a[f]=g,++l,l===s&&i(a)},g=>r(g))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function Ub(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xr(n){return n.name==="IndexedDbTransactionError"}var jh=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),$h=-1;function ac(n){return n==null}function Ms(n){return n===0&&1/n==-1/0}function Bb(n){return typeof n=="number"&&Number.isInteger(n)&&!Ms(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var H0="";function jb(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=i0(e)),e=$b(n.get(t),e);return i0(e)}function $b(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case H0:t+="";break;default:t+=s}}return t}function i0(n){return n+H0+""}var qb="remoteDocuments",W0="owner";var K0="mutationQueues";var Q0="mutations";var Y0="documentMutations",Gb="remoteDocumentsV14";var J0="remoteDocumentGlobal";var X0="targets";var Z0="targetDocuments";var e_="targetGlobal",t_="collectionParents";var n_="clientMetadata";var i_="bundles";var r_="namedQueries";var zb="indexConfiguration";var Hb="indexState";var Wb="indexEntries";var s_="documentOverlays";var Kb="globals";var Qb=[K0,Q0,Y0,qb,X0,W0,e_,Z0,n_,J0,t_,i_,r_],Mk=[...Qb,s_],Yb=[K0,Q0,Y0,Gb,X0,W0,e_,Z0,n_,J0,t_,i_,r_,s_],Jb=Yb,Xb=[...Jb,zb,Hb,Wb];var Ok=[...Xb,Kb];function r0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ri(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function o_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ve=class n{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cr(this.root,e,this.comparator,!1)}getReverseIterator(){return new cr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cr(this.root,e,this.comparator,!0)}},cr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}};tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,t,i,r,s){return this}insert(e,t,i){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $e=class n{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ca(this.data.getIterator())}getIteratorFrom(e){return new Ca(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ca=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var At=class n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new $e(wt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hr(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Aa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Xe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Aa("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var Zb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kn(n){if(fe(!!n,39018),typeof n=="string"){let e=0,t=Zb.exec(n);if(fe(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pn(n){return typeof n=="string"?Xe.fromBase64String(n):Xe.fromUint8Array(n)}var a_="server_timestamp",c_="__type__",l_="__previous_value__",u_="__local_write_time__";function qh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[c_])===null||t===void 0?void 0:t.stringValue)===a_}function cc(n){let e=n.mapValue.fields[l_];return qh(e)?cc(e):e}function Os(n){let e=kn(n.mapValue.fields[u_].timestampValue);return new Fe(e.seconds,e.nanos)}var ld=class{constructor(e,t,i,r,s,a,l,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}},ka="(default)",Pa=class n{constructor(e,t){this.projectId=e,this.database=t||ka}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ka}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gh="__type__",d_="__max__",_a={mapValue:{fields:{__type__:{stringValue:d_}}}},zh="__vector__",mr="value";function Yn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qh(n)?4:m_(n)?9007199254740991:h_(n)?10:11:J(28295,{value:n})}function sn(n,e){if(n===e)return!0;let t=Yn(n);if(t!==Yn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Os(n).isEqual(Os(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let a=kn(r.timestampValue),l=kn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Pn(r.bytesValue).isEqual(Pn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Te(r.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(r.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Te(r.integerValue)===Te(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let a=Te(r.doubleValue),l=Te(s.doubleValue);return a===l?Ms(a)===Ms(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return hr(n.arrayValue.values||[],e.arrayValue.values||[],sn);case 10:case 11:return function(r,s){let a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(r0(a)!==r0(l))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(l[d]===void 0||!sn(a[d],l[d])))return!1;return!0}(n,e);default:return J(52216,{left:n})}}function Ls(n,e){return(n.values||[]).find(t=>sn(t,e))!==void 0}function fr(n,e){if(n===e)return 0;let t=Yn(n),i=Yn(e);if(t!==i)return ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(s,a){let l=Te(s.integerValue||s.doubleValue),d=Te(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return s0(n.timestampValue,e.timestampValue);case 4:return s0(Os(n),Os(e));case 5:return od(n.stringValue,e.stringValue);case 6:return function(s,a){let l=Pn(s),d=Pn(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let l=s.split("/"),d=a.split("/");for(let f=0;f<l.length&&f<d.length;f++){let g=ae(l[f],d[f]);if(g!==0)return g}return ae(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let l=ae(Te(s.latitude),Te(a.latitude));return l!==0?l:ae(Te(s.longitude),Te(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return o0(n.arrayValue,e.arrayValue);case 10:return function(s,a){var l,d,f,g;let w=s.fields||{},E=a.fields||{},R=(l=w[mr])===null||l===void 0?void 0:l.arrayValue,F=(d=E[mr])===null||d===void 0?void 0:d.arrayValue,W=ae(((f=R?.values)===null||f===void 0?void 0:f.length)||0,((g=F?.values)===null||g===void 0?void 0:g.length)||0);return W!==0?W:o0(R,F)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===_a.mapValue&&a===_a.mapValue)return 0;if(s===_a.mapValue)return 1;if(a===_a.mapValue)return-1;let l=s.fields||{},d=Object.keys(l),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let w=0;w<d.length&&w<g.length;++w){let E=od(d[w],g[w]);if(E!==0)return E;let R=fr(l[d[w]],f[g[w]]);if(R!==0)return R}return ae(d.length,g.length)}(n.mapValue,e.mapValue);default:throw J(23264,{Pe:t})}}function s0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=kn(n),i=kn(e),r=ae(t.seconds,i.seconds);return r!==0?r:ae(t.nanos,i.nanos)}function o0(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=fr(t[r],i[r]);if(s)return s}return ae(t.length,i.length)}function pr(n){return ud(n)}function ud(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=kn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=ud(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let a of i)s?s=!1:r+=",",r+=`${a}:${ud(t.fields[a])}`;return r+"}"}(n.mapValue):J(61005,{value:n})}function wa(n){switch(Yn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=cc(n);return e?16+wa(e):16;case 5:return 2*n.stringValue.length;case 6:return Pn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+wa(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return ri(i.fields,(s,a)=>{r+=s.length+wa(a)}),r}(n.mapValue);default:throw J(13486,{value:n})}}function a0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dd(n){return!!n&&"integerValue"in n}function Hh(n){return!!n&&"arrayValue"in n}function c0(n){return!!n&&"nullValue"in n}function l0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ea(n){return!!n&&"mapValue"in n}function h_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gh])===null||t===void 0?void 0:t.stringValue)===zh}function Ps(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ri(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ps(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ps(n.arrayValue.values[t]);return e}return Object.assign({},n)}function m_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===d_}var Fk={mapValue:{fields:{[Gh]:{stringValue:zh},[mr]:{arrayValue:{}}}}};var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ea(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ps(t)}setAll(e){let t=wt.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let d=this.getFieldsMap(t);this.applyChanges(d,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=Ps(a):r.push(l.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Ea(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ea(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){ri(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ps(this.value))}};function f_(n){let e=[];return ri(n.fields,(t,i)=>{let r=new wt([t]);if(Ea(i)){let s=f_(i.mapValue).fields;if(s.length===0)e.push(r);else for(let a of s)e.push(r.child(a))}else e.push(r)}),new At(e)}var jt=class n{constructor(e,t,i,r,s,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),vt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ie.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gr=class{constructor(e,t){this.position=e,this.inclusive=t}};function u0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],a=n.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(a.referenceValue),t.key):i=fr(a,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function d0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sn(n.position[t],e.position[t]))return!1;return!0}var ki=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function eT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ra=class{},Le=class n extends Ra{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new md(e,t,i):t==="array-contains"?new gd(e,i):t==="in"?new _d(e,i):t==="not-in"?new yd(e,i):t==="array-contains-any"?new vd(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new fd(e,i):new pd(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fr(t,this.value)):t!==null&&Yn(this.value)===Yn(t)&&this.matchesComparison(fr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends Ra{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return p_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function p_(n){return n.op==="and"}function g_(n){return tT(n)&&p_(n)}function tT(n){for(let e of n.filters)if(e instanceof $t)return!1;return!0}function hd(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+pr(n.value);if(g_(n))return n.filters.map(e=>hd(e)).join(",");{let e=n.filters.map(t=>hd(t)).join(",");return`${n.op}(${e})`}}function __(n,e){return n instanceof Le?function(i,r){return r instanceof Le&&i.op===r.op&&i.field.isEqual(r.field)&&sn(i.value,r.value)}(n,e):n instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&__(a,r.filters[l]),!0):!1}(n,e):void J(19439)}function y_(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${pr(t.value)}`}(n):n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(y_).join(" ,")+"}"}(n):"Filter"}var md=class extends Le{constructor(e,t,i){super(e,t,i),this.key=Y.fromName(i.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},fd=class extends Le{constructor(e,t){super(e,"in",t),this.keys=v_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pd=class extends Le{constructor(e,t){super(e,"not-in",t),this.keys=v_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function v_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Y.fromName(i.referenceValue))}var gd=class extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Hh(t)&&Ls(t.arrayValue,this.value)}},_d=class extends Le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ls(this.value.arrayValue,t)}},yd=class extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ls(this.value.arrayValue,t)}},vd=class extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ls(this.value.arrayValue,i))}};var wd=class{constructor(e,t=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}};function h0(n,e=null,t=[],i=[],r=null,s=null,a=null){return new wd(n,e,t,i,r,s,a)}function Wh(n){let e=ne(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>hd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>pr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>pr(i)).join(",")),e.Ie=t}return e.Ie}function Kh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!__(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d0(n.startAt,e.startAt)&&d0(n.endAt,e.endAt)}function Ed(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Jn=class{constructor(e,t=null,i=[],r=[],s=null,a="F",l=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function nT(n,e,t,i,r,s,a,l){return new Jn(n,e,t,i,r,s,a,l)}function lc(n){return new Jn(n)}function m0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function w_(n){return n.collectionGroup!==null}function Rs(n){let e=ne(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $e(wt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new ki(s,i))}),t.has(wt.keyField().canonicalString())||e.Ee.push(new ki(wt.keyField(),i))}return e.Ee}function nn(n){let e=ne(n);return e.de||(e.de=iT(e,Rs(n))),e.de}function iT(n,e){if(n.limitType==="F")return h0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ki(r.field,s)});let t=n.endAt?new gr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new gr(n.startAt.position,n.startAt.inclusive):null;return h0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Id(n,e){let t=n.filters.concat([e]);return new Jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bd(n,e,t){return new Jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uc(n,e){return Kh(nn(n),nn(e))&&n.limitType===e.limitType}function E_(n){return`${Wh(nn(n))}|lt:${n.limitType}`}function sr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>y_(r)).join(", ")}]`),ac(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>pr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>pr(r)).join(",")),`Target(${i})`}(nn(n))}; limitType=${n.limitType})`}function dc(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Rs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(a,l,d){let f=u0(a,l,d);return a.inclusive?f<=0:f<0}(i.startAt,Rs(i),r)||i.endAt&&!function(a,l,d){let f=u0(a,l,d);return a.inclusive?f>=0:f>0}(i.endAt,Rs(i),r))}(n,e)}function rT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function I_(n){return(e,t)=>{let i=!1;for(let r of Rs(n)){let s=sT(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function sT(n,e,t){let i=n.field.isKeyField()?Y.comparator(e.key,t.key):function(s,a,l){let d=a.data.field(s),f=l.data.field(s);return d!==null&&f!==null?fr(d,f):J(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return J(19790,{direction:n.dir})}}var Rn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}};var oT=new Ve(Y.comparator);function Dn(){return oT}var b_=new Ve(Y.comparator);function ks(...n){let e=b_;for(let t of n)e=e.insert(t.key,t);return e}function T_(n){let e=b_;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ti(){return Ds()}function x_(){return Ds()}function Ds(){return new Rn(n=>n.toString(),(n,e)=>n.isEqual(e))}var aT=new Ve(Y.comparator),cT=new $e(Y.comparator);function ue(...n){let e=cT;for(let t of n)e=e.add(t);return e}var lT=new $e(ae);function uT(){return lT}function Qh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ms(e)?"-0":e}}function S_(n){return{integerValue:""+n}}function dT(n,e){return Bb(e)?S_(e):Qh(n,e)}var _r=class{constructor(){this._=void 0}};function hT(n,e,t){return n instanceof Pi?function(r,s){let a={fields:{[c_]:{stringValue:a_},[u_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&qh(s)&&(s=cc(s)),s&&(a.fields[l_]=s),{mapValue:a}}(t,e):n instanceof Xn?A_(n,e):n instanceof Zn?k_(n,e):function(r,s){let a=C_(r,s),l=f0(a)+f0(r.Re);return dd(a)&&dd(r.Re)?S_(l):Qh(r.serializer,l)}(n,e)}function mT(n,e,t){return n instanceof Xn?A_(n,e):n instanceof Zn?k_(n,e):t}function C_(n,e){return n instanceof yr?function(i){return dd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Pi=class extends _r{},Xn=class extends _r{constructor(e){super(),this.elements=e}};function A_(n,e){let t=P_(e);for(let i of n.elements)t.some(r=>sn(r,i))||t.push(i);return{arrayValue:{values:t}}}var Zn=class extends _r{constructor(e){super(),this.elements=e}};function k_(n,e){let t=P_(e);for(let i of n.elements)t=t.filter(r=>!sn(r,i));return{arrayValue:{values:t}}}var yr=class extends _r{constructor(e,t){super(),this.serializer=e,this.Re=t}};function f0(n){return Te(n.integerValue||n.doubleValue)}function P_(n){return Hh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Fs=class{constructor(e,t){this.field=e,this.transform=t}};function fT(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Xn&&r instanceof Xn||i instanceof Zn&&r instanceof Zn?hr(i.elements,r.elements,sn):i instanceof yr&&r instanceof yr?sn(i.Re,r.Re):i instanceof Pi&&r instanceof Pi}(n.transform,e.transform)}var Td=class{constructor(e,t){this.version=e,this.transformResults=t}},kt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ia(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vr=class{};function R_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wr(n.key,kt.none()):new Ri(n.key,n.data,kt.none());{let t=n.data,i=vt.empty(),r=new $e(wt.comparator);for(let s of e.fields)if(!r.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new on(n.key,i,new At(r.toArray()),kt.none())}}function pT(n,e,t){n instanceof Ri?function(r,s,a){let l=r.value.clone(),d=g0(r.fieldTransforms,s,a.transformResults);l.setAll(d),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof on?function(r,s,a){if(!Ia(r.precondition,s))return void s.convertToUnknownDocument(a.version);let l=g0(r.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(D_(r)),d.setAll(l),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Vs(n,e,t,i){return n instanceof Ri?function(s,a,l,d){if(!Ia(s.precondition,a))return l;let f=s.value.clone(),g=_0(s.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof on?function(s,a,l,d){if(!Ia(s.precondition,a))return l;let f=_0(s.fieldTransforms,d,a),g=a.data;return g.setAll(D_(s)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(s,a,l){return Ia(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function gT(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=C_(i.transform,r||null);s!=null&&(t===null&&(t=vt.empty()),t.set(i.field,s))}return t||null}function p0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&hr(i,r,(s,a)=>fT(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ri=class extends vr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},on=class extends vr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function D_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function g0(n,e,t){let i=new Map;fe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let r=0;r<t.length;r++){let s=n[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,mT(a,l,t[r]))}return i}function _0(n,e,t){let i=new Map;for(let r of n){let s=r.transform,a=t.data.field(r.field);i.set(r.field,hT(s,a,e))}return i}var wr=class extends vr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xd=class extends vr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sd=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&pT(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Vs(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Vs(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=x_();return this.mutations.forEach(r=>{let s=e.get(r.key),a=s.overlayedDocument,l=this.applyToLocalView(a,s.mutatedFields);l=t.has(r.key)?null:l;let d=R_(a,l);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&hr(this.mutations,e.mutations,(t,i)=>p0(t,i))&&hr(this.baseMutations,e.baseMutations,(t,i)=>p0(t,i))}},Cd=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){fe(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return aT}(),s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new n(e,t,i,r)}};var Ad=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kd=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Me,he;function _T(n){switch(n){case N.OK:return J(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return J(15467,{code:n})}}function V_(n){if(n===void 0)return An("GRPC error has no .code"),N.UNKNOWN;switch(n){case Me.OK:return N.OK;case Me.CANCELLED:return N.CANCELLED;case Me.UNKNOWN:return N.UNKNOWN;case Me.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Me.INTERNAL:return N.INTERNAL;case Me.UNAVAILABLE:return N.UNAVAILABLE;case Me.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Me.NOT_FOUND:return N.NOT_FOUND;case Me.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Me.ABORTED:return N.ABORTED;case Me.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Me.DATA_LOSS:return N.DATA_LOSS;default:return J(39323,{code:n})}}(he=Me||(Me={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var y0=null;var yT=new Sn([4294967295,4294967295],0);function v0(n){let e=z0().encode(n),t=new qu;return t.update(e),new Uint8Array(t.digest())}function w0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Sn([t,i],0),new Sn([r,s],0)]}var Pd=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new xi(`Invalid padding: ${t}`);if(i<0)throw new xi(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new xi(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Sn.fromNumber(this.pe)}we(e,t,i){let r=e.add(t.multiply(Sn.fromNumber(i)));return r.compare(yT)===1&&(r=new Sn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=v0(e),[i,r]=w0(t);for(let s=0;s<this.hashCount;s++){let a=this.we(i,r,s);if(!this.be(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;let t=v0(e),[i,r]=w0(t);for(let s=0;s<this.hashCount;s++){let a=this.we(i,r,s);this.Se(a)}}Se(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Da=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Us.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ie.min(),r,new Ve(ae),Dn(),ue())}},Us=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ue(),ue(),ue())}};var lr=class{constructor(e,t,i,r){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=r}},Va=class{constructor(e,t){this.targetId=e,this.Ce=t}},Na=class{constructor(e,t,i=Xe.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Ma=class{constructor(){this.Fe=0,this.Me=E0(),this.xe=Xe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ue(),t=ue(),i=ue();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:J(38017,{changeType:s})}}),new Us(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=E0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,fe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Rd=class{constructor(e){this.ze=e,this.je=new Map,this.He=Dn(),this.Je=ya(),this.Ye=ya(),this.Ze=new Ve(ae)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,r)=>{this.it(r)&&t(r)})}ot(e){let t=e.targetId,i=e.Ce.count,r=this._t(t);if(r){let s=r.target;if(Ed(s))if(i===0){let a=new Y(s.path);this.tt(t,a,jt.newNoDocument(a,ie.min()))}else fe(i===1,20013,{expectedCount:i});else{let a=this.ut(t);if(a!==i){let l=this.ct(e),d=l?this.lt(l,e,a):1;if(d!==0){this.st(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}y0?.ht(function(g,w,E,R,F){var W,B,se,te,oe,ye;let Ze={localCacheCount:g,existenceFilterCount:w.count,databaseId:E.database,projectId:E.projectId},pe=w.unchangedNames;return pe&&(Ze.bloomFilter={applied:F===0,hashCount:(W=pe?.hashCount)!==null&&W!==void 0?W:0,bitmapLength:(te=(se=(B=pe?.bits)===null||B===void 0?void 0:B.bitmap)===null||se===void 0?void 0:se.length)!==null&&te!==void 0?te:0,padding:(ye=(oe=pe?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&ye!==void 0?ye:0,mightContain:S=>{var y;return(y=R?.mightContain(S))!==null&&y!==void 0&&y}}),Ze}(a,e.Ce,this.ze.Pt(),l,d))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,a,l;try{a=Pn(i).toUint8Array()}catch(d){if(d instanceof Aa)return dr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{l=new Pd(a,r,s)}catch(d){return dr(d instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return l.pe===0?null:l}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){let i=this.ze.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,s,null),r++)}),r}It(e){let t=new Map;this.je.forEach((s,a)=>{let l=this._t(a);if(l){if(s.current&&Ed(l.target)){let d=new Y(l.target.path);this.Et(d).has(a)||this.dt(a,d)||this.tt(a,d,jt.newNoDocument(d,e))}s.Le&&(t.set(a,s.qe()),s.Qe())}});let i=ue();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(d=>{let f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));let r=new Da(e,t,this.Ze,this.He,i);return this.He=Dn(),this.Je=ya(),this.Ye=ya(),this.Ze=new Ve(ae),r}et(e,t){if(!this.it(e))return;let i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;let r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ma,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new $e(ae),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new $e(ae),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ma),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function ya(){return new Ve(Y.comparator)}function E0(){return new Ve(Y.comparator)}var vT={asc:"ASCENDING",desc:"DESCENDING"},wT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ET={and:"AND",or:"OR"},Dd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Vd(n,e){return n.useProto3Json||ac(e)?e:{value:e}}function Oa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IT(n,e){return Oa(n,e.toTimestamp())}function rn(n){return fe(!!n,49232),ie.fromTimestamp(function(t){let i=kn(t);return new Fe(i.seconds,i.nanos)}(n))}function Yh(n,e){return Nd(n,e).canonicalString()}function Nd(n,e){let t=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function M_(n){let e=Ce.fromString(n);return fe(B_(e),10190,{key:e.toString()}),e}function Md(n,e){return Yh(n.databaseId,e.path)}function Qu(n,e){let t=M_(e);if(t.get(1)!==n.databaseId.projectId)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(L_(t))}function O_(n,e){return Yh(n.databaseId,e)}function bT(n){let e=M_(n);return e.length===4?Ce.emptyPath():L_(e)}function Od(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L_(n){return fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function I0(n,e,t){return{name:Md(n,e),fields:t.value.mapValue.fields}}function TT(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:J(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(f,g){return f.useProto3Json?(fe(g===void 0||typeof g=="string",58123),Xe.fromBase64String(g||"")):(fe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Xe.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){let g=f.code===void 0?N.UNKNOWN:V_(f.code);return new H(g,f.message||"")}(a);t=new Na(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Qu(n,i.document.name),s=rn(i.document.updateTime),a=i.document.createTime?rn(i.document.createTime):ie.min(),l=new vt({mapValue:{fields:i.document.fields}}),d=jt.newFoundDocument(r,s,a,l),f=i.targetIds||[],g=i.removedTargetIds||[];t=new lr(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Qu(n,i.document),s=i.readTime?rn(i.readTime):ie.min(),a=jt.newNoDocument(r,s),l=i.removedTargetIds||[];t=new lr([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Qu(n,i.document),s=i.removedTargetIds||[];t=new lr([],s,r,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,a=new kd(r,s),l=i.targetId;t=new Va(l,a)}}return t}function xT(n,e){let t;if(e instanceof Ri)t={update:I0(n,e.key,e.value)};else if(e instanceof wr)t={delete:Md(n,e.key)};else if(e instanceof on)t={update:I0(n,e.key,e.data),updateMask:NT(e.fieldMask)};else{if(!(e instanceof xd))return J(16599,{ft:e.type});t={verify:Md(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,a){let l=a.transform;if(l instanceof Pi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yr)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw J(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:IT(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(n,e.precondition)),t}function ST(n,e){return n&&n.length>0?(fe(e!==void 0,14353),n.map(t=>function(r,s){let a=r.updateTime?rn(r.updateTime):rn(s);return a.isEqual(ie.min())&&(a=rn(s)),new Td(a,r.transformResults||[])}(t,e))):[]}function CT(n,e){return{documents:[O_(n,e.path)]}}function AT(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=O_(n,r);let s=function(f){if(f.length!==0)return U_($t.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(f){if(f.length!==0)return f.map(g=>function(E){return{field:or(E.field),direction:RT(E.dir)}}(g))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=Vd(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:r}}function kT(n){let e=bT(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){fe(i===1,65062);let g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(w){let E=F_(w);return E instanceof $t&&g_(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(w){return w.map(E=>function(F){return new ki(ar(F.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(t.orderBy));let l=null;t.limit&&(l=function(w){let E;return E=typeof w=="object"?w.value:w,ac(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(w){let E=!!w.before,R=w.values||[];return new gr(R,E)}(t.startAt));let f=null;return t.endAt&&(f=function(w){let E=!w.before,R=w.values||[];return new gr(R,E)}(t.endAt)),nT(e,r,a,s,l,"F",d,f)}function PT(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ar(t.unaryFilter.field);return Le.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ar(t.unaryFilter.field);return Le.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ar(t.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ar(t.unaryFilter.field);return Le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(n):n.fieldFilter!==void 0?function(t){return Le.create(ar(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $t.create(t.compositeFilter.filters.map(i=>F_(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(t.compositeFilter.op))}(n):J(30097,{filter:n})}function RT(n){return vT[n]}function DT(n){return wT[n]}function VT(n){return ET[n]}function or(n){return{fieldPath:n.canonicalString()}}function ar(n){return wt.fromServerFormat(n.fieldPath)}function U_(n){return n instanceof Le?function(t){if(t.op==="=="){if(l0(t.value))return{unaryFilter:{field:or(t.field),op:"IS_NAN"}};if(c0(t.value))return{unaryFilter:{field:or(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(l0(t.value))return{unaryFilter:{field:or(t.field),op:"IS_NOT_NAN"}};if(c0(t.value))return{unaryFilter:{field:or(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:or(t.field),op:DT(t.op),value:t.value}}}(n):n instanceof $t?function(t){let i=t.getFilters().map(r=>U_(r));return i.length===1?i[0]:{compositeFilter:{op:VT(t.op),filters:i}}}(n):J(54877,{filter:n})}function NT(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bs=class n{constructor(e,t,i,r,s=ie.min(),a=ie.min(),l=Xe.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ld=class{constructor(e){this.wt=e}};function MT(n){let e=kT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bd(e,e.limit,"L"):e}var La=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Te(e.integerValue));else if("doubleValue"in e){let i=Te(e.doubleValue);isNaN(i)?this.Mt(t,13):(this.Mt(t,15),Ms(i)?t.xt(0):t.xt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Mt(t,20),typeof i=="string"&&(i=kn(i)),t.Ot(`${i.seconds||""}`),t.xt(i.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Pn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Mt(t,45),t.xt(i.latitude||0),t.xt(i.longitude||0)}else"mapValue"in e?m_(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):h_(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):J(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let i=e.fields||{};this.Mt(t,55);for(let r of Object.keys(i))this.Nt(r,t),this.Ct(i[r],t)}qt(e,t){var i,r;let s=e.fields||{};this.Mt(t,53);let a=mr,l=((r=(i=s[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Mt(t,15),t.xt(Te(l)),this.Nt(a,t),this.Ct(s[a],t)}$t(e,t){let i=e.values||[];this.Mt(t,50);for(let r of i)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Y.fromName(e).path.forEach(i=>{this.Mt(t,60),this.Kt(i,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};La.Wt=new La;var Fd=class{constructor(){this.Cn=new Ud}addToCollectionParentIndex(e,t){return this.Cn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Ai.min())}updateCollectionGroup(e,t,i){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Ud=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new $e(Ce.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new $e(Ce.comparator)).toArray()}};var Uk=new Uint8Array(0);var b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j_=41943040,Ct=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(j_,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);var js=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var T0="LruGarbageCollector",OT=1048576;function x0([n,e],[t,i]){let r=ae(n,t);return r===0?ae(e,i):r}var Bd=class{constructor(e){this.Er=e,this.buffer=new $e(x0),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();x0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},jd=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){K(T0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xr(t)?K(T0,"Ignoring IndexedDB error during garbage collection: ",t):yield Tr(t)}yield this.mr(3e5)}))}},$d=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return O.resolve(jh.le);let i=new Bd(t);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(b0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b0):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,r,s,a,l,d,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),r=this.params.maximumSequenceNumbersToCollect):r=w,a=Date.now(),this.nthSequenceNumber(e,r))).next(w=>(i=w,l=Date.now(),this.removeTargets(e,i,t))).next(w=>(s=w,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(f=Date.now(),rr()<=le.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(d-l)+`ms
	Removed ${w} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:w})))}};function LT(n,e){return new $d(n,e)}var qd=class{constructor(){this.changes=new Rn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?O.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zd=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Vs(i.mutation,r,At.empty(),Fe.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ue()){let r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let a=ks();return s.forEach((l,d)=>{a=a.insert(l,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ue()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let s=Dn(),a=Ds(),l=function(){return Ds()}();return t.forEach((d,f)=>{let g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof on)?s=s.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),Vs(g.mutation,f,g.mutation.getFieldMask(),Fe.now())):a.set(f.key,At.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var w;return l.set(f,new Gd(g,(w=a.get(f))!==null&&w!==void 0?w:null))}),l))}recalculateAndSaveOverlays(e,t){let i=Ds(),r=new Ve((a,l)=>a-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let g=i.get(d)||At.empty();g=l.applyToLocalView(f,g),i.set(d,g);let w=(r.get(l.batchId)||ue()).add(d);r=r.insert(l.batchId,w)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let d=l.getNext(),f=d.key,g=d.value,w=x_();g.forEach(E=>{if(!s.has(E)){let R=R_(t.get(E),i.get(E));R!==null&&w.set(E,R),s=s.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,w))}return O.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):w_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):O.resolve(Ti()),l=Ns,d=s;return a.next(f=>O.forEach(f,(g,w)=>(l<w.largestBatchId&&(l=w.largestBatchId),s.get(g)?O.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,d,f,ue())).next(g=>({batchId:l,changes:T_(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(i=>{let r=ks();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,a=ks();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,d=>{let f=function(w,E){return new Jn(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((w,E)=>{a=a.insert(w,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(a=>{s.forEach((d,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,jt.newInvalidDocument(g)))});let l=ks();return a.forEach((d,f)=>{let g=s.get(d);g!==void 0&&Vs(g.mutation,f,At.empty(),Fe.now()),dc(t,f)&&(l=l.insert(d,f))}),l})}};var Hd=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return O.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:rn(r.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(r){return{name:r.name,query:MT(r.bundledQuery),readTime:rn(r.readTime)}}(t)),O.resolve()}};var Wd=class{constructor(){this.overlays=new Ve(Y.comparator),this.Qr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Ti();return O.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.St(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(i)),O.resolve()}getOverlaysForCollection(e,t,i){let r=Ti(),s=t.length+1,a=new Y(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let d=l.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&d.largestBatchId>i&&r.set(d.getKey(),d)}return O.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ve((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=s.get(f.largestBatchId);g===null&&(g=Ti(),s=s.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let l=Ti(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>l.set(f,g)),!(l.size()>=r)););return O.resolve(l)}St(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Ad(t,i));let s=this.Qr.get(t);s===void 0&&(s=ue(),this.Qr.set(t,s)),this.Qr.set(t,s.add(i.key))}};var Kd=class{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var $s=class{constructor(){this.$r=new $e(Oe.Ur),this.Kr=new $e(Oe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let i=new Oe(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Oe(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){let t=new Y(new Ce([])),i=new Oe(t,e),r=new Oe(t,e+1),s=[];return this.Kr.forEachInRange([i,r],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new Y(new Ce([])),i=new Oe(t,e),r=new Oe(t,e+1),s=ue();return this.Kr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new Oe(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Oe=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Y.comparator(e.key,t.key)||ae(e.Zr,t.Zr)}static Wr(e,t){return ae(e.Zr,t.Zr)||Y.comparator(e.key,t.key)}};var Qd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new $e(Oe.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Sd(s,t,i,r);this.mutationQueue.push(a);for(let l of r)this.Xr=this.Xr.add(new Oe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,t){return O.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.ti(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?$h:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Oe(t,0),r=new Oe(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([i,r],a=>{let l=this.ei(a.Zr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $e(ae);return t.forEach(r=>{let s=new Oe(r,0),a=new Oe(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{i=i.add(l.Zr)})}),O.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Y.isDocumentKey(s)||(s=s.child(""));let a=new Oe(new Y(s),0),l=new $e(ae);return this.Xr.forEachWhile(d=>{let f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(d.Zr)),!0)},a),O.resolve(this.ni(l))}ni(e){let t=[];return e.forEach(i=>{let r=this.ei(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){fe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return O.forEach(t.mutations,r=>{let s=new Oe(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){let i=new Oe(t,0),r=this.Xr.firstAfterOrEqual(i);return O.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Yd=class{constructor(e){this.ii=e,this.docs=function(){return new Ve(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,a=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return O.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let i=Dn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():jt.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Dn(),a=t.path,l=new Y(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){let{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Lb(Ob(g),i)<=0||(r.has(g.key)||dc(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,i,r){J(9500)}si(e,t){return O.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Jd(this)}getSize(e){return O.resolve(this.size)}},Jd=class extends qd{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),O.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var Xd=class{constructor(e){this.persistence=e,this.oi=new Rn(t=>Wh(t),Kh),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this._i=0,this.ai=new $s,this.targetCount=0,this.ui=js.cr()}forEachTarget(e,t){return this.oi.forEach((i,r)=>t(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),O.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new js(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Tr(t),O.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let i=this.oi.get(t)||null;return O.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),O.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let i=this.ai.Yr(t);return O.resolve(i)}containsKey(e,t){return O.resolve(this.ai.containsKey(t))}};var Fa=class{constructor(e,t){this.ci={},this.overlays={},this.li=new jh(0),this.hi=!1,this.hi=!0,this.Pi=new Kd,this.referenceDelegate=e(this),this.Ti=new Xd(this),this.indexManager=new Fd,this.remoteDocumentCache=function(r){return new Yd(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new Ld(t),this.Ei=new Hd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new Qd(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){K("MemoryPersistence","Starting transaction:",e);let r=new Zd(this.li.next());return this.referenceDelegate.di(),i(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(e,t){return O.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}},Zd=class extends cd{constructor(e){super(),this.currentSequenceNumber=e}},eh=class n{constructor(e){this.persistence=e,this.Vi=new $s,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw J(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),O.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(r=>this.gi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,i=>{let r=Y.fromPath(i);return this.pi(e,r).next(s=>{s||t.removeEntry(r,ie.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return O.or([()=>O.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Ua=class n{constructor(e,t){this.persistence=e,this.yi=new Rn(i=>jb(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=LT(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}br(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return O.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(s=>s?O.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,a=>this.Dr(e,a,t).next(l=>{l||(i++,s.removeEntry(a,ie.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),O.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wa(e.data.value)),t}Dr(e,t,i){return O.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.yi.get(t);return O.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var th=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ds=i,this.As=r}static Rs(e,t){let i=ue(),r=ue();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var nh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ih=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ep()?8:Ub(Be())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.ws(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,t,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new nh;return this.Ss(e,t,a).next(l=>{if(s.result=l,this.fs)return this.Ds(e,t,a,l.size)})}).next(()=>s.result)}Ds(e,t,i,r){return i.documentReadCount<this.gs?(rr()<=le.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",sr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(rr()<=le.DEBUG&&K("QueryEngine","Query:",sr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(rr()<=le.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",sr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(t))):O.resolve())}ws(e,t){if(m0(t))return O.resolve(null);let i=nn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=bd(t,null,"F"),i=nn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let a=ue(...s);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(d=>{let f=this.vs(t,l);return this.Cs(t,f,a,d.readTime)?this.ws(e,bd(t,null,"F")):this.Fs(e,f,t,d)}))})))}bs(e,t,i,r){return m0(t)||r.isEqual(ie.min())?O.resolve(null):this.ys.getDocuments(e,i).next(s=>{let a=this.vs(t,s);return this.Cs(t,a,i,r)?O.resolve(null):(rr()<=le.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sr(t)),this.Fs(e,a,t,Mb(r,Ns)).next(l=>l))})}vs(e,t){let i=new $e(I_(e));return t.forEach((r,s)=>{dc(e,s)&&(i=i.add(s))}),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,i){return rr()<=le.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",sr(t)),this.ys.getDocumentsMatchingQuery(e,t,Ai.min(),i)}Fs(e,t,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Jh="LocalStore",FT=3e8,rh=class{constructor(e,t,i,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Ve(ae),this.Os=new Rn(s=>Wh(s),Kh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zd(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function UT(n,e,t,i){return new rh(n,e,t,i)}function $_(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let a=[],l=[],d=ue();for(let f of r){a.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}for(let f of s){l.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(i,d).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:l}))})})})}function BT(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,d,f,g){let w=f.batch,E=w.keys(),R=O.resolve();return E.forEach(F=>{R=R.next(()=>g.getEntry(d,F)).next(W=>{let B=f.docVersions.get(F);fe(B!==null,48541),W.version.compareTo(B)<0&&(w.applyToRemoteDocument(W,f),W.isValidDocument()&&(W.setReadTime(f.commitVersion),g.addEntry(W)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(d,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=ue();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function q_(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function jT(n,e){let t=ne(n),i=e.snapshotVersion,r=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.xs;let l=[];e.targetChanges.forEach((g,w)=>{let E=r.get(w);if(!E)return;l.push(t.Ti.removeMatchingKeys(s,g.removedDocuments,w).next(()=>t.Ti.addMatchingKeys(s,g.addedDocuments,w)));let R=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Xe.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):g.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(g.resumeToken,i)),r=r.insert(w,R),function(W,B,se){return W.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=FT?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0}(E,R,g)&&l.push(t.Ti.updateTargetData(s,R))});let d=Dn(),f=ue();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),l.push($T(s,a,e.documentUpdates).next(g=>{d=g.qs,f=g.Qs})),!i.isEqual(ie.min())){let g=t.Ti.getLastRemoteSnapshotVersion(s).next(w=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(g)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,f)).next(()=>d)}).then(s=>(t.xs=r,s))}function $T(n,e,t){let i=ue(),r=ue();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let a=Dn();return t.forEach((l,d)=>{let f=s.get(l);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),d.isNoDocument()&&d.version.isEqual(ie.min())?(e.removeEntry(l,d.readTime),a=a.insert(l,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(l,d)):K(Jh,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",d.version)}),{qs:a,Qs:r}})}function qT(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=$h),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function GT(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ti.getTargetData(i,e).next(s=>s?(r=s,O.resolve(r)):t.Ti.allocateTargetId(i).next(a=>(r=new Bs(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}function sh(n,e,t){return v(this,null,function*(){let i=ne(n),r=i.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!xr(a))throw a;K(Jh,`Failed to update sequence numbers for target ${e}: ${a}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)})}function S0(n,e,t){let i=ne(n),r=ie.min(),s=ue();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){let w=ne(d),E=w.Os.get(g);return E!==void 0?O.resolve(w.xs.get(E)):w.Ti.getTargetData(f,g)}(i,a,nn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(a,l.targetId).next(d=>{s=d})}).next(()=>i.Ms.getDocumentsMatchingQuery(a,e,t?r:ie.min(),t?s:ue())).next(l=>(zT(i,rT(e),l),{documents:l,$s:s})))}function zT(n,e,t){let i=n.Ns.get(e)||ie.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ns.set(e,i)}var Ba=class{constructor(){this.activeTargetIds=uT()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var oh=class{constructor(){this.xo=new Ba,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ba,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ah=class{No(e){}shutdown(){}};var C0="ConnectivityMonitor",ja=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){K(C0,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){K(C0,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var va=null;function ch(){return va===null?va=function(){return 268435456+Math.round(2147483648*Math.random())}():va++,"0x"+va.toString(16)}var Yu="RestConnection",HT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},lh=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===ka?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,t,i,r,s){let a=ch(),l=this.jo(e,t.toUriEncodedString());K(Yu,`Sending RPC '${e}' ${a}:`,l,i);let d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,r,s);let{host:f}=new URL(l),g=jn(f);return this.Jo(e,l,d,i,g).then(w=>(K(Yu,`Received RPC '${e}' ${a}: `,w),w),w=>{throw dr(Yu,`RPC '${e}' ${a} failed with error: `,w,"url: ",l,"request:",i),w})}Yo(e,t,i,r,s,a){return this.zo(e,t,i,r,s)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+br}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}jo(e,t){let i=HT[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}};var uh=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var Je="WebChannelConnection",dh=class extends lh{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,s){let a=ch();return new Promise((l,d)=>{let f=new Gu;f.setWithCredentials(!0),f.listenOnce(zu.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case As.NO_ERROR:let w=f.getResponseJson();K(Je,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(w)),l(w);break;case As.TIMEOUT:K(Je,`RPC '${e}' ${a} timed out`),d(new H(N.DEADLINE_EXCEEDED,"Request time out"));break;case As.HTTP_ERROR:let E=f.getStatus();if(K(Je,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let R=f.getResponseJson();Array.isArray(R)&&(R=R[0]);let F=R?.error;if(F&&F.status&&F.message){let W=function(se){let te=se.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(te)>=0?te:N.UNKNOWN}(F.status);d(new H(W,F.message))}else d(new H(N.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new H(N.UNAVAILABLE,"Connection failed."));break;default:J(9055,{h_:e,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{K(Je,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(r);K(Je,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",g,i,15)})}I_(e,t,i){let r=ch(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ku(),l=Wu(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;let g=s.join("");K(Je,`Creating RPC '${e}' stream ${r}: ${g}`,d);let w=a.createWebChannel(g,d);this.E_(w);let E=!1,R=!1,F=new uh({Zo:B=>{R?K(Je,`Not sending because RPC '${e}' stream ${r} is closed:`,B):(E||(K(Je,`Opening RPC '${e}' stream ${r} transport.`),w.open(),E=!0),K(Je,`RPC '${e}' stream ${r} sending:`,B),w.send(B))},Xo:()=>w.close()}),W=(B,se,te)=>{B.listen(se,oe=>{try{te(oe)}catch(ye){setTimeout(()=>{throw ye},0)}})};return W(w,ir.EventType.OPEN,()=>{R||(K(Je,`RPC '${e}' stream ${r} transport opened.`),F.__())}),W(w,ir.EventType.CLOSE,()=>{R||(R=!0,K(Je,`RPC '${e}' stream ${r} transport closed`),F.u_(),this.d_(w))}),W(w,ir.EventType.ERROR,B=>{R||(R=!0,dr(Je,`RPC '${e}' stream ${r} transport errored. Name:`,B.name,"Message:",B.message),F.u_(new H(N.UNAVAILABLE,"The operation could not be completed")))}),W(w,ir.EventType.MESSAGE,B=>{var se;if(!R){let te=B.data[0];fe(!!te,16349);let oe=te,ye=oe?.error||((se=oe[0])===null||se===void 0?void 0:se.error);if(ye){K(Je,`RPC '${e}' stream ${r} received error:`,ye);let Ze=ye.status,pe=function(b){let x=Me[b];if(x!==void 0)return V_(x)}(Ze),S=ye.message;pe===void 0&&(pe=N.INTERNAL,S="Unknown error status: "+Ze+" with message "+ye.message),R=!0,F.u_(new H(pe,S)),w.close()}else K(Je,`RPC '${e}' stream ${r} received:`,te),F.c_(te)}}),W(l,Hu.STAT_EVENT,B=>{B.stat===ga.PROXY?K(Je,`RPC '${e}' stream ${r} detected buffering proxy`):B.stat===ga.NOPROXY&&K(Je,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{F.a_()},0),F}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function Ju(){return typeof document<"u"?document:null}function hc(n){return new Dd(n,!0)}var $a=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=i,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var A0="PersistentStream",qa=class{constructor(e,t,i,r,s,a,l,d){this.xi=e,this.S_=i,this.D_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new $a(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return v(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return v(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return v(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===t&&this.z_(i,r)},i=>{e(()=>{let r=new H(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(e,t){let i=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(()=>v(this,null,function*(){this.state=0,this.start()}))}j_(e){return K(A0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(K(A0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hh=class extends qa{constructor(e,t,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=TT(this.serializer,e),i=function(s){if(!("targetChange"in s))return ie.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?rn(a.readTime):ie.min()}(e);return this.listener.Y_(t,i)}Z_(e){let t={};t.database=Od(this.serializer),t.addTarget=function(s,a){let l,d=a.target;if(l=Ed(d)?{documents:CT(s,d)}:{query:AT(s,d).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=N_(s,a.resumeToken);let f=Vd(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(ie.min())>0){l.readTime=Oa(s,a.snapshotVersion.toTimestamp());let f=Vd(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);let i=PT(this.serializer,e);i&&(t.labels=i),this.Q_(t)}X_(e){let t={};t.database=Od(this.serializer),t.removeTarget=e,this.Q_(t)}},mh=class extends qa{constructor(e,t,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=ST(e.writeResults,e.commitTime),i=rn(e.commitTime);return this.listener.ra(i,t)}ia(){let e={};e.database=Od(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>xT(this.serializer,i))};this.Q_(t)}};var fh=class{},ph=class extends fh{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,Nd(t,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(N.UNKNOWN,s.toString())})}Yo(e,t,i,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,Nd(t,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(N.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},gh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(An(t),this.ua=!1):K("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Di="RemoteStore",_h=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{i.enqueueAndForget(()=>v(this,null,function*(){Ni(this)&&(K(Di,"Restarting streams for network reachability change."),yield function(d){return v(this,null,function*(){let f=ne(d);f.da.add(4),yield Ys(f),f.Va.set("Unknown"),f.da.delete(4),yield mc(f)})}(this))}))}),this.Va=new gh(i,r)}};function mc(n){return v(this,null,function*(){if(Ni(n))for(let e of n.Aa)yield e(!0)})}function Ys(n){return v(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function G_(n,e){let t=ne(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),tm(t)?em(t):Sr(t).N_()&&Zh(t,e))}function Xh(n,e){let t=ne(n),i=Sr(t);t.Ea.delete(e),i.N_()&&z_(t,e),t.Ea.size===0&&(i.N_()?i.k_():Ni(t)&&t.Va.set("Unknown"))}function Zh(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sr(n).Z_(e)}function z_(n,e){n.ma.Ke(e),Sr(n).X_(e)}function em(n){n.ma=new Rd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Sr(n).start(),n.Va.ca()}function tm(n){return Ni(n)&&!Sr(n).O_()&&n.Ea.size>0}function Ni(n){return ne(n).da.size===0}function H_(n){n.ma=void 0}function WT(n){return v(this,null,function*(){n.Va.set("Online")})}function KT(n){return v(this,null,function*(){n.Ea.forEach((e,t)=>{Zh(n,e)})})}function QT(n,e){return v(this,null,function*(){H_(n),tm(n)?(n.Va.Pa(e),em(n)):n.Va.set("Unknown")})}function YT(n,e,t){return v(this,null,function*(){if(n.Va.set("Online"),e instanceof Na&&e.state===2&&e.cause)try{yield function(r,s){return v(this,null,function*(){let a=s.cause;for(let l of s.targetIds)r.Ea.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.Ea.delete(l),r.ma.removeTarget(l))})}(n,e)}catch(i){K(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Ga(n,i)}else if(e instanceof lr?n.ma.Xe(e):e instanceof Va?n.ma.ot(e):n.ma.nt(e),!t.isEqual(ie.min()))try{let i=yield q_(n.localStore);t.compareTo(i)>=0&&(yield function(s,a){let l=s.ma.It(a);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let g=s.Ea.get(f);g&&s.Ea.set(f,g.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach((d,f)=>{let g=s.Ea.get(d);if(!g)return;s.Ea.set(d,g.withResumeToken(Xe.EMPTY_BYTE_STRING,g.snapshotVersion)),z_(s,d);let w=new Bs(g.target,d,f,g.sequenceNumber);Zh(s,w)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){K(Di,"Failed to raise snapshot:",i),yield Ga(n,i)}})}function Ga(n,e,t){return v(this,null,function*(){if(!xr(e))throw e;n.da.add(1),yield Ys(n),n.Va.set("Offline"),t||(t=()=>q_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){K(Di,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield mc(n)}))})}function W_(n,e){return e().catch(t=>Ga(n,t,e))}function fc(n){return v(this,null,function*(){let e=ne(n),t=ei(e),i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:$h;for(;JT(e);)try{let r=yield qT(e.localStore,i);if(r===null){e.Ia.length===0&&t.k_();break}i=r.batchId,XT(e,r)}catch(r){yield Ga(e,r)}K_(e)&&Q_(e)})}function JT(n){return Ni(n)&&n.Ia.length<10}function XT(n,e){n.Ia.push(e);let t=ei(n);t.N_()&&t.ea&&t.ta(e.mutations)}function K_(n){return Ni(n)&&!ei(n).O_()&&n.Ia.length>0}function Q_(n){ei(n).start()}function ZT(n){return v(this,null,function*(){ei(n).ia()})}function ex(n){return v(this,null,function*(){let e=ei(n);for(let t of n.Ia)e.ta(t.mutations)})}function tx(n,e,t){return v(this,null,function*(){let i=n.Ia.shift(),r=Cd.from(i,e,t);yield W_(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield fc(n)})}function nx(n,e){return v(this,null,function*(){e&&ei(n).ea&&(yield function(i,r){return v(this,null,function*(){if(function(a){return _T(a)&&a!==N.ABORTED}(r.code)){let s=i.Ia.shift();ei(i).L_(),yield W_(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield fc(i)}})}(n,e)),K_(n)&&Q_(n)})}function k0(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),K(Di,"RemoteStore received new credentials");let i=Ni(t);t.da.add(3),yield Ys(t),i&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield mc(t)})}function ix(n,e){return v(this,null,function*(){let t=ne(n);e?(t.da.delete(2),yield mc(t)):e||(t.da.add(2),yield Ys(t),t.Va.set("Unknown"))})}function Sr(n){return n.fa||(n.fa=function(t,i,r){let s=ne(t);return s.oa(),new hh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{e_:WT.bind(null,n),n_:KT.bind(null,n),i_:QT.bind(null,n),Y_:YT.bind(null,n)}),n.Aa.push(e=>v(null,null,function*(){e?(n.fa.L_(),tm(n)?em(n):n.Va.set("Unknown")):(yield n.fa.stop(),H_(n))}))),n.fa}function ei(n){return n.ga||(n.ga=function(t,i,r){let s=ne(t);return s.oa(),new mh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:ZT.bind(null,n),i_:nx.bind(null,n),na:ex.bind(null,n),ra:tx.bind(null,n)}),n.Aa.push(e=>v(null,null,function*(){e?(n.ga.L_(),yield fc(n)):(yield n.ga.stop(),n.Ia.length>0&&(K(Di,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var yh=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let a=Date.now()+i,l=new n(e,t,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nm(n,e){if(An("AsyncQueue",`${e}: ${n}`),xr(n))return new H(N.UNAVAILABLE,`${e}: ${n}`);throw n}var za=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Y.comparator(t.key,i.key):(t,i)=>Y.comparator(t.key,i.key),this.keyedMap=ks(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ha=class{constructor(){this.pa=new Ve(Y.comparator)}track(e){let t=e.doc.key,i=this.pa.get(t);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(t,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(t):e.type===1&&i.type===2?this.pa=this.pa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):J(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,i)=>{e.push(i)}),e}},Er=class n{constructor(e,t,i,r,s,a,l,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,s){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,za.emptySet(t),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var vh=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},wh=class{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){let r=ne(t),s=r.queries;r.queries=P0(),s.forEach((a,l)=>{for(let d of l.Sa)d.onError(i)})})(this,new H(N.ABORTED,"Firestore shutting down"))}};function P0(){return new Rn(n=>E_(n),uc)}function im(n,e){return v(this,null,function*(){let t=ne(n),i=3,r=e.query,s=t.queries.get(r);s?!s.Da()&&e.va()&&(i=2):(s=new vh,i=e.va()?0:1);try{switch(i){case 0:s.ba=yield t.onListen(r,!0);break;case 1:s.ba=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=nm(a,`Initialization of query '${sr(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&sm(t)})}function rm(n,e){return v(this,null,function*(){let t=ne(n),i=e.query,r=3,s=t.queries.get(i);if(s){let a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.va()?0:1:!s.Da()&&e.va()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function rx(n,e){let t=ne(n),i=!1;for(let r of e){let s=r.query,a=t.queries.get(s);if(a){for(let l of a.Sa)l.Ma(r)&&(i=!0);a.ba=r}}i&&sm(t)}function sx(n,e,t){let i=ne(n),r=i.queries.get(e);if(r)for(let s of r.Sa)s.onError(t);i.queries.delete(e)}function sm(n){n.Ca.forEach(e=>{e.next()})}var Eh,R0;(R0=Eh||(Eh={})).xa="default",R0.Cache="cache";var qs=class{constructor(e,t,i){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Er(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let i=t!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Er.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Eh.Cache}};var Wa=class{constructor(e){this.key=e}},Ka=class{constructor(e){this.key=e}},Ih=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ue(),this.mutatedKeys=ue(),this.Za=I_(e),this.Xa=new za(this.Za)}get eu(){return this.Ha}tu(e,t){let i=t?t.nu:new Ha,r=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,w)=>{let E=r.get(g),R=dc(this.query,w)?w:null,F=!!E&&this.mutatedKeys.has(E.key),W=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),B=!1;E&&R?E.data.isEqual(R.data)?F!==W&&(i.track({type:3,doc:R}),B=!0):this.ru(E,R)||(i.track({type:2,doc:R}),B=!0,(d&&this.Za(R,d)>0||f&&this.Za(R,f)<0)&&(l=!0)):!E&&R?(i.track({type:0,doc:R}),B=!0):E&&!R&&(i.track({type:1,doc:E}),B=!0,(d||f)&&(l=!0)),B&&(R?(a=a.add(R),s=W?s.add(g):s.delete(g)):(a=a.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),s=s.delete(g.key),i.track({type:1,doc:g})}return{Xa:a,nu:i,Cs:l,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let a=e.nu.wa();a.sort((g,w)=>function(R,F){let W=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:B})}};return W(R)-W(F)}(g.type,w.type)||this.Za(g.doc,w.doc)),this.iu(i),r=r!=null&&r;let l=t&&!r?this.su():[],d=this.Ya.size===0&&this.current&&!r?1:0,f=d!==this.Ja;return this.Ja=d,a.length!==0||f?{snapshot:new Er(this.query,e.Xa,s,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ha,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=ue(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});let t=[];return e.forEach(i=>{this.Ya.has(i)||t.push(new Ka(i))}),this.Ya.forEach(i=>{e.has(i)||t.push(new Wa(i))}),t}au(e){this.Ha=e.$s,this.Ya=ue();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Er.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},om="SyncEngine",bh=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Th=class{constructor(e){this.key=e,this.cu=!1}},xh=class{constructor(e,t,i,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Rn(l=>E_(l),uc),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ve(Y.comparator),this.Eu=new Map,this.du=new $s,this.Au={},this.Ru=new Map,this.Vu=js.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function ox(n,e,t=!0){return v(this,null,function*(){let i=ty(n),r,s=i.hu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=yield Y_(i,e,t,!0),r})}function ax(n,e){return v(this,null,function*(){let t=ty(n);yield Y_(t,e,!0,!1)})}function Y_(n,e,t,i){return v(this,null,function*(){let r=yield GT(n.localStore,nn(e)),s=r.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),l;return i&&(l=yield cx(n,e,s,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&G_(n.remoteStore,r),l})}function cx(n,e,t,i,r){return v(this,null,function*(){n.fu=(w,E,R)=>function(W,B,se,te){return v(this,null,function*(){let oe=B.view.tu(se);oe.Cs&&(oe=yield S0(W.localStore,B.query,!1).then(({documents:S})=>B.view.tu(S,oe)));let ye=te&&te.targetChanges.get(B.targetId),Ze=te&&te.targetMismatches.get(B.targetId)!=null,pe=B.view.applyChanges(oe,W.isPrimaryClient,ye,Ze);return V0(W,B.targetId,pe.ou),pe.snapshot})}(n,w,E,R);let s=yield S0(n.localStore,e,!0),a=new Ih(e,s.$s),l=a.tu(s.documents),d=Us.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,d);V0(n,t,f.ou);let g=new bh(e,t,a);return n.hu.set(e,g),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot})}function lx(n,e,t){return v(this,null,function*(){let i=ne(n),r=i.hu.get(e),s=i.Pu.get(r.targetId);if(s.length>1)return i.Pu.set(r.targetId,s.filter(a=>!uc(a,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Xh(i.remoteStore,r.targetId),Sh(i,r.targetId)}).catch(Tr))):(Sh(i,r.targetId),yield sh(i.localStore,r.targetId,!0))})}function ux(n,e){return v(this,null,function*(){let t=ne(n),i=t.hu.get(e),r=t.Pu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xh(t.remoteStore,i.targetId))})}function dx(n,e,t){return v(this,null,function*(){let i=yx(n);try{let r=yield function(a,l){let d=ne(a),f=Fe.now(),g=l.reduce((R,F)=>R.add(F.key),ue()),w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",R=>{let F=Dn(),W=ue();return d.Bs.getEntries(R,g).next(B=>{F=B,F.forEach((se,te)=>{te.isValidDocument()||(W=W.add(se))})}).next(()=>d.localDocuments.getOverlayedDocuments(R,F)).next(B=>{w=B;let se=[];for(let te of l){let oe=gT(te,w.get(te.key).overlayedDocument);oe!=null&&se.push(new on(te.key,oe,f_(oe.value.mapValue),kt.exists(!0)))}return d.mutationQueue.addMutationBatch(R,f,se,l)}).next(B=>{E=B;let se=B.applyToLocalDocumentSet(w,W);return d.documentOverlayCache.saveOverlays(R,B.batchId,se)})}).then(()=>({batchId:E.batchId,changes:T_(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,d){let f=a.Au[a.currentUser.toKey()];f||(f=new Ve(ae)),f=f.insert(l,d),a.Au[a.currentUser.toKey()]=f}(i,r.batchId,t),yield Js(i,r.changes),yield fc(i.remoteStore)}catch(r){let s=nm(r,"Failed to persist write");t.reject(s)}})}function J_(n,e){return v(this,null,function*(){let t=ne(n);try{let i=yield jT(t.localStore,e);e.targetChanges.forEach((r,s)=>{let a=t.Eu.get(s);a&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.cu=!0:r.modifiedDocuments.size>0?fe(a.cu,14607):r.removedDocuments.size>0&&(fe(a.cu,42227),a.cu=!1))}),yield Js(t,i,e)}catch(i){yield Tr(i)}})}function D0(n,e,t){let i=ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.hu.forEach((s,a)=>{let l=a.view.Fa(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){let d=ne(a);d.onlineState=l;let f=!1;d.queries.forEach((g,w)=>{for(let E of w.Sa)E.Fa(l)&&(f=!0)}),f&&sm(d)}(i.eventManager,e),r.length&&i.lu.Y_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function hx(n,e,t){return v(this,null,function*(){let i=ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),s=r&&r.key;if(s){let a=new Ve(Y.comparator);a=a.insert(s,jt.newNoDocument(s,ie.min()));let l=ue().add(s),d=new Da(ie.min(),new Map,new Ve(ae),a,l);yield J_(i,d),i.Iu=i.Iu.remove(s),i.Eu.delete(e),am(i)}else yield sh(i.localStore,e,!1).then(()=>Sh(i,e,t)).catch(Tr)})}function mx(n,e){return v(this,null,function*(){let t=ne(n),i=e.batch.batchId;try{let r=yield BT(t.localStore,e);Z_(t,i,null),X_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Js(t,r)}catch(r){yield Tr(r)}})}function fx(n,e,t){return v(this,null,function*(){let i=ne(n);try{let r=yield function(a,l){let d=ne(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,l).next(w=>(fe(w!==null,37113),g=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(i.localStore,e);Z_(i,e,t),X_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Js(i,r)}catch(r){yield Tr(r)}})}function X_(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function Z_(n,e,t){let i=ne(n),r=i.Au[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Au[i.currentUser.toKey()]=r}}function Sh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Pu.get(e))n.hu.delete(i),t&&n.lu.gu(i,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(i=>{n.du.containsKey(i)||ey(n,i)})}function ey(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(Xh(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),am(n))}function V0(n,e,t){for(let i of t)i instanceof Wa?(n.du.addReference(i.key,e),px(n,i)):i instanceof Ka?(K(om,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,e),n.du.containsKey(i.key)||ey(n,i.key)):J(19791,{pu:i})}function px(n,e){let t=e.key,i=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(i)||(K(om,"New document in limbo: "+t),n.Tu.add(i),am(n))}function am(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new Y(Ce.fromString(e)),i=n.Vu.next();n.Eu.set(i,new Th(t)),n.Iu=n.Iu.insert(t,i),G_(n.remoteStore,new Bs(nn(lc(t.path)),i,"TargetPurposeLimboResolution",jh.le))}}function Js(n,e,t){return v(this,null,function*(){let i=ne(n),r=[],s=[],a=[];i.hu.isEmpty()||(i.hu.forEach((l,d)=>{a.push(i.fu(d,e,t).then(f=>{var g;if((f||t)&&i.isPrimaryClient){let w=f?!f.fromCache:(g=t?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(f){r.push(f);let w=th.Rs(d.targetId,f);s.push(w)}}))}),yield Promise.all(a),i.lu.Y_(r),yield function(d,f){return v(this,null,function*(){let g=ne(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>O.forEach(f,E=>O.forEach(E.ds,R=>g.persistence.referenceDelegate.addReference(w,E.targetId,R)).next(()=>O.forEach(E.As,R=>g.persistence.referenceDelegate.removeReference(w,E.targetId,R)))))}catch(w){if(!xr(w))throw w;K(Jh,"Failed to update sequence numbers: "+w)}for(let w of f){let E=w.targetId;if(!w.fromCache){let R=g.xs.get(E),F=R.snapshotVersion,W=R.withLastLimboFreeSnapshotVersion(F);g.xs=g.xs.insert(E,W)}}})}(i.localStore,s))})}function gx(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){K(om,"User change. New user:",e.toKey());let i=yield $_(t.localStore,e);t.currentUser=e,function(s,a){s.Ru.forEach(l=>{l.forEach(d=>{d.reject(new H(N.CANCELLED,a))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Js(t,i.ks)}})}function _x(n,e){let t=ne(n),i=t.Eu.get(e);if(i&&i.cu)return ue().add(i.key);{let r=ue(),s=t.Pu.get(e);if(!s)return r;for(let a of s){let l=t.hu.get(a);r=r.unionWith(l.view.eu)}return r}}function ty(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=J_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_x.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hx.bind(null,e),e.lu.Y_=rx.bind(null,e.eventManager),e.lu.gu=sx.bind(null,e.eventManager),e}function yx(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fx.bind(null,e),e}var ny=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=hc(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,i){return null}Cu(t,i){return null}Du(t){return UT(this.persistence,new ih,t.initialUser,this.serializer)}Su(t){return new Fa(eh.fi,this.serializer)}bu(t){return new oh}terminate(){return v(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Ch=class extends ny{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){fe(this.persistence.referenceDelegate instanceof Ua,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new jd(i,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new Fa(i=>Ua.fi(i,t),this.serializer)}};var vx=(()=>{class n{initialize(t,i){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gx.bind(null,this.syncEngine),yield ix(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new wh}()}createDatastore(t){let i=hc(t.databaseInfo.databaseId),r=function(a){return new dh(a)}(t.databaseInfo);return function(a,l,d,f){return new ph(a,l,d,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,a,l,d){return new _h(r,s,a,l,d)}(this.localStore,this.datastore,t.asyncQueue,i=>D0(this.syncEngine,i,0),function(){return ja.C()?new ja:new ah}())}createSyncEngine(t,i){return function(s,a,l,d,f,g,w){let E=new xh(s,a,l,d,f,g);return w&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return v(this,null,function*(){var t,i;yield function(s){return v(this,null,function*(){let a=ne(s);K(Di,"RemoteStore shutting down."),a.da.add(5),yield Ys(a),a.Ra.shutdown(),a.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Gs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ti="FirestoreClient",Ah=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=xa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,a=>v(this,null,function*(){K(ti,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(K(ti,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=nm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Xu(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K(ti,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>v(null,null,function*(){i.isEqual(r)||(yield $_(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function N0(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield wx(n);K(ti,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>k0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>k0(e.remoteStore,r)),n._onlineComponents=e})}function wx(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K(ti,"Using user provided OfflineComponentProvider");try{yield Xu(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===N.FAILED_PRECONDITION||r.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;dr("Error using user provided cache. Falling back to memory cache: "+t),yield Xu(n,new ny)}}else K(ti,"Using default OfflineComponentProvider"),yield Xu(n,new Ch(void 0));return n._offlineComponents})}function iy(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K(ti,"Using user provided OnlineComponentProvider"),yield N0(n,n._uninitializedComponentsProvider._online)):(K(ti,"Using default OnlineComponentProvider"),yield N0(n,new vx))),n._onlineComponents})}function Ex(n){return iy(n).then(e=>e.syncEngine)}function Qa(n){return v(this,null,function*(){let e=yield iy(n),t=e.eventManager;return t.onListen=ox.bind(null,e.syncEngine),t.onUnlisten=lx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ax.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ux.bind(null,e.syncEngine),t})}function Ix(n,e,t={}){let i=new Bt;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(s,a,l,d,f){let g=new Gs({next:E=>{g.xu(),a.enqueueAndForget(()=>rm(s,w));let R=E.docs.has(l);!R&&E.fromCache?f.reject(new H(N.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&d&&d.source==="server"?f.reject(new H(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new qs(lc(l.path),g,{includeMetadataChanges:!0,Qa:!0});return im(s,w)}(yield Qa(n),n.asyncQueue,e,t,i)})),i.promise}function bx(n,e,t={}){let i=new Bt;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(s,a,l,d,f){let g=new Gs({next:E=>{g.xu(),a.enqueueAndForget(()=>rm(s,w)),E.fromCache&&d.source==="server"?f.reject(new H(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new qs(l,g,{includeMetadataChanges:!0,Qa:!0});return im(s,w)}(yield Qa(n),n.asyncQueue,e,t,i)})),i.promise}function ry(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var M0=new Map;function sy(n,e,t){if(!t)throw new H(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Tx(n,e,t,i){if(e===!0&&i===!0)throw new H(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function O0(n){if(!Y.isDocumentKey(n))throw new H(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function L0(n){if(Y.isDocumentKey(n))throw new H(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J(12329,{type:typeof n})}function Et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pc(n);throw new H(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var oy="firestore.googleapis.com",F0=!0,Ya=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new H(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oy,this.ssl=F0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:F0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OT)throw new H(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ry((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ir=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ya({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ya(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ed;switch(i.type){case"firstParty":return new rd(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=M0.get(t);i&&(K("ComponentProvider","Removing Datastore"),M0.delete(t),i.terminate())}(this),Promise.resolve()}};function ay(n,e,t,i={}){var r;n=Et(n,Ir);let s=jn(e),a=n._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;s&&($o(`https://${d}`),qo("Firestore",!0)),a.host!==oy&&a.host!==d&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:d,ssl:s,emulatorOptions:i});if(!St(f,l)&&(n._setSettings(f),i.mockUserToken)){let g,w;if(typeof i.mockUserToken=="string")g=i.mockUserToken,w=je.MOCK_USER;else{g=pp(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new H(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new je(E)}n._authCredentials=new td(new ba(g,w))}}var ni=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Qn=class n extends ni{constructor(e,t,i){super(e,t,lc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cy(n,e,...t){if(n=Re(n),sy("collection","path",e),n instanceof Ir){let i=Ce.fromString(e,...t);return L0(i),new Qn(n,null,i)}{if(!(n instanceof ct||n instanceof Qn))throw new H(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ce.fromString(e,...t));return L0(i),new Qn(n.firestore,null,i)}}function cm(n,e,...t){if(n=Re(n),arguments.length===1&&(e=xa.newId()),sy("doc","path",e),n instanceof Ir){let i=Ce.fromString(e,...t);return O0(i),new ct(n,null,new Y(i))}{if(!(n instanceof ct||n instanceof Qn))throw new H(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ce.fromString(e,...t));return O0(i),new ct(n.firestore,n instanceof Qn?n.converter:null,new Y(i))}}var U0="AsyncQueue",Ja=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new $a(this,"async_queue_retry"),this.rc=()=>{let i=Ju();i&&K(U0,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;let t=Ju();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=Ju();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new Bt;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return v(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!xr(e))throw e;K(U0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,An("INTERNAL UNHANDLED ERROR: ",B0(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=t,t}enqueueAfterDelay(e,t,i){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let r=yh.createAndSchedule(this,e,t,i,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&J(47125,{cc:B0(this.Xu)})}verifyOperationInProgress(){}lc(){return v(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function B0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function j0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var qt=class extends Ir{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Ja,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ja(e),this._firestoreClient=void 0,yield e}})}};function ly(n,e){let t=typeof n=="object"?n:_i(),i=typeof n=="string"?n:e||ka,r=Ji(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=fp("firestore");s&&ay(r,...s)}return r}function Xs(n){if(n._terminated)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xx(n),n._firestoreClient}function xx(n){var e,t,i;let r=n._freezeSettings(),s=function(l,d,f,g){return new ld(l,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ry(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Ah(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){let d=l?._online.build();return{_offline:l?._offline.build(d),_online:d}}(n._componentsProvider))}var zs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Xe.fromBase64String(e))}catch(t){throw new H(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ii=class{constructor(e){this._methodName=e}};var Hs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Ws=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var Sx=/^__.*__$/,kh=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new on(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ri(e,this.data,t,this.fieldTransforms)}},Xa=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new on(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function uy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ic:n})}}var Za=class n{constructor(e,t,i,r,s,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:i,Rc:!1});return r.Vc(e),r}mc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(uy(this.Ic)&&Sx.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},Ph=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hc(e)}bc(e,t,i,r=!1){return new Za({Ic:e,methodName:t,wc:i,path:wt.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gc(n){let e=n._freezeSettings(),t=hc(n._databaseId);return new Ph(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dy(n,e,t,i,r,s={}){let a=n.bc(s.merge||s.mergeFields?2:0,e,t,r);lm("Data must be an object, but it was:",a,i);let l=py(i,a),d,f;if(s.merge)d=new At(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){let g=[];for(let w of s.mergeFields){let E=Nh(e,w,t);if(!a.contains(E))throw new H(N.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);_y(g,E)||g.push(E)}d=new At(g),f=a.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,f=a.fieldTransforms;return new kh(new vt(l),d,f)}var ec=class n extends ii{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function hy(n,e,t){return new Za({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Rh=class n extends ii{_toFieldTransform(e){return new Fs(e.path,new Pi)}isEqual(e){return e instanceof n}},Dh=class n extends ii{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=hy(this,e,!0),i=this.Sc.map(s=>Mi(s,t)),r=new Xn(i);return new Fs(e.path,r)}isEqual(e){return e instanceof n&&St(this.Sc,e.Sc)}},Vh=class n extends ii{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=hy(this,e,!0),i=this.Sc.map(s=>Mi(s,t)),r=new Zn(i);return new Fs(e.path,r)}isEqual(e){return e instanceof n&&St(this.Sc,e.Sc)}};function my(n,e,t,i){let r=n.bc(1,e,t);lm("Data must be an object, but it was:",r,i);let s=[],a=vt.empty();ri(i,(d,f)=>{let g=um(e,d,t);f=Re(f);let w=r.mc(g);if(f instanceof ec)s.push(g);else{let E=Mi(f,w);E!=null&&(s.push(g),a.set(g,E))}});let l=new At(s);return new Xa(a,l,r.fieldTransforms)}function fy(n,e,t,i,r,s){let a=n.bc(1,e,t),l=[Nh(e,i,t)],d=[r];if(s.length%2!=0)throw new H(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)l.push(Nh(e,s[E])),d.push(s[E+1]);let f=[],g=vt.empty();for(let E=l.length-1;E>=0;--E)if(!_y(f,l[E])){let R=l[E],F=d[E];F=Re(F);let W=a.mc(R);if(F instanceof ec)f.push(R);else{let B=Mi(F,W);B!=null&&(f.push(R),g.set(R,B))}}let w=new At(f);return new Xa(g,w,a.fieldTransforms)}function Cx(n,e,t,i=!1){return Mi(t,n.bc(i?4:3,e))}function Mi(n,e){if(gy(n=Re(n)))return lm("Unsupported field value:",e,n),py(n,e);if(n instanceof ii)return function(i,r){if(!uy(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,r){let s=[],a=0;for(let l of i){let d=Mi(l,r.fc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dT(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Fe.fromDate(i);return{timestampValue:Oa(r.serializer,s)}}if(i instanceof Fe){let s=new Fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Oa(r.serializer,s)}}if(i instanceof Hs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zs)return{bytesValue:N_(r.serializer,i._byteString)};if(i instanceof ct){let s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yh(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ws)return function(a,l){return{mapValue:{fields:{[Gh]:{stringValue:zh},[mr]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.gc("VectorValues must only contain numeric values.");return Qh(l.serializer,f)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${pc(i)}`)}(n,e)}function py(n,e){let t={};return o_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(n,(i,r)=>{let s=Mi(r,e.Ac(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function gy(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fe||n instanceof Hs||n instanceof zs||n instanceof ct||n instanceof ii||n instanceof Ws)}function lm(n,e,t){if(!gy(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=pc(t);throw i==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+i)}}function Nh(n,e,t){if((e=Re(e))instanceof Vi)return e._internalPath;if(typeof e=="string")return um(n,e);throw tc("Field path arguments must be of type string or ",n,!1,void 0,t)}var Ax=new RegExp("[~\\*/\\[\\]]");function um(n,e,t){if(e.search(Ax)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vi(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tc(n,e,t,i,r){let s=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new H(N.INVALID_ARGUMENT,l+n+d)}function _y(n,e){return n.some(t=>t.isEqual(e))}var nc=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Mh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_c("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Mh=class extends nc{data(){return super.data()}};function _c(n,e){return typeof e=="string"?um(n,e):e instanceof Vi?e._internalPath:e._delegate._internalPath}function yy(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ks=class{},ic=class extends Ks{};function vy(n,e,...t){let i=[];e instanceof Ks&&i.push(e),i=i.concat(t),function(s){let a=s.filter(d=>d instanceof Oh).length,l=s.filter(d=>d instanceof rc).length;if(a>1||a>0&&l>0)throw new H(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var rc=class n extends ic{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Iy(e._query,t),new ni(e.firestore,e.converter,Id(e._query,t))}_parse(e){let t=gc(e.firestore);return function(s,a,l,d,f,g,w){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new H(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){q0(w,g);let F=[];for(let W of w)F.push($0(d,s,W));E={arrayValue:{values:F}}}else E=$0(d,s,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||q0(w,g),E=Cx(l,a,w,g==="in"||g==="not-in");return Le.create(f,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function wy(n,e,t){let i=e,r=_c("where",n);return rc._create(r,i,t)}var Oh=class n extends Ks{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:$t.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let a=r,l=s.getFlattenedFilters();for(let d of l)Iy(a,d),a=Id(a,d)}(e._query,t),new ni(e.firestore,e.converter,Id(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Lh=class n extends ic{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,a){if(r.startAt!==null)throw new H(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new H(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ki(s,a)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(r,s){let a=r.explicitOrderBy.concat([s]);return new Jn(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function Ey(n,e="asc"){let t=e,i=_c("orderBy",n);return Lh._create(i,t)}function $0(n,e,t){if(typeof(t=Re(t))=="string"){if(t==="")throw new H(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w_(e)&&t.indexOf("/")!==-1)throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ce.fromString(t));if(!Y.isDocumentKey(i))throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return a0(n,new Y(i))}if(t instanceof ct)return a0(n,t._key);throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pc(t)}.`)}function q0(n,e){if(!Array.isArray(n)||n.length===0)throw new H(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Iy(n,e){let t=function(r,s){for(let a of r)for(let l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Fh=class{convertValue(e,t="none"){switch(Yn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return ri(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[mr].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Te(a.doubleValue));return new Ws(s)}convertGeoPoint(e){return new Hs(Te(e.latitude),Te(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=cc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Os(e));default:return null}}convertTimestamp(e){let t=kn(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ce.fromString(e);fe(B_(i),9688,{name:e});let r=new Pa(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(t)||An(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function by(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Si=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sc=class extends nc{constructor(e,t,i,r,s,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(_c("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ur=class extends sc{data(e={}){return super.data(e)}},oc=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Si(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ur(this._firestore,this._userDataWriter,i.key,i,new Si(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let d=new ur(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Si(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{let d=new ur(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Si(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,g=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),g=a.indexOf(l.doc.key)),{type:kx(l.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function kx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:n})}}function Ty(n){n=Et(n,ct);let e=Et(n.firestore,qt);return Ix(Xs(e),n._key).then(t=>ky(e,n,t))}var Qs=class extends Fh{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function xy(n){n=Et(n,ni);let e=Et(n.firestore,qt),t=Xs(e),i=new Qs(e);return yy(n._query),bx(t,n._query).then(r=>new oc(e,i,n,r))}function Sy(n,e,t,...i){n=Et(n,ct);let r=Et(n.firestore,qt),s=gc(r),a;return a=typeof(e=Re(e))=="string"||e instanceof Vi?fy(s,"updateDoc",n._key,e,t,i):my(s,"updateDoc",n._key,e),yc(r,[a.toMutation(n._key,kt.exists(!0))])}function Cy(n){return yc(Et(n.firestore,qt),[new wr(n._key,kt.none())])}function Ay(n,e){let t=Et(n.firestore,qt),i=cm(n),r=by(n.converter,e);return yc(t,[dy(gc(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,kt.exists(!1))]).then(()=>i)}function dm(n,...e){var t,i,r;n=Re(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||j0(e[a])||(s=e[a],a++);let l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(j0(e[a])){let w=e[a];e[a]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[a+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[a+2]=(r=w.complete)===null||r===void 0?void 0:r.bind(w)}let d,f,g;if(n instanceof ct)f=Et(n.firestore,qt),g=lc(n._key.path),d={next:w=>{e[a]&&e[a](ky(f,n,w))},error:e[a+1],complete:e[a+2]};else{let w=Et(n,ni);f=Et(w.firestore,qt),g=w._query;let E=new Qs(f);d={next:R=>{e[a]&&e[a](new oc(f,E,w,R))},error:e[a+1],complete:e[a+2]},yy(n._query)}return function(E,R,F,W){let B=new Gs(W),se=new qs(R,B,F);return E.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return im(yield Qa(E),se)})),()=>{B.xu(),E.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return rm(yield Qa(E),se)}))}}(Xs(f),g,l,d)}function yc(n,e){return function(i,r){let s=new Bt;return i.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return dx(yield Ex(i),r,s)})),s.promise}(Xs(n),e)}function ky(n,e,t){let i=t.docs.get(e._key),r=new Qs(n);return new sc(n,r,e._key,i,new Si(t.hasPendingWrites,t.fromCache),e.converter)}var Uh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gc(e)}set(e,t,i){this._verifyNotCommitted();let r=Zu(e,this._firestore),s=by(r.converter,t,i),a=dy(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,kt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=Zu(e,this._firestore),a;return a=typeof(t=Re(t))=="string"||t instanceof Vi?fy(this._dataReader,"WriteBatch.update",s._key,t,i,r):my(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,kt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Zu(e,this._firestore);return this._mutations=this._mutations.concat(new wr(t._key,kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Zu(n,e){if((n=Re(n)).firestore!==e)throw new H(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function hm(){return new Rh("serverTimestamp")}function Py(...n){return new Dh("arrayUnion",n)}function Ry(...n){return new Vh("arrayRemove",n)}function Dy(n){return Xs(n=Et(n,qt)),new Uh(n,e=>yc(n,e))}(function(e,t=!0){(function(r){br=r})(qn),Lt(new at("firestore",(i,{instanceIdentifier:r,options:s})=>{let a=i.getProvider("app").getImmediate(),l=new qt(new nd(i.getProvider("auth-internal")),new sd(a,i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new H(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(f.options.projectId,g)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),De(Jg,Xg,e),De(Jg,Xg,"esm2017")})();var vc=function(){return vc=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},vc.apply(this,arguments)};var Dx={includeMetadataChanges:!1};function mm(n,e){return e===void 0&&(e=Dx),new Nt(function(t){var i=dm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function Vy(n){return mm(n,{includeMetadataChanges:!0})}function Ny(n,e){return e===void 0&&(e={}),Vy(n).pipe(Ge(function(t){return fm(t,e)}))}function fm(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:vc(vc({},i),(t={},t[e.idField]=n.id,t))}function My(n){return mm(n,{includeMetadataChanges:!0}).pipe(Ge(function(e){return e.docs}))}function Oy(n,e){return e===void 0&&(e={}),My(n).pipe(Ge(function(t){return t.map(function(i){return fm(i,e)})}))}var Gt=class{constructor(e){return e}},Ly="firestore",pm=class{constructor(){return Zi(Ly)}};var gm=new gt("angularfire2.firestore-instances");function Vx(n,e){let t=ps(Ly,n,e);return t&&new Gt(t)}function Nx(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Gt(i)}}var Mx={provide:pm,deps:[[new Tt,gm]]},Ox={provide:Gt,useFactory:Vx,deps:[[new Tt,gm],In]};function Fy(n,...e){return De("angularfire",Gn.full,"fst"),Wi([Ox,Mx,{provide:gm,useFactory:Nx(n),multi:!0,deps:[Ht,gn,zn,vi,[new Tt,Cs],[new Tt,er],...e]}])}var Cr=Se(Oy,!0);var Uy=Se(Ny,!0);var Oi=Se(Ay,!0,2);var an=Se(cy,!0,2);var wc=Se(Cy,!0,2);var lt=Se(cm,!0,2);var Ec=Se(Ty,!0);var Ar=Se(xy,!0);var By=Se(ly,!0);var _m=Se(Ey,!0,2),zt=Se(vy,!0,2);var cn=Se(Sy,!0,2);var ln=Se(wy,!0,2),ym=Se(Dy,!0,2);var xe=class n{constructor(e){this.auth=e;this.user$=zg(this.auth)}user$;signInWithGoogle(){let e=new Mu;return Wg(this.auth,e)}signOut(){return Kg(this.auth)}static \u0275fac=function(t){return new(t||n)(Ne(bi))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};function Lx(n,e){if(n&1&&(st(0),_(1),ot()),n&2){let t=e.ngIf;T(),ce(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function Fx(n,e){n&1&&_(0," Welcome! ")}function Ux(n,e){n&1&&(u(0,"div",50),D(1,"div",51),u(2,"span",52),_(3,"Loading quote..."),m()())}function Bx(n,e){if(n&1&&(u(0,"div",53)(1,"blockquote",54),_(2),m(),u(3,"p",55),_(4),m()()),n&2){let t=M();T(2),ce(' "',t.homeQuote.q,'" '),T(2),ce(" \u2014 ",t.homeQuote.a," ")}}function jx(n,e){if(n&1){let t=Z();u(0,"div",56)(1,"p",57),_(2),m(),u(3,"button",58),L("click",function(){j(t);let r=M();return $(r.refreshQuote())}),_(4," Try again "),m()()}if(n&2){let t=M();T(2),ee(t.quoteError)}}var Ic=class n{constructor(e,t,i){this.authService=e;this.router=t;this.quotesService=i}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}navigateToFamilyTree(){this.router.navigate(["/family-tree"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)(z(xe),z(Ue),z(lp))};static \u0275cmp=ge({type:n,selectors:[["app-home"]],decls:91,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-yellow-100","dark:bg-yellow-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-yellow-200","dark:group-hover:bg-yellow-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4s-3.5 3-3.5 6c0 1.5 1 4 3.5 4s3.5-2.5 3.5-4c0-3-3.5-6-3.5-6zM12 14v4m-4-4h8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4a4 4 0 100-8 4 4 0 000 8zM3 20h18"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-yellow-600","dark:group-hover:text-yellow-400","transition-colors","duration-200"],["routerLink","/premier-league",1,"card","group"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-red-100","dark:bg-red-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-red-200","dark:group-hover:bg-red-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","sm:w-6","sm:h-6","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-red-600","dark:group-hover:text-red-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,i){if(t&1){let r=Z();u(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),G(4,Lx,2,1,"ng-container",5),re(5,"async"),G(6,Fx,1,0,"ng-template",null,0,Qt),_(8," Explore some of my utilities, tools and research items. "),m()(),u(9,"div",6)(10,"div",7),L("click",function(){return j(r),$(i.navigateToLists())}),u(11,"div",8)(12,"div",9)(13,"div",10),U(),u(14,"svg",11),D(15,"path",12),m()()(),Q(),u(16,"div",13)(17,"h3",14),_(18," Todo Lists "),m(),u(19,"p",15),_(20," Create and manage your todo lists "),m()()()(),u(21,"div",7),L("click",function(){return j(r),$(i.navigateToIpLookup())}),u(22,"div",8)(23,"div",9)(24,"div",16),U(),u(25,"svg",17),D(26,"path",18)(27,"path",19),m()()(),Q(),u(28,"div",13)(29,"h3",20),_(30," IP Lookup "),m(),u(31,"p",15),_(32," Check your IP address and location "),m()()()(),u(33,"div",7),L("click",function(){return j(r),$(i.navigateToQuotes())}),u(34,"div",8)(35,"div",9)(36,"div",21),U(),u(37,"svg",22),D(38,"path",23),m()()(),Q(),u(39,"div",13)(40,"h3",24),_(41," Quotes "),m(),u(42,"p",15),_(43," Get inspired with random quotes "),m()()()(),u(44,"div",7),L("click",function(){return j(r),$(i.showProfile())}),u(45,"div",8)(46,"div",9)(47,"div",25),U(),u(48,"svg",26),D(49,"path",27),m()()(),Q(),u(50,"div",13)(51,"h3",28),_(52," Profile "),m(),u(53,"p",15),_(54," View your account information "),m()()()(),u(55,"div",7),L("click",function(){return j(r),$(i.navigateToFamilyTree())}),u(56,"div",8)(57,"div",9)(58,"div",29),U(),u(59,"svg",30),D(60,"path",31)(61,"path",32),m()()(),Q(),u(62,"div",13)(63,"h3",33),_(64," Family Tree "),m(),u(65,"p",15),_(66," Manage your family tree "),m()()()(),u(67,"a",34)(68,"div",8)(69,"div",9)(70,"div",35),U(),u(71,"svg",36),D(72,"path",37),m()()(),Q(),u(73,"div",13)(74,"h3",38),_(75," Premier League Standings "),m(),u(76,"p",15),_(77," View the current Premier League standings. "),m()()()()(),u(78,"div",39)(79,"div",40)(80,"div",41)(81,"h2",42),U(),u(82,"svg",43),D(83,"path",23),m(),_(84," Daily Inspiration "),m(),Q(),u(85,"button",44),L("click",function(){return j(r),$(i.refreshQuote())}),U(),u(86,"svg",45),D(87,"path",46),m()()(),G(88,Ux,4,0,"div",47)(89,Bx,5,2,"div",48)(90,jx,5,1,"div",49),m()()()()}if(t&2){let r=Wt(7);T(4),V("ngIf",de(5,6,i.user$))("ngIfElse",r),T(81),V("disabled",i.quoteLoading),T(3),V("ngIf",i.quoteLoading),T(),V("ngIf",!i.quoteLoading&&i.homeQuote),T(),V("ngIf",!i.quoteLoading&&!i.homeQuote&&i.quoteError)}},dependencies:[_e,Pe,dt,Lo],encapsulation:2})};var bc=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(Ne(Qi))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};function qx(n,e){n&1&&(u(0,"div",6)(1,"div",7),D(2,"div",8),u(3,"span",9),_(4,"Loading IP information..."),m()()())}function Gx(n,e){if(n&1&&(u(0,"div",10)(1,"div",11),U(),u(2,"svg",12),D(3,"path",13),m(),Q(),u(4,"div")(5,"h3",14),_(6,"Error"),m(),u(7,"p",15),_(8),m()()()()),n&2){let t=M();T(8),ee(t.error)}}function zx(n,e){n&1&&(U(),u(0,"svg",51),D(1,"path",52),m())}function Hx(n,e){n&1&&(U(),u(0,"svg",53),D(1,"path",52),m())}function Wx(n,e){if(n&1){let t=Z();u(0,"div",16)(1,"div",17)(2,"div",18)(3,"h1",19),_(4,"IP Address Lookup"),m(),u(5,"p",20),_(6,"Get detailed information about your current IP address and location"),m()(),u(7,"div",21)(8,"button",22),L("click",function(){j(t);let r=M();return $(r.refreshIpInfo())}),G(9,zx,2,0,"svg",23)(10,Hx,2,0,"svg",24),u(11,"span"),_(12),m()()()(),u(13,"div",25)(14,"div",26)(15,"div",27),U(),u(16,"svg",28),D(17,"path",29),m()(),Q(),u(18,"div")(19,"h2",30),_(20,"Your IP Address"),m(),u(21,"p",9),_(22,"Current network information"),m()()(),u(23,"div",31)(24,"div",32)(25,"div")(26,"label",33),_(27,"IP Address"),m(),u(28,"div",34)(29,"code",35),_(30),m(),u(31,"button",36),L("click",function(){j(t);let r=M();return $(r.copyToClipboard(r.ipInfo.ip))}),U(),u(32,"svg",37),D(33,"path",38),m()()()(),Q(),u(34,"div")(35,"label",33),_(36,"Type"),m(),u(37,"span",39),_(38),m()()(),u(39,"div",32)(40,"div")(41,"label",33),_(42,"Continent"),m(),u(43,"p",40),_(44),m()(),u(45,"div")(46,"label",33),_(47,"Country"),m(),u(48,"p",40),_(49),m()()()()(),u(50,"div",41)(51,"div",25)(52,"h3",42),U(),u(53,"svg",43),D(54,"path",44)(55,"path",45),m(),_(56," Location Details "),m(),Q(),u(57,"div",46)(58,"div",47)(59,"span",48),_(60,"Region:"),m(),u(61,"span",49),_(62),m()(),u(63,"div",47)(64,"span",48),_(65,"City:"),m(),u(66,"span",49),_(67),m()(),u(68,"div",47)(69,"span",48),_(70,"ZIP Code:"),m(),u(71,"span",49),_(72),m()(),u(73,"div",47)(74,"span",48),_(75,"Latitude:"),m(),u(76,"span",49),_(77),m()(),u(78,"div",47)(79,"span",48),_(80,"Longitude:"),m(),u(81,"span",49),_(82),m()()()(),u(83,"div",25)(84,"h3",42),U(),u(85,"svg",43),D(86,"path",50),m(),_(87," Network Information "),m(),Q(),u(88,"div",46)(89,"div",47)(90,"span",48),_(91,"ISP:"),m(),u(92,"span",49),_(93),m()(),u(94,"div",47)(95,"span",48),_(96,"Organization:"),m(),u(97,"span",49),_(98),m()(),u(99,"div",47)(100,"span",48),_(101,"ASN:"),m(),u(102,"span",49),_(103),m()()()()()()}if(n&2){let t=M();T(8),V("disabled",t.isLoading),T(),V("ngIf",!t.isLoading),T(),V("ngIf",t.isLoading),T(2),ee(t.isLoading?"Refreshing...":"Refresh"),T(18),ee(t.ipInfo.ip),T(8),ce(" ",t.ipInfo.type||"Unknown"," "),T(6),ee(t.ipInfo.continent_name||"Unknown"),T(5),ee(t.ipInfo.country_name||"Unknown"),T(13),ee(t.ipInfo.region_name||"Unknown"),T(5),ee(t.ipInfo.city||"Unknown"),T(5),ee(t.ipInfo.zip||"Unknown"),T(5),ee(t.ipInfo.latitude||"Unknown"),T(5),ee(t.ipInfo.longitude||"Unknown"),T(11),ee((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),T(5),ee((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),T(5),ee((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown")}}var Tc=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;breadcrumbItems=[{label:"Home",route:"/"},{label:"IP Lookup",route:void 0}];ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)(z(bc))};static \u0275cmp=ge({type:n,selectors:[["app-ip-lookup"]],decls:6,vars:4,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-300","mt-1","sm:mt-2"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"click","disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),D(2,"app-breadcrumb",2),G(3,qx,5,0,"div",3)(4,Gx,9,1,"div",4)(5,Wx,104,16,"div",5),m()()),t&2&&(T(2),V("items",i.breadcrumbItems),T(),V("ngIf",i.isLoading),T(),V("ngIf",i.error),T(),V("ngIf",i.ipInfo&&!i.isLoading))},dependencies:[_e,Pe,Fo,ht],encapsulation:2})};var Xy=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(z(cs),z(fi))};static \u0275dir=ze({type:n})}return n})(),Im=(()=>{class n extends Xy{static \u0275fac=(()=>{let t;return function(r){return(t||(t=as(n)))(r||n)}})();static \u0275dir=ze({type:n,features:[xt]})}return n})(),so=new gt("");var Kx={provide:so,useExisting:pn(()=>mt),multi:!0};function Qx(){let n=Dl()?Dl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Yx=new gt(""),mt=(()=>{class n extends Xy{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Qx())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(z(cs),z(fi),z(Yx,8))};static \u0275dir=ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&L("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Mt([Kx]),xt]})}return n})();function bm(n){return n==null||Tm(n)===0}function Tm(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var oo=new gt(""),Oc=new gt(""),Jx=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ut=class{static min(e){return Xx(e)}static max(e){return Zx(e)}static required(e){return Zy(e)}static requiredTrue(e){return eS(e)}static email(e){return tS(e)}static minLength(e){return nS(e)}static maxLength(e){return iS(e)}static pattern(e){return rS(e)}static nullValidator(e){return Sc()}static compose(e){return sv(e)}static composeAsync(e){return ov(e)}};function Xx(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Zx(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Zy(n){return bm(n.value)?{required:!0}:null}function eS(n){return n.value===!0?null:{required:!0}}function tS(n){return bm(n.value)||Jx.test(n.value)?null:{email:!0}}function nS(n){return e=>{let t=e.value?.length??Tm(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function iS(n){return e=>{let t=e.value?.length??Tm(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function rS(n){if(!n)return Sc;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(bm(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Sc(n){return null}function ev(n){return n!=null}function tv(n){return Gf(n)?pt(n):n}function nv(n){let e={};return n.forEach(t=>{e=t!=null?we(we({},e),t):e}),Object.keys(e).length===0?null:e}function iv(n,e){return e.map(t=>t(n))}function sS(n){return!n.validate}function rv(n){return n.map(e=>sS(e)?e:t=>e.validate(t))}function sv(n){if(!n)return null;let e=n.filter(ev);return e.length==0?null:function(t){return nv(iv(t,e))}}function xm(n){return n!=null?sv(rv(n)):null}function ov(n){if(!n)return null;let e=n.filter(ev);return e.length==0?null:function(t){let i=iv(t,e).map(tv);return Lf(i).pipe(Ge(nv))}}function Sm(n){return n!=null?ov(rv(n)):null}function qy(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function av(n){return n._rawValidators}function cv(n){return n._rawAsyncValidators}function vm(n){return n?Array.isArray(n)?n:[n]:[]}function Cc(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gy(n,e){let t=vm(e);return vm(n).forEach(r=>{Cc(t,r)||t.push(r)}),t}function zy(n,e){return vm(e).filter(t=>!Cc(n,t))}var Ac=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Vn=class extends Ac{name;get formDirective(){return null}get path(){return null}},Fi=class extends Ac{_parent=null;name=null;valueAccessor=null},kc=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},kR=Ie(we({},oS),{"[class.ng-submitted]":"isSubmitted"}),Pt=(()=>{class n extends kc{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(z(Fi,2))};static \u0275dir=ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ls("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[xt]})}return n})(),Rt=(()=>{class n extends kc{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(z(Vn,10))};static \u0275dir=ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ls("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[xt]})}return n})();var Zs="VALID",xc="INVALID",kr="PENDING",eo="DISABLED",si=class{},Pc=class extends si{value;source;constructor(e,t){super(),this.value=e,this.source=t}},no=class extends si{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},io=class extends si{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Pr=class extends si{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Rc=class extends si{source;constructor(e){super(),this.source=e}},Dc=class extends si{source;constructor(e){super(),this.source=e}};function Cm(n){return(Lc(n)?n.validators:n)||null}function aS(n){return Array.isArray(n)?xm(n):n||null}function Am(n,e){return(Lc(e)?e.asyncValidators:n)||null}function cS(n){return Array.isArray(n)?Sm(n):n||null}function Lc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function lv(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new os(1e3,"");if(!i[t])throw new os(1001,"")}function uv(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new os(1002,"")})}var Rr=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return wn(this.statusReactive)}set status(e){wn(()=>this.statusReactive.set(e))}_status=Ki(()=>this.statusReactive());statusReactive=hi(void 0);get valid(){return this.status===Zs}get invalid(){return this.status===xc}get pending(){return this.status==kr}get disabled(){return this.status===eo}get enabled(){return this.status!==eo}errors;get pristine(){return wn(this.pristineReactive)}set pristine(e){wn(()=>this.pristineReactive.set(e))}_pristine=Ki(()=>this.pristineReactive());pristineReactive=hi(!0);get dirty(){return!this.pristine}get touched(){return wn(this.touchedReactive)}set touched(e){wn(()=>this.touchedReactive.set(e))}_touched=Ki(()=>this.touchedReactive());touchedReactive=hi(!1);get untouched(){return!this.touched}_events=new Vf;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zy(e,this._rawAsyncValidators))}hasValidator(e){return Cc(this._rawValidators,e)}hasAsyncValidator(e){return Cc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ie(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new io(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new io(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ie(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new no(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new no(!0,i))}markAsPending(e={}){this.status=kr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ie(we({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=eo,this.errors=null,this._forEachChild(r=>{r.disable(Ie(we({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pc(this.value,i)),this._events.next(new Pr(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zs,this._forEachChild(i=>{i.enable(Ie(we({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ie(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zs||this.status===kr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pc(this.value,t)),this._events.next(new Pr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ie(we({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eo:Zs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=kr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=tv(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Pr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?eo:this.errors?xc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kr)?kr:this._anyControlsHaveStatus(xc)?xc:Zs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new no(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new io(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=aS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cS(this._rawAsyncValidators)}},Dr=class extends Rr{constructor(e,t,i){super(Cm(t),Am(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){uv(this,!0,e),Object.keys(e).forEach(i=>{lv(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wm=class extends Dr{};var ao=new gt("",{providedIn:"root",factory:()=>Fc}),Fc="always";function dv(n,e){return[...e.path,n]}function Vc(n,e,t=Fc){km(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),uS(n,e),hS(n,e),dS(n,e),lS(n,e)}function Hy(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Mc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Nc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lS(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function km(n,e){let t=av(n);e.validator!==null?n.setValidators(qy(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=cv(n);e.asyncValidator!==null?n.setAsyncValidators(qy(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Nc(e._rawValidators,r),Nc(e._rawAsyncValidators,r)}function Mc(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=av(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=cv(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Nc(e._rawValidators,i),Nc(e._rawAsyncValidators,i),t}function uS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&hv(n,e)})}function dS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&hv(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function hv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hS(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function mv(n,e){n==null,km(n,e)}function mS(n,e){return Mc(n,e)}function fv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function fS(n){return Object.getPrototypeOf(n.constructor)===Im}function pv(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function gv(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===mt?t=s:fS(s)?i=s:r=s}),r||i||t||null}function pS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var gS={provide:Vn,useExisting:pn(()=>Ui)},to=Promise.resolve(),Ui=(()=>{class n extends Vn{callSetDisabledState;get submitted(){return wn(this.submittedReactive)}_submitted=Ki(()=>this.submittedReactive());submittedReactive=hi(!1);_directives=new Set;form;ngSubmit=new He;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Dr({},xm(t),Sm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){to.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Vc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){to.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){to.then(()=>{let i=this._findContainer(t.path),r=new Dr({});mv(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){to.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){to.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),pv(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Rc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Dc(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(z(oo,10),z(Oc,10),z(ao,8))};static \u0275dir=ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&L("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mt([gS]),xt]})}return n})();function Wy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ky(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ro=class extends Rr{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Cm(t),Am(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ky(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Wy(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Wy(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ky(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _S=n=>n instanceof ro;var yS={provide:Fi,useExisting:pn(()=>Bi)},Qy=Promise.resolve(),Bi=(()=>{class n extends Fi{_changeDetectorRef;callSetDisabledState;control=new ro;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new He;constructor(t,i,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=gv(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),fv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Qy.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Rl(i);Qy.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?dv(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(z(Vn,9),z(oo,10),z(Oc,10),z(so,10),z(Xf,8),z(ao,8))};static \u0275dir=ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mt([yS]),xt,mi]})}return n})();var Dt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var _v=new gt("");var vS={provide:Vn,useExisting:pn(()=>ji)},ji=(()=>{class n extends Vn{callSetDisabledState;get submitted(){return wn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Ki(()=>this._submittedReactive());_submittedReactive=hi(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new He;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Vc(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Hy(t.control||null,t,!1),pS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),pv(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Rc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Dc(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Hy(i||null,t),_S(r)&&(Vc(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);mv(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&mS(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){km(this.form,this),this._oldForm&&Mc(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(z(oo,10),z(Oc,10),z(ao,8))};static \u0275dir=ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&L("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mt([vS]),xt,mi]})}return n})();var wS={provide:Fi,useExisting:pn(()=>$i)},$i=(()=>{class n extends Fi{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new He;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,a){super(),this._ngModelWarningConfig=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=gv(this,s)}ngOnChanges(t){this._added||this._setUpControl(),fv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return dv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(z(Vn,13),z(oo,10),z(Oc,10),z(so,10),z(_v,8))};static \u0275dir=ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Mt([wS]),xt,mi]})}return n})();var ES={provide:so,useExisting:pn(()=>Uc),multi:!0};function yv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function IS(n){return n.split(":")[0]}var Uc=(()=>{class n extends Im{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=yv(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=IS(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=as(n)))(r||n)}})();static \u0275dir=ze({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&L("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mt([ES]),xt]})}return n})(),vv=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(z(fi),z(cs),z(Uc,9))};static \u0275dir=ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),bS={provide:so,useExisting:pn(()=>wv),multi:!0};function Yy(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function TS(n){return n.split(":")[0]}var wv=(()=>{class n extends Im{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let d=a[l],f=this._getOptionValue(d.value);r.push(f)}}else{let a=i.options;for(let l=0;l<a.length;l++){let d=a[l];if(d.selected){let f=this._getOptionValue(d.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=TS(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=as(n)))(r||n)}})();static \u0275dir=ze({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&L("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mt([bS]),xt]})}return n})(),Ev=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Yy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Yy(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(z(fi),z(cs),z(wv,9))};static \u0275dir=ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var xS=(()=>{class n{_validator=Sc;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Sc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ze({type:n,features:[mi]})}return n})();var SS={provide:oo,useExisting:pn(()=>co),multi:!0};var co=(()=>{class n extends xS{required;inputName="required";normalizeInput=Rl;createValidator=t=>Zy;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=as(n)))(r||n)}})();static \u0275dir=ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&zf("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Mt([SS]),xt]})}return n})();var Iv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Do({})}return n})(),Em=class extends Rr{constructor(e,t,i){super(Cm(t),Am(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){uv(this,!1,e),e.forEach((i,r)=>{lv(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Jy(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Vr=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),s={};return Jy(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Dr(r,s)}record(t,i=null){let r=this._reduceControls(t);return new wm(r,i)}control(t,i,r){let s={};return this.useNonNullable?(Jy(i)?s=i:(s.validators=i,s.asyncValidators=r),new ro(t,Ie(we({},s),{nonNullable:!0}))):new ro(t,i,r)}array(t,i,r){let s=t.map(a=>this._createControl(a));return new Em(s,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof ro)return t;if(t instanceof Rr)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,r,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ao,useValue:t.callSetDisabledState??Fc}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Do({imports:[Iv]})}return n})(),Mr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_v,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ao,useValue:t.callSetDisabledState??Fc}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Do({imports:[Iv]})}return n})();function CS(n,e){if(n&1&&(u(0,"span",26),_(1),m()),n&2){let t=M(3);T(),Un(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function AS(n,e){if(n&1){let t=Z();u(0,"form",9),L("ngSubmit",function(){j(t);let r=M(2);return $(r.saveEditList())}),u(1,"div")(2,"label",10),_(3," Title * "),m(),u(4,"input",11),vn("ngModelChange",function(r){j(t);let s=M(2);return yn(s.editListTitle,r)||(s.editListTitle=r),$(r)}),m()(),u(5,"div")(6,"label",12),_(7," Description (optional) "),m(),u(8,"textarea",13),vn("ngModelChange",function(r){j(t);let s=M(2);return yn(s.editListDescription,r)||(s.editListDescription=r),$(r)}),m()(),u(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),_(13,"Sharing"),m(),u(14,"p",17),_(15," Share this list with others "),G(16,CS,2,2,"span",18),m()(),u(17,"button",19),L("click",function(){j(t);let r=M(2);return $(r.switchToShare())}),U(),u(18,"svg",20),D(19,"path",21),m(),Q(),u(20,"span"),_(21,"Share"),m()()()(),u(22,"div",22)(23,"button",23),L("click",function(){j(t);let r=M(2);return $(r.onClose())}),_(24,"Cancel"),m(),u(25,"button",24),U(),u(26,"svg",20),D(27,"path",25),m(),Q(),u(28,"span"),_(29,"Save Changes"),m()()()()}if(n&2){let t=M(2);T(4),_n("ngModel",t.editListTitle),T(4),_n("ngModel",t.editListDescription),T(8),V("ngIf",t.getSharedCount(t.list)>0),T(9),V("disabled",!t.editListTitle.trim())}}function kS(n,e){if(n&1){let t=Z();u(0,"form",9),L("ngSubmit",function(){j(t);let r=M(2);return $(r.confirmShare())}),u(1,"div")(2,"label",27),_(3," Email Address "),m(),u(4,"input",28),vn("ngModelChange",function(r){j(t);let s=M(2);return yn(s.shareEmail,r)||(s.shareEmail=r),$(r)}),m()(),u(5,"div",22)(6,"button",23),L("click",function(){j(t);let r=M(2);return $(r.switchToEdit())}),_(7,"Back"),m(),u(8,"button",24),U(),u(9,"svg",20),D(10,"path",21),m(),Q(),u(11,"span"),_(12,"Share"),m()()()()}if(n&2){let t=M(2);T(4),_n("ngModel",t.shareEmail),T(4),V("disabled",!t.shareEmail.trim())}}function PS(n,e){if(n&1){let t=Z();u(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),_(4),m(),u(5,"button",5),L("click",function(){j(t);let r=M();return $(r.onClose())}),U(),u(6,"svg",6),D(7,"path",7),m()()(),G(8,AS,30,4,"form",8)(9,kS,13,2,"form",8),m()()}if(n&2){let t=M();T(4),ee(t.mode==="edit"?"Edit List":"Share List"),T(4),V("ngIf",t.mode==="edit"),T(),V("ngIf",t.mode==="share")}}var Lr=class n{open=!1;list=null;mode="edit";save=new He;share=new He;close=new He;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ge({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[mi],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&G(0,PS,10,3,"div",0),t&2&&V("ngIf",i.open)},dependencies:[_e,Pe,Nr,Dt,mt,Pt,Rt,co,Bi,Ui],encapsulation:2})};var oi=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=an(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(it(e=>{if(!e)return nt([]);let t=zt(this.listsCollection,ln("owner","==",e.uid),_m("updatedAt","desc")),i=zt(this.listsCollection,ln("sharedWith","array-contains",e.email),_m("updatedAt","desc"));return pt(Promise.all([Ar(t),Ar(i)])).pipe(Ge(([r,s])=>{let a=r.docs.map(g=>Ie(we({},g.data()),{id:g.id})),l=s.docs.map(g=>Ie(we({},g.data()),{id:g.id}));return[...a,...l].filter((g,w,E)=>w===E.findIndex(R=>R.id===g.id)).sort((g,w)=>new Date(w.updatedAt).getTime()-new Date(g.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(bt(1),it(i=>{if(!i)return nt(Promise.reject("User not logged in"));let r=new Date,s={title:e,owner:i.uid,sharedWith:[],createdAt:r,updatedAt:r,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),pt(Oi(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=lt(this.firestore,`todoLists/${e.id}`),s=e,{id:i}=s,r=Ao(s,["id"]);return r.updatedAt=new Date,Object.keys(r).forEach(a=>{r[a]===void 0&&delete r[a]}),console.log("Updating list with data:",r),cn(t,r)}deleteList(e){let t=lt(this.firestore,`todoLists/${e}`);return wc(t)}shareList(e,t){return v(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let i=lt(this.firestore,`todoLists/${e}`);try{let r=yield Ec(i);if(!r.exists())throw new Error("List not found");let s=r.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let a=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",a);let l={sharedWith:a,updatedAt:new Date};console.log("TodoListService: Updating list with data:",l),yield cn(i,l),console.log("TodoListService: List shared successfully")}catch(r){throw console.error("TodoListService: Error sharing list:",r),r}})}unshareList(e,t){return v(this,null,function*(){let i=lt(this.firestore,`todoLists/${e}`),r=yield Ec(i);if(!r.exists())throw new Error("List not found");let a=(r.data().sharedWith||[]).filter(l=>l!==t);yield cn(i,{sharedWith:a,updatedAt:new Date})})}hasAccess(e){return v(this,null,function*(){return ss(this.authService.user$.pipe(bt(1),it(t=>t?pt(Ec(lt(this.firestore,`todoLists/${e}`))).pipe(Ge(i=>{if(!i.exists())return!1;let r=i.data();return r.owner===t.uid||(r.sharedWith||[]).includes(t.email||"")||r.isPublic||!1})):nt(!1))))})}static \u0275fac=function(t){return new(t||n)(Ne(Gt),Ne(xe))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bc=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=an(this.firestore,"todos")}firestore=rt(Gt);todosCollection;getTodosForList(e){return this.authService.user$.pipe(it(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),nt([]);console.log("TodoService: Creating query for todos in list:",e);let i=zt(this.todosCollection,ln("listId","==",e));return console.log("TodoService: Executing todos query"),Cr(i,{idField:"id"}).pipe(Ge(r=>r),Ro(r=>(console.error("TodoService: Error loading todos:",r),nt([]))))}))}addTodo(e,t){return this.authService.user$.pipe(bt(1),it(i=>i?(console.log("Adding todo for user:",i.uid,"to list:",e),pt(Ar(zt(this.todosCollection,ln("listId","==",e)))).pipe(it(r=>{let s=r.size,a=new Date,l={title:t,completed:!1,listId:e,position:s,createdBy:i.uid,createdAt:a,updatedAt:a};return console.log("Creating todo with data:",l),pt(Oi(this.todosCollection,l))}))):(console.error("User not logged in"),nt(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=lt(this.firestore,`todos/${e.id}`),s=e,{id:i}=s,r=Ao(s,["id"]);return r.updatedAt=new Date,cn(t,r)}deleteTodo(e){let t=lt(this.firestore,`todos/${e}`);return wc(t)}updateTodoPosition(e){let t=ym(this.firestore);return e.forEach((i,r)=>{if(i.id){let s=lt(this.firestore,`todos/${i.id}`);t.update(s,{position:r,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return pt(Ar(zt(this.todosCollection,ln("listId","==",e)))).pipe(it(t=>{let i=ym(this.firestore);return t.docs.forEach(r=>{i.delete(r.ref)}),pt(i.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(Ne(xe),Ne(oi))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};function DS(n,e){n&1&&(u(0,"div",7)(1,"div",8),D(2,"div",9),u(3,"span",10),_(4,"Loading todo list..."),m()()())}function VS(n,e){if(n&1&&(u(0,"div",11)(1,"div",12),U(),u(2,"svg",13),D(3,"path",14),m(),Q(),u(4,"div")(5,"h3",15),_(6,"Error"),m(),u(7,"p",16),_(8),m()()()()),n&2){let t=M();T(8),ee(t.error)}}function NS(n,e){n&1&&(U(),u(0,"svg",24),D(1,"path",46),m())}function MS(n,e){n&1&&(U(),u(0,"svg",47),D(1,"path",48),m())}function OS(n,e){n&1&&(u(0,"div",49),U(),u(1,"svg",50),D(2,"path",51),m(),Q(),u(3,"h3",52),_(4,"No todos yet"),m(),u(5,"p",53),_(6,"Add your first todo item above to get started."),m()())}function LS(n,e){if(n&1){let t=Z();u(0,"div",56)(1,"input",57),L("change",function(){let r=j(t).$implicit,s=M(3);return $(s.toggleTodo(r))}),m(),u(2,"div",19)(3,"input",58),L("blur",function(r){let s=j(t).$implicit,a=M(3);return $(a.updateTodoText(s,r))}),m()(),u(4,"button",59),L("click",function(){let r=j(t).$implicit,s=M(3);return $(s.deleteTodo(r))}),U(),u(5,"svg",60),D(6,"path",61),m()()()}if(n&2){let t=e.$implicit;T(),V("checked",t.completed),T(2),ls("line-through",t.completed)("text-gray-500",t.completed),V("value",t.title)}}function FS(n,e){if(n&1&&(u(0,"div",54),G(1,LS,7,6,"div",55),m()),n&2){let t=M(2);T(),V("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function US(n,e){if(n&1){let t=Z();u(0,"div",17)(1,"div",18)(2,"div",19)(3,"h1",20),_(4),m(),u(5,"p",21),_(6),m()(),u(7,"div",22)(8,"button",23),L("click",function(){j(t);let r=M();return $(r.editList())}),U(),u(9,"svg",24),D(10,"path",25),m(),Q(),u(11,"span"),_(12,"Edit List"),m()(),u(13,"button",26),L("click",function(){j(t);let r=M();return $(r.shareList())}),U(),u(14,"svg",24),D(15,"path",27),m(),Q(),u(16,"span"),_(17,"Share"),m()()()(),u(18,"div",28)(19,"form",29),L("ngSubmit",function(){j(t);let r=M();return $(r.addTodo())}),u(20,"input",30),vn("ngModelChange",function(r){j(t);let s=M();return yn(s.newTodoText,r)||(s.newTodoText=r),$(r)}),m(),u(21,"button",31),G(22,NS,2,0,"svg",32)(23,MS,2,0,"svg",33),u(24,"span"),_(25),m()()()(),u(26,"div",28)(27,"div",34)(28,"h2",35),_(29,"Todo Items"),m(),u(30,"div",36)(31,"span"),_(32),m(),u(33,"div",37),D(34,"div",38),m()()(),G(35,OS,7,0,"div",39)(36,FS,2,2,"div",40),m(),u(37,"div",28)(38,"h3",41),_(39,"List Information"),m(),u(40,"div",42)(41,"div",43)(42,"span",44),_(43,"Created:"),m(),u(44,"span",45),_(45),re(46,"date"),m()(),u(47,"div",43)(48,"span",44),_(49,"Last Updated:"),m(),u(50,"span",45),_(51),re(52,"date"),m()(),u(53,"div",43)(54,"span",44),_(55,"Owner:"),m(),u(56,"span",45),_(57),m()(),u(58,"div",43)(59,"span",44),_(60,"Shared With:"),m(),u(61,"span",45),_(62),m()()()()()}if(n&2){let t=M();T(4),ee((t.todoList==null?null:t.todoList.title)||"Loading..."),T(2),ee((t.todoList==null?null:t.todoList.description)||"No description"),T(14),_n("ngModel",t.newTodoText),V("disabled",t.isAdding),T(),V("disabled",!t.newTodoText.trim()||t.isAdding),T(),V("ngIf",!t.isAdding),T(),V("ngIf",t.isAdding),T(2),ee(t.isAdding?"Adding...":"Add"),T(7),Un("",t.completedCount," of ",t.todos.length||0," completed"),T(2),Hf("width",t.completionPercentage,"%"),T(),V("ngIf",!t.todos.length),T(),V("ngIf",t.todos.length>0),T(9),ee(Kt(46,18,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),T(6),ee(Kt(52,21,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),T(6),ee(t.ownerName||"Loading..."),T(5),ce("",t.todoList.sharedWith.length||0," users")}}var jc=class n{constructor(e,t,i,r,s){this.route=e;this.router=t;this.todoListService=i;this.todoService=r;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";breadcrumbItems=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(bt(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:i=>{if(console.log("All lists loaded:",i),this.todoList=i.find(r=>r.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.updateBreadcrumbs(this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(r=>{if(console.log("User has access to list:",r),!r){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let a="Failed to load todos. ";s.code==="permission-denied"?a+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?a+="Please log in to view todos.":a+="Please try again later.",this.error=a,this.isLoading=!1}})}).catch(r=>{console.error("Error checking access:",r),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:i=>{console.error("Error loading todo list:",i),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}updateBreadcrumbs(e){this.breadcrumbItems=[{label:"Home",route:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{label:"Lists",route:"/lists",icon:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},{label:e.title,icon:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"}]}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(Ie(we({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let i=t.target.value.trim();!e.id||!i||i===e.title||this.todoService.updateTodo(Ie(we({},e),{title:i})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let i=Ie(we({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(i).then(()=>{this.todoList=i,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(bt(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)(z(Oo),z(Ue),z(oi),z(Bc),z(xe))};static \u0275cmp=ge({type:n,selectors:[["app-todo"]],decls:7,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300","mt-1","sm:mt-2"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),D(2,"app-breadcrumb",2),G(3,DS,5,0,"div",3)(4,VS,9,1,"div",4)(5,US,63,24,"div",5),u(6,"app-list-edit-share-modal",6),L("save",function(s){return i.handleSaveEdit(s)})("share",function(s){return i.handleShare(s)})("close",function(){return i.closeModal()}),m()()()),t&2&&(T(2),V("items",i.breadcrumbItems),T(),V("ngIf",i.isLoading),T(),V("ngIf",i.error),T(),V("ngIf",i.todoList&&!i.isLoading),T(),V("open",i.showEditShareModal)("list",i.todoList)("mode",i.modalMode))},dependencies:[_e,Yt,Pe,Bn,Nr,Dt,mt,Pt,Rt,Bi,Ui,Lr,ht],encapsulation:2})};var $c=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(z(xe),z(Ue))};static \u0275cmp=ge({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"h2"),_(2,"Sign in to Todo List"),m(),u(3,"p"),_(4,"Please sign in to access your personal todo list"),m(),u(5,"button",1),L("click",function(){return i.login()}),D(6,"img",2),_(7," Sign in with Google "),m()())},dependencies:[_e],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function BS(n,e){n&1&&(u(0,"div",13)(1,"div",14),D(2,"div",15),u(3,"span",16),_(4,"Loading your lists..."),m()()())}function jS(n,e){if(n&1){let t=Z();u(0,"div",13)(1,"div",17),U(),u(2,"svg",18),D(3,"path",19),m(),Q(),u(4,"h3",20),_(5,"No lists yet"),m(),u(6,"p",5),_(7,"Get started by creating your first todo list."),m(),u(8,"button",21),L("click",function(){j(t);let r=M();return $(r.openCreateModal())}),U(),u(9,"svg",7),D(10,"path",8),m(),Q(),u(11,"span"),_(12,"Create First List"),m()()()()}}function $S(n,e){if(n&1&&(u(0,"span",45),U(),u(1,"svg",40),D(2,"path",32),m(),_(3),m()),n&2){let t=M().$implicit;T(3),ce(" ",t.sharedWith.length," shared ")}}function qS(n,e){if(n&1){let t=Z();u(0,"div",24),L("click",function(){let r=j(t).$implicit,s=M(2);return $(s.openList(r))}),u(1,"div",25)(2,"div",26)(3,"h3",27),_(4),m(),u(5,"p",28),_(6),m()(),u(7,"div",29)(8,"button",30),L("click",function(r){let s=j(t).$implicit;return M(2).openShareModal(s),$(r.stopPropagation())}),U(),u(9,"svg",31),D(10,"path",32),m()(),Q(),u(11,"button",33),L("click",function(){let r=j(t).$implicit,s=M(2);return $(s.openEditModal(r))}),U(),u(12,"svg",31),D(13,"path",34),m()(),Q(),u(14,"button",35),L("click",function(r){let s=j(t).$implicit,a=M(2);return $(a.deleteList(s,r))}),U(),u(15,"svg",31),D(16,"path",36),m()()()(),Q(),u(17,"div",37)(18,"div",38)(19,"span",39),U(),u(20,"svg",40),D(21,"path",19),m(),_(22," View items "),m(),Q(),u(23,"span",39),U(),u(24,"svg",40),D(25,"path",41),m(),_(26),re(27,"date"),m(),G(28,$S,4,1,"span",42),m(),u(29,"svg",43),D(30,"path",44),m()()()}if(n&2){let t=e.$implicit,i=M(2);T(4),ce(" ",t.title," "),T(2),ce(" ",t.description||"No description"," "),T(20),ce(" ",Kt(27,4,i.getDateFromTimestamp(t.updatedAt),"short")," "),T(2),V("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function GS(n,e){if(n&1&&(u(0,"div",22),G(1,qS,31,7,"div",23),m()),n&2){let t=M();T(),V("ngForOf",t.todoLists)}}function zS(n,e){if(n&1){let t=Z();u(0,"div",46)(1,"div",47)(2,"div",48)(3,"h3",49),_(4,"Create New List"),m(),u(5,"button",50),L("click",function(){j(t);let r=M();return $(r.closeCreateModal())}),U(),u(6,"svg",51),D(7,"path",52),m()()(),Q(),u(8,"form",53),L("ngSubmit",function(){j(t);let r=M();return $(r.createNewList())}),u(9,"div")(10,"label",54),_(11," Title * "),m(),u(12,"input",55),vn("ngModelChange",function(r){j(t);let s=M();return yn(s.newListTitle,r)||(s.newListTitle=r),$(r)}),m()(),u(13,"div")(14,"label",56),_(15," Description (optional) "),m(),u(16,"textarea",57),vn("ngModelChange",function(r){j(t);let s=M();return yn(s.newListDescription,r)||(s.newListDescription=r),$(r)}),m()(),u(17,"div",58)(18,"button",59),L("click",function(){j(t);let r=M();return $(r.closeCreateModal())}),_(19," Cancel "),m(),u(20,"button",60),U(),u(21,"svg",7),D(22,"path",8),m(),Q(),u(23,"span"),_(24,"Create List"),m()()()()()()}if(n&2){let t=M();T(12),_n("ngModel",t.newListTitle),T(4),_n("ngModel",t.newListDescription),T(4),V("disabled",!t.newListTitle.trim())}}var qc=class n{constructor(e,t,i){this.todoListService=e;this.authService=t;this.router=i}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;breadcrumbItems=[{label:"Home",route:"/"},{label:"Todo Lists",route:void 0}];ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(bt(1)).subscribe(i=>{if(console.log("Current user:",i),!i){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:i=>{console.log("List created successfully:",i),this.todoLists.unshift(i),this.closeCreateModal()},error:i=>{console.error("Error creating list:",i),console.error("Error details:",{code:i.code,message:i.message,details:i.details});let r="Failed to create list. ";i.code==="permission-denied"?r+="You may not have permission to create lists. Please try logging out and back in.":i.code==="unauthenticated"?r+="Please log in to create lists.":r+="Please try again later.",alert(r)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let i=Ie(we({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(i).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(i=>i.id!==e.id)}).catch(i=>{console.error("Error deleting list:",i)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)(z(oi),z(xe),z(Ue))};static \u0275cmp=ge({type:n,selectors:[["app-lists"]],decls:19,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),D(2,"app-breadcrumb",2),u(3,"div",3)(4,"div")(5,"h1",4),_(6,"Todo Lists"),m(),u(7,"p",5),_(8,"Create and manage your todo lists"),m()(),u(9,"button",6),L("click",function(){return i.openCreateModal()}),U(),u(10,"svg",7),D(11,"path",8),m(),Q(),u(12,"span"),_(13,"New List"),m()()(),G(14,BS,5,0,"div",9)(15,jS,13,0,"div",9)(16,GS,2,1,"div",10),m(),G(17,zS,25,3,"div",11),u(18,"app-list-edit-share-modal",12),L("save",function(s){return i.handleSaveEdit(s)})("share",function(s){return i.handleShare(s)})("close",function(){return i.closeModal()}),m()()),t&2&&(T(2),V("items",i.breadcrumbItems),T(12),V("ngIf",i.isLoading),T(),V("ngIf",!i.isLoading&&i.todoLists.length===0),T(),V("ngIf",!i.isLoading&&i.todoLists.length>0),T(),V("ngIf",i.showCreateModal),T(),V("open",i.showEditShareModal)("list",i.modalList)("mode",i.modalMode))},dependencies:[_e,Yt,Pe,Bn,Nr,Dt,mt,Pt,Rt,co,Bi,Ui,Fo,Lr,ht],encapsulation:2})};function HS(n,e){if(n&1&&(st(0),u(1,"div",24)(2,"div")(3,"label",25),_(4,"Display Name"),m(),u(5,"div",26),_(6),m()(),u(7,"div")(8,"label",25),_(9,"Email"),m(),u(10,"div",26),_(11),m()(),u(12,"div")(13,"label",25),_(14,"User ID"),m(),u(15,"div",37),_(16),m()(),u(17,"div")(18,"label",25),_(19,"Account Created"),m(),u(20,"div",26),_(21),re(22,"date"),m()()(),ot()),n&2){let t=e.ngIf;T(6),ce(" ",(t==null?null:t.displayName)||"Not provided"," "),T(5),ce(" ",(t==null?null:t.email)||"Not provided"," "),T(5),ce(" ",(t==null?null:t.uid)||"Not available"," "),T(5),ce(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Kt(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}function WS(n,e){if(n&1&&(st(0),u(1,"div",24)(2,"div")(3,"label",25),_(4,"Email Verification"),m(),u(5,"div",38)(6,"div",39),_(7),m(),D(8,"div",40),m()(),u(9,"div")(10,"label",25),_(11,"Last Sign In"),m(),u(12,"div",26),_(13),re(14,"date"),m()(),u(15,"div")(16,"label",25),_(17,"Account Status"),m(),u(18,"div",38)(19,"div",39),_(20," Active "),m(),D(21,"div",41),m()(),u(22,"div")(23,"label",25),_(24,"Two-Factor Auth"),m(),u(25,"div",38)(26,"div",39),_(27," Not Enabled "),m(),D(28,"div",42),m()()(),ot()),n&2){let t=e.ngIf;T(7),ce(" ",t!=null&&t.emailVerified?"Verified":"Not Verified"," "),T(),Wf(t!=null&&t.emailVerified?"bg-green-500":"bg-yellow-500"),T(5),ce(" ",!(t==null||t.metadata==null)&&t.metadata.lastSignInTime?Kt(14,4,t.metadata.lastSignInTime,"medium"):"Not available"," ")}}var Gc=class n{authService=rt(xe);router=rt(Ue);user$=this.authService.user$;breadcrumbItems=[{label:"Home",route:"/"},{label:"Profile",route:void 0}];stats={todoLists:0,familyTrees:0,lastActivity:"Today",accountAge:"New"};preferences={theme:"System Default",language:"English",notifications:"Enabled",privacy:"Standard"};logout(){this.authService.signOut().then(()=>{this.router.navigate(["/"])})}goBack(){this.router.navigate(["/"])}exportData(){console.log("Export data functionality to be implemented"),alert("Data export functionality will be implemented soon!")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ge({type:n,selectors:[["app-profile"]],decls:95,vars:15,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6","sm:mb-8"],[1,"flex-1","min-w-0"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"mt-4","sm:mt-0","sm:ml-4"],[1,"btn-primary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"space-y-6"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"text-center","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"text-center","p-4","bg-green-50","dark:bg-green-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-center","p-4","bg-purple-50","dark:bg-purple-900/20","rounded-lg"],[1,"text-sm","font-semibold","text-purple-600","dark:text-purple-400"],[1,"text-center","p-4","bg-orange-50","dark:bg-orange-900/20","rounded-lg"],[1,"text-sm","font-semibold","text-orange-600","dark:text-orange-400"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"space-y-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-4"],[1,"text-md","font-medium","text-gray-900","dark:text-white","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["href","/lists",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/family-tree",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/quotes",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["href","/premier-league",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"],[1,"flex","items-center","space-x-2"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","flex-1"],[1,"w-3","h-3","rounded-full"],[1,"w-3","h-3","rounded-full","bg-green-500"],[1,"w-3","h-3","rounded-full","bg-gray-400"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),D(2,"app-breadcrumb",2),u(3,"div",3)(4,"div",4)(5,"h1",5),_(6,"Profile"),m(),u(7,"p",6),_(8,"Manage your account information"),m()(),u(9,"div",7)(10,"button",8),L("click",function(){return i.logout()}),_(11," Sign Out "),m()()(),u(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2",12),_(16,"Account Information"),m(),G(17,HS,23,7,"ng-container",13),re(18,"async"),m()(),u(19,"div",10)(20,"div",11)(21,"h2",12),_(22,"Account Status & Security"),m(),G(23,WS,29,7,"ng-container",13),re(24,"async"),m()(),u(25,"div",10)(26,"div",11)(27,"h2",12),_(28,"Usage Statistics"),m(),u(29,"div",14)(30,"div",15)(31,"div",16),_(32),m(),u(33,"div",17),_(34,"Todo Lists"),m()(),u(35,"div",18)(36,"div",19),_(37),m(),u(38,"div",17),_(39,"Family Trees"),m()(),u(40,"div",20)(41,"div",21),_(42),m(),u(43,"div",17),_(44,"Last Activity"),m()(),u(45,"div",22)(46,"div",23),_(47),m(),u(48,"div",17),_(49,"Account Age"),m()()()()(),u(50,"div",10)(51,"div",11)(52,"h2",12),_(53,"Preferences & Settings"),m(),u(54,"div",24)(55,"div")(56,"label",25),_(57,"Theme"),m(),u(58,"div",26),_(59),m()(),u(60,"div")(61,"label",25),_(62,"Language"),m(),u(63,"div",26),_(64),m()(),u(65,"div")(66,"label",25),_(67,"Notifications"),m(),u(68,"div",26),_(69),m()(),u(70,"div")(71,"label",25),_(72,"Privacy Level"),m(),u(73,"div",26),_(74),m()()()()(),u(75,"div",10)(76,"div",11)(77,"h2",12),_(78,"Account Management"),m(),u(79,"div",27)(80,"div",28)(81,"button",29),L("click",function(){return i.exportData()}),_(82," Export Data "),m()(),u(83,"div",30)(84,"h3",31),_(85,"Quick Links"),m(),u(86,"div",32)(87,"a",33),_(88,"View Todo Lists"),m(),u(89,"a",34),_(90,"View Family Trees"),m(),u(91,"a",35),_(92,"Browse Quotes"),m(),u(93,"a",36),_(94,"Premier League"),m()()()()()()()()()),t&2&&(T(2),V("items",i.breadcrumbItems),T(15),V("ngIf",de(18,11,i.user$)),T(6),V("ngIf",de(24,13,i.user$)),T(9),ee(i.stats.todoLists||0),T(5),ee(i.stats.familyTrees||0),T(5),ce(" ",i.stats.lastActivity||"Today"," "),T(5),ce(" ",i.stats.accountAge||"New"," "),T(12),ce(" ",i.preferences.theme||"System Default"," "),T(5),ce(" ",i.preferences.language||"English"," "),T(5),ce(" ",i.preferences.notifications||"Enabled"," "),T(5),ce(" ",i.preferences.privacy||"Standard"," "))},dependencies:[_e,Pe,dt,Bn,ht],encapsulation:2})};var ai=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(bt(1),Ge(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(Ne(xe),Ne(Ue))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};var zc=class n{constructor(e){this.fb=e;this.shareForm=this.fb.group({email:["",[ut.required,ut.email]]})}family=null;close=new He;share=new He;shareForm;onShare(){this.shareForm.valid&&(this.share.emit(this.shareForm.value.email),this.shareForm.reset())}static \u0275fac=function(t){return new(t||n)(z(Vr))};static \u0275cmp=ge({type:n,selectors:[["app-family-share-modal"]],inputs:{family:"family"},outputs:{close:"close",share:"share"},decls:14,vars:3,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","you@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),_(3),m(),u(4,"form",3),L("ngSubmit",function(){return i.onShare()}),u(5,"div",4)(6,"label",5),_(7,"Email address"),m(),D(8,"input",6),m(),u(9,"div",7)(10,"button",8),L("click",function(){return i.close.emit()}),_(11," Cancel "),m(),u(12,"button",9),_(13," Share "),m()()()()()),t&2&&(T(3),ce('Share "',i.family==null?null:i.family.name,'"'),T(),V("formGroup",i.shareForm),T(8),V("disabled",!i.shareForm.valid))},dependencies:[_e,Mr,Dt,mt,Pt,Rt,ji,$i],encapsulation:2})};var Hc=class n{constructor(e){this.fb=e;this.createForm=this.fb.group({name:["",ut.required],description:[""]})}close=new He;create=new He;createForm;onCreate(){this.createForm.valid&&this.create.emit(this.createForm.value)}static \u0275fac=function(t){return new(t||n)(z(Vr))};static \u0275cmp=ge({type:n,selectors:[["app-create-family-modal"]],outputs:{close:"close",create:"create"},decls:18,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),_(3,"Create a New Family"),m(),u(4,"form",3),L("ngSubmit",function(){return i.onCreate()}),u(5,"div",4)(6,"label",5),_(7,"Family Name"),m(),D(8,"input",6),m(),u(9,"div",4)(10,"label",7),_(11,"Description"),m(),D(12,"textarea",8),m(),u(13,"div",9)(14,"button",10),L("click",function(){return i.close.emit()}),_(15," Cancel "),m(),u(16,"button",11),_(17," Create Family "),m()()()()()),t&2&&(T(4),V("formGroup",i.createForm),T(12),V("disabled",!i.createForm.valid))},dependencies:[_e,Mr,Dt,mt,Pt,Rt,ji,$i],encapsulation:2})};var Fr=class n{constructor(e,t){this.firestore=e;this.auth=t;this.familyCollection=an(this.firestore,"families"),this.memberCollection=an(this.firestore,"members"),this.familiesCollection=an(this.firestore,"families")}familyCollection;memberCollection;familiesCollection;addFamily(e){return v(this,null,function*(){let t=yield ss(this.auth.user$);if(!t)throw new Error("User not logged in");let i={name:e.name,description:e.description||"",owner:t.uid,sharedWith:[],createdAt:hm(),status:"approved"};yield Oi(this.familyCollection,i)})}updateFamily(e,t){return v(this,null,function*(){let i=lt(this.firestore,"families",e);yield cn(i,t)})}removeSharedUser(e,t){return v(this,null,function*(){let i=lt(this.firestore,"families",e);yield cn(i,{sharedWith:Ry(t)})})}getFamilies(){return this.auth.user$.pipe(it(e=>{if(!e||!e.email)return nt([]);let t=zt(this.familyCollection,ln("owner","==",e.uid)),i=zt(this.familyCollection,ln("sharedWith","array-contains",e.email)),r=Cr(t,{idField:"id"}),s=Cr(i,{idField:"id"});return Of([r,s]).pipe(Ge(([a,l])=>[...a,...l].filter((g,w,E)=>w===E.findIndex(R=>R.id===g.id)).sort((g,w)=>g.name.localeCompare(w.name))))}))}shareFamily(e,t){return v(this,null,function*(){let i=lt(this.firestore,"families",e);yield cn(i,{sharedWith:Py(t)})})}getFamilyById(e){let t=lt(this.firestore,"families",e);return Uy(t,{idField:"id"})}getFamilyMembers(e){let t=an(this.firestore,"families",e,"members"),i=zt(t);return Cr(i,{idField:"id"})}addFamilyMember(e,t){return v(this,null,function*(){let i=yield ss(this.auth.user$);if(!i)throw new Error("User not logged in");let r=an(this.firestore,"families",e,"members"),s=Ie(we({},t),{familyId:e,status:"approved",createdBy:i.uid,createdAt:hm()});yield Oi(r,s)})}static \u0275fac=function(t){return new(t||n)(Ne(Gt),Ne(xe))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};function KS(n,e){n&1&&(u(0,"div",13)(1,"div",14),D(2,"div",15),u(3,"span",16),_(4,"Loading your families..."),m()()())}function QS(n,e){if(n&1){let t=Z();u(0,"div",13)(1,"div",18),U(),u(2,"svg",19),D(3,"path",20),m(),Q(),u(4,"h3",21),_(5,"No families yet"),m(),u(6,"p",5),_(7,"Get started by creating your first family tree."),m(),u(8,"button",22),L("click",function(){j(t);let r=M(2);return $(r.openCreateModal())}),U(),u(9,"svg",7),D(10,"path",8),m(),Q(),u(11,"span"),_(12,"Create First Family"),m()()()()}}function YS(n,e){if(n&1&&(u(0,"span",41),U(),u(1,"svg",37),D(2,"path",33),m(),_(3),m()),n&2){let t=M().$implicit;T(3),ce(" ",t.sharedWith.length," shared ")}}function JS(n,e){if(n&1){let t=Z();u(0,"div",25),L("click",function(){let r=j(t).$implicit,s=M(3);return $(s.openFamily(r))}),u(1,"div",26)(2,"div",27)(3,"h3",28),_(4),m(),u(5,"p",29),_(6),m()(),u(7,"div",30)(8,"button",31),L("click",function(r){let s=j(t).$implicit;return M(3).openShareModal(s),$(r.stopPropagation())}),U(),u(9,"svg",32),D(10,"path",33),m()()()(),Q(),u(11,"div",34)(12,"div",35)(13,"span",36),U(),u(14,"svg",37),D(15,"path",20),m(),_(16," View family "),m(),G(17,YS,4,1,"span",38),m(),u(18,"svg",39),D(19,"path",40),m()()()}if(n&2){let t=e.$implicit;T(4),ce(" ",t.name," "),T(2),ce(" ",t.description||"No description"," "),T(11),V("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function XS(n,e){if(n&1&&(u(0,"div",23),G(1,JS,20,3,"div",24),m()),n&2){let t=M().ngIf;T(),V("ngForOf",t)}}function ZS(n,e){if(n&1&&(st(0),G(1,QS,13,0,"div",9)(2,XS,2,1,"div",17),ot()),n&2){let t=e.ngIf;T(),V("ngIf",t.length===0),T(),V("ngIf",t.length>0)}}function eC(n,e){if(n&1){let t=Z();u(0,"app-create-family-modal",42),L("close",function(){j(t);let r=M();return $(r.closeCreateModal())})("create",function(r){j(t);let s=M();return $(s.handleCreateFamily(r))}),m()}}function tC(n,e){if(n&1){let t=Z();u(0,"app-family-share-modal",43),L("close",function(){j(t);let r=M();return $(r.closeShareModal())})("share",function(r){j(t);let s=M();return $(s.handleShare(r))}),m()}if(n&2){let t=M();V("family",t.selectedFamily)}}var Wc=class n{constructor(e,t){this.familyTreeService=e;this.router=t;this.families$=this.familyTreeService.getFamilies()}families$;isShareModalOpen=!1;selectedFamily=null;isCreateModalOpen=!1;breadcrumbItems=[{label:"Home",route:"/"},{label:"Family Trees",route:void 0}];openFamily(e){this.router.navigate(["/family-tree",e.id])}openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}handleCreateFamily(e){return v(this,null,function*(){yield this.familyTreeService.addFamily(e),this.closeCreateModal()})}openShareModal(e){this.selectedFamily=e,this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1,this.selectedFamily=null}handleShare(e){this.selectedFamily&&this.familyTreeService.shareFamily(this.selectedFamily.id,e),this.closeShareModal()}static \u0275fac=function(t){return new(t||n)(z(Fr),z(Ue))};static \u0275cmp=ge({type:n,selectors:[["app-family-tree"]],decls:20,vars:9,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],[4,"ngIf"],[3,"close","create",4,"ngIf"],[3,"family","close","share",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[3,"close","create"],[3,"close","share","family"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),D(2,"app-breadcrumb",2),u(3,"div",3)(4,"div")(5,"h1",4),_(6,"Family Trees"),m(),u(7,"p",5),_(8,"Create and manage your family trees"),m()(),u(9,"button",6),L("click",function(){return i.openCreateModal()}),U(),u(10,"svg",7),D(11,"path",8),m(),Q(),u(12,"span"),_(13,"Create Family"),m()()(),G(14,KS,5,0,"div",9),re(15,"async"),G(16,ZS,3,2,"ng-container",10),re(17,"async"),m()(),G(18,eC,1,0,"app-create-family-modal",11)(19,tC,1,1,"app-family-share-modal",12)),t&2&&(T(2),V("items",i.breadcrumbItems),T(12),V("ngIf",de(15,5,i.families$)===null),T(2),V("ngIf",de(17,7,i.families$)),T(2),V("ngIf",i.isCreateModalOpen),T(),V("ngIf",i.isShareModalOpen))},dependencies:[_e,Yt,Pe,dt,zc,Hc,ht],encapsulation:2})};function nC(n,e){n&1&&(u(0,"div",8)(1,"div",9),D(2,"div",10),u(3,"span",11),_(4,"Loading family details..."),m()()())}function iC(n,e){if(n&1){let t=Z();u(0,"div",8)(1,"div",13),U(),u(2,"svg",14),D(3,"path",15),m(),Q(),u(4,"h3",16),_(5,"Family Not Found"),m(),u(6,"p",17),_(7,"The family you're looking for doesn't exist or you don't have access to it."),m(),u(8,"button",18),L("click",function(){j(t);let r=M(2);return $(r.goBack())}),U(),u(9,"svg",19),D(10,"path",20),m(),Q(),u(11,"span"),_(12,"Go Back"),m()()()()}}function rC(n,e){if(n&1&&(u(0,"p",17),_(1),m()),n&2){let t=M(3).ngIf;T(),ee(t.description)}}function sC(n,e){if(n&1&&(st(0),u(1,"h1",47),_(2),m(),G(3,rC,2,1,"p",48),ot()),n&2){let t=M(2).ngIf;T(2),ee(t.name),T(),V("ngIf",t.description)}}function oC(n,e){if(n&1){let t=Z();st(0),u(1,"form",49),L("ngSubmit",function(){j(t);let r=M(3);return $(r.saveChanges())}),u(2,"div")(3,"label",50),_(4,"Family Name"),m(),D(5,"input",51),m(),u(6,"div")(7,"label",52),_(8,"Description"),m(),D(9,"textarea",53),m()(),ot()}if(n&2){let t=M(3);T(),V("formGroup",t.editForm)}}function aC(n,e){if(n&1){let t=Z();st(0),u(1,"button",54),L("click",function(){j(t);let r=M(3);return $(r.startEditing())}),U(),u(2,"svg",19),D(3,"path",55),m(),Q(),u(4,"span"),_(5,"Edit"),m()(),ot()}}function cC(n,e){if(n&1){let t=Z();st(0),u(1,"button",56),U(),u(2,"svg",19),D(3,"path",57),m(),Q(),u(4,"span"),_(5,"Save"),m()(),u(6,"button",58),L("click",function(){j(t);let r=M(3);return $(r.cancelEditing())}),U(),u(7,"svg",19),D(8,"path",59),m(),Q(),u(9,"span"),_(10,"Cancel"),m()(),ot()}if(n&2){let t=M(3);T(),V("disabled",!t.editForm.valid||!t.editForm.dirty)}}function lC(n,e){if(n&1&&(u(0,"span",63),U(),u(1,"svg",64),D(2,"path",65),m(),_(3),m()),n&2){let t=e.$implicit;T(3),ce(" ",t," ")}}function uC(n,e){if(n&1&&(u(0,"div")(1,"div",61),G(2,lC,4,1,"span",62),m()()),n&2){let t=M(3).ngIf;T(2),V("ngForOf",t.sharedWith)}}function dC(n,e){n&1&&(u(0,"p",66),_(1,"This family isn't shared with anyone."),m())}function hC(n,e){if(n&1&&(u(0,"div",60),G(1,uC,3,1,"div",46)(2,dC,2,0,"ng-template",null,1,Qt),m()),n&2){let t=Wt(3),i=M(2).ngIf;T(),V("ngIf",i.sharedWith&&i.sharedWith.length>0)("ngIfElse",t)}}function mC(n,e){if(n&1){let t=Z();u(0,"div",73)(1,"span",74),_(2),m(),u(3,"button",75),L("click",function(){let r=j(t).$implicit,s=M(5);return $(s.removeSharedUser(r))}),U(),u(4,"svg",19),D(5,"path",76),m(),Q(),u(6,"span"),_(7,"Remove"),m()()()}if(n&2){let t=e.$implicit;T(2),ee(t)}}function fC(n,e){if(n&1&&(u(0,"div",60),G(1,mC,8,1,"div",72),m()),n&2){let t=M(3).ngIf;T(),V("ngForOf",t.sharedWith)}}function pC(n,e){if(n&1){let t=Z();u(0,"div",67),G(1,fC,2,1,"div",27),u(2,"form",68),L("ngSubmit",function(){j(t);let r=M(3);return $(r.addSharedUser())}),u(3,"div",69)(4,"label",70),_(5,"Add user by email"),m(),D(6,"input",71),m(),u(7,"button",44),U(),u(8,"svg",19),D(9,"path",45),m(),Q(),u(10,"span"),_(11,"Add"),m()()()()}if(n&2){let t=M(2).ngIf,i=M();T(),V("ngIf",t.sharedWith&&t.sharedWith.length>0),T(),V("formGroup",i.addShareUserForm),T(5),V("disabled",!i.addShareUserForm.valid)}}function gC(n,e){if(n&1&&(u(0,"div",80)(1,"h4",81),_(2),m(),u(3,"div",82)(4,"p",83),U(),u(5,"svg",84),D(6,"path",65),m(),_(7),re(8,"titlecase"),m(),Q(),u(9,"p",83),U(),u(10,"svg",84),D(11,"path",85),m(),_(12),re(13,"date"),m()()()),n&2){let t=e.$implicit;T(2),Un("",t.firstName," ",t.lastName),T(5),ce(" ",de(8,4,t.gender)," "),T(5),ce(" ",Kt(13,6,t.dateOfBirth.toDate(),"longDate")," ")}}function _C(n,e){if(n&1&&(u(0,"div",78),G(1,gC,14,9,"div",79),m()),n&2){let t=M().ngIf;T(),V("ngForOf",t)}}function yC(n,e){n&1&&(u(0,"div",86),U(),u(1,"svg",14),D(2,"path",87),m(),Q(),u(3,"h3",16),_(4,"No members yet"),m(),u(5,"p",17),_(6,"Add your first family member above to get started."),m()())}function vC(n,e){if(n&1&&(u(0,"div"),G(1,_C,2,1,"div",77)(2,yC,7,0,"ng-template",null,2,Qt),m()),n&2){let t=e.ngIf,i=Wt(3);T(),V("ngIf",t.length>0)("ngIfElse",i)}}function wC(n,e){n&1&&(u(0,"div",86),D(1,"div",88),u(2,"p",89),_(3,"Loading members..."),m()())}function EC(n,e){if(n&1){let t=Z();u(0,"div",21)(1,"div",22)(2,"div",23),G(3,sC,4,2,"ng-container",7)(4,oC,10,1,"ng-container",7),m(),u(5,"div",24),G(6,aC,6,0,"ng-container",7),re(7,"async"),G(8,cC,11,1,"ng-container",7),m()(),u(9,"div",25)(10,"h2",26),_(11,"Shared With"),m(),G(12,hC,4,2,"div",27)(13,pC,12,3,"div",28),m(),u(14,"div",25)(15,"h2",26),_(16,"Family Members"),m(),u(17,"div",29)(18,"h3",30),_(19,"Add New Member"),m(),u(20,"form",31),L("ngSubmit",function(){j(t);let r=M(2);return $(r.addFamilyMember())}),u(21,"div",32)(22,"div")(23,"label",33),_(24,"First Name"),m(),D(25,"input",34),m(),u(26,"div")(27,"label",35),_(28,"Last Name"),m(),D(29,"input",36),m(),u(30,"div")(31,"label",37),_(32,"Gender"),m(),u(33,"select",38)(34,"option",39),_(35,"Male"),m(),u(36,"option",40),_(37,"Female"),m(),u(38,"option",41),_(39,"Other"),m()()(),u(40,"div")(41,"label",42),_(42,"Date of Birth"),m(),D(43,"input",43),m()(),u(44,"div")(45,"button",44),U(),u(46,"svg",19),D(47,"path",45),m(),Q(),u(48,"span"),_(49,"Add Member"),m()()()()(),G(50,vC,4,2,"div",46),re(51,"async"),G(52,wC,4,0,"ng-template",null,0,Qt),m()()}if(n&2){let t,i=Wt(53),r=M().ngIf,s=M();T(3),V("ngIf",!s.isEditing),T(),V("ngIf",s.isEditing),T(2),V("ngIf",!s.isEditing&&r.owner===((t=de(7,10,s.auth.user$))==null?null:t.uid)),T(2),V("ngIf",s.isEditing),T(4),V("ngIf",!s.isEditing),T(),V("ngIf",s.isEditing),T(7),V("formGroup",s.addMemberForm),T(25),V("disabled",!s.addMemberForm.valid),T(5),V("ngIf",de(51,12,s.members$))("ngIfElse",i)}}function IC(n,e){if(n&1&&(st(0),G(1,iC,13,0,"div",6)(2,EC,54,14,"div",12),ot()),n&2){let t=e.ngIf;T(),V("ngIf",!t),T(),V("ngIf",t)}}var Kc=class n{constructor(e,t,i,r,s){this.route=e;this.router=t;this.familyTreeService=i;this.fb=r;this.auth=s;this.editForm=this.fb.group({name:["",ut.required],description:[""]}),this.addShareUserForm=this.fb.group({email:["",[ut.required,ut.email]]}),this.addMemberForm=this.fb.group({firstName:["",ut.required],lastName:["",ut.required],gender:["male",ut.required],dateOfBirth:["",ut.required]})}family$;members$;familyId=null;isEditing=!1;editForm;addShareUserForm;addMemberForm;breadcrumbItems=[];currentFamily;ngOnInit(){this.family$=this.route.paramMap.pipe(it(e=>{let t=e.get("familyId");return this.familyId=t,t?(this.members$=this.familyTreeService.getFamilyMembers(t),this.familyTreeService.getFamilyById(t)):nt(void 0)}),Uf(e=>{this.currentFamily=e,e&&(this.editForm.patchValue({name:e.name,description:e.description}),this.updateBreadcrumbs(e))}))}updateBreadcrumbs(e){this.breadcrumbItems=[{label:"Home",route:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{label:"Family Trees",route:"/family-tree",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"},{label:e.name,icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"}]}goBack(){this.router.navigate(["/family-tree"])}startEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.currentFamily&&this.editForm.patchValue({name:this.currentFamily.name,description:this.currentFamily.description})}saveChanges(){return v(this,null,function*(){this.editForm.valid&&this.familyId&&(yield this.familyTreeService.updateFamily(this.familyId,this.editForm.value),this.isEditing=!1)})}addFamilyMember(){return v(this,null,function*(){if(this.addMemberForm.valid&&this.familyId)try{let e=this.addMemberForm.value,t=new Date(e.dateOfBirth);e.dateOfBirth=Fe.fromDate(t),yield this.familyTreeService.addFamilyMember(this.familyId,e),this.addMemberForm.reset({gender:"male"})}catch(e){console.error("Error adding family member:",e)}})}addSharedUser(){return v(this,null,function*(){if(this.addShareUserForm.valid&&this.familyId){let{email:e}=this.addShareUserForm.value;yield this.familyTreeService.shareFamily(this.familyId,e),this.addShareUserForm.reset()}})}removeSharedUser(e){return v(this,null,function*(){this.familyId&&(yield this.familyTreeService.removeSharedUser(this.familyId,e))})}static \u0275fac=function(t){return new(t||n)(z(Oo),z(Ue),z(Fr),z(Vr),z(xe))};static \u0275cmp=ge({type:n,selectors:[["app-family-detail"]],decls:7,vars:7,consts:[["loadingMembers",""],["noSharedUsers",""],["noMembers",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],["class","card text-center",4,"ngIf"],[4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","space-y-6 sm:space-y-8",4,"ngIf"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"space-y-6","sm:space-y-8"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","mt-4","sm:mt-0","sm:ml-4"],[1,"card"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],["class","space-y-2",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-800","p-4","rounded-lg","mb-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","firstName","formControlName","firstName",1,"input-field","w-full"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","lastName","formControlName","lastName",1,"input-field","w-full"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","gender","formControlName","gender",1,"input-field","w-full"],["value","male"],["value","female"],["value","other"],["for","dateOfBirth",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","date","id","dateOfBirth","formControlName","dateOfBirth",1,"input-field","w-full"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[4,"ngIf","ngIfElse"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],["class","mt-1 sm:mt-2 text-sm text-gray-600 dark:text-gray-300",4,"ngIf"],["id","editFamilyForm",1,"space-y-4",3,"ngSubmit","formGroup"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","familyName","formControlName","name","placeholder","Enter family name",1,"input-field","w-full"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","familyDescription","formControlName","description","rows","3","placeholder","Enter family description",1,"input-field","w-full"],[1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","submit","form","editFamilyForm",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-2"],[1,"flex","flex-wrap","gap-2"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-gray-500","dark:text-gray-400"],[1,"space-y-4"],[1,"flex","items-end","space-x-2",3,"ngSubmit","formGroup"],[1,"flex-1"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","formControlName","email","placeholder","user@example.com",1,"input-field","w-full"],["class","flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","bg-gray-50","dark:bg-gray-700","p-3","rounded-lg"],[1,"text-sm","text-gray-900","dark:text-gray-200"],[1,"text-sm","text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","font-medium","flex","items-center","space-x-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf"],[1,"bg-gray-50","dark:bg-gray-700","rounded-lg","p-4","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],[1,"font-semibold","text-base","sm:text-lg","text-gray-900","dark:text-white","mb-2"],[1,"space-y-1","text-sm","text-gray-600","dark:text-gray-400"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-center","py-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary-600","mx-auto"],[1,"mt-2","text-sm","text-gray-600","dark:text-gray-400"]],template:function(t,i){t&1&&(u(0,"div",3)(1,"div",4),D(2,"app-breadcrumb",5),G(3,nC,5,0,"div",6),re(4,"async"),G(5,IC,3,2,"ng-container",7),re(6,"async"),m()()),t&2&&(T(2),V("items",i.breadcrumbItems),T(),V("ngIf",de(4,3,i.family$)===null),T(2),V("ngIf",de(6,5,i.family$)))},dependencies:[_e,Yt,Pe,dt,ep,Bn,Mr,Dt,vv,Ev,mt,Uc,Pt,Rt,ji,$i,ht],encapsulation:2})};var lo={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"},premierLeague:{apiKey:"37bddc9782msh83111e8c0e4211ap1438fejsnd95d2f8667ef",apiHost:"premier-league-standings1.p.rapidapi.com"}};var Ur=class n{constructor(e){this.http=e}apiUrl="https://premier-league-standings1.p.rapidapi.com/";getStandings(){let e=new np().set("X-RapidAPI-Key",lo.premierLeague.apiKey).set("X-RapidAPI-Host",lo.premierLeague.apiHost);return this.http.get(this.apiUrl,{headers:e})}static \u0275fac=function(t){return new(t||n)(Ne(Qi))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};var TC=(n,e,t,i,r,s)=>({"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":n,"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":e,"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":i,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":r,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s}),xC=(n,e,t)=>({"text-green-600 dark:text-green-400":n,"text-red-600 dark:text-red-400":e,"text-gray-600 dark:text-gray-400":t});function SC(n,e){if(n&1){let t=Z();u(0,"tr",30)(1,"td",31)(2,"span",32),_(3),m()(),u(4,"th",33)(5,"div",24)(6,"img",34),L("error",function(r){j(t);let s=M(3);return $(s.onImageError(r))}),m(),u(7,"div")(8,"div",35),_(9),m(),u(10,"div",36),_(11),m()()()(),u(12,"td",37),_(13),m(),u(14,"td",38),_(15),m(),u(16,"td",39),_(17),m(),u(18,"td",40),_(19),m(),u(20,"td",37),_(21),m(),u(22,"td",37),_(23),m(),u(24,"td",41),_(25),m(),u(26,"td",42),_(27),m()()}if(n&2){let t=e.$implicit,i=e.index;T(2),V("ngClass",Qf(16,TC,i===0,i===1,i===2,i>=17,i>=3&&i<=6,i>=7&&i<=16)),T(),ce(" ",t.stats.rank," "),T(3),V("src",t.team.logo,$f)("alt",t.team.name),T(3),ee(t.team.name),T(2),ee(t.team.abbreviation),T(2),ee(t.stats.gamesPlayed),T(2),ee(t.stats.wins),T(2),ee(t.stats.ties),T(2),ee(t.stats.losses),T(2),ee(t.stats.goalsFor),T(2),ee(t.stats.goalsAgainst),T(),V("ngClass",Kf(23,xC,t.stats.goalDifference>0,t.stats.goalDifference<0,t.stats.goalDifference===0)),T(),Un(" ",t.stats.goalDifference>0?"+":"","",t.stats.goalDifference," "),T(2),ee(t.stats.points)}}function CC(n,e){if(n&1&&(u(0,"div")(1,"div",14)(2,"table",15)(3,"thead",16)(4,"tr")(5,"th",17),_(6,"Pos"),m(),u(7,"th",18),_(8,"Club"),m(),u(9,"th",17),_(10,"P"),m(),u(11,"th",17),_(12,"W"),m(),u(13,"th",17),_(14,"D"),m(),u(15,"th",17),_(16,"L"),m(),u(17,"th",17),_(18,"GF"),m(),u(19,"th",17),_(20,"GA"),m(),u(21,"th",17),_(22,"GD"),m(),u(23,"th",19),_(24,"Pts"),m()()(),u(25,"tbody"),G(26,SC,28,27,"tr",20),m()()(),u(27,"div",21)(28,"h3",22),_(29,"Legend"),m(),u(30,"div",23)(31,"div",24),D(32,"span",25),u(33,"span",26),_(34,"Champions League"),m()(),u(35,"div",24),D(36,"span",27),u(37,"span",26),_(38,"Europa League"),m()(),u(39,"div",24),D(40,"span",28),u(41,"span",26),_(42,"Mid Table"),m()(),u(43,"div",24),D(44,"span",29),u(45,"span",26),_(46,"Relegation"),m()()()()()),n&2){let t=M().ngIf;T(26),V("ngForOf",t)}}function AC(n,e){n&1&&(u(0,"div",43)(1,"div",44),U(),u(2,"svg",45),D(3,"path",46),m()(),Q(),u(4,"h3",47),_(5,"No Data Available"),m(),u(6,"p",26),_(7,"Premier League standings are not currently available."),m()())}function kC(n,e){if(n&1&&(u(0,"div"),G(1,CC,47,1,"div",13)(2,AC,8,0,"ng-template",null,1,Qt),m()),n&2){let t=e.ngIf,i=Wt(3);T(),V("ngIf",t&&t.length>0)("ngIfElse",i)}}function PC(n,e){if(n&1){let t=Z();u(0,"div",43)(1,"div",49),U(),u(2,"svg",50),D(3,"path",51),m()(),Q(),u(4,"h3",47),_(5,"Error Loading Data"),m(),u(6,"p",52),_(7,"Unable to load Premier League standings. Please try again later."),m(),u(8,"button",53),L("click",function(){j(t);let r=M(2);return $(r.loadStandings())}),U(),u(9,"svg",54),D(10,"path",11),m(),_(11," Retry "),m()()}}function RC(n,e){n&1&&(u(0,"div",43),D(1,"div",55),u(2,"h3",47),_(3,"Loading Standings"),m(),u(4,"p",26),_(5,"Fetching the latest Premier League data..."),m()())}function DC(n,e){if(n&1&&G(0,PC,12,0,"div",48)(1,RC,6,0,"ng-template",null,2,Qt),n&2){let t=Wt(2),i=M();V("ngIf",i.error)("ngIfElse",t)}}var Qc=class n{constructor(e){this.premierLeagueService=e}standings$;error;breadcrumbItems=[{label:"Home",route:"/"},{label:"Premier League",route:void 0}];ngOnInit(){this.loadStandings()}loadStandings(){this.error=null,this.standings$=this.premierLeagueService.getStandings().pipe(Ro(e=>(this.error=e,console.error(e),nt(null))))}onImageError(e){e.target.style.display="none"}static \u0275fac=function(t){return new(t||n)(z(Ur))};static \u0275cmp=ge({type:n,selectors:[["app-premier-league"]],features:[Mt([Ur])],decls:19,vars:5,consts:[["loadingOrError",""],["noData",""],["loading",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[3,"items"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"card"],[4,"ngIf","ngIfElse"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-4","py-3","text-center"],["scope","col",1,"px-4","py-3"],["scope","col",1,"px-4","py-3","text-center","font-semibold"],["class","border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"mt-6","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white","mb-3"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","text-xs"],[1,"flex","items-center"],[1,"w-3","h-3","bg-yellow-100","border","border-yellow-300","rounded-full","mr-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"w-3","h-3","bg-blue-100","border","border-blue-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-green-100","border","border-green-300","rounded-full","mr-2"],[1,"w-3","h-3","bg-red-100","border","border-red-300","rounded-full","mr-2"],[1,"border-b","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-150"],[1,"px-4","py-4","text-center","font-medium"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-semibold",3,"ngClass"],["scope","row",1,"px-4","py-4","font-medium","text-gray-900","dark:text-white"],[1,"w-8","h-8","mr-3","rounded-full","object-cover",3,"error","src","alt"],[1,"font-semibold"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"px-4","py-4","text-center"],[1,"px-4","py-4","text-center","text-green-600","dark:text-green-400","font-medium"],[1,"px-4","py-4","text-center","text-gray-600","dark:text-gray-400"],[1,"px-4","py-4","text-center","text-red-600","dark:text-red-400","font-medium"],[1,"px-4","py-4","text-center","font-medium",3,"ngClass"],[1,"px-4","py-4","text-center","font-bold","text-lg"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","dark:bg-gray-700","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-2"],["class","text-center py-12",4,"ngIf","ngIfElse"],[1,"w-16","h-16","bg-red-100","dark:bg-red-900","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-600","dark:text-gray-400","mb-4"],[1,"btn-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600","mx-auto","mb-4"]],template:function(t,i){if(t&1){let r=Z();u(0,"div",3)(1,"div",4),D(2,"app-breadcrumb",5),u(3,"div",6)(4,"div")(5,"h1",7),_(6,"Premier League Standings"),m(),u(7,"p",8),_(8,"View the current Premier League standings and team statistics"),m()(),u(9,"button",9),L("click",function(){return j(r),$(i.loadStandings())}),U(),u(10,"svg",10),D(11,"path",11),m(),Q(),u(12,"span"),_(13,"Refresh"),m()()(),u(14,"div",12),G(15,kC,4,2,"div",13),re(16,"async"),G(17,DC,3,2,"ng-template",null,0,Qt),m()()()}if(t&2){let r=Wt(18);T(2),V("items",i.breadcrumbItems),T(13),V("ngIf",de(16,3,i.standings$))("ngIfElse",r)}},dependencies:[_e,Zf,Yt,Pe,dt,rp,ht],encapsulation:2})};var Tv=[{path:"",component:Ic},{path:"ip-lookup",component:Tc},{path:"login",component:$c},{path:"profile",component:Gc,canActivate:[ai]},{path:"lists",component:qc,canActivate:[ai]},{path:"todo/:id",component:jc,canActivate:[ai]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-2WVBNWEN.js").then(n=>n.QuotesComponent)},{path:"family-tree",component:Wc,canActivate:[ai]},{path:"family-tree/:familyId",component:Kc,canActivate:[ai]},{path:"premier-league",component:Qc}];var xv={providers:[Yf({eventCoalescing:!0}),cp(Tv),ip(),$p(()=>qp(lo.firebaseConfig)),Fy(()=>By()),Gg(()=>Hg())]};var Yc=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new ko(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){Ff(this.checkInterval).pipe(it(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new Nt(e=>{let t=document.querySelector('script[src*="main"]');if(t){let i=this.extractTimestampFromUrl(t.src),r=localStorage.getItem("app-version-timestamp");r&&r!==i&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",i)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(Ne(Qi))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};function NC(n,e){if(n&1){let t=Z();u(0,"div",1)(1,"div",2)(2,"div",3),_(3,"\u{1F504}"),m(),u(4,"div",4)(5,"h4"),_(6,"New version available!"),m(),u(7,"p"),_(8,"A new version of the app is ready. Refresh to get the latest features."),m()(),u(9,"div",5)(10,"button",6),L("click",function(){j(t);let r=M();return $(r.update())}),_(11,"Update Now"),m(),u(12,"button",7),L("click",function(){j(t);let r=M();return $(r.dismiss())}),_(13,"Later"),m()()()()}}var Jc=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(z(Yc))};static \u0275cmp=ge({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,i){t&1&&(G(0,NC,14,0,"div",0),re(1,"async")),t&2&&V("ngIf",de(1,1,i.updateAvailable$))},dependencies:[_e,Pe,dt],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Xc=class n{themeSubject=new ko("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=e||(t?"dark":"light");this.setTheme(i)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sv=()=>({exact:!0});function OC(n,e){n&1&&(u(0,"a",25),U(),u(1,"svg",26),D(2,"path",27),m(),Q(),u(3,"span"),_(4,"Family Tree"),m()())}function LC(n,e){if(n&1){let t=Z();u(0,"a",34),L("click",function(){j(t);let r=M(3);return $(r.closeMoreMenu())}),_(1,"Profile"),m()}}function FC(n,e){if(n&1){let t=Z();u(0,"div",28)(1,"a",29),L("click",function(){j(t);let r=M(2);return $(r.closeMoreMenu())}),_(2,"Lists"),m(),u(3,"a",30),L("click",function(){j(t);let r=M(2);return $(r.closeMoreMenu())}),_(4,"IP Lookup"),m(),u(5,"a",31),L("click",function(){j(t);let r=M(2);return $(r.closeMoreMenu())}),_(6,"Quotes"),m(),G(7,LC,2,0,"a",32),re(8,"async"),u(9,"a",33),L("click",function(){j(t);let r=M(2);return $(r.closeMoreMenu())}),_(10,"Premier League"),m()()}if(n&2){let t=M(2);T(7),V("ngIf",de(8,1,t.user$))}}function UC(n,e){if(n&1){let t=Z();st(0),u(1,"a",16),U(),u(2,"svg",17),D(3,"path",18),m(),Q(),u(4,"span"),_(5,"Home"),m()(),G(6,OC,5,0,"a",19),re(7,"async"),u(8,"div",20)(9,"button",21),L("click",function(r){j(t);let s=M();return $(s.toggleMoreMenu(r))}),u(10,"span"),_(11,"More"),m(),U(),u(12,"svg",22),D(13,"path",23),m()(),G(14,FC,11,3,"div",24),m(),ot()}if(n&2){let t=M();T(),V("routerLinkActiveOptions",Al(5,Sv)),T(5),V("ngIf",de(7,3,t.user$)),T(8),V("ngIf",t.moreMenuOpen)}}function BC(n,e){n&1&&(U(),u(0,"svg",35),D(1,"path",36),m())}function jC(n,e){n&1&&(U(),u(0,"svg",35),D(1,"path",37),m())}function $C(n,e){if(n&1){let t=Z();u(0,"button",38),L("click",function(){j(t);let r=M();return $(r.login())}),U(),u(1,"svg",17),D(2,"path",39),m(),Q(),u(3,"span"),_(4,"Login"),m()()}}function qC(n,e){if(n&1){let t=Z();u(0,"button",40),L("click",function(){j(t);let r=M();return $(r.logout())}),U(),u(1,"svg",17),D(2,"path",41),m(),Q(),u(3,"span"),_(4,"Sign Out"),m()()}}function GC(n,e){n&1&&(U(),u(0,"svg",42),D(1,"path",43),m())}function zC(n,e){n&1&&(U(),u(0,"svg",42),D(1,"path",44),m())}function HC(n,e){if(n&1){let t=Z();u(0,"a",62),L("click",function(){j(t);let r=M(2);return $(r.closeMobileMenu())}),U(),u(1,"svg",26),D(2,"path",27),m(),Q(),u(3,"span"),_(4,"Family Tree"),m()()}}function WC(n,e){if(n&1){let t=Z();u(0,"a",63),L("click",function(){j(t);let r=M(2);return $(r.closeMobileMenu())}),U(),u(1,"svg",17),D(2,"path",64),m(),Q(),u(3,"span"),_(4,"Profile"),m()()}}function KC(n,e){n&1&&(U(),u(0,"svg",22),D(1,"path",36),m())}function QC(n,e){n&1&&(U(),u(0,"svg",22),D(1,"path",37),m())}function YC(n,e){if(n&1){let t=Z();u(0,"button",65),L("click",function(){j(t);let r=M(2);return r.login(),$(r.closeMobileMenu())}),U(),u(1,"svg",17),D(2,"path",39),m(),Q(),u(3,"span"),_(4,"Login"),m()()}}function JC(n,e){if(n&1){let t=Z();u(0,"button",66),L("click",function(){j(t);let r=M(2);return r.logout(),$(r.closeMobileMenu())}),U(),u(1,"svg",17),D(2,"path",41),m(),Q(),u(3,"span"),_(4,"Sign Out"),m()()}}function XC(n,e){if(n&1){let t=Z();u(0,"div",45)(1,"nav",46)(2,"a",47),L("click",function(){j(t);let r=M();return $(r.closeMobileMenu())}),U(),u(3,"svg",17),D(4,"path",18),m(),Q(),u(5,"span"),_(6,"Home"),m()(),u(7,"a",48),L("click",function(){j(t);let r=M();return $(r.closeMobileMenu())}),U(),u(8,"svg",17),D(9,"path",49),m(),Q(),u(10,"span"),_(11,"Lists"),m()(),u(12,"a",50),L("click",function(){j(t);let r=M();return $(r.closeMobileMenu())}),U(),u(13,"svg",17),D(14,"path",51),m(),Q(),u(15,"span"),_(16,"IP Lookup"),m()(),u(17,"a",52),L("click",function(){j(t);let r=M();return $(r.closeMobileMenu())}),U(),u(18,"svg",17),D(19,"path",53),m(),Q(),u(20,"span"),_(21,"Quotes"),m()(),G(22,HC,5,0,"a",54),re(23,"async"),u(24,"a",55),L("click",function(){j(t);let r=M();return $(r.closeMobileMenu())}),U(),u(25,"svg",17),D(26,"path",56),m(),Q(),u(27,"span"),_(28,"Premier League"),m()(),G(29,WC,5,0,"a",57),re(30,"async"),u(31,"button",58),L("click",function(){j(t);let r=M();return $(r.toggleTheme())}),G(32,KC,2,0,"svg",59),re(33,"async"),G(34,QC,2,0,"svg",59),re(35,"async"),u(36,"span"),_(37),re(38,"async"),m()(),G(39,YC,5,0,"button",60),re(40,"async"),G(41,JC,5,0,"button",61),re(42,"async"),m()()}if(n&2){let t=M();T(2),V("routerLinkActiveOptions",Al(22,Sv)),T(20),V("ngIf",de(23,8,t.user$)),T(7),V("ngIf",de(30,10,t.user$)),T(3),V("ngIf",de(33,12,t.theme$)==="light"),T(2),V("ngIf",de(35,14,t.theme$)==="dark"),T(3),ee(de(38,16,t.theme$)==="light"?"Dark Mode":"Light Mode"),T(2),V("ngIf",!de(40,18,t.user$)),T(2),V("ngIf",de(42,20,t.user$))}}var Zc=class n{constructor(e,t,i,r){this.authService=e;this.themeService=t;this.router=i;this.elementRef=r;this.user$=this.authService.user$,this.theme$=this.themeService.theme$,this.isDetailPage$=this.router.events.pipe(Cl(s=>s instanceof sp),Ge(s=>s.urlAfterRedirects!=="/"))}user$;theme$;isMobileMenuOpen=!1;isDetailPage$;moreMenuOpen=!1;onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.moreMenuOpen=!1)}login(){this.authService.signInWithGoogle()}logout(){this.authService.signOut()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleMoreMenu(e){e.stopPropagation(),this.moreMenuOpen=!this.moreMenuOpen}closeMoreMenu(){this.moreMenuOpen=!1}static \u0275fac=function(t){return new(t||n)(z(xe),z(Xc),z(Ue),z(fi))};static \u0275cmp=ge({type:n,selectors:[["app-root"]],hostBindings:function(t,i){t&1&&L("click",function(s){return i.onDocumentClick(s)},qf)},decls:28,vars:21,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],[4,"ngIf"],[1,"flex","items-center","space-x-1.5","p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"text-xs","sm:text-sm","font-medium"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"relative"],[1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","dark:bg-gray-800","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["routerLink","/lists",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/ip-lookup",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/quotes",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile","class","block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",3,"click",4,"ngIf"],["routerLink","/premier-league",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/premier-league","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&(u(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),_(5," Manu's Playground "),m()(),u(6,"nav",5),G(7,UC,15,6,"ng-container",6),re(8,"async"),u(9,"button",7),L("click",function(){return i.toggleTheme()}),G(10,BC,2,0,"svg",8),re(11,"async"),G(12,jC,2,0,"svg",8),re(13,"async"),u(14,"span",9),_(15),re(16,"async"),m()(),G(17,$C,5,0,"button",10),re(18,"async"),G(19,qC,5,0,"button",11),re(20,"async"),m(),u(21,"button",12),L("click",function(){return i.toggleMobileMenu()}),G(22,GC,2,0,"svg",13)(23,zC,2,0,"svg",13),m()(),G(24,XC,43,23,"div",14),m()(),u(25,"main",15),D(26,"router-outlet"),m(),D(27,"app-update-notification")),t&2&&(T(7),V("ngIf",de(8,9,i.isDetailPage$)),T(3),V("ngIf",de(11,11,i.theme$)==="light"),T(2),V("ngIf",de(13,13,i.theme$)==="dark"),T(3),ee(de(16,15,i.theme$)==="light"?"Dark":"Light"),T(2),V("ngIf",!de(18,17,i.user$)),T(2),V("ngIf",de(20,19,i.user$)),T(3),V("ngIf",!i.isMobileMenuOpen),T(),V("ngIf",i.isMobileMenuOpen),T(),V("ngIf",i.isMobileMenuOpen))},dependencies:[_e,Pe,dt,op,Lo,ap,Jc],encapsulation:2})};tp(Zc,xv).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
