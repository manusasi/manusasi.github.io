var qO=Object.defineProperty,GO=Object.defineProperties;var WO=Object.getOwnPropertyDescriptors;var Bu=Object.getOwnPropertySymbols,KO=Object.getPrototypeOf,ZT=Object.prototype.hasOwnProperty,JT=Object.prototype.propertyIsEnumerable,QO=Reflect.get;var YT=(n,e,t)=>e in n?qO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})ZT.call(e,t)&&YT(n,t,e[t]);if(Bu)for(var t of Bu(e))JT.call(e,t)&&YT(n,t,e[t]);return n},te=(n,e)=>GO(n,WO(e));var lm=(n,e)=>{var t={};for(var r in n)ZT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Bu)for(var r of Bu(n))e.indexOf(r)<0&&JT.call(n,r)&&(t[r]=n[r]);return t};var ti=(n,e,t)=>QO(KO(n),t,e);var w=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var um;function dm(){return um}function Ir(n){let e=um;return um=n,e}var YO=Symbol("NotFound"),$u=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function ls(n){return n===YO||n?.name==="\u0275NotFound"}function Wu(n,e){return Object.is(n,e)}var tt=null,Hu=!1,hm=1,ZO=null,_t=Symbol("SIGNAL");function ae(n){let e=tt;return tt=n,e}function Ku(){return tt}var Yi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function us(n){if(Hu)throw new Error("");if(tt===null)return;tt.consumerOnSignalRead(n);let e=tt.nextProducerIndex++;if(Ju(tt),e<tt.producerNode.length&&tt.producerNode[e]!==n&&ic(tt)){let t=tt.producerNode[e];Zu(t,tt.producerIndexOfThis[e])}tt.producerNode[e]!==n&&(tt.producerNode[e]=n,tt.producerIndexOfThis[e]=ic(tt)?eb(n,tt,e):0),tt.producerLastReadVersion[e]=n.version}function XT(){hm++}function Qu(n){if(!(ic(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hm)){if(!n.producerMustRecompute(n)&&!oc(n)){Gu(n);return}n.producerRecomputeValue(n),Gu(n)}}function fm(n){if(n.liveConsumerNode===void 0)return;let e=Hu;Hu=!0;try{for(let t of n.liveConsumerNode)t.dirty||JO(t)}finally{Hu=e}}function pm(){return tt?.consumerAllowSignalWrites!==!1}function JO(n){n.dirty=!0,fm(n),n.consumerMarkedDirty?.(n)}function Gu(n){n.dirty=!1,n.lastCleanEpoch=hm}function Zi(n){return n&&(n.nextProducerIndex=0),ae(n)}function ds(n,e){if(ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ic(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function oc(n){Ju(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Qu(t),r!==t.version))return!0}return!1}function Yu(n){if(Ju(n),ic(n))for(let e=0;e<n.producerNode.length;e++)Zu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function eb(n,e,t){if(tb(n),n.liveConsumerNode.length===0&&nb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=eb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Zu(n,e){if(tb(n),n.liveConsumerNode.length===1&&nb(n))for(let r=0;r<n.producerNode.length;r++)Zu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ju(i),i.producerIndexOfThis[r]=e}}function ic(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ju(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nb(n){return n.producerNode!==void 0}function Xu(n){ZO?.(n)}function ed(n,e){let t=Object.create(XO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Qu(t),us(t),t.value===rc)throw t.error;return t.value};return r[_t]=t,Xu(t),r}var zu=Symbol("UNSET"),qu=Symbol("COMPUTING"),rc=Symbol("ERRORED"),XO=te(k({},Yi),{value:zu,dirty:!0,error:null,equal:Wu,kind:"computed",producerMustRecompute(n){return n.value===zu||n.value===qu},producerRecomputeValue(n){if(n.value===qu)throw new Error("");let e=n.value;n.value=qu;let t=Zi(n),r,i=!1;try{r=n.computation(),ae(null),i=e!==zu&&e!==rc&&r!==rc&&n.equal(e,r)}catch(o){r=rc,n.error=o}finally{ds(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function e1(){throw new Error}var rb=e1;function ib(n){rb(n)}function gm(n){rb=n}var t1=null;function mm(n,e){let t=Object.create(td);t.value=n,e!==void 0&&(t.equal=e);let r=()=>ob(t);return r[_t]=t,Xu(t),[r,s=>hs(t,s),s=>ym(t,s)]}function ob(n){return us(n),n.value}function hs(n,e){pm()||ib(n),n.equal(n.value,e)||(n.value=e,n1(n))}function ym(n,e){pm()||ib(n),hs(n,e(n.value))}var td=te(k({},Yi),{equal:Wu,value:void 0,kind:"signal"});function n1(n){n.version++,XT(),fm(n),t1?.(n)}function ie(n){return typeof n=="function"}function fs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nd=fs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ji(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var De=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof nd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sb(o)}catch(s){e=e??[],s instanceof nd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ji(t,e)}remove(e){let{_finalizers:t}=this;t&&Ji(t,e),e instanceof n&&e._removeParent(this)}};De.EMPTY=(()=>{let n=new De;return n.closed=!0,n})();var vm=De.EMPTY;function rd(n){return n instanceof De||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function sb(n){ie(n)?n():n.unsubscribe()}var _n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ps={setTimeout(n,e,...t){let{delegate:r}=ps;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ps;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function id(n){ps.setTimeout(()=>{let{onUnhandledError:e}=_n;if(e)e(n);else throw n})}function sc(){}var ab=_m("C",void 0,void 0);function cb(n){return _m("E",void 0,n)}function lb(n){return _m("N",n,void 0)}function _m(n,e,t){return{kind:n,value:e,error:t}}var Xi=null;function gs(n){if(_n.useDeprecatedSynchronousErrorHandling){let e=!Xi;if(e&&(Xi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xi;if(Xi=null,t)throw r}}else n()}function ub(n){_n.useDeprecatedSynchronousErrorHandling&&Xi&&(Xi.errorThrown=!0,Xi.error=n)}var eo=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rd(e)&&e.add(this)):this.destination=o1}static create(e,t,r){return new ms(e,t,r)}next(e){this.isStopped?wm(lb(e),this):this._next(e)}error(e){this.isStopped?wm(cb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wm(ab,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},r1=Function.prototype.bind;function Em(n,e){return r1.call(n,e)}var Im=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){od(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){od(r)}else od(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){od(t)}}},ms=class extends eo{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&_n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Em(e.next,o),error:e.error&&Em(e.error,o),complete:e.complete&&Em(e.complete,o)}):i=e}this.destination=new Im(i)}};function od(n){_n.useDeprecatedSynchronousErrorHandling?ub(n):id(n)}function i1(n){throw n}function wm(n,e){let{onStoppedNotification:t}=_n;t&&ps.setTimeout(()=>t(n,e))}var o1={closed:!0,next:sc,error:i1,complete:sc};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(n){return n}function sd(...n){return Dm(n)}function Dm(n){return n.length===0?Gt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var W=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=a1(t)?t:new ms(t,r,i);return gs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=db(r),new r((i,o)=>{let s=new ms({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ys](){return this}pipe(...t){return Dm(t)(this)}toPromise(t){return t=db(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function db(n){var e;return(e=n??_n.Promise)!==null&&e!==void 0?e:Promise}function s1(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function a1(n){return n&&n instanceof eo||s1(n)&&rd(n)}function Tm(n){return ie(n?.lift)}function ge(n){return e=>{if(Tm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new bm(n,e,t,r,i)}var bm=class extends eo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vs(){return ge((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _s=class extends W{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return vs()(this)}};var Es={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Es;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new De(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Es;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Es;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var hb=fs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=(()=>{class n extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ad(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hb}next(t){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vm:(this.currentObservers=null,o.push(t),new De(()=>{this.currentObservers=null,Ji(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new W;return t.source=this,t}}return n.create=(e,t)=>new ad(e,t),n})(),ad=class extends ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:vm}};var nt=class extends ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Cm={now(){return(Cm.delegate||Date).now()},delegate:void 0};var cd=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var ac={setInterval(n,e,...t){let{delegate:r}=ac;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ac;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ni=class extends cd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ac.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ac.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ji(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ws=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ws.now=Cm.now;var ri=class extends ws{constructor(e,t=ws.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ii=new ri(ni),Sm=ii;var ld=class extends ni{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ud=class extends ri{};var Am=new ud(ld);var dd=class extends ni{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Es.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(Es.cancelAnimationFrame(t),e._scheduled=void 0)}};var hd=class extends ri{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var fd=new hd(dd);var Et=new W(n=>n.complete());function pd(n){return n&&ie(n.schedule)}function Rm(n){return n[n.length-1]}function gd(n){return ie(Rm(n))?n.pop():void 0}function Vn(n){return pd(Rm(n))?n.pop():void 0}function fb(n,e){return typeof Rm(n)=="number"?n.pop():e}function md(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function gb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function l(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function pb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function to(n){return this instanceof to?(this.v=n,this):new to(n)}function mb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(P){return new Promise(function(R,F){o.push([y,P,R,F])>1||l(y,P)})},C&&(i[y]=C(i[y])))}function l(y,C){try{u(r[y](C))}catch(P){g(o[0][3],P)}}function u(y){y.value instanceof to?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function g(y,C){y(C),o.shift(),o.length&&l(o[0][0],o[0][1])}}function yb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pb=="function"?pb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var yd=n=>n&&typeof n.length=="number"&&typeof n!="function";function vd(n){return ie(n?.then)}function _d(n){return ie(n[ys])}function Ed(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function wd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function c1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Id=c1();function Dd(n){return ie(n?.[Id])}function Td(n){return mb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield to(t.read());if(i)return yield to(void 0);yield yield to(r)}}finally{t.releaseLock()}})}function bd(n){return ie(n?.getReader)}function ke(n){if(n instanceof W)return n;if(n!=null){if(_d(n))return l1(n);if(yd(n))return u1(n);if(vd(n))return d1(n);if(Ed(n))return vb(n);if(Dd(n))return h1(n);if(bd(n))return f1(n)}throw wd(n)}function l1(n){return new W(e=>{let t=n[ys]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function u1(n){return new W(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function d1(n){return new W(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,id)})}function h1(n){return new W(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vb(n){return new W(e=>{p1(n,e).catch(t=>e.error(t))})}function f1(n){return vb(Td(n))}function p1(n,e){var t,r,i,o;return gb(this,void 0,void 0,function*(){try{for(t=yb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Lt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function oi(n,e=0){return ge((t,r)=>{t.subscribe(le(r,i=>Lt(r,n,()=>r.next(i),e),()=>Lt(r,n,()=>r.complete(),e),i=>Lt(r,n,()=>r.error(i),e)))})}function si(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _b(n,e){return ke(n).pipe(si(e),oi(e))}function Eb(n,e){return ke(n).pipe(si(e),oi(e))}function wb(n,e){return new W(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Ib(n,e){return new W(t=>{let r;return Lt(t,e,()=>{r=n[Id](),Lt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Cd(n,e){if(!n)throw new Error("Iterable cannot be null");return new W(t=>{Lt(t,e,()=>{let r=n[Symbol.asyncIterator]();Lt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Db(n,e){return Cd(Td(n),e)}function Tb(n,e){if(n!=null){if(_d(n))return _b(n,e);if(yd(n))return wb(n,e);if(vd(n))return Eb(n,e);if(Ed(n))return Cd(n,e);if(Dd(n))return Ib(n,e);if(bd(n))return Db(n,e)}throw wd(n)}function _e(n,e){return e?Tb(n,e):ke(n)}function G(...n){let e=Vn(n);return _e(n,e)}function Is(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new W(e?i=>e.schedule(r,0,i):r)}function Sd(n){return!!n&&(n instanceof W||ie(n.lift)&&ie(n.subscribe))}var Dr=fs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bb(n){return n instanceof Date&&!isNaN(n)}function J(n,e){return ge((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:g1}=Array;function m1(n,e){return g1(e)?n(...e):n(e)}function Ad(n){return J(e=>m1(n,e))}var{isArray:y1}=Array,{getPrototypeOf:v1,prototype:_1,keys:E1}=Object;function Rd(n){if(n.length===1){let e=n[0];if(y1(e))return{args:e,keys:null};if(w1(e)){let t=E1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function w1(n){return n&&typeof n=="object"&&v1(n)===_1}function Nd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function cc(...n){let e=Vn(n),t=gd(n),{args:r,keys:i}=Rd(n);if(r.length===0)return _e([],e);let o=new W(I1(r,e,i?s=>Nd(i,s):Gt));return t?o.pipe(Ad(t)):o}function I1(n,e,t=Gt){return r=>{Cb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Cb(e,()=>{let u=_e(n[l],e),h=!1;u.subscribe(le(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Cb(n,e,t){n?Lt(t,n,e):e()}function Sb(n,e,t,r,i,o,s,a){let l=[],u=0,h=0,p=!1,g=()=>{p&&!l.length&&!u&&e.complete()},y=P=>u<r?C(P):l.push(P),C=P=>{o&&e.next(P),u++;let R=!1;ke(t(P,h++)).subscribe(le(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;l.length&&u<r;){let F=l.shift();s?Lt(e,s,()=>C(F)):C(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(le(e,y,()=>{p=!0,g()})),()=>{a?.()}}function ze(n,e,t=1/0){return ie(e)?ze((r,i)=>J((o,s)=>e(r,o,i,s))(ke(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>Sb(r,i,n,t)))}function ai(n=1/0){return ze(Gt,n)}function Ab(){return ai(1)}function Ds(...n){return Ab()(_e(n,Vn(n)))}function lc(n){return new W(e=>{ke(n()).subscribe(e)})}function Nm(...n){let e=gd(n),{args:t,keys:r}=Rd(n),i=new W(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let p=!1;ke(t[h]).subscribe(le(o,g=>{p||(p=!0,u--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?Nd(r,a):a),o.complete())}))}});return e?i.pipe(Ad(e)):i}function Pd(n=0,e,t=Sm){let r=-1;return e!=null&&(pd(e)?t=e:r=e),new W(i=>{let o=bb(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Pm(n=0,e=ii){return n<0&&(n=0),Pd(n,n,e)}function uc(...n){let e=Vn(n),t=fb(n,1/0),r=n;return r.length?r.length===1?ke(r[0]):ai(t)(_e(r,e)):Et}function rt(n,e){return ge((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Rb(n){return ge((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let u=i;i=null,t.next(u)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(le(t,u=>{r=!0,i=u,o||ke(n(u)).subscribe(o=le(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function Md(n,e=ii){return Rb(()=>Pd(n,e))}function Tr(n){return ge((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=ke(n(s,Tr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Nb(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(le(s,h=>{let p=u++;l=a?n(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function jn(n,e){return ie(e)?ze(n,e,1):ze(n,1)}function ci(n){return ge((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Nt(n){return n<=0?()=>Et:ge((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xd(n=D1){return ge((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function D1(){return new Dr}function no(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function br(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rt((i,o)=>n(i,o,r)):Gt,Nt(1),t?ci(e):xd(()=>new Dr))}function Ts(n){return n<=0?()=>Et:ge((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Mm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rt((i,o)=>n(i,o,r)):Gt,Ts(1),t?ci(e):xd(()=>new Dr))}function kd(n,e){return ge(Nb(n,e,arguments.length>=2,!0))}function li(...n){let e=Vn(n);return ge((t,r)=>{(e?Ds(n,t,e):Ds(n,t)).subscribe(r)})}function je(n,e){return ge((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,l=>{i?.unsubscribe();let u=0,h=o++;ke(n(l,h)).subscribe(i=le(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Un(n){return ge((e,t)=>{ke(n).subscribe(le(t,()=>t.complete(),sc)),!t.closed&&e.subscribe(t)})}function Ye(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Gt}function Pb(n){let e=ae(null);try{return n()}finally{ae(e)}}var jd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(pc(e,t)),this.code=e}};function T1(n){return`NG0${Math.abs(n)}`}function pc(n,e){return`${T1(n)}${e?": "+e:""}`}var gc=globalThis;function Oe(n){for(let e in n)if(n[e]===Oe)return e;throw Error("")}function Ob(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Vt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function qm(n,e){return n?e?`${n} ${e}`:n:e||""}var b1=Oe({__forward_ref__:Oe});function Ar(n){return n.__forward_ref__=Ar,n.toString=function(){return Vt(this())},n}function ht(n){return Gm(n)?n():n}function Gm(n){return typeof n=="function"&&n.hasOwnProperty(b1)&&n.__forward_ref__===Ar}function Fb(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function O(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function mc(n){return C1(n,Ud)}function Wm(n){return mc(n)!==null}function C1(n,e){return n.hasOwnProperty(e)&&n[e]||null}function S1(n){let e=n?.[Ud]??null;return e||null}function km(n){return n&&n.hasOwnProperty(Fd)?n[Fd]:null}var Ud=Oe({\u0275prov:Oe}),Fd=Oe({\u0275inj:Oe}),V=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=O({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Km(n){return n&&!!n.\u0275providers}var Qm=Oe({\u0275cmp:Oe}),Ym=Oe({\u0275dir:Oe}),Zm=Oe({\u0275pipe:Oe}),Jm=Oe({\u0275mod:Oe}),hc=Oe({\u0275fac:Oe}),co=Oe({__NG_ELEMENT_ID__:Oe}),Mb=Oe({__NG_ENV_ID__:Oe});function yc(n){return typeof n=="string"?n:n==null?"":String(n)}function Lb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yc(n)}function Xm(n,e){throw new j(-200,n)}function Bd(n,e){throw new j(-201,!1)}var Om;function Vb(){return Om}function Wt(n){let e=Om;return Om=n,e}function ey(n,e,t){let r=mc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Bd(n,"Injector")}var A1={},ro=A1,Fm="__NG_DI_FLAG__",Lm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=io(t)||0;try{return this.injector.get(e,r&8?null:ro,r)}catch(i){if(ls(i))return i;throw i}}},Ld="ngTempTokenPath",R1="ngTokenPath",N1=/\n/gm,P1="\u0275",xb="__source";function M1(n,e=0){let t=dm();if(t===void 0)throw new j(-203,!1);if(t===null)return ey(n,void 0,e);{let r=x1(e),i=t.retrieve(n,r);if(ls(i)){if(r.optional)return null;throw i}return i}}function $(n,e=0){return(Vb()||M1)(ht(n),e)}function S(n,e){return $(n,io(e))}function io(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function x1(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Vm(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=k1(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push($(i,o))}else e.push($(r))}return e}function ty(n,e){return n[Fm]=e,n.prototype[Fm]=e,n}function k1(n){return n[Fm]}function O1(n,e,t,r){let i=n[Ld];throw e[xb]&&i.unshift(e[xb]),n.message=F1(`
`+n.message,i,t,r),n[R1]=i,n[Ld]=null,n}function F1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==P1?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(N1,`
  `)}`}function oo(n,e){let t=n.hasOwnProperty(hc);return t?n[hc]:null}function $d(n,e){n.forEach(t=>Array.isArray(t)?$d(t,e):e(t))}function ny(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function vc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Ub(n,e,t){let r=Cs(n,e);return r>=0?n[r|1]=t:(r=~r,jb(n,r,e,t)),r}function Hd(n,e){let t=Cs(n,e);if(t>=0)return n[t|1]}function Cs(n,e){return L1(n,e,1)}function L1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var di={},Kt=[],hi=new V(""),ry=new V("",-1),iy=new V(""),fc=class{get(e,t=ro){if(t===ro)throw new $u(`NullInjectorError: No provider for ${Vt(e)}!`);return t}};function oy(n){return n[Jm]||null}function Bn(n){return n[Qm]||null}function sy(n){return n[Ym]||null}function Bb(n){return n[Zm]||null}function jt(n){return{\u0275providers:n}}function $b(...n){return{\u0275providers:ay(!0,n),\u0275fromNgModule:!0}}function ay(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return $d(e,s=>{let a=s;Vd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Hb(i,o),t}function Hb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];cy(i,o=>{e(o,r)})}}function Vd(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=km(n),s=!o&&Bn(n);if(!o&&!s){let l=n.ngModule;if(o=km(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Vd(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{$d(o.imports,h=>{Vd(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&Hb(u,e)}if(!a){let u=oo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Kt},i),e({provide:iy,useValue:i,multi:!0},i),e({provide:hi,useValue:()=>$(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;cy(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function cy(n,e){for(let t of n)Km(t)&&(t=t.\u0275providers),Array.isArray(t)?cy(t,e):e(t)}var V1=Oe({provide:String,useValue:Oe});function zb(n){return n!==null&&typeof n=="object"&&V1 in n}function j1(n){return!!(n&&n.useExisting)}function U1(n){return!!(n&&n.useFactory)}function so(n){return typeof n=="function"}function qb(n){return!!n.useClass}var _c=new V(""),Od={},kb={},xm;function Ss(){return xm===void 0&&(xm=new fc),xm}var Me=class{},ao=class extends Me{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Um(e,s=>this.processProvider(s)),this.records.set(ry,bs(void 0,this)),i.has("environment")&&this.records.set(Me,bs(void 0,this));let o=this.records.get(_c);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(iy,Kt,{self:!0}))}retrieve(e,t){let r=io(t)||0;try{return this.get(e,ro,r)}catch(i){if(ls(i))return i;throw i}}destroy(){dc(this),this._destroyed=!0;let e=ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(e)}}onDestroy(e){return dc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){dc(this);let t=Ir(this),r=Wt(void 0),i;try{return e()}finally{Ir(t),Wt(r)}}get(e,t=ro,r){if(dc(this),e.hasOwnProperty(Mb))return e[Mb](this);let i=io(r),o,s=Ir(this),a=Wt(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=q1(e)&&mc(e);h&&this.injectableDefInScope(h)?u=bs(jm(e),Od):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let l=i&2?Ss():this.parent;return t=i&8&&t===ro?null:t,l.get(e,t)}catch(l){if(ls(l)){if((l[Ld]=l[Ld]||[]).unshift(Vt(e)),s)throw l;return O1(l,e,"R3InjectorError",this.source)}else throw l}finally{Wt(a),Ir(s)}}resolveInjectorInitializers(){let e=ae(null),t=Ir(this),r=Wt(void 0),i;try{let o=this.get(hi,Kt,{self:!0});for(let s of o)s()}finally{Ir(t),Wt(r),ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=so(e)?e:ht(e&&e.provide),r=$1(e);if(!so(e)&&e.multi===!0){let i=this.records.get(t);i||(i=bs(void 0,Od,!0),i.factory=()=>Vm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ae(null);try{return t.value===kb?Xm(Vt(e)):t.value===Od&&(t.value=kb,t.value=t.factory()),typeof t.value=="object"&&t.value&&z1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function jm(n){let e=mc(n),t=e!==null?e.factory:oo(n);if(t!==null)return t;if(n instanceof V)throw new j(204,!1);if(n instanceof Function)return B1(n);throw new j(204,!1)}function B1(n){if(n.length>0)throw new j(204,!1);let t=S1(n);return t!==null?()=>t.factory(n):()=>new n}function $1(n){if(zb(n))return bs(void 0,n.useValue);{let e=ly(n);return bs(e,Od)}}function ly(n,e,t){let r;if(so(n)){let i=ht(n);return oo(i)||jm(i)}else if(zb(n))r=()=>ht(n.useValue);else if(U1(n))r=()=>n.useFactory(...Vm(n.deps||[]));else if(j1(n))r=()=>$(ht(n.useExisting));else{let i=ht(n&&(n.useClass||n.provide));if(H1(n))r=()=>new i(...Vm(n.deps));else return oo(i)||jm(i)}return r}function dc(n){if(n.destroyed)throw new j(205,!1)}function bs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function H1(n){return!!n.deps}function z1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function q1(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Um(n,e){for(let t of n)Array.isArray(t)?Um(t,e):t&&Km(t)?Um(t.\u0275providers,e):e(t)}function Ze(n,e){let t;n instanceof ao?(dc(n),t=n):t=new Lm(n);let r,i=Ir(t),o=Wt(void 0);try{return e()}finally{Ir(i),Wt(o)}}function uy(){return Vb()!==void 0||dm()!=null}function dy(n){if(!uy())throw new j(-203,!1)}var wn=0,fe=1,ne=2,ft=3,on=4,sn=5,Ec=6,As=7,It=8,lo=9,$n=10,qe=11,Rs=12,hy=13,uo=14,an=15,ho=16,fo=17,po=18,wc=19,fy=20,Cr=21,zd=22,Ic=23,Qt=24,go=25,cn=26,Gb=1;var fi=7,Dc=8,Tc=9,Ut=10;function Hn(n){return Array.isArray(n)&&typeof n[Gb]=="object"}function In(n){return Array.isArray(n)&&n[Gb]===!0}function py(n){return(n.flags&4)!==0}function pi(n){return n.componentOffset>-1}function qd(n){return(n.flags&1)===1}function zn(n){return!!n.template}function Ns(n){return(n[ne]&512)!==0}function mo(n){return(n[ne]&256)===256}var Wb="svg",Kb="math";function ln(n){for(;Array.isArray(n);)n=n[wn];return n}function gy(n,e){return ln(e[n])}function Dn(n,e){return ln(e[n.index])}function Gd(n,e){return n.data[e]}function Qb(n,e){return n[e]}function un(n,e){let t=e[n];return Hn(t)?t:t[wn]}function Wd(n){return(n[ne]&128)===128}function Yb(n){return In(n[ft])}function bc(n,e){return e==null?null:n[e]}function my(n){n[fo]=0}function yy(n){n[ne]&1024||(n[ne]|=1024,Wd(n)&&Ps(n))}function Zb(n,e){for(;n>0;)e=e[uo],n--;return e}function Cc(n){return!!(n[ne]&9216||n[Qt]?.dirty)}function Kd(n){n[$n].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Cc(n)&&Ps(n)}function Ps(n){n[$n].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Wd(e)));)e=ui(e)}function vy(n,e){if(mo(n))throw new j(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function Jb(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function ui(n){let e=n[ft];return In(e)?e[ft]:e}function Xb(n){return n[As]??=[]}function eC(n){return n.cleanup??=[]}var he={lFrame:yC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Sc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Sc||{}),G1=0,Bm=!1;function tC(){return he.lFrame.elementDepthCount}function nC(){he.lFrame.elementDepthCount++}function rC(){he.lFrame.elementDepthCount--}function _y(){return he.bindingsEnabled}function iC(){return he.skipHydrationRootTNode!==null}function oC(n){return he.skipHydrationRootTNode===n}function sC(){he.skipHydrationRootTNode=null}function Ne(){return he.lFrame.lView}function Bt(){return he.lFrame.tView}function st(n){return he.lFrame.contextLView=n,n[It]}function at(n){return he.lFrame.contextLView=null,n}function Dt(){let n=Ey();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ey(){return he.lFrame.currentTNode}function aC(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ms(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function wy(){return he.lFrame.isParent}function cC(){he.lFrame.isParent=!1}function lC(){return he.lFrame.contextLView}function Iy(n){Fb("Must never be called in production mode"),G1=n}function Dy(){return Bm}function Ty(n){let e=Bm;return Bm=n,e}function uC(n){return he.lFrame.bindingIndex=n}function Ac(){return he.lFrame.bindingIndex++}function dC(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hC(){return he.lFrame.inI18n}function fC(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qd(e)}function pC(){return he.lFrame.currentDirectiveIndex}function Qd(n){he.lFrame.currentDirectiveIndex=n}function gC(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function by(n){he.lFrame.currentQueryIndex=n}function W1(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function Cy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=W1(o),i===null||(o=o[uo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=mC();return r.currentTNode=e,r.lView=n,!0}function Yd(n){let e=mC(),t=n[fe];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mC(){let n=he.lFrame,e=n===null?null:n.child;return e===null?yC(n):e}function yC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vC(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Sy=vC;function Zd(){let n=vC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _C(n){return(he.lFrame.contextLView=Zb(n,he.lFrame.contextLView))[It]}function yo(){return he.lFrame.selectedIndex}function gi(n){he.lFrame.selectedIndex=n}function Jd(){let n=he.lFrame;return Gd(n.tView,n.selectedIndex)}function EC(){return he.lFrame.currentNamespace}var wC=!0;function Xd(){return wC}function eh(n){wC=n}function $m(n,e=null,t=null,r){let i=Ay(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ay(n,e=null,t=null,r,i=new Set){let o=[t||Kt,$b(n)];return r=r||(typeof n=="object"?void 0:Vt(n)),new ao(o,e||Ss(),r||null,i)}var Re=class n{static THROW_IF_NOT_FOUND=ro;static NULL=new fc;static create(e,t){if(Array.isArray(e))return $m({name:""},t,e,"");{let r=e.name??"";return $m({name:r},e.parent,e.providers,r)}}static \u0275prov=O({token:n,providedIn:"any",factory:()=>$(ry)});static __NG_ELEMENT_ID__=-1},Ce=new V(""),Rr=(()=>{class n{static __NG_ELEMENT_ID__=K1;static __NG_ENV_ID__=t=>t}return n})(),Hm=class extends Rr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return mo(this._lView)}onDestroy(e){let t=this._lView;return vy(t,e),()=>Jb(t,e)}};function K1(){return new Hm(Ne())}var En=class{_console=console;handleError(e){this._console.error("ERROR",e)}},$t=new V("",{providedIn:"root",factory:()=>{let n=S(Me),e;return t=>{e??=n.get(En),e.handleError(t)}}}),IC={provide:hi,useValue:()=>void S(En),multi:!0};function Ry(n){return typeof n=="function"&&n[_t]!==void 0}function Tt(n,e){let[t,r,i]=mm(n,e?.equal),o=t,s=o[_t];return o.set=r,o.update=i,o.asReadonly=DC.bind(o),o}function DC(){let n=this[_t];if(n.readonlyFn===void 0){let e=()=>this();e[_t]=n,n.readonlyFn=e}return n.readonlyFn}function Ny(n){return Ry(n)&&typeof n.set=="function"}var Sr=class{},Rc=new V("",{providedIn:"root",factory:()=>!1});var Py=new V(""),My=new V("");var th=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Q1}return n})();function Q1(){return new th(Ne(),Dt())}var Nr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new W(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})(),mi=(()=>{class n{internalPendingTasks=S(Nr);scheduler=S(Sr);errorHandler=S($t);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})();function Nc(...n){}var xy=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>new zm})}return n})(),zm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Fs(n){return{toString:n}.toString()}var nh="__parameters__";function iF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function tS(n,e,t){return Fs(()=>{let r=iF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let p=l.hasOwnProperty(nh)?l[nh]:Object.defineProperty(l,nh,{value:[]})[nh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Pt=ty(tS("Optional"),8);var nS=ty(tS("SkipSelf"),4);function oF(n){return typeof n=="function"}var ch=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function rS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var bn=(()=>{let n=()=>iS;return n.ngInherit=!0,n})();function iS(n){return n.type.prototype.ngOnChanges&&(n.setInput=aF),sF}function sF(){let n=sS(this),e=n?.current;if(e){let t=n.previous;if(t===di)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function aF(n,e,t,r,i){let o=this.declaredInputs[r],s=sS(n)||cF(n,{previous:di,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new ch(u&&u.currentValue,t,l===di),rS(n,e,i,t)}var oS="__ngSimpleChanges__";function sS(n){return n[oS]||null}function cF(n,e){return n[oS]=e}var TC=[];var Se=function(n,e=null,t){for(let r=0;r<TC.length;r++){let i=TC[r];i(n,e,t)}};function lF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=iS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function aS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function oh(n,e,t){cS(n,e,3,t)}function sh(n,e,t,r){(n[ne]&3)===t&&cS(n,e,t,r)}function ky(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function cS(n,e,t,r){let i=r!==void 0?n[fo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[fo]+=65536),(a<o||o==-1)&&(uF(n,t,e,l),n[fo]=(n[fo]&4294901760)+l+2),l++}function bC(n,e){Se(4,n,e);let t=ae(null);try{e.call(n)}finally{ae(t),Se(5,n,e)}}function uF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[fo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,bC(a,o)):bC(a,o)}var ks=-1,_o=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function dF(n){return(n.flags&8)!==0}function hF(n){return(n.flags&16)!==0}function fF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];pF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function lS(n){return n===3||n===4||n===6}function pF(n){return n.charCodeAt(0)===64}function xc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?CC(n,t,i,null,e[++r]):CC(n,t,i,null,null))}}return n}function CC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function uS(n){return n!==ks}function lh(n){return n&32767}function gF(n){return n>>16}function uh(n,e){let t=gF(n),r=e;for(;t>0;)r=r[uo],t--;return r}var zy=!0;function SC(n){let e=zy;return zy=n,e}var mF=256,dS=mF-1,hS=5,yF=0,qn={};function vF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(co)&&(r=t[co]),r==null&&(r=t[co]=yF++);let i=r&dS,o=1<<i;e.data[n+(i>>hS)]|=o}function dh(n,e){let t=fS(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,Oy(r.data,n),Oy(e,null),Oy(r.blueprint,null));let i=lv(n,e),o=n.injectorIndex;if(uS(i)){let s=lh(i),a=uh(i,e),l=a[fe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Oy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function lv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vS(i),r===null)return ks;if(t++,i=i[uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ks}function qy(n,e,t){vF(n,e,t)}function _F(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(lS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function pS(n,e,t){if(t&8||n!==void 0)return n;Bd(e,"NodeInjector")}function gS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[lo],o=Wt(void 0);try{return i?i.get(e,r,t&8):ey(e,r,t&8)}finally{Wt(o)}}return pS(r,e,t)}function mS(n,e,t,r=0,i){if(n!==null){if(e[ne]&2048&&!(r&2)){let s=TF(n,e,t,r,qn);if(s!==qn)return s}let o=yS(n,e,t,r,qn);if(o!==qn)return o}return gS(e,t,r,i)}function yS(n,e,t,r,i){let o=IF(t);if(typeof o=="function"){if(!Cy(e,n,r))return r&1?pS(i,t,r):gS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Bd(t);else return s}finally{Sy()}}else if(typeof o=="number"){let s=null,a=fS(n,e),l=ks,u=r&1?e[an][sn]:null;for((a===-1||r&4)&&(l=a===-1?lv(n,e):e[a+8],l===ks||!RC(r,!1)?a=-1:(s=e[fe],a=lh(l),e=uh(l,e)));a!==-1;){let h=e[fe];if(AC(o,a,h.data)){let p=EF(a,e,t,s,r,u);if(p!==qn)return p}l=e[a+8],l!==ks&&RC(r,e[fe].data[a+8]===u)&&AC(o,a,e)?(s=h,a=lh(l),e=uh(l,e)):a=-1}}return i}function EF(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],l=r==null?pi(a)&&zy:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=wF(a,s,t,l,u);return h!==null?hh(e,s,h,a):qn}function wF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:u;for(let y=p;y<g;y++){let C=s[y];if(y<l&&t===C||y>=l&&C.type===t)return y}if(i){let y=s[l];if(y&&zn(y)&&y.type===t)return l}return null}function hh(n,e,t,r){let i=n[t],o=e.data;if(i instanceof _o){let s=i;s.resolving&&Xm(Lb(o[t]));let a=SC(s.canSeeViewProviders);s.resolving=!0;let l=o[t].type||o[t],u,h=s.injectImpl?Wt(s.injectImpl):null,p=Cy(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&lF(t,o[t],e)}finally{h!==null&&Wt(h),SC(a),s.resolving=!1,Sy()}}return i}function IF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(co)?n[co]:void 0;return typeof e=="number"?e>=0?e&dS:DF:e}function AC(n,e,t){let r=1<<n;return!!(t[e+(n>>hS)]&r)}function RC(n,e){return!(n&2)&&!(n&1&&e)}var vo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mS(this._tNode,this._lView,e,io(r),t)}};function DF(){return new vo(Dt(),Ne())}function Ls(n){return Fs(()=>{let e=n.prototype.constructor,t=e[hc]||Gy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[hc]||Gy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gy(n){return Gm(n)?()=>{let e=Gy(ht(n));return e&&e()}:oo(n)}function TF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!Ns(s);){let a=yS(o,s,t,r|2,qn);if(a!==qn)return a;let l=o.parent;if(!l){let u=s[fy];if(u){let h=u.get(t,qn,r);if(h!==qn)return h}l=vS(s),s=s[uo]}o=l}return i}function vS(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function Lc(n){return _F(Dt(),n)}function bF(){return Th(Dt(),Ne())}function Th(n,e){return new Mt(Dn(n,e))}var Mt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=bF}return n})();function _S(n){return(n.flags&128)===128}var uv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(uv||{}),ES=new Map,CF=0;function SF(){return CF++}function AF(n){ES.set(n[wc],n)}function Wy(n){ES.delete(n[wc])}var NC="__ngContext__";function Vc(n,e){Hn(e)?(n[NC]=e[wc],AF(e)):n[NC]=e}function wS(n){return DS(n[Rs])}function IS(n){return DS(n[on])}function DS(n){for(;n!==null&&!In(n);)n=n[on];return n}var Ky;function dv(n){Ky=n}function TS(){if(Ky!==void 0)return Ky;if(typeof document<"u")return document;throw new j(210,!1)}var Vs=new V("",{providedIn:"root",factory:()=>RF}),RF="ng",bh=new V(""),Wn=new V("",{providedIn:"platform",factory:()=>"unknown"});var Ch=new V("",{providedIn:"root",factory:()=>TS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var NF="h",PF="b";var bS=!1,CS=new V("",{providedIn:"root",factory:()=>bS});var MF=(n,e,t,r)=>{};function xF(n,e,t,r){MF(n,e,t,r)}var kF=()=>null;function SS(n,e,t=!1){return kF(n,e,t)}function AS(n,e){let t=n.contentQueries;if(t!==null){let r=ae(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];by(o),a.contentQueries(2,e[s],s)}}}finally{ae(r)}}}function Qy(n,e,t){by(0);let r=ae(null);try{e(n,t)}finally{ae(r)}}function RS(n,e,t){if(py(e)){let r=ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{ae(r)}}}var Pr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pr||{});var rh;function OF(){if(rh===void 0&&(rh=null,gc.trustedTypes))try{rh=gc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rh}function PC(n){return OF()?.createScriptURL(n)||n}var fh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jd})`}};function jc(n){return n instanceof fh?n.changingThisBreaksApplicationSecurity:n}function hv(n,e){let t=NS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${jd})`)}return t===e}function NS(n){return n instanceof fh&&n.getTypeName()||null}var FF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function PS(n){return n=String(n),n.match(FF)?n:"unsafe:"+n}var Sh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sh||{});function MS(n){let e=kS();return e?e.sanitize(Sh.URL,n)||"":hv(n,"URL")?jc(n):PS(yc(n))}function xS(n){let e=kS();if(e)return PC(e.sanitize(Sh.RESOURCE_URL,n)||"");if(hv(n,"ResourceURL"))return PC(jc(n));throw new j(904,!1)}function LF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xS:MS}function fv(n,e,t){return LF(e,t)(n)}function kS(){let n=Ne();return n&&n[$n].sanitizer}function OS(n){return n instanceof Function?n():n}function VF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var FS="ng-template";function jF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(pv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function pv(n){return n.type===4&&n.value!==FS}function UF(n,e,t){let r=n.type===4&&!t?FS:n.value;return e===r}function BF(n,e,t){let r=4,i=n.attrs,o=i!==null?zF(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Tn(r)&&!Tn(l))return!1;if(s&&Tn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!UF(n,l,t)||l===""&&e.length===1){if(Tn(r))return!1;s=!0}}else if(r&8){if(i===null||!jF(n,i,l,t)){if(Tn(r))return!1;s=!0}}else{let u=e[++a],h=$F(l,i,pv(n),t);if(h===-1){if(Tn(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(Tn(r))return!1;s=!0}}}}return Tn(r)||s}function Tn(n){return(n&1)===0}function $F(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return qF(e,n)}function HF(n,e,t=!1){for(let r=0;r<e.length;r++)if(BF(n,e[r],t))return!0;return!1}function zF(n){for(let e=0;e<n.length;e++){let t=n[e];if(lS(t))return e}return n.length}function qF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function MC(n,e){return n?":not("+e.trim()+")":e}function GF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Tn(s)&&(e+=MC(o,i),i=""),r=s,o=o||!Tn(r);t++}return i!==""&&(e+=MC(o,i)),e}function WF(n){return n.map(GF).join(",")}function KF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Tn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var _i={};function QF(n,e){return n.createText(e)}function YF(n,e,t){n.setValue(e,t)}function LS(n,e,t){return n.createElement(e,t)}function ph(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VS(n,e,t){n.appendChild(e,t)}function xC(n,e,t,r,i){r!==null?ph(n,e,t,r,i):VS(n,e,t)}function ZF(n,e,t){n.removeChild(null,e,t)}function JF(n,e,t){n.setAttribute(e,"style",t)}function XF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function jS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&fF(n,e,r),i!==null&&XF(n,e,i),o!==null&&JF(n,e,o)}function gv(n,e,t,r,i,o,s,a,l,u,h){let p=cn+r,g=p+i,y=eL(p,g),C=typeof u=="function"?u():u;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:C,incompleteFirstPass:!1,ssrId:h}}function eL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_i);return t}function tL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mv(n,e,t,r,i,o,s,a,l,u,h){let p=e.blueprint.slice();return p[wn]=i,p[ne]=r|4|128|8|64|1024,(u!==null||n&&n[ne]&2048)&&(p[ne]|=2048),my(p),p[ft]=p[uo]=n,p[It]=t,p[$n]=s||n&&n[$n],p[qe]=a||n&&n[qe],p[lo]=l||n&&n[lo]||null,p[sn]=o,p[wc]=SF(),p[Ec]=h,p[fy]=u,p[an]=e.type==2?n[an]:p,p}function nL(n,e,t){let r=Dn(e,n),i=tL(t),o=n[$n].rendererFactory,s=yv(n,mv(n,i,null,US(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function US(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function BS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function yv(n,e){return n[Rs]?n[hy][on]=e:n[Rs]=e,n[hy]=e,e}function Ge(n=1){$S(Bt(),Ne(),yo()+n,!1)}function $S(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&oh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sh(e,o,0,t)}gi(t)}var Ah=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ah||{});function Yy(n,e,t,r){let i=ae(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Ah.SignalBased)!==0&&(l=e[o][_t]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):rS(e,l,o,r)}finally{ae(i)}}function HS(n,e,t,r,i){let o=yo(),s=r&2;try{gi(-1),s&&e.length>cn&&$S(n,e,cn,!1),Se(s?2:0,i,t),t(r,i)}finally{gi(o),Se(s?3:1,i,t)}}function vv(n,e,t){lL(n,e,t),(t.flags&64)===64&&uL(n,e,t)}function zS(n,e,t=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function rL(n,e,t,r){let o=r.get(CS,bS)||t===Pr.ShadowDom,s=n.selectRootElement(e,o);return iL(s),s}function iL(n){oL(n)}var oL=()=>null;function sL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qS(n,e,t,r,i,o){let s=e[fe];if(_v(n,s,e,t,r)){pi(n)&&cL(e,n.index);return}aL(n,e,t,r,i,o)}function aL(n,e,t,r,i,o){if(n.type&3){let s=Dn(n,e);t=sL(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function cL(n,e){let t=un(e,n);t[ne]&16||(t[ne]|=64)}function lL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;pi(t)&&nL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||dh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=hh(e,n,s,t);if(Vc(l,e),o!==null&&pL(e,s-r,l,a,t,o),zn(a)){let u=un(t.index,e);u[It]=hh(e,n,s,t)}}}function uL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=pC();try{gi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Qd(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&dL(l,u)}}finally{gi(-1),Qd(s)}}function dL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function GS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];HF(e,o.selectors,!1)&&(r??=[],zn(o)?r.unshift(o):r.push(o))}return r}function hL(n,e,t,r,i,o){let s=Dn(n,e);fL(e[qe],s,o,n.value,t,r,i)}function fL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?yc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function pL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];Yy(r,t,l,u)}}function gL(n,e){let t=n[lo];if(!t)return;t.get($t,null)?.(e)}function _v(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],h=s[l+1],p=e.data[u];Yy(p,t[u],h,i),a=!0}if(o)for(let l of o){let u=t[l],h=e.data[l];Yy(h,u,r,i),a=!0}return a}function mL(n,e){let t=un(e,n),r=t[fe];yL(r,t);let i=t[wn];i!==null&&t[Ec]===null&&(t[Ec]=SS(i,t[lo])),Se(18),Ev(r,t,t[It]),Se(19,t[It])}function yL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ev(n,e,t){Yd(e);try{let r=n.viewQuery;r!==null&&Qy(1,r,t);let i=n.template;i!==null&&HS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[po]?.finishViewCreation(n),n.staticContentQueries&&AS(n,e),n.staticViewQueries&&Qy(2,n.viewQuery,t);let o=n.components;o!==null&&vL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Zd()}}function vL(n,e){for(let t=0;t<e.length;t++)mL(n,e[t])}function _L(n,e,t,r){let i=ae(null);try{let o=e.tView,a=n[ne]&4096?4096:16,l=mv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[ho]=u;let h=n[po];return h!==null&&(l[po]=h.createEmbeddedView(o)),Ev(o,l,t),l}finally{ae(i)}}function kC(n,e){return!e||e.firstChild===null||_S(n)}var OC=!1,EL=new V(""),wL;function wv(n,e){return wL(n,e)}var Gn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gn||{});function Iv(n){return(n.flags&32)===32}function xs(n,e,t,r,i){if(r!=null){let o,s=!1;In(r)?o=r:Hn(r)&&(s=!0,r=r[wn]);let a=ln(r);n===0&&t!==null?i==null?VS(e,t,a):ph(e,t,a,i||null,!0):n===1&&t!==null?ph(e,t,a,i||null,!0):n===2?ZF(e,a,s):n===3&&e.destroyNode(a),o!=null&&xL(e,n,o,t,i)}}function IL(n,e){WS(n,e),e[wn]=null,e[sn]=null}function DL(n,e,t,r,i,o){r[wn]=i,r[sn]=e,Rh(n,r,t,1,i,o)}function WS(n,e){e[$n].changeDetectionScheduler?.notify(9),Rh(n,e,e[qe],2,null,null)}function TL(n){let e=n[Rs];if(!e)return Fy(n[fe],n);for(;e;){let t=null;if(Hn(e))t=e[Rs];else{let r=e[Ut];r&&(t=r)}if(!t){for(;e&&!e[on]&&e!==n;)Hn(e)&&Fy(e[fe],e),e=e[ft];e===null&&(e=n),Hn(e)&&Fy(e[fe],e),t=e&&e[on]}e=t}}function Dv(n,e){let t=n[Tc],r=t.indexOf(e);t.splice(r,1)}function KS(n,e){if(mo(e))return;let t=e[qe];t.destroyNode&&Rh(n,e,t,3,null,null),TL(e)}function Fy(n,e){if(mo(e))return;let t=ae(null);try{e[ne]&=-129,e[ne]|=256,e[Qt]&&Yu(e[Qt]),CL(n,e),bL(n,e),e[fe].type===1&&e[qe].destroy();let r=e[ho];if(r!==null&&In(e[ft])){r!==e[ft]&&Dv(r,e);let i=e[po];i!==null&&i.detachView(n)}Wy(e)}finally{ae(t)}}function bL(n,e){let t=n.cleanup,r=e[As];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[As]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ic];if(o!==null){e[Ic]=null;for(let s of o)s.destroy()}}function CL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof _o)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Se(4,a,l);try{l.call(a)}finally{Se(5,a,l)}}else{Se(4,i,o);try{o.call(i)}finally{Se(5,i,o)}}}}}function SL(n,e,t){return AL(n,e.parent,t)}function AL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[wn];if(pi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Pr.None||i===Pr.Emulated)return null}return Dn(r,t)}function RL(n,e,t){return PL(n,e,t)}function NL(n,e,t){return n.type&40?Dn(n,t):null}var PL=NL,FC;function Tv(n,e,t,r){let i=SL(n,r,e),o=e[qe],s=r.parent||e[sn],a=RL(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)xC(o,i,t[l],a,!1);else xC(o,i,t,a,!1);FC!==void 0&&FC(o,r,e,t,i)}function Pc(n,e){if(e!==null){let t=e.type;if(t&3)return Dn(e,n);if(t&4)return Zy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pc(n,r);{let i=n[e.index];return In(i)?Zy(-1,i):ln(i)}}else{if(t&128)return Pc(n,e.next);if(t&32)return wv(e,n)()||ln(n[e.index]);{let r=QS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[an]);return Pc(i,r)}else return Pc(n,e.next)}}}return null}function QS(n,e){if(e!==null){let r=n[an][sn],i=e.projection;return r.projection[i]}return null}function Zy(n,e){let t=Ut+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return Pc(r,i)}return e[fi]}function bv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&Vc(ln(a),r),t.flags|=2),!Iv(t))if(l&8)bv(n,e,t.child,r,i,o,!1),xs(e,n,i,a,o);else if(l&32){let u=wv(t,r),h;for(;h=u();)xs(e,n,i,h,o);xs(e,n,i,a,o)}else l&16?ML(n,e,r,t,i,o):xs(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Rh(n,e,t,r,i,o){bv(t,r,n.firstChild,e,i,o,!1)}function ML(n,e,t,r,i,o){let s=t[an],l=s[sn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];xs(e,n,i,h,o)}else{let u=l,h=s[ft];_S(r)&&(u.flags|=128),bv(n,e,u,h,i,o,!0)}}function xL(n,e,t,r,i){let o=t[fi],s=ln(t);o!==s&&xs(e,n,r,o,i);for(let a=Ut;a<t.length;a++){let l=t[a];Rh(l[fe],l,n,e,r,o)}}function kL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),n.setStyle(t,r,i,o))}}function kc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ln(o)),In(o)&&YS(o,r);let s=t.type;if(s&8)kc(n,e,t.child,r);else if(s&32){let a=wv(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=QS(e,t);if(Array.isArray(a))r.push(...a);else{let l=ui(e[an]);kc(l[fe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function YS(n,e){for(let t=Ut;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&kc(r[fe],r,i,e)}n[fi]!==n[wn]&&e.push(n[fi])}function ZS(n){if(n[go]!==null){for(let e of n[go])e.impl.addSequence(e);n[go].length=0}}var JS=[];function OL(n){return n[Qt]??FL(n)}function FL(n){let e=JS.pop()??Object.create(VL);return e.lView=n,e}function LL(n){n.lView[Qt]!==n&&(n.lView=null,JS.push(n))}var VL=te(k({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ps(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function jL(n){let e=n[Qt]??Object.create(UL);return e.lView=n,e}var UL=te(k({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!XS(e[fe]);)e=ui(e);e&&yy(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function XS(n){return n.type!==2}function e0(n){if(n[Ic]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ic])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var BL=100;function Cv(n,e=0){let r=n[$n].rendererFactory,i=!1;i||r.begin?.();try{$L(n,e)}finally{i||r.end?.()}}function $L(n,e){let t=Dy();try{Ty(!0),Jy(n,e);let r=0;for(;Cc(n);){if(r===BL)throw new j(103,!1);r++,Jy(n,1)}}finally{Ty(t)}}function t0(n,e){Iy(e?Sc.Exhaustive:Sc.OnlyDirtyViews);try{Cv(n)}finally{Iy(Sc.Off)}}function HL(n,e,t,r){if(mo(e))return;let i=e[ne],o=!1,s=!1;Yd(e);let a=!0,l=null,u=null;o||(XS(n)?(u=OL(e),l=Zi(u)):Ku()===null?(a=!1,u=jL(e),l=Zi(u)):e[Qt]&&(Yu(e[Qt]),e[Qt]=null));try{my(e),uC(n.bindingStartIndex),t!==null&&HS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&oh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&sh(e,y,0,null),ky(e,0)}if(s||zL(e),e0(e),n0(e,0),n.contentQueries!==null&&AS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&oh(e,y)}else{let y=n.contentHooks;y!==null&&sh(e,y,1),ky(e,1)}GL(n,e);let p=n.components;p!==null&&i0(e,p,0);let g=n.viewQuery;if(g!==null&&Qy(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&oh(e,y)}else{let y=n.viewHooks;y!==null&&sh(e,y,2),ky(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zd]){for(let y of e[zd])y();e[zd]=null}o||(ZS(e),e[ne]&=-73)}catch(h){throw o||Ps(e),h}finally{u!==null&&(ds(u,l),a&&LL(u)),Zd()}}function n0(n,e){for(let t=wS(n);t!==null;t=IS(t))for(let r=Ut;r<t.length;r++){let i=t[r];r0(i,e)}}function zL(n){for(let e=wS(n);e!==null;e=IS(e)){if(!(e[ne]&2))continue;let t=e[Tc];for(let r=0;r<t.length;r++){let i=t[r];yy(i)}}}function qL(n,e,t){Se(18);let r=un(e,n);r0(r,t),Se(19,r[It])}function r0(n,e){Wd(n)&&Jy(n,e)}function Jy(n,e){let r=n[fe],i=n[ne],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&oc(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)HL(r,n,r.template,n[It]);else if(i&8192){let a=ae(null);try{e0(n),n0(n,1);let l=r.components;l!==null&&i0(n,l,1),ZS(n)}finally{ae(a)}}}function i0(n,e,t){for(let r=0;r<e.length;r++)qL(n,e[r],t)}function GL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gi(~i);else{let o=i,s=t[++r],a=t[++r];fC(s,o);let l=e[o];Se(24,l),a(2,l),Se(25,l)}}}finally{gi(-1)}}function Sv(n,e){let t=Dy()?64:1088;for(n[$n].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ui(n);if(Ns(n)&&!r)return n;n=r}return null}function o0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function WL(n,e,t,r=!0){let i=e[fe];if(KL(i,e,n,t),r){let s=Zy(t,n),a=e[qe],l=a.parentNode(n[fi]);l!==null&&DL(i,n[sn],a,e,l,s)}let o=e[Ec];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xy(n,e){if(n.length<=Ut)return;let t=Ut+e,r=n[t];if(r){let i=r[ho];i!==null&&i!==n&&Dv(i,r),e>0&&(n[t-1][on]=r[on]);let o=vc(n,Ut+e);IL(r[fe],r);let s=o[po];s!==null&&s.detachView(o[fe]),r[ft]=null,r[on]=null,r[ne]&=-129}return r}function KL(n,e,t,r){let i=Ut+r,o=t.length;r>0&&(t[i-1][on]=e),r<o-Ut?(e[on]=t[i],ny(t,Ut+r,e)):(t.push(e),e[on]=null),e[ft]=t;let s=e[ho];s!==null&&t!==s&&s0(s,e);let a=e[po];a!==null&&a.insertView(n),Kd(e),e[ne]|=128}function s0(n,e){let t=n[Tc],r=e[ft];if(Hn(r))n[ne]|=2;else{let i=r[ft][an];e[an]!==i&&(n[ne]|=2)}t===null?n[Tc]=[e]:t.push(e)}var yi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[fe];return kc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return mo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(In(e)){let t=e[Dc],r=t?t.indexOf(this):-1;r>-1&&(Xy(e,r),vc(t,r))}this._attachedToViewContainer=!1}KS(this._lView[fe],this._lView)}onDestroy(e){vy(this._lView,e)}markForCheck(){Sv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Kd(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Cv(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[lo].get(EL,OC)}catch{this.exhaustive=OC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ns(this._lView),t=this._lView[ho];t!==null&&!e&&Dv(t,this._lView),WS(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Ns(this._lView),r=this._lView[ho];r!==null&&!t&&s0(r,this._lView),Kd(this._lView)}};var Io=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=QL;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=_L(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new yi(o)}}return n})();function QL(){return a0(Dt(),Ne())}function a0(n,e){return n.type&4?new Io(e,n,Th(n,e)):null}function Av(n,e,t,r,i){let o=n.data[e];if(o===null)o=YL(n,e,t,r,i),hC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=aC();o.injectorIndex=s===null?-1:s.injectorIndex}return Ms(o,!0),o}function YL(n,e,t,r,i){let o=Ey(),s=wy(),a=s?o:o&&o.parent,l=n.data[e]=JL(n,a,t,e,r,i);return ZL(n,l,o,s),l}function ZL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function JL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return iC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var VY=new RegExp(`^(\\d+)*(${PF}|${NF})*(.*)`);var XL=()=>null;function LC(n,e){return XL(n,e)}var c0=class{},Nh=class{},ev=class{resolveComponentFactory(e){throw new j(917,!1)}},Uc=class{static NULL=new ev},Yt=class{},Mr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>eV()}return n})();function eV(){let n=Ne(),e=Dt(),t=un(e.index,n);return(Hn(t)?t:n)[qe]}var l0=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>null})}return n})();var ah={},tv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ah,r);return i!==ah||t===ah?i:this.parentInjector.get(e,t,r)}};function VC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qm(i,a);else if(o==2){let l=a,u=e[++s];r=qm(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ce(n,e=0){let t=Ne();if(t===null)return $(n,e);let r=Dt();return mS(r,t,ht(n),e)}function Rv(){let n="invalid";throw new Error(n)}function u0(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,l,u]=h.resolveHostDirectives(s);break}rV(n,e,t,a,o,l,u)}o!==null&&r!==null&&tV(t,r,o)}function tV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function nV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rV(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let g=0;g<a;g++){let y=r[g];!l&&zn(y)&&(l=!0,nV(n,t,g)),qy(dh(t,e),n,y.type)}lV(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let u=!1,h=!1,p=BS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=xc(t.mergedAttrs,y.hostAttrs),oV(n,t,e,p,y),cV(p,y,i),s!==null&&s.has(y)){let[P,R]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!u&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}iV(n,t,o)}function iV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))jC(0,e,i,r),jC(1,e,i,r),BC(e,r,!1);else{let o=t.get(i);UC(0,e,o,r),UC(1,e,o,r),BC(e,r,!0)}}}function jC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),d0(e,o)}}function UC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),d0(e,s)}}function d0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function BC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||pv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function oV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=oo(i.type,!0)),s=new _o(o,zn(i),ce);n.blueprint[r]=s,t[r]=s,sV(n,e,r,BS(n,t,i.hostVars,_i),i)}function sV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;aV(s)!=a&&s.push(a),s.push(t,r,o)}}function aV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function cV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zn(e)&&(t[""]=n)}}function lV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function h0(n,e,t,r,i,o,s,a){let l=e.consts,u=bc(l,s),h=Av(e,n,2,r,u);return o&&u0(e,t,h,bc(l,a),i),h.mergedAttrs=xc(h.mergedAttrs,h.attrs),h.attrs!==null&&VC(h,h.attrs,!1),h.mergedAttrs!==null&&VC(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function f0(n,e){aS(n,e),py(e)&&n.queries.elementEnd(e)}function Nv(n){return g0(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function p0(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function g0(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Bc(n,e,t){if(t===_i)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ly(n,e,t){return function r(i){let o=pi(n)?un(n.index,e):e;Sv(o,5);let s=e[It],a=$C(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=$C(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function $C(n,e,t,r){let i=ae(null);try{return Se(6,e,t),t(r)!==!1}catch(o){return gL(n,o),!1}finally{Se(7,e,t),ae(i)}}function uV(n,e,t,r,i,o,s,a){let l=qd(n),u=!1,h=null;if(!r&&l&&(h=dV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=Dn(n,t),g=r?r(p):p;xF(t,g,o,a);let y=i.listen(g,o,a),C=r?P=>r(ln(P[n.index])):n.index;m0(C,e,t,o,a,y,!1)}return u}function dV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[As],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function m0(n,e,t,r,i,o,s){let a=e.firstCreatePass?eC(e):null,l=Xb(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function HC(n,e,t,r,i,o){let s=e[t],a=e[fe],u=a.data[t].outputs[r],p=s[u].subscribe(o);m0(n.index,a,e,i,o,p,!0)}var nv=Symbol("BINDING");var gh=class extends Uc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Bn(e);return new vi(t,this.ngModule)}};function hV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ah.SignalBased)!==0};return i&&(o.transform=i),o})}function fV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function pV(n,e,t){let r=e instanceof Me?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new tv(t,r):t}function gV(n){let e=n.get(Yt,null);if(e===null)throw new j(407,!1);let t=n.get(l0,null),r=n.get(Sr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function mV(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return LS(e,t,t==="svg"?Wb:t==="math"?Kb:null)}var vi=class extends Nh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=hV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=WF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Se(22);let a=ae(null);try{let l=this.componentDef,u=yV(r,l,s,o),h=pV(l,i||this.ngModule,e),p=gV(h),g=p.rendererFactory.createRenderer(null,l),y=r?rL(g,r,l.encapsulation,h):mV(l,g),C=s?.some(zC)||o?.some(F=>typeof F!="function"&&F.bindings.some(zC)),P=mv(null,u,null,512|US(l),null,null,p,g,h,null,SS(y,h,!0));P[cn]=y,Yd(P);let R=null;try{let F=h0(cn,u,P,"#host",()=>u.directiveRegistry,!0,0);y&&(jS(g,y,F),Vc(y,P)),vv(u,P,F),RS(u,F,P),f0(u,F),t!==void 0&&_V(F,this.ngContentSelectors,t),R=un(F.index,P),P[It]=R[It],Ev(u,P,null)}catch(F){throw R!==null&&Wy(R),Wy(P),F}finally{Se(23),Zd()}return new mh(this.componentType,P,!!C)}finally{ae(a)}}};function yV(n,e,t,r){let i=n?["ng-version","20.0.4"]:KF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[nv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[nv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let l=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=sy(p);l.push(g)}return gv(0,null,vV(o,s),1,a,l,null,null,null,[i],null)}function vV(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function zC(n){let e=n[nv].kind;return e==="input"||e==="twoWay"}var mh=class extends c0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Gd(t[fe],cn),this.location=Th(this._tNode,t),this.instance=un(this._tNode.index,t)[It],this.hostView=this.changeDetectorRef=new yi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=_v(r,i[fe],i,e,t);this.previousInputValues.set(e,t);let s=un(r.index,i);Sv(s,1)}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _V(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Kn=(()=>{class n{static __NG_ELEMENT_ID__=EV}return n})();function EV(){let n=Dt();return IV(n,Ne())}var wV=Kn,y0=class extends wV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Th(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){let e=lv(this._hostTNode,this._hostLView);if(uS(e)){let t=uh(e,this._hostLView),r=lh(e),i=t[fe].data[r+8];return new vo(i,t)}else return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=LC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,kC(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!oF(e),u;if(l)u=t;else{let R=t||{};u=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=l?e:new vi(Bn(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(l?p:this.parentInjector).get(Me,null);F&&(o=F)}let g=Bn(h.componentType??{}),y=LC(this._lContainer,g?.id??null),C=y?.firstChild??null,P=h.create(p,i,C,o,s,a);return this.insertImpl(P.hostView,u,kC(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Yb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ft],u=new y0(l,l[sn],l[ft]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return WL(s,i,o,r),e.attachToViewContainerRef(),ny(Vy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xy(this._lContainer,t);r&&(vc(Vy(this._lContainer),t),KS(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xy(this._lContainer,t);return r&&vc(Vy(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qC(n){return n[Dc]}function Vy(n){return n[Dc]||(n[Dc]=[])}function IV(n,e){let t,r=e[n.index];return In(r)?t=r:(t=o0(r,e,null,n),e[n.index]=t,yv(e,t)),TV(t,e,n,r),new y0(t,n,e)}function DV(n,e){let t=n[qe],r=t.createComment(""),i=Dn(e,n),o=t.parentNode(i);return ph(t,o,r,t.nextSibling(i),!1),r}var TV=SV,bV=()=>!1;function CV(n,e,t){return bV(n,e,t)}function SV(n,e,t,r){if(n[fi])return;let i;t.type&8?i=ln(r):i=DV(e,t),n[fi]=i}var GC=new Set;function Do(n){GC.has(n)||(GC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Eo=class{},Ph=class{};var yh=class extends Eo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=oy(e);this._bootstrapComponents=OS(o.bootstrap),this._r3Injector=Ay(e,t,[{provide:Eo,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vh=class extends Ph{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new yh(this.moduleType,e,[])}};var Oc=class extends Eo{injector;componentFactoryResolver=new gh(this);instance=null;constructor(e){super();let t=new ao([...e.providers,{provide:Eo,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver}],e.parent||Ss(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function js(n,e,t=null){return new Oc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var AV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ay(!1,t.type),i=r.length>0?js([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=O({token:n,providedIn:"environment",factory:()=>new n($(Me))})}return n})();function bt(n){return Fs(()=>{let e=v0(n),t=te(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(AV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||Kt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Do("NgStandalone"),_0(t);let r=n.dependencies;return t.directiveDefs=WC(r,!1),t.pipeDefs=WC(r,!0),t.id=xV(t),t})}function RV(n){return Bn(n)||sy(n)}function NV(n){return n!==null}function xt(n){return Fs(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PV(n,e){if(n==null)return di;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Ah.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function MV(n){if(n==null)return di;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function We(n){return Fs(()=>{let e=v0(n);return _0(e),e})}function v0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||di,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:PV(n.inputs,e),outputs:MV(n.outputs),debugInfo:null}}function _0(n){n.features?.forEach(e=>e(n))}function WC(n,e){if(!n)return null;let t=e?Bb:RV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(NV)}function xV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kV(n){return Object.getPrototypeOf(n.prototype).constructor}function Qn(n){let e=kV(n.type),t=!0,r=[n];for(;e;){let i;if(zn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=jy(n.inputs),s.declaredInputs=jy(n.declaredInputs),s.outputs=jy(n.outputs);let a=i.hostBindings;a&&jV(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&LV(n,l),u&&VV(n,u),OV(n,i),Ob(n.outputs,i.outputs),zn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qn&&(t=!1)}}e=Object.getPrototypeOf(e)}FV(r)}function OV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function FV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xc(i.hostAttrs,t=xc(t,i.hostAttrs))}}function jy(n){return n===di?{}:n===Kt?[]:n}function LV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function VV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function jV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function UV(n,e,t,r,i,o,s,a,l){let u=e.consts,h=Av(e,n,4,s||null,a||null);_y()&&u0(e,t,h,bc(u,l),GS),h.mergedAttrs=xc(h.mergedAttrs,h.attrs),aS(e,h);let p=h.tView=gv(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function BV(n,e,t,r,i,o,s,a,l,u,h){let p=t+cn,g=e.firstCreatePass?UV(p,e,n,r,i,o,s,a,u):e.data[p];l&&(g.flags|=l),Ms(g,!1);let y=$V(e,n,g,t);Xd()&&Tv(e,n,y,g),Vc(y,n);let C=o0(y,n,y,g);return n[p]=C,yv(n,C),CV(C,g,n),qd(g)&&vv(e,n,g),u!=null&&zS(n,g,h),g}function Ei(n,e,t,r,i,o,s,a){let l=Ne(),u=Bt(),h=bc(u.consts,o);return BV(l,u,n,e,t,r,i,h,void 0,s,a),Ei}var $V=HV;function HV(n,e,t,r){return eh(!0),e[qe].createComment("")}var Mh=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Mh||{}),To=new V(""),E0=!1,rv=class extends ee{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,uy()&&(this.destroyRef=S(Rr,{optional:!0})??void 0,this.pendingTasks=S(Nr,{optional:!0})??void 0)}emit(e){let t=ae(null);try{super.next(e)}finally{ae(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ee=rv;function w0(n){let e,t;function r(){n=Nc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function KC(n){return queueMicrotask(()=>n()),()=>{n=Nc}}var Pv="isAngularZone",_h=Pv+"_ID",zV=0,ue=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ee(!1);onMicrotaskEmpty=new Ee(!1);onStable=new Ee(!1);onError=new Ee(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=E0}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,WV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Pv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,qV,Nc,Nc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},qV={};function Mv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function GV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){w0(()=>{n.callbackScheduled=!1,iv(n),n.isCheckStableRunning=!0,Mv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),iv(n)}function WV(n){let e=()=>{GV(n)},t=zV++;n._inner=n._inner.fork({name:"angular",properties:{[Pv]:!0,[_h]:t,[_h+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(KV(l))return r.invokeTask(o,s,a,l);try{return QC(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YC(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return QC(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!QV(l)&&e(),YC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,iv(n),Mv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function iv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YC(n){n._nesting--,Mv(n)}var Eh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ee;onMicrotaskEmpty=new Ee;onStable=new Ee;onError=new Ee;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function KV(n){return I0(n,"__ignore_ng_zone__")}function QV(n){return I0(n,"__scheduler_tick__")}function I0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})(),D0=[0,1,2,3],T0=(()=>{class n{ngZone=S(ue);scheduler=S(Sr);errorHandler=S(En,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(To,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Se(16),this.executing=!0;for(let r of D0)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Se(17)}register(t){let{view:r}=t;r!==void 0?((r[go]??=[]).push(t),Ps(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Mh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})(),wh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[go];e&&(this.view[go]=e.filter(t=>t!==this))}};function bo(n,e){!e?.injector&&dy(bo);let t=e?.injector??S(Re);return Do("NgAfterNextRender"),ZV(n,t,e,!0)}function YV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function ZV(n,e,t,r){let i=e.get(xv);i.impl??=e.get(T0);let o=e.get(To,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Rr):null,a=e.get(th,null,{optional:!0}),l=new wh(i.impl,YV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var kv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ov=new V("");function wi(n){return!!n&&typeof n.then=="function"}function Fv(n){return!!n&&typeof n.subscribe=="function"}var Lv=new V("");function xh(n){return jt([{provide:Lv,multi:!0,useValue:n}])}var Vv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(Lv,{optional:!0})??[];injector=S(Re);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ze(this.injector,i);if(wi(o))t.push(o);else if(Fv(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$c=new V("");function b0(){gm(()=>{let n="";throw new j(600,n)})}function C0(n){return n.isBoundToModule}var JV=10;var xr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S($t);afterRenderManager=S(xv);zonelessEnabled=S(Rc);rootEffectScheduler=S(xy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ee;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(Nr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(J(t=>!t))}constructor(){S(To,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(Me);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Re.NULL){return this._injector.get(ue).run(()=>{Se(10);let s=t instanceof Nh;if(!this._injector.get(Vv).done){let C="";throw new j(405,C)}let l;s?l=t:l=this._injector.get(Uc).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=C0(l)?void 0:this._injector.get(Eo),h=r||l.selector,p=l.create(i,[],h,u),g=p.location.nativeElement,y=p.injector.get(Ov,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Mc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Se(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Mh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=ae(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ae(t),this.afterTick.next(),Se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Yt,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<JV;)Se(14),this.synchronizeOnce(),Se(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Cc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Cv(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Mc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get($c,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Mc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Co(n,e,t,r){let i=Ne(),o=Ac();if(Bc(i,o,e)){let s=Bt(),a=Jd();hL(a,i,n,e,t,r)}return Co}function Yn(n,e,t){let r=Ne(),i=Ac();if(Bc(r,i,e)){let o=Bt(),s=Jd();qS(s,r,n,e,r[qe],t)}return Yn}function ZC(n,e,t,r,i){_v(e,n,t,i?"class":"style",r)}function q(n,e,t,r){let i=Ne(),o=Bt(),s=cn+n,a=i[qe],l=o.firstCreatePass?h0(s,o,i,e,GS,_y(),t,r):o.data[s],u=XV(o,i,l,a,e,n);i[s]=u;let h=qd(l);return Ms(l,!0),jS(a,u,l),!Iv(l)&&Xd()&&Tv(o,i,u,l),(tC()===0||h)&&Vc(u,i),nC(),h&&(vv(o,i,l),RS(o,l,i)),r!==null&&zS(i,l),q}function z(){let n=Dt();wy()?cC():(n=n.parent,Ms(n,!1));let e=n;oC(e)&&sC(),rC();let t=Bt();return t.firstCreatePass&&f0(t,e),e.classesWithoutHost!=null&&dF(e)&&ZC(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hF(e)&&ZC(t,e,Ne(),e.stylesWithoutHost,!1),z}function kr(n,e,t,r){return q(n,e,t,r),z(),kr}var XV=(n,e,t,r,i,o)=>(eh(!0),LS(r,i,EC()));function Ii(){return Ne()}var Hc="en-US";var e2=Hc;function S0(n){typeof n=="string"&&(e2=n.toLowerCase().replace(/_/g,"-"))}function Ue(n,e,t){let r=Ne(),i=Bt(),o=Dt();return A0(i,r,r[qe],o,n,e,t),Ue}function A0(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Ly(r,e,o),uV(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];l??=Ly(r,e,o),HC(r,e,g,y,i,l)}if(u&&u.length)for(let p of u)l??=Ly(r,e,o),HC(r,e,p,i,i,l)}}function it(n=1){return _C(n)}function jv(n){let e=lC();return Qb(e,cn+n)}function ih(n,e){return n<<17|e<<2}function wo(n){return n>>17&32767}function t2(n){return(n&2)==2}function n2(n,e){return n&131071|e<<17}function ov(n){return n|2}function Os(n){return(n&131068)>>2}function Uy(n,e){return n&-131069|e<<2}function r2(n){return(n&1)===1}function sv(n){return n|1}function i2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=wo(s),l=Os(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Cs(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let g=wo(n[a+1]);n[r+1]=ih(g,a),g!==0&&(n[g+1]=Uy(n[g+1],r)),n[a+1]=n2(n[a+1],r)}else n[r+1]=ih(a,0),a!==0&&(n[a+1]=Uy(n[a+1],r)),a=r;else n[r+1]=ih(l,0),a===0?a=r:n[l+1]=Uy(n[l+1],r),l=r;u&&(n[r+1]=ov(n[r+1])),JC(n,h,r,!0),JC(n,h,r,!1),o2(e,h,n,r,o),s=ih(a,l),o?e.classBindings=s:e.styleBindings=s}function o2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Cs(o,e)>=0&&(t[r+1]=sv(t[r+1]))}function JC(n,e,t,r){let i=n[t+1],o=e===null,s=r?wo(i):Os(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];s2(l,e)&&(a=!0,n[s+1]=r?sv(u):ov(u)),s=r?wo(u):Os(u)}a&&(n[t+1]=r?ov(i):sv(i))}function s2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cs(n,e)>=0:!1}function Cn(n,e){return a2(n,e,null,!0),Cn}function a2(n,e,t,r){let i=Ne(),o=Bt(),s=dC(2);if(o.firstUpdatePass&&l2(o,n,s,r),e!==_i&&Bc(i,s,e)){let a=o.data[yo()];p2(o,a,i,i[qe],n,i[s+1]=g2(e,t),r,s)}}function c2(n,e){return e>=n.expandoStartIndex}function l2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yo()],s=c2(n,t);m2(o,r)&&e===null&&!s&&(e=!1),e=u2(i,o,e,r),i2(i,o,e,t,s,r)}}function u2(n,e,t,r){let i=gC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=By(null,n,e,t,r),t=Fc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=By(i,n,e,t,r),o===null){let l=d2(n,e,r);l!==void 0&&Array.isArray(l)&&(l=By(null,n,e,l[1],r),l=Fc(l,e.attrs,r),h2(n,e,r,l))}else o=f2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function d2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Os(r)!==0)return n[wo(r)]}function h2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[wo(i)]=r}function f2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Fc(r,s,t)}return Fc(r,e.attrs,t)}function By(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Fc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Fc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ub(n,s,t?!0:e[++o]))}return n===void 0?null:n}function p2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=r2(u)?XC(l,e,t,i,Os(u),s):void 0;if(!Ih(h)){Ih(o)||t2(u)&&(o=XC(l,null,t,i,a,s));let p=gy(yo(),t);kL(r,s,p,i,o)}}function XC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,g=t[i+1];g===_i&&(g=p?Kt:void 0);let y=p?Hd(g,r):h===r?g:void 0;if(u&&!Ih(y)&&(y=Hd(l,r)),Ih(y)&&(a=y,s))return a;let C=n[i+1];i=s?wo(C):Os(C)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Hd(l,r))}return a}function Ih(n){return n!==void 0}function g2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vt(jc(n)))),n}function m2(n,e){return(n.flags&(e?8:16))!==0}function Y(n,e=""){let t=Ne(),r=Bt(),i=n+cn,o=r.firstCreatePass?Av(r,i,1,e,null):r.data[i],s=y2(r,t,o,e,n);t[i]=s,Xd()&&Tv(r,t,s,o),Ms(o,!1)}var y2=(n,e,t,r,i)=>(eh(!0),QF(e[qe],r));function v2(n,e,t,r=""){return Bc(n,Ac(),t)?e+yc(t)+r:_i}function Zn(n){return So("",n),Zn}function So(n,e,t){let r=Ne(),i=v2(r,n,e,t);return i!==_i&&_2(r,yo(),i),So}function _2(n,e,t){let r=gy(e,n);YF(n[qe],r,t)}function zc(n,e,t){Ny(e)&&(e=e());let r=Ne(),i=Ac();if(Bc(r,i,e)){let o=Bt(),s=Jd();qS(s,r,n,e,r[qe],t)}return zc}function kh(n,e){let t=Ny(n);return t&&n.set(e),t}function qc(n,e){let t=Ne(),r=Bt(),i=Dt();return A0(r,t,t[qe],i,n,e),qc}function E2(n,e,t){let r=Bt();if(r.firstCreatePass){let i=zn(n);av(t,r.data,r.blueprint,i,!0),av(e,r.data,r.blueprint,i,!1)}}function av(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)av(n[o],e,t,r,i);else{let o=Bt(),s=Ne(),a=Dt(),l=so(n)?n:ht(n.provide),u=ly(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(so(n)||!n.multi){let y=new _o(u,i,ce),C=Hy(l,e,i?h:h+g,p);C===-1?(qy(dh(a,s),o,l),$y(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=Hy(l,e,h+g,p),C=Hy(l,e,h,h+g),P=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!P){qy(dh(a,s),o,l);let F=D2(i?I2:w2,t.length,i,r,u);!i&&R&&(t[C].providerFactory=F),$y(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=R0(t[i?C:y],u,!i&&r);$y(o,n,y>-1?y:C,F)}!i&&r&&R&&t[C].componentProviders++}}}function $y(n,e,t,r){let i=so(e),o=qb(e);if(i||o){let l=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function R0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function w2(n,e,t,r){return cv(this.multi,[])}function I2(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=hh(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),cv(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],cv(i,o);return o}function cv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function D2(n,e,t,r,i){let o=new _o(n,t,ce);return o.multi=[],o.index=e,o.componentProviders=0,R0(o,i,r&&!t),o}function Or(n,e=[]){return t=>{t.providersResolver=(r,i)=>E2(r,i?i(n):n,e)}}function Uv(n,e){return a0(n,e)}var Dh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Bv=(()=>{class n{compileModuleSync(t){return new vh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=oy(t),o=OS(i.declarations).reduce((s,a)=>{let l=Bn(a);return l&&s.push(new vi(l)),s},[]);return new Dh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T2=(()=>{class n{zone=S(ue);changeDetectionScheduler=S(Sr);applicationRef=S(xr);applicationErrorHandler=S($t);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N0=new V("",{factory:()=>!1});function $v({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ue(te(k({},zv()),{scheduleInRootZone:t})),[{provide:ue,useFactory:n},{provide:hi,multi:!0,useFactory:()=>{let r=S(T2,{optional:!0});return()=>r.initialize()}},{provide:hi,multi:!0,useFactory:()=>{let r=S(b2);return()=>{r.initialize()}}},e===!0?{provide:Py,useValue:!0}:[],{provide:My,useValue:t??E0},{provide:$t,useFactory:()=>{let r=S(ue),i=S(Me),o;return s=>{o??=i.get(En),r.runOutsideAngular(()=>o.handleError(s))}}}]}function Hv(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=$v({ngZoneFactory:()=>{let i=zv(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Do("NgZone_CoalesceEvent"),new ue(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return jt([{provide:N0,useValue:!0},{provide:Rc,useValue:!1},r])}function zv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var b2=(()=>{class n{subscription=new De;initialized=!1;zone=S(ue);pendingTasks=S(Nr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var P0=(()=>{class n{applicationErrorHandler=S($t);appRef=S(xr);taskService=S(Nr);ngZone=S(ue);zonelessEnabled=S(Rc);tracing=S(To,{optional:!0});disableScheduling=S(Py,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new De;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_h):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(My,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Eh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?KC:w0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_h+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C2(){return typeof $localize<"u"&&$localize.locale||Hc}var Oh=new V("",{providedIn:"root",factory:()=>S(Oh,{optional:!0,skipSelf:!0})||C2()});function dn(n){return Pb(n)}function Us(n,e){return ed(n,e?.equal)}var M0=class{[_t];constructor(e){this[_t]=e}destroy(){this[_t].destroy()}};var j0=Symbol("InputSignalNode#UNSET"),W2=te(k({},td),{transformFn:void 0,applyValueToInputSignal(n,e){hs(n,e)}});function U0(n,e){let t=Object.create(W2);t.value=n,t.transformFn=e?.transform;function r(){if(us(t),t.value===j0){let i=null;throw new j(-950,i)}return t.value}return r[_t]=t,r}var Lh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Lc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},K2=new V("");K2.__NG_ELEMENT_ID__=n=>{let e=Dt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function x0(n,e){return U0(n,e)}function Q2(n){return U0(j0,n)}var B0=(x0.required=Q2,x0);var Ao=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$0=new Ao("20.0.4");var qv=new V(""),Y2=new V("");function Gc(n){return!n.moduleRef}function Z2(n){let e=Gc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ue);return t.run(()=>{Gc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($t),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Gc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(qv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(qv);s.add(o),n.moduleRef.onDestroy(()=>{Mc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return X2(r,t,()=>{let o=e.get(Vv);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Oh,Hc);if(S0(s||Hc),!e.get(Y2,!0))return Gc(n)?e.get(xr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Gc(n)){let l=e.get(xr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return J2?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var J2;function X2(n,e,t){try{let r=t();return wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Fh=null;function ej(n=[],e){return Re.create({name:e,providers:[{provide:_c,useValue:"platform"},{provide:qv,useValue:new Set([()=>Fh=null])},...n]})}function tj(n=[]){if(Fh)return Fh;let e=ej(n);return Fh=e,b0(),nj(e),e}function nj(n){let e=n.get(bh,null);Ze(n,()=>{e?.forEach(t=>t())})}function Yv(){return!1}var Sn=(()=>{class n{static __NG_ELEMENT_ID__=rj}return n})();function rj(n){return ij(Dt(),Ne(),(n&16)===16)}function ij(n,e,t){if(pi(n)&&!t){let r=un(n.index,e);return new yi(r,r)}else if(n.type&175){let r=e[an];return new yi(r,e)}return null}var Gv=class{constructor(){}supports(e){return Nv(e)}create(e){return new Wv(e)}},oj=(n,e)=>e,Wv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||oj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<k0(r,i,o)?t:r,a=k0(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=l-i;if(u!=h){for(let g=0;g<u;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;h<=C&&C<u&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Nv(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,p0(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Kv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Vh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Vh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Qv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Vh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Qv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function k0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function O0(){return new jh([new Gv])}var jh=(()=>{class n{factories;static \u0275prov=O({token:n,providedIn:"root",factory:O0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||O0()),deps:[[n,new nS,new Pt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function H0(n){Se(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=tj(r),o=[$v({}),{provide:Sr,useExisting:P0},IC,...t||[]],s=new Oc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Z2({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Se(9)}}function Zt(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Zv(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function z0(n,e){let t=Bn(n),r=e.elementInjector||Ss();return new vi(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function q0(n){let e=Bn(n);if(!e)return null;let t=new vi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var K0=null;function hn(){return K0}function Jv(n){K0??=n}var Kc=class{},Qc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S(Q0),providedIn:"platform"})}return n})(),Xv=new V(""),Q0=(()=>{class n extends Qc{_location;_history;_doc=S(Ce);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hn().getBaseHref(this._doc)}onPopState(t){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Uh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function G0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function An(n){return n&&n[0]!=="?"?`?${n}`:n}var Rn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S($h),providedIn:"root"})}return n})(),Bh=new V(""),$h=(()=>{class n extends Rn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Uh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+An(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+An(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+An(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Qc),$(Bh,8))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Di=(()=>{class n{_subject=new ee;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cj(G0(W0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+An(r))}normalize(t){return n.stripTrailingSlash(aj(this._basePath,W0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+An(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+An(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=An;static joinWithSlash=Uh;static stripTrailingSlash=G0;static \u0275fac=function(r){return new(r||n)($(Rn))};static \u0275prov=O({token:n,factory:()=>sj(),providedIn:"root"})}return n})();function sj(){return new Di($(Rn))}function aj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function W0(n){return n.replace(/\/index.html$/,"")}function cj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var e_=(()=>{class n extends Rn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Uh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+An(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+An(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Qc),$(Bh,8))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var Hh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qh=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Hh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Y0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Y0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(Kn),ce(Io),ce(jh))};static \u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Y0(n,e){n.context.$implicit=e.item}var Yc=(()=>{class n{_viewContainer;_context=new zh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Z0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Z0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(Kn),ce(Io))};static \u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),zh=class{$implicit=null;ngIf=null};function Z0(n,e){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}var Jn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({})}return n})();function Zc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ro=class{};var n_="browser",lj="server";function J0(n){return n===n_}function X0(n){return n===lj}var eA=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>new t_(S(Ce),window)})}return n})(),t_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(te(k({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=uj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(te(k({},t),{left:i-s[0],top:o-s[1]}))}};function uj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Kh=new V(""),a_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)($(Kh),$(ue))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Jc=class{_doc;constructor(e){this._doc=e}manager},Gh="ng-app-id";function tA(n){for(let e of n)e.remove()}function nA(n,e){let t=e.createElement("style");return t.textContent=n,t}function dj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Gh}="${e}"],link[${Gh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Gh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function o_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var c_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=X0(o),dj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,nA);r?.forEach(i=>this.addUsage(i,this.external,o_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(tA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])tA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,nA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,o_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Gh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)($(Ce),$(Vs),$(Ch,8),$(Wn))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),i_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},l_=/%COMP%/g;var iA="%COMP%",hj=`_nghost-${iA}`,fj=`_ngcontent-${iA}`,pj=!0,gj=new V("",{providedIn:"root",factory:()=>pj});function mj(n){return fj.replace(l_,n)}function yj(n){return hj.replace(l_,n)}function oA(n,e){return e.map(t=>t.replace(l_,n))}var u_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Xc(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Wh?i.applyToHost(t):i instanceof el&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Pr.Emulated:o=new Wh(l,u,r,this.appId,h,s,a,p,g);break;case Pr.ShadowDom:return new s_(l,u,t,r,s,a,this.nonce,p,g);default:o=new el(l,u,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)($(a_),$(c_),$(Vs),$(gj),$(Ce),$(Wn),$(ue),$(Ch),$(To,8))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Xc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(i_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(rA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=i_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=i_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(t,r,i&Gn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=hn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function rA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var s_=class extends Xc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=oA(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=o_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},el=class extends Xc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?oA(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wh=class extends el{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,l,u,h),this.contentAttr=mj(h),this.hostAttr=yj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Qh=class n extends Kc{supportsDOMEvents=!0;static makeCurrent(){Jv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vj();return t==null?null:_j(t)}resetBaseElement(){tl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zc(document.cookie,e)}},tl=null;function vj(){return tl=tl||document.head.querySelector("base"),tl?tl.getAttribute("href"):null}function _j(n){return new URL(n,document.baseURI).pathname}var Ej=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),aA=(()=>{class n extends Jc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)($(Ce))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),sA=["alt","control","meta","shift"],wj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ij={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cA=(()=>{class n extends Jc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sA.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=wj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sA.forEach(s=>{if(s!==i){let a=Ij[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)($(Ce))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function d_(n,e){return H0(k({rootComponent:n},Dj(e)))}function Dj(n){return{appProviders:[...Aj,...n?.providers??[]],platformProviders:Sj}}function Tj(){Qh.makeCurrent()}function bj(){return new En}function Cj(){return dv(document),document}var Sj=[{provide:Wn,useValue:n_},{provide:bh,useValue:Tj,multi:!0},{provide:Ce,useFactory:Cj}];var Aj=[{provide:_c,useValue:"root"},{provide:En,useFactory:bj},{provide:Kh,useClass:aA,multi:!0,deps:[Ce]},{provide:Kh,useClass:cA,multi:!0,deps:[Ce]},u_,c_,a_,{provide:Yt,useExisting:u_},{provide:Ro,useClass:Ej},[]];var $s=class{},nl=class{},Ti=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Zh=class{encodeKey(e){return lA(e)}encodeValue(e){return lA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Rj(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var Nj=/%(\d[a-f0-9])/gi,Pj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lA(n){return encodeURIComponent(n).replace(Nj,(e,t)=>Pj[t]??e)}function Yh(n){return`${n}`}var Fr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Zh,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=Rj(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Yh):[Yh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Yh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Yh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Jh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Mj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function uA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function dA(n){return typeof Blob<"u"&&n instanceof Blob}function hA(n){return typeof FormData<"u"&&n instanceof FormData}function xj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var fA="Content-Type",pA="Accept",gA="X-Request-URL",mA="text/plain",yA="application/json",kj=`${yA}, ${mA}, */*`,Bs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(Mj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ti,this.context??=new Jh,!this.params)this.params=new Fr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||uA(this.body)||dA(this.body)||hA(this.body)||xj(this.body)?this.body:this.body instanceof Fr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||hA(this.body)?null:dA(this.body)?this.body.type||null:uA(this.body)?null:typeof this.body=="string"?mA:this.body instanceof Fr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?yA:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:g,reportProgress:u,responseType:i,withCredentials:l,transferCache:s,keepalive:o})}},No=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(No||{}),Hs=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ti,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Xh=class n extends Hs{constructor(e={}){super(e)}type=No.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},rl=class n extends Hs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=No.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},il=class extends Hs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Oj=200,Fj=204;function h_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var tf=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Bs)o=t;else{let l;i.headers instanceof Ti?l=i.headers:l=new Ti(i.headers);let u;i.params&&(i.params instanceof Fr?u=i.params:u=new Fr({fromObject:i.params})),o=new Bs(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=G(o).pipe(jn(l=>this.handler.handle(l)));if(t instanceof Bs||i.observe==="events")return s;let a=s.pipe(rt(l=>l instanceof rl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new j(2806,!1);return l.body}));case"blob":return a.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new j(2807,!1);return l.body}));case"text":return a.pipe(J(l=>{if(l.body!==null&&typeof l.body!="string")throw new j(2808,!1);return l.body}));case"json":default:return a.pipe(J(l=>l.body))}case"response":return a;default:throw new j(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Fr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,h_(i,r))}post(t,r,i={}){return this.request("POST",t,h_(i,r))}put(t,r,i={}){return this.request("PUT",t,h_(i,r))}static \u0275fac=function(r){return new(r||n)($($s))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var Lj=new V("");function Vj(n,e){return e(n)}function jj(n,e,t){return(r,i)=>Ze(t,()=>e(r,o=>n(o,i)))}var vA=new V(""),_A=new V(""),EA=new V("",{providedIn:"root",factory:()=>!0});var ef=(()=>{class n extends $s{backend;injector;chain=null;pendingTasks=S(mi);contributeToStability=S(EA);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(vA),...this.injector.get(_A,[])]));this.chain=r.reduceRight((i,o)=>jj(i,o,this.injector),Vj)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(no(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)($(nl),$(Me))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var Uj=/^\)\]\}',?\n/,Bj=RegExp(`^${gA}:`,"m");function $j(n){return"responseURL"in n&&n.responseURL?n.responseURL:Bj.test(n.getAllResponseHeaders())?n.getResponseHeader(gA):null}var f_=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new j(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?_e(r.\u0275loadImpl()):G(null)).pipe(je(()=>new W(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((P,R)=>s.setRequestHeader(P,R.join(","))),t.headers.has(pA)||s.setRequestHeader(pA,kj),!t.headers.has(fA)){let P=t.detectContentTypeHeader();P!==null&&s.setRequestHeader(fA,P)}if(t.responseType){let P=t.responseType.toLowerCase();s.responseType=P!=="json"?P:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let P=s.statusText||"OK",R=new Ti(s.getAllResponseHeaders()),F=$j(s)||t.url;return l=new Xh({headers:R,status:s.status,statusText:P,url:F}),l},h=()=>{let{headers:P,status:R,statusText:F,url:K}=u(),H=null;R!==Fj&&(H=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=H?Oj:0);let ye=R>=200&&R<300;if(t.responseType==="json"&&typeof H=="string"){let Qe=H;H=H.replace(Uj,"");try{H=H!==""?JSON.parse(H):null}catch(Ie){H=Qe,ye&&(ye=!1,H={error:Ie,text:H})}}ye?(o.next(new rl({body:H,headers:P,status:R,statusText:F,url:K||void 0})),o.complete()):o.error(new il({error:H,headers:P,status:R,statusText:F,url:K||void 0}))},p=P=>{let{url:R}=u(),F=new il({error:P,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(F)},g=!1,y=P=>{g||(o.next(u()),g=!0);let R={type:No.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=P=>{let R={type:No.UploadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:No.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)($(Ro))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),wA=new V(""),Hj="XSRF-TOKEN",zj=new V("",{providedIn:"root",factory:()=>Hj}),qj="X-XSRF-TOKEN",Gj=new V("",{providedIn:"root",factory:()=>qj}),ol=class{},Wj=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)($(Ce),$(zj))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function Kj(n,e){let t=n.url.toLowerCase();if(!S(wA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=S(ol).getToken(),i=S(Gj);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function p_(...n){let e=[tf,f_,ef,{provide:$s,useExisting:ef},{provide:nl,useFactory:()=>S(Lj,{optional:!0})??S(f_)},{provide:vA,useValue:Kj,multi:!0},{provide:wA,useValue:!0},{provide:ol,useClass:Wj}];for(let t of n)e.push(...t.\u0275providers);return jt(e)}var IA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)($(Ce))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se="primary",vl=Symbol("RouteTitle"),__=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xo(n){return new __(n)}function NA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xn(n[t],e[t]))return!1;return!0}function Xn(n,e){let t=n?E_(n):void 0,r=e?E_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!PA(n[i],e[i]))return!1;return!0}function E_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function MA(n){return n.length>0?n[n.length-1]:null}function Lr(n){return Sd(n)?n:wi(n)?_e(Promise.resolve(n)):G(n)}var Jj={exact:kA,subset:OA},xA={exact:Xj,subset:eU,ignored:()=>!0};function DA(n,e,t){return Jj[t.paths](n.root,e.root,t.matrixParams)&&xA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Xj(n,e){return Xn(n,e)}function kA(n,e,t){if(!Po(n.segments,e.segments)||!of(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kA(n.children[r],e.children[r],t))return!1;return!0}function eU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PA(n[t],e[t]))}function OA(n,e,t){return FA(n,e,e.segments,t)}function FA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Po(i,t)||e.hasChildren()||!of(i,t,r))}else if(n.segments.length===t.length){if(!Po(n.segments,t)||!of(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Po(n.segments,i)||!of(n.segments,i,r)||!n.children[se]?!1:FA(n.children[se],e,o,r)}}function of(n,e,t){return e.every((r,i)=>xA[t](n[i].parameters,r.parameters))}var tr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){return rU.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sf(this)}},bi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xo(this.parameters),this._parameterMap}toString(){return VA(this)}};function tU(n,e){return Po(n,e)&&n.every((t,r)=>Xn(t.parameters,e[r].parameters))}function Po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var ko=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new Ci,providedIn:"root"})}return n})(),Ci=class{parse(e){let t=new I_(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${sl(e.root,!0)}`,r=sU(e.queryParams),i=typeof e.fragment=="string"?`#${iU(e.fragment)}`:"";return`${t}${r}${i}`}},rU=new Ci;function sf(n){return n.segments.map(e=>VA(e)).join("/")}function sl(n,e){if(!n.hasChildren())return sf(n);if(e){let t=n.children[se]?sl(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${sl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nU(n,(r,i)=>i===se?[sl(n.children[se],!1)]:[`${i}:${sl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${sf(n)}/${t[0]}`:`${sf(n)}/(${t.join("//")})`}}function LA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nf(n){return LA(n).replace(/%3B/gi,";")}function iU(n){return encodeURI(n)}function w_(n){return LA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function af(n){return decodeURIComponent(n)}function TA(n){return af(n.replace(/\+/g,"%20"))}function VA(n){return`${w_(n.path)}${oU(n.parameters)}`}function oU(n){return Object.entries(n).map(([e,t])=>`;${w_(e)}=${w_(t)}`).join("")}function sU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nf(t)}=${nf(i)}`).join("&"):`${nf(t)}=${nf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var aU=/^[^\/()?;#]+/;function g_(n){let e=n.match(aU);return e?e[0]:""}var cU=/^[^\/()?;=#]+/;function lU(n){let e=n.match(cU);return e?e[0]:""}var uU=/^[^=?&#]+/;function dU(n){let e=n.match(uU);return e?e[0]:""}var hU=/^[^&#]+/;function fU(n){let e=n.match(hU);return e?e[0]:""}var I_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new Te(e,t)),r}parseSegment(){let e=g_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new bi(af(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=lU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=g_(this.remaining);i&&(r=i,this.capture(r))}e[af(t)]=af(r)}parseQueryParam(e){let t=dU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=fU(this.remaining);s&&(r=s,this.capture(r))}let i=TA(t),o=TA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=g_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[se]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function jA(n){return n.segments.length>0?new Te([],{[se]:n}):n}function UA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=UA(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return pU(t)}function pU(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new Te(n.segments.concat(e.segments),e.children)}return n}function Si(n){return n instanceof tr}function BA(n,e,t=null,r=null){let i=$A(n);return HA(i,e,t,r)}function $A(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=jA(r);return e??i}function HA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return m_(i,i,i,t,r);let o=gU(e);if(o.toRoot())return m_(i,i,new Te([],{}),t,r);let s=mU(o,i,n),a=s.processChildren?cl(s.segmentGroup,s.index,o.commands):qA(s.segmentGroup,s.index,o.commands);return m_(i,s.segmentGroup,a,t,r)}function cf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ul(n){return typeof n=="object"&&n!=null&&n.outlets}function m_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=zA(n,e,t);let a=jA(UA(s));return new tr(a,o,i)}function zA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=zA(o,e,t)}),new Te(n.segments,r)}var lf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cf(r[0]))throw new j(4003,!1);let i=r.find(ul);if(i&&i!==MA(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lf(t,e,r)}var Gs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mU(n,e,t){if(n.isAbsolute)return new Gs(e,!0,0);if(!t)return new Gs(e,!1,NaN);if(t.parent===null)return new Gs(t,!0,0);let r=cf(n.commands[0])?0:1,i=t.segments.length-1+r;return yU(t,i,n.numberOfDoubleDots)}function yU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Gs(r,!1,i-o)}function vU(n){return ul(n[0])?n[0].outlets:{[se]:n}}function qA(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return cl(n,e,t);let r=_U(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[se]=new Te(n.segments.slice(r.pathIndex),n.children),cl(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?D_(n,e,t):r.match?cl(n,0,i):D_(n,e,t)}function cl(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=vU(t),i={};if(Object.keys(r).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=cl(n.children[se],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function _U(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ul(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!CA(l,u,s))return o;r+=2}else{if(!CA(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function D_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ul(o)){let l=EU(o.outlets);return new Te(r,l)}if(i===0&&cf(t[0])){let l=n.segments[e];r.push(new bi(l.path,bA(t[0]))),i++;continue}let s=ul(o)?o.outlets[se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&cf(a)?(r.push(new bi(s,bA(a))),i+=2):(r.push(new bi(s,{})),i++)}return new Te(r,{})}function EU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=D_(new Te([],{}),0,r))}),e}function bA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CA(n,e,t){return n==t.path&&Xn(e,t.parameters)}var Ws="imperative",ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ot||{}),Xt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ai=class extends Xt{type=ot.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fn=class extends Xt{urlAfterRedirects;type=ot.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(kt||{}),Qs=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qs||{}),er=class extends Xt{reason;code;type=ot.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nr=class extends Xt{reason;code;type=ot.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ys=class extends Xt{error;target;type=ot.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dl=class extends Xt{urlAfterRedirects;state;type=ot.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class extends Xt{urlAfterRedirects;state;type=ot.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},df=class extends Xt{urlAfterRedirects;state;shouldActivate;type=ot.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hf=class extends Xt{urlAfterRedirects;state;type=ot.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ff=class extends Xt{urlAfterRedirects;state;type=ot.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pf=class{route;type=ot.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gf=class{route;type=ot.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mf=class{snapshot;type=ot.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yf=class{snapshot;type=ot.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vf=class{snapshot;type=ot.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_f=class{snapshot;type=ot.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zs=class{routerEvent;position;anchor;type=ot.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hl=class{},Js=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wU(n){return!(n instanceof hl)&&!(n instanceof Js)}function IU(n,e){return n.providers&&!n._injector&&(n._injector=js(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Nn(n){return n.outlet||se}function DU(n,e){let t=n.filter(r=>Nn(r)===e);return t.push(...n.filter(r=>Nn(r)!==e)),t}function _l(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ef=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _l(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Oo(this.rootInjector)}},Oo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ef(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)($(Me))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=T_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=T_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=b_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return b_(e,this._root).map(t=>t.value)}};function T_(n,e){if(n===e.value)return e;for(let t of e.children){let r=T_(n,t);if(r)return r}return null}function b_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=b_(n,t);if(r.length)return r.unshift(e),r}return[]}var Jt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fl=class extends wf{snapshot;constructor(e,t){super(e),this.snapshot=t,x_(this,e)}toString(){return this.snapshot.toString()}};function GA(n){let e=TU(n),t=new nt([new bi("",{})]),r=new nt({}),i=new nt({}),o=new nt({}),s=new nt(""),a=new rr(t,r,o,s,i,se,n,e.root);return a.snapshot=e.root,new fl(new Jt(a,[]),e)}function TU(n){let e={},t={},r={},i="",o=new Mo([],e,r,i,t,se,n,null,{});return new pl("",new Jt(o,[]))}var rr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[vl]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function If(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&KA(i)&&(r.resolve[vl]=i.title),r}var Mo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vl]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},pl=class extends wf{url;constructor(e,t){super(t),this.url=e,x_(this,t)}toString(){return WA(this._root)}};function x_(n,e){e.value._routerState=n,e.children.forEach(t=>x_(n,t))}function WA(n){let e=n.children.length>0?` { ${n.children.map(WA).join(", ")} } `:"";return`${n.value}${e}`}function y_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xn(e.params,t.params)||n.paramsSubject.next(t.params),Zj(e.url,t.url)||n.urlSubject.next(t.url),Xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function C_(n,e){let t=Xn(n.params,e.params)&&tU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||C_(n.parent,e.parent))}function KA(n){return typeof n.title=="string"||n.title===null}var QA=new V(""),El=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new Ee;deactivateEvents=new Ee;attachEvents=new Ee;detachEvents=new Ee;routerOutletData=B0(void 0);parentContexts=S(Oo);location=S(Kn);changeDetector=S(Sn);inputBinder=S(wl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new S_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bn]})}return n})(),S_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===rr?this.route:e===Oo?this.childContexts:e===QA?this.outletData:this.parent.get(e,t)}},wl=new V(""),k_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=cc([r.queryParams,r.params,r.data]).pipe(je(([o,s,a],l)=>(a=k(k(k({},o),s),a),l===0?G(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=q0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),O_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=bt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&kr(0,"router-outlet")},dependencies:[El],encapsulation:2})}return n})();function F_(n){let e=n.children&&n.children.map(F_),t=e?te(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=O_),t}function bU(n,e,t){let r=gl(n,e._root,t?t._root:void 0);return new fl(r,e)}function gl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=CU(n,e,t);return new Jt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gl(n,a)),s}}let r=SU(e.value),i=e.children.map(o=>gl(n,o));return new Jt(r,i)}}function CU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gl(n,r,i);return gl(n,r)})}function SU(n){return new rr(new nt(n.url),new nt(n.params),new nt(n.queryParams),new nt(n.fragment),new nt(n.data),n.outlet,n.component,n)}var Xs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},YA="ngNavigationCancelingError";function Df(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Si(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ZA(!1,kt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ZA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[YA]=!0,t.cancellationCode=e,t}function AU(n){return JA(n)&&Si(n.url)}function JA(n){return!!n&&n[YA]}var RU=(n,e,t,r)=>J(i=>(new A_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),A_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),y_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _f(o.value.snapshot))}),e.children.length&&this.forwardEvent(new yf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(y_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),y_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Tf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ks=class{component;route;constructor(e,t){this.component=e,this.route=t}};function NU(n,e,t){let r=n._root,i=e?e._root:null;return al(r,i,t,[r.value])}function PU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ta(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Wm(n)?n:e.get(n):r}function al(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qs(e);return n.children.forEach(s=>{MU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ll(a,t.getContext(s),i)),i}function MU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=xU(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Tf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?al(n,e,a?a.children:null,r,i):al(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ks(a.outlet.component,s))}else s&&ll(e,a,i),i.canActivateChecks.push(new Tf(r)),o.component?al(n,null,a?a.children:null,r,i):al(n,null,t,r,i);return i}function xU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Po(n.url,e.url)||!Xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!C_(n,e)||!Xn(n.queryParams,e.queryParams);case"paramsChange":default:return!C_(n,e)}}function ll(n,e,t){let r=qs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ll(s,e.children.getContext(o),t):ll(s,null,t):ll(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ks(e.outlet.component,i)):t.canDeactivateChecks.push(new Ks(null,i)):t.canDeactivateChecks.push(new Ks(null,i))}function Il(n){return typeof n=="function"}function kU(n){return typeof n=="boolean"}function OU(n){return n&&Il(n.canLoad)}function FU(n){return n&&Il(n.canActivate)}function LU(n){return n&&Il(n.canActivateChild)}function VU(n){return n&&Il(n.canDeactivate)}function jU(n){return n&&Il(n.canMatch)}function XA(n){return n instanceof Dr||n?.name==="EmptyError"}var rf=Symbol("INITIAL_VALUE");function ea(){return je(n=>cc(n.map(e=>e.pipe(Nt(1),li(rf)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===rf)return rf;if(t===!1||UU(t))return t}return!0}),rt(e=>e!==rf),Nt(1)))}function UU(n){return Si(n)||n instanceof Xs}function BU(n,e){return ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?G(te(k({},t),{guardsResult:!0})):$U(s,r,i,n).pipe(ze(a=>a&&kU(a)?HU(r,o,n,e):G(a)),J(a=>te(k({},t),{guardsResult:a})))})}function $U(n,e,t,r){return _e(n).pipe(ze(i=>KU(i.component,i.route,t,e,r)),br(i=>i!==!0,!0))}function HU(n,e,t,r){return _e(e).pipe(jn(i=>Ds(qU(i.route.parent,r),zU(i.route,r),WU(n,i.path,t),GU(n,i.route,t))),br(i=>i!==!0,!0))}function zU(n,e){return n!==null&&e&&e(new vf(n)),G(!0)}function qU(n,e){return n!==null&&e&&e(new mf(n)),G(!0)}function GU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>lc(()=>{let s=_l(e)??t,a=ta(o,s),l=FU(a)?a.canActivate(e,n):Ze(s,()=>a(e,n));return Lr(l).pipe(br())}));return G(i).pipe(ea())}function WU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>PU(s)).filter(s=>s!==null).map(s=>lc(()=>{let a=s.guards.map(l=>{let u=_l(s.node)??t,h=ta(l,u),p=LU(h)?h.canActivateChild(r,n):Ze(u,()=>h(r,n));return Lr(p).pipe(br())});return G(a).pipe(ea())}));return G(o).pipe(ea())}function KU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let l=_l(e)??i,u=ta(a,l),h=VU(u)?u.canDeactivate(n,e,t,r):Ze(l,()=>u(n,e,t,r));return Lr(h).pipe(br())});return G(s).pipe(ea())}function QU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=ta(s,n),l=OU(a)?a.canLoad(e,t):Ze(n,()=>a(e,t));return Lr(l)});return G(o).pipe(ea(),eR(r))}function eR(n){return sd(Ye(e=>{if(typeof e!="boolean")throw Df(n,e)}),J(e=>e===!0))}function YU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=ta(s,n),l=jU(a)?a.canMatch(e,t):Ze(n,()=>a(e,t));return Lr(l)});return G(o).pipe(ea(),eR(r))}var ml=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function zs(n){return Is(new ml(n))}function ZU(n){return Is(new j(4e3,!1))}function JU(n){return Is(ZA(!1,kt.GuardRejected))}var R_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[se])return ZU(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,t,r,i,o){return XU(t,i,o).pipe(J(s=>{if(s instanceof tr)throw new yl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new yl(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function XU(n,e,t){if(typeof n=="string")return G(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:u,data:h,title:p}=e;return Lr(Ze(t,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:p})))}var N_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eB(n,e,t,r,i){let o=tR(n,e,t);return o.matched?(r=IU(e,r),YU(r,e,t,i).pipe(J(s=>s===!0?o:k({},N_)))):G(o)}function tR(n,e,t){if(e.path==="**")return tB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},N_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NA)(t,n,e);if(!i)return k({},N_);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tB(n){return{matched:!0,parameters:n.length>0?MA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function SA(n,e,t,r){return t.length>0&&iB(n,t,r)?{segmentGroup:new Te(e,rB(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&oB(n,t,r)?{segmentGroup:new Te(n.segments,nB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function nB(n,e,t,r){let i={};for(let o of t)if(Cf(n,e,o)&&!r[Nn(o)]){let s=new Te([],{});i[Nn(o)]=s}return k(k({},r),i)}function rB(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&Nn(r)!==se){let i=new Te([],{});t[Nn(r)]=i}return t}function iB(n,e,t){return t.some(r=>Cf(n,e,r)&&Nn(r)!==se)}function oB(n,e,t){return t.some(r=>Cf(n,e,r))}function Cf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sB(n,e,t){return e.length===0&&!n.children[t]}var P_=class{};function aB(n,e,t,r,i,o,s="emptyOnly"){return new M_(n,e,t,r,i,s,o).recognize()}var cB=31,M_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new R_(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=SA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Jt(r,t),o=new pl("",i),s=BA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Mo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(J(r=>({children:r,rootSnapshot:t})),Tr(r=>{if(r instanceof yl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ml?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Jt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _e(o).pipe(jn(s=>{let a=r.children[s],l=DU(t,s);return this.processSegmentGroup(e,l,a,s,i)}),kd((s,a)=>(s.push(...a),s)),ci(null),Mm(),ze(s=>{if(s===null)return zs(r);let a=nR(s);return lB(a),G(a)}))}processSegment(e,t,r,i,o,s,a){return _e(t).pipe(jn(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(Tr(u=>{if(u instanceof ml)return G(null);throw u}))),br(l=>!!l),Tr(l=>{if(XA(l))return sB(r,i,o)?G(new P_):zs(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return Nn(r)!==s&&(s===se||!Cf(i,o,r))?zs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):zs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=tR(t,i,o);if(!l)return zs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cB&&(this.allowRedirects=!1));let y=new Mo(o,u,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,AA(i),Nn(i),i.component??i._loadedComponent??null,i,RA(i)),C=If(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(je(R=>this.applyRedirects.lineralizeSegments(i,R)),ze(R=>this.processSegment(e,r,t,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=eB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(je(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=l,C=new Mo(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,AA(r),Nn(r),r.component??r._loadedComponent??null,r,RA(r)),P=If(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(P.params),C.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:F}=SA(t,g,y,u);if(F.length===0&&R.hasChildren())return this.processChildren(h,u,R,C).pipe(J(H=>new Jt(C,H)));if(u.length===0&&F.length===0)return G(new Jt(C,[]));let K=Nn(r)===o;return this.processSegment(h,u,R,F,K?se:o,!0,C).pipe(J(H=>new Jt(C,H instanceof Jt?[H]:[])))}))):zs(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):QU(e,t,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Ye(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):JU(t))):G({routes:[],injector:e})}};function lB(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function uB(n){let e=n.value.routeConfig;return e&&e.path===""}function nR(n){let e=[],t=new Set;for(let r of n){if(!uB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=nR(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!t.has(r))}function AA(n){return n.data||{}}function RA(n){return n.resolve||{}}function dB(n,e,t,r,i,o){return ze(s=>aB(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:l})=>te(k({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function hB(n,e){return ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of rR(l))s.add(u);let a=0;return _e(s).pipe(jn(l=>o.has(l)?fB(l,r,n,e):(l.data=If(l,l.parent,n).resolve,G(void 0))),Ye(()=>a++),Ts(1),ze(l=>a===s.size?G(t):Et))})}function rR(n){let e=n.children.map(t=>rR(t)).flat();return[n,...e]}function fB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!KA(i)&&(o[vl]=i.title),lc(()=>(n.data=If(n,n.parent,t).resolve,pB(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=k(k({},n.data),s),null)))))}function pB(n,e,t,r){let i=E_(n);if(i.length===0)return G({});let o={};return _e(i).pipe(ze(s=>gB(n[s],e,t,r).pipe(br(),Ye(a=>{if(a instanceof Xs)throw Df(new Ci,a);o[s]=a}))),Ts(1),J(()=>o),Tr(s=>XA(s)?Et:Is(s)))}function gB(n,e,t,r){let i=_l(e)??r,o=ta(n,i),s=o.resolve?o.resolve(e,t):Ze(i,()=>o(e,t));return Lr(s)}function v_(n){return je(e=>{let t=n(e);return t?_e(t).pipe(J(()=>e)):G(e)})}var L_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[vl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S(iR),providedIn:"root"})}return n})(),iR=(()=>{class n extends L_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)($(IA))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ri=new V("",{providedIn:"root",factory:()=>({})}),Fo=new V(""),Sf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(Bv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe(J(sR),Ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),no(()=>{this.componentLoaders.delete(t)})),i=new _s(r,()=>new ee).pipe(vs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oR(r,this.compiler,t,this.onLoadEndListener).pipe(no(()=>{this.childrenLoaders.delete(r)})),s=new _s(o,()=>new ee).pipe(vs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oR(n,e,t,r){return Lr(n.loadChildren()).pipe(J(sR),ze(i=>i instanceof Ph||Array.isArray(i)?G(i):_e(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Fo,[],{optional:!0,self:!0}).flat()),{routes:s.map(F_),injector:o}}))}function mB(n){return n&&typeof n=="object"&&"default"in n}function sR(n){return mB(n)?n.default:n}var Af=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S(yB),providedIn:"root"})}return n})(),yB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V_=new V(""),j_=new V("");function aR(n,e,t){let r=n.get(j_),i=n.get(Ce);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),vB(n))),{onViewTransitionCreated:l}=r;return l&&Ze(n,()=>l({transition:a,from:e,to:t})),s}function vB(n){return new Promise(e=>{bo({read:()=>setTimeout(e)},{injector:n})})}var U_=new V(""),Rf=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ee;transitionAbortWithErrorSubject=new ee;configLoader=S(Sf);environmentInjector=S(Me);destroyRef=S(Rr);urlSerializer=S(ko);rootContexts=S(Oo);location=S(Di);inputBindingEnabled=S(wl,{optional:!0})!==null;titleStrategy=S(L_);options=S(Ri,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Af);createViewTransition=S(V_,{optional:!0});navigationErrorHandler=S(U_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new pf(i)),r=i=>this.events.next(new gf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(te(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new nt(null),this.transitions.pipe(rt(r=>r!==null),je(r=>{let i=!1;return G(r).pipe(je(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",kt.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?te(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let l="";return this.events.next(new nr(o.id,this.urlSerializer.serialize(o.rawUrl),l,Qs.IgnoredSameUrlNavigation)),o.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(je(l=>(this.events.next(new Ai(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Et:Promise.resolve(l))),dB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=te(k({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new dl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:h,restoredState:p,extras:g}=o,y=new Ai(l,this.urlSerializer.serialize(u),h,p);this.events.next(y);let C=GA(this.rootComponentType).snapshot;return this.currentTransition=r=te(k({},o),{targetSnapshot:C,urlAfterRedirects:u,extras:te(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,G(r)}else{let l="";return this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),l,Qs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Et}}),Ye(o=>{let s=new uf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),J(o=>(this.currentTransition=r=te(k({},o),{guards:NU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),BU(this.environmentInjector,o=>this.events.next(o)),Ye(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Df(this.urlSerializer,o.guardsResult);let s=new df(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),rt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",kt.GuardRejected),!1)),v_(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(Ye(s=>{let a=new hf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),je(s=>{let a=!1;return G(s).pipe(hB(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",kt.NoDataFromResolver)}}))}),Ye(s=>{let a=new ff(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),v_(o=>{let s=a=>{let l=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(a.routeConfig).pipe(Ye(u=>{a.component=u}),J(()=>{})));for(let u of a.children)l.push(...s(u));return l};return cc(s(o.targetSnapshot.root)).pipe(ci(null),Nt(1))}),v_(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?_e(a).pipe(J(()=>r)):G(r)}),J(o=>{let s=bU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=te(k({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ye(()=>{this.events.next(new hl)}),RU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Nt(1),Un(new W(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(rt(()=>!i&&!r.targetRouterState),Ye(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",kt.Aborted)}))),Ye({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Un(this.transitionAbortWithErrorSubject.pipe(Ye(o=>{throw o}))),no(()=>{i||this.cancelNavigationTransition(r,"",kt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(o=>{if(this.destroyed)return r.resolve(!1),Et;if(i=!0,JA(o))this.events.next(new er(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),AU(o)?this.events.next(new Js(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ys(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ze(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Xs){let{message:l,cancellationCode:u}=Df(this.urlSerializer,a);this.events.next(new er(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Js(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _B(n){return n!==Ws}var cR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S(EB),providedIn:"root"})}return n})(),bf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},EB=(()=>{class n extends bf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ls(n)))(i||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lR=(()=>{class n{urlSerializer=S(ko);options=S(Ri,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(Di);urlHandlingStrategy=S(Af);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new tr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof tr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=GA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>S(wB),providedIn:"root"})}return n})(),wB=(()=>{class n extends lR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ai?this.updateStateMemento():t instanceof nr?this.commitTransition(r):t instanceof dl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof er&&t.code!==kt.SupersededByNewNavigation&&t.code!==kt.Redirect?this.restoreHistory(r):t instanceof Ys?this.restoreHistory(r,!0):t instanceof fn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ls(n)))(i||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nf(n,e){n.events.pipe(rt(t=>t instanceof fn||t instanceof er||t instanceof Ys||t instanceof nr),J(t=>t instanceof fn||t instanceof nr?0:(t instanceof er?t.code===kt.Redirect||t.code===kt.SupersededByNewNavigation:!1)?2:1),rt(t=>t!==2),Nt(1)).subscribe(()=>{e()})}var IB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ht=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(kv);stateManager=S(lR);options=S(Ri,{optional:!0})||{};pendingTasks=S(Nr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(Rf);urlSerializer=S(ko);location=S(Di);urlHandlingStrategy=S(Af);injector=S(Me);_events=new ee;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(cR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(Fo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(wl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new De;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof er&&r.code!==kt.Redirect&&r.code!==kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fn)this.navigated=!0;else if(r instanceof Js){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_B(i.source)},s);this.scheduleNavigation(a,Ws,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ws,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=k({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.injector.get($t)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(F_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=$A(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return HA(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Si(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ws,null,r)}navigate(t,r={skipLocationChange:!1}){return TB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},IB):r===!1?i=k({},DB):i=r,Si(t))return DA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return DA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,g)=>{a=p,l=g});let h=this.pendingTasks.add();return Nf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var ir=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Tt(null);get href(){return dn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ee;applicationErrorHandler=S($t);options=S(Ri,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new Lh("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof fn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Si(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Si(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ce(Ht),ce(rr),Lc("tabindex"),ce(Mr),ce(Mt),ce(Rn))};static \u0275dir=We({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Co("href",i.reactiveHref(),fv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Zt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Zt],replaceUrl:[2,"replaceUrl","replaceUrl",Zt],routerLink:"routerLink"},features:[bn]})}return n})();var Dl=class{};var uR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(rt(t=>t instanceof fn),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=js(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(ai())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let o=i.pipe(ze(s=>s===null?G(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(ai())}else return o})}static \u0275fac=function(r){return new(r||n)($(Ht),$(Me),$(Dl),$(Sf))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dR=new V(""),bB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ws;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ai?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof nr&&t.code===Qs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>w(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Zs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Rv()};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function $_(n,...e){return jt([{provide:Fo,multi:!0,useValue:n},[],{provide:rr,useFactory:hR,deps:[Ht]},{provide:$c,multi:!0,useFactory:fR},e.map(t=>t.\u0275providers)])}function hR(n){return n.routerState.root}function Tl(n,e){return{\u0275kind:n,\u0275providers:e}}function fR(){let n=S(Re);return e=>{let t=n.get(xr);if(e!==t.components[0])return;let r=n.get(Ht),i=n.get(pR);n.get(H_)===1&&r.initialNavigation(),n.get(yR,null,{optional:!0})?.setUpPreloading(),n.get(dR,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pR=new V("",{factory:()=>new ee}),H_=new V("",{providedIn:"root",factory:()=>1});function gR(){let n=[{provide:H_,useValue:0},xh(()=>{let e=S(Re);return e.get(Xv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ht),o=e.get(pR);Nf(i,()=>{r(!0)}),e.get(Rf).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))})];return Tl(2,n)}function mR(){let n=[xh(()=>{S(Ht).setUpLocationChangeListener()}),{provide:H_,useValue:2}];return Tl(3,n)}var yR=new V("");function vR(n){return Tl(0,[{provide:yR,useExisting:uR},{provide:Dl,useExisting:n}])}function _R(){return Tl(8,[k_,{provide:wl,useExisting:k_}])}function ER(n){Do("NgRouterViewTransitions");let e=[{provide:V_,useValue:aR},{provide:j_,useValue:k({skipNextTransition:!!n?.skipInitialTransition},n)}];return Tl(9,e)}var wR=[Di,{provide:ko,useClass:Ci},Ht,Oo,{provide:rr,useFactory:hR,deps:[Ht]},Sf,[]],Vr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[wR,[],{provide:Fo,multi:!0,useValue:t},[],r?.errorHandler?{provide:U_,useValue:r.errorHandler}:[],{provide:Ri,useValue:r||{}},r?.useHash?SB():AB(),CB(),r?.preloadingStrategy?vR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?RB(r):[],r?.bindToComponentInputs?_R().\u0275providers:[],r?.enableViewTransitions?ER().\u0275providers:[],NB()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({})}return n})();function CB(){return{provide:dR,useFactory:()=>{let n=S(eA),e=S(ue),t=S(Ri),r=S(Rf),i=S(ko);return t.scrollOffset&&n.setOffset(t.scrollOffset),new bB(i,r,n,e,t)}}}function SB(){return{provide:Rn,useClass:e_}}function AB(){return{provide:Rn,useClass:$h}}function RB(n){return[n.initialNavigation==="disabled"?mR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gR().\u0275providers:[]]}var B_=new V("");function NB(){return[{provide:B_,useFactory:fR},{provide:$c,multi:!0,useExisting:B_}]}var IR=()=>{};var bR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Pf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,y=u&63;l||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new q_;let g=o<<2|a>>4;if(r.push(g),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let C=u<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},q_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},MB=function(n){let e=bR(n);return Pf.encodeByteArray(e,!0)},Sl=function(n){return MB(n).replace(/\./g,"")},Mf=function(n){try{return Pf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function W_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xB=()=>W_().__FIREBASE_DEFAULTS__,kB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mf(n[1]);return e&&JSON.parse(e)},xf=()=>{try{return IR()||xB()||kB()||OB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},K_=n=>{var e,t;return(t=(e=xf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},CR=n=>{let e=K_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Q_=()=>{var n;return(n=xf())===null||n===void 0?void 0:n.config},Y_=n=>{var e;return(e=xf())===null||e===void 0?void 0:e[`_${n}`]};var Lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ni(n){return n.endsWith(".cloudworkstations.dev")}function kf(n){return w(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function SR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sl(JSON.stringify(t)),Sl(JSON.stringify(s)),""].join(".")}var Cl={};function FB(){let n={prod:[],emulator:[]};for(let e of Object.keys(Cl))Cl[e]?n.emulator.push(e):n.prod.push(e);return n}function LB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var DR=!1;function Of(n,e){if(typeof window>"u"||typeof document>"u"||!Ni(window.location.host)||Cl[n]===e||Cl[n]||DR)return;Cl[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=FB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{DR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=LB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),R=document.getElementById(P)||document.createElement("a"),F=t("preprendIcon"),K=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let H=g.element;a(H),h(R,P);let ye=u();l(K,F),H.append(K,C,R,ye),document.body.appendChild(H)}o?(C.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function VB(){var n;let e=(n=xf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){let n=ct();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xR(){return!VB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Al(){try{return typeof indexedDB=="object"}catch{return!1}}function kR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var jB="FirebaseError",en=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pn.prototype.create)}},Pn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?UB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new en(i,a,r)}};function UB(n,e){return n.replace(BB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BB=/\{\$([^}]+)}/g;function OR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function or(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TR(o)&&TR(s)){if(!or(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TR(n){return n!==null&&typeof n=="object"}function na(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FR(n,e){let t=new G_(n,e);return t.subscribe.bind(t)}var G_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$B(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=z_),i.error===void 0&&(i.error=z_),i.complete===void 0&&(i.complete=z_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $B(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function z_(){}var Dse=4*60*60*1e3;function Be(n){return n&&n._delegate?n._delegate:n}var Ot=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vo="[DEFAULT]";var Z_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Lo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zB(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HB(n){return n===Vo?void 0:n}function zB(n){return n.instantiationMode==="EAGER"}var Ff=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Z_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qB=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),GB={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},WB=pe.INFO,KB={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},QB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=KB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sr=class{constructor(e){this.name=e,this._logLevel=WB,this._logHandler=QB,this._userLogHandler=null,qB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var YB=(n,e)=>e.some(t=>n instanceof t),LR,VR;function ZB(){return LR||(LR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JB(){return VR||(VR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jR=new WeakMap,X_=new WeakMap,UR=new WeakMap,J_=new WeakMap,tE=new WeakMap;function XB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ar(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&jR.set(t,n)}).catch(()=>{}),tE.set(e,n),e}function e$(n){if(X_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});X_.set(n,e)}var eE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return X_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BR(n){eE=n(eE)}function t$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Lf(this),e,...t);return UR.set(r,e.sort?e.sort():[e]),ar(r)}:JB().includes(n)?function(...e){return n.apply(Lf(this),e),ar(jR.get(this))}:function(...e){return ar(n.apply(Lf(this),e))}}function n$(n){return typeof n=="function"?t$(n):(n instanceof IDBTransaction&&e$(n),YB(n,ZB())?new Proxy(n,eE):n)}function ar(n){if(n instanceof IDBRequest)return XB(n);if(J_.has(n))return J_.get(n);let e=n$(n);return e!==n&&(J_.set(n,e),tE.set(e,n)),e}var Lf=n=>tE.get(n);function HR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ar(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ar(s.result),l.oldVersion,l.newVersion,ar(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var r$=["get","getKey","getAll","getAllKeys","count"],i$=["put","add","delete","clear"],nE=new Map;function $R(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nE.get(e))return nE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=i$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r$.includes(t)))return;let o=function(s,...a){return w(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return nE.set(e,o),o}BR(n=>te(k({},n),{get:(e,t,r)=>$R(e,t)||n.get(e,t,r),has:(e,t)=>!!$R(e,t)||n.has(e,t)}));var iE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(o$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function o$(n){let e=n.getComponent();return e?.type==="VERSION"}var oE="@firebase/app",zR="0.13.1";var jr=new sr("@firebase/app"),s$="@firebase/app-compat",a$="@firebase/analytics-compat",c$="@firebase/analytics",l$="@firebase/app-check-compat",u$="@firebase/app-check",d$="@firebase/auth",h$="@firebase/auth-compat",f$="@firebase/database",p$="@firebase/data-connect",g$="@firebase/database-compat",m$="@firebase/functions",y$="@firebase/functions-compat",v$="@firebase/installations",_$="@firebase/installations-compat",E$="@firebase/messaging",w$="@firebase/messaging-compat",I$="@firebase/performance",D$="@firebase/performance-compat",T$="@firebase/remote-config",b$="@firebase/remote-config-compat",C$="@firebase/storage",S$="@firebase/storage-compat",A$="@firebase/firestore",R$="@firebase/ai",N$="@firebase/firestore-compat",P$="firebase",M$="11.9.0";var sE="[DEFAULT]",x$={[oE]:"fire-core",[s$]:"fire-core-compat",[c$]:"fire-analytics",[a$]:"fire-analytics-compat",[u$]:"fire-app-check",[l$]:"fire-app-check-compat",[d$]:"fire-auth",[h$]:"fire-auth-compat",[f$]:"fire-rtdb",[p$]:"fire-data-connect",[g$]:"fire-rtdb-compat",[m$]:"fire-fn",[y$]:"fire-fn-compat",[v$]:"fire-iid",[_$]:"fire-iid-compat",[E$]:"fire-fcm",[w$]:"fire-fcm-compat",[I$]:"fire-perf",[D$]:"fire-perf-compat",[T$]:"fire-rc",[b$]:"fire-rc-compat",[C$]:"fire-gcs",[S$]:"fire-gcs-compat",[A$]:"fire-fst",[N$]:"fire-fst-compat",[R$]:"fire-vertex","fire-js":"fire-js",[P$]:"fire-js-all"};var Rl=new Map,k$=new Map,aE=new Map;function qR(n,e){try{n.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mn(n){let e=n.name;if(aE.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;aE.set(e,n);for(let t of Rl.values())qR(t,n);for(let t of k$.values())qR(t,n);return!0}function ra(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tn(n){return n==null?!1:n.settings!==void 0}var O$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new Pn("app","Firebase",O$);var cE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}};var Mi=M$;function dE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:sE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Pi.create("bad-app-name",{appName:String(i)});if(t||(t=Q_()),!t)throw Pi.create("no-options");let o=Rl.get(i);if(o){if(or(t,o.options)&&or(r,o.config))return o;throw Pi.create("duplicate-app",{appName:i})}let s=new Ff(i);for(let l of aE.values())s.addComponent(l);let a=new cE(t,r,s);return Rl.set(i,a),a}function jo(n=sE){let e=Rl.get(n);if(!e&&n===sE&&Q_())return dE();if(!e)throw Pi.create("no-app",{appName:n});return e}function Vf(){return Array.from(Rl.values())}function $e(n,e,t){var r;let i=(r=x$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}Mn(new Ot(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var F$="firebase-heartbeat-database",L$=1,Nl="firebase-heartbeat-store",rE=null;function QR(){return rE||(rE=HR(F$,L$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Pi.create("idb-open",{originalErrorMessage:n.message})})),rE}function V$(n){return w(this,null,function*(){try{let t=(yield QR()).transaction(Nl),r=yield t.objectStore(Nl).get(YR(n));return yield t.done,r}catch(e){if(e instanceof en)jr.warn(e.message);else{let t=Pi.create("idb-get",{originalErrorMessage:e?.message});jr.warn(t.message)}}})}function GR(n,e){return w(this,null,function*(){try{let r=(yield QR()).transaction(Nl,"readwrite");yield r.objectStore(Nl).put(e,YR(n)),yield r.done}catch(t){if(t instanceof en)jr.warn(t.message);else{let r=Pi.create("idb-set",{originalErrorMessage:t?.message});jr.warn(r.message)}}})}function YR(n){return`${n.name}!${n.options.appId}`}var j$=1024,U$=30,lE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new uE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>U$){let s=$$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jr.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=WR(),{heartbeatsToSend:r,unsentEntries:i}=B$(this._heartbeatsCache.heartbeats),o=Sl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return jr.warn(t),""}})}};function WR(){return new Date().toISOString().substring(0,10)}function B$(n,e=j$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var uE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Al()?kR().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield V$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KR(n){return Sl(JSON.stringify({version:2,heartbeats:n})).length}function $$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function H$(n){Mn(new Ot("platform-logger",e=>new iE(e),"PRIVATE")),Mn(new Ot("heartbeat",e=>new lE(e),"PRIVATE")),$e(oE,zR,n),$e(oE,zR,"esm2017"),$e("fire-js","")}H$("");var z$="firebase",q$="11.9.1";$e(z$,q$,"app");function ZR(n){n===void 0&&(n=S(Re));let e=n.get(mi);return t=>new W(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var xi=new Ao("ANGULARFIRE2_VERSION");function Pl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var oa=(n,e)=>{let t=e?[e]:Vf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ia=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ia||{}),JR=Yv()&&typeof Zone<"u"?ia.WARN:ia.SILENT;var jf=class{zone;delegate;constructor(e,t=Am){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ki=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(ue);this.outsideAngular=t.runOutsideAngular(()=>new jf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new jf(typeof Zone>"u"?void 0:Zone.current,ii))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XR=!1;function G$(n,e){!XR&&(JR>ia.SILENT||Yv())&&(XR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),JR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function W$(n){let e=S(ue,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Uo(n){let e=S(ue,{optional:!0});return e?e.run(()=>n()):n()}var K$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ze(t,()=>Uo(()=>n.apply(void 0,r)))),Ke=(n,e,t)=>(t||=e?ia.WARN:ia.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(ki),s=S(mi),a=S(Me)}catch{return G$(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Uo(()=>s.add())),i[u]=K$(i[u],r,a));let l=W$(()=>n.apply(this,i));return e?l instanceof W?l.pipe(si(o.outsideAngular),oi(o.insideAngular),ZR(a)):l instanceof Promise?Uo(()=>{let u=s.add();return new Promise((h,p)=>{l.then(g=>Ze(a,()=>Uo(()=>h(g))),g=>Ze(a,()=>Uo(()=>p(g)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Uo(()=>l):l instanceof W?l.pipe(si(o.outsideAngular),oi(o.insideAngular)):Uo(()=>l)});var Ur=class{constructor(e){return e}},Bo=class{constructor(){return Vf()}};function Q$(n){return n&&n.length===1?n[0]:new Ur(jo())}var hE=new V("angularfire2._apps"),Y$={provide:Ur,useFactory:Q$,deps:[[new Pt,hE]]},Z$={provide:Bo,deps:[[new Pt,hE]]};function J$(n){return(e,t)=>{let r=t.get(Wn);$e("angularfire",xi.full,"core"),$e("angularfire",xi.full,"app"),$e("angular",$0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ur(i)}}function eN(n,...e){return jt([Y$,Z$,{provide:hE,useFactory:J$(n),multi:!0,deps:[ue,Re,ki,...e]}])}var tN=Ke(dE,!0);var X$=new Map,eH={activated:!1,tokenObservers:[]},tH={initialized:!1,enabled:!1};function xn(n){return X$.get(n)||Object.assign({},eH)}function oN(){return tH}var nH="https://content-firebaseappcheck.googleapis.com/v1";var rH="exchangeDebugToken",nN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cae=24*60*60*1e3;var gE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new Lo,this.pending.promise.catch(t=>{}),yield iH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Lo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function iH(n){return new Promise(e=>{setTimeout(e,n)})}var oH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Oi=new Pn("appCheck","AppCheck",oH);function sN(n){if(!xn(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}function aN(r,i){return w(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,a)}catch(y){throw Oi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(l.status!==200)throw Oi.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(y){throw Oi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function cN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${nH}/projects/${t}/apps/${r}:${rH}?key=${i}`,body:{debug_token:e}}}var sH="firebase-app-check-database",aH=1,mE="firebase-app-check-store";var Uf=null;function cH(){return Uf||(Uf=new Promise((n,e)=>{try{let t=indexedDB.open(sH,aH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Oi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mE,{keyPath:"compositeKey"})}}}catch(t){e(Oi.create("storage-open",{originalErrorMessage:t?.message}))}}),Uf)}function lH(n,e){return uH(dH(n),e)}function uH(n,e){return w(this,null,function*(){let r=(yield cH()).transaction(mE,"readwrite"),o=r.objectStore(mE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(Oi.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function dH(n){return`${n.options.appId}-${n.name}`}var Ml=new sr("@firebase/app-check");function fE(n,e){return Al()?lH(n,e).catch(t=>{Ml.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lN(){return oN().enabled}function uN(){return w(this,null,function*(){let n=oN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hH={error:"UNKNOWN_ERROR"};function fH(n){return Pf.encodeString(JSON.stringify(n),!1)}function yE(n,e=!1,t=!1){return w(this,null,function*(){let r=n.app;sN(r);let i=xn(r),o=i.token,s;if(o&&!xl(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(xl(u)?o=u:yield fE(r,void 0))}if(!e&&o&&xl(o))return{token:o.token};let a=!1;if(lN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=aN(cN(r,yield uN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield fE(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ml.warn(u.message):t&&Ml.error(u),pE(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield xn(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ml.warn(u.message):t&&Ml.error(u),s=u}let l;return o?s?xl(o)?l={token:o.token,internalError:s}:l=pE(s):(l={token:o.token},i.token=o,yield fE(r,o)):l=pE(s),a&&yH(r,l),l})}function pH(n){return w(this,null,function*(){let e=n.app;sN(e);let{provider:t}=xn(e);if(lN()){let r=yield uN(),{token:i}=yield aN(cN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function gH(n,e,t,r){let{app:i}=n,o=xn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),rN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>rN(n))}function dN(n,e){let t=xn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function rN(n){let{app:e}=n,t=xn(e),r=t.tokenRefresher;r||(r=mH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mH(n){let{app:e}=n;return new gE(()=>w(null,null,function*(){let t=xn(e),r;if(t.token?r=yield yE(n,!0):r=yield yE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=xn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nN.RETRIAL_MIN_WAIT,nN.RETRIAL_MAX_WAIT)}function yH(n,e){let t=xn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xl(n){return n.expireTimeMillis-Date.now()>0}function pE(n){return{token:fH(hH),error:n}}var vE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=xn(this.app);for(let t of e)dN(this.app,t.next);return Promise.resolve()}};function vH(n,e){return new vE(n,e)}function _H(n){return{getToken:e=>yE(n,e),getLimitedUseToken:()=>pH(n),addTokenListener:e=>gH(n,"INTERNAL",e),removeTokenListener:e=>dN(n.app,e)}}var EH="@firebase/app-check",wH="0.10.0";var IH="app-check",iN="app-check-internal";function DH(){Mn(new Ot(IH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return vH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iN).initialize()})),Mn(new Ot(iN,n=>{let e=n.getProvider("app-check").getImmediate();return _H(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$e(EH,wH)}DH();var TH="app-check";var sa=class{constructor(){return oa(TH)}};var bH=["localhost","0.0.0.0","127.0.0.1"],jae=typeof window<"u"&&bH.includes(window.location.hostname);function CN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var SN=CN,AN=new Pn("auth","Firebase",CN());var Gf=new sr("@firebase/auth");function CH(n,...e){Gf.logLevel<=pe.WARN&&Gf.warn(`Auth (${Mi}): ${n}`,...e)}function $f(n,...e){Gf.logLevel<=pe.ERROR&&Gf.error(`Auth (${Mi}): ${n}`,...e)}function lr(n,...e){throw FE(n,...e)}function kn(n,...e){return FE(n,...e)}function OE(n,e,t){let r=Object.assign(Object.assign({},SN()),{[e]:t});return new Pn("auth","Firebase",r).create(e,{appName:n.name})}function $o(n){return OE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SH(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&lr(n,"argument-error"),OE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function FE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return AN.create(n,...e)}function X(n,e,...t){if(!n)throw FE(e,...t)}function Br(n){let e="INTERNAL ASSERTION FAILED: "+n;throw $f(e),new Error(e)}function Hr(n,e){n||Br(e)}function wE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AH(){return hN()==="http:"||hN()==="https:"}function hN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function RH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AH()||NR()||"connection"in navigator)?navigator.onLine:!0}function NH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ho=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=AR()||PR()}get(){return RH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function LE(n,e){Hr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Wf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var PH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xH=new Ho(3e4,6e4);function VE(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ca(o,s,a,l){return w(this,arguments,function*(n,e,t,r,i={}){return RN(n,i,()=>w(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=na(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},u);return RR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ni(n.emulatorConfig.host)&&(y.credentials="include"),Wf.fetch()(yield NN(n,n.config.apiHost,t,p),y)}))})}function RN(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},PH),e);try{let i=new IE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Bf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bf(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Bf(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Bf(n,"user-disabled",s);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw OE(n,h,u);lr(n,h)}}catch(i){if(i instanceof en)throw i;lr(n,"network-request-failed",{message:String(i)})}})}function kH(o,s,a,l){return w(this,arguments,function*(n,e,t,r,i={}){let u=yield ca(n,e,t,r,i);return"mfaPendingCredential"in u&&lr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function NN(n,e,t,r){return w(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?LE(n.config,i):`${n.config.apiScheme}://${i}`;return MH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var IE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),xH.get())})}};function Bf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=kn(n,e,r);return i.customData._tokenResponse=t,i}function OH(n,e){return w(this,null,function*(){return ca(n,"POST","/v1/accounts:delete",e)})}function Kf(n,e){return w(this,null,function*(){return ca(n,"POST","/v1/accounts:lookup",e)})}function kl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jE(n,e=!1){return w(this,null,function*(){let t=Be(n),r=yield t.getIdToken(e),i=UE(r);X(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:kl(_E(i.auth_time)),issuedAtTime:kl(_E(i.iat)),expirationTime:kl(_E(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function _E(n){return Number(n)*1e3}function UE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mf(t);return i?JSON.parse(i):($f("Failed to decode base64 JWT payload"),null)}catch(i){return $f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fN(n){let e=UE(n);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fl(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof en&&FH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function FH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var DE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ll=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qf(n){return w(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Fl(n,Kf(t,{idToken:r}));X(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?PN(o.providerUserInfo):[],a=LH(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ll(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function BE(n){return w(this,null,function*(){let e=Be(n);yield Qf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PN(n){return n.map(e=>{var{providerId:t}=e,r=md(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function VH(n,e){return w(this,null,function*(){let t=yield RN(n,{},()=>w(null,null,function*(){let r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield NN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ni(n.emulatorConfig.host)&&(l.credentials="include"),Wf.fetch()(s,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jH(n,e){return w(this,null,function*(){return ca(n,"POST","/v2/accounts:revokeToken",VE(n,e))})}var Ol=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,"internal-error");let t=fN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield VH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(X(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(X(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Br("not implemented")}};function Fi(n,e){X(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Li=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ll(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield Fl(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return jE(this,e)}reload(){return BE(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Qf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(tn(this.auth.app))return Promise.reject($o(this.auth));let e=yield this.getIdToken();return yield Fl(this,OH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,F=(u=t.createdAt)!==null&&u!==void 0?u:void 0,K=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:ye,isAnonymous:Qe,providerData:Ie,stsTokenManager:D}=t;X(H&&D,e,"internal-error");let v=Ol.fromJSON(this.name,D);X(typeof H=="string",e,"internal-error"),Fi(p,e.name),Fi(g,e.name),X(typeof ye=="boolean",e,"internal-error"),X(typeof Qe=="boolean",e,"internal-error"),Fi(y,e.name),Fi(C,e.name),Fi(P,e.name),Fi(R,e.name),Fi(F,e.name),Fi(K,e.name);let E=new n({uid:H,auth:e,email:g,emailVerified:ye,displayName:p,isAnonymous:Qe,photoURL:C,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:F,lastLoginAt:K});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new Ol;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];X(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?PN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ol;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ll(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l})}};var pN=new Map;function $r(n){Hr(n instanceof Function,"Expected a class definition");let e=pN.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pN.set(n,e),e)}var UH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),TE=UH;function Hf(n,e,t){return`firebase:${n}:${e}:${t}`}var Yf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Hf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Hf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Kf(this.auth,{idToken:e}).catch(()=>{});return t?Li._fromGetAccountInfoResponse(this.auth,t,e):null}return Li._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n($r(TE),e,r);let i=(yield Promise.all(t.map(u=>w(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||$r(TE),s=Hf(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let p;if(typeof h=="string"){let g=yield Kf(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Li._fromGetAccountInfoResponse(e,g,h)}else p=Li._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>w(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function gN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ON(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LN(e))return"Blackberry";if(VN(e))return"Webos";if(xN(e))return"Safari";if((e.includes("chrome/")||kN(e))&&!e.includes("edge/"))return"Chrome";if(FN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function MN(n=ct()){return/firefox\//i.test(n)}function xN(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kN(n=ct()){return/crios\//i.test(n)}function ON(n=ct()){return/iemobile/i.test(n)}function FN(n=ct()){return/android/i.test(n)}function LN(n=ct()){return/blackberry/i.test(n)}function VN(n=ct()){return/webos/i.test(n)}function $E(n=ct()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BH(n=ct()){var e;return $E(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $H(){return MR()&&document.documentMode===10}function jN(n=ct()){return $E(n)||FN(n)||VN(n)||LN(n)||/windows phone/i.test(n)||ON(n)}function UN(n,e=[]){let t;switch(n){case"Browser":t=gN(ct());break;case"Worker":t=`${gN(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mi}/${r}`}var bE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function HH(t){return w(this,arguments,function*(n,e={}){return ca(n,"GET","/v2/passwordPolicy",VE(n,e))})}var zH=6,CE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:zH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var SE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zf(this),this.idTokenSubscription=new Zf(this),this.beforeStateQueue=new bE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$r(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Yf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield Kf(this,{idToken:e}),r=yield Li._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var t;if(tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Qf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=NH()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(tn(this.app))return Promise.reject($o(this));let t=e?Be(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return tn(this.app)?Promise.reject($o(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tn(this.app)?Promise.reject($o(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence($r(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield HH(this),t=new CE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$r(e)||this._popupRedirectResolver;X(t,this,"argument-error"),this.redirectPersistenceManager=yield Yf.create(this,[$r(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return w(this,null,function*(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&CH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function op(n){return Be(n)}var Zf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FR(t=>this.observer=t)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var HE={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qH(n){HE=n}function GH(n){return HE.loadJS(n)}function WH(){return HE.gapiScript}function BN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function zE(n,e){let t=ra(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(or(o,e??{}))return i;lr(i,"already-initialized")}return t.initialize({options:e})}function KH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($r);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function qE(n,e,t){let r=op(n);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=$N(e),{host:s,port:a}=QH(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(or(u,r.config.emulator)&&or(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ni(s)?(kf(`${o}//${s}${l}`),Of("Auth",!0)):i||YH()}function $N(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QH(n){let e=$N(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:mN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:mN(s)}}}function mN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function YH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Vl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}};function aa(n,e){return w(this,null,function*(){return kH(n,"POST","/v1/accounts:signInWithIdp",VE(n,e))})}var ZH="http://localhost",Jf=class n extends Vl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=md(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return aa(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,aa(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,aa(e,t)}buildRequest(){let e={requestUri:ZH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=na(t)}return e}};var jl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xf=class extends jl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var GE=(()=>{class n extends Xf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Jf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Ul=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return w(this,null,function*(){let o=yield Li._fromIdTokenResponse(e,r,i),s=yN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=yN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function yN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var AE=class n extends en{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function HN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?AE._fromErrorAndOperation(n,o,e,r):o})}function JH(n,e,t=!1){return w(this,null,function*(){let r=yield Fl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ul._forOperation(n,"link",r)})}function XH(n,e,t=!1){return w(this,null,function*(){let{auth:r}=n;if(tn(r.app))return Promise.reject($o(r));let i="reauthenticate";try{let o=yield Fl(n,HN(r,i,e,n),t);X(o.idToken,r,"internal-error");let s=UE(o.idToken);X(s,r,"internal-error");let{sub:a}=s;return X(n.uid===a,r,"user-mismatch"),Ul._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&lr(r,"user-mismatch"),o}})}function ez(n,e,t=!1){return w(this,null,function*(){if(tn(n.app))return Promise.reject($o(n));let r="signIn",i=yield HN(n,r,e),o=yield Ul._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function $l(n,e,t,r){return Be(n).onIdTokenChanged(e,t,r)}function WE(n,e,t){return Be(n).beforeAuthStateChanged(e,t)}function KE(n){return Be(n).signOut()}var ep="__sak";var tp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ep,"1"),this.storage.removeItem(ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var tz=1e3,nz=10,rz=(()=>{class n extends tp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);$H()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,nz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},tz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return w(this,null,function*(){yield ti(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return w(this,null,function*(){let r=yield ti(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return w(this,null,function*(){yield ti(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zN=rz;var iz=(()=>{class n extends tp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),QE=iz;function oz(n){return Promise.all(n.map(e=>w(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var sz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return w(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,s)})),u=yield oz(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function YE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var RE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{let u=YE("",20);i.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function cr(){return window}function az(n){cr().location.href=n}function qN(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}function cz(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uz(){return qN()?self:null}var GN="firebaseLocalStorageDb",dz=1,np="firebaseLocalStorage",WN="fbase_key",zo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function sp(n,e){return n.transaction([np],e?"readwrite":"readonly").objectStore(np)}function hz(){let n=indexedDB.deleteDatabase(GN);return new zo(n).toPromise()}function NE(){let n=indexedDB.open(GN,dz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(np,{keyPath:WN})}catch(i){t(i)}}),n.addEventListener("success",()=>w(null,null,function*(){let r=n.result;r.objectStoreNames.contains(np)?e(r):(r.close(),yield hz(),e(yield NE()))}))})}function vN(n,e,t){return w(this,null,function*(){let r=sp(n,!0).put({[WN]:e,value:t});return new zo(r).toPromise()})}function fz(n,e){return w(this,null,function*(){let t=sp(n,!1).get(e),r=yield new zo(t).toPromise();return r===void 0?null:r.value})}function _N(n,e){let t=sp(n,!0).delete(e);return new zo(t).toPromise()}var pz=800,gz=3,mz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield NE(),this.db)})}_withRetries(t){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>gz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return qN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=sz._getInstance(uz()),this.receiver._subscribe("keyChanged",(t,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var t,r;if(this.activeServiceWorker=yield cz(),!this.activeServiceWorker)return;this.sender=new RE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let t=yield NE();return yield vN(t,ep,"1"),yield _N(t,ep),!0}catch{}return!1})}_withPendingWrite(t){return w(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>vN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return w(this,null,function*(){let r=yield this._withRetries(i=>fz(i,t));return this.localCache[t]=r,r})}_remove(t){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>_N(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return w(this,null,function*(){let t=yield this._withRetries(o=>{let s=sp(o,!1).getAll();return new zo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),pz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),KN=mz;var Qae=BN("rcb"),Yae=new Ho(3e4,6e4);function QN(n,e){return e?$r(e):(X(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Bl=class extends Vl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return aa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return aa(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function yz(n){return ez(n.auth,new Bl(n),n.bypassAuthState)}function vz(n){let{auth:e,user:t}=n;return X(t,e,"internal-error"),XH(t,new Bl(n),n.bypassAuthState)}function _z(n){return w(this,null,function*(){let{auth:e,user:t}=n;return X(t,e,"internal-error"),JH(t,new Bl(n),n.bypassAuthState)})}var rp=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yz;case"linkViaPopup":case"linkViaRedirect":return _z;case"reauthViaPopup":case"reauthViaRedirect":return vz;default:lr(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Ez=new Ho(2e3,1e4);function ZE(n,e,t){return w(this,null,function*(){if(tn(n.app))return Promise.reject(kn(n,"operation-not-supported-in-this-environment"));let r=op(n);SH(n,e,jl);let i=QN(r,t);return new wz(r,"signInViaPopup",e,i).executeNotNull()})}var wz=(()=>{class n extends rp{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let t=yield this.execute();return X(t,this.auth,"internal-error"),t})}onExecution(){return w(this,null,function*(){Hr(this.filter.length===1,"Popup operations only handle one event");let t=YE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ez.get())};t()}}n.currentPopupAction=null;return n})(),Iz="pendingRedirect",zf=new Map,PE=class n extends rp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=zf.get(this.auth._key());if(!e){try{let r=(yield Dz(this.resolver,this.auth))?yield ti(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}zf.set(this.auth._key(),e)}return this.bypassAuthState||zf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return ti(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ti(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function Dz(n,e){return w(this,null,function*(){let t=Cz(e),r=bz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Tz(n,e){zf.set(n._key(),e)}function bz(n){return $r(n._redirectPersistence)}function Cz(n){return Hf(Iz,n.config.apiKey,n.name)}function Sz(n,e,t=!1){return w(this,null,function*(){if(tn(n.app))return Promise.reject($o(n));let r=op(n),i=QN(r,e),s=yield new PE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Az=10*60*1e3,ME=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(kn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Az&&this.cachedEventUids.clear(),this.cachedEventUids.has(EN(e))}saveEventToCache(e){this.cachedEventUids.add(EN(e)),this.lastProcessedEventTime=Date.now()}};function EN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Rz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YN(n);default:return!1}}function Nz(t){return w(this,arguments,function*(n,e={}){return ca(n,"GET","/v1/projects",e)})}var Pz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mz=/^https?/;function xz(n){return w(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Nz(n);for(let t of e)try{if(kz(t))return}catch{}lr(n,"unauthorized-domain")})}function kz(n){let e=wE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Mz.test(t))return!1;if(Pz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Oz=new Ho(3e4,6e4);function wN(){let n=cr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Fz(n){return new Promise((e,t)=>{var r,i,o;function s(){wN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wN(),t(kn(n,"network-request-failed"))},timeout:Oz.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=cr().gapi)===null||o===void 0)&&o.load)s();else{let a=BN("iframefcb");return cr()[a]=()=>{gapi.load?s():t(kn(n,"network-request-failed"))},GH(`${WH()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw qf=null,e})}var qf=null;function Lz(n){return qf=qf||Fz(n),qf}var Vz=new Ho(5e3,15e3),jz="__/auth/iframe",Uz="emulator/auth/iframe",Bz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$z=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hz(n){let e=n.config;X(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?LE(e,Uz):`https://${n.config.authDomain}/${jz}`,r={apiKey:e.apiKey,appName:n.name,v:Mi},i=$z.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${na(r).slice(1)}`}function zz(n){return w(this,null,function*(){let e=yield Lz(n),t=cr().gapi;return X(t,n,"internal-error"),e.open({where:document.body,url:Hz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bz,dontclear:!0},r=>new Promise((i,o)=>w(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=kn(n,"network-request-failed"),a=cr().setTimeout(()=>{o(s)},Vz.get());function l(){cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}var qz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gz=500,Wz=600,Kz="_blank",Qz="http://localhost",ip=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Yz(n,e,t,r=Gz,i=Wz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},qz),{width:r.toString(),height:i.toString(),top:o,left:s}),u=ct().toLowerCase();t&&(a=kN(u)?Kz:t),MN(u)&&(e=e||Qz,l.scrollbars="yes");let h=Object.entries(l).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(BH(u)&&a!=="_self")return Zz(e||"",a),new ip(null);let p=window.open(e||"",a,h);X(p,n,"popup-blocked");try{p.focus()}catch{}return new ip(p)}function Zz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Jz="__/auth/handler",Xz="emulator/auth/handler",e4=encodeURIComponent("fac");function IN(n,e,t,r,i,o){return w(this,null,function*(){X(n.config.authDomain,n,"auth-domain-config-required"),X(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mi,eventId:i};if(e instanceof jl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Xf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let l=yield n._getAppCheckToken(),u=l?`#${e4}=${encodeURIComponent(l)}`:"";return`${t4(n)}?${na(a).slice(1)}${u}`})}function t4({config:n}){return n.emulator?LE(n,Xz):`https://${n.authDomain}/${Jz}`}var EE="webStorageSupport",xE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=Sz,this._overrideRedirectResult=Tz}_openPopup(e,t,r,i){return w(this,null,function*(){var o;Hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield IN(e,t,r,wE(),i);return Yz(e,s,YE())})}_openRedirect(e,t,r,i){return w(this,null,function*(){yield this._originValidation(e);let o=yield IN(e,t,r,wE(),i);return az(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Hr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return w(this,null,function*(){let t=yield zz(e),r=new ME(e);return t.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(EE,{type:EE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[EE];s!==void 0&&t(!!s),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jN()||xN()||$E()}},ZN=xE;var DN="@firebase/auth",TN="1.10.7";var kE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function n4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r4(n){Mn(new Ot("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;X(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UN(n)},u=new SE(r,i,o,l);return KH(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new Ot("auth-internal",e=>{let t=op(e.getProvider("auth").getImmediate());return(r=>new kE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(DN,TN,n4(n)),$e(DN,TN,"esm2017")}var i4=5*60,o4=Y_("authIdTokenMaxAge")||i4,bN=null,s4=n=>e=>w(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>o4)return;let i=t?.token;bN!==i&&(bN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function JE(n=jo()){let e=ra(n,"auth");if(e.isInitialized())return e.getImmediate();let t=zE(n,{popupRedirectResolver:ZN,persistence:[KN,zN,QE]}),r=Y_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=s4(o.toString());WE(t,s,()=>s(t.currentUser)),$l(t,a=>s(a))}}let i=K_("auth");return i&&qE(t,`http://${i}`),t}function a4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=kn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",a4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r4("Browser");function eP(n){return new W(function(e){var t=$l(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var tP="auth",qo=class{constructor(e){return e}},Hl=class{constructor(){return oa(tP)}};var XE=new V("angularfire2.auth-instances");function Y4(n,e){let t=Pl(tP,n,e);return t&&new qo(t)}function Z4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qo(r)}}var J4={provide:Hl,deps:[[new Pt,XE]]},X4={provide:qo,useFactory:Y4,deps:[[new Pt,XE],Ur]};function nP(n,...e){return $e("angularfire",xi.full,"auth"),jt([X4,J4,{provide:XE,useFactory:Z4(n),multi:!0,deps:[ue,Re,ki,Bo,[new Pt,sa],...e]}])}var rP=Ke(eP,!0);var iP=Ke(JE,!0);var oP=Ke(ZE,!0,2);var sP=Ke(KE,!0,2);var aP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cP={};var zr,ew;(function(){var n;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(I,T,A){for(var _=Array(arguments.length-2),_r=2;_r<arguments.length;_r++)_[_r-2]=arguments[_r];return v.prototype[T].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)I[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],T=D.g[2];var A=D.g[3],_=v+(A^E&(T^A))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=A+(T^v&(E^T))+I[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=T+(E^A&(v^E))+I[2]+606105819&4294967295,T=A+(_<<17&4294967295|_>>>15),_=E+(v^T&(A^v))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(A^E&(T^A))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(T^v&(E^T))+I[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=T+(E^A&(v^E))+I[6]+2821735955&4294967295,T=A+(_<<17&4294967295|_>>>15),_=E+(v^T&(A^v))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(A^E&(T^A))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(T^v&(E^T))+I[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=T+(E^A&(v^E))+I[10]+4294925233&4294967295,T=A+(_<<17&4294967295|_>>>15),_=E+(v^T&(A^v))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(A^E&(T^A))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(T^v&(E^T))+I[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=T+(E^A&(v^E))+I[14]+2792965006&4294967295,T=A+(_<<17&4294967295|_>>>15),_=E+(v^T&(A^v))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^A&(E^T))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^T&(v^E))+I[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(A^v))+I[11]+643717713&4294967295,T=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(T^A))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^A&(E^T))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^T&(v^E))+I[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(A^v))+I[15]+3634488961&4294967295,T=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(T^A))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^A&(E^T))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^T&(v^E))+I[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(A^v))+I[3]+4107603335&4294967295,T=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(T^A))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^A&(E^T))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^T&(v^E))+I[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(A^v))+I[7]+1735328473&4294967295,T=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(T^A))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^A)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^T)+I[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=T+(A^v^E)+I[11]+1839030562&4294967295,T=A+(_<<16&4294967295|_>>>16),_=E+(T^A^v)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^A)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^T)+I[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=T+(A^v^E)+I[7]+4139469664&4294967295,T=A+(_<<16&4294967295|_>>>16),_=E+(T^A^v)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^A)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^T)+I[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=T+(A^v^E)+I[3]+3572445317&4294967295,T=A+(_<<16&4294967295|_>>>16),_=E+(T^A^v)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^A)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^T)+I[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=T+(A^v^E)+I[15]+530742520&4294967295,T=A+(_<<16&4294967295|_>>>16),_=E+(T^A^v)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~A))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~T))+I[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=T+(v^(A|~E))+I[14]+2878612391&4294967295,T=A+(_<<15&4294967295|_>>>17),_=E+(A^(T|~v))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~A))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~T))+I[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=T+(v^(A|~E))+I[10]+4293915773&4294967295,T=A+(_<<15&4294967295|_>>>17),_=E+(A^(T|~v))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~A))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~T))+I[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=T+(v^(A|~E))+I[6]+2734768916&4294967295,T=A+(_<<15&4294967295|_>>>17),_=E+(A^(T|~v))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~A))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~T))+I[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=T+(v^(A|~E))+I[2]+718787259&4294967295,T=A+(_<<15&4294967295|_>>>17),_=E+(A^(T|~v))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,I=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=E;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(I[T++]=D.charCodeAt(A++),T==this.blockSize){i(this,I),T=0;break}}else for(;A<v;)if(I[T++]=D[A++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)D[E++]=this.g[v]>>>I&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],I=!0,T=D.length-1;0<=T;T--){var A=D[T]|0;I&&A==v||(E[T]=A,I=!1)}this.g=E}var a={};function l(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(u(-D));for(var v=[],E=1,I=0;D>=E;I++)v[I]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(v,8)),I=p,T=0;T<D.length;T+=8){var A=Math.min(8,D.length-T),_=parseInt(D.substring(T,T+A),v);8>A?(A=u(Math.pow(v,A)),I=I.j(A).add(u(_))):(I=I.j(E),I=I.add(u(_)))}return I}var p=l(0),g=l(1),y=l(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);D+=(0<=I?I:4294967296+I)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var v=u(Math.pow(D,6)),E=this,I="";;){var T=ye(E,v).g;E=F(E,T.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=T,C(E))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=F(this,D),P(D)?-1:C(D)?0:1};function R(D){for(var v=D.g.length,E=[],I=0;I<v;I++)E[I]=~D.g[I];return new s(E,~D.h).add(g)}n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0,T=0;T<=v;T++){var A=I+(this.i(T)&65535)+(D.i(T)&65535),_=(A>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);I=_>>>16,A&=65535,_&=65535,E[T]=_<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(D,v){return D.add(R(v))}n.j=function(D){if(C(this)||C(D))return p;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return u(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<D.g.length;T++){var A=this.i(I)>>>16,_=this.i(I)&65535,_r=D.i(T)>>>16,Va=D.i(T)&65535;E[2*I+2*T]+=_*Va,K(E,2*I+2*T),E[2*I+2*T+1]+=A*Va,K(E,2*I+2*T+1),E[2*I+2*T+1]+=_*_r,K(E,2*I+2*T+1),E[2*I+2*T+2]+=A*_r,K(E,2*I+2*T+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function K(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function H(D,v){this.g=D,this.h=v}function ye(D,v){if(C(v))throw Error("division by zero");if(C(D))return new H(p,p);if(P(D))return v=ye(R(D),v),new H(R(v.g),R(v.h));if(P(v))return v=ye(D,R(v)),new H(R(v.g),v.h);if(30<D.g.length){if(P(D)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(D);)E=Qe(E),I=Qe(I);var T=Ie(E,1),A=Ie(I,1);for(I=Ie(I,2),E=Ie(E,2);!C(I);){var _=A.add(I);0>=_.l(D)&&(T=T.add(E),A=_),I=Ie(I,1),E=Ie(E,1)}return v=F(D,T.j(v)),new H(T,v)}for(T=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=u(E),_=A.j(v);P(_)||0<_.l(D);)E-=I,A=u(E),_=A.j(v);C(A)&&(A=g),T=T.add(A),D=F(D,_)}return new H(T,D)}n.A=function(D){return ye(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&D.i(I);return new s(E,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|D.i(I);return new s(E,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^D.i(I);return new s(E,this.h^D.h)};function Qe(D){for(var v=D.g.length+1,E=[],I=0;I<v;I++)E[I]=D.i(I)<<1|D.i(I-1)>>>31;return new s(E,D.h)}function Ie(D,v){var E=v>>5;v%=32;for(var I=D.g.length-E,T=[],A=0;A<I;A++)T[A]=0<v?D.i(A+E)>>>v|D.i(A+E+1)<<32-v:D.i(A+E);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ew=cP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,zr=cP.Integer=s}).apply(typeof aP<"u"?aP:typeof self<"u"?self:typeof window<"u"?window:{});var ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qr={};var tw,t3,la,nw,zl,cp,rw,iw,ow;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ap=="object"&&ap];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,N){for(var L=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)L[Ae-2]=arguments[Ae];return d.prototype[b].apply(m,L)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let b=c.length||0,N=m.length||0;c.length=b+N;for(let L=0;L<N;L++)c[b+L]=m[L]}else c.push(m)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ye(c){return ye[" "](c),c}ye[" "]=function(){};var Qe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function Ie(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let N=0;N<E.length;N++)f=E[N],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Vg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class _r{constructor(){this.h=this.g=null}add(d,f){let m=Va.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Va=new F(()=>new dO,c=>c.reset());class dO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ja,Ua=!1,Vg=new _r,QD=()=>{let c=a.Promise.resolve(void 0);ja=()=>{c.then(hO)}};var hO=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){A(f)}var d=Va;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ua=!1};function Zr(){this.s=this.s,this.C=this.C}Zr.prototype.s=!1,Zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var fO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ba(c,d){if(gt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Qe){e:{try{ye(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pO[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ba.aa.h.call(this)}}C(Ba,gt);var pO={2:"touch",3:"pen",4:"mouse"};Ba.prototype.h=function(){Ba.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $a="closure_listenable_"+(1e6*Math.random()|0),gO=0;function mO(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++gO,this.da=this.fa=!1}function Tu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bu(c){this.src=c,this.g={},this.h=0}bu.prototype.add=function(c,d,f,m,b){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var L=Ug(c,d,m,b);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new mO(d,this.src,N,!!m,b),d.fa=f,c.push(d)),d};function jg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=b)&&Array.prototype.splice.call(m,b,1),N&&(Tu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ug(c,d,f,m){for(var b=0;b<c.length;++b){var N=c[b];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return b}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),$g={};function YD(c,d,f,m,b){if(m&&m.once)return JD(c,d,f,m,b);if(Array.isArray(d)){for(var N=0;N<d.length;N++)YD(c,d[N],f,m,b);return null}return f=Gg(f),c&&c[$a]?c.K(d,f,u(m)?!!m.capture:!!m,b):ZD(c,d,f,!1,m,b)}function ZD(c,d,f,m,b,N){if(!d)throw Error("Invalid event type");var L=u(b)?!!b.capture:!!b,Ae=zg(c);if(Ae||(c[Bg]=Ae=new bu(c)),f=Ae.add(d,f,m,L,N),f.proxy)return f;if(m=yO(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)fO||(b=L),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(eT(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yO(){function c(f){return d.call(c.src,c.listener,f)}let d=vO;return c}function JD(c,d,f,m,b){if(Array.isArray(d)){for(var N=0;N<d.length;N++)JD(c,d[N],f,m,b);return null}return f=Gg(f),c&&c[$a]?c.L(d,f,u(m)?!!m.capture:!!m,b):ZD(c,d,f,!0,m,b)}function XD(c,d,f,m,b){if(Array.isArray(d))for(var N=0;N<d.length;N++)XD(c,d[N],f,m,b);else m=u(m)?!!m.capture:!!m,f=Gg(f),c&&c[$a]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=Ug(N,f,m,b),-1<f&&(Tu(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=zg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ug(d,f,m,b)),(f=-1<c?d[c]:null)&&Hg(f))}function Hg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[$a])jg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(eT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=zg(d))?(jg(f,c),f.h==0&&(f.src=null,d[Bg]=null)):Tu(c)}}}function eT(c){return c in $g?$g[c]:$g[c]="on"+c}function vO(c,d){if(c.da)c=!0;else{d=new Ba(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Hg(c),c=f.call(m,d)}return c}function zg(c){return c=c[Bg],c instanceof bu?c:null}var qg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gg(c){return typeof c=="function"?c:(c[qg]||(c[qg]=function(d){return c.handleEvent(d)}),c[qg])}function mt(){Zr.call(this),this.i=new bu(this),this.M=this,this.F=null}C(mt,Zr),mt.prototype[$a]=!0,mt.prototype.removeEventListener=function(c,d,f,m){XD(this,c,d,f,m)};function At(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new gt(d,c);else if(d instanceof gt)d.target=d.target||c;else{var b=d;d=new gt(m,c),I(d,b)}if(b=!0,f)for(var N=f.length-1;0<=N;N--){var L=d.g=f[N];b=Cu(L,m,!0,d)&&b}if(L=d.g=c,b=Cu(L,m,!0,d)&&b,b=Cu(L,m,!1,d)&&b,f)for(N=0;N<f.length;N++)L=d.g=f[N],b=Cu(L,m,!1,d)&&b}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Tu(f[m]);delete c.g[d],c.h--}}this.F=null},mt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},mt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Cu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,N=0;N<d.length;++N){var L=d[N];if(L&&!L.da&&L.capture==f){var Ae=L.listener,dt=L.ha||L.src;L.fa&&jg(c.i,L),b=Ae.call(dt,m)!==!1&&b}}return b&&!m.defaultPrevented}function tT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nT(c){c.g=tT(()=>{c.g=null,c.i&&(c.i=!1,nT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class _O extends Zr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(c){Zr.call(this),this.h=c,this.g={}}C(Ha,Zr);var rT=[];function iT(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Hg(d)},c),c.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),iT(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wg=a.JSON.stringify,EO=a.JSON.parse,wO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kg(){}Kg.prototype.h=null;function oT(c){return c.h||(c.h=c.i())}function sT(){}var za={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qg(){gt.call(this,"d")}C(Qg,gt);function Yg(){gt.call(this,"c")}C(Yg,gt);var Gi={},aT=null;function Su(){return aT=aT||new mt}Gi.La="serverreachability";function cT(c){gt.call(this,Gi.La,c)}C(cT,gt);function qa(c){let d=Su();At(d,new cT(d))}Gi.STAT_EVENT="statevent";function lT(c,d){gt.call(this,Gi.STAT_EVENT,c),this.stat=d}C(lT,gt);function Rt(c){let d=Su();At(d,new lT(d,c))}Gi.Ma="timingevent";function uT(c,d){gt.call(this,Gi.Ma,c),this.size=d}C(uT,gt);function Ga(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Wa(){this.g=!0}Wa.prototype.xa=function(){this.g=!1};function IO(c,d,f,m,b,N){c.info(function(){if(c.g)if(N)for(var L="",Ae=N.split("&"),dt=0;dt<Ae.length;dt++){var we=Ae[dt].split("=");if(1<we.length){var yt=we[0];we=we[1];var vt=yt.split("_");L=2<=vt.length&&vt[1]=="type"?L+(yt+"="+we+"&"):L+(yt+"=redacted&")}}else L=null;else L=N;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+L})}function DO(c,d,f,m,b,N,L){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+N+" "+L})}function os(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+bO(c,f)+(m?" "+m:"")})}function TO(c,d){c.info(function(){return"TIMEOUT: "+d})}Wa.prototype.info=function(){};function bO(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var N=b[0];if(N!="noop"&&N!="stop"&&N!="close")for(var L=1;L<b.length;L++)b[L]=""}}}}return Wg(f)}catch{return d}}var Au={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zg;function Ru(){}C(Ru,Kg),Ru.prototype.g=function(){return new XMLHttpRequest},Ru.prototype.i=function(){return{}},Zg=new Ru;function Jr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hT}function hT(){this.i=null,this.g="",this.h=!1}var fT={},Jg={};function Xg(c,d,f){c.L=1,c.v=xu(Er(d)),c.m=f,c.P=!0,pT(c,null)}function pT(c,d){c.F=Date.now(),Nu(c),c.A=Er(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),AT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new hT,c.g=GT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new _O(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(rT[0]=b.toString()),b=rT);for(var N=0;N<b.length;N++){var L=YD(f,b[N],m||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),qa(),IO(c.i,c.u,c.A,c.l,c.R,c.m)}Jr.prototype.ca=function(c){c=c.target;let d=this.M;d&&wr(c)==3?d.j():this.Y(c)},Jr.prototype.Y=function(c){try{if(c==this.g)e:{let vt=wr(this.g);var d=this.g.Ba();let cs=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||OT(this.g)))){this.J||vt!=4||d==7||(d==8||0>=cs?qa(3):qa(2)),em(this);var f=this.g.Z();this.X=f;t:if(gT(this)){var m=OT(this.g);c="";var b=m.length,N=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Ka(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(N&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,DO(this.i,this.u,this.A,this.l,this.R,vt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,dt=this.g;if((Ae=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ae)){var we=Ae;break t}}we=null}if(f=we)os(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tm(this,f);else{this.o=!1,this.s=3,Rt(12),Wi(this),Ka(this);break e}}if(this.P){f=!0;let vn;for(;!this.J&&this.C<L.length;)if(vn=CO(this,L),vn==Jg){vt==4&&(this.s=4,Rt(14),f=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==fT){this.s=4,Rt(15),os(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else os(this.i,this.l,vn,null),tm(this,vn);if(gT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||L.length!=0||this.h.h||(this.s=1,Rt(16),f=!1),this.o=this.o&&f,!f)os(this.i,this.l,L,"[Invalid Chunked Response]"),Wi(this),Ka(this);else if(0<L.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),am(yt),yt.M=!0,Rt(11))}}else os(this.i,this.l,L,null),tm(this,L);vt==4&&Wi(this),this.o&&!this.J&&(vt==4?$T(this.j,this):(this.o=!1,Nu(this)))}else HO(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Wi(this),Ka(this)}}}catch{}finally{}};function gT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CO(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Jg:(f=Number(d.substring(f,m)),isNaN(f)?fT:(m+=1,m+f>d.length?Jg:(d=d.slice(m,m+f),c.C=m+f,d)))}Jr.prototype.cancel=function(){this.J=!0,Wi(this)};function Nu(c){c.S=Date.now()+c.I,mT(c,c.I)}function mT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ga(g(c.ba,c),d)}function em(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Jr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(TO(this.i,this.A),this.L!=2&&(qa(),Rt(17)),Wi(this),this.s=2,Ka(this)):mT(this,this.S-c)};function Ka(c){c.j.G==0||c.J||$T(c.j,c)}function Wi(c){em(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,iT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||nm(f.h,c))){if(!c.K&&nm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Vu(f),Fu(f);else break e;sm(f),Rt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ga(g(f.Za,f),6e3));if(1>=_T(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qi(f,11)}else if((c.K||f.g==c)&&Vu(f),!K(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let yt=we[3];yt!=null&&(f.la=yt,f.j.info("VER="+f.la));let vt=we[4];vt!=null&&(f.Aa=vt,f.j.info("SVER="+f.Aa));let cs=we[5];cs!=null&&typeof cs=="number"&&0<cs&&(m=1.5*cs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let vn=c.g;if(vn){let Uu=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var N=m.h;N.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(rm(N,N.h),N.h=null))}if(m.D){let cm=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;cm&&(m.ya=cm,Pe(m.I,m.D,cm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=c;if(m.qa=qT(m,m.J?m.ia:null,m.W),L.K){ET(m.h,L);var Ae=L,dt=m.L;dt&&(Ae.I=dt),Ae.B&&(em(Ae),Nu(Ae)),m.g=L}else UT(m);0<f.i.length&&Lu(f)}else we[0]!="stop"&&we[0]!="close"||Qi(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Qi(f,7):om(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}qa(4)}catch{}}var SO=class{constructor(c,d){this.g=c,this.map=d}};function yT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _T(c){return c.h?1:c.g?c.g.size:0}function nm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rm(c,d){c.g?c.g.add(d):c.h=d}function ET(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yT.prototype.cancel=function(){if(this.i=wT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function wT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function AO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function RO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function IT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=RO(c),m=AO(c),b=m.length,N=0;N<b;N++)d.call(void 0,m[N],f&&f[N],c)}var DT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var N=c[f].substring(0,m);b=c[f].substring(m+1)}else N=c[f];d(N,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ki(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ki){this.h=c.h,Pu(this,c.j),this.o=c.o,this.g=c.g,Mu(this,c.s),this.l=c.l;var d=c.i,f=new Za;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),TT(this,f),this.m=c.m}else c&&(d=String(c).match(DT))?(this.h=!1,Pu(this,d[1]||"",!0),this.o=Qa(d[2]||""),this.g=Qa(d[3]||"",!0),Mu(this,d[4]),this.l=Qa(d[5]||"",!0),TT(this,d[6]||"",!0),this.m=Qa(d[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}Ki.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ya(d,bT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ya(d,bT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ya(f,f.charAt(0)=="/"?xO:MO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ya(f,OO)),c.join("")};function Er(c){return new Ki(c)}function Pu(c,d,f){c.j=f?Qa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Mu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function TT(c,d,f){d instanceof Za?(c.i=d,FO(c.i,c.h)):(f||(d=Ya(d,kO)),c.i=new Za(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function xu(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Qa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ya(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,PO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function PO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bT=/[#\/\?@]/g,MO=/[#\?:]/g,xO=/[#\?]/g,kO=/[#\?@]/g,OO=/#/g;function Za(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Xr(c){c.g||(c.g=new Map,c.h=0,c.i&&NO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Za.prototype,n.add=function(c,d){Xr(this),this.i=null,c=ss(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function CT(c,d){Xr(c),d=ss(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function ST(c,d){return Xr(c),d=ss(c,d),c.g.has(d)}n.forEach=function(c,d){Xr(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},n.na=function(){Xr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let N=0;N<b.length;N++)f.push(d[m])}return f},n.V=function(c){Xr(this);let d=[];if(typeof c=="string")ST(this,c)&&(d=d.concat(this.g.get(ss(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Xr(this),this.i=null,c=ss(this,c),ST(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function AT(c,d,f){CT(c,d),0<f.length&&(c.i=null,c.g.set(ss(c,d),P(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var b=N;L[m]!==""&&(b+="="+encodeURIComponent(String(L[m]))),c.push(b)}}return this.i=c.join("&")};function ss(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function FO(c,d){d&&!c.j&&(Xr(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(CT(this,m),AT(this,b,f))},c)),c.j=d}function LO(c,d){let f=new Wa;if(a.Image){let m=new Image;m.onload=y(ei,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(ei,f,"TestLoadImage: error",!1,d,m),m.onabort=y(ei,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(ei,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function VO(c,d){let f=new Wa,m=new AbortController,b=setTimeout(()=>{m.abort(),ei(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(b),N.ok?ei(f,"TestPingServer: ok",!0,d):ei(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),ei(f,"TestPingServer: error",!1,d)})}function ei(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function jO(){this.g=new wO}function UO(c,d,f){let m=f||"";try{IT(c,function(b,N){let L=b;u(b)&&(L=Wg(b)),d.push(m+N+"="+encodeURIComponent(L))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Ja(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Ja,Kg),Ja.prototype.g=function(){return new ku(this.l,this.j)},Ja.prototype.i=function(c){return function(){return c}}({});function ku(c,d){mt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ku,mt),n=ku.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ec(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ec(this)),this.g&&(this.readyState=3,ec(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function RT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Xa(this):ec(this),this.readyState==3&&RT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Xa(this))},n.Qa=function(c){this.g&&(this.response=c,Xa(this))},n.ga=function(){this.g&&Xa(this)};function Xa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ec(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ec(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ku.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function NT(c){let d="";return Ie(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function im(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=NT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function Ve(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ve,mt);var BO=/^https?$/i,$O=["POST","PUT"];n=Ve.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zg.g(),this.v=this.o?oT(this.o):oT(Zg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){PT(this,N);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call($O,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,L]of f)this.g.setRequestHeader(N,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kT(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){PT(this,N)}};function PT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,MT(c),Ou(c)}function MT(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),Ou(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ou(this,!0)),Ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xT(this):this.bb())},n.bb=function(){xT(this)};function xT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||wr(c)!=4||c.Z()!=2)){if(c.u&&wr(c)==4)tT(c.Ea,0,c);else if(At(c,"readystatechange"),wr(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=L===0){var b=String(c.D).match(DT)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!BO.test(b?b.toLowerCase():"")}f=m}if(f)At(c,"complete"),At(c,"success");else{c.m=6;try{var N=2<wr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",MT(c)}}finally{Ou(c)}}}}function Ou(c,d){if(c.g){kT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||At(c,"ready");try{f.onreadystatechange=m}catch{}}}function kT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function wr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),EO(d)}};function OT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HO(c){let d={};c=(c.g&&2<=wr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(K(c[m]))continue;var f=T(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[b]||[];d[b]=N,N.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function FT(c){this.Aa=0,this.i=[],this.j=new Wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tc("baseRetryDelayMs",5e3,c),this.cb=tc("retryDelaySeedMs",1e4,c),this.Wa=tc("forwardChannelMaxRetries",2,c),this.wa=tc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yT(c&&c.concurrentRequestLimit),this.Da=new jO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=FT.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Rt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=qT(this,null,this.W),Lu(this)};function om(c){if(LT(c),c.G==3){var d=c.U++,f=Er(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),nc(c,f),d=new Jr(c,c.j,d),d.L=2,d.v=xu(Er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=GT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Nu(d)}zT(c)}function Fu(c){c.g&&(am(c),c.g.cancel(),c.g=null)}function LT(c){Fu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Vu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Lu(c){if(!vT(c.h)&&!c.s){c.s=!0;var d=c.Ga;ja||QD(),Ua||(ja(),Ua=!0),Vg.add(d,c),c.B=0}}function zO(c,d){return _T(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ga(g(c.Ga,c,d),HT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Jr(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),I(N,this.S)):N=this.S),this.m!==null||this.O||(b.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=jT(this,b,d),f=Er(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),nc(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(NT(N)))+"&"+d:this.m&&im(f,this.m,N)),rm(this.h,b),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),b.T=!0,Xg(b,f,null)):Xg(b,f,d),this.G=2}}else this.G==3&&(c?VT(this,c):this.i.length==0||vT(this.h)||VT(this))};function VT(c,d){var f;d?f=d.l:f=c.U++;let m=Er(c.I);Pe(m,"SID",c.K),Pe(m,"RID",f),Pe(m,"AID",c.T),nc(c,m),c.m&&c.o&&im(m,c.m,c.o),f=new Jr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=jT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rm(c.h,f),Xg(f,m,d)}function nc(c,d){c.H&&Ie(c.H,function(f,m){Pe(d,m,f)}),c.l&&IT({},function(f,m){Pe(d,m,f)})}function jT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let N=-1;for(;;){let L=["count="+f];N==-1?0<f?(N=b[0].g,L.push("ofs="+N)):N=0:L.push("ofs="+N);let Ae=!0;for(let dt=0;dt<f;dt++){let we=b[dt].g,yt=b[dt].map;if(we-=N,0>we)N=Math.max(0,b[dt].g-100),Ae=!1;else try{UO(yt,L,"req"+we+"_")}catch{m&&m(yt)}}if(Ae){m=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function UT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ja||QD(),Ua||(ja(),Ua=!0),Vg.add(d,c),c.v=0}}function sm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ga(g(c.Fa,c),HT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,BT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ga(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Fu(this),BT(this))};function am(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function BT(c){c.g=new Jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Er(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),nc(c,d),c.m&&c.o&&im(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xu(Er(d)),f.m=null,f.P=!0,pT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Fu(this),sm(this),Rt(19))};function Vu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $T(c,d){var f=null;if(c.g==d){Vu(c),am(c),c.g=null;var m=2}else if(nm(c.h,d))f=d.D,ET(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=Su(),At(m,new uT(m,f)),Lu(c)}else UT(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&zO(c,d)||m==2&&sm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function HT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Qi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new Ki(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pu(m,"https"),xu(m),b?LO(m.toString(),f):VO(m.toString(),f)}else Rt(2);c.G=0,c.l&&c.l.sa(d),zT(c),LT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function zT(c){if(c.G=0,c.ka=[],c.l){let d=wT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function qT(c,d,f){var m=f instanceof Ki?Er(f):new Ki(f);if(m.g!="")d&&(m.g=d+"."+m.g),Mu(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var N=new Ki(null);m&&Pu(N,m),d&&(N.g=d),b&&Mu(N,b),f&&(N.l=f),m=N}return f=c.D,d=c.ya,f&&d&&Pe(m,f,d),Pe(m,"VER",c.la),nc(c,m),m}function GT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ve(new Ja({eb:f})):new Ve(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function WT(){}n=WT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ju(){}ju.prototype.g=function(c,d){return new qt(c,d)};function qt(c,d){mt.call(this),this.g=new FT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new as(this)}C(qt,mt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){om(this.g)},qt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Wg(c),c=f);d.i.push(new SO(d.Ya++,c)),d.G==3&&Lu(d)},qt.prototype.N=function(){this.g.l=null,delete this.j,om(this.g),delete this.g,qt.aa.N.call(this)};function KT(c){Qg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(KT,Qg);function QT(){Yg.call(this),this.status=1}C(QT,Yg);function as(c){this.g=c}C(as,WT),as.prototype.ua=function(){At(this.g,"a")},as.prototype.ta=function(c){At(this.g,new KT(c))},as.prototype.sa=function(c){At(this.g,new QT)},as.prototype.ra=function(){At(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,ow=qr.createWebChannelTransport=function(){return new ju},iw=qr.getStatEventTarget=function(){return Su()},rw=qr.Event=Gi,cp=qr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,zl=qr.ErrorCode=Au,dT.COMPLETE="complete",nw=qr.EventType=dT,sT.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",mt.prototype.listen=mt.prototype.K,la=qr.WebChannel=sT,t3=qr.FetchXmlHttpFactory=Ja,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,tw=qr.XhrIo=Ve}).apply(typeof ap<"u"?ap:typeof self<"u"?self:typeof window<"u"?window:{});var lP="@firebase/firestore",uP="4.7.17";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var Na="11.9.0";var Qo=new sr("@firebase/firestore");function ua(){return Qo.logLevel}function B(n,...e){if(Qo.logLevel<=pe.DEBUG){let t=e.map(YI);Qo.debug(`Firestore (${Na}): ${n}`,...t)}}function Gr(n,...e){if(Qo.logLevel<=pe.ERROR){let t=e.map(YI);Qo.error(`Firestore (${Na}): ${n}`,...t)}}function ya(n,...e){if(Qo.logLevel<=pe.WARN){let t=e.map(YI);Qo.warn(`Firestore (${Na}): ${n}`,...t)}}function YI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nM(n,r,t)}function nM(n,e,t){let r=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gr(r),new Error(r)}function be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||nM(e,i,r)}function re(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends en{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ur=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lt.UNAUTHENTICATED))}shutdown(){}},hw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fw=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ur,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>w(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ur)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new gp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new lt(e)}},pw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},gw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mw=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function n3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function rM(){return new TextEncoder}var yp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=n3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function de(n,e){return n<e?-1:n>e?1:0}function yw(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return de(r,i);{let o=rM(),s=r3(o.encode(dP(n,t)),o.encode(dP(e,t)));return s!==0?s:de(r,i)}}t+=r>65535?2:1}return de(n.length,e.length)}function dP(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function r3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return de(n[t],e[t]);return de(n.length,e.length)}function va(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hP=-62135596800,fP=1e6,pt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hP)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fP}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-hP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new pt(0,0))}static max(){return new n(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pP="__name__",vp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return de(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}},Le=class n extends vp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},i3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class n extends vp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return i3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pP}static keyField(){return new n([pP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Le.fromString(e))}static fromName(e){return new n(Le.fromString(e).popFirst(5))}static empty(){return new n(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Le(e.slice()))}};var Yl=-1,vw=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};vw.UNKNOWN_ID=-1;function o3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new Yo(i,Q.empty(),e)}function s3(n){return new Yo(n.readTime,n.key,Yl)}var Yo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(oe.min(),Q.empty(),Yl)}static max(){return new n(oe.max(),Q.empty(),Yl)}};function a3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var c3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_w=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Pa(n){return w(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==c3)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function l3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ma(n){return n.name==="IndexedDbTransactionError"}var ZI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),JI=-1;function Xp(n){return n==null}function Zl(n){return n===0&&1/n==-1/0}function u3(n){return typeof n=="number"&&Number.isInteger(n)&&!Zl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var iM="";function d3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gP(e)),e=h3(n.get(t),e);return gP(e)}function h3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case iM:t+="";break;default:t+=o}}return t}function gP(n){return n+iM+""}var f3="remoteDocuments",oM="owner";var sM="mutationQueues";var aM="mutations";var cM="documentMutations",p3="remoteDocumentsV14";var lM="remoteDocumentGlobal";var uM="targets";var dM="targetDocuments";var hM="targetGlobal",fM="collectionParents";var pM="clientMetadata";var gM="bundles";var mM="namedQueries";var g3="indexConfiguration";var m3="indexState";var y3="indexEntries";var yM="documentOverlays";var v3="globals";var _3=[sM,aM,cM,f3,uM,oM,hM,dM,pM,lM,fM,gM,mM],nle=[..._3,yM],E3=[sM,aM,cM,p3,uM,oM,hM,dM,pM,lM,fM,gM,mM,yM],w3=E3,I3=[...w3,g3,m3,y3];var rle=[...I3,v3];function mP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||dr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}},pa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},dr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}};dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1;dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _p(this.data.getIterator())}getIteratorFrom(e){return new _p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var gn=class n{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new ut(rn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ep=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var St=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ep("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};St.EMPTY_BYTE_STRING=new St("");var D3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(n){if(be(!!n,39018),typeof n=="string"){let e=0,t=D3.exec(n);if(be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kr(n){return typeof n=="string"?St.fromBase64String(n):St.fromUint8Array(n)}var _M="server_timestamp",EM="__type__",wM="__previous_value__",IM="__local_write_time__";function XI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EM])===null||t===void 0?void 0:t.stringValue)===_M}function eg(n){let e=n.mapValue.fields[wM];return XI(e)?eg(e):e}function Jl(n){let e=Wr(n.mapValue.fields[IM].timestampValue);return new pt(e.seconds,e.nanos)}var Ew=class{constructor(e,t,r,i,o,s,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}},wp="(default)",Ip=class n{constructor(e,t){this.projectId=e,this.database=t||wp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===wp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var eD="__type__",DM="__max__",lp={mapValue:{fields:{__type__:{stringValue:DM}}}},tD="__vector__",_a="value";function ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?XI(n)?4:bM(n)?9007199254740991:TM(n)?10:11:Z(28295,{value:n})}function pr(n,e){if(n===e)return!0;let t=ji(n);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Wr(i.timestampValue),a=Wr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Kr(i.bytesValue).isEqual(Kr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?Zl(s)===Zl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return va(n.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(mP(s)!==mP(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!pr(s[l],a[l])))return!1;return!0}(n,e);default:return Z(52216,{left:n})}}function Xl(n,e){return(n.values||[]).find(t=>pr(t,e))!==void 0}function Ea(n,e){if(n===e)return 0;let t=ji(n),r=ji(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),l=Fe(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return yP(n.timestampValue,e.timestampValue);case 4:return yP(Jl(n),Jl(e));case 5:return yw(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Kr(o),l=Kr(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=de(a[u],l[u]);if(h!==0)return h}return de(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=de(Fe(o.latitude),Fe(s.latitude));return a!==0?a:de(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vP(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,h;let p=o.fields||{},g=s.fields||{},y=(a=p[_a])===null||a===void 0?void 0:a.arrayValue,C=(l=g[_a])===null||l===void 0?void 0:l.arrayValue,P=de(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:vP(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===lp.mapValue&&s===lp.mapValue)return 0;if(o===lp.mapValue)return 1;if(s===lp.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let g=yw(l[p],h[p]);if(g!==0)return g;let y=Ea(a[l[p]],u[h[p]]);if(y!==0)return y}return de(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Z(23264,{Pe:t})}}function yP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=Wr(n),r=Wr(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function vP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ea(t[i],r[i]);if(o)return o}return de(t.length,r.length)}function wa(n){return ww(n)}function ww(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Wr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Kr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ww(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ww(t.fields[s])}`;return i+"}"}(n.mapValue):Z(61005,{value:n})}function hp(n){switch(ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=eg(n);return e?16+hp(e):16;case 5:return 2*n.stringValue.length;case 6:return Kr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+hp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zi(r.fields,(o,s)=>{i+=o.length+hp(s)}),i}(n.mapValue);default:throw Z(13486,{value:n})}}function _P(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iw(n){return!!n&&"integerValue"in n}function nD(n){return!!n&&"arrayValue"in n}function EP(n){return!!n&&"nullValue"in n}function wP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fp(n){return!!n&&"mapValue"in n}function TM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eD])===null||t===void 0?void 0:t.stringValue)===tD}function Gl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DM}var ole={mapValue:{fields:{[eD]:{stringValue:tD},[_a]:{arrayValue:{}}}}};var nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=rn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Gl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());fp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Gl(this.value))}};function CM(n){let e=[];return zi(n.fields,(t,r)=>{let i=new rn([t]);if(fp(r)){let o=CM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new gn(e)}var Fn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),nn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ia=class{constructor(e,t){this.position=e,this.inclusive=t}};function IP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Ea(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function DP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pr(n.position[t],e.position[t]))return!1;return!0}var Zo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function T3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Dp=class{},et=class n extends Dp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Tw(e,t,r):t==="array-contains"?new Sw(e,r):t==="in"?new Aw(e,r):t==="not-in"?new Rw(e,r):t==="array-contains-any"?new Nw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bw(e,r):new Cw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&ji(this.value)===ji(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ln=class n extends Dp{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return SM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function SM(n){return n.op==="and"}function AM(n){return b3(n)&&SM(n)}function b3(n){for(let e of n.filters)if(e instanceof Ln)return!1;return!0}function Dw(n){if(n instanceof et)return n.field.canonicalString()+n.op.toString()+wa(n.value);if(AM(n))return n.filters.map(e=>Dw(e)).join(",");{let e=n.filters.map(t=>Dw(t)).join(",");return`${n.op}(${e})`}}function RM(n,e){return n instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(n,e):n instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&RM(s,i.filters[a]),!0):!1}(n,e):void Z(19439)}function NM(n){return n instanceof et?function(t){return`${t.field.canonicalString()} ${t.op} ${wa(t.value)}`}(n):n instanceof Ln?function(t){return t.op.toString()+" {"+t.getFilters().map(NM).join(" ,")+"}"}(n):"Filter"}var Tw=class extends et{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},bw=class extends et{constructor(e,t){super(e,"in",t),this.keys=PM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Cw=class extends et{constructor(e,t){super(e,"not-in",t),this.keys=PM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function PM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var Sw=class extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nD(t)&&Xl(t.arrayValue,this.value)}},Aw=class extends et{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xl(this.value.arrayValue,t)}},Rw=class extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xl(this.value.arrayValue,t)}},Nw=class extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xl(this.value.arrayValue,r))}};var Pw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function TP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Pw(n,e,t,r,i,o,s)}function rD(n){let e=re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wa(r)).join(",")),e.Ie=t}return e.Ie}function iD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!T3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DP(n.startAt,e.startAt)&&DP(n.endAt,e.endAt)}function Mw(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ui=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function C3(n,e,t,r,i,o,s,a){return new Ui(n,e,t,r,i,o,s,a)}function oD(n){return new Ui(n)}function bP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MM(n){return n.collectionGroup!==null}function Wl(n){let e=re(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ut(rn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Zo(o,r))}),t.has(rn.keyField().canonicalString())||e.Ee.push(new Zo(rn.keyField(),r))}return e.Ee}function hr(n){let e=re(n);return e.de||(e.de=S3(e,Wl(n))),e.de}function S3(n,e){if(n.limitType==="F")return TP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zo(i.field,o)});let t=n.endAt?new Ia(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ia(n.startAt.position,n.startAt.inclusive):null;return TP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xw(n,e){let t=n.filters.concat([e]);return new Ui(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kw(n,e,t){return new Ui(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tg(n,e){return iD(hr(n),hr(e))&&n.limitType===e.limitType}function xM(n){return`${rD(hr(n))}|lt:${n.limitType}`}function da(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NM(i)).join(", ")}]`),Xp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wa(i)).join(",")),`Target(${r})`}(hr(n))}; limitType=${n.limitType})`}function ng(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Wl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=IP(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Wl(r),i)||r.endAt&&!function(s,a,l){let u=IP(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Wl(r),i))}(n,e)}function A3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kM(n){return(e,t)=>{let r=!1;for(let i of Wl(n)){let o=R3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function R3(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Ea(l,u):Z(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:n.dir})}}var Qr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}};var N3=new He(Q.comparator);function Yr(){return N3}var OM=new He(Q.comparator);function ql(...n){let e=OM;for(let t of n)e=e.insert(t.key,t);return e}function FM(n){let e=OM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Go(){return Kl()}function LM(){return Kl()}function Kl(){return new Qr(n=>n.toString(),(n,e)=>n.isEqual(e))}var P3=new He(Q.comparator),M3=new ut(Q.comparator);function me(...n){let e=M3;for(let t of n)e=e.add(t);return e}var x3=new ut(de);function k3(){return x3}function sD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function VM(n){return{integerValue:""+n}}function O3(n,e){return u3(e)?VM(e):sD(n,e)}var Da=class{constructor(){this._=void 0}};function F3(n,e,t){return n instanceof Ta?function(i,o){let s={fields:{[EM]:{stringValue:_M},[IM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&XI(o)&&(o=eg(o)),o&&(s.fields[wM]=o),{mapValue:s}}(t,e):n instanceof Jo?UM(n,e):n instanceof Xo?BM(n,e):function(i,o){let s=jM(i,o),a=CP(s)+CP(i.Re);return Iw(s)&&Iw(i.Re)?VM(a):sD(i.serializer,a)}(n,e)}function L3(n,e,t){return n instanceof Jo?UM(n,e):n instanceof Xo?BM(n,e):t}function jM(n,e){return n instanceof ba?function(r){return Iw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ta=class extends Da{},Jo=class extends Da{constructor(e){super(),this.elements=e}};function UM(n,e){let t=$M(e);for(let r of n.elements)t.some(i=>pr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xo=class extends Da{constructor(e){super(),this.elements=e}};function BM(n,e){let t=$M(e);for(let r of n.elements)t=t.filter(i=>!pr(i,r));return{arrayValue:{values:t}}}var ba=class extends Da{constructor(e,t){super(),this.serializer=e,this.Re=t}};function CP(n){return Fe(n.integerValue||n.doubleValue)}function $M(n){return nD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function V3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Jo&&i instanceof Jo||r instanceof Xo&&i instanceof Xo?va(r.elements,i.elements,pr):r instanceof ba&&i instanceof ba?pr(r.Re,i.Re):r instanceof Ta&&i instanceof Ta}(n.transform,e.transform)}var Ow=class{constructor(e,t){this.version=e,this.transformResults=t}},mn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ca=class{};function HM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sa(n.key,mn.none()):new es(n.key,n.data,mn.none());{let t=n.data,r=nn.empty(),i=new ut(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gr(n.key,r,new gn(i.toArray()),mn.none())}}function j3(n,e,t){n instanceof es?function(i,o,s){let a=i.value.clone(),l=AP(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gr?function(i,o,s){if(!pp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=AP(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(zM(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ql(n,e,t,r){return n instanceof es?function(o,s,a,l){if(!pp(o.precondition,s))return a;let u=o.value.clone(),h=RP(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof gr?function(o,s,a,l){if(!pp(o.precondition,s))return a;let u=RP(o.fieldTransforms,l,s),h=s.data;return h.setAll(zM(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return pp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function U3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=jM(r.transform,i||null);o!=null&&(t===null&&(t=nn.empty()),t.set(r.field,o))}return t||null}function SP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&va(r,i,(o,s)=>V3(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var es=class extends Ca{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gr=class extends Ca{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function zM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function AP(n,e,t){let r=new Map;be(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,L3(s,a,t[i]))}return r}function RP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,F3(o,s,e))}return r}var Sa=class extends Ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fw=class extends Ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&j3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ql(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ql(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=LM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=HM(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(t,r)=>SP(t,r))&&va(this.baseMutations,e.baseMutations,(t,r)=>SP(t,r))}},Vw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){be(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return P3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var jw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Uw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ve;function B3(n){switch(n){case M.OK:return Z(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Z(15467,{code:n})}}function qM(n){if(n===void 0)return Gr("GRPC error has no .code"),M.UNKNOWN;switch(n){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return Z(39323,{code:n})}}(ve=Je||(Je={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var NP=null;var $3=new zr([4294967295,4294967295],0);function PP(n){let e=rM().encode(n),t=new ew;return t.update(e),new Uint8Array(t.digest())}function MP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zr([t,r],0),new zr([i,o],0)]}var Bw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wo(`Invalid padding: ${t}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=zr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(zr.fromNumber(r)));return i.compare($3)===1&&(i=new zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=PP(e),[r,i]=MP(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=PP(e),[r,i]=MP(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Wo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(oe.min(),i,new He(de),Yr(),me())}},eu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var ga=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},bp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Cp=class{constructor(e,t,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sp=class{constructor(){this.Fe=0,this.Me=xP(),this.xe=St.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=me(),t=me(),r=me();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:o})}}),new eu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=xP()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,be(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},$w=class{constructor(e){this.ze=e,this.je=new Map,this.He=Yr(),this.Je=up(),this.Ye=up(),this.Ze=new He(de)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(Mw(o))if(r===0){let s=new Q(o.path);this.tt(t,s,Fn.newNoDocument(s,oe.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),l=a?this.lt(a,e,s):1;if(l!==0){this.st(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}NP?.ht(function(h,p,g,y,C){var P,R,F,K,H,ye;let Qe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ie=p.unchangedNames;return Ie&&(Qe.bloomFilter={applied:C===0,hashCount:(P=Ie?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(K=(F=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&K!==void 0?K:0,padding:(ye=(H=Ie?.bits)===null||H===void 0?void 0:H.padding)!==null&&ye!==void 0?ye:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Qe}(s,e.Ce,this.ze.Pt(),a,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Kr(r).toUint8Array()}catch(l){if(l instanceof Ep)return ya("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bw(s,i,o)}catch(l){return ya(l instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Mw(a.target)){let l=new Q(a.target.path);this.Et(l).has(s)||this.dt(s,l)||this.tt(s,l,Fn.newNoDocument(l,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=me();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Tp(e,t,this.Ze,this.He,r);return this.He=Yr(),this.Je=up(),this.Ye=up(),this.Ze=new He(de),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Sp,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ut(de),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ut(de),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Sp),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function up(){return new He(Q.comparator)}function xP(){return new He(Q.comparator)}var H3={asc:"ASCENDING",desc:"DESCENDING"},z3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q3={and:"AND",or:"OR"},Hw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function zw(n,e){return n.useProto3Json||Xp(e)?e:{value:e}}function Ap(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function G3(n,e){return Ap(n,e.toTimestamp())}function fr(n){return be(!!n,49232),oe.fromTimestamp(function(t){let r=Wr(t);return new pt(r.seconds,r.nanos)}(n))}function aD(n,e){return qw(n,e).canonicalString()}function qw(n,e){let t=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function WM(n){let e=Le.fromString(n);return be(JM(e),10190,{key:e.toString()}),e}function Gw(n,e){return aD(n.databaseId,e.path)}function sw(n,e){let t=WM(e);if(t.get(1)!==n.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(QM(t))}function KM(n,e){return aD(n.databaseId,e)}function W3(n){let e=WM(n);return e.length===4?Le.emptyPath():QM(e)}function Ww(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QM(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kP(n,e,t){return{name:Gw(n,e),fields:t.value.mapValue.fields}}function K3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(be(h===void 0||typeof h=="string",58123),St.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),St.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?M.UNKNOWN:qM(u.code);return new U(h,u.message||"")}(s);t=new Cp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sw(n,r.document.name),o=fr(r.document.updateTime),s=r.document.createTime?fr(r.document.createTime):oe.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=Fn.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new ga(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sw(n,r.document),o=r.readTime?fr(r.readTime):oe.min(),s=Fn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ga([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sw(n,r.document),o=r.removedTargetIds||[];t=new ga([],o,i,null)}else{if(!("filter"in e))return Z(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Uw(i,o),a=r.targetId;t=new bp(a,s)}}return t}function Q3(n,e){let t;if(e instanceof es)t={update:kP(n,e.key,e.value)};else if(e instanceof Sa)t={delete:Gw(n,e.key)};else if(e instanceof gr)t={update:kP(n,e.key,e.data),updateMask:iq(e.fieldMask)};else{if(!(e instanceof Fw))return Z(16599,{ft:e.type});t={verify:Gw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ta)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ba)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw Z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:G3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z(27497)}(n,e.precondition)),t}function Y3(n,e){return n&&n.length>0?(be(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?fr(i.updateTime):fr(o);return s.isEqual(oe.min())&&(s=fr(o)),new Ow(s,i.transformResults||[])}(t,e))):[]}function Z3(n,e){return{documents:[KM(n,e.path)]}}function J3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KM(n,i);let o=function(u){if(u.length!==0)return ZM(Ln.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:ha(g.field),direction:tq(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=zw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function X3(n){let e=W3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){be(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=YM(p);return g instanceof Ln&&AM(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(C){return new Zo(fa(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Xp(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){let g=!!p.before,y=p.values||[];return new Ia(y,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let g=!p.before,y=p.values||[];return new Ia(y,g)}(t.endAt)),C3(e,i,s,o,a,"F",l,u)}function eq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=fa(t.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fa(t.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fa(t.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fa(t.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(n):n.fieldFilter!==void 0?function(t){return et.create(fa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ln.create(t.compositeFilter.filters.map(r=>YM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(t.compositeFilter.op))}(n):Z(30097,{filter:n})}function tq(n){return H3[n]}function nq(n){return z3[n]}function rq(n){return q3[n]}function ha(n){return{fieldPath:n.canonicalString()}}function fa(n){return rn.fromServerFormat(n.fieldPath)}function ZM(n){return n instanceof et?function(t){if(t.op==="=="){if(wP(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NAN"}};if(EP(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wP(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NAN"}};if(EP(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(t.field),op:nq(t.op),value:t.value}}}(n):n instanceof Ln?function(t){let r=t.getFilters().map(i=>ZM(i));return r.length===1?r[0]:{compositeFilter:{op:rq(t.op),filters:r}}}(n):Z(54877,{filter:n})}function iq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var tu=class n{constructor(e,t,r,i,o=oe.min(),s=oe.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Kw=class{constructor(e){this.wt=e}};function oq(n){let e=X3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kw(e,e.limit,"L"):e}var Rp=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Zl(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Wr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Kr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?bM(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):TM(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Z(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=_a,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Fe(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),Q.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Rp.Wt=new Rp;var Qw=class{constructor(){this.Cn=new Yw}addToCollectionParentIndex(e,t){return this.Cn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Yo.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Yw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(Le.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Le.comparator)).toArray()}};var sle=new Uint8Array(0);var OP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XM=41943040,pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(XM,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);var nu=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var FP="LruGarbageCollector",sq=1048576;function LP([n,e],[t,r]){let i=de(n,t);return i===0?de(e,r):i}var Zw=class{constructor(e){this.Er=e,this.buffer=new ut(LP),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();LP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Jw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){B(FP,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ma(t)?B(FP,"Ignoring IndexedDB error during garbage collection: ",t):yield Pa(t)}yield this.mr(3e5)}))}},Xw=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(ZI.le);let r=new Zw(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(OP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OP):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),ua()<=pe.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function aq(n,e){return new Xw(n,e)}var eI=class{constructor(){this.changes=new Qr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ql(r.mutation,i,gn.empty(),pt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=Go();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ql();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Yr(),s=Kl(),a=function(){return Kl()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof gr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Ql(h.mutation,u,h.mutation.getFieldMask(),pt.now())):s.set(u.key,gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var p;return a.set(u,new tI(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Kl(),i=new He((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||gn.empty();h=a.applyToLocalView(u,h),r.set(l,h);let p=(i.get(a.batchId)||me()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=LM();h.forEach(g=>{if(!o.has(g)){let y=HM(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Go()),a=Yl,l=o;return s.next(u=>x.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,me())).next(h=>({batchId:a,changes:FM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ql();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,l=>{let u=function(p,g){return new Ui(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Fn.newInvalidDocument(h)))});let a=ql();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&Ql(h.mutation,u,gn.empty(),pt.now()),ng(t,u)&&(a=a.insert(l,u))}),a})}};var rI=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return x.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:fr(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:oq(i.bundledQuery),readTime:fr(i.readTime)}}(t)),x.resolve()}};var iI=class{constructor(){this.overlays=new He(Q.comparator),this.Qr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Go();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Go(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new He((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Go(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Go(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return x.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jw(t,r));let o=this.Qr.get(t);o===void 0&&(o=me(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var oI=class{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var ru=class{constructor(){this.$r=new ut(Xe.Ur),this.Kr=new ut(Xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Xe(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new Q(new Le([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new Q(new Le([])),r=new Xe(t,e),i=new Xe(t,e+1),o=me();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Q.comparator(e.key,t.key)||de(e.Zr,t.Zr)}static Wr(e,t){return de(e.Zr,t.Zr)||Q.comparator(e.key,t.key)}};var sI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ut(Xe.Ur)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?JI:this.nr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(de);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),x.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new Q(o),0),a=new ut(de);return this.Xr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Zr)),!0)},s),x.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){be(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return x.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Xe(t,0),i=this.Xr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aI=class{constructor(e){this.ii=e,this.docs=function(){return new He(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Yr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Yr(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||a3(s3(h),r)<=0||(i.has(h.key)||ng(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Z(9500)}si(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cI(this)}getSize(e){return x.resolve(this.size)}},cI=class extends eI{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var lI=class{constructor(e){this.persistence=e,this.oi=new Qr(t=>rD(t),iD),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this._i=0,this.ai=new ru,this.targetCount=0,this.ui=nu.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),x.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new nu(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Tr(t),x.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.ai.containsKey(t))}};var Np=class{constructor(e,t){this.ci={},this.overlays={},this.li=new ZI(0),this.hi=!1,this.hi=!0,this.Pi=new oI,this.referenceDelegate=e(this),this.Ti=new lI(this),this.indexManager=new Qw,this.remoteDocumentCache=function(i){return new aI(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Kw(t),this.Ei=new rI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new sI(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new uI(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return x.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},uI=class extends _w{constructor(e){super(),this.currentSequenceNumber=e}},dI=class n{constructor(e){this.persistence=e,this.Vi=new ru,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw Z(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.gi,r=>{let i=Q.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,oe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return x.or([()=>x.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Pp=class n{constructor(e,t){this.persistence=e,this.yi=new Qr(r=>d3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=aq(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return x.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),x.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hp(e.data.value)),t}Dr(e,t,r){return x.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=me(),i=me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var fI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pI=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return xR()?8:l3(ct())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fI;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(ua()<=pe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),x.resolve()):(ua()<=pe.DEBUG&&B("QueryEngine","Query:",da(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ua()<=pe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):x.resolve())}ws(e,t){if(bP(t))return x.resolve(null);let r=hr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kw(t,null,"F"),r=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=me(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.vs(t,a);return this.Cs(t,u,s,l.readTime)?this.ws(e,kw(t,null,"F")):this.Fs(e,u,t,l)}))})))}bs(e,t,r,i){return bP(t)||i.isEqual(oe.min())?x.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?x.resolve(null):(ua()<=pe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),da(t)),this.Fs(e,s,t,o3(i,Yl)).next(a=>a))})}vs(e,t){let r=new ut(kM(e));return t.forEach((i,o)=>{ng(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ua()<=pe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",da(t)),this.ys.getDocumentsMatchingQuery(e,t,Yo.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var cD="LocalStore",cq=3e8,gI=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new He(de),this.Os=new Qr(o=>rD(o),iD),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function lq(n,e,t,r){return new gI(n,e,t,r)}function ex(n,e){return w(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=me();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:s,addedBatchIds:a}))})})})}function uq(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,g=p.keys(),y=x.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(l,C)).next(P=>{let R=u.docVersions.get(C);be(R!==null,48541),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tx(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function dq(n,e){let t=re(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(St.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(P,R,F){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=cq?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,h)&&a.push(t.Ti.updateTargetData(o,y))});let l=Yr(),u=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(hq(o,s,e.documentUpdates).next(h=>{l=h.qs,u=h.Qs})),!r.isEqual(oe.min())){let h=t.Ti.getLastRemoteSnapshotVersion(o).next(p=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.xs=i,o))}function hq(n,e,t){let r=me(),i=me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Yr();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):B(cD,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:s,Qs:i}})}function fq(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=JI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pq(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new tu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function mI(n,e,t){return w(this,null,function*(){let r=re(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ma(s))throw s;B(cD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function VP(n,e,t){let r=re(n),i=oe.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let p=re(l),g=p.Os.get(h);return g!==void 0?x.resolve(p.xs.get(g)):p.Ti.getTargetData(u,h)}(r,s,hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:oe.min(),t?o:me())).next(a=>(gq(r,A3(e),a),{documents:a,$s:o})))}function gq(n,e,t){let r=n.Ns.get(e)||oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var Mp=class{constructor(){this.activeTargetIds=k3()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yI=class{constructor(){this.xo=new Mp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vI=class{No(e){}shutdown(){}};var jP="ConnectivityMonitor",xp=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){B(jP,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){B(jP,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dp=null;function _I(){return dp===null?dp=function(){return 268435456+Math.round(2147483648*Math.random())}():dp++,"0x"+dp.toString(16)}var aw="RestConnection",mq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},EI=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===wp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=_I(),a=this.jo(e,t.toUriEncodedString());B(aw,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,o);let{host:u}=new URL(a),h=Ni(u);return this.Jo(e,a,l,r,h).then(p=>(B(aw,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ya(aw,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=mq[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var wI=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var Ct="WebChannelConnection",II=class extends EI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=_I();return new Promise((a,l)=>{let u=new tw;u.setWithCredentials(!0),u.listenOnce(nw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zl.NO_ERROR:let p=u.getResponseJson();B(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case zl.TIMEOUT:B(Ct,`RPC '${e}' ${s} timed out`),l(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:let g=u.getStatus();if(B(Ct,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let P=function(F){let K=F.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(K)>=0?K:M.UNKNOWN}(C.status);l(new U(P,C.message))}else l(new U(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new U(M.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{h_:e,streamId:s,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{B(Ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(Ct,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}I_(e,t,r){let i=_I(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ow(),a=iw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=o.join("");B(Ct,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=s.createWebChannel(h,l);this.E_(p);let g=!1,y=!1,C=new wI({Zo:R=>{y?B(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(B(Ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),B(Ct,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),P=(R,F,K)=>{R.listen(F,H=>{try{K(H)}catch(ye){setTimeout(()=>{throw ye},0)}})};return P(p,la.EventType.OPEN,()=>{y||(B(Ct,`RPC '${e}' stream ${i} transport opened.`),C.__())}),P(p,la.EventType.CLOSE,()=>{y||(y=!0,B(Ct,`RPC '${e}' stream ${i} transport closed`),C.u_(),this.d_(p))}),P(p,la.EventType.ERROR,R=>{y||(y=!0,ya(Ct,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.u_(new U(M.UNAVAILABLE,"The operation could not be completed")))}),P(p,la.EventType.MESSAGE,R=>{var F;if(!y){let K=R.data[0];be(!!K,16349);let H=K,ye=H?.error||((F=H[0])===null||F===void 0?void 0:F.error);if(ye){B(Ct,`RPC '${e}' stream ${i} received error:`,ye);let Qe=ye.status,Ie=function(E){let I=Je[E];if(I!==void 0)return qM(I)}(Qe),D=ye.message;Ie===void 0&&(Ie=M.INTERNAL,D="Unknown error status: "+Qe+" with message "+ye.message),y=!0,C.u_(new U(Ie,D)),p.close()}else B(Ct,`RPC '${e}' stream ${i} received:`,K),C.c_(K)}}),P(a,rw.STAT_EVENT,R=>{R.stat===cp.PROXY?B(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===cp.NOPROXY&&B(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function cw(){return typeof document<"u"?document:null}function rg(n){return new Hw(n,!0)}var kp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var UP="PersistentStream",Op=class{constructor(e,t,r,i,o,s,a,l){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new kp(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return w(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return w(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return w(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Gr(t.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>w(this,null,function*(){this.state=0,this.start()}))}j_(e){return B(UP,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(B(UP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},DI=class extends Op{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=K3(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?fr(s.readTime):oe.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=Ww(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=Mw(l)?{documents:Z3(o,l)}:{query:J3(o,l).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=GM(o,s.resumeToken);let u=zw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=Ap(o,s.snapshotVersion.toTimestamp());let u=zw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=eq(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=Ww(this.serializer),t.removeTarget=e,this.Q_(t)}},TI=class extends Op{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=Y3(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=Ww(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Q3(this.serializer,r))};this.Q_(t)}};var bI=class{},CI=class extends bI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,qw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,qw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},SI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Gr(t),this.ua=!1):B("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var ts="RemoteStore",AI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>w(this,null,function*(){rs(this)&&(B(ts,"Restarting streams for network reachability change."),yield function(l){return w(this,null,function*(){let u=re(l);u.da.add(4),yield uu(u),u.Va.set("Unknown"),u.da.delete(4),yield ig(u)})}(this))}))}),this.Va=new SI(r,i)}};function ig(n){return w(this,null,function*(){if(rs(n))for(let e of n.Aa)yield e(!0)})}function uu(n){return w(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function nx(n,e){let t=re(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),hD(t)?dD(t):xa(t).N_()&&uD(t,e))}function lD(n,e){let t=re(n),r=xa(t);t.Ea.delete(e),r.N_()&&rx(t,e),t.Ea.size===0&&(r.N_()?r.k_():rs(t)&&t.Va.set("Unknown"))}function uD(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xa(n).Z_(e)}function rx(n,e){n.ma.Ke(e),xa(n).X_(e)}function dD(n){n.ma=new $w({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),xa(n).start(),n.Va.ca()}function hD(n){return rs(n)&&!xa(n).O_()&&n.Ea.size>0}function rs(n){return re(n).da.size===0}function ix(n){n.ma=void 0}function yq(n){return w(this,null,function*(){n.Va.set("Online")})}function vq(n){return w(this,null,function*(){n.Ea.forEach((e,t)=>{uD(n,e)})})}function _q(n,e){return w(this,null,function*(){ix(n),hD(n)?(n.Va.Pa(e),dD(n)):n.Va.set("Unknown")})}function Eq(n,e,t){return w(this,null,function*(){if(n.Va.set("Online"),e instanceof Cp&&e.state===2&&e.cause)try{yield function(i,o){return w(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){B(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fp(n,r)}else if(e instanceof ga?n.ma.Xe(e):e instanceof bp?n.ma.ot(e):n.ma.nt(e),!t.isEqual(oe.min()))try{let r=yield tx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.Ea.get(u);h&&o.Ea.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.Ea.get(l);if(!h)return;o.Ea.set(l,h.withResumeToken(St.EMPTY_BYTE_STRING,h.snapshotVersion)),rx(o,l);let p=new tu(h.target,l,u,h.sequenceNumber);uD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){B(ts,"Failed to raise snapshot:",r),yield Fp(n,r)}})}function Fp(n,e,t){return w(this,null,function*(){if(!Ma(e))throw e;n.da.add(1),yield uu(n),n.Va.set("Offline"),t||(t=()=>tx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){B(ts,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield ig(n)}))})}function ox(n,e){return e().catch(t=>Fp(n,t,e))}function og(n){return w(this,null,function*(){let e=re(n),t=Bi(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:JI;for(;wq(e);)try{let i=yield fq(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,Iq(e,i)}catch(i){yield Fp(e,i)}sx(e)&&ax(e)})}function wq(n){return rs(n)&&n.Ia.length<10}function Iq(n,e){n.Ia.push(e);let t=Bi(n);t.N_()&&t.ea&&t.ta(e.mutations)}function sx(n){return rs(n)&&!Bi(n).O_()&&n.Ia.length>0}function ax(n){Bi(n).start()}function Dq(n){return w(this,null,function*(){Bi(n).ia()})}function Tq(n){return w(this,null,function*(){let e=Bi(n);for(let t of n.Ia)e.ta(t.mutations)})}function bq(n,e,t){return w(this,null,function*(){let r=n.Ia.shift(),i=Vw.from(r,e,t);yield ox(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield og(n)})}function Cq(n,e){return w(this,null,function*(){e&&Bi(n).ea&&(yield function(r,i){return w(this,null,function*(){if(function(s){return B3(s)&&s!==M.ABORTED}(i.code)){let o=r.Ia.shift();Bi(r).L_(),yield ox(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield og(r)}})}(n,e)),sx(n)&&ax(n)})}function BP(n,e){return w(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),B(ts,"RemoteStore received new credentials");let r=rs(t);t.da.add(3),yield uu(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield ig(t)})}function Sq(n,e){return w(this,null,function*(){let t=re(n);e?(t.da.delete(2),yield ig(t)):e||(t.da.add(2),yield uu(t),t.Va.set("Unknown"))})}function xa(n){return n.fa||(n.fa=function(t,r,i){let o=re(t);return o.oa(),new DI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:yq.bind(null,n),n_:vq.bind(null,n),i_:_q.bind(null,n),Y_:Eq.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.fa.L_(),hD(n)?dD(n):n.Va.set("Unknown")):(yield n.fa.stop(),ix(n))}))),n.fa}function Bi(n){return n.ga||(n.ga=function(t,r,i){let o=re(t);return o.oa(),new TI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Dq.bind(null,n),i_:Cq.bind(null,n),na:Tq.bind(null,n),ra:bq.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.ga.L_(),yield og(n)):(yield n.ga.stop(),n.Ia.length>0&&(B(ts,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var RI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fD(n,e){if(Gr("AsyncQueue",`${e}: ${n}`),Ma(n))return new U(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Lp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=ql(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Vp=class{constructor(){this.pa=new He(Q.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Z(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},Aa=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Lp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var NI=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},PI=class{constructor(){this.queries=$P(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=re(t),o=i.queries;i.queries=$P(),o.forEach((s,a)=>{for(let l of a.Sa)l.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}};function $P(){return new Qr(n=>xM(n),tg)}function cx(n,e){return w(this,null,function*(){let t=re(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new NI,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield t.onListen(i,!0);break;case 1:o.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=fD(s,`Initialization of query '${da(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&pD(t)})}function lx(n,e){return w(this,null,function*(){let t=re(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Aq(n,e){let t=re(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&pD(t)}function Rq(n,e,t){let r=re(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function pD(n){n.Ca.forEach(e=>{e.next()})}var MI,HP;(HP=MI||(MI={})).xa="default",HP.Cache="cache";var jp=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==MI.Cache}};var Up=class{constructor(e){this.key=e}},Bp=class{constructor(e){this.key=e}},xI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=me(),this.mutatedKeys=me(),this.Za=kM(e),this.Xa=new Lp(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Vp,i=t?t.Xa:this.Xa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=ng(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?C!==P&&(r.track({type:3,doc:y}),R=!0):this.ru(g,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.Za(y,l)>0||u&&this.Za(y,u)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(l||u)&&(a=!0)),R&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,C){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Vt:R})}};return P(y)-P(C)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Ja;return this.Ja=l,s.length!==0||u?{snapshot:new Aa(this.query,e.Xa,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Vp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=me(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Bp(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Up(r))}),t}au(e){this.Ha=e.$s,this.Ya=me();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Aa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},gD="SyncEngine",kI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},OI=class{constructor(e){this.key=e,this.cu=!1}},FI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Qr(a=>xM(a),tg),this.Pu=new Map,this.Tu=new Set,this.Iu=new He(Q.comparator),this.Eu=new Map,this.du=new ru,this.Au={},this.Ru=new Map,this.Vu=nu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function Nq(n,e,t=!0){return w(this,null,function*(){let r=gx(n),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield ux(r,e,t,!0),i})}function Pq(n,e){return w(this,null,function*(){let t=gx(n);yield ux(t,e,!0,!1)})}function ux(n,e,t,r){return w(this,null,function*(){let i=yield pq(n.localStore,hr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Mq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&nx(n.remoteStore,i),a})}function Mq(n,e,t,r,i){return w(this,null,function*(){n.fu=(p,g,y)=>function(P,R,F,K){return w(this,null,function*(){let H=R.view.tu(F);H.Cs&&(H=yield VP(P.localStore,R.query,!1).then(({documents:D})=>R.view.tu(D,H)));let ye=K&&K.targetChanges.get(R.targetId),Qe=K&&K.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(H,P.isPrimaryClient,ye,Qe);return qP(P,R.targetId,Ie.ou),Ie.snapshot})}(n,p,g,y);let o=yield VP(n.localStore,e,!0),s=new xI(e,o.$s),a=s.tu(o.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);qP(n,t,u.ou);let h=new kI(e,t,s);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),u.snapshot})}function xq(n,e,t){return w(this,null,function*(){let r=re(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!tg(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lD(r.remoteStore,i.targetId),LI(r,i.targetId)}).catch(Pa))):(LI(r,i.targetId),yield mI(r.localStore,i.targetId,!0))})}function kq(n,e){return w(this,null,function*(){let t=re(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lD(t.remoteStore,r.targetId))})}function Oq(n,e,t){return w(this,null,function*(){let r=$q(n);try{let i=yield function(s,a){let l=re(s),u=pt.now(),h=a.reduce((y,C)=>y.add(C.key),me()),p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Yr(),P=me();return l.Bs.getEntries(y,h).next(R=>{C=R,C.forEach((F,K)=>{K.isValidDocument()||(P=P.add(F))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let F=[];for(let K of a){let H=U3(K,p.get(K.key).overlayedDocument);H!=null&&F.push(new gr(K.key,H,CM(H.value.mapValue),mn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,F,a)}).next(R=>{g=R;let F=R.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:g.batchId,changes:FM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Au[s.currentUser.toKey()];u||(u=new He(de)),u=u.insert(a,l),s.Au[s.currentUser.toKey()]=u}(r,i.batchId,t),yield du(r,i.changes),yield og(r.remoteStore)}catch(i){let o=fD(i,"Failed to persist write");t.reject(o)}})}function dx(n,e){return w(this,null,function*(){let t=re(n);try{let r=yield dq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?be(s.cu,14607):i.removedDocuments.size>0&&(be(s.cu,42227),s.cu=!1))}),yield du(t,r,e)}catch(r){yield Pa(r)}})}function zP(n,e,t){let r=re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=re(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(u=!0)}),u&&pD(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fq(n,e,t){return w(this,null,function*(){let r=re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new He(Q.comparator);s=s.insert(o,Fn.newNoDocument(o,oe.min()));let a=me().add(o),l=new Tp(oe.min(),new Map,new He(de),s,a);yield dx(r,l),r.Iu=r.Iu.remove(o),r.Eu.delete(e),mD(r)}else yield mI(r.localStore,e,!1).then(()=>LI(r,e,t)).catch(Pa)})}function Lq(n,e){return w(this,null,function*(){let t=re(n),r=e.batch.batchId;try{let i=yield uq(t.localStore,e);fx(t,r,null),hx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield du(t,i)}catch(i){yield Pa(i)}})}function Vq(n,e,t){return w(this,null,function*(){let r=re(n);try{let i=yield function(s,a){let l=re(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(be(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);fx(r,e,t),hx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield du(r,i)}catch(i){yield Pa(i)}})}function hx(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function fx(n,e,t){let r=re(n),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function LI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||px(n,r)})}function px(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(lD(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),mD(n))}function qP(n,e,t){for(let r of t)r instanceof Up?(n.du.addReference(r.key,e),jq(n,r)):r instanceof Bp?(B(gD,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||px(n,r.key)):Z(19791,{pu:r})}function jq(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(B(gD,"New document in limbo: "+t),n.Tu.add(r),mD(n))}function mD(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new Q(Le.fromString(e)),r=n.Vu.next();n.Eu.set(r,new OI(t)),n.Iu=n.Iu.insert(t,r),nx(n.remoteStore,new tu(hr(oD(t.path)),r,"TargetPurposeLimboResolution",ZI.le))}}function du(n,e,t){return w(this,null,function*(){let r=re(n),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,l)=>{s.push(r.fu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=hI.Rs(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(l,u){return w(this,null,function*(){let h=re(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(u,g=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.As,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ma(p))throw p;B(cD,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let y=h.xs.get(g),C=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(C);h.xs=h.xs.insert(g,P)}}})}(r.localStore,o))})}function Uq(n,e){return w(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){B(gD,"User change. New user:",e.toKey());let r=yield ex(t.localStore,e);t.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(l=>{l.reject(new U(M.CANCELLED,s))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield du(t,r.ks)}})}function Bq(n,e){let t=re(n),r=t.Eu.get(e);if(r&&r.cu)return me().add(r.key);{let i=me(),o=t.Pu.get(e);if(!o)return i;for(let s of o){let a=t.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function gx(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fq.bind(null,e),e.lu.Y_=Aq.bind(null,e.eventManager),e.lu.gu=Rq.bind(null,e.eventManager),e}function $q(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vq.bind(null,e),e}var mx=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=rg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return lq(this.persistence,new pI,t.initialUser,this.serializer)}Su(t){return new Np(dI.fi,this.serializer)}bu(t){return new yI}terminate(){return w(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),VI=class extends mx{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){be(this.persistence.referenceDelegate instanceof Pp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Jw(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Np(r=>Pp.fi(r,t),this.serializer)}};var Hq=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uq.bind(null,this.syncEngine),yield Sq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new PI}()}createDatastore(t){let r=rg(t.databaseInfo.databaseId),i=function(s){return new II(s)}(t.databaseInfo);return function(s,a,l,u){return new CI(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new AI(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>zP(this.syncEngine,r,0),function(){return xp.C()?new xp:new vI}())}createSyncEngine(t,r){return function(o,s,a,l,u,h,p){let g=new FI(o,s,a,l,u,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var t,r;yield function(o){return w(this,null,function*(){let s=re(o);B(ts,"RemoteStore shutting down."),s.da.add(5),yield uu(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var $p=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Gr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var $i="FirestoreClient",jI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>w(this,null,function*(){B($i,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B($i,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lw(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B($i,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield ex(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function GP(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield zq(n);B($i,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>BP(e.remoteStore,i)),n._onlineComponents=e})}function zq(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B($i,"Using user provided OfflineComponentProvider");try{yield lw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),yield lw(n,new mx)}}else B($i,"Using default OfflineComponentProvider"),yield lw(n,new VI(void 0));return n._offlineComponents})}function yx(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B($i,"Using user provided OnlineComponentProvider"),yield GP(n,n._uninitializedComponentsProvider._online)):(B($i,"Using default OnlineComponentProvider"),yield GP(n,new Hq))),n._onlineComponents})}function qq(n){return yx(n).then(e=>e.syncEngine)}function UI(n){return w(this,null,function*(){let e=yield yx(n),t=e.eventManager;return t.onListen=Nq.bind(null,e.syncEngine),t.onUnlisten=xq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Pq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kq.bind(null,e.syncEngine),t})}function Gq(n,e,t={}){let r=new ur;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(o,s,a,l,u){let h=new $p({next:g=>{h.xu(),s.enqueueAndForget(()=>lx(o,p)),g.fromCache&&l.source==="server"?u.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new jp(a,h,{includeMetadataChanges:!0,Qa:!0});return cx(o,p)}(yield UI(n),n.asyncQueue,e,t,r)})),r.promise}function vx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WP=new Map;function _x(n,e,t){if(!t)throw new U(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wq(n,e,t,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KP(n){if(!Q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QP(n){if(Q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sg(n);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ex="firestore.googleapis.com",YP=!0,Hp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ex,this.ssl=YP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:YP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sq)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ra=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dw;switch(r.type){case"firstParty":return new gw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=WP.get(t);r&&(B("ComponentProvider","Removing Datastore"),WP.delete(t),r.terminate())}(this),Promise.resolve()}};function wx(n,e,t,r={}){var i;n=On(n,Ra);let o=Ni(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(kf(`https://${l}`),Of("Firestore",!0)),s.host!==Ex&&s.host!==l&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!or(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=lt.MOCK_USER;else{h=SR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(g)}n._authCredentials=new hw(new gp(h,p))}}var Hi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Vi=class n extends Hi{constructor(e,t,r){super(e,t,oD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ix(n,e,...t){if(n=Be(n),_x("collection","path",e),n instanceof Ra){let r=Le.fromString(e,...t);return QP(r),new Vi(n,null,r)}{if(!(n instanceof zt||n instanceof Vi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Le.fromString(e,...t));return QP(r),new Vi(n.firestore,null,r)}}function yD(n,e,...t){if(n=Be(n),arguments.length===1&&(e=yp.newId()),_x("doc","path",e),n instanceof Ra){let r=Le.fromString(e,...t);return KP(r),new zt(n,null,new Q(r))}{if(!(n instanceof zt||n instanceof Vi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Le.fromString(e,...t));return KP(r),new zt(n.firestore,n instanceof Vi?n.converter:null,new Q(r))}}var ZP="AsyncQueue",zp=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new kp(this,"async_queue_retry"),this.rc=()=>{let r=cw();r&&B(ZP,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=cw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=cw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new ur;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return w(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ma(e))throw e;B(ZP,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Gr("INTERNAL UNHANDLED ERROR: ",JP(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=RI.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&Z(47125,{cc:JP(this.Xu)})}verifyOperationInProgress(){}lc(){return w(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function JP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function XP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var mr=class extends Ra{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zp(e),this._firestoreClient=void 0,yield e}})}};function Dx(n,e){let t=typeof n=="object"?n:jo(),r=typeof n=="string"?n:e||wp,i=ra(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=CR("firestore");o&&wx(i,...o)}return i}function ag(n){if(n._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Kq(n),n._firestoreClient}function Kq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,l,u,h){return new Ew(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vx(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new jI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var iu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(St.fromBase64String(e))}catch(t){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ns=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ou=class{constructor(e){this._methodName=e}};var su=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}};var au=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Qq=/^__.*__$/,BI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new es(e,this.data,t,this.fieldTransforms)}},qp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Tx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ic:n})}}var $I=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Wp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Tx(this.Ic)&&Qq.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},HI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rg(e)}bc(e,t,r,i=!1){return new $I({Ic:e,methodName:t,wc:r,path:rn.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cg(n){let e=n._freezeSettings(),t=rg(n._databaseId);return new HI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bx(n,e,t,r,i,o={}){let s=n.bc(o.merge||o.mergeFields?2:0,e,t,i);vD("Data must be an object, but it was:",s,r);let a=Ax(r,s),l,u;if(o.merge)l=new gn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=zI(e,p,t);if(!s.contains(g))throw new U(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Nx(h,g)||h.push(g)}l=new gn(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new BI(new nn(a),l,u)}var Gp=class n extends ou{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Cx(n,e,t,r){let i=n.bc(1,e,t);vD("Data must be an object, but it was:",i,r);let o=[],s=nn.empty();zi(r,(l,u)=>{let h=_D(e,l,t);u=Be(u);let p=i.mc(h);if(u instanceof Gp)o.push(h);else{let g=hu(u,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new gn(o);return new qp(s,a,i.fieldTransforms)}function Sx(n,e,t,r,i,o){let s=n.bc(1,e,t),a=[zI(e,r,t)],l=[i];if(o.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(zI(e,o[g])),l.push(o[g+1]);let u=[],h=nn.empty();for(let g=a.length-1;g>=0;--g)if(!Nx(u,a[g])){let y=a[g],C=l[g];C=Be(C);let P=s.mc(y);if(C instanceof Gp)u.push(y);else{let R=hu(C,P);R!=null&&(u.push(y),h.set(y,R))}}let p=new gn(u);return new qp(h,p,s.fieldTransforms)}function Yq(n,e,t,r=!1){return hu(t,n.bc(r?4:3,e))}function hu(n,e){if(Rx(n=Be(n)))return vD("Unsupported field value:",e,n),Ax(n,e);if(n instanceof ou)return function(r,i){if(!Tx(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=hu(a,i.fc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return O3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=pt.fromDate(r);return{timestampValue:Ap(i.serializer,o)}}if(r instanceof pt){let o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ap(i.serializer,o)}}if(r instanceof su)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof iu)return{bytesValue:GM(i.serializer,r._byteString)};if(r instanceof zt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:aD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof au)return function(s,a){return{mapValue:{fields:{[eD]:{stringValue:tD},[_a]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.gc("VectorValues must only contain numeric values.");return sD(a.serializer,u)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${sg(r)}`)}(n,e)}function Ax(n,e){let t={};return vM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,(r,i)=>{let o=hu(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Rx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof su||n instanceof iu||n instanceof zt||n instanceof ou||n instanceof au)}function vD(n,e,t){if(!Rx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=sg(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function zI(n,e,t){if((e=Be(e))instanceof ns)return e._internalPath;if(typeof e=="string")return _D(n,e);throw Wp("Field path arguments must be of type string or ",n,!1,void 0,t)}var Zq=new RegExp("[~\\*/\\[\\]]");function _D(n,e,t){if(e.search(Zq)>=0)throw Wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ns(...e.split("."))._internalPath}catch{throw Wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new U(M.INVALID_ARGUMENT,a+n+l)}function Nx(n,e){return n.some(t=>t.isEqual(e))}var Kp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qI=class extends Kp{data(){return super.data()}};function lg(n,e){return typeof e=="string"?_D(n,e):e instanceof ns?e._internalPath:e._delegate._internalPath}function Px(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cu=class{},Qp=class extends cu{};function Mx(n,e,...t){let r=[];e instanceof cu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof GI).length,a=o.filter(l=>l instanceof Yp).length;if(s>1||s>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Yp=class n extends Qp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ox(e._query,t),new Hi(e.firestore,e.converter,xw(e._query,t))}_parse(e){let t=cg(e.firestore);return function(o,s,a,l,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tM(p,h);let C=[];for(let P of p)C.push(eM(l,o,P));g={arrayValue:{values:C}}}else g=eM(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tM(p,h),g=Yq(a,s,p,h==="in"||h==="not-in");return et.create(u,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function xx(n,e,t){let r=e,i=lg("where",n);return Yp._create(i,r,t)}var GI=class n extends cu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)Ox(s,l),s=xw(s,l)}(e._query,t),new Hi(e.firestore,e.converter,xw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var WI=class n extends Qp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(o,s)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ui(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function kx(n,e="asc"){let t=e,r=lg("orderBy",n);return WI._create(r,t)}function eM(n,e,t){if(typeof(t=Be(t))=="string"){if(t==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MM(e)&&t.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Le.fromString(t));if(!Q.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _P(n,new Q(r))}if(t instanceof zt)return _P(n,t._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sg(t)}.`)}function tM(n,e){if(!Array.isArray(n)||n.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ox(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var KI=class{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[_a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new au(o)}convertGeoPoint(e){return new su(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=eg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){let t=Wr(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Le.fromString(e);be(JM(r),9688,{name:e});let i=new Ip(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||Gr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Fx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ko=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zp=class extends Kp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ma=class extends Zp{data(e={}){return super.data(e)}},Jp=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ko(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ma(this._firestore,this._userDataWriter,r.key,r,new Ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new ma(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new ma(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Jq(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Jq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:n})}}var lu=class extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}};function Lx(n){n=On(n,Hi);let e=On(n.firestore,mr),t=ag(e),r=new lu(e);return Px(n._query),Gq(t,n._query).then(i=>new Jp(e,r,n,i))}function Vx(n,e,t,...r){n=On(n,zt);let i=On(n.firestore,mr),o=cg(i),s;return s=typeof(e=Be(e))=="string"||e instanceof ns?Sx(o,"updateDoc",n._key,e,t,r):Cx(o,"updateDoc",n._key,e),ug(i,[s.toMutation(n._key,mn.exists(!0))])}function jx(n){return ug(On(n.firestore,mr),[new Sa(n._key,mn.none())])}function Ux(n,e){let t=On(n.firestore,mr),r=yD(n),i=Fx(n.converter,e);return ug(t,[bx(cg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then(()=>r)}function ED(n,...e){var t,r,i;n=Be(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||XP(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(XP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(n instanceof zt)u=On(n.firestore,mr),h=oD(n._key.path),l={next:p=>{e[s]&&e[s](Xq(u,n,p))},error:e[s+1],complete:e[s+2]};else{let p=On(n,Hi);u=On(p.firestore,mr),h=p._query;let g=new lu(u);l={next:y=>{e[s]&&e[s](new Jp(u,g,p,y))},error:e[s+1],complete:e[s+2]},Px(n._query)}return function(g,y,C,P){let R=new $p(P),F=new jp(y,R,C);return g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return cx(yield UI(g),F)})),()=>{R.xu(),g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return lx(yield UI(g),F)}))}}(ag(u),h,a,l)}function ug(n,e){return function(r,i){let o=new ur;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return Oq(yield qq(r),i,o)})),o.promise}(ag(n),e)}function Xq(n,e,t){let r=t.docs.get(e._key),i=new lu(n);return new Zp(n,i,e._key,r,new Ko(t.hasPendingWrites,t.fromCache),e.converter)}var QI=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cg(e)}set(e,t,r){this._verifyNotCommitted();let i=uw(e,this._firestore),o=Fx(i.converter,t,r),s=bx(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,mn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=uw(e,this._firestore),s;return s=typeof(t=Be(t))=="string"||t instanceof ns?Sx(this._dataReader,"WriteBatch.update",o._key,t,r,i):Cx(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,mn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=uw(e,this._firestore);return this._mutations=this._mutations.concat(new Sa(t._key,mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function uw(n,e){if((n=Be(n)).firestore!==e)throw new U(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Bx(n){return ag(n=On(n,mr)),new QI(n,e=>ug(n,e))}(function(e,t=!0){(function(i){Na=i})(Mi),Mn(new Ot("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new mr(new fw(r.getProvider("auth-internal")),new mw(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ip(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$e(lP,uP,e),$e(lP,uP,"esm2017")})();var dg=function(){return dg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dg.apply(this,arguments)};var iG={includeMetadataChanges:!1};function $x(n,e){return e===void 0&&(e=iG),new W(function(t){var r=ED(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Hx(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:dg(dg({},r),(t={},t[e.idField]=n.id,t))}function zx(n){return $x(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function qx(n,e){return e===void 0&&(e={}),zx(n).pipe(J(function(t){return t.map(function(r){return Hx(r,e)})}))}var is=class{constructor(e){return e}},Gx="firestore",wD=class{constructor(){return oa(Gx)}};var ID=new V("angularfire2.firestore-instances");function oG(n,e){let t=Pl(Gx,n,e);return t&&new is(t)}function sG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new is(r)}}var aG={provide:wD,deps:[[new Pt,ID]]},cG={provide:is,useFactory:oG,deps:[[new Pt,ID],Ur]};function Wx(n,...e){return $e("angularfire",xi.full,"fst"),jt([cG,aG,{provide:ID,useFactory:sG(n),multi:!0,deps:[ue,Re,ki,Bo,[new Pt,Hl],[new Pt,sa],...e]}])}var Kx=Ke(qx,!0);var Qx=Ke(Ux,!0,2);var Yx=Ke(Ix,!0,2);var Zx=Ke(jx,!0,2);var hg=Ke(yD,!0,2);var Jx=Ke(Lx,!0);var Xx=Ke(Dx,!0);var ek=Ke(kx,!0,2),DD=Ke(Mx,!0,2);var tk=Ke(Vx,!0,2);var TD=Ke(xx,!0,2),nk=Ke(Bx,!0,2);var fg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=bt({type:n,selectors:[["app-home"]],decls:25,vars:0,consts:[[1,"home-container"],[1,"hero"],[1,"apps-grid"],[1,"app-card"],[1,"app-icon"],["routerLink","/ip-lookup",1,"app-link"],["routerLink","/todo",1,"app-link"]],template:function(t,r){t&1&&(q(0,"div",0)(1,"header",1)(2,"h1"),Y(3,"Manu's App Library"),z(),q(4,"p"),Y(5,"A collection of useful web applications"),z()(),q(6,"div",2)(7,"div",3)(8,"div",4),Y(9,"\u{1F310}"),z(),q(10,"h3"),Y(11,"IP Lookup"),z(),q(12,"p"),Y(13,"Get detailed information about your current IP address and location"),z(),q(14,"a",5),Y(15,"Try it out"),z()(),q(16,"div",3)(17,"div",4),Y(18,"\u2705"),z(),q(19,"h3"),Y(20,"Todo List"),z(),q(21,"p"),Y(22,"Manage your tasks with drag-and-drop reordering and cloud sync"),z(),q(23,"a",6),Y(24,"Get started"),z()()()())},dependencies:[Jn,Vr,ir],styles:[".home-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.hero[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.apps-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.app-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a;text-align:center;transition:transform .2s ease,box-shadow .2s ease}.app-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.app-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.app-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:1rem}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem;line-height:1.6}.app-link[_ngcontent-%COMP%]{display:inline-block;background:#007bff;color:#fff;padding:.75rem 1.5rem;border-radius:6px;text-decoration:none;font-weight:500;transition:background-color .2s ease}.app-link[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};var pg=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)($(tf))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function dG(n,e){if(n&1&&(q(0,"div",6)(1,"h2"),Y(2,"Your Location Information"),z(),q(3,"div",7)(4,"div",8)(5,"span",9),Y(6,"IP Address:"),z(),q(7,"span",10),Y(8),z()(),q(9,"div",8)(10,"span",9),Y(11,"Country:"),z(),q(12,"span",10),Y(13),z()(),q(14,"div",8)(15,"span",9),Y(16,"Region:"),z(),q(17,"span",10),Y(18),z()(),q(19,"div",8)(20,"span",9),Y(21,"City:"),z(),q(22,"span",10),Y(23),z()(),q(24,"div",8)(25,"span",9),Y(26,"ZIP Code:"),z(),q(27,"span",10),Y(28),z()(),q(29,"div",8)(30,"span",9),Y(31,"Latitude:"),z(),q(32,"span",10),Y(33),z()(),q(34,"div",8)(35,"span",9),Y(36,"Longitude:"),z(),q(37,"span",10),Y(38),z()()()()),n&2){let t=it();Ge(8),Zn(t.locationData.ip),Ge(5),Zn(t.locationData.country_name),Ge(5),Zn(t.locationData.region_name),Ge(5),Zn(t.locationData.city),Ge(5),Zn(t.locationData.zip),Ge(5),Zn(t.locationData.latitude),Ge(5),Zn(t.locationData.longitude)}}function hG(n,e){n&1&&(q(0,"div",11)(1,"p"),Y(2,"Loading location data..."),z()())}function fG(n,e){if(n&1){let t=Ii();q(0,"div",12)(1,"p"),Y(2),z(),q(3,"button",13),Ue("click",function(){st(t);let i=it();return at(i.loadLocation())}),Y(4,"Try Again"),z()()}if(n&2){let t=it();Ge(2),So("Error: ",t.error)}}var gg=class n{constructor(e){this.locationService=e}locationData=null;loading=!1;error=null;ngOnInit(){this.loadLocation()}loadLocation(){this.loading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.locationData=e,this.loading=!1},error:e=>{this.error="Failed to load location data. Please try again.",this.loading=!1,console.error("Location error:",e)}})}static \u0275fac=function(t){return new(t||n)(ce(pg))};static \u0275cmp=bt({type:n,selectors:[["app-ip-lookup"]],decls:11,vars:3,consts:[[1,"ip-lookup-container"],[1,"app-header"],["routerLink","/",1,"back-link"],["class","location-card",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"location-card"],[1,"location-grid"],[1,"location-item"],[1,"label"],[1,"value"],[1,"loading"],[1,"error"],[1,"retry-btn",3,"click"]],template:function(t,r){t&1&&(q(0,"div",0)(1,"header",1)(2,"a",2),Y(3,"\u2190 Back to Apps"),z(),q(4,"h1"),Y(5,"IP Lookup"),z(),q(6,"p"),Y(7,"Get detailed information about your current location"),z()(),Ei(8,dG,39,7,"div",3)(9,hG,3,0,"div",4)(10,fG,5,1,"div",5),z()),t&2&&(Ge(8),Yn("ngIf",r.locationData),Ge(),Yn("ngIf",r.loading),Ge(),Yn("ngIf",r.error))},dependencies:[Jn,Yc,Vr,ir],styles:[".ip-lookup-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.app-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#007bff;text-decoration:none;margin-bottom:1rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.app-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.location-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a}.location-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem}.location-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.location-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem;background:#f8f9fa;border-radius:6px}.label[_ngcontent-%COMP%]{font-weight:600;color:#555}.value[_ngcontent-%COMP%]{color:#333}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:2rem}.retry-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-size:1rem;margin-top:1rem}.retry-btn[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};var uk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ce(Mr),ce(Mt))};static \u0275dir=We({type:n})}return n})(),pG=(()=>{class n extends uk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ls(n)))(i||n)}})();static \u0275dir=We({type:n,features:[Qn]})}return n})(),dk=new V("");var gG={provide:dk,useExisting:Ar(()=>Dg),multi:!0};function mG(){let n=hn()?hn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var yG=new V(""),Dg=(()=>{class n extends uk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!mG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ce(Mr),ce(Mt),ce(yG,8))};static \u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Or([gG]),Qn]})}return n})();var hk=new V(""),fk=new V("");function pk(n){return n!=null}function gk(n){return wi(n)?_e(n):n}function mk(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function yk(n,e){return e.map(t=>t(n))}function vG(n){return!n.validate}function vk(n){return n.map(e=>vG(e)?e:t=>e.validate(t))}function _G(n){if(!n)return null;let e=n.filter(pk);return e.length==0?null:function(t){return mk(yk(t,e))}}function AD(n){return n!=null?_G(vk(n)):null}function EG(n){if(!n)return null;let e=n.filter(pk);return e.length==0?null:function(t){let r=yk(t,e).map(gk);return Nm(r).pipe(J(mk))}}function RD(n){return n!=null?EG(vk(n)):null}function rk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wG(n){return n._rawValidators}function IG(n){return n._rawAsyncValidators}function bD(n){return n?Array.isArray(n)?n:[n]:[]}function yg(n,e){return Array.isArray(n)?n.includes(e):n===e}function ik(n,e){let t=bD(e);return bD(n).forEach(i=>{yg(t,i)||t.push(i)}),t}function ok(n,e){return bD(e).filter(t=>!yg(n,t))}var vg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fa=class extends vg{name;get formDirective(){return null}get path(){return null}},vu=class extends vg{_parent=null;name=null;valueAccessor=null},_g=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},DG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$ue=te(k({},DG),{"[class.ng-submitted]":"isSubmitted"}),_k=(()=>{class n extends _g{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(vu,2))};static \u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Cn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qn]})}return n})(),Ek=(()=>{class n extends _g{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(Fa,10))};static \u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Cn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qn]})}return n})();var fu="VALID",mg="INVALID",ka="PENDING",pu="DISABLED",qi=class{},Eg=class extends qi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},mu=class extends qi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},yu=class extends qi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Oa=class extends qi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},CD=class extends qi{source;constructor(e){super(),this.source=e}},SD=class extends qi{source;constructor(e){super(),this.source=e}};function wk(n){return(Tg(n)?n.validators:n)||null}function TG(n){return Array.isArray(n)?AD(n):n||null}function Ik(n,e){return(Tg(e)?e.asyncValidators:n)||null}function bG(n){return Array.isArray(n)?RD(n):n||null}function Tg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function CG(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function SG(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var wg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dn(this.statusReactive)}set status(e){dn(()=>this.statusReactive.set(e))}_status=Us(()=>this.statusReactive());statusReactive=Tt(void 0);get valid(){return this.status===fu}get invalid(){return this.status===mg}get pending(){return this.status==ka}get disabled(){return this.status===pu}get enabled(){return this.status!==pu}errors;get pristine(){return dn(this.pristineReactive)}set pristine(e){dn(()=>this.pristineReactive.set(e))}_pristine=Us(()=>this.pristineReactive());pristineReactive=Tt(!0);get dirty(){return!this.pristine}get touched(){return dn(this.touchedReactive)}set touched(e){dn(()=>this.touchedReactive.set(e))}_touched=Us(()=>this.touchedReactive());touchedReactive=Tt(!1);get untouched(){return!this.touched}_events=new ee;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ik(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ik(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ok(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ok(e,this._rawAsyncValidators))}hasValidator(e){return yg(this._rawValidators,e)}hasAsyncValidator(e){return yg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new yu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new yu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new mu(!0,r))}markAsPending(e={}){this.status=ka;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Oa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pu,this.errors=null,this._forEachChild(i=>{i.disable(te(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,r)),this._events.next(new Oa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fu,this._forEachChild(r=>{r.enable(te(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fu||this.status===ka)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,t)),this._events.next(new Oa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pu:fu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ka,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=gk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Oa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?pu:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ka)?ka:this._anyControlsHaveStatus(mg)?mg:fu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new yu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=TG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bG(this._rawAsyncValidators)}},Ig=class extends wg{constructor(e,t,r){super(wk(t),Ik(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){SG(this,!0,e),Object.keys(e).forEach(r=>{CG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ND=new V("",{providedIn:"root",factory:()=>PD}),PD="always";function AG(n,e){return[...e.path,n]}function Dk(n,e,t=PD){Tk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),NG(n,e),MG(n,e),PG(n,e),RG(n,e)}function sk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Tk(n,e){let t=wG(n);e.validator!==null?n.setValidators(rk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=IG(n);e.asyncValidator!==null?n.setAsyncValidators(rk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();sk(e._rawValidators,i),sk(e._rawAsyncValidators,i)}function NG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&bk(n,e)})}function PG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&bk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function bk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function MG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function xG(n,e){n==null,Tk(n,e)}function kG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function OG(n){return Object.getPrototypeOf(n.constructor)===pG}function FG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function LG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Dg?t=o:OG(o)?r=o:i=o}),i||r||t||null}var VG={provide:Fa,useExisting:Ar(()=>MD)},gu=Promise.resolve(),MD=(()=>{class n extends Fa{callSetDisabledState;get submitted(){return dn(this.submittedReactive)}_submitted=Us(()=>this.submittedReactive());submittedReactive=Tt(!1);_directives=new Set;form;ngSubmit=new Ee;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Ig({},AD(t),RD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Dk(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gu.then(()=>{let r=this._findContainer(t.path),i=new Ig({});xG(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),FG(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new CD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new SD(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ce(hk,10),ce(fk,10),ce(ND,8))};static \u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Or([VG]),Qn]})}return n})();function ak(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ck(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var jG=class extends wg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(wk(t),Ik(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ck(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ak(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ak(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ck(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var UG={provide:vu,useExisting:Ar(()=>xD)},lk=Promise.resolve(),xD=(()=>{class n extends vu{_changeDetectorRef;callSetDisabledState;control=new jG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=LG(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),kG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Dk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){lk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Zt(r);lk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?AG(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ce(Fa,9),ce(hk,10),ce(fk,10),ce(dk,10),ce(Sn,8),ce(ND,8))};static \u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Or([UG]),Qn,bn]})}return n})();var Ck=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var BG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({})}return n})();var Sk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ND,useValue:t.callSetDisabledState??PD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({imports:[BG]})}return n})();var kD;function HG(){if(kD==null){let n=typeof document<"u"?document.head:null;kD=!!(n&&(n.createShadowRoot||n.attachShadow))}return kD}function bg(n){if(HG()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function _u(n){return n.composedPath?n.composedPath()[0]:n.target}function Ak(n){return n.buttons===0||n.detail===0}function Rk(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function Cg(n,e=0){return zG(n)?Number(n):arguments.length===2?e:0}function zG(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function yr(n){return n instanceof Mt?n.nativeElement:n}var Sg=new WeakMap,Nk=(()=>{class n{_appRef;_injector=S(Re);_environmentInjector=S(Me);load(t){let r=this._appRef=this._appRef||this._injector.get(xr),i=Sg.get(r);i||(i={loaders:new Set,refs:[]},Sg.set(r,i),r.onDestroy(()=>{Sg.get(r)?.refs.forEach(o=>o.destroy()),Sg.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(z0(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OD;try{OD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{OD=!1}var FD=(()=>{class n{_platformId=S(Wn);isBrowser=this._platformId?J0(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||OD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qG=new V("cdk-dir-doc",{providedIn:"root",factory:GG});function GG(){return S(Ce)}var WG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function KG(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?WG.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var LD=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Tt("ltr");change=new Ee;constructor(){let t=S(qG,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(KG(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QG=20,Pk=(()=>{class n{_ngZone=S(ue);_platform=S(FD);_renderer=S(Yt).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ee;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=QG){return this._platform.isBrowser?new W(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(Md(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):G()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(rt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=yr(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YG=20,Mk=(()=>{class n{_platform=S(FD);_listeners;_viewportSize;_change=new ee;_document=S(Ce,{optional:!0});constructor(){let t=S(ue),r=S(Yt).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=YG){return t>0?this._change.pipe(Md(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({})}return n})();var VD={},kk=(()=>{class n{_appId=S(Vs);getId(t){return this._appId!=="ng"&&(t+=this._appId),VD.hasOwnProperty(t)||(VD[t]=0),`${t}${VD[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ok(n){return Array.isArray(n)?n:[n]}function Zk(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?Vk(n,e):(r==="input"||r==="select"||r==="textarea")&&Lk(n,e),Fk("canvas",n,e,Vk),Fk("input, textarea, select",n,e,Lk),e}function Fk(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var ZG=0;function Lk(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${ZG++}`)}function Vk(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function GD(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function BD(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function JG(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function Iu(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function jk(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:l,height:u}=n,h=l*e,p=u*e;return r>i-p&&r<s+p&&t>a-h&&t<o+h}var Ag=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:GD(t)})})}handleScroll(e){let t=_u(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,l=i.left-s;return this.positions.forEach((u,h)=>{u.clientRect&&t!==h&&t.contains(h)&&Iu(u.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Jk(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function WD(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function La(n,e){let t=e?"":"none";WD(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Uk(n,e,t){WD(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Rg(n,e){return e&&e!="none"?n+" "+e:n}function Bk(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Du(e.left,e.top)}function Du(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function $k(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function XG(n){let e=getComputedStyle(n),t=jD(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=jD(e,"transition-duration"),s=jD(e,"transition-delay");return $k(o[i])+$k(s[i])}function jD(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var e6=new Set(["position"]),$D=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,l,u,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=u,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),Hk(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return XG(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=Jk(s,this._document),this._previewEmbeddedView=s,e.matchSize?Bk(i,o):i.style.transform=Du(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=Zk(this._rootElement),Bk(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return WD(i.style,{"pointer-events":"none",margin:Hk(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},e6),La(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function Hk(n){return"showPopover"in n}var t6={passive:!0},zk={passive:!1},n6={passive:!1,capture:!0},r6=800,qk=new Set(["position"]),HD=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Tt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ee;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=De.EMPTY;_pointerUpSubscription=De.EMPTY;_scrollSubscription=De.EMPTY;_resizeSubscription=De.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>La(t,e)))}_disabled=!1;beforeStarted=new ee;started=new ee;released=new ee;ended=new ee;entered=new ee;exited=new ee;dropped=new ee;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Ag(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>yr(r)),this._handles.forEach(r=>La(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=yr(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,zk),r.listen(t,"touchstart",this._pointerDown,t6),r.listen(t,"dragstart",this._nativeDragStart,zk)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?yr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&JG(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,l=s+i;this._rootElement.style.transform=Du(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),La(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),La(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Eu(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",i6,n6)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new $D(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),Uk(i,!1,qk),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Eu(t),o=!i&&t.button!==0,s=this._rootElement,a=_u(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+r6>Date.now(),u=i?Rk(t):Ak(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||l||u)return;if(this._handles.length){let g=s.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=GD(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Uk(this._rootElement,!0,qk),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&_u(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=Jk(this._placeholderRef,this._document)):r=Zk(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=Eu(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,u=s.pageY-o.top-a.top;return{x:o.left-e.left+l,y:o.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Eu(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),h=a.top+s,p=a.bottom-(u-s),g=a.left+o,y=a.right-(l-o);r=Gk(r,g,y),i=Gk(i,h,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,La(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Du(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Rg(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Du(e,t);this._preview.setTransform(Rg(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Eu(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=_u(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Iu(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=bg(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return yr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function Gk(n,e,t){return Math.max(e,Math.min(t,n))}function Eu(n){return n.type[0]==="t"}function i6(n){n.preventDefault()}function Pg(n,e,t){let r=Wk(e,n.length-1),i=Wk(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function Wk(n,e){return Math.max(0,Math.min(e,n))}var Ng=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(R=>R.drag===e),u=o[s],h=o[l].clientRect,p=u.clientRect,g=l>s?1:-1,y=this._getItemOffsetPx(h,p,g),C=this._getSiblingOffsetPx(l,o,g),P=o.slice();return Pg(o,l,s),o.forEach((R,F)=>{if(P[F]===R)return;let K=R.drag===e,H=K?y:C,ye=K?e.getPlaceholderElement():R.drag.getRootElement();R.offset+=H;let Qe=Math.round(R.offset*(1/R.drag.scale));a?(ye.style.transform=Rg(`translate3d(${Qe}px, 0, 0)`,R.initialTransform),Iu(R.clientRect,0,H)):(ye.style.transform=Rg(`translate3d(0, ${Qe}px, 0)`,R.initialTransform),Iu(R.clientRect,H,0))}),this._previousSwap.overlaps=BD(p,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement(),u=s[o];if(u===e&&(u=s[o+1]),!u&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let h=u.getRootElement();h.parentElement.insertBefore(l,h),s.splice(o,0,e)}else this._element.appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Iu(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:GD(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let l=i?"left":"top",u=i?"right":"bottom";r===-1?a-=s.clientRect[l]-o[u]:a+=o[l]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){let u=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},zD=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let l=this.getItemIndex(e),u=e.getPlaceholderElement(),h=a.getRootElement();o>l?h.after(u):h.before(u),Pg(this._activeItems,l,o);let p=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=h===p||h.contains(p),{previousIndex:l,currentIndex:o}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let s=this._activeItems[o],a=this._activeItems.indexOf(e);a>-1&&this._activeItems.splice(a,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,e),s.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=bg(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:l,y:u}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-l,r-u);h<i&&(i=h,o=s)}}return o}},Kk=.05,Xk=.05,yn=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(yn||{}),Ft=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Ft||{}),qD=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ee;entered=new ee;exited=new ee;dropped=new ee;sorted=new ee;receivingStarted=new ee;receivingStopped=new ee;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=De.EMPTY;_verticalScrollDirection=yn.NONE;_horizontalScrollDirection=Ft.NONE;_scrollNode;_stopScrollTimers=new ee;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=yr(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new Ag(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Ng&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new zD(this._document,this._dragDropRegistry);else{let t=new Ng(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=yr(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!jk(this._domRect,Kk,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=yn.NONE,o=Ft.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||jk(s.clientRect,Kk,e,t)&&([i,o]=o6(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=eO(l,t),o=tO(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Pm(0,fd).pipe(Un(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===yn.UP?e.scrollBy(0,-t):this._verticalScrollDirection===yn.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Ft.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Ft.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&BD(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!BD(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=bg(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function eO(n,e){let{top:t,bottom:r,height:i}=n,o=i*Xk;return e>=t-o&&e<=t+o?yn.UP:e>=r-o&&e<=r+o?yn.DOWN:yn.NONE}function tO(n,e){let{left:t,right:r,width:i}=n,o=i*Xk;return e>=t-o&&e<=t+o?Ft.LEFT:e>=r-o&&e<=r+o?Ft.RIGHT:Ft.NONE}function o6(n,e,t,r,i){let o=eO(e,i),s=tO(e,r),a=yn.NONE,l=Ft.NONE;if(o){let u=n.scrollTop;o===yn.UP?u>0&&(a=yn.UP):n.scrollHeight-u>n.clientHeight&&(a=yn.DOWN)}if(s){let u=n.scrollLeft;t==="rtl"?s===Ft.RIGHT?u<0&&(l=Ft.RIGHT):n.scrollWidth+u>n.clientWidth&&(l=Ft.LEFT):s===Ft.LEFT?u>0&&(l=Ft.LEFT):n.scrollWidth-u>n.clientWidth&&(l=Ft.RIGHT)}return[a,l]}var wu={capture:!0},UD={passive:!1,capture:!0},s6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=bt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),nO=(()=>{class n{_ngZone=S(ue);_document=S(Ce);_styleLoader=S(Nk);_renderer=S(Yt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ee;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Tt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new ee;pointerUp=new ee;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,UD)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(s6),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),wu],["selectstart",this._preventDefaultWhileDragging,UD]];i?s.push(["touchend",o,wu],["touchcancel",o,wu]):s.push(["mouseup",o,wu]),i||s.push(["mousemove",a=>this.pointerMove.next(a),UD]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,u])=>this._renderer.listen(this._document,a,l,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new W(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},wu);return()=>{o()}}))),uc(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a6={dragStartThreshold:5,pointerDirectionChangeThreshold:5},KD=(()=>{class n{_document=S(Ce);_ngZone=S(ue);_viewportRuler=S(Mk);_dragDropRegistry=S(nO);_renderer=S(Yt).createRenderer(null,null);constructor(){}createDrag(t,r=a6){return new HD(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new qD(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qk=new V("CDK_DRAG_PARENT");var c6=new V("CdkDragHandle");var rO=new V("CDK_DRAG_CONFIG"),iO=new V("CdkDropList"),oO=(()=>{class n{element=S(Mt);dropContainer=S(iO,{optional:!0,skipSelf:!0});_ngZone=S(ue);_viewContainerRef=S(Kn);_dir=S(LD,{optional:!0});_changeDetectorRef=S(Sn);_selfHandle=S(c6,{optional:!0,self:!0});_parentDrag=S(Qk,{optional:!0,skipSelf:!0});_dragDropRegistry=S(nO);_destroyed=new ee;_handles=new nt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ee;released=new Ee;ended=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;moved=new W(t=>{let r=this._dragRef.moved.pipe(J(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=S(Re);constructor(){let t=this.dropContainer,r=S(rO,{optional:!0}),i=S(KD);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this),t._dropListRef.beforeStarted.pipe(Un(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){bo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):yr(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:Cg(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Nt(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:u,previewContainer:h}=t;this.disabled=l??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(Ye(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),je(t=>uc(...t.map(r=>r._stateChanges.pipe(li(r))))),Un(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Cn("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Zt],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Zv]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Or([{provide:Qk,useExisting:n}]),bn]})}return n})(),Yk=new V("CdkDropListGroup");var sO=(()=>{class n{element=S(Mt);_changeDetectorRef=S(Sn);_scrollDispatcher=S(Pk);_dir=S(LD,{optional:!0});_group=S(Yk,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ee;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=S(kk).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new Ee;entered=new Ee;exited=new Ee;sorted=new Ee;_unsortedItems=new Set;constructor(){let t=S(KD),r=S(rO,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,s)=>this.sortPredicate(i,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(li(this._dir.value),Un(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=Ok(this.connectedTo).map(i=>{if(typeof i=="string"){let o=n._dropLists.find(s=>s.id===i);return o}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Cg(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),uc(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(Co("id",i.id),Cn("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Zt],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Zt],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Zt],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Or([{provide:Yk,useValue:void 0},{provide:iO,useExisting:n}])]})}return n})();var aO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xt({type:n});static \u0275inj=wt({providers:[KD],imports:[xk]})}return n})();var vr=class n{constructor(e){this.auth=e;this.user$=rP(this.auth)}user$;signInWithGoogle(){let e=new GE;return oP(this.auth,e)}signOut(){return sP(this.auth)}static \u0275fac=function(t){return new(t||n)($(qo))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var xg=class n{constructor(e,t){this.firestore=e;this.authService=t;this.todosCollection=Yx(this.firestore,"todos")}todosCollection;getTodos(){return this.authService.user$.pipe(je(e=>{if(e){let t=DD(this.todosCollection,TD("userId","==",e.uid),ek("position"));return Kx(t,{idField:"id"})}else return G([])}))}addTodo(e){return this.authService.user$.pipe(Nt(1),je(t=>t?_e(Jx(DD(this.todosCollection,TD("userId","==",t.uid)))).pipe(je(r=>{let i=r.size,o={title:e,completed:!1,userId:t.uid,position:i};return _e(Qx(this.todosCollection,o))})):G(Promise.reject("User not logged in"))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=hg(this.firestore,`todos/${e.id}`),o=e,{id:r}=o,i=lm(o,["id"]);return tk(t,i)}deleteTodo(e){let t=hg(this.firestore,`todos/${e}`);return Zx(t)}updateTodoPosition(e){let t=nk(this.firestore);return e.forEach((r,i)=>{if(r.id){let o=hg(this.firestore,`todos/${r.id}`);t.update(o,{position:i})}}),t.commit()}static \u0275fac=function(t){return new(t||n)($(is),$(vr))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function d6(n,e){if(n&1){let t=Ii();q(0,"div",18),Ue("dblclick",function(){st(t);let i=it().$implicit,o=it();return at(o.editTodo(i))}),Y(1),z()}if(n&2){let t=it().$implicit;Ge(),So(" ",t.title," ")}}function h6(n,e){if(n&1){let t=Ii();q(0,"div",11)(1,"div",12)(2,"input",13),Ue("change",function(){let i=st(t).$implicit,o=it();return at(o.toggleCompletion(i))}),z(),Ei(3,d6,2,1,"div",14),q(4,"div",15)(5,"button",16),Ue("click",function(){let i=st(t).$implicit,o=it();return at(o.editTodo(i))}),Y(6,"Edit"),z(),q(7,"button",17),Ue("click",function(){let i=st(t).$implicit,o=it();return at(o.deleteTodo(i.id))}),Y(8,"Delete"),z()()()()}if(n&2){let t=e.$implicit,r=it(),i=jv(18);Cn("completed",t.completed),Ge(2),Yn("checked",t.completed),Ge(),Yn("ngIf",(r.editingTodo==null?null:r.editingTodo.id)!==t.id)("ngIfElse",i)}}function f6(n,e){if(n&1){let t=Ii();q(0,"div",19)(1,"input",20),qc("ngModelChange",function(i){st(t);let o=it();return kh(o.editingTodo.title,i)||(o.editingTodo.title=i),at(i)}),Ue("keyup.enter",function(){st(t);let i=it();return at(i.saveTodo())})("keyup.escape",function(){st(t);let i=it();return at(i.cancelEdit())}),z(),q(2,"button",21),Ue("click",function(){st(t);let i=it();return at(i.saveTodo())}),Y(3,"Save"),z(),q(4,"button",22),Ue("click",function(){st(t);let i=it();return at(i.cancelEdit())}),Y(5,"Cancel"),z()()}if(n&2){let t=it();Ge(),zc("ngModel",t.editingTodo.title)}}var kg=class n{constructor(e,t){this.todoService=e;this.authService=t;this.todos$=this.todoService.getTodos(),this.todos$.subscribe(r=>this.todos=r)}todos$;todos=[];newTodoTitle="";editingTodo=null;originalTitle="";ngOnInit(){}drop(e){Pg(this.todos,e.previousIndex,e.currentIndex),this.todoService.updateTodoPosition(this.todos)}addTodo(){this.newTodoTitle.trim()&&this.todoService.addTodo(this.newTodoTitle.trim()).subscribe({next:()=>{this.newTodoTitle=""},error:e=>{console.error("Error adding todo:",e)}})}toggleCompletion(e){this.todoService.updateTodo(te(k({},e),{completed:!e.completed}))}editTodo(e){this.editingTodo=k({},e),this.originalTitle=e.title}saveTodo(){this.editingTodo&&this.editingTodo.title.trim()&&(this.todoService.updateTodo(this.editingTodo),this.editingTodo=null)}cancelEdit(){this.editingTodo=null}deleteTodo(e){e&&this.todoService.deleteTodo(e)}logout(){this.authService.signOut()}static \u0275fac=function(t){return new(t||n)(ce(xg),ce(vr))};static \u0275cmp=bt({type:n,selectors:[["app-todo"]],decls:19,vars:2,consts:[["editTpl",""],[1,"todo-container"],[1,"app-header"],["routerLink","/",1,"back-link"],[1,"logout-btn",3,"click"],[1,"add-todo-form",3,"ngSubmit"],["type","text","name","newTodoTitle","placeholder","Add a new todo...",1,"todo-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn","add-btn"],[1,"todo-list"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","class","todo-item",3,"completed",4,"ngFor","ngForOf"],["cdkDrag","",1,"todo-item"],[1,"todo-item-details"],["type","checkbox",3,"change","checked"],["class","todo-title",3,"dblclick",4,"ngIf","ngIfElse"],[1,"actions"],[1,"btn","edit-btn",3,"click"],[1,"btn","delete-btn",3,"click"],[1,"todo-title",3,"dblclick"],[1,"edit-mode"],["type","text","name","editTitle","autofocus","",1,"edit-input",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],[1,"btn","save-btn",3,"click"],[1,"btn","cancel-btn",3,"click"]],template:function(t,r){if(t&1){let i=Ii();q(0,"div",1)(1,"header",2)(2,"a",3),Y(3,"\u2190 Back to Apps"),z(),q(4,"h2"),Y(5,"Todo List"),z(),q(6,"p"),Y(7,"Manage your tasks with drag-and-drop reordering"),z(),q(8,"button",4),Ue("click",function(){return st(i),at(r.logout())}),Y(9,"Sign Out"),z()(),q(10,"form",5),Ue("ngSubmit",function(){return st(i),at(r.addTodo())}),q(11,"input",6),qc("ngModelChange",function(s){return st(i),kh(r.newTodoTitle,s)||(r.newTodoTitle=s),at(s)}),z(),q(12,"button",7),Y(13,"Add"),z()(),q(14,"div",8)(15,"div",9),Ue("cdkDropListDropped",function(s){return st(i),at(r.drop(s))}),Ei(16,h6,9,5,"div",10),z()(),Ei(17,f6,6,1,"ng-template",null,0,Uv),z()}t&2&&(Ge(11),zc("ngModel",r.newTodoTitle),Ge(5),Yn("ngForOf",r.todos))},dependencies:[Jn,qh,Yc,Sk,Ck,Dg,_k,Ek,xD,MD,Vr,ir,aO,sO,oO],styles:[".todo-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff}.app-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#007bff;text-decoration:none;margin-bottom:1rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.app-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.app-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.9rem;margin-top:1rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#c82333}.add-todo-form[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.todo-input[_ngcontent-%COMP%]{flex-grow:1;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border:none;border-radius:4px;cursor:pointer;margin-left:.5rem;color:#fff}.add-btn[_ngcontent-%COMP%]{background-color:#28a745}.edit-btn[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545}.save-btn[_ngcontent-%COMP%]{background-color:#007bff}.cancel-btn[_ngcontent-%COMP%]{background-color:#6c757d}.todo-list[_ngcontent-%COMP%]{padding:0}.todo-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem;border-bottom:1px solid #eee;background-color:#fff}.todo-item.completed[_ngcontent-%COMP%]   .todo-title[_ngcontent-%COMP%]{text-decoration:line-through;color:#888}.todo-item-details[_ngcontent-%COMP%], .edit-mode[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}input[type=checkbox][_ngcontent-%COMP%]{margin-right:1rem}.todo-title[_ngcontent-%COMP%]{flex-grow:1;cursor:pointer}.edit-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;font-size:1rem;border:1px solid #ddd;border-radius:4px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .todo-item.cdk-drop-list-dragging[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var Og=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/todo"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(ce(vr),ce(Ht))};static \u0275cmp=bt({type:n,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"login-container"],["routerLink","/",1,"back-link"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(q(0,"div",0)(1,"a",1),Y(2,"\u2190 Back to Apps"),z(),q(3,"h2"),Y(4,"Sign in to Todo List"),z(),q(5,"p"),Y(6,"Please sign in to access your personal todo list"),z(),q(7,"button",2),Ue("click",function(){return r.login()}),kr(8,"img",3),Y(9," Sign in with Google "),z()())},dependencies:[Jn,Vr,ir],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#007bff;text-decoration:none;margin-bottom:2rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};var Fg=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Nt(1),J(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)($(vr),$(Ht))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var cO=[{path:"",component:fg},{path:"ip-lookup",component:gg},{path:"login",component:Og},{path:"todo",component:kg,canActivate:[Fg]},{path:"**",redirectTo:""}];var lO={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var uO={providers:[Hv({eventCoalescing:!0}),$_(cO),p_(),eN(()=>tN(lO.firebaseConfig)),Wx(()=>Xx()),nP(()=>iP())]};var Lg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=bt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&kr(0,"router-outlet")},dependencies:[El],encapsulation:2})};d_(Lg,uO).catch(n=>console.error(n));
