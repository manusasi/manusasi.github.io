import{$,$a as q,$b as jv,A as _t,Aa as fd,Ab as Cv,B as js,Ba as hv,Bb as xv,C as nv,Ca as P,Cb as Rv,D as Ma,Da as $s,Db as Yt,E as rv,Ea as fv,Eb as Hs,F as iv,Fa as fi,Fb as kv,G as Kt,Ga as K,Gb as Dv,H as vn,Ha as pv,Hb as vd,I as Tr,Ia as mv,Ib as Pv,J as id,Ja as gv,Jb as _d,K as We,Ka as vv,Kb as pi,L as Oa,La as Fa,Lb as Nv,M as Bn,Ma as Ue,Mb as xr,N as sd,Na as Ar,Nb as Mv,O as sv,Oa as ot,Ob as Hn,P as od,Pa as zn,Pb as Ov,Q as ad,Qa as de,Qb as Vv,R as De,Ra as _v,Rb as Lv,S as cd,Sa as at,Sb as Gs,T as Ze,Ta as ct,Tb as Fv,U as Se,Ua as yv,Ub as mi,V as Bs,Va as wv,Vb as Uv,W as re,Wa as Ua,Wb as za,X as br,Xa as pd,Xb as lt,Y as ov,Ya as md,Yb as Gn,Z as _e,Za as Ev,Zb as gi,_ as se,_a as ja,_b as He,a as L,aa as $n,ab as m,ac as Bv,b as pe,ba as av,bb as y,bc as $v,c as Da,ca as _n,cb as F,cc as qv,d as jn,da as yt,db as Ba,dc as zv,e as E,ea as Y,eb as $a,ec as Ha,f as Yg,fa as J,fb as Ce,fc as Hv,g as Zu,ga as H,gb as z,h as Et,ha as Z,hb as G,hc as Gv,i as ed,ia as It,ib as Iv,j as td,ja as Tt,jb as Tv,k as Ft,ka as ld,kb as bv,l as st,la as ud,lb as Sv,m as Jg,ma as Va,mb as Av,n as Xg,na as qn,nb as qs,o as gn,oa as cv,ob as R,p as Pa,pa as La,pb as be,q as nd,qa as Pt,qb as ze,r as rd,ra as Qt,rb as qa,s as Ee,sa as di,sb as yn,t as W,ta as lv,tb as wn,u as Us,ua as hi,ub as En,v as Zg,va as uv,vb as zs,w as ev,wa as dd,wb as gd,x as tv,xa as dv,xb as Re,y as le,ya as Sr,yb as Ke,z as Na,za as hd,zb as Cr}from"./chunk-PJVBBSW2.js";var Ka=new _e(""),Id=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(se(Ka),se(ct))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Ws=class{_doc;constructor(e){this._doc=e}manager},Ga="ng-app-id";function Wv(n){for(let e of n)e.remove()}function Kv(n,e){let t=e.createElement("style");return t.textContent=n,t}function MT(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ga}="${e}"],link[${Ga}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ga),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function wd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Td=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=qv(s),MT(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Kv);r?.forEach(i=>this.addUsage(i,this.external,wd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Wv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Wv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Kv(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,wd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ga,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(se(Tt),se(dd),se(hd,8),se(Sr))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),yd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bd=/%COMP%/g;var Yv="%COMP%",OT=`_nghost-${Yv}`,VT=`_ngcontent-${Yv}`,LT=!0,FT=new _e("",{providedIn:"root",factory:()=>LT});function UT(n){return VT.replace(bd,n)}function jT(n){return OT.replace(bd,n)}function Jv(n,e){return e.map(t=>t.replace(bd,n))}var Sd=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,c,l,d=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Ks(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Wa?i.applyToHost(t):i instanceof Qs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case fd.Emulated:s=new Wa(l,d,r,this.appId,f,o,c,g,v);break;case fd.ShadowDom:return new Ed(l,d,t,r,o,c,this.nonce,g,v);default:s=new Qs(l,d,r,f,o,c,g,v);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(se(Id),se(Td),se(dd),se(FT),se(Tt),se(Sr),se(ct),se(hd),se(_v,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Ks=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(yd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Qv(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Qv(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=yd[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=yd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&($s.DashCase|$s.Important)?e.style.setProperty(t,r,i&$s.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&$s.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hn().getGlobalEventTarget(this.doc,e),!e))throw new Se(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Qv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ed=class extends Ks{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,l,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=Jv(i.id,f);for(let v of f){let x=document.createElement("style");c&&x.setAttribute("nonce",c),x.textContent=v,this.shadowRoot.appendChild(x)}let g=i.getExternalStyles?.();if(g)for(let v of g){let x=wd(v,s);c&&x.setAttribute("nonce",c),this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qs=class extends Ks{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=d?Jv(d,f):f,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wa=class extends Qs{contentAttr;hostAttr;constructor(e,t,r,i,s,o,c,l,d){let f=i+"-"+r.id;super(e,t,r,s,o,c,l,d,f),this.contentAttr=UT(f),this.hostAttr=jT(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Qa=class n extends Vv{supportsDOMEvents=!0;static makeCurrent(){Ov(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BT();return t==null?null:$T(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jv(document.cookie,e)}},Ys=null;function BT(){return Ys=Ys||document.head.querySelector("base"),Ys?Ys.getAttribute("href"):null}function $T(n){return new URL(n,document.baseURI).pathname}var qT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Zv=(()=>{class n extends Ws{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(se(Tt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Xv=["alt","control","meta","shift"],zT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},e0=(()=>{class n extends Ws{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hn().onAndCancel(t,o.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Xv.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=zT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Xv.forEach(o=>{if(o!==i){let c=HT[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(se(Tt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function Ad(n,e){return Nv(L({rootComponent:n},GT(e)))}function GT(n){return{appProviders:[...JT,...n?.providers??[]],platformProviders:YT}}function WT(){Qa.makeCurrent()}function KT(){return new ud}function QT(){return uv(document),document}var YT=[{provide:Sr,useValue:$v},{provide:dv,useValue:WT,multi:!0},{provide:Tt,useFactory:QT}];var JT=[{provide:av,useValue:"root"},{provide:ud,useFactory:KT},{provide:Ka,useClass:Zv,multi:!0,deps:[Tt]},{provide:Ka,useClass:e0,multi:!0,deps:[Tt]},Sd,Td,Id,{provide:fv,useExisting:Sd},{provide:Bv,useClass:qT},[]];var t0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(se(Tt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ce="primary",lo=Symbol("RouteTitle"),Dd=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Dr(n){return new Dd(n)}function l0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ZT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jt(n[t],e[t]))return!1;return!0}function Jt(n,e){let t=n?Pd(n):void 0,r=e?Pd(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!u0(n[i],e[i]))return!1;return!0}function Pd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function u0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function d0(n){return n.length>0?n[n.length-1]:null}function In(n){return Zg(n)?n:Ua(n)?Ee(Promise.resolve(n)):W(n)}var eb={exact:f0,subset:p0},h0={exact:tb,subset:nb,ignored:()=>!0};function n0(n,e,t){return eb[t.paths](n.root,e.root,t.matrixParams)&&h0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tb(n,e){return Jt(n,e)}function f0(n,e,t){if(!Rr(n.segments,e.segments)||!Xa(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!f0(n.children[r],e.children[r],t))return!1;return!0}function nb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>u0(n[t],e[t]))}function p0(n,e,t){return m0(n,e,e.segments,t)}function m0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rr(i,t)||e.hasChildren()||!Xa(i,t,r))}else if(n.segments.length===t.length){if(!Rr(n.segments,t)||!Xa(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!p0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Rr(n.segments,i)||!Xa(n.segments,i,r)||!n.children[ce]?!1:m0(n.children[ce],e,s,r)}}function Xa(n,e,t){return e.every((r,i)=>h0[t](n[i].parameters,r.parameters))}var Zt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Dr(this.queryParams),this._queryParamMap}toString(){return sb.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Za(this)}},Wn=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Dr(this.parameters),this._parameterMap}toString(){return v0(this)}};function rb(n,e){return Rr(n,e)&&n.every((t,r)=>Jt(t.parameters,e[r].parameters))}function Rr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ib(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Pr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new Kn,providedIn:"root"})}return n})(),Kn=class{parse(e){let t=new Md(e);return new Zt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Js(e.root,!0)}`,r=cb(e.queryParams),i=typeof e.fragment=="string"?`#${ob(e.fragment)}`:"";return`${t}${r}${i}`}},sb=new Kn;function Za(n){return n.segments.map(e=>v0(e)).join("/")}function Js(n,e){if(!n.hasChildren())return Za(n);if(e){let t=n.children[ce]?Js(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Js(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ib(n,(r,i)=>i===ce?[Js(n.children[ce],!1)]:[`${i}:${Js(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Za(n)}/${t[0]}`:`${Za(n)}/(${t.join("//")})`}}function g0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ya(n){return g0(n).replace(/%3B/gi,";")}function ob(n){return encodeURI(n)}function Nd(n){return g0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ec(n){return decodeURIComponent(n)}function r0(n){return ec(n.replace(/\+/g,"%20"))}function v0(n){return`${Nd(n.path)}${ab(n.parameters)}`}function ab(n){return Object.entries(n).map(([e,t])=>`;${Nd(e)}=${Nd(t)}`).join("")}function cb(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ya(t)}=${Ya(i)}`).join("&"):`${Ya(t)}=${Ya(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lb=/^[^\/()?;#]+/;function Cd(n){let e=n.match(lb);return e?e[0]:""}var ub=/^[^\/()?;=#]+/;function db(n){let e=n.match(ub);return e?e[0]:""}var hb=/^[^=?&#]+/;function fb(n){let e=n.match(hb);return e?e[0]:""}var pb=/^[^&#]+/;function mb(n){let e=n.match(pb);return e?e[0]:""}var Md=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new ve(e,t)),r}parseSegment(){let e=Cd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new Wn(ec(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=db(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Cd(this.remaining);i&&(r=i,this.capture(r))}e[ec(t)]=ec(r)}parseQueryParam(e){let t=fb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=mb(this.remaining);o&&(r=o,this.capture(r))}let i=r0(t),s=r0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Se(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ce]:new ve([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}};function _0(n){return n.segments.length>0?new ve([],{[ce]:n}):n}function y0(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=y0(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ve(n.segments,e);return gb(t)}function gb(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new ve(n.segments.concat(e.segments),e.children)}return n}function Qn(n){return n instanceof Zt}function w0(n,e,t=null,r=null){let i=E0(n);return I0(i,e,t,r)}function E0(n){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new ve(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=_0(r);return e??i}function I0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xd(i,i,i,t,r);let s=vb(e);if(s.toRoot())return xd(i,i,new ve([],{}),t,r);let o=_b(s,i,n),c=o.processChildren?Zs(o.segmentGroup,o.index,s.commands):b0(o.segmentGroup,o.index,s.commands);return xd(i,o.segmentGroup,c,t,r)}function tc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function to(n){return typeof n=="object"&&n!=null&&n.outlets}function xd(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=T0(n,e,t);let c=_0(y0(o));return new Zt(c,s,i)}function T0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=T0(s,e,t)}),new ve(n.segments,r)}var nc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tc(r[0]))throw new Se(4003,!1);let i=r.find(to);if(i&&i!==d0(r))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vb(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new nc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new nc(t,e,r)}var yi=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _b(n,e,t){if(n.isAbsolute)return new yi(e,!0,0);if(!t)return new yi(e,!1,NaN);if(t.parent===null)return new yi(t,!0,0);let r=tc(n.commands[0])?0:1,i=t.segments.length-1+r;return yb(t,i,n.numberOfDoubleDots)}function yb(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Se(4005,!1);i=r.segments.length}return new yi(r,!1,i-s)}function wb(n){return to(n[0])?n[0].outlets:{[ce]:n}}function b0(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return Zs(n,e,t);let r=Eb(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ve(n.segments.slice(0,r.pathIndex),{});return s.children[ce]=new ve(n.segments.slice(r.pathIndex),n.children),Zs(s,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?Od(n,e,t):r.match?Zs(n,0,i):Od(n,e,t)}function Zs(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=wb(t),i={};if(Object.keys(r).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=Zs(n.children[ce],e,t);return new ve(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=b0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ve(n.segments,i)}}function Eb(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(to(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!s0(l,d,o))return s;r+=2}else{if(!s0(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Od(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(to(s)){let l=Ib(s.outlets);return new ve(r,l)}if(i===0&&tc(t[0])){let l=n.segments[e];r.push(new Wn(l.path,i0(t[0]))),i++;continue}let o=to(s)?s.outlets[ce]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&tc(c)?(r.push(new Wn(o,i0(c))),i+=2):(r.push(new Wn(o,{})),i++)}return new ve(r,{})}function Ib(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Od(new ve([],{}),0,r))}),e}function i0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function s0(n,e,t){return n==t.path&&Jt(e,t.parameters)}var wi="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),St=class{id;url;constructor(e,t){this.id=e,this.url=t}},Yn=class extends St{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},At=class extends St{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(mt||{}),Ii=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ii||{}),Xt=class extends St{reason;code;type=Ge.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},en=class extends St{reason;code;type=Ge.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ti=class extends St{error;target;type=Ge.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},no=class extends St{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rc=class extends St{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ic=class extends St{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sc=class extends St{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oc=class extends St{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ac=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cc=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lc=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uc=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dc=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hc=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bi=class{routerEvent;position;anchor;type=Ge.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ro=class{},Si=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Tb(n){return!(n instanceof ro)&&!(n instanceof Si)}function bb(n,e){return n.providers&&!n._injector&&(n._injector=Fa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ut(n){return n.outlet||ce}function Sb(n,e){let t=n.filter(r=>Ut(r)===e);return t.push(...n.filter(r=>Ut(r)!==e)),t}function uo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var fc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return uo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Nr(this.rootInjector)}},Nr=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fc(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(se(_n))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Vd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ld(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ld(e,this._root).map(t=>t.value)}};function Vd(n,e){if(n===e.value)return e;for(let t of e.children){let r=Vd(n,t);if(r)return r}return null}function Ld(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ld(n,t);if(r.length)return r.unshift(e),r}return[]}var bt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function _i(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var io=class extends pc{snapshot;constructor(e,t){super(e),this.snapshot=t,Hd(this,e)}toString(){return this.snapshot.toString()}};function S0(n){let e=Ab(n),t=new st([new Wn("",{})]),r=new st({}),i=new st({}),s=new st({}),o=new st(""),c=new Nt(t,r,s,o,i,ce,n,e.root);return c.snapshot=e.root,new io(new bt(c,[]),e)}function Ab(n){let e={},t={},r={},i="",s=new kr([],e,r,i,t,ce,n,null,{});return new so("",new bt(s,[]))}var Nt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(le(d=>d[lo]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Dr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Dr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&C0(i)&&(r.resolve[lo]=i.title),r}var kr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[lo]}constructor(e,t,r,i,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},so=class extends pc{url;constructor(e,t){super(t),this.url=e,Hd(this,t)}toString(){return A0(this._root)}};function Hd(n,e){e.value._routerState=n,e.children.forEach(t=>Hd(n,t))}function A0(n){let e=n.children.length>0?` { ${n.children.map(A0).join(", ")} } `:"";return`${n.value}${e}`}function Rd(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jt(e.params,t.params)||n.paramsSubject.next(t.params),ZT(e.url,t.url)||n.urlSubject.next(t.url),Jt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Fd(n,e){let t=Jt(n.params,e.params)&&rb(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Fd(n.parent,e.parent))}function C0(n){return typeof n.title=="string"||n.title===null}var x0=new _e(""),ho=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ce;activateEvents=new at;deactivateEvents=new at;attachEvents=new at;detachEvents=new at;routerOutletData=Dv(void 0);parentContexts=$(Nr);location=$(mv);changeDetector=$(pi);inputBinder=$(fo,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ud(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ot({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Qt]})}return n})(),Ud=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Nt?this.route:e===Nr?this.childContexts:e===x0?this.outletData:this.parent.get(e,t)}},fo=new _e(""),Gd=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Na([r.queryParams,r.params,r.data]).pipe(De(([s,o,c],l)=>(c=L(L(L({},s),o),c),l===0?W(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Mv(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Wd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ue({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&F(0,"router-outlet")},dependencies:[ho],encapsulation:2})}return n})();function Kd(n){let e=n.children&&n.children.map(Kd),t=e?pe(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=Wd),t}function Cb(n,e,t){let r=oo(n,e._root,t?t._root:void 0);return new io(r,e)}function oo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xb(n,e,t);return new bt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>oo(n,c)),o}}let r=Rb(e.value),i=e.children.map(s=>oo(n,s));return new bt(r,i)}}function xb(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return oo(n,r,i);return oo(n,r)})}function Rb(n){return new Nt(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var Ai=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},R0="ngNavigationCancelingError";function gc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=k0(!1,mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function k0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[R0]=!0,t.cancellationCode=e,t}function kb(n){return D0(n)&&Qn(n.url)}function D0(n){return!!n&&n[R0]}var Db=(n,e,t,r)=>le(i=>(new jd(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jd=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=_i(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=_i(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Rd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Rd(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},vc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ei=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Pb(n,e,t){let r=n._root,i=e?e._root:null;return Xs(r,i,t,[r.value])}function Nb(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function xi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ov(n)?n:e.get(n):r}function Xs(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=_i(e);return n.children.forEach(o=>{Mb(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>eo(c,t.getContext(o),i)),i}function Mb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ob(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new vc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Xs(n,e,c?c.children:null,r,i):Xs(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ei(c.outlet.component,o))}else o&&eo(e,c,i),i.canActivateChecks.push(new vc(r)),s.component?Xs(n,null,c?c.children:null,r,i):Xs(n,null,t,r,i);return i}function Ob(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rr(n.url,e.url)||!Jt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fd(n,e)||!Jt(n.queryParams,e.queryParams);case"paramsChange":default:return!Fd(n,e)}}function eo(n,e,t){let r=_i(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?eo(o,e.children.getContext(s),t):eo(o,null,t):eo(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ei(e.outlet.component,i)):t.canDeactivateChecks.push(new Ei(null,i)):t.canDeactivateChecks.push(new Ei(null,i))}function po(n){return typeof n=="function"}function Vb(n){return typeof n=="boolean"}function Lb(n){return n&&po(n.canLoad)}function Fb(n){return n&&po(n.canActivate)}function Ub(n){return n&&po(n.canActivateChild)}function jb(n){return n&&po(n.canDeactivate)}function Bb(n){return n&&po(n.canMatch)}function P0(n){return n instanceof ev||n?.name==="EmptyError"}var Ja=Symbol("INITIAL_VALUE");function Ci(){return De(n=>Na(n.map(e=>e.pipe(We(1),ad(Ja)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===Ja)return Ja;if(t===!1||$b(t))return t}return!0}),Kt(e=>e!==Ja),We(1)))}function $b(n){return Qn(n)||n instanceof Ai}function qb(n,e){return _t(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?W(pe(L({},t),{guardsResult:!0})):zb(o,r,i,n).pipe(_t(c=>c&&Vb(c)?Hb(r,s,n,e):W(c)),le(c=>pe(L({},t),{guardsResult:c})))})}function zb(n,e,t,r){return Ee(n).pipe(_t(i=>Yb(i.component,i.route,t,e,r)),Bn(i=>i!==!0,!0))}function Hb(n,e,t,r){return Ee(e).pipe(Tr(i=>nv(Wb(i.route.parent,r),Gb(i.route,r),Qb(n,i.path,t),Kb(n,i.route,t))),Bn(i=>i!==!0,!0))}function Gb(n,e){return n!==null&&e&&e(new dc(n)),W(!0)}function Wb(n,e){return n!==null&&e&&e(new lc(n)),W(!0)}function Kb(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>Ma(()=>{let o=uo(e)??t,c=xi(s,o),l=Fb(c)?c.canActivate(e,n):yt(o,()=>c(e,n));return In(l).pipe(Bn())}));return W(i).pipe(Ci())}function Qb(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Nb(o)).filter(o=>o!==null).map(o=>Ma(()=>{let c=o.guards.map(l=>{let d=uo(o.node)??t,f=xi(l,d),g=Ub(f)?f.canActivateChild(r,n):yt(d,()=>f(r,n));return In(g).pipe(Bn())});return W(c).pipe(Ci())}));return W(s).pipe(Ci())}function Yb(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(c=>{let l=uo(e)??i,d=xi(c,l),f=jb(d)?d.canDeactivate(n,e,t,r):yt(l,()=>d(n,e,t,r));return In(f).pipe(Bn())});return W(o).pipe(Ci())}function Jb(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(o=>{let c=xi(o,n),l=Lb(c)?c.canLoad(e,t):yt(n,()=>c(e,t));return In(l)});return W(s).pipe(Ci(),N0(r))}function N0(n){return Zu(Ze(e=>{if(typeof e!="boolean")throw gc(n,e)}),le(e=>e===!0))}function Xb(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(o=>{let c=xi(o,n),l=Bb(c)?c.canMatch(e,t):yt(n,()=>c(e,t));return In(l)});return W(s).pipe(Ci(),N0(r))}var ao=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},co=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function vi(n){return Us(new ao(n))}function Zb(n){return Us(new Se(4e3,!1))}function eS(n){return Us(k0(!1,mt.GuardRejected))}var Bd=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[ce])return Zb(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,s){return tS(t,i,s).pipe(le(o=>{if(o instanceof Zt)throw new co(o);let c=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new co(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Zt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new ve(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function tS(n,e,t){if(typeof n=="string")return W(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,params:d,data:f,title:g}=e;return In(yt(t,()=>r({params:d,data:f,queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,title:g})))}var $d={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nS(n,e,t,r,i){let s=M0(n,e,t);return s.matched?(r=bb(e,r),Xb(r,e,t,i).pipe(le(o=>o===!0?s:L({},$d)))):W(s)}function M0(n,e,t){if(e.path==="**")return rS(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},$d):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||l0)(t,n,e);if(!i)return L({},$d);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function rS(n){return{matched:!0,parameters:n.length>0?d0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function o0(n,e,t,r){return t.length>0&&oS(n,t,r)?{segmentGroup:new ve(e,sS(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&aS(n,t,r)?{segmentGroup:new ve(n.segments,iS(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function iS(n,e,t,r){let i={};for(let s of t)if(yc(n,e,s)&&!r[Ut(s)]){let o=new ve([],{});i[Ut(s)]=o}return L(L({},r),i)}function sS(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&Ut(r)!==ce){let i=new ve([],{});t[Ut(r)]=i}return t}function oS(n,e,t){return t.some(r=>yc(n,e,r)&&Ut(r)!==ce)}function aS(n,e,t){return t.some(r=>yc(n,e,r))}function yc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cS(n,e,t){return e.length===0&&!n.children[t]}var qd=class{};function lS(n,e,t,r,i,s,o="emptyOnly"){return new zd(n,e,t,r,i,o,s).recognize()}var uS=31,zd=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Bd(this.urlSerializer,this.urlTree)}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){let e=o0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new bt(r,t),s=new so("",i),o=w0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new kr([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(le(r=>({children:r,rootSnapshot:t})),vn(r=>{if(r instanceof co)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ao?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(le(o=>o instanceof bt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ee(s).pipe(Tr(o=>{let c=r.children[o],l=Sb(t,o);return this.processSegmentGroup(e,l,c,o,i)}),od((o,c)=>(o.push(...c),o)),id(null),sv(),_t(o=>{if(o===null)return vi(r);let c=O0(o);return dS(c),W(c)}))}processSegment(e,t,r,i,s,o,c){return Ee(t).pipe(Tr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,c).pipe(vn(d=>{if(d instanceof ao)return W(null);throw d}))),Bn(l=>!!l),vn(l=>{if(P0(l))return cS(r,i,s)?W(new qd):vi(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,l){return Ut(r)!==o&&(o===ce||!yc(i,s,r))?vi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):vi(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:l,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:v}=M0(t,i,s);if(!l)return vi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uS&&(this.allowRedirects=!1));let x=new kr(s,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,a0(i),Ut(i),i.component??i._loadedComponent??null,i,c0(i)),N=mc(x,c,this.paramsInheritanceStrategy);return x.params=Object.freeze(N.params),x.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,g,x,e).pipe(De(O=>this.applyRedirects.lineralizeSegments(i,O)),_t(O=>this.processSegment(e,r,t,O.concat(v),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=nS(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(De(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(De(({routes:d})=>{let f=r._loadedInjector??e,{parameters:g,consumedSegments:v,remainingSegments:x}=l,N=new kr(v,g,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,a0(r),Ut(r),r.component??r._loadedComponent??null,r,c0(r)),U=mc(N,o,this.paramsInheritanceStrategy);N.params=Object.freeze(U.params),N.data=Object.freeze(U.data);let{segmentGroup:O,slicedSegments:ie}=o0(t,v,x,d);if(ie.length===0&&O.hasChildren())return this.processChildren(f,d,O,N).pipe(le(ne=>new bt(N,ne)));if(d.length===0&&ie.length===0)return W(new bt(N,[]));let te=Ut(r)===s;return this.processSegment(f,d,O,ie,te?ce:s,!0,N).pipe(le(ne=>new bt(N,ne instanceof bt?[ne]:[])))}))):vi(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):Jb(e,t,r,this.urlSerializer).pipe(_t(i=>i?this.configLoader.loadChildren(e,t).pipe(Ze(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):eS(t))):W({routes:[],injector:e})}};function dS(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function hS(n){let e=n.value.routeConfig;return e&&e.path===""}function O0(n){let e=[],t=new Set;for(let r of n){if(!hS(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=O0(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!t.has(r))}function a0(n){return n.data||{}}function c0(n){return n.resolve||{}}function fS(n,e,t,r,i,s){return _t(o=>lS(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:c,tree:l})=>pe(L({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function pS(n,e){return _t(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of V0(l))o.add(d);let c=0;return Ee(o).pipe(Tr(l=>s.has(l)?mS(l,r,n,e):(l.data=mc(l,l.parent,n).resolve,W(void 0))),Ze(()=>c++),sd(1),_t(l=>c===o.size?W(t):gn))})}function V0(n){let e=n.children.map(t=>V0(t)).flat();return[n,...e]}function mS(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!C0(i)&&(s[lo]=i.title),Ma(()=>(n.data=mc(n,n.parent,t).resolve,gS(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=L(L({},n.data),o),null)))))}function gS(n,e,t,r){let i=Pd(n);if(i.length===0)return W({});let s={};return Ee(i).pipe(_t(o=>vS(n[o],e,t,r).pipe(Bn(),Ze(c=>{if(c instanceof Ai)throw gc(new Kn,c);s[o]=c}))),sd(1),le(()=>s),vn(o=>P0(o)?gn:Us(o)))}function vS(n,e,t,r){let i=uo(e)??r,s=xi(n,i),o=s.resolve?s.resolve(e,t):yt(i,()=>s(e,t));return In(o)}function kd(n){return De(e=>{let t=n(e);return t?Ee(t).pipe(le(()=>e)):W(e)})}var Qd=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[lo]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(L0),providedIn:"root"})}return n})(),L0=(()=>{class n extends Qd{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(se(t0))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jn=new _e("",{providedIn:"root",factory:()=>({})}),Mr=new _e(""),wc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(xv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return W(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=In(t.loadComponent()).pipe(le(U0),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Oa(()=>{this.componentLoaders.delete(t)})),i=new td(r,()=>new Ft).pipe(ed());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=F0(r,this.compiler,t,this.onLoadEndListener).pipe(Oa(()=>{this.childrenLoaders.delete(r)})),o=new td(s,()=>new Ft).pipe(ed());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F0(n,e,t,r){return In(n.loadChildren()).pipe(le(U0),_t(i=>i instanceof vv||Array.isArray(i)?W(i):Ee(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(Mr,[],{optional:!0,self:!0}).flat()),{routes:o.map(Kd),injector:s}}))}function _S(n){return n&&typeof n=="object"&&"default"in n}function U0(n){return _S(n)?n.default:n}var Ec=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(yS),providedIn:"root"})}return n})(),yS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yd=new _e(""),Jd=new _e("");function j0(n,e,t){let r=n.get(Jd),i=n.get(Tt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),wS(n))),{onViewTransitionCreated:l}=r;return l&&yt(n,()=>l({transition:c,from:e,to:t})),o}function wS(n){return new Promise(e=>{yv({read:()=>setTimeout(e)},{injector:n})})}var Xd=new _e(""),Ic=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ft;transitionAbortWithErrorSubject=new Ft;configLoader=$(wc);environmentInjector=$(_n);destroyRef=$(ld);urlSerializer=$(Pr);rootContexts=$(Nr);location=$(mi);inputBindingEnabled=$(fo,{optional:!0})!==null;titleStrategy=$(Qd);options=$(Jn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Ec);createViewTransition=$(Yd,{optional:!0});navigationErrorHandler=$(Xd,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new ac(i)),r=i=>this.events.next(new cc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new st(null),this.transitions.pipe(Kt(r=>r!==null),De(r=>{let i=!1;return W(r).pipe(De(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),gn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?pe(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&c!=="reload"){let l="";return this.events.next(new en(s.id,this.urlSerializer.serialize(s.rawUrl),l,Ii.IgnoredSameUrlNavigation)),s.resolve(!1),gn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return W(s).pipe(De(l=>(this.events.next(new Yn(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?gn:Promise.resolve(l))),fS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=pe(L({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let d=new no(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:f,restoredState:g,extras:v}=s,x=new Yn(l,this.urlSerializer.serialize(d),f,g);this.events.next(x);let N=S0(this.rootComponentType).snapshot;return this.currentTransition=r=pe(L({},s),{targetSnapshot:N,urlAfterRedirects:d,extras:pe(L({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,W(r)}else{let l="";return this.events.next(new en(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Ii.IgnoredByUrlHandlingStrategy)),s.resolve(!1),gn}}),Ze(s=>{let o=new rc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),le(s=>(this.currentTransition=r=pe(L({},s),{guards:Pb(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),qb(this.environmentInjector,s=>this.events.next(s)),Ze(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw gc(this.urlSerializer,s.guardsResult);let o=new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Kt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",mt.GuardRejected),!1)),kd(s=>{if(s.guards.canActivateChecks.length!==0)return W(s).pipe(Ze(o=>{let c=new sc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),De(o=>{let c=!1;return W(o).pipe(pS(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(o,"",mt.NoDataFromResolver)}}))}),Ze(o=>{let c=new oc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}))}),kd(s=>{let o=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ze(d=>{c.component=d}),le(()=>{})));for(let d of c.children)l.push(...o(d));return l};return Na(o(s.targetSnapshot.root)).pipe(id(null),We(1))}),kd(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return c?Ee(c).pipe(le(()=>r)):W(r)}),le(s=>{let o=Cb(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=pe(L({},s),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),Ze(()=>{this.events.next(new ro)}),Db(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),We(1),cd(new Et(s=>{let o=r.abortController.signal,c=()=>s.next();return o.addEventListener("abort",c),()=>o.removeEventListener("abort",c)}).pipe(Kt(()=>!i&&!r.targetRouterState),Ze(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",mt.Aborted)}))),Ze({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new At(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),cd(this.transitionAbortWithErrorSubject.pipe(Ze(s=>{throw s}))),Oa(()=>{i||this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),vn(s=>{if(this.destroyed)return r.resolve(!1),gn;if(i=!0,D0(s))this.events.next(new Xt(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),kb(s)?this.events.next(new Si(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Ti(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=yt(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(c instanceof Ai){let{message:l,cancellationCode:d}=gc(this.urlSerializer,c);this.events.next(new Xt(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Si(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return gn}))}))}cancelNavigationTransition(t,r,i){let s=new Xt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ES(n){return n!==wi}var B0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(IS),providedIn:"root"})}return n})(),_c=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IS=(()=>{class n extends _c{static \u0275fac=(()=>{let t;return function(i){return(t||(t=di(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$0=(()=>{class n{urlSerializer=$(Pr);options=$(Jn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(mi);urlHandlingStrategy=$(Ec);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Zt?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=S0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(TS),providedIn:"root"})}return n})(),TS=(()=>{class n extends $0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Yn?this.updateStateMemento():t instanceof en?this.commitTransition(r):t instanceof no?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ro?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Xt&&t.code!==mt.SupersededByNewNavigation&&t.code!==mt.Redirect?this.restoreHistory(r):t instanceof Ti?this.restoreHistory(r,!0):t instanceof At&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=L(L({},o),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=L(L({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=di(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tc(n,e){n.events.pipe(Kt(t=>t instanceof At||t instanceof Xt||t instanceof Ti||t instanceof en),le(t=>t instanceof At||t instanceof en?0:(t instanceof Xt?t.code===mt.Redirect||t.code===mt.SupersededByNewNavigation:!1)?2:1),Kt(t=>t!==2),We(1)).subscribe(()=>{e()})}var bS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(wv);stateManager=$($0);options=$(Jn,{optional:!0})||{};pendingTasks=$(cv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(Ic);urlSerializer=$(Pr);location=$(mi);urlHandlingStrategy=$(Ec);injector=$(_n);_events=new Ft;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(B0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(Mr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(fo,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Yg;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Xt&&r.code!==mt.Redirect&&r.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof At)this.navigated=!0;else if(r instanceof Si){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ES(i.source)},o);this.scheduleNavigation(c,wi,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Tb(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=L({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s).catch(l=>{this.injector.get(Va)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let v=i?i.snapshot:this.routerState.snapshot.root;g=E0(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return I0(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qn(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,wi,null,r)}navigate(t,r={skipLocationChange:!1}){return AS(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},bS):r===!1?i=L({},SS):i=r,Qn(t))return n0(this.currentUrlTree,t,i);let s=this.parseUrl(t);return n0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((g,v)=>{c=g,l=v});let f=this.pendingTasks.add();return Tc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Se(4008,!1)}var Ri=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=qn(null);get href(){return Yt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ft;applicationErrorHandler=$(Va);options=$(Jn,{optional:!0});constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.reactiveHref.set($(new kv("href"),{optional:!0}));let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof At&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qn(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Qn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(K(xe),K(Nt),lv("tabindex"),K(fi),K(hi),K(Gs))};static \u0275dir=ot({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&z("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&ja("href",i.reactiveHref(),hv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xr],replaceUrl:[2,"replaceUrl","replaceUrl",xr],routerLink:"routerLink"},features:[Qt]})}return n})(),eh=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new at;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof At&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(js()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ee(t).pipe(js()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=CS(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(K(xe),K(hi),K(fi),K(pi),K(Ri,8))};static \u0275dir=ot({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Iv(s,Ri,5),r&2){let o;Tv(o=bv())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Qt]})}return n})();function CS(n){return!!n.paths}var mo=class{};var q0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Kt(t=>t instanceof At),Tr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Fa(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Ee(i).pipe(js())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=W(null);let s=i.pipe(_t(o=>o===null?W(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ee([s,o]).pipe(js())}else return s})}static \u0275fac=function(r){return new(r||n)(se(xe),se(_n),se(mo),se(wc))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z0=new _e(""),xS=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=wi;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof At?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof en&&t.code===Ii.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bi&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new bi(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){pv()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function th(n,...e){return $n([{provide:Mr,multi:!0,useValue:n},[],{provide:Nt,useFactory:H0,deps:[xe]},{provide:md,multi:!0,useFactory:G0},e.map(t=>t.\u0275providers)])}function H0(n){return n.routerState.root}function go(n,e){return{\u0275kind:n,\u0275providers:e}}function G0(){let n=$(It);return e=>{let t=n.get(Ev);if(e!==t.components[0])return;let r=n.get(xe),i=n.get(W0);n.get(nh)===1&&r.initialNavigation(),n.get(Y0,null,{optional:!0})?.setUpPreloading(),n.get(z0,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var W0=new _e("",{factory:()=>new Ft}),nh=new _e("",{providedIn:"root",factory:()=>1});function K0(){let n=[{provide:nh,useValue:0},pd(()=>{let e=$(It);return e.get(Lv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(xe),s=e.get(W0);Tc(i,()=>{r(!0)}),e.get(Ic).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))})];return go(2,n)}function Q0(){let n=[pd(()=>{$(xe).setUpLocationChangeListener()}),{provide:nh,useValue:2}];return go(3,n)}var Y0=new _e("");function J0(n){return go(0,[{provide:Y0,useExisting:q0},{provide:mo,useExisting:n}])}function X0(){return go(8,[Gd,{provide:fo,useExisting:Gd}])}function Z0(n){gv("NgRouterViewTransitions");let e=[{provide:Yd,useValue:j0},{provide:Jd,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return go(9,e)}var e_=[mi,{provide:Pr,useClass:Kn},xe,Nr,{provide:Nt,useFactory:H0,deps:[xe]},wc,[]],Or=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[e_,[],{provide:Mr,multi:!0,useValue:t},[],r?.errorHandler?{provide:Xd,useValue:r.errorHandler}:[],{provide:Jn,useValue:r||{}},r?.useHash?kS():DS(),RS(),r?.preloadingStrategy?J0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?PS(r):[],r?.bindToComponentInputs?X0().\u0275providers:[],r?.enableViewTransitions?Z0().\u0275providers:[],NS()]}}static forChild(t){return{ngModule:n,providers:[{provide:Mr,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({})}return n})();function RS(){return{provide:z0,useFactory:()=>{let n=$(zv),e=$(ct),t=$(Jn),r=$(Ic),i=$(Pr);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xS(i,r,n,e,t)}}}function kS(){return{provide:Gs,useClass:Uv}}function DS(){return{provide:Gs,useClass:Fv}}function PS(n){return[n.initialNavigation==="disabled"?Q0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?K0().\u0275providers:[]]}var Zd=new _e("");function NS(){return[{provide:Zd,useFactory:G0},{provide:md,multi:!0,useExisting:Zd}]}var t_=()=>{};var i_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},MS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,v=(c&15)<<2|d>>6,x=d&63;l||(x=64,o||(v=64)),r.push(t[f],t[g],t[v],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(i_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new ih;let v=s<<2|c>>4;if(r.push(v),d!==64){let x=c<<4&240|d>>2;if(r.push(x),g!==64){let N=d<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ih=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OS=function(n){let e=i_(n);return bc.encodeByteArray(e,!0)},_o=function(n){return OS(n).replace(/\./g,"")},Sc=function(n){try{return bc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VS=()=>oh().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Sc(n[1]);return e&&JSON.parse(e)},Ac=()=>{try{return t_()||VS()||LS()||FS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ah=n=>{var e,t;return(t=(e=Ac())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},s_=n=>{let e=ah(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ch=()=>{var n;return(n=Ac())===null||n===void 0?void 0:n.config},lh=n=>{var e;return(e=Ac())===null||e===void 0?void 0:e[`_${n}`]};var Vr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Zn(n){return n.endsWith(".cloudworkstations.dev")}function Cc(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function o_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_o(JSON.stringify(t)),_o(JSON.stringify(o)),""].join(".")}var vo={};function US(){let n={prod:[],emulator:[]};for(let e of Object.keys(vo))vo[e]?n.emulator.push(e):n.prod.push(e);return n}function jS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var n_=!1;function xc(n,e){if(typeof window>"u"||typeof document>"u"||!Zn(window.location.host)||vo[n]===e||vo[n]||n_)return;vo[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=US().prod.length>0;function o(){let v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function l(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{n_=!0,o()},v}function f(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){let v=jS(r),x=t("text"),N=document.getElementById(x)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),ie=t("preprendIcon"),te=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let ne=v.element;c(ne),f(O,U);let Ie=d();l(te,ie),ne.append(te,N,O,Ie),document.body.appendChild(ne)}s?(N.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function BS(){var n;let e=(n=Ac())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d_(){let n=Qe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function h_(){return!BS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yo(){try{return typeof indexedDB=="object"}catch{return!1}}function f_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var $S="FirebaseError",Ct=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$S,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}},jt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ct(i,c,r)}};function qS(n,e){return n.replace(zS,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zS=/\{\$([^}]+)}/g;function p_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(r_(s)&&r_(o)){if(!tn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function r_(n){return n!==null&&typeof n=="object"}function Di(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function m_(n,e){let t=new sh(n,e);return t.subscribe.bind(t)}var sh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");HS(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rh),i.error===void 0&&(i.error=rh),i.complete===void 0&&(i.complete=rh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HS(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rh(){}var oN=4*60*60*1e3;function Oe(n){return n&&n._delegate?n._delegate:n}var gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lr="[DEFAULT]";var uh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Vr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WS(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GS(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GS(n){return n===Lr?void 0:n}function WS(n){return n.instantiationMode==="EAGER"}var Rc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new uh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KS=[],he=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(he||{}),QS={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},YS=he.INFO,JS={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},XS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nn=class{constructor(e){this.name=e,this._logLevel=YS,this._logHandler=XS,this._userLogHandler=null,KS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var ZS=(n,e)=>e.some(t=>n instanceof t),g_,v_;function eA(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tA(){return v_||(v_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var __=new WeakMap,hh=new WeakMap,y_=new WeakMap,dh=new WeakMap,ph=new WeakMap;function nA(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(rn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&__.set(t,n)}).catch(()=>{}),ph.set(e,n),e}function rA(n){if(hh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hh.set(n,e)}var fh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||y_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function w_(n){fh=n(fh)}function iA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kc(this),e,...t);return y_.set(r,e.sort?e.sort():[e]),rn(r)}:tA().includes(n)?function(...e){return n.apply(kc(this),e),rn(__.get(this))}:function(...e){return rn(n.apply(kc(this),e))}}function sA(n){return typeof n=="function"?iA(n):(n instanceof IDBTransaction&&rA(n),ZS(n,eA())?new Proxy(n,fh):n)}function rn(n){if(n instanceof IDBRequest)return nA(n);if(dh.has(n))return dh.get(n);let e=sA(n);return e!==n&&(dh.set(n,e),ph.set(e,n)),e}var kc=n=>ph.get(n);function I_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=rn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(rn(o.result),l.oldVersion,l.newVersion,rn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var oA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],mh=new Map;function E_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mh.get(e))return mh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=aA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oA.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return mh.set(e,s),s}w_(n=>pe(L({},n),{get:(e,t,r)=>E_(e,t)||n.get(e,t,r),has:(e,t)=>!!E_(e,t)||n.has(e,t)}));var vh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cA(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cA(n){let e=n.getComponent();return e?.type==="VERSION"}var _h="@firebase/app",T_="0.13.1";var Tn=new nn("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",dA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",pA="@firebase/auth",mA="@firebase/auth-compat",gA="@firebase/database",vA="@firebase/data-connect",_A="@firebase/database-compat",yA="@firebase/functions",wA="@firebase/functions-compat",EA="@firebase/installations",IA="@firebase/installations-compat",TA="@firebase/messaging",bA="@firebase/messaging-compat",SA="@firebase/performance",AA="@firebase/performance-compat",CA="@firebase/remote-config",xA="@firebase/remote-config-compat",RA="@firebase/storage",kA="@firebase/storage-compat",DA="@firebase/firestore",PA="@firebase/ai",NA="@firebase/firestore-compat",MA="firebase",OA="11.9.0";var yh="[DEFAULT]",VA={[_h]:"fire-core",[lA]:"fire-core-compat",[dA]:"fire-analytics",[uA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[pA]:"fire-auth",[mA]:"fire-auth-compat",[gA]:"fire-rtdb",[vA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[yA]:"fire-fn",[wA]:"fire-fn-compat",[EA]:"fire-iid",[IA]:"fire-iid-compat",[TA]:"fire-fcm",[bA]:"fire-fcm-compat",[SA]:"fire-perf",[AA]:"fire-perf-compat",[CA]:"fire-rc",[xA]:"fire-rc-compat",[RA]:"fire-gcs",[kA]:"fire-gcs-compat",[DA]:"fire-fst",[NA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};var wo=new Map,LA=new Map,wh=new Map;function b_(n,e){try{n.container.addComponent(e)}catch(t){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bt(n){let e=n.name;if(wh.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,n);for(let t of wo.values())b_(t,n);for(let t of LA.values())b_(t,n);return!0}function Pi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xt(n){return n==null?!1:n.settings!==void 0}var FA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new jt("app","Firebase",FA);var Eh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}};var tr=OA;function bh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:yh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw er.create("bad-app-name",{appName:String(i)});if(t||(t=ch()),!t)throw er.create("no-options");let s=wo.get(i);if(s){if(tn(t,s.options)&&tn(r,s.config))return s;throw er.create("duplicate-app",{appName:i})}let o=new Rc(i);for(let l of wh.values())o.addComponent(l);let c=new Eh(t,r,o);return wo.set(i,c),c}function Fr(n=yh){let e=wo.get(n);if(!e&&n===yh&&ch())return bh();if(!e)throw er.create("no-app",{appName:n});return e}function Dc(){return Array.from(wo.values())}function Ve(n,e,t){var r;let i=(r=VA[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(c.join(" "));return}Bt(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UA="firebase-heartbeat-database",jA=1,Eo="firebase-heartbeat-store",gh=null;function x_(){return gh||(gh=I_(UA,jA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eo)}catch(t){console.warn(t)}}}}).catch(n=>{throw er.create("idb-open",{originalErrorMessage:n.message})})),gh}function BA(n){return E(this,null,function*(){try{let t=(yield x_()).transaction(Eo),r=yield t.objectStore(Eo).get(R_(n));return yield t.done,r}catch(e){if(e instanceof Ct)Tn.warn(e.message);else{let t=er.create("idb-get",{originalErrorMessage:e?.message});Tn.warn(t.message)}}})}function S_(n,e){return E(this,null,function*(){try{let r=(yield x_()).transaction(Eo,"readwrite");yield r.objectStore(Eo).put(e,R_(n)),yield r.done}catch(t){if(t instanceof Ct)Tn.warn(t.message);else{let r=er.create("idb-set",{originalErrorMessage:t?.message});Tn.warn(r.message)}}})}function R_(n){return`${n.name}!${n.options.appId}`}var $A=1024,qA=30,Ih=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Th(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=A_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qA){let o=HA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=A_(),{heartbeatsToSend:r,unsentEntries:i}=zA(this._heartbeatsCache.heartbeats),s=_o(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Tn.warn(t),""}})}};function A_(){return new Date().toISOString().substring(0,10)}function zA(n,e=$A){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),C_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),C_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Th=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return yo()?f_().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield BA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function C_(n){return _o(JSON.stringify({version:2,heartbeats:n})).length}function HA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GA(n){Bt(new gt("platform-logger",e=>new vh(e),"PRIVATE")),Bt(new gt("heartbeat",e=>new Ih(e),"PRIVATE")),Ve(_h,T_,n),Ve(_h,T_,"esm2017"),Ve("fire-js","")}GA("");var WA="firebase",KA="11.9.1";Ve(WA,KA,"app");function k_(n){n===void 0&&(n=$(It));let e=n.get(La);return t=>new Et(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),o()},complete:()=>{r.complete(),o()},error:l=>{r.error(l),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var nr=new vd("ANGULARFIRE2_VERSION");function Io(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Mi=(n,e)=>{let t=e?[e]:Dc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ni=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ni||{}),D_=_d()&&typeof Zone<"u"?Ni.WARN:Ni.SILENT;var Pc=class{zone;delegate;constructor(e,t=Xg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},rr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=$(ct);this.outsideAngular=t.runOutsideAngular(()=>new Pc(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Pc(typeof Zone>"u"?void 0:Zone.current,Jg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P_=!1;function QA(n,e){!P_&&(D_>Ni.SILENT||_d())&&(P_=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),D_>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function YA(n){let e=$(ct,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ur(n){let e=$(ct,{optional:!0});return e?e.run(()=>n()):n()}var JA=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),yt(t,()=>Ur(()=>n.apply(void 0,r)))),Le=(n,e,t)=>(t||=e?Ni.WARN:Ni.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=$(rr),o=$(La),c=$(_n)}catch{return QA(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Ur(()=>o.add())),i[d]=JA(i[d],r,c));let l=YA(()=>n.apply(this,i));return e?l instanceof Et?l.pipe(rd(s.outsideAngular),nd(s.insideAngular),k_(c)):l instanceof Promise?Ur(()=>{let d=o.add();return new Promise((f,g)=>{l.then(v=>yt(c,()=>Ur(()=>f(v))),v=>yt(c,()=>Ur(()=>g(v)))).finally(d)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Ur(()=>l):l instanceof Et?l.pipe(rd(s.outsideAngular),nd(s.insideAngular)):Ur(()=>l)});var bn=class{constructor(e){return e}},jr=class{constructor(){return Dc()}};function XA(n){return n&&n.length===1?n[0]:new bn(Fr())}var Sh=new _e("angularfire2._apps"),ZA={provide:bn,useFactory:XA,deps:[[new Pt,Sh]]},eC={provide:jr,deps:[[new Pt,Sh]]};function tC(n){return(e,t)=>{let r=t.get(Sr);Ve("angularfire",nr.full,"core"),Ve("angularfire",nr.full,"app"),Ve("angular",Pv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new bn(i)}}function N_(n,...e){return $n([ZA,eC,{provide:Sh,useFactory:tC(n),multi:!0,deps:[ct,It,rr,...e]}])}var M_=Le(bh,!0);var nC=new Map,rC={activated:!1,tokenObservers:[]},iC={initialized:!1,enabled:!1};function $t(n){return nC.get(n)||Object.assign({},rC)}function F_(){return iC}var sC="https://content-firebaseappcheck.googleapis.com/v1";var oC="exchangeDebugToken",O_={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},lM=24*60*60*1e3;var xh=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new Vr,this.pending.promise.catch(t=>{}),yield aC(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vr,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aC(n){return new Promise(e=>{setTimeout(e,n)})}var cC={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ir=new jt("appCheck","AppCheck",cC);function U_(n){if(!$t(n).activated)throw ir.create("use-before-activation",{appName:n.name})}function j_(r,i){return E(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let x=yield o.getHeartbeatsHeader();x&&(s["X-Firebase-Client"]=x)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(x){throw ir.create("fetch-network-error",{originalErrorMessage:x?.message})}if(l.status!==200)throw ir.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(x){throw ir.create("fetch-parse-error",{originalErrorMessage:x?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(f[1])*1e3,v=Date.now();return{token:d.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function B_(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sC}/projects/${t}/apps/${r}:${oC}?key=${i}`,body:{debug_token:e}}}var lC="firebase-app-check-database",uC=1,Rh="firebase-app-check-store";var Nc=null;function dC(){return Nc||(Nc=new Promise((n,e)=>{try{let t=indexedDB.open(lC,uC);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ir.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rh,{keyPath:"compositeKey"})}}}catch(t){e(ir.create("storage-open",{originalErrorMessage:t?.message}))}}),Nc)}function hC(n,e){return fC(pC(n),e)}function fC(n,e){return E(this,null,function*(){let r=(yield dC()).transaction(Rh,"readwrite"),s=r.objectStore(Rh).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var d;c(ir.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function pC(n){return`${n.options.appId}-${n.name}`}var To=new nn("@firebase/app-check");function Ah(n,e){return yo()?hC(n,e).catch(t=>{To.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $_(){return F_().enabled}function q_(){return E(this,null,function*(){let n=F_();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var mC={error:"UNKNOWN_ERROR"};function gC(n){return bc.encodeString(JSON.stringify(n),!1)}function kh(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;U_(r);let i=$t(r),s=i.token,o;if(s&&!bo(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(bo(d)?s=d:yield Ah(r,void 0))}if(!e&&s&&bo(s))return{token:s.token};let c=!1;if($_())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=j_(B_(r,yield q_()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield Ah(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?To.warn(d.message):t&&To.error(d),Ch(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield $t(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?To.warn(d.message):t&&To.error(d),o=d}let l;return s?o?bo(s)?l={token:s.token,internalError:o}:l=Ch(o):(l={token:s.token},i.token=s,yield Ah(r,s)):l=Ch(o),c&&wC(r,l),l})}function vC(n){return E(this,null,function*(){let e=n.app;U_(e);let{provider:t}=$t(e);if($_()){let r=yield q_(),{token:i}=yield j_(B_(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function _C(n,e,t,r){let{app:i}=n,s=$t(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bo(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),V_(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>V_(n))}function z_(n,e){let t=$t(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function V_(n){let{app:e}=n,t=$t(e),r=t.tokenRefresher;r||(r=yC(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yC(n){let{app:e}=n;return new xh(()=>E(null,null,function*(){let t=$t(e),r;if(t.token?r=yield kh(n,!0):r=yield kh(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=$t(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},O_.RETRIAL_MIN_WAIT,O_.RETRIAL_MAX_WAIT)}function wC(n,e){let t=$t(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bo(n){return n.expireTimeMillis-Date.now()>0}function Ch(n){return{token:gC(mC),error:n}}var Dh=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=$t(this.app);for(let t of e)z_(this.app,t.next);return Promise.resolve()}};function EC(n,e){return new Dh(n,e)}function IC(n){return{getToken:e=>kh(n,e),getLimitedUseToken:()=>vC(n),addTokenListener:e=>_C(n,"INTERNAL",e),removeTokenListener:e=>z_(n.app,e)}}var TC="@firebase/app-check",bC="0.10.0";var SC="app-check",L_="app-check-internal";function AC(){Bt(new gt(SC,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return EC(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(L_).initialize()})),Bt(new gt(L_,n=>{let e=n.getProvider("app-check").getImmediate();return IC(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(TC,bC)}AC();var CC="app-check";var Oi=class{constructor(){return Mi(CC)}};var xC=["localhost","0.0.0.0","127.0.0.1"],IM=typeof window<"u"&&xC.includes(window.location.hostname);function sy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var oy=sy,ay=new jt("auth","Firebase",sy());var Uc=new nn("@firebase/auth");function RC(n,...e){Uc.logLevel<=he.WARN&&Uc.warn(`Auth (${tr}): ${n}`,...e)}function Oc(n,...e){Uc.logLevel<=he.ERROR&&Uc.error(`Auth (${tr}): ${n}`,...e)}function on(n,...e){throw Qh(n,...e)}function qt(n,...e){return Qh(n,...e)}function Kh(n,e,t){let r=Object.assign(Object.assign({},oy()),{[e]:t});return new jt("auth","Firebase",r).create(e,{appName:n.name})}function Br(n){return Kh(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kC(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&on(n,"argument-error"),Kh(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ay.create(n,...e)}function ee(n,e,...t){if(!n)throw Qh(e,...t)}function Sn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Oc(e),new Error(e)}function Cn(n,e){n||Sn(e)}function Mh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DC(){return H_()==="http:"||H_()==="https:"}function H_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DC()||l_()||"connection"in navigator)?navigator.onLine:!0}function NC(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var $r=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cn(t>e,"Short delay should be less than long delay!"),this.isMobile=a_()||u_()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yh(n,e){Cn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var jc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var MC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var OC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VC=new $r(3e4,6e4);function Jh(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Li(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){return cy(n,i,()=>E(null,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Di(Object.assign({key:n.config.apiKey},f)).slice(1),v=yield n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);let x=Object.assign({method:e,headers:v},d);return c_()||(x.referrerPolicy="no-referrer"),n.emulatorConfig&&Zn(n.emulatorConfig.host)&&(x.credentials="include"),jc.fetch()(yield ly(n,n.config.apiHost,t,g),x)}))})}function cy(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},MC),e);try{let i=new Oh(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Mc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mc(n,"user-disabled",o);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Kh(n,f,d);on(n,f)}}catch(i){if(i instanceof Ct)throw i;on(n,"network-request-failed",{message:String(i)})}})}function LC(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){let d=yield Li(n,e,t,r,i);return"mfaPendingCredential"in d&&on(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function ly(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Yh(n.config,i):`${n.config.apiScheme}://${i}`;return OC.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Oh=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qt(this.auth,"network-request-failed")),VC.get())})}};function Mc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=qt(n,e,r);return i.customData._tokenResponse=t,i}function FC(n,e){return E(this,null,function*(){return Li(n,"POST","/v1/accounts:delete",e)})}function Bc(n,e){return E(this,null,function*(){return Li(n,"POST","/v1/accounts:lookup",e)})}function So(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xh(n,e=!1){return E(this,null,function*(){let t=Oe(n),r=yield t.getIdToken(e),i=Zh(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:So(Ph(i.auth_time)),issuedAtTime:So(Ph(i.iat)),expirationTime:So(Ph(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ph(n){return Number(n)*1e3}function Zh(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sc(t);return i?JSON.parse(i):(Oc("Failed to decode base64 JWT payload"),null)}catch(i){return Oc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function G_(n){let e=Zh(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Co(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ct&&UC(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function UC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=So(this.lastLoginAt),this.creationTime=So(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $c(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Co(n,Bc(t,{idToken:r}));ee(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uy(s.providerUserInfo):[],c=jC(n.providerData,o),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=l?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new xo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function ef(n){return E(this,null,function*(){let e=Oe(n);yield $c(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function jC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uy(n){return n.map(e=>{var{providerId:t}=e,r=Pa(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function BC(n,e){return E(this,null,function*(){let t=yield cy(n,{},()=>E(null,null,function*(){let r=Di({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield ly(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Zn(n.emulatorConfig.host)&&(l.credentials="include"),jc.fetch()(o,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function $C(n,e){return E(this,null,function*(){return Li(n,"POST","/v2/accounts:revokeToken",Jh(n,e))})}var Ao=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=G_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield BC(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Sn("not implemented")}};function sr(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var or=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Pa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Co(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Xh(this,e)}reload(){return ef(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield $c(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(xt(this.auth.app))return Promise.reject(Br(this.auth));let e=yield this.getIdToken();return yield Co(this,FC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,x=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,U=(c=t.tenantId)!==null&&c!==void 0?c:void 0,O=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,ie=(d=t.createdAt)!==null&&d!==void 0?d:void 0,te=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:ne,emailVerified:Ie,isAnonymous:ht,providerData:we,stsTokenManager:b}=t;ee(ne&&b,e,"internal-error");let _=Ao.fromJSON(this.name,b);ee(typeof ne=="string",e,"internal-error"),sr(g,e.name),sr(v,e.name),ee(typeof Ie=="boolean",e,"internal-error"),ee(typeof ht=="boolean",e,"internal-error"),sr(x,e.name),sr(N,e.name),sr(U,e.name),sr(O,e.name),sr(ie,e.name),sr(te,e.name);let I=new n({uid:ne,auth:e,email:v,emailVerified:Ie,displayName:g,isAnonymous:ht,photoURL:N,phoneNumber:x,tenantId:U,stsTokenManager:_,createdAt:ie,lastLoginAt:te});return we&&Array.isArray(we)&&(I.providerData=we.map(T=>Object.assign({},T))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Ao;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $c(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?uy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ao;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var W_=new Map;function An(n){Cn(n instanceof Function,"Expected a class definition");let e=W_.get(n);return e?(Cn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W_.set(n,e),e)}var qC=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Lh=qC;function Vc(n,e,t){return`firebase:${n}:${e}:${t}`}var qc=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Vc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vc("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Bc(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(An(Lh),e,r);let i=(yield Promise.all(t.map(d=>E(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||An(Lh),o=Vc(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let g;if(typeof f=="string"){let v=yield Bc(e,{idToken:f}).catch(()=>{});if(!v)break;g=yield or._fromGetAccountInfoResponse(e,v,f)}else g=or._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>E(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function K_(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(py(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gy(e))return"Blackberry";if(vy(e))return"Webos";if(hy(e))return"Safari";if((e.includes("chrome/")||fy(e))&&!e.includes("edge/"))return"Chrome";if(my(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dy(n=Qe()){return/firefox\//i.test(n)}function hy(n=Qe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fy(n=Qe()){return/crios\//i.test(n)}function py(n=Qe()){return/iemobile/i.test(n)}function my(n=Qe()){return/android/i.test(n)}function gy(n=Qe()){return/blackberry/i.test(n)}function vy(n=Qe()){return/webos/i.test(n)}function tf(n=Qe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zC(n=Qe()){var e;return tf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HC(){return d_()&&document.documentMode===10}function _y(n=Qe()){return tf(n)||my(n)||vy(n)||gy(n)||/windows phone/i.test(n)||py(n)}function yy(n,e=[]){let t;switch(n){case"Browser":t=K_(Qe());break;case"Worker":t=`${K_(Qe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tr}/${r}`}var Fh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function GC(t){return E(this,arguments,function*(n,e={}){return Li(n,"GET","/v2/passwordPolicy",Jh(n,e))})}var WC=6,Uh=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:WC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var jh=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zc(this),this.idTokenSubscription=new zc(this),this.beforeStateQueue=new Fh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ay,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=An(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield qc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Bc(this,{idToken:e}),r=yield or._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(xt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield $c(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=NC()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(xt(this.app))return Promise.reject(Br(this));let t=e?Oe(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return xt(this.app)?Promise.reject(Br(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xt(this.app)?Promise.reject(Br(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(An(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield GC(this),t=new Uh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield $C(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&An(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield qc.create(this,[An(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RC(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Xc(n){return Oe(n)}var zc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=m_(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nf={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KC(n){nf=n}function QC(n){return nf.loadJS(n)}function YC(){return nf.gapiScript}function wy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function rf(n,e){let t=Pi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(tn(s,e??{}))return i;on(i,"already-initialized")}return t.initialize({options:e})}function JC(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(An);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function sf(n,e,t){let r=Xc(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ey(e),{host:o,port:c}=XC(e),l=c===null?"":`:${c}`,d={url:`${s}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(tn(d,r.config.emulator)&&tn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Zn(o)?(Cc(`${s}//${o}${l}`),xc("Auth",!0)):i||ZC()}function Ey(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XC(n){let e=Ey(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Q_(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Q_(o)}}}function Q_(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ZC(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ro=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,t){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}};function Vi(n,e){return E(this,null,function*(){return LC(n,"POST","/v1/accounts:signInWithIdp",Jh(n,e))})}var e1="http://localhost",Hc=class n extends Ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):on("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Pa(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Vi(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Vi(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}buildRequest(){let e={requestUri:e1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Di(t)}return e}};var ko=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Gc=class extends ko{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var of=(()=>{class n extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Hc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Do=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield or._fromIdTokenResponse(e,r,i),o=Y_(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Y_(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Y_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Bh=class n extends Ct{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Iy(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(n,s,e,r):s})}function t1(n,e,t=!1){return E(this,null,function*(){let r=yield Co(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Do._forOperation(n,"link",r)})}function n1(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(xt(r.app))return Promise.reject(Br(r));let i="reauthenticate";try{let s=yield Co(n,Iy(r,i,e,n),t);ee(s.idToken,r,"internal-error");let o=Zh(s.idToken);ee(o,r,"internal-error");let{sub:c}=o;return ee(n.uid===c,r,"user-mismatch"),Do._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&on(r,"user-mismatch"),s}})}function r1(n,e,t=!1){return E(this,null,function*(){if(xt(n.app))return Promise.reject(Br(n));let r="signIn",i=yield Iy(n,r,e),s=yield Do._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function No(n,e,t,r){return Oe(n).onIdTokenChanged(e,t,r)}function af(n,e,t){return Oe(n).beforeAuthStateChanged(e,t)}function cf(n){return Oe(n).signOut()}var Wc="__sak";var Kc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wc,"1"),this.storage.removeItem(Wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var i1=1e3,s1=10,o1=(()=>{class n extends Kc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_y(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);HC()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,s1):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},i1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield jn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield jn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield jn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Ty=o1;var a1=(()=>{class n extends Kc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),lf=a1;function c1(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var l1=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(f=>E(this,null,function*(){return f(r.origin,o)})),d=yield c1(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function uf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var $h=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=uf("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let v=g;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function sn(){return window}function u1(n){sn().location.href=n}function by(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}function d1(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function h1(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function f1(){return by()?self:null}var Sy="firebaseLocalStorageDb",p1=1,Qc="firebaseLocalStorage",Ay="fbase_key",qr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Zc(n,e){return n.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function m1(){let n=indexedDB.deleteDatabase(Sy);return new qr(n).toPromise()}function qh(){let n=indexedDB.open(Sy,p1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Qc,{keyPath:Ay})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),yield m1(),e(yield qh()))}))})}function J_(n,e,t){return E(this,null,function*(){let r=Zc(n,!0).put({[Ay]:e,value:t});return new qr(r).toPromise()})}function g1(n,e){return E(this,null,function*(){let t=Zc(n,!1).get(e),r=yield new qr(t).toPromise();return r===void 0?null:r.value})}function X_(n,e){let t=Zc(n,!0).delete(e);return new qr(t).toPromise()}var v1=800,_1=3,y1=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield qh(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>_1)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return by()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=l1._getInstance(f1()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield d1(),!this.activeServiceWorker)return;this.sender=new $h(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||h1()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qh();return yield J_(t,Wc,"1"),yield X_(t,Wc),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>J_(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>g1(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>X_(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=Zc(s,!1).getAll();return new qr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),v1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Cy=y1;var PM=wy("rcb"),NM=new $r(3e4,6e4);function xy(n,e){return e?An(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Po=class extends Ro{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function w1(n){return r1(n.auth,new Po(n),n.bypassAuthState)}function E1(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),n1(t,new Po(n),n.bypassAuthState)}function I1(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),t1(t,new Po(n),n.bypassAuthState)})}var Yc=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w1;case"linkViaPopup":case"linkViaRedirect":return I1;case"reauthViaPopup":case"reauthViaRedirect":return E1;default:on(this.auth,"internal-error")}}resolve(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var T1=new $r(2e3,1e4);function df(n,e,t){return E(this,null,function*(){if(xt(n.app))return Promise.reject(qt(n,"operation-not-supported-in-this-environment"));let r=Xc(n);kC(n,e,ko);let i=xy(r,t);return new b1(r,"signInViaPopup",e,i).executeNotNull()})}var b1=(()=>{class n extends Yc{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return E(this,null,function*(){let t=yield this.execute();return ee(t,this.auth,"internal-error"),t})}onExecution(){return E(this,null,function*(){Cn(this.filter.length===1,"Popup operations only handle one event");let t=uf();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,T1.get())};t()}}n.currentPopupAction=null;return n})(),S1="pendingRedirect",Lc=new Map,zh=class n extends Yc{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Lc.get(this.auth._key());if(!e){try{let r=(yield A1(this.resolver,this.auth))?yield jn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return jn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,jn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function A1(n,e){return E(this,null,function*(){let t=R1(e),r=x1(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function C1(n,e){Lc.set(n._key(),e)}function x1(n){return An(n._redirectPersistence)}function R1(n){return Vc(S1,n.config.apiKey,n.name)}function k1(n,e,t=!1){return E(this,null,function*(){if(xt(n.app))return Promise.reject(Br(n));let r=Xc(n),i=xy(r,e),o=yield new zh(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var D1=10*60*1e3,Hh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ry(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(qt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}};function Z_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ry({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function P1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ry(n);default:return!1}}function N1(t){return E(this,arguments,function*(n,e={}){return Li(n,"GET","/v1/projects",e)})}var M1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O1=/^https?/;function V1(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield N1(n);for(let t of e)try{if(L1(t))return}catch{}on(n,"unauthorized-domain")})}function L1(n){let e=Mh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!O1.test(t))return!1;if(M1.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var F1=new $r(3e4,6e4);function ey(){let n=sn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function U1(n){return new Promise((e,t)=>{var r,i,s;function o(){ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ey(),t(qt(n,"network-request-failed"))},timeout:F1.get()})}if(!((i=(r=sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=sn().gapi)===null||s===void 0)&&s.load)o();else{let c=wy("iframefcb");return sn()[c]=()=>{gapi.load?o():t(qt(n,"network-request-failed"))},QC(`${YC()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Fc=null,e})}var Fc=null;function j1(n){return Fc=Fc||U1(n),Fc}var B1=new $r(5e3,15e3),$1="__/auth/iframe",q1="emulator/auth/iframe",z1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G1(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Yh(e,q1):`https://${n.config.authDomain}/${$1}`,r={apiKey:e.apiKey,appName:n.name,v:tr},i=H1.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Di(r).slice(1)}`}function W1(n){return E(this,null,function*(){let e=yield j1(n),t=sn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:G1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z1,dontclear:!0},r=>new Promise((i,s)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=qt(n,"network-request-failed"),c=sn().setTimeout(()=>{s(o)},B1.get());function l(){sn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var K1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q1=500,Y1=600,J1="_blank",X1="http://localhost",Jc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Z1(n,e,t,r=Q1,i=Y1){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},K1),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Qe().toLowerCase();t&&(c=fy(d)?J1:t),dy(d)&&(e=e||X1,l.scrollbars="yes");let f=Object.entries(l).reduce((v,[x,N])=>`${v}${x}=${N},`,"");if(zC(d)&&c!=="_self")return ex(e||"",c),new Jc(null);let g=window.open(e||"",c,f);ee(g,n,"popup-blocked");try{g.focus()}catch{}return new Jc(g)}function ex(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var tx="__/auth/handler",nx="emulator/auth/handler",rx=encodeURIComponent("fac");function ty(n,e,t,r,i,s){return E(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:tr,eventId:i};if(e instanceof ko){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",p_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof Gc){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?`#${rx}=${encodeURIComponent(l)}`:"";return`${ix(n)}?${Di(c).slice(1)}${d}`})}function ix({config:n}){return n.emulator?Yh(n,nx):`https://${n.authDomain}/${tx}`}var Nh="webStorageSupport",Gh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lf,this._completeRedirectFn=k1,this._overrideRedirectResult=C1}_openPopup(e,t,r,i){return E(this,null,function*(){var s;Cn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ty(e,t,r,Mh(),i);return Z1(e,o,uf())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield ty(e,t,r,Mh(),i);return u1(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Cn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield W1(e),r=new Hh(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nh,{type:Nh},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Nh];o!==void 0&&t(!!o),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _y()||hy()||tf()}},ky=Gh;var ny="@firebase/auth",ry="1.10.7";var Wh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function sx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ox(n){Bt(new gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yy(n)},d=new jh(r,i,s,l);return JC(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bt(new gt("auth-internal",e=>{let t=Xc(e.getProvider("auth").getImmediate());return(r=>new Wh(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(ny,ry,sx(n)),Ve(ny,ry,"esm2017")}var ax=5*60,cx=lh("authIdTokenMaxAge")||ax,iy=null,lx=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cx)return;let i=t?.token;iy!==i&&(iy=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function hf(n=Fr()){let e=Pi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=rf(n,{popupRedirectResolver:ky,persistence:[Cy,Ty,lf]}),r=lh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=lx(s.toString());af(t,o,()=>o(t.currentUser)),No(t,c=>o(c))}}let i=ah("auth");return i&&sf(t,`http://${i}`),t}function ux(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KC({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=qt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",ux().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ox("Browser");function Ny(n){return new Et(function(e){var t=No(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var My="auth",zr=class{constructor(e){return e}},Mo=class{constructor(){return Mi(My)}};var ff=new _e("angularfire2.auth-instances");function Zx(n,e){let t=Io(My,n,e);return t&&new zr(t)}function eR(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zr(r)}}var tR={provide:Mo,deps:[[new Pt,ff]]},nR={provide:zr,useFactory:Zx,deps:[[new Pt,ff],bn]};function Oy(n,...e){return Ve("angularfire",nr.full,"auth"),$n([nR,tR,{provide:ff,useFactory:eR(n),multi:!0,deps:[ct,It,rr,jr,[new Pt,Oi],...e]}])}var Vy=Le(Ny,!0);var Ly=Le(hf,!0);var Fy=Le(df,!0,2);var Uy=Le(cf,!0,2);var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},By={};var xn,pf;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(T,S,C){for(var w=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)w[fn-2]=arguments[fn];return _.prototype[S].apply(T,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var T=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)T[S]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(S=0;16>S;++S)T[S]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],S=b.g[2];var C=b.g[3],w=_+(C^I&(S^C))+T[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=C+(S^_&(I^S))+T[1]+3905402710&4294967295,C=_+(w<<12&4294967295|w>>>20),w=S+(I^C&(_^I))+T[2]+606105819&4294967295,S=C+(w<<17&4294967295|w>>>15),w=I+(_^S&(C^_))+T[3]+3250441966&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(C^I&(S^C))+T[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=C+(S^_&(I^S))+T[5]+1200080426&4294967295,C=_+(w<<12&4294967295|w>>>20),w=S+(I^C&(_^I))+T[6]+2821735955&4294967295,S=C+(w<<17&4294967295|w>>>15),w=I+(_^S&(C^_))+T[7]+4249261313&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(C^I&(S^C))+T[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=C+(S^_&(I^S))+T[9]+2336552879&4294967295,C=_+(w<<12&4294967295|w>>>20),w=S+(I^C&(_^I))+T[10]+4294925233&4294967295,S=C+(w<<17&4294967295|w>>>15),w=I+(_^S&(C^_))+T[11]+2304563134&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(C^I&(S^C))+T[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=C+(S^_&(I^S))+T[13]+4254626195&4294967295,C=_+(w<<12&4294967295|w>>>20),w=S+(I^C&(_^I))+T[14]+2792965006&4294967295,S=C+(w<<17&4294967295|w>>>15),w=I+(_^S&(C^_))+T[15]+1236535329&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(S^C&(I^S))+T[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=C+(I^S&(_^I))+T[6]+3225465664&4294967295,C=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(C^_))+T[11]+643717713&4294967295,S=C+(w<<14&4294967295|w>>>18),w=I+(C^_&(S^C))+T[0]+3921069994&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^C&(I^S))+T[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=C+(I^S&(_^I))+T[10]+38016083&4294967295,C=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(C^_))+T[15]+3634488961&4294967295,S=C+(w<<14&4294967295|w>>>18),w=I+(C^_&(S^C))+T[4]+3889429448&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^C&(I^S))+T[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=C+(I^S&(_^I))+T[14]+3275163606&4294967295,C=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(C^_))+T[3]+4107603335&4294967295,S=C+(w<<14&4294967295|w>>>18),w=I+(C^_&(S^C))+T[8]+1163531501&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^C&(I^S))+T[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=C+(I^S&(_^I))+T[2]+4243563512&4294967295,C=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(C^_))+T[7]+1735328473&4294967295,S=C+(w<<14&4294967295|w>>>18),w=I+(C^_&(S^C))+T[12]+2368359562&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(I^S^C)+T[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=C+(_^I^S)+T[8]+2272392833&4294967295,C=_+(w<<11&4294967295|w>>>21),w=S+(C^_^I)+T[11]+1839030562&4294967295,S=C+(w<<16&4294967295|w>>>16),w=I+(S^C^_)+T[14]+4259657740&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^C)+T[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=C+(_^I^S)+T[4]+1272893353&4294967295,C=_+(w<<11&4294967295|w>>>21),w=S+(C^_^I)+T[7]+4139469664&4294967295,S=C+(w<<16&4294967295|w>>>16),w=I+(S^C^_)+T[10]+3200236656&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^C)+T[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=C+(_^I^S)+T[0]+3936430074&4294967295,C=_+(w<<11&4294967295|w>>>21),w=S+(C^_^I)+T[3]+3572445317&4294967295,S=C+(w<<16&4294967295|w>>>16),w=I+(S^C^_)+T[6]+76029189&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^C)+T[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=C+(_^I^S)+T[12]+3873151461&4294967295,C=_+(w<<11&4294967295|w>>>21),w=S+(C^_^I)+T[15]+530742520&4294967295,S=C+(w<<16&4294967295|w>>>16),w=I+(S^C^_)+T[2]+3299628645&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(S^(I|~C))+T[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=C+(I^(_|~S))+T[7]+1126891415&4294967295,C=_+(w<<10&4294967295|w>>>22),w=S+(_^(C|~I))+T[14]+2878612391&4294967295,S=C+(w<<15&4294967295|w>>>17),w=I+(C^(S|~_))+T[5]+4237533241&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~C))+T[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=C+(I^(_|~S))+T[3]+2399980690&4294967295,C=_+(w<<10&4294967295|w>>>22),w=S+(_^(C|~I))+T[10]+4293915773&4294967295,S=C+(w<<15&4294967295|w>>>17),w=I+(C^(S|~_))+T[1]+2240044497&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~C))+T[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=C+(I^(_|~S))+T[15]+4264355552&4294967295,C=_+(w<<10&4294967295|w>>>22),w=S+(_^(C|~I))+T[6]+2734768916&4294967295,S=C+(w<<15&4294967295|w>>>17),w=I+(C^(S|~_))+T[13]+1309151649&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~C))+T[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=C+(I^(_|~S))+T[11]+3174756917&4294967295,C=_+(w<<10&4294967295|w>>>22),w=S+(_^(C|~I))+T[2]+718787259&4294967295,S=C+(w<<15&4294967295|w>>>17),w=I+(C^(S|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+S&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,T=this.B,S=this.h,C=0;C<_;){if(S==0)for(;C<=I;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(T[S++]=b.charCodeAt(C++),S==this.blockSize){i(this,T),S=0;break}}else for(;C<_;)if(T[S++]=b[C++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var T=0;32>T;T+=8)b[I++]=this.g[_]>>>T&255;return b};function s(b,_){var I=c;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function o(b,_){this.h=_;for(var I=[],T=!0,S=b.length-1;0<=S;S--){var C=b[S]|0;T&&C==_||(I[S]=C,T=!1)}this.g=I}var c={};function l(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return O(d(-b));for(var _=[],I=1,T=0;b>=I;T++)_[T]=b/I|0,I*=4294967296;return new o(_,0)}function f(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(f(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),T=g,S=0;S<b.length;S+=8){var C=Math.min(8,b.length-S),w=parseInt(b.substring(S,S+C),_);8>C?(C=d(Math.pow(_,C)),T=T.j(C).add(d(w))):(T=T.j(I),T=T.add(d(w)))}return T}var g=l(0),v=l(1),x=l(16777216);n=o.prototype,n.m=function(){if(U(this))return-O(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var T=this.i(I);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N(this))return"0";if(U(this))return"-"+O(this).toString(b);for(var _=d(Math.pow(b,6)),I=this,T="";;){var S=Ie(I,_).g;I=ie(I,S.j(_));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=S,N(I))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function N(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function U(b){return b.h==-1}n.l=function(b){return b=ie(this,b),U(b)?-1:N(b)?0:1};function O(b){for(var _=b.g.length,I=[],T=0;T<_;T++)I[T]=~b.g[T];return new o(I,~b.h).add(v)}n.abs=function(){return U(this)?O(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0,S=0;S<=_;S++){var C=T+(this.i(S)&65535)+(b.i(S)&65535),w=(C>>>16)+(this.i(S)>>>16)+(b.i(S)>>>16);T=w>>>16,C&=65535,w&=65535,I[S]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function ie(b,_){return b.add(O(_))}n.j=function(b){if(N(this)||N(b))return g;if(U(this))return U(b)?O(this).j(O(b)):O(O(this).j(b));if(U(b))return O(this.j(O(b)));if(0>this.l(x)&&0>b.l(x))return d(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],T=0;T<2*_;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<b.g.length;S++){var C=this.i(T)>>>16,w=this.i(T)&65535,fn=b.i(S)>>>16,ws=b.i(S)&65535;I[2*T+2*S]+=w*ws,te(I,2*T+2*S),I[2*T+2*S+1]+=C*ws,te(I,2*T+2*S+1),I[2*T+2*S+1]+=w*fn,te(I,2*T+2*S+1),I[2*T+2*S+2]+=C*fn,te(I,2*T+2*S+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function te(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function ne(b,_){this.g=b,this.h=_}function Ie(b,_){if(N(_))throw Error("division by zero");if(N(b))return new ne(g,g);if(U(b))return _=Ie(O(b),_),new ne(O(_.g),O(_.h));if(U(_))return _=Ie(b,O(_)),new ne(O(_.g),_.h);if(30<b.g.length){if(U(b)||U(_))throw Error("slowDivide_ only works with positive integers.");for(var I=v,T=_;0>=T.l(b);)I=ht(I),T=ht(T);var S=we(I,1),C=we(T,1);for(T=we(T,2),I=we(I,2);!N(T);){var w=C.add(T);0>=w.l(b)&&(S=S.add(I),C=w),T=we(T,1),I=we(I,1)}return _=ie(b,S.j(_)),new ne(S,_)}for(S=g;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=d(I),w=C.j(_);U(w)||0<w.l(b);)I-=T,C=d(I),w=C.j(_);N(C)&&(C=v),S=S.add(C),b=ie(b,w)}return new ne(S,b)}n.A=function(b){return Ie(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function ht(b){for(var _=b.g.length+1,I=[],T=0;T<_;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function we(b,_){var I=_>>5;_%=32;for(var T=b.g.length-I,S=[],C=0;C<T;C++)S[C]=0<_?b.i(C+I)>>>_|b.i(C+I+1)<<32-_:b.i(C+I);return new o(S,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pf=By.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,xn=By.Integer=o}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rn={};var mf,iR,Fi,gf,Oo,tl,vf,_f,yf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var A=a[p];if(!(A in h))break e;h=h[A]}a=a[a.length-1],p=h[a],u=u(p),u!=p&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,p=!1,A={next:function(){if(!p&&h<a.length){var k=h++;return{value:u(k,a[k]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function g(a,u,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function v(a,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function x(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function N(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,A,k){for(var V=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)V[Te-2]=arguments[Te];return u.prototype[A].apply(p,V)}}function U(a){let u=a.length;if(0<u){let h=Array(u);for(let p=0;p<u;p++)h[p]=a[p];return h}return[]}function O(a,u){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(l(p)){let A=a.length||0,k=p.length||0;a.length=A+k;for(let V=0;V<k;V++)a[A+V]=p[V]}else a.push(p)}}class ie{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function te(a){return/^[\s\xa0]*$/.test(a)}function ne(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ie(a){return Ie[" "](a),a}Ie[" "]=function(){};var ht=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function we(a,u,h){for(let p in a)u.call(h,a[p],p,a)}function b(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function _(a){let u={};for(let h in a)u[h]=a[h];return u}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,u){let h,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(h in p)a[h]=p[h];for(let k=0;k<I.length;k++)h=I[k],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function S(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function w(){var a=xu;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class fn{constructor(){this.h=this.g=null}add(u,h){let p=ws.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var ws=new ie(()=>new eT,a=>a.reset());class eT{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Es,Is=!1,xu=new fn,Qm=()=>{let a=c.Promise.resolve(void 0);Es=()=>{a.then(tT)}};var tT=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(h){C(h)}var u=ws;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Is=!1};function Vn(){this.s=this.s,this.C=this.C}Vn.prototype.s=!1,Vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var nT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Ts(a,u){if(tt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(ht){e:{try{Ie(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:rT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ts.aa.h.call(this)}}N(Ts,tt);var rT={2:"touch",3:"pen",4:"mouse"};Ts.prototype.h=function(){Ts.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),iT=0;function sT(a,u,h,p,A){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=A,this.key=++iT,this.da=this.fa=!1}function pa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ma(a){this.src=a,this.g={},this.h=0}ma.prototype.add=function(a,u,h,p,A){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var V=ku(a,u,p,A);return-1<V?(u=a[V],h||(u.fa=!1)):(u=new sT(u,this.src,k,!!p,A),u.fa=h,a.push(u)),u};function Ru(a,u){var h=u.type;if(h in a.g){var p=a.g[h],A=Array.prototype.indexOf.call(p,u,void 0),k;(k=0<=A)&&Array.prototype.splice.call(p,A,1),k&&(pa(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ku(a,u,h,p){for(var A=0;A<a.length;++A){var k=a[A];if(!k.da&&k.listener==u&&k.capture==!!h&&k.ha==p)return A}return-1}var Du="closure_lm_"+(1e6*Math.random()|0),Pu={};function Ym(a,u,h,p,A){if(p&&p.once)return Xm(a,u,h,p,A);if(Array.isArray(u)){for(var k=0;k<u.length;k++)Ym(a,u[k],h,p,A);return null}return h=Vu(h),a&&a[bs]?a.K(u,h,d(p)?!!p.capture:!!p,A):Jm(a,u,h,!1,p,A)}function Jm(a,u,h,p,A,k){if(!u)throw Error("Invalid event type");var V=d(A)?!!A.capture:!!A,Te=Mu(a);if(Te||(a[Du]=Te=new ma(a)),h=Te.add(u,h,p,V,k),h.proxy)return h;if(p=oT(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)nT||(A=V),A===void 0&&(A=!1),a.addEventListener(u.toString(),p,A);else if(a.attachEvent)a.attachEvent(eg(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function oT(){function a(h){return u.call(a.src,a.listener,h)}let u=aT;return a}function Xm(a,u,h,p,A){if(Array.isArray(u)){for(var k=0;k<u.length;k++)Xm(a,u[k],h,p,A);return null}return h=Vu(h),a&&a[bs]?a.L(u,h,d(p)?!!p.capture:!!p,A):Jm(a,u,h,!0,p,A)}function Zm(a,u,h,p,A){if(Array.isArray(u))for(var k=0;k<u.length;k++)Zm(a,u[k],h,p,A);else p=d(p)?!!p.capture:!!p,h=Vu(h),a&&a[bs]?(a=a.i,u=String(u).toString(),u in a.g&&(k=a.g[u],h=ku(k,h,p,A),-1<h&&(pa(k[h]),Array.prototype.splice.call(k,h,1),k.length==0&&(delete a.g[u],a.h--)))):a&&(a=Mu(a))&&(u=a.g[u.toString()],a=-1,u&&(a=ku(u,h,p,A)),(h=-1<a?u[a]:null)&&Nu(h))}function Nu(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[bs])Ru(u.i,a);else{var h=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(h,p,a.capture):u.detachEvent?u.detachEvent(eg(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=Mu(u))?(Ru(h,a),h.h==0&&(h.src=null,u[Du]=null)):pa(a)}}}function eg(a){return a in Pu?Pu[a]:Pu[a]="on"+a}function aT(a,u){if(a.da)a=!0;else{u=new Ts(u,this);var h=a.listener,p=a.ha||a.src;a.fa&&Nu(a),a=h.call(p,u)}return a}function Mu(a){return a=a[Du],a instanceof ma?a:null}var Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vu(a){return typeof a=="function"?a:(a[Ou]||(a[Ou]=function(u){return a.handleEvent(u)}),a[Ou])}function nt(){Vn.call(this),this.i=new ma(this),this.M=this,this.F=null}N(nt,Vn),nt.prototype[bs]=!0,nt.prototype.removeEventListener=function(a,u,h,p){Zm(this,a,u,h,p)};function ft(a,u){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new tt(u,a);else if(u instanceof tt)u.target=u.target||a;else{var A=u;u=new tt(p,a),T(u,A)}if(A=!0,h)for(var k=h.length-1;0<=k;k--){var V=u.g=h[k];A=ga(V,p,!0,u)&&A}if(V=u.g=a,A=ga(V,p,!0,u)&&A,A=ga(V,p,!1,u)&&A,h)for(k=0;k<h.length;k++)V=u.g=h[k],A=ga(V,p,!1,u)&&A}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],p=0;p<h.length;p++)pa(h[p]);delete a.g[u],a.h--}}this.F=null},nt.prototype.K=function(a,u,h,p){return this.i.add(String(a),u,!1,h,p)},nt.prototype.L=function(a,u,h,p){return this.i.add(String(a),u,!0,h,p)};function ga(a,u,h,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,k=0;k<u.length;++k){var V=u[k];if(V&&!V.da&&V.capture==h){var Te=V.listener,Xe=V.ha||V.src;V.fa&&Ru(a.i,V),A=Te.call(Xe,p)!==!1&&A}}return A&&!p.defaultPrevented}function tg(a,u,h){if(typeof a=="function")h&&(a=v(a,h));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function ng(a){a.g=tg(()=>{a.g=null,a.i&&(a.i=!1,ng(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class cT extends Vn{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ng(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(a){Vn.call(this),this.h=a,this.g={}}N(Ss,Vn);var rg=[];function ig(a){we(a.g,function(u,h){this.g.hasOwnProperty(h)&&Nu(u)},a),a.g={}}Ss.prototype.N=function(){Ss.aa.N.call(this),ig(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lu=c.JSON.stringify,lT=c.JSON.parse,uT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Fu(){}Fu.prototype.h=null;function sg(a){return a.h||(a.h=a.i())}function og(){}var As={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uu(){tt.call(this,"d")}N(Uu,tt);function ju(){tt.call(this,"c")}N(ju,tt);var yr={},ag=null;function va(){return ag=ag||new nt}yr.La="serverreachability";function cg(a){tt.call(this,yr.La,a)}N(cg,tt);function Cs(a){let u=va();ft(u,new cg(u))}yr.STAT_EVENT="statevent";function lg(a,u){tt.call(this,yr.STAT_EVENT,a),this.stat=u}N(lg,tt);function pt(a){let u=va();ft(u,new lg(u,a))}yr.Ma="timingevent";function ug(a,u){tt.call(this,yr.Ma,a),this.size=u}N(ug,tt);function xs(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function dT(a,u,h,p,A,k){a.info(function(){if(a.g)if(k)for(var V="",Te=k.split("&"),Xe=0;Xe<Te.length;Xe++){var ge=Te[Xe].split("=");if(1<ge.length){var rt=ge[0];ge=ge[1];var it=rt.split("_");V=2<=it.length&&it[1]=="type"?V+(rt+"="+ge+"&"):V+(rt+"=redacted&")}}else V=null;else V=k;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+u+`
`+h+`
`+V})}function hT(a,u,h,p,A,k,V){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+u+`
`+h+`
`+k+" "+V})}function ai(a,u,h,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+pT(a,h)+(p?" "+p:"")})}function fT(a,u){a.info(function(){return"TIMEOUT: "+u})}Rs.prototype.info=function(){};function pT(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(var V=1;V<A.length;V++)A[V]=""}}}}return Lu(h)}catch{return u}}var _a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bu;function ya(){}N(ya,Fu),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},Bu=new ya;function Ln(a,u,h,p){this.j=a,this.i=u,this.l=h,this.R=p||1,this.U=new Ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hg}function hg(){this.i=null,this.g="",this.h=!1}var fg={},$u={};function qu(a,u,h){a.L=1,a.v=Ta(pn(u)),a.m=h,a.P=!0,pg(a,null)}function pg(a,u){a.F=Date.now(),wa(a),a.A=pn(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),xg(h.i,"t",p),a.C=0,h=a.j.J,a.h=new hg,a.g=Gg(a.j,h?u:null,!a.m),0<a.O&&(a.M=new cT(v(a.Y,a,a.g),a.O)),u=a.U,h=a.g,p=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(rg[0]=A.toString()),A=rg);for(var k=0;k<A.length;k++){var V=Ym(h,A[k],p||u.handleEvent,!1,u.h||u);if(!V)break;u.g[V.key]=V}u=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Cs(),dT(a.i,a.u,a.A,a.l,a.R,a.m)}Ln.prototype.ca=function(a){a=a.target;let u=this.M;u&&mn(a)==3?u.j():this.Y(a)},Ln.prototype.Y=function(a){try{if(a==this.g)e:{let it=mn(this.g);var u=this.g.Ba();let ui=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Og(this.g)))){this.J||it!=4||u==7||(u==8||0>=ui?Cs(3):Cs(2)),zu(this);var h=this.g.Z();this.X=h;t:if(mg(this)){var p=Og(this.g);a="";var A=p.length,k=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),ks(this);var V="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(k&&u==A-1)});p.length=0,this.h.g+=a,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=h==200,hT(this.i,this.u,this.A,this.l,this.R,it,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Xe=this.g;if((Te=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Te)){var ge=Te;break t}}ge=null}if(h=ge)ai(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hu(this,h);else{this.o=!1,this.s=3,pt(12),wr(this),ks(this);break e}}if(this.P){h=!0;let Lt;for(;!this.J&&this.C<V.length;)if(Lt=mT(this,V),Lt==$u){it==4&&(this.s=4,pt(14),h=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==fg){this.s=4,pt(15),ai(this.i,this.l,V,"[Invalid Chunk]"),h=!1;break}else ai(this.i,this.l,Lt,null),Hu(this,Lt);if(mg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||V.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)ai(this.i,this.l,V,"[Invalid Chunked Response]"),wr(this),ks(this);else if(0<V.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Ju(rt),rt.M=!0,pt(11))}}else ai(this.i,this.l,V,null),Hu(this,V);it==4&&wr(this),this.o&&!this.J&&(it==4?$g(this.j,this):(this.o=!1,wa(this)))}else PT(this.g),h==400&&0<V.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),wr(this),ks(this)}}}catch{}finally{}};function mg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function mT(a,u){var h=a.C,p=u.indexOf(`
`,h);return p==-1?$u:(h=Number(u.substring(h,p)),isNaN(h)?fg:(p+=1,p+h>u.length?$u:(u=u.slice(p,p+h),a.C=p+h,u)))}Ln.prototype.cancel=function(){this.J=!0,wr(this)};function wa(a){a.S=Date.now()+a.I,gg(a,a.I)}function gg(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=xs(v(a.ba,a),u)}function zu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Ln.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(fT(this.i,this.A),this.L!=2&&(Cs(),pt(17)),wr(this),this.s=2,ks(this)):gg(this,this.S-a)};function ks(a){a.j.G==0||a.J||$g(a.j,a)}function wr(a){zu(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,ig(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Hu(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||Gu(h.h,a))){if(!a.K&&Gu(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)xa(h),Aa(h);else break e;Yu(h),pt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=xs(v(h.Za,h),6e3));if(1>=yg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Ir(h,11)}else if((a.K||h.g==a)&&xa(h),!te(u))for(A=h.Da.g.parse(u),u=0;u<A.length;u++){let ge=A[u];if(h.T=ge[0],ge=ge[1],h.G==2)if(ge[0]=="c"){h.K=ge[1],h.ia=ge[2];let rt=ge[3];rt!=null&&(h.la=rt,h.j.info("VER="+h.la));let it=ge[4];it!=null&&(h.Aa=it,h.j.info("SVER="+h.Aa));let ui=ge[5];ui!=null&&typeof ui=="number"&&0<ui&&(p=1.5*ui,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Lt=a.g;if(Lt){let ka=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var k=p.h;k.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Wu(k,k.h),k.h=null))}if(p.D){let Xu=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(p.ya=Xu,Ae(p.I,p.D,Xu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var V=a;if(p.qa=Hg(p,p.J?p.ia:null,p.W),V.K){wg(p.h,V);var Te=V,Xe=p.L;Xe&&(Te.I=Xe),Te.B&&(zu(Te),wa(Te)),p.g=V}else jg(p);0<h.i.length&&Ca(h)}else ge[0]!="stop"&&ge[0]!="close"||Ir(h,7);else h.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Ir(h,7):Qu(h):ge[0]!="noop"&&h.l&&h.l.ta(ge),h.v=0)}}Cs(4)}catch{}}var gT=class{constructor(a,u){this.g=a,this.map=u}};function vg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _g(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function yg(a){return a.h?1:a.g?a.g.size:0}function Gu(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Wu(a,u){a.g?a.g.add(u):a.h=u}function wg(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}vg.prototype.cancel=function(){if(this.i=Eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Eg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return U(a.i)}function vT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,p=0;p<h;p++)u.push(a[p]);return u}u=[],h=0;for(p in a)u[h++]=a[p];return u}function _T(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let p in a)u[h++]=p;return u}}}function Ig(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=_T(a),p=vT(a),A=p.length,k=0;k<A;k++)u.call(void 0,p[k],h&&h[k],a)}var Tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),A=null;if(0<=p){var k=a[h].substring(0,p);A=a[h].substring(p+1)}else k=a[h];u(k,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Er(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Er){this.h=a.h,Ea(this,a.j),this.o=a.o,this.g=a.g,Ia(this,a.s),this.l=a.l;var u=a.i,h=new Ns;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),bg(this,h),this.m=a.m}else a&&(u=String(a).match(Tg))?(this.h=!1,Ea(this,u[1]||"",!0),this.o=Ds(u[2]||""),this.g=Ds(u[3]||"",!0),Ia(this,u[4]),this.l=Ds(u[5]||"",!0),bg(this,u[6]||"",!0),this.m=Ds(u[7]||"")):(this.h=!1,this.i=new Ns(null,this.h))}Er.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Ps(u,Sg,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Ps(u,Sg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ps(h,h.charAt(0)=="/"?IT:ET,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ps(h,bT)),a.join("")};function pn(a){return new Er(a)}function Ea(a,u,h){a.j=h?Ds(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Ia(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function bg(a,u,h){u instanceof Ns?(a.i=u,ST(a.i,a.h)):(h||(u=Ps(u,TT)),a.i=new Ns(u,a.h))}function Ae(a,u,h){a.i.set(u,h)}function Ta(a){return Ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ds(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ps(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,wT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sg=/[#\/\?@]/g,ET=/[#\?:]/g,IT=/[#\?]/g,TT=/[#\?@]/g,bT=/#/g;function Ns(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&yT(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Ns.prototype,n.add=function(a,u){Fn(this),this.i=null,a=ci(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function Ag(a,u){Fn(a),u=ci(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Cg(a,u){return Fn(a),u=ci(a,u),a.g.has(u)}n.forEach=function(a,u){Fn(this),this.g.forEach(function(h,p){h.forEach(function(A){a.call(u,A,p,this)},this)},this)},n.na=function(){Fn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){let A=a[p];for(let k=0;k<A.length;k++)h.push(u[p])}return h},n.V=function(a){Fn(this);let u=[];if(typeof a=="string")Cg(this,a)&&(u=u.concat(this.g.get(ci(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return Fn(this),this.i=null,a=ci(this,a),Cg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function xg(a,u,h){Ag(a,u),0<h.length&&(a.i=null,a.g.set(ci(a,u),U(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];let k=encodeURIComponent(String(p)),V=this.V(p);for(p=0;p<V.length;p++){var A=k;V[p]!==""&&(A+="="+encodeURIComponent(String(V[p]))),a.push(A)}}return this.i=a.join("&")};function ci(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function ST(a,u){u&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(h,p){var A=p.toLowerCase();p!=A&&(Ag(this,p),xg(this,A,h))},a)),a.j=u}function AT(a,u){let h=new Rs;if(c.Image){let p=new Image;p.onload=x(Un,h,"TestLoadImage: loaded",!0,u,p),p.onerror=x(Un,h,"TestLoadImage: error",!1,u,p),p.onabort=x(Un,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=x(Un,h,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function CT(a,u){let h=new Rs,p=new AbortController,A=setTimeout(()=>{p.abort(),Un(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(k=>{clearTimeout(A),k.ok?Un(h,"TestPingServer: ok",!0,u):Un(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),Un(h,"TestPingServer: error",!1,u)})}function Un(a,u,h,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(h)}catch{}}function xT(){this.g=new uT}function RT(a,u,h){let p=h||"";try{Ig(a,function(A,k){let V=A;d(A)&&(V=Lu(A)),u.push(p+k+"="+encodeURIComponent(V))})}catch(A){throw u.push(p+"type="+encodeURIComponent("_badmap")),A}}function Ms(a){this.l=a.Ub||null,this.j=a.eb||!1}N(Ms,Fu),Ms.prototype.g=function(){return new ba(this.l,this.j)},Ms.prototype.i=function(a){return function(){return a}}({});function ba(a,u){nt.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ba,nt),n=ba.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Vs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Os(this):Vs(this),this.readyState==3&&Rg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Os(this))},n.Qa=function(a){this.g&&(this.response=a,Os(this))},n.ga=function(){this.g&&Os(this)};function Os(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vs(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function Vs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kg(a){let u="";return we(a,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Ku(a,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=kg(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ae(a,u,h))}function Ne(a){nt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ne,nt);var kT=/^https?$/i,DT=["POST","PUT"];n=Ne.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bu.g(),this.v=this.o?sg(this.o):sg(Bu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(k){Dg(this,k);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)h.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let k of p.keys())h.set(k,p.get(k));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(k=>k.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(DT,u,void 0))||p||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,V]of h)this.g.setRequestHeader(k,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mg(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){Dg(this,k)}};function Dg(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Pg(a),Sa(a)}function Pg(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),Sa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),Ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ng(this):this.bb())},n.bb=function(){Ng(this)};function Ng(a){if(a.h&&typeof o<"u"&&(!a.v[1]||mn(a)!=4||a.Z()!=2)){if(a.u&&mn(a)==4)tg(a.Ea,0,a);else if(ft(a,"readystatechange"),mn(a)==4){a.h=!1;try{let V=a.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=V===0){var A=String(a.D).match(Tg)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!kT.test(A?A.toLowerCase():"")}h=p}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var k=2<mn(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",Pg(a)}}finally{Sa(a)}}}}function Sa(a,u){if(a.g){Mg(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ft(a,"ready");try{h.onreadystatechange=p}catch{}}}function Mg(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function mn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),lT(u)}};function Og(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function PT(a){let u={};a=(a.g&&2<=mn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(te(a[p]))continue;var h=S(a[p]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let k=u[A]||[];u[A]=k,k.push(h)}b(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function Vg(a){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,a),this.cb=Ls("retryDelaySeedMs",1e4,a),this.Wa=Ls("forwardChannelMaxRetries",2,a),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new vg(a&&a.concurrentRequestLimit),this.Da=new xT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vg.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,p){pt(0),this.W=a,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Hg(this,null,this.W),Ca(this)};function Qu(a){if(Lg(a),a.G==3){var u=a.U++,h=pn(a.I);if(Ae(h,"SID",a.K),Ae(h,"RID",u),Ae(h,"TYPE","terminate"),Fs(a,h),u=new Ln(a,a.j,u),u.L=2,u.v=Ta(pn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=Gg(u.j,null),u.g.ea(u.v)),u.F=Date.now(),wa(u)}zg(a)}function Aa(a){a.g&&(Ju(a),a.g.cancel(),a.g=null)}function Lg(a){Aa(a),a.u&&(c.clearTimeout(a.u),a.u=null),xa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ca(a){if(!_g(a.h)&&!a.s){a.s=!0;var u=a.Ga;Es||Qm(),Is||(Es(),Is=!0),xu.add(u,a),a.B=0}}function NT(a,u){return yg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=xs(v(a.Ga,a,u),qg(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Ln(this,this.j,a),k=this.o;if(this.S&&(k?(k=_(k),T(k,this.S)):k=this.S),this.m!==null||this.O||(A.H=k,k=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Ug(this,A,u),h=pn(this.I),Ae(h,"RID",a),Ae(h,"CVER",22),this.D&&Ae(h,"X-HTTP-Session-Id",this.D),Fs(this,h),k&&(this.O?u="headers="+encodeURIComponent(String(kg(k)))+"&"+u:this.m&&Ku(h,this.m,k)),Wu(this.h,A),this.Ua&&Ae(h,"TYPE","init"),this.P?(Ae(h,"$req",u),Ae(h,"SID","null"),A.T=!0,qu(A,h,null)):qu(A,h,u),this.G=2}}else this.G==3&&(a?Fg(this,a):this.i.length==0||_g(this.h)||Fg(this))};function Fg(a,u){var h;u?h=u.l:h=a.U++;let p=pn(a.I);Ae(p,"SID",a.K),Ae(p,"RID",h),Ae(p,"AID",a.T),Fs(a,p),a.m&&a.o&&Ku(p,a.m,a.o),h=new Ln(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Ug(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Wu(a.h,h),qu(h,p,u)}function Fs(a,u){a.H&&we(a.H,function(h,p){Ae(u,p,h)}),a.l&&Ig({},function(h,p){Ae(u,p,h)})}function Ug(a,u,h){h=Math.min(a.i.length,h);var p=a.l?v(a.l.Na,a.l,a):null;e:{var A=a.i;let k=-1;for(;;){let V=["count="+h];k==-1?0<h?(k=A[0].g,V.push("ofs="+k)):k=0:V.push("ofs="+k);let Te=!0;for(let Xe=0;Xe<h;Xe++){let ge=A[Xe].g,rt=A[Xe].map;if(ge-=k,0>ge)k=Math.max(0,A[Xe].g-100),Te=!1;else try{RT(rt,V,"req"+ge+"_")}catch{p&&p(rt)}}if(Te){p=V.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,p}function jg(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Es||Qm(),Is||(Es(),Is=!0),xu.add(u,a),a.v=0}}function Yu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=xs(v(a.Fa,a),qg(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Bg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=xs(v(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Aa(this),Bg(this))};function Ju(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Bg(a){a.g=new Ln(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=pn(a.qa);Ae(u,"RID","rpc"),Ae(u,"SID",a.K),Ae(u,"AID",a.T),Ae(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ae(u,"TO",a.ja),Ae(u,"TYPE","xmlhttp"),Fs(a,u),a.m&&a.o&&Ku(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ta(pn(u)),h.m=null,h.P=!0,pg(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Aa(this),Yu(this),pt(19))};function xa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function $g(a,u){var h=null;if(a.g==u){xa(a),Ju(a),a.g=null;var p=2}else if(Gu(a.h,u))h=u.D,wg(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;p=va(),ft(p,new ug(p,h)),Ca(a)}else jg(a);else if(A=u.s,A==3||A==0&&0<u.X||!(p==1&&NT(a,u)||p==2&&Yu(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),A){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function qg(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Ir(a,u){if(a.j.info("Error code "+u),u==2){var h=v(a.fb,a),p=a.Xa;let A=!p;p=new Er(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ea(p,"https"),Ta(p),A?AT(p.toString(),h):CT(p.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(u),zg(a),Lg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function zg(a){if(a.G=0,a.ka=[],a.l){let u=Eg(a.h);(u.length!=0||a.i.length!=0)&&(O(a.ka,u),O(a.ka,a.i),a.h.i.length=0,U(a.i),a.i.length=0),a.l.ra()}}function Hg(a,u,h){var p=h instanceof Er?pn(h):new Er(h);if(p.g!="")u&&(p.g=u+"."+p.g),Ia(p,p.s);else{var A=c.location;p=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var k=new Er(null);p&&Ea(k,p),u&&(k.g=u),A&&Ia(k,A),h&&(k.l=h),p=k}return h=a.D,u=a.ya,h&&u&&Ae(p,h,u),Ae(p,"VER",a.la),Fs(a,p),p}function Gg(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Ne(new Ms({eb:h})):new Ne(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wg(){}n=Wg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ra(){}Ra.prototype.g=function(a,u){return new wt(a,u)};function wt(a,u){nt.call(this),this.g=new Vg(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!te(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!te(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new li(this)}N(wt,nt),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Qu(this.g)},wt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Lu(a),a=h);u.i.push(new gT(u.Ya++,a)),u.G==3&&Ca(u)},wt.prototype.N=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,wt.aa.N.call(this)};function Kg(a){Uu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}N(Kg,Uu);function Qg(){ju.call(this),this.status=1}N(Qg,ju);function li(a){this.g=a}N(li,Wg),li.prototype.ua=function(){ft(this.g,"a")},li.prototype.ta=function(a){ft(this.g,new Kg(a))},li.prototype.sa=function(a){ft(this.g,new Qg)},li.prototype.ra=function(){ft(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,yf=Rn.createWebChannelTransport=function(){return new Ra},_f=Rn.getStatEventTarget=function(){return va()},vf=Rn.Event=yr,tl=Rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,Oo=Rn.ErrorCode=_a,dg.COMPLETE="complete",gf=Rn.EventType=dg,og.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Fi=Rn.WebChannel=og,iR=Rn.FetchXmlHttpFactory=Ms,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,mf=Rn.XhrIo=Ne}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});var $y="@firebase/firestore",qy="4.7.17";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var ss="11.9.0";var Kr=new nn("@firebase/firestore");function Ui(){return Kr.logLevel}function B(n,...e){if(Kr.logLevel<=he.DEBUG){let t=e.map(lm);Kr.debug(`Firestore (${ss}): ${n}`,...t)}}function kn(n,...e){if(Kr.logLevel<=he.ERROR){let t=e.map(lm);Kr.error(`Firestore (${ss}): ${n}`,...t)}}function Gi(n,...e){if(Kr.logLevel<=he.WARN){let t=e.map(lm);Kr.warn(`Firestore (${ss}): ${n}`,...t)}}function lm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Ow(n,r,t)}function Ow(n,e,t){let r=`FIRESTORE (${ss}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw kn(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Ow(e,i,r)}function oe(n,e){return n}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Ct{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var cl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ye.UNAUTHENTICATED))}shutdown(){}},Af=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Cf=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new cl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Ye(e)}},xf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Rf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xf(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ll=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kf=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ll(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ll(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Vw(){return new TextEncoder}var ul=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=sR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function Df(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ue(r,i);{let s=Vw(),o=oR(s.encode(zy(n,t)),s.encode(zy(e,t)));return o!==0?o:ue(r,i)}}t+=r>65535?2:1}return ue(n.length,e.length)}function zy(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function oR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ue(n[t],e[t]);return ue(n.length,e.length)}function Wi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Hy=-62135596800,Gy=1e6,et=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Gy);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hy)throw new j(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gy}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new et(0,0))}static max(){return new n(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wy="__name__",dl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Df(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xn.fromString(e.substring(4,e.length-2))}},Pe=class n extends dl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},aR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kt=class n extends dl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return aR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wy}static keyField(){return new n([Wy])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new j(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new j(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};var Bo=-1,Pf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Pf.UNKNOWN_ID=-1;function cR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new Qr(i,Q.empty(),e)}function lR(n){return new Qr(n.readTime,n.key,Bo)}var Qr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Q.empty(),Bo)}static max(){return new n(ae.max(),Q.empty(),Bo)}};function uR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var dR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function os(n){return E(this,null,function*(){if(n.code!==D.FAILED_PRECONDITION||n.message!==dR)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function hR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function as(n){return n.name==="IndexedDbTransactionError"}var um=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),dm=-1;function Hl(n){return n==null}function $o(n){return n===0&&1/n==-1/0}function fR(n){return typeof n=="number"&&Number.isInteger(n)&&!$o(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Lw="";function pR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ky(e)),e=mR(n.get(t),e);return Ky(e)}function mR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Lw:t+="";break;default:t+=s}}return t}function Ky(n){return n+Lw+""}var gR="remoteDocuments",Fw="owner";var Uw="mutationQueues";var jw="mutations";var Bw="documentMutations",vR="remoteDocumentsV14";var $w="remoteDocumentGlobal";var qw="targets";var zw="targetDocuments";var Hw="targetGlobal",Gw="collectionParents";var Ww="clientMetadata";var Kw="bundles";var Qw="namedQueries";var _R="indexConfiguration";var yR="indexState";var wR="indexEntries";var Yw="documentOverlays";var ER="globals";var IR=[Uw,jw,Bw,gR,qw,Fw,Hw,zw,Ww,$w,Gw,Kw,Qw],UO=[...IR,Yw],TR=[Uw,jw,Bw,vR,qw,Fw,Hw,zw,Ww,$w,Gw,Kw,Qw,Yw],bR=TR,SR=[...bR,_R,yR,wR];var jO=[...SR,ER];function Qy(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qi(this.root,e,this.comparator,!1)}getReverseIterator(){return new qi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qi(this.root,e,this.comparator,!0)}},qi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},an=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hl(this.data.getIterator())}getIteratorFrom(e){return new hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},hl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ot=class n{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Je(kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var fl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dn(n){if(ye(!!n,39018),typeof n=="string"){let e=0,t=AR.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pn(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}var Xw="server_timestamp",Zw="__type__",eE="__previous_value__",tE="__local_write_time__";function hm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zw])===null||t===void 0?void 0:t.stringValue)===Xw}function Gl(n){let e=n.mapValue.fields[eE];return hm(e)?Gl(e):e}function qo(n){let e=Dn(n.mapValue.fields[tE].timestampValue);return new et(e.seconds,e.nanos)}var Mf=class{constructor(e,t,r,i,s,o,c,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=f}},pl="(default)",ml=class n{constructor(e,t){this.projectId=e,this.database=t||pl}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===pl}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fm="__type__",nE="__max__",nl={mapValue:{fields:{__type__:{stringValue:nE}}}},pm="__vector__",Ki="value";function cr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hm(n)?4:iE(n)?9007199254740991:rE(n)?10:11:X(28295,{value:n})}function un(n,e){if(n===e)return!0;let t=cr(n);if(t!==cr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qo(n).isEqual(qo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Dn(i.timestampValue),c=Dn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Pn(i.bytesValue).isEqual(Pn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ke(i.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ke(i.integerValue)===ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ke(i.doubleValue),c=ke(s.doubleValue);return o===c?$o(o)===$o(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Wi(n.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Qy(o)!==Qy(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!un(o[l],c[l])))return!1;return!0}(n,e);default:return X(52216,{left:n})}}function zo(n,e){return(n.values||[]).find(t=>un(t,e))!==void 0}function Qi(n,e){if(n===e)return 0;let t=cr(n),r=cr(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=ke(s.integerValue||s.doubleValue),l=ke(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Yy(n.timestampValue,e.timestampValue);case 4:return Yy(qo(n),qo(e));case 5:return Df(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Pn(s),l=Pn(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=ue(c[d],l[d]);if(f!==0)return f}return ue(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ue(ke(s.latitude),ke(o.latitude));return c!==0?c:ue(ke(s.longitude),ke(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Jy(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,f;let g=s.fields||{},v=o.fields||{},x=(c=g[Ki])===null||c===void 0?void 0:c.arrayValue,N=(l=v[Ki])===null||l===void 0?void 0:l.arrayValue,U=ue(((d=x?.values)===null||d===void 0?void 0:d.length)||0,((f=N?.values)===null||f===void 0?void 0:f.length)||0);return U!==0?U:Jy(x,N)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===nl.mapValue&&o===nl.mapValue)return 0;if(s===nl.mapValue)return 1;if(o===nl.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){let v=Df(l[g],f[g]);if(v!==0)return v;let x=Qi(c[l[g]],d[f[g]]);if(x!==0)return x}return ue(l.length,f.length)}(n.mapValue,e.mapValue);default:throw X(23264,{Pe:t})}}function Yy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=Dn(n),r=Dn(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function Jy(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Qi(t[i],r[i]);if(s)return s}return ue(t.length,r.length)}function Yi(n){return Of(n)}function Of(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Dn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Of(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Of(t.fields[o])}`;return i+"}"}(n.mapValue):X(61005,{value:n})}function sl(n){switch(cr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Gl(n);return e?16+sl(e):16;case 5:return 2*n.stringValue.length;case 6:return Pn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+sl(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return fr(r.fields,(s,o)=>{i+=s.length+sl(o)}),i}(n.mapValue);default:throw X(13486,{value:n})}}function Xy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vf(n){return!!n&&"integerValue"in n}function mm(n){return!!n&&"arrayValue"in n}function Zy(n){return!!n&&"nullValue"in n}function ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ol(n){return!!n&&"mapValue"in n}function rE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fm])===null||t===void 0?void 0:t.stringValue)===pm}function Lo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nE}var $O={mapValue:{fields:{[fm]:{stringValue:pm},[Ki]:{arrayValue:{}}}}};var Rt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ol(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(t)}setAll(e){let t=kt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Lo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ol(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Lo(this.value))}};function sE(n){let e=[];return fr(n.fields,(t,r)=>{let i=new kt([t]);if(ol(r)){let s=sE(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}var Ht=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),Rt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),Rt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),Rt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ji=class{constructor(e,t){this.position=e,this.inclusive=t}};function tw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),t.key):r=Qi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!un(n.position[t],e.position[t]))return!1;return!0}var Yr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function CR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gl=class{},$e=class n extends gl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ff(e,t,r):t==="array-contains"?new Bf(e,r):t==="in"?new $f(e,r):t==="not-in"?new qf(e,r):t==="array-contains-any"?new zf(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Uf(e,r):new jf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qi(t,this.value)):t!==null&&cr(this.value)===cr(t)&&this.matchesComparison(Qi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gt=class n extends gl{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return oE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function oE(n){return n.op==="and"}function aE(n){return xR(n)&&oE(n)}function xR(n){for(let e of n.filters)if(e instanceof Gt)return!1;return!0}function Lf(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+Yi(n.value);if(aE(n))return n.filters.map(e=>Lf(e)).join(",");{let e=n.filters.map(t=>Lf(t)).join(",");return`${n.op}(${e})`}}function cE(n,e){return n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(n,e):n instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&cE(o,i.filters[c]),!0):!1}(n,e):void X(19439)}function lE(n){return n instanceof $e?function(t){return`${t.field.canonicalString()} ${t.op} ${Yi(t.value)}`}(n):n instanceof Gt?function(t){return t.op.toString()+" {"+t.getFilters().map(lE).join(" ,")+"}"}(n):"Filter"}var Ff=class extends $e{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},Uf=class extends $e{constructor(e,t){super(e,"in",t),this.keys=uE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jf=class extends $e{constructor(e,t){super(e,"not-in",t),this.keys=uE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function uE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var Bf=class extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mm(t)&&zo(t.arrayValue,this.value)}},$f=class extends $e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zo(this.value.arrayValue,t)}},qf=class extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zo(this.value.arrayValue,t)}},zf=class extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zo(this.value.arrayValue,r))}};var Hf=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Ie=null}};function rw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Hf(n,e,t,r,i,s,o)}function gm(n){let e=oe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Lf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yi(r)).join(",")),e.Ie=t}return e.Ie}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nw(n.startAt,e.startAt)&&nw(n.endAt,e.endAt)}function Gf(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var lr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function RR(n,e,t,r,i,s,o,c){return new lr(n,e,t,r,i,s,o,c)}function Wl(n){return new lr(n)}function iw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dE(n){return n.collectionGroup!==null}function Fo(n){let e=oe(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Je(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Yr(s,r))}),t.has(kt.keyField().canonicalString())||e.Ee.push(new Yr(kt.keyField(),r))}return e.Ee}function cn(n){let e=oe(n);return e.de||(e.de=kR(e,Fo(n))),e.de}function kR(n,e){if(n.limitType==="F")return rw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Yr(i.field,s)});let t=n.endAt?new Ji(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ji(n.startAt.position,n.startAt.inclusive):null;return rw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Wf(n,e){let t=n.filters.concat([e]);return new lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kf(n,e,t){return new lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kl(n,e){return vm(cn(n),cn(e))&&n.limitType===e.limitType}function hE(n){return`${gm(cn(n))}|lt:${n.limitType}`}function ji(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>lE(i)).join(", ")}]`),Hl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yi(i)).join(",")),`Target(${r})`}(cn(n))}; limitType=${n.limitType})`}function Ql(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Fo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let d=tw(o,c,l);return o.inclusive?d<=0:d<0}(r.startAt,Fo(r),i)||r.endAt&&!function(o,c,l){let d=tw(o,c,l);return o.inclusive?d>=0:d>0}(r.endAt,Fo(r),i))}(n,e)}function DR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fE(n){return(e,t)=>{let r=!1;for(let i of Fo(n)){let s=PR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PR(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Qi(l,d):X(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var Nn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Jw(this.inner)}size(){return this.innerSize}};var NR=new Fe(Q.comparator);function Mn(){return NR}var pE=new Fe(Q.comparator);function Vo(...n){let e=pE;for(let t of n)e=e.insert(t.key,t);return e}function mE(n){let e=pE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hr(){return Uo()}function gE(){return Uo()}function Uo(){return new Nn(n=>n.toString(),(n,e)=>n.isEqual(e))}var MR=new Fe(Q.comparator),OR=new Je(Q.comparator);function fe(...n){let e=OR;for(let t of n)e=e.add(t);return e}var VR=new Je(ue);function LR(){return VR}function _m(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$o(e)?"-0":e}}function vE(n){return{integerValue:""+n}}function FR(n,e){return fR(e)?vE(e):_m(n,e)}var Xi=class{constructor(){this._=void 0}};function UR(n,e,t){return n instanceof Zi?function(i,s){let o={fields:{[Zw]:{stringValue:Xw},[tE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hm(s)&&(s=Gl(s)),s&&(o.fields[eE]=s),{mapValue:o}}(t,e):n instanceof Jr?yE(n,e):n instanceof Xr?wE(n,e):function(i,s){let o=_E(i,s),c=sw(o)+sw(i.Re);return Vf(o)&&Vf(i.Re)?vE(c):_m(i.serializer,c)}(n,e)}function jR(n,e,t){return n instanceof Jr?yE(n,e):n instanceof Xr?wE(n,e):t}function _E(n,e){return n instanceof es?function(r){return Vf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Zi=class extends Xi{},Jr=class extends Xi{constructor(e){super(),this.elements=e}};function yE(n,e){let t=EE(e);for(let r of n.elements)t.some(i=>un(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xr=class extends Xi{constructor(e){super(),this.elements=e}};function wE(n,e){let t=EE(e);for(let r of n.elements)t=t.filter(i=>!un(i,r));return{arrayValue:{values:t}}}var es=class extends Xi{constructor(e,t){super(),this.serializer=e,this.Re=t}};function sw(n){return ke(n.integerValue||n.doubleValue)}function EE(n){return mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Jr&&i instanceof Jr||r instanceof Xr&&i instanceof Xr?Wi(r.elements,i.elements,un):r instanceof es&&i instanceof es?un(r.Re,i.Re):r instanceof Zi&&i instanceof Zi}(n.transform,e.transform)}var Qf=class{constructor(e,t){this.version=e,this.transformResults=t}},Vt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function al(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ts=class{};function IE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ns(n.key,Vt.none()):new Zr(n.key,n.data,Vt.none());{let t=n.data,r=Rt.empty(),i=new Je(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dn(n.key,r,new Ot(i.toArray()),Vt.none())}}function $R(n,e,t){n instanceof Zr?function(i,s,o){let c=i.value.clone(),l=aw(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof dn?function(i,s,o){if(!al(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=aw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(TE(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function jo(n,e,t,r){return n instanceof Zr?function(s,o,c,l){if(!al(s.precondition,o))return c;let d=s.value.clone(),f=cw(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof dn?function(s,o,c,l){if(!al(s.precondition,o))return c;let d=cw(s.fieldTransforms,l,o),f=o.data;return f.setAll(TE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return al(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function qR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=_E(r.transform,i||null);s!=null&&(t===null&&(t=Rt.empty()),t.set(r.field,s))}return t||null}function ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wi(r,i,(s,o)=>BR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Zr=class extends ts{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends ts{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function TE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function aw(n,e,t){let r=new Map;ye(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,jR(o,c,t[i]))}return r}function cw(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,UR(s,o,e))}return r}var ns=class extends ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yf=class extends ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jf=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&$R(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=jo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=jo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=gE();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=IE(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Wi(this.mutations,e.mutations,(t,r)=>ow(t,r))&&Wi(this.baseMutations,e.baseMutations,(t,r)=>ow(t,r))}},Xf=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return MR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Zf=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ep=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,me;function zR(n){switch(n){case D.OK:return X(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function bE(n){if(n===void 0)return kn("GRPC error has no .code"),D.UNKNOWN;switch(n){case je.OK:return D.OK;case je.CANCELLED:return D.CANCELLED;case je.UNKNOWN:return D.UNKNOWN;case je.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case je.INTERNAL:return D.INTERNAL;case je.UNAVAILABLE:return D.UNAVAILABLE;case je.UNAUTHENTICATED:return D.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case je.NOT_FOUND:return D.NOT_FOUND;case je.ALREADY_EXISTS:return D.ALREADY_EXISTS;case je.PERMISSION_DENIED:return D.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case je.ABORTED:return D.ABORTED;case je.OUT_OF_RANGE:return D.OUT_OF_RANGE;case je.UNIMPLEMENTED:return D.UNIMPLEMENTED;case je.DATA_LOSS:return D.DATA_LOSS;default:return X(39323,{code:n})}}(me=je||(je={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var lw=null;var HR=new xn([4294967295,4294967295],0);function uw(n){let e=Vw().encode(n),t=new pf;return t.update(e),new Uint8Array(t.digest())}function dw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xn([t,r],0),new xn([i,s],0)]}var tp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gr(`Invalid padding: ${t}`);if(r<0)throw new Gr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=xn.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(xn.fromNumber(r)));return i.compare(HR)===1&&(i=new xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=uw(e),[r,i]=dw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;let t=uw(e),[r,i]=dw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Gr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Fe(ue),Mn(),fe())}},Ho=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var zi=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},_l=class{constructor(e,t){this.targetId=e,this.Ce=t}},yl=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},wl=class{constructor(){this.Fe=0,this.Me=hw(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=fe(),t=fe(),r=fe();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:s})}}),new Ho(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=hw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},np=class{constructor(e){this.ze=e,this.je=new Map,this.He=Mn(),this.Je=rl(),this.Ye=rl(),this.Ze=new Fe(ue)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(Gf(s))if(r===0){let o=new Q(s.path);this.tt(t,o,Ht.newNoDocument(o,ae.min()))}else ye(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let c=this.ct(e),l=c?this.lt(c,e,o):1;if(l!==0){this.st(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}lw?.ht(function(f,g,v,x,N){var U,O,ie,te,ne,Ie;let ht={localCacheCount:f,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},we=g.unchangedNames;return we&&(ht.bloomFilter={applied:N===0,hashCount:(U=we?.hashCount)!==null&&U!==void 0?U:0,bitmapLength:(te=(ie=(O=we?.bits)===null||O===void 0?void 0:O.bitmap)===null||ie===void 0?void 0:ie.length)!==null&&te!==void 0?te:0,padding:(Ie=(ne=we?.bits)===null||ne===void 0?void 0:ne.padding)!==null&&Ie!==void 0?Ie:0,mightContain:b=>{var _;return(_=x?.mightContain(b))!==null&&_!==void 0&&_}}),ht}(o,e.Ce,this.ze.Pt(),c,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Pn(r).toUint8Array()}catch(l){if(l instanceof fl)return Gi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new tp(o,i,s)}catch(l){return Gi(l instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let c=this._t(o);if(c){if(s.current&&Gf(c.target)){let l=new Q(c.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Ht.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=fe();this.Ye.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this._t(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new vl(e,t,this.Ze,this.He,r);return this.He=Mn(),this.Je=rl(),this.Ye=rl(),this.Ze=new Fe(ue),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new wl,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Je(ue),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Je(ue),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new wl),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function rl(){return new Fe(Q.comparator)}function hw(){return new Fe(Q.comparator)}var GR={asc:"ASCENDING",desc:"DESCENDING"},WR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KR={and:"AND",or:"OR"},rp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ip(n,e){return n.useProto3Json||Hl(e)?e:{value:e}}function El(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QR(n,e){return El(n,e.toTimestamp())}function ln(n){return ye(!!n,49232),ae.fromTimestamp(function(t){let r=Dn(t);return new et(r.seconds,r.nanos)}(n))}function ym(n,e){return sp(n,e).canonicalString()}function sp(n,e){let t=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function AE(n){let e=Pe.fromString(n);return ye(DE(e),10190,{key:e.toString()}),e}function op(n,e){return ym(n.databaseId,e.path)}function wf(n,e){let t=AE(e);if(t.get(1)!==n.databaseId.projectId)throw new j(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(xE(t))}function CE(n,e){return ym(n.databaseId,e)}function YR(n){let e=AE(n);return e.length===4?Pe.emptyPath():xE(e)}function ap(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xE(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fw(n,e,t){return{name:op(n,e),fields:t.value.mapValue.fields}}function JR(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?D.UNKNOWN:bE(d.code);return new j(f,d.message||"")}(o);t=new yl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wf(n,r.document.name),s=ln(r.document.updateTime),o=r.document.createTime?ln(r.document.createTime):ae.min(),c=new Rt({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new zi(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wf(n,r.document),s=r.readTime?ln(r.readTime):ae.min(),o=Ht.newNoDocument(i,s),c=r.removedTargetIds||[];t=new zi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wf(n,r.document),s=r.removedTargetIds||[];t=new zi([],s,i,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new ep(i,s),c=r.targetId;t=new _l(c,o)}}return t}function XR(n,e){let t;if(e instanceof Zr)t={update:fw(n,e.key,e.value)};else if(e instanceof ns)t={delete:op(n,e.key)};else if(e instanceof dn)t={update:fw(n,e.key,e.data),updateMask:ak(e.fieldMask)};else{if(!(e instanceof Yf))return X(16599,{ft:e.type});t={verify:op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Jr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof es)return{fieldPath:o.field.canonicalString(),increment:c.Re};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(n,e.precondition)),t}function ZR(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?ln(i.updateTime):ln(s);return o.isEqual(ae.min())&&(o=ln(s)),new Qf(o,i.transformResults||[])}(t,e))):[]}function ek(n,e){return{documents:[CE(n,e.path)]}}function tk(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CE(n,i);let s=function(d){if(d.length!==0)return kE(Gt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:Bi(v.field),direction:ik(v.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=ip(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function nk(n){let e=YR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ye(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let v=RE(g);return v instanceof Gt&&aE(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(v=>function(N){return new Yr($i(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(g){let v;return v=typeof g=="object"?g.value:g,Hl(v)?null:v}(t.limit));let l=null;t.startAt&&(l=function(g){let v=!!g.before,x=g.values||[];return new Ji(x,v)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let v=!g.before,x=g.values||[];return new Ji(x,v)}(t.endAt)),RR(e,i,o,s,c,"F",l,d)}function rk(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$i(t.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$i(t.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=$i(t.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=$i(t.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(n):n.fieldFilter!==void 0?function(t){return $e.create($i(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Gt.create(t.compositeFilter.filters.map(r=>RE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(t.compositeFilter.op))}(n):X(30097,{filter:n})}function ik(n){return GR[n]}function sk(n){return WR[n]}function ok(n){return KR[n]}function Bi(n){return{fieldPath:n.canonicalString()}}function $i(n){return kt.fromServerFormat(n.fieldPath)}function kE(n){return n instanceof $e?function(t){if(t.op==="=="){if(ew(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NAN"}};if(Zy(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ew(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NOT_NAN"}};if(Zy(t.value))return{unaryFilter:{field:Bi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(t.field),op:sk(t.op),value:t.value}}}(n):n instanceof Gt?function(t){let r=t.getFilters().map(i=>kE(i));return r.length===1?r[0]:{compositeFilter:{op:ok(t.op),filters:r}}}(n):X(54877,{filter:n})}function ak(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Go=class n{constructor(e,t,r,i,s=ae.min(),o=ae.min(),c=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cp=class{constructor(e){this.wt=e}};function ck(n){let e=nk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kf(e,e.limit,"L"):e}var Il=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),$o(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Dn(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Pn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?iE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):rE(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):X(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=Ki,c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(ke(c)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),Q.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Il.Wt=new Il;var lp=class{constructor(){this.Cn=new up}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Qr.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},up=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(Pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Pe.comparator)).toArray()}};var qO=new Uint8Array(0);var pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PE=41943040,Mt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(PE,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);var Wo=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var mw="LruGarbageCollector",lk=1048576;function gw([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var dp=class{constructor(e){this.Er=e,this.buffer=new Je(gw),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();gw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},hp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){B(mw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){as(t)?B(mw,"Ignoring IndexedDB error during garbage collection: ",t):yield os(t)}yield this.mr(3e5)}))}},fp=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(um.le);let r=new dp(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(pw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pw):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,c,l,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ui()<=he.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(d-l)+`ms
Total Duration: ${d-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function uk(n,e){return new fp(n,e)}var pp=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var gp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&jo(r.mutation,i,Ot.empty(),et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=Hr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Vo();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Hr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Mn(),o=Uo(),c=function(){return Uo()}();return t.forEach((l,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof dn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),jo(f.mutation,d,f.mutation.getFieldMask(),et.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new mp(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Uo(),i=new Fe((o,c)=>o-c),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let f=r.get(l)||Ot.empty();f=c.applyToLocalView(d,f),r.set(l,f);let g=(i.get(c.batchId)||fe()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,g=gE();f.forEach(v=>{if(!s.has(v)){let x=IE(t.get(v),r.get(v));x!==null&&g.set(v,x),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Hr()),c=Bo,l=s;return o.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{l=l.insert(f,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,fe())).next(f=>({batchId:c,changes:mE(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=Vo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Vo();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,l=>{let d=function(g,v){return new lr(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ht.newInvalidDocument(f)))});let c=Vo();return o.forEach((l,d)=>{let f=s.get(l);f!==void 0&&jo(f.mutation,d,Ot.empty(),et.now()),Ql(t,d)&&(c=c.insert(l,d))}),c})}};var vp=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return M.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ln(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:ck(i.bundledQuery),readTime:ln(i.readTime)}}(t)),M.resolve()}};var _p=class{constructor(){this.overlays=new Fe(Q.comparator),this.Qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Hr(),s=t.length+1,o=new Q(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Fe((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Hr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Hr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Zf(t,r));let s=this.Qr.get(t);s===void 0&&(s=fe(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}};var yp=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Ko=class{constructor(){this.$r=new Je(Be.Ur),this.Kr=new Je(Be.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Be(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Be(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new Q(new Pe([])),r=new Be(t,e),i=new Be(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new Q(new Pe([])),r=new Be(t,e),i=new Be(t,e+1),s=fe();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Be(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Q.comparator(e.key,t.key)||ue(e.Zr,t.Zr)}static Wr(e,t){return ue(e.Zr,t.Zr)||Q.comparator(e.key,t.key)}};var wp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Je(Be.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Jf(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.Xr=this.Xr.add(new Be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?dm:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{let c=this.ei(o.Zr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(ue);return t.forEach(i=>{let s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],c=>{r=r.add(c.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Q.isDocumentKey(s)||(s=s.child(""));let o=new Be(new Q(s),0),c=new Je(ue);return this.Xr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Zr)),!0)},o),M.resolve(this.ni(c))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ye(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(t.mutations,i=>{let s=new Be(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Be(t,0),i=this.Xr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Ep=class{constructor(e){this.ii=e,this.docs=function(){return new Fe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Mn(),o=t.path,c=new Q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||uR(lR(f),r)<=0||(i.has(f.key)||Ql(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X(9500)}si(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ip(this)}getSize(e){return M.resolve(this.size)}},Ip=class extends pp{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var Tp=class{constructor(e){this.persistence=e,this.oi=new Nn(t=>gm(t),vm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this._i=0,this.ai=new Ko,this.targetCount=0,this.ui=Wo.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),M.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Tr(t),M.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.ai.containsKey(t))}};var Tl=class{constructor(e,t){this.ci={},this.overlays={},this.li=new um(0),this.hi=!1,this.hi=!0,this.Pi=new yp,this.referenceDelegate=e(this),this.Ti=new Tp(this),this.indexManager=new lp,this.remoteDocumentCache=function(i){return new Ep(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new cp(t),this.Ei=new vp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _p,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new wp(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new bp(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},bp=class extends Nf{constructor(e){super(),this.currentSequenceNumber=e}},Sp=class n{constructor(e){this.persistence=e,this.Vi=new Ko,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw X(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{let i=Q.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return M.or([()=>M.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},bl=class n{constructor(e,t){this.persistence=e,this.yi=new Nn(r=>pR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uk(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return M.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(c=>{c||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sl(e.data.value)),t}Dr(e,t,r){return M.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ap=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=fe(),i=fe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Cp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xp=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return h_()?8:hR(Qe())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Cp;return this.Ss(e,t,o).next(c=>{if(s.result=c,this.fs)return this.Ds(e,t,o,c.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Ui()<=he.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ji(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(Ui()<=he.DEBUG&&B("QueryEngine","Query:",ji(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Ui()<=he.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ji(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(t))):M.resolve())}ws(e,t){if(iw(t))return M.resolve(null);let r=cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Kf(t,null,"F"),r=cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=fe(...s);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.vs(t,c);return this.Cs(t,d,o,l.readTime)?this.ws(e,Kf(t,null,"F")):this.Fs(e,d,t,l)}))})))}bs(e,t,r,i){return iw(t)||i.isEqual(ae.min())?M.resolve(null):this.ys.getDocuments(e,r).next(s=>{let o=this.vs(t,s);return this.Cs(t,o,r,i)?M.resolve(null):(Ui()<=he.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ji(t)),this.Fs(e,o,t,cR(i,Bo)).next(c=>c))})}vs(e,t){let r=new Je(fE(e));return t.forEach((i,s)=>{Ql(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ui()<=he.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ji(t)),this.ys.getDocumentsMatchingQuery(e,t,Qr.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var wm="LocalStore",dk=3e8,Rp=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Fe(ue),this.Os=new Nn(s=>gm(s),vm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gp(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function hk(n,e,t,r){return new Rp(n,e,t,r)}function NE(n,e){return E(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=fe();for(let d of i){o.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})})}function fk(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let g=d.batch,v=g.keys(),x=M.resolve();return v.forEach(N=>{x=x.next(()=>f.getEntry(l,N)).next(U=>{let O=d.docVersions.get(N);ye(O!==null,48541),U.version.compareTo(O)<0&&(g.applyToRemoteDocument(U,d),U.isValidDocument()&&(U.setReadTime(d.commitVersion),f.addEntry(U)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ME(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function pk(n,e){let t=oe(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let c=[];e.targetChanges.forEach((f,g)=>{let v=i.get(g);if(!v)return;c.push(t.Ti.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ti.addMatchingKeys(s,f.addedDocuments,g)));let x=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(dt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),i=i.insert(g,x),function(U,O,ie){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=dk?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0}(v,x,f)&&c.push(t.Ti.updateTargetData(s,x))});let l=Mn(),d=fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(mk(s,o,e.documentUpdates).next(f=>{l=f.qs,d=f.Qs})),!r.isEqual(ae.min())){let f=t.Ti.getLastRemoteSnapshotVersion(s).next(g=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.xs=i,s))}function mk(n,e,t){let r=fe(),i=fe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Mn();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):B(wm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function gk(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vk(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Go(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function kp(n,e,t){return E(this,null,function*(){let r=oe(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!as(o))throw o;B(wm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function vw(n,e,t){let r=oe(n),i=ae.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,f){let g=oe(l),v=g.Os.get(f);return v!==void 0?M.resolve(g.xs.get(v)):g.Ti.getTargetData(d,f)}(r,o,cn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:ae.min(),t?s:fe())).next(c=>(_k(r,DR(e),c),{documents:c,$s:s})))}function _k(n,e,t){let r=n.Ns.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}var Sl=class{constructor(){this.activeTargetIds=LR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Dp=class{constructor(){this.xo=new Sl,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Sl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Pp=class{No(e){}shutdown(){}};var _w="ConnectivityMonitor",Al=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){B(_w,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){B(_w,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var il=null;function Np(){return il===null?il=function(){return 268435456+Math.round(2147483648*Math.random())}():il++,"0x"+il.toString(16)}var Ef="RestConnection",yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mp=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===pl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){let o=Np(),c=this.jo(e,t.toUriEncodedString());B(Ef,`Sending RPC '${e}' ${o}:`,c,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);let{host:d}=new URL(c),f=Zn(d);return this.Jo(e,c,l,r,f).then(g=>(B(Ef,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Gi(Ef,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ss}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){let r=yk[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var Op=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ut="WebChannelConnection",Vp=class extends Mp{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=Np();return new Promise((c,l)=>{let d=new mf;d.setWithCredentials(!0),d.listenOnce(gf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Oo.NO_ERROR:let g=d.getResponseJson();B(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Oo.TIMEOUT:B(ut,`RPC '${e}' ${o} timed out`),l(new j(D.DEADLINE_EXCEEDED,"Request time out"));break;case Oo.HTTP_ERROR:let v=d.getStatus();if(B(ut,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);let N=x?.error;if(N&&N.status&&N.message){let U=function(ie){let te=ie.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(te)>=0?te:D.UNKNOWN}(N.status);l(new j(U,N.message))}else l(new j(D.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new j(D.UNAVAILABLE,"Connection failed."));break;default:X(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{B(ut,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);B(ut,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",f,r,15)})}I_(e,t,r){let i=Np(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yf(),c=_f(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=s.join("");B(ut,`Creating RPC '${e}' stream ${i}: ${f}`,l);let g=o.createWebChannel(f,l);this.E_(g);let v=!1,x=!1,N=new Op({Zo:O=>{x?B(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(v||(B(ut,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),B(ut,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Xo:()=>g.close()}),U=(O,ie,te)=>{O.listen(ie,ne=>{try{te(ne)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return U(g,Fi.EventType.OPEN,()=>{x||(B(ut,`RPC '${e}' stream ${i} transport opened.`),N.__())}),U(g,Fi.EventType.CLOSE,()=>{x||(x=!0,B(ut,`RPC '${e}' stream ${i} transport closed`),N.u_(),this.d_(g))}),U(g,Fi.EventType.ERROR,O=>{x||(x=!0,Gi(ut,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),N.u_(new j(D.UNAVAILABLE,"The operation could not be completed")))}),U(g,Fi.EventType.MESSAGE,O=>{var ie;if(!x){let te=O.data[0];ye(!!te,16349);let ne=te,Ie=ne?.error||((ie=ne[0])===null||ie===void 0?void 0:ie.error);if(Ie){B(ut,`RPC '${e}' stream ${i} received error:`,Ie);let ht=Ie.status,we=function(I){let T=je[I];if(T!==void 0)return bE(T)}(ht),b=Ie.message;we===void 0&&(we=D.INTERNAL,b="Unknown error status: "+ht+" with message "+Ie.message),x=!0,N.u_(new j(we,b)),g.close()}else B(ut,`RPC '${e}' stream ${i} received:`,te),N.c_(te)}}),U(c,vf.STAT_EVENT,O=>{O.stat===tl.PROXY?B(ut,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===tl.NOPROXY&&B(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function If(){return typeof document<"u"?document:null}function Yl(n){return new rp(n,!0)}var Cl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var yw="PersistentStream",xl=class{constructor(e,t,r,i,s,o,c,l){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Cl(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return E(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return E(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return E(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new j(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>E(this,null,function*(){this.state=0,this.start()}))}j_(e){return B(yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(B(yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lp=class extends xl{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=JR(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?ln(o.readTime):ae.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=ap(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=Gf(l)?{documents:ek(s,l)}:{query:tk(s,l).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=SE(s,o.resumeToken);let d=ip(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){c.readTime=El(s,o.snapshotVersion.toTimestamp());let d=ip(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=rk(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=ap(this.serializer),t.removeTarget=e,this.Q_(t)}},Fp=class extends xl{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=ZR(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=ap(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>XR(this.serializer,r))};this.Q_(t)}};var Up=class{},jp=class extends Up{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new j(D.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,sp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(D.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,sp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(D.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},Bp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(kn(t),this.ua=!1):B("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var ei="RemoteStore",$p=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{r.enqueueAndForget(()=>E(this,null,function*(){ni(this)&&(B(ei,"Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let d=oe(l);d.da.add(4),yield ra(d),d.Va.set("Unknown"),d.da.delete(4),yield Jl(d)})}(this))}))}),this.Va=new Bp(r,i)}};function Jl(n){return E(this,null,function*(){if(ni(n))for(let e of n.Aa)yield e(!0)})}function ra(n){return E(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function OE(n,e){let t=oe(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),bm(t)?Tm(t):cs(t).N_()&&Im(t,e))}function Em(n,e){let t=oe(n),r=cs(t);t.Ea.delete(e),r.N_()&&VE(t,e),t.Ea.size===0&&(r.N_()?r.k_():ni(t)&&t.Va.set("Unknown"))}function Im(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cs(n).Z_(e)}function VE(n,e){n.ma.Ke(e),cs(n).X_(e)}function Tm(n){n.ma=new np({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),cs(n).start(),n.Va.ca()}function bm(n){return ni(n)&&!cs(n).O_()&&n.Ea.size>0}function ni(n){return oe(n).da.size===0}function LE(n){n.ma=void 0}function wk(n){return E(this,null,function*(){n.Va.set("Online")})}function Ek(n){return E(this,null,function*(){n.Ea.forEach((e,t)=>{Im(n,e)})})}function Ik(n,e){return E(this,null,function*(){LE(n),bm(n)?(n.Va.Pa(e),Tm(n)):n.Va.set("Unknown")})}function Tk(n,e,t){return E(this,null,function*(){if(n.Va.set("Online"),e instanceof yl&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.Ea.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Ea.delete(c),i.ma.removeTarget(c))})}(n,e)}catch(r){B(ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rl(n,r)}else if(e instanceof zi?n.ma.Xe(e):e instanceof _l?n.ma.ot(e):n.ma.nt(e),!t.isEqual(ae.min()))try{let r=yield ME(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.ma.It(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.Ea.get(d);f&&s.Ea.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let f=s.Ea.get(l);if(!f)return;s.Ea.set(l,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),VE(s,l);let g=new Go(f.target,l,d,f.sequenceNumber);Im(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){B(ei,"Failed to raise snapshot:",r),yield Rl(n,r)}})}function Rl(n,e,t){return E(this,null,function*(){if(!as(e))throw e;n.da.add(1),yield ra(n),n.Va.set("Offline"),t||(t=()=>ME(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){B(ei,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield Jl(n)}))})}function FE(n,e){return e().catch(t=>Rl(n,t,e))}function Xl(n){return E(this,null,function*(){let e=oe(n),t=ur(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:dm;for(;bk(e);)try{let i=yield gk(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,Sk(e,i)}catch(i){yield Rl(e,i)}UE(e)&&jE(e)})}function bk(n){return ni(n)&&n.Ia.length<10}function Sk(n,e){n.Ia.push(e);let t=ur(n);t.N_()&&t.ea&&t.ta(e.mutations)}function UE(n){return ni(n)&&!ur(n).O_()&&n.Ia.length>0}function jE(n){ur(n).start()}function Ak(n){return E(this,null,function*(){ur(n).ia()})}function Ck(n){return E(this,null,function*(){let e=ur(n);for(let t of n.Ia)e.ta(t.mutations)})}function xk(n,e,t){return E(this,null,function*(){let r=n.Ia.shift(),i=Xf.from(r,e,t);yield FE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xl(n)})}function Rk(n,e){return E(this,null,function*(){e&&ur(n).ea&&(yield function(r,i){return E(this,null,function*(){if(function(o){return zR(o)&&o!==D.ABORTED}(i.code)){let s=r.Ia.shift();ur(r).L_(),yield FE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Xl(r)}})}(n,e)),UE(n)&&jE(n)})}function ww(n,e){return E(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),B(ei,"RemoteStore received new credentials");let r=ni(t);t.da.add(3),yield ra(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield Jl(t)})}function kk(n,e){return E(this,null,function*(){let t=oe(n);e?(t.da.delete(2),yield Jl(t)):e||(t.da.add(2),yield ra(t),t.Va.set("Unknown"))})}function cs(n){return n.fa||(n.fa=function(t,r,i){let s=oe(t);return s.oa(),new Lp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:wk.bind(null,n),n_:Ek.bind(null,n),i_:Ik.bind(null,n),Y_:Tk.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.fa.L_(),bm(n)?Tm(n):n.Va.set("Unknown")):(yield n.fa.stop(),LE(n))}))),n.fa}function ur(n){return n.ga||(n.ga=function(t,r,i){let s=oe(t);return s.oa(),new Fp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Ak.bind(null,n),i_:Rk.bind(null,n),na:Ck.bind(null,n),ra:xk.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.ga.L_(),yield Xl(n)):(yield n.ga.stop(),n.Ia.length>0&&(B(ei,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var qp=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sm(n,e){if(kn("AsyncQueue",`${e}: ${n}`),as(n))return new j(D.UNAVAILABLE,`${e}: ${n}`);throw n}var kl=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=Vo(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Dl=class{constructor(){this.pa=new Fe(Q.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):X(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},rs=class n{constructor(e,t,r,i,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,kl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var zp=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},Hp=class{constructor(){this.queries=Ew(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=oe(t),s=i.queries;i.queries=Ew(),s.forEach((o,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new j(D.ABORTED,"Firestore shutting down"))}};function Ew(){return new Nn(n=>hE(n),Kl)}function Am(n,e){return E(this,null,function*(){let t=oe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new zp,r=e.va()?0:1);try{switch(r){case 0:s.ba=yield t.onListen(i,!0);break;case 1:s.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Sm(o,`Initialization of query '${ji(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&xm(t)})}function Cm(n,e){return E(this,null,function*(){let t=oe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Dk(n,e){let t=oe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.Sa)c.Ma(i)&&(r=!0);o.ba=i}}r&&xm(t)}function Pk(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function xm(n){n.Ca.forEach(e=>{e.next()})}var Gp,Iw;(Iw=Gp||(Gp={})).xa="default",Iw.Cache="cache";var Qo=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Gp.Cache}};var Pl=class{constructor(e){this.key=e}},Nl=class{constructor(e){this.key=e}},Wp=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fe(),this.mutatedKeys=fe(),this.Za=fE(e),this.Xa=new kl(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Dl,i=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let v=i.get(f),x=Ql(this.query,g)?g:null,N=!!v&&this.mutatedKeys.has(v.key),U=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations),O=!1;v&&x?v.data.isEqual(x.data)?N!==U&&(r.track({type:3,doc:x}),O=!0):this.ru(v,x)||(r.track({type:2,doc:x}),O=!0,(l&&this.Za(x,l)>0||d&&this.Za(x,d)<0)&&(c=!0)):!v&&x?(r.track({type:0,doc:x}),O=!0):v&&!x&&(r.track({type:1,doc:v}),O=!0,(l||d)&&(c=!0)),O&&(x?(o=o.add(x),s=U?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:c,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let o=e.nu.wa();o.sort((f,g)=>function(x,N){let U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:O})}};return U(x)-U(N)}(f.type,g.type)||this.Za(f.doc,g.doc)),this.iu(r),i=i!=null&&i;let c=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Ja;return this.Ja=l,o.length!==0||d?{snapshot:new rs(this.query,e.Xa,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Dl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=fe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Nl(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Pl(r))}),t}au(e){this.Ha=e.$s,this.Ya=fe();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return rs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},Rm="SyncEngine",Kp=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Qp=class{constructor(e){this.key=e,this.cu=!1}},Yp=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Nn(c=>hE(c),Kl),this.Pu=new Map,this.Tu=new Set,this.Iu=new Fe(Q.comparator),this.Eu=new Map,this.du=new Ko,this.Au={},this.Ru=new Map,this.Vu=Wo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function Nk(n,e,t=!0){return E(this,null,function*(){let r=GE(n),i,s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=yield BE(r,e,t,!0),i})}function Mk(n,e){return E(this,null,function*(){let t=GE(n);yield BE(t,e,!0,!1)})}function BE(n,e,t,r){return E(this,null,function*(){let i=yield vk(n.localStore,cn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield Ok(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&OE(n.remoteStore,i),c})}function Ok(n,e,t,r,i){return E(this,null,function*(){n.fu=(g,v,x)=>function(U,O,ie,te){return E(this,null,function*(){let ne=O.view.tu(ie);ne.Cs&&(ne=yield vw(U.localStore,O.query,!1).then(({documents:b})=>O.view.tu(b,ne)));let Ie=te&&te.targetChanges.get(O.targetId),ht=te&&te.targetMismatches.get(O.targetId)!=null,we=O.view.applyChanges(ne,U.isPrimaryClient,Ie,ht);return bw(U,O.targetId,we.ou),we.snapshot})}(n,g,v,x);let s=yield vw(n.localStore,e,!0),o=new Wp(e,s.$s),c=o.tu(s.documents),l=Ho.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,l);bw(n,t,d.ou);let f=new Kp(e,t,o);return n.hu.set(e,f),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),d.snapshot})}function Vk(n,e,t){return E(this,null,function*(){let r=oe(n),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(o=>!Kl(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield kp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Em(r.remoteStore,i.targetId),Jp(r,i.targetId)}).catch(os))):(Jp(r,i.targetId),yield kp(r.localStore,i.targetId,!0))})}function Lk(n,e){return E(this,null,function*(){let t=oe(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Em(t.remoteStore,r.targetId))})}function Fk(n,e,t){return E(this,null,function*(){let r=Hk(n);try{let i=yield function(o,c){let l=oe(o),d=et.now(),f=c.reduce((x,N)=>x.add(N.key),fe()),g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=Mn(),U=fe();return l.Bs.getEntries(x,f).next(O=>{N=O,N.forEach((ie,te)=>{te.isValidDocument()||(U=U.add(ie))})}).next(()=>l.localDocuments.getOverlayedDocuments(x,N)).next(O=>{g=O;let ie=[];for(let te of c){let ne=qR(te,g.get(te.key).overlayedDocument);ne!=null&&ie.push(new dn(te.key,ne,sE(ne.value.mapValue),Vt.exists(!0)))}return l.mutationQueue.addMutationBatch(x,d,ie,c)}).next(O=>{v=O;let ie=O.applyToLocalDocumentSet(g,U);return l.documentOverlayCache.saveOverlays(x,O.batchId,ie)})}).then(()=>({batchId:v.batchId,changes:mE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let d=o.Au[o.currentUser.toKey()];d||(d=new Fe(ue)),d=d.insert(c,l),o.Au[o.currentUser.toKey()]=d}(r,i.batchId,t),yield ia(r,i.changes),yield Xl(r.remoteStore)}catch(i){let s=Sm(i,"Failed to persist write");t.reject(s)}})}function $E(n,e){return E(this,null,function*(){let t=oe(n);try{let r=yield pk(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?ye(o.cu,14607):i.removedDocuments.size>0&&(ye(o.cu,42227),o.cu=!1))}),yield ia(t,r,e)}catch(r){yield os(r)}})}function Tw(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((s,o)=>{let c=o.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=oe(o);l.onlineState=c;let d=!1;l.queries.forEach((f,g)=>{for(let v of g.Sa)v.Fa(c)&&(d=!0)}),d&&xm(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Uk(n,e,t){return E(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Fe(Q.comparator);o=o.insert(s,Ht.newNoDocument(s,ae.min()));let c=fe().add(s),l=new vl(ae.min(),new Map,new Fe(ue),o,c);yield $E(r,l),r.Iu=r.Iu.remove(s),r.Eu.delete(e),km(r)}else yield kp(r.localStore,e,!1).then(()=>Jp(r,e,t)).catch(os)})}function jk(n,e){return E(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield fk(t.localStore,e);zE(t,r,null),qE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ia(t,i)}catch(i){yield os(i)}})}function Bk(n,e,t){return E(this,null,function*(){let r=oe(n);try{let i=yield function(o,c){let l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(ye(g!==null,37113),f=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(r.localStore,e);zE(r,e,t),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ia(r,i)}catch(i){yield os(i)}})}function qE(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function zE(n,e,t){let r=oe(n),i=r.Au[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Jp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||HE(n,r)})}function HE(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(Em(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),km(n))}function bw(n,e,t){for(let r of t)r instanceof Pl?(n.du.addReference(r.key,e),$k(n,r)):r instanceof Nl?(B(Rm,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||HE(n,r.key)):X(19791,{pu:r})}function $k(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(B(Rm,"New document in limbo: "+t),n.Tu.add(r),km(n))}function km(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new Q(Pe.fromString(e)),r=n.Vu.next();n.Eu.set(r,new Qp(t)),n.Iu=n.Iu.insert(t,r),OE(n.remoteStore,new Go(cn(Wl(t.path)),r,"TargetPurposeLimboResolution",um.le))}}function ia(n,e,t){return E(this,null,function*(){let r=oe(n),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach((c,l)=>{o.push(r.fu(l,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Ap.Rs(l.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.lu.Y_(i),yield function(l,d){return E(this,null,function*(){let f=oe(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,v=>M.forEach(v.ds,x=>f.persistence.referenceDelegate.addReference(g,v.targetId,x)).next(()=>M.forEach(v.As,x=>f.persistence.referenceDelegate.removeReference(g,v.targetId,x)))))}catch(g){if(!as(g))throw g;B(wm,"Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let x=f.xs.get(v),N=x.snapshotVersion,U=x.withLastLimboFreeSnapshotVersion(N);f.xs=f.xs.insert(v,U)}}})}(r.localStore,s))})}function qk(n,e){return E(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){B(Rm,"User change. New user:",e.toKey());let r=yield NE(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(c=>{c.forEach(l=>{l.reject(new j(D.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ia(t,r.ks)}})}function zk(n,e){let t=oe(n),r=t.Eu.get(e);if(r&&r.cu)return fe().add(r.key);{let i=fe(),s=t.Pu.get(e);if(!s)return i;for(let o of s){let c=t.hu.get(o);i=i.unionWith(c.view.eu)}return i}}function GE(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uk.bind(null,e),e.lu.Y_=Dk.bind(null,e.eventManager),e.lu.gu=Pk.bind(null,e.eventManager),e}function Hk(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bk.bind(null,e),e}var WE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=Yl(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return hk(this.persistence,new xp,t.initialUser,this.serializer)}Su(t){return new Tl(Sp.fi,this.serializer)}bu(t){return new Dp}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Xp=class extends WE{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ye(this.persistence.referenceDelegate instanceof bl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new hp(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new Tl(r=>bl.fi(r,t),this.serializer)}};var Gk=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qk.bind(null,this.syncEngine),yield kk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Hp}()}createDatastore(t){let r=Yl(t.databaseInfo.databaseId),i=function(o){return new Vp(o)}(t.databaseInfo);return function(o,c,l,d){return new jp(o,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,l){return new $p(i,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>Tw(this.syncEngine,r,0),function(){return Al.C()?new Al:new Pp}())}createSyncEngine(t,r){return function(s,o,c,l,d,f,g){let v=new Yp(s,o,c,l,d,f);return g&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(s){return E(this,null,function*(){let o=oe(s);B(ei,"RemoteStore shutting down."),o.da.add(5),yield ra(o),o.Ra.shutdown(),o.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Yo=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var dr="FirestoreClient",Zp=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=ul.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>E(this,null,function*(){B(dr,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(B(dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tf(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B(dr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield NE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Sw(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Wk(n);B(dr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ww(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ww(e.remoteStore,i)),n._onlineComponents=e})}function Wk(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(dr,"Using user provided OfflineComponentProvider");try{yield Tf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Gi("Error using user provided cache. Falling back to memory cache: "+t),yield Tf(n,new WE)}}else B(dr,"Using default OfflineComponentProvider"),yield Tf(n,new Xp(void 0));return n._offlineComponents})}function KE(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(dr,"Using user provided OnlineComponentProvider"),yield Sw(n,n._uninitializedComponentsProvider._online)):(B(dr,"Using default OnlineComponentProvider"),yield Sw(n,new Gk))),n._onlineComponents})}function Kk(n){return KE(n).then(e=>e.syncEngine)}function Ml(n){return E(this,null,function*(){let e=yield KE(n),t=e.eventManager;return t.onListen=Nk.bind(null,e.syncEngine),t.onUnlisten=Vk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Mk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lk.bind(null,e.syncEngine),t})}function Qk(n,e,t={}){let r=new zt;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(s,o,c,l,d){let f=new Yo({next:v=>{f.xu(),o.enqueueAndForget(()=>Cm(s,g));let x=v.docs.has(c);!x&&v.fromCache?d.reject(new j(D.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&l&&l.source==="server"?d.reject(new j(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Qo(Wl(c.path),f,{includeMetadataChanges:!0,Qa:!0});return Am(s,g)}(yield Ml(n),n.asyncQueue,e,t,r)})),r.promise}function Yk(n,e,t={}){let r=new zt;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(s,o,c,l,d){let f=new Yo({next:v=>{f.xu(),o.enqueueAndForget(()=>Cm(s,g)),v.fromCache&&l.source==="server"?d.reject(new j(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Qo(c,f,{includeMetadataChanges:!0,Qa:!0});return Am(s,g)}(yield Ml(n),n.asyncQueue,e,t,r)})),r.promise}function QE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Aw=new Map;function YE(n,e,t){if(!t)throw new j(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jk(n,e,t,r){if(e===!0&&r===!0)throw new j(D.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cw(n){if(!Q.isDocumentKey(n))throw new j(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xw(n){if(Q.isDocumentKey(n))throw new j(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function Dt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Zl(n);throw new j(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var JE="firestore.googleapis.com",Rw=!0,Ol=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JE,this.ssl=Rw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Rw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new j(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},is=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ol({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ol(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sf;switch(r.type){case"firstParty":return new Rf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Aw.get(t);r&&(B("ComponentProvider","Removing Datastore"),Aw.delete(t),r.terminate())}(this),Promise.resolve()}};function XE(n,e,t,r={}){var i;n=Dt(n,is);let s=Zn(e),o=n._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Cc(`https://${l}`),xc("Firestore",!0)),o.host!==JE&&o.host!==l&&Gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!tn(d,c)&&(n._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Ye.MOCK_USER;else{f=o_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new j(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ye(v)}n._authCredentials=new Af(new cl(f,g))}}var hr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},vt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ar=class n extends hr{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ZE(n,e,...t){if(n=Oe(n),YE("collection","path",e),n instanceof is){let r=Pe.fromString(e,...t);return xw(r),new ar(n,null,r)}{if(!(n instanceof vt||n instanceof ar))throw new j(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return xw(r),new ar(n.firestore,null,r)}}function Dm(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=ul.newId()),YE("doc","path",e),n instanceof is){let r=Pe.fromString(e,...t);return Cw(r),new vt(n,null,new Q(r))}{if(!(n instanceof vt||n instanceof ar))throw new j(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return Cw(r),new vt(n.firestore,n instanceof ar?n.converter:null,new Q(r))}}var kw="AsyncQueue",Vl=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Cl(this,"async_queue_retry"),this.rc=()=>{let r=If();r&&B(kw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new zt;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return E(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!as(e))throw e;B(kw,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,kn("INTERNAL UNHANDLED ERROR: ",Dw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=qp.createAndSchedule(this,e,t,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&X(47125,{cc:Dw(this.Xu)})}verifyOperationInProgress(){}lc(){return E(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function Dw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Pw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Wt=class extends is{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vl,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vl(e),this._firestoreClient=void 0,yield e}})}};function eI(n,e){let t=typeof n=="object"?n:Fr(),r=typeof n=="string"?n:e||pl,i=Pi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=s_("firestore");s&&XE(i,...s)}return i}function sa(n){if(n._terminated)throw new j(D.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Xk(n),n._firestoreClient}function Xk(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,f){return new Mf(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,QE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Zp(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var Jo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new j(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ti=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xo=class{constructor(e){this._methodName=e}};var Zo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var ea=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Zk=/^__.*__$/,em=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zr(e,this.data,t,this.fieldTransforms)}},Ll=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function tI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ic:n})}}var tm=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Ul(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(tI(this.Ic)&&Zk.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},nm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yl(e)}bc(e,t,r,i=!1){return new tm({Ic:e,methodName:t,wc:r,path:kt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function eu(n){let e=n._freezeSettings(),t=Yl(n._databaseId);return new nm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nI(n,e,t,r,i,s={}){let o=n.bc(s.merge||s.mergeFields?2:0,e,t,i);Pm("Data must be an object, but it was:",o,r);let c=sI(r,o),l,d;if(s.merge)l=new Ot(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let v=rm(e,g,t);if(!o.contains(v))throw new j(D.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);aI(f,v)||f.push(v)}l=new Ot(f),d=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,d=o.fieldTransforms;return new em(new Rt(c),l,d)}var Fl=class n extends Xo{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function rI(n,e,t,r){let i=n.bc(1,e,t);Pm("Data must be an object, but it was:",i,r);let s=[],o=Rt.empty();fr(r,(l,d)=>{let f=Nm(e,l,t);d=Oe(d);let g=i.mc(f);if(d instanceof Fl)s.push(f);else{let v=oa(d,g);v!=null&&(s.push(f),o.set(f,v))}});let c=new Ot(s);return new Ll(o,c,i.fieldTransforms)}function iI(n,e,t,r,i,s){let o=n.bc(1,e,t),c=[rm(e,r,t)],l=[i];if(s.length%2!=0)throw new j(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(rm(e,s[v])),l.push(s[v+1]);let d=[],f=Rt.empty();for(let v=c.length-1;v>=0;--v)if(!aI(d,c[v])){let x=c[v],N=l[v];N=Oe(N);let U=o.mc(x);if(N instanceof Fl)d.push(x);else{let O=oa(N,U);O!=null&&(d.push(x),f.set(x,O))}}let g=new Ot(d);return new Ll(f,g,o.fieldTransforms)}function eD(n,e,t,r=!1){return oa(t,n.bc(r?4:3,e))}function oa(n,e){if(oI(n=Oe(n)))return Pm("Unsupported field value:",e,n),sI(n,e);if(n instanceof Xo)return function(r,i){if(!tI(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=oa(c,i.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=et.fromDate(r);return{timestampValue:El(i.serializer,s)}}if(r instanceof et){let s=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:El(i.serializer,s)}}if(r instanceof Zo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jo)return{bytesValue:SE(i.serializer,r._byteString)};if(r instanceof vt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ym(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ea)return function(o,c){return{mapValue:{fields:{[fm]:{stringValue:pm},[Ki]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.gc("VectorValues must only contain numeric values.");return _m(c.serializer,d)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Zl(r)}`)}(n,e)}function sI(n,e){let t={};return Jw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fr(n,(r,i)=>{let s=oa(i,e.Ac(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function oI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof et||n instanceof Zo||n instanceof Jo||n instanceof vt||n instanceof Xo||n instanceof ea)}function Pm(n,e,t){if(!oI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Zl(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function rm(n,e,t){if((e=Oe(e))instanceof ti)return e._internalPath;if(typeof e=="string")return Nm(n,e);throw Ul("Field path arguments must be of type string or ",n,!1,void 0,t)}var tD=new RegExp("[~\\*/\\[\\]]");function Nm(n,e,t){if(e.search(tD)>=0)throw Ul(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ti(...e.split("."))._internalPath}catch{throw Ul(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ul(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(D.INVALID_ARGUMENT,c+n+l)}function aI(n,e){return n.some(t=>t.isEqual(e))}var jl=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new im(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},im=class extends jl{data(){return super.data()}};function tu(n,e){return typeof e=="string"?Nm(n,e):e instanceof ti?e._internalPath:e._delegate._internalPath}function cI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ta=class{},Bl=class extends ta{};function lI(n,e,...t){let r=[];e instanceof ta&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof sm).length,c=s.filter(l=>l instanceof $l).length;if(o>1||o>0&&c>0)throw new j(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var $l=class n extends Bl{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return hI(e._query,t),new hr(e.firestore,e.converter,Wf(e._query,t))}_parse(e){let t=eu(e.firestore);return function(s,o,c,l,d,f,g){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new j(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Mw(g,f);let N=[];for(let U of g)N.push(Nw(l,s,U));v={arrayValue:{values:N}}}else v=Nw(l,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Mw(g,f),v=eD(c,o,g,f==="in"||f==="not-in");return $e.create(d,f,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function uI(n,e,t){let r=e,i=tu("where",n);return $l._create(i,r,t)}var sm=class n extends ta{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Gt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)hI(o,l),o=Wf(o,l)}(e._query,t),new hr(e.firestore,e.converter,Wf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var om=class n extends Bl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new j(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yr(s,o)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function dI(n,e="asc"){let t=e,r=tu("orderBy",n);return om._create(r,t)}function Nw(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new j(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dE(e)&&t.indexOf("/")!==-1)throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pe.fromString(t));if(!Q.isDocumentKey(r))throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xy(n,new Q(r))}if(t instanceof vt)return Xy(n,t._key);throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zl(t)}.`)}function Mw(n,e){if(!Array.isArray(n)||n.length===0)throw new j(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hI(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var am=class{convertValue(e,t="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ki].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ke(o.doubleValue));return new ea(s)}convertGeoPoint(e){return new Zo(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Gl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){let t=Dn(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);ye(DE(r),9688,{name:e});let i=new ml(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(t)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function fI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ql=class extends jl{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hi=class extends ql{data(e={}){return super.data(e)}},zl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hi(this._firestore,this._userDataWriter,r.key,r,new Wr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new Hi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Wr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Hi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Wr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:nD(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function nD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}function pI(n){n=Dt(n,vt);let e=Dt(n.firestore,Wt);return Qk(sa(e),n._key).then(t=>yI(e,n,t))}var na=class extends am{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}};function mI(n){n=Dt(n,hr);let e=Dt(n.firestore,Wt),t=sa(e),r=new na(e);return cI(n._query),Yk(t,n._query).then(i=>new zl(e,r,n,i))}function gI(n,e,t,...r){n=Dt(n,vt);let i=Dt(n.firestore,Wt),s=eu(i),o;return o=typeof(e=Oe(e))=="string"||e instanceof ti?iI(s,"updateDoc",n._key,e,t,r):rI(s,"updateDoc",n._key,e),nu(i,[o.toMutation(n._key,Vt.exists(!0))])}function vI(n){return nu(Dt(n.firestore,Wt),[new ns(n._key,Vt.none())])}function _I(n,e){let t=Dt(n.firestore,Wt),r=Dm(n),i=fI(n.converter,e);return nu(t,[nI(eu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Vt.exists(!1))]).then(()=>r)}function Mm(n,...e){var t,r,i;n=Oe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Pw(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Pw(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,d,f;if(n instanceof vt)d=Dt(n.firestore,Wt),f=Wl(n._key.path),l={next:g=>{e[o]&&e[o](yI(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=Dt(n,hr);d=Dt(g.firestore,Wt),f=g._query;let v=new na(d);l={next:x=>{e[o]&&e[o](new zl(d,v,g,x))},error:e[o+1],complete:e[o+2]},cI(n._query)}return function(v,x,N,U){let O=new Yo(U),ie=new Qo(x,O,N);return v.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return Am(yield Ml(v),ie)})),()=>{O.xu(),v.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return Cm(yield Ml(v),ie)}))}}(sa(d),f,c,l)}function nu(n,e){return function(r,i){let s=new zt;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return Fk(yield Kk(r),i,s)})),s.promise}(sa(n),e)}function yI(n,e,t){let r=t.docs.get(e._key),i=new na(n);return new ql(n,i,e._key,r,new Wr(t.hasPendingWrites,t.fromCache),e.converter)}var cm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eu(e)}set(e,t,r){this._verifyNotCommitted();let i=bf(e,this._firestore),s=fI(i.converter,t,r),o=nI(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Vt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=bf(e,this._firestore),o;return o=typeof(t=Oe(t))=="string"||t instanceof ti?iI(this._dataReader,"WriteBatch.update",s._key,t,r,i):rI(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Vt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=bf(e,this._firestore);return this._mutations=this._mutations.concat(new ns(t._key,Vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function bf(n,e){if((n=Oe(n)).firestore!==e)throw new j(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function wI(n){return sa(n=Dt(n,Wt)),new cm(n,e=>nu(n,e))}(function(e,t=!0){(function(i){ss=i})(tr),Bt(new gt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Wt(new Cf(r.getProvider("auth-internal")),new kf(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new j(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ve($y,qy,e),Ve($y,qy,"esm2017")})();var ru=function(){return ru=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ru.apply(this,arguments)};var sD={includeMetadataChanges:!1};function EI(n,e){return e===void 0&&(e=sD),new Et(function(t){var r=Mm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function II(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ru(ru({},r),(t={},t[e.idField]=n.id,t))}function TI(n){return EI(n,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function bI(n,e){return e===void 0&&(e={}),TI(n).pipe(le(function(t){return t.map(function(r){return II(r,e)})}))}var On=class{constructor(e){return e}},SI="firestore",Om=class{constructor(){return Mi(SI)}};var Vm=new _e("angularfire2.firestore-instances");function oD(n,e){let t=Io(SI,n,e);return t&&new On(t)}function aD(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new On(r)}}var cD={provide:Om,deps:[[new Pt,Vm]]},lD={provide:On,useFactory:oD,deps:[[new Pt,Vm],bn]};function AI(n,...e){return Ve("angularfire",nr.full,"fst"),$n([lD,cD,{provide:Vm,useFactory:aD(n),multi:!0,deps:[ct,It,rr,jr,[new Pt,Mo],[new Pt,Oi],...e]}])}var CI=Le(bI,!0);var iu=Le(_I,!0,2);var su=Le(ZE,!0,2);var ou=Le(vI,!0,2);var hn=Le(Dm,!0,2);var au=Le(pI,!0);var ls=Le(mI,!0);var xI=Le(eI,!0);var Lm=Le(dI,!0,2),ri=Le(lI,!0,2);var us=Le(gI,!0,2);var ii=Le(uI,!0,2),Fm=Le(wI,!0,2);var qe=class n{constructor(e){this.auth=e;this.user$=Vy(this.auth)}user$;signInWithGoogle(){let e=new of;return Fy(this.auth,e)}signOut(){return Uy(this.auth)}static \u0275fac=function(t){return new(t||n)(se(zr))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function dD(n,e){if(n&1&&(Ba(0),R(1),$a()),n&2){let t=e.ngIf;P(),ze(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function hD(n,e){n&1&&R(0," Welcome! ")}function fD(n,e){n&1&&(m(0,"div",40),F(1,"div",41),m(2,"span",42),R(3,"Loading quote..."),y()())}function pD(n,e){if(n&1&&(m(0,"div",43)(1,"blockquote",44),R(2),y(),m(3,"p",45),R(4),y()()),n&2){let t=G();P(2),ze(' "',t.homeQuote.q,'" '),P(2),ze(" \u2014 ",t.homeQuote.a," ")}}function mD(n,e){if(n&1){let t=Ce();m(0,"div",46)(1,"p",47),R(2),y(),m(3,"button",48),z("click",function(){Y(t);let i=G();return J(i.refreshQuote())}),R(4," Try again "),y()()}if(n&2){let t=G();P(2),be(t.quoteError)}}var cu=class n{constructor(e,t,r){this.authService=e;this.router=t;this.quotesService=r}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)(K(qe),K(xe),K(Gv))};static \u0275cmp=Ue({type:n,selectors:[["app-home"]],decls:68,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,r){if(t&1){let i=Ce();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),de(4,dD,2,1,"ng-container",5),Re(5,"async"),de(6,hD,1,0,"ng-template",null,0,Cv),R(8," Explore some of my utilities, tools and research items. "),y()(),m(9,"div",6)(10,"div",7),z("click",function(){return Y(i),J(r.navigateToLists())}),m(11,"div",8)(12,"div",9)(13,"div",10),H(),m(14,"svg",11),F(15,"path",12),y()()(),Z(),m(16,"div",13)(17,"h3",14),R(18," Todo Lists "),y(),m(19,"p",15),R(20," Create and manage your todo lists "),y()()()(),m(21,"div",7),z("click",function(){return Y(i),J(r.navigateToIpLookup())}),m(22,"div",8)(23,"div",9)(24,"div",16),H(),m(25,"svg",17),F(26,"path",18)(27,"path",19),y()()(),Z(),m(28,"div",13)(29,"h3",20),R(30," IP Lookup "),y(),m(31,"p",15),R(32," Check your IP address and location "),y()()()(),m(33,"div",7),z("click",function(){return Y(i),J(r.navigateToQuotes())}),m(34,"div",8)(35,"div",9)(36,"div",21),H(),m(37,"svg",22),F(38,"path",23),y()()(),Z(),m(39,"div",13)(40,"h3",24),R(41," Quotes "),y(),m(42,"p",15),R(43," Get inspired with random quotes "),y()()()(),m(44,"div",7),z("click",function(){return Y(i),J(r.showProfile())}),m(45,"div",8)(46,"div",9)(47,"div",25),H(),m(48,"svg",26),F(49,"path",27),y()()(),Z(),m(50,"div",13)(51,"h3",28),R(52," Profile "),y(),m(53,"p",15),R(54," View your account information "),y()()()()(),m(55,"div",29)(56,"div",30)(57,"div",31)(58,"h2",32),H(),m(59,"svg",33),F(60,"path",23),y(),R(61," Daily Inspiration "),y(),Z(),m(62,"button",34),z("click",function(){return Y(i),J(r.refreshQuote())}),H(),m(63,"svg",35),F(64,"path",36),y()()(),de(65,fD,4,0,"div",37)(66,pD,5,2,"div",38)(67,mD,5,1,"div",39),y()()()()}if(t&2){let i=Sv(7);P(4),q("ngIf",Ke(5,6,r.user$))("ngIfElse",i),P(58),q("disabled",r.quoteLoading),P(3),q("ngIf",r.quoteLoading),P(),q("ngIf",!r.quoteLoading&&r.homeQuote),P(),q("ngIf",!r.quoteLoading&&!r.homeQuote&&r.quoteError)}},dependencies:[He,lt,Gn],encapsulation:2})};var lu=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(se(Ha))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function _D(n,e){n&1&&(m(0,"div",8)(1,"div",9),F(2,"div",10),m(3,"span",11),R(4,"Loading IP information..."),y()()())}function yD(n,e){if(n&1&&(m(0,"div",12)(1,"div",13),H(),m(2,"svg",14),F(3,"path",15),y(),Z(),m(4,"div")(5,"h3",16),R(6,"Error"),y(),m(7,"p",17),R(8),y()()()()),n&2){let t=G();P(8),be(t.error)}}function wD(n,e){n&1&&(H(),m(0,"svg",49),F(1,"path",50),y())}function ED(n,e){n&1&&(H(),m(0,"svg",51),F(1,"path",50),y())}function ID(n,e){if(n&1){let t=Ce();m(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),H(),m(4,"svg",22),F(5,"path",23),y()(),Z(),m(6,"div")(7,"h2",24),R(8,"Your IP Address"),y(),m(9,"p",11),R(10,"Current network information"),y()()(),m(11,"div",25)(12,"div",26)(13,"div")(14,"label",27),R(15,"IP Address"),y(),m(16,"div",28)(17,"code",29),R(18),y(),m(19,"button",30),z("click",function(){Y(t);let i=G();return J(i.copyToClipboard(i.ipInfo.ip))}),H(),m(20,"svg",31),F(21,"path",32),y()()()(),Z(),m(22,"div")(23,"label",27),R(24,"Type"),y(),m(25,"span",33),R(26),y()()(),m(27,"div",26)(28,"div")(29,"label",27),R(30,"Continent"),y(),m(31,"p",34),R(32),y()(),m(33,"div")(34,"label",27),R(35,"Country"),y(),m(36,"p",34),R(37),y()()()()(),m(38,"div",35)(39,"div",19)(40,"h3",36),H(),m(41,"svg",37),F(42,"path",38)(43,"path",39),y(),R(44," Location Details "),y(),Z(),m(45,"div",40)(46,"div",41)(47,"span",42),R(48,"Region:"),y(),m(49,"span",43),R(50),y()(),m(51,"div",41)(52,"span",42),R(53,"City:"),y(),m(54,"span",43),R(55),y()(),m(56,"div",41)(57,"span",42),R(58,"ZIP Code:"),y(),m(59,"span",43),R(60),y()(),m(61,"div",41)(62,"span",42),R(63,"Latitude:"),y(),m(64,"span",43),R(65),y()(),m(66,"div",41)(67,"span",42),R(68,"Longitude:"),y(),m(69,"span",43),R(70),y()()()(),m(71,"div",19)(72,"h3",36),H(),m(73,"svg",37),F(74,"path",44),y(),R(75," Network Information "),y(),Z(),m(76,"div",40)(77,"div",41)(78,"span",42),R(79,"ISP:"),y(),m(80,"span",43),R(81),y()(),m(82,"div",41)(83,"span",42),R(84,"Organization:"),y(),m(85,"span",43),R(86),y()(),m(87,"div",41)(88,"span",42),R(89,"ASN:"),y(),m(90,"span",43),R(91),y()()()()(),m(92,"div",45)(93,"button",46),z("click",function(){Y(t);let i=G();return J(i.refreshIpInfo())}),de(94,wD,2,0,"svg",47)(95,ED,2,0,"svg",48),R(96),y()()()}if(n&2){let t=G();P(18),be(t.ipInfo.ip),P(8),ze(" ",t.ipInfo.type||"Unknown"," "),P(6),be(t.ipInfo.continent_name||"Unknown"),P(5),be(t.ipInfo.country_name||"Unknown"),P(13),be(t.ipInfo.region_name||"Unknown"),P(5),be(t.ipInfo.city||"Unknown"),P(5),be(t.ipInfo.zip||"Unknown"),P(5),be(t.ipInfo.latitude||"Unknown"),P(5),be(t.ipInfo.longitude||"Unknown"),P(11),be((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),P(5),be((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),P(5),be((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown"),P(2),q("disabled",t.isLoading),P(),q("ngIf",!t.isLoading),P(),q("ngIf",t.isLoading),P(),ze(" ",t.isLoading?"Refreshing...":"Refresh IP Info"," ")}}var uu=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)(K(lu))};static \u0275cmp=Ue({type:n,selectors:[["app-ip-lookup"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2","sm:mb-4"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center"],[1,"btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-1.5 sm:mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-1.5 sm:mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2","animate-spin"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),R(4," IP Address Lookup "),y(),m(5,"p",4),R(6," Get detailed information about your current IP address and location "),y()(),de(7,_D,5,0,"div",5)(8,yD,9,1,"div",6)(9,ID,97,16,"div",7),y()()),t&2&&(P(7),q("ngIf",r.isLoading),P(),q("ngIf",r.error),P(),q("ngIf",r.ipInfo&&!r.isLoading))},dependencies:[He,lt,Or],encapsulation:2})};var LI=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(K(fi),K(hi))};static \u0275dir=ot({type:n})}return n})(),TD=(()=>{class n extends LI{static \u0275fac=(()=>{let t;return function(i){return(t||(t=di(n)))(i||n)}})();static \u0275dir=ot({type:n,features:[zn]})}return n})(),FI=new _e("");var bD={provide:FI,useExisting:Bs(()=>vr),multi:!0};function SD(){let n=Hn()?Hn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var AD=new _e(""),vr=(()=>{class n extends LI{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!SD())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(K(fi),K(hi),K(AD,8))};static \u0275dir=ot({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&z("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[zs([bD]),zn]})}return n})();function CD(n){return n==null||xD(n)===0}function xD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var $m=new _e(""),UI=new _e("");function RD(n){return CD(n.value)?{required:!0}:null}function RI(n){return null}function jI(n){return n!=null}function BI(n){return Ua(n)?Ee(n):n}function $I(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function qI(n,e){return e.map(t=>t(n))}function kD(n){return!n.validate}function zI(n){return n.map(e=>kD(e)?e:t=>e.validate(t))}function DD(n){if(!n)return null;let e=n.filter(jI);return e.length==0?null:function(t){return $I(qI(t,e))}}function qm(n){return n!=null?DD(zI(n)):null}function PD(n){if(!n)return null;let e=n.filter(jI);return e.length==0?null:function(t){let r=qI(t,e).map(BI);return rv(r).pipe(le($I))}}function zm(n){return n!=null?PD(zI(n)):null}function kI(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ND(n){return n._rawValidators}function MD(n){return n._rawAsyncValidators}function Um(n){return n?Array.isArray(n)?n:[n]:[]}function hu(n,e){return Array.isArray(n)?n.includes(e):n===e}function DI(n,e){let t=Um(e);return Um(n).forEach(i=>{hu(t,i)||t.push(i)}),t}function PI(n,e){return Um(e).filter(t=>!hu(n,t))}var fu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fs=class extends fu{name;get formDirective(){return null}get path(){return null}},ha=class extends fu{_parent=null;name=null;valueAccessor=null},pu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OD={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},RL=pe(L({},OD),{"[class.ng-submitted]":"isSubmitted"}),ps=(()=>{class n extends pu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(ha,2))};static \u0275dir=ot({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&qs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[zn]})}return n})(),ms=(()=>{class n extends pu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(fs,10))};static \u0275dir=ot({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&qs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[zn]})}return n})();var aa="VALID",du="INVALID",ds="PENDING",ca="DISABLED",gr=class{},mu=class extends gr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ua=class extends gr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},da=class extends gr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},hs=class extends gr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},jm=class extends gr{source;constructor(e){super(),this.source=e}},Bm=class extends gr{source;constructor(e){super(),this.source=e}};function HI(n){return(_u(n)?n.validators:n)||null}function VD(n){return Array.isArray(n)?qm(n):n||null}function GI(n,e){return(_u(e)?e.asyncValidators:n)||null}function LD(n){return Array.isArray(n)?zm(n):n||null}function _u(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function FD(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Se(1e3,"");if(!r[t])throw new Se(1001,"")}function UD(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Se(1002,"")})}var gu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Yt(this.statusReactive)}set status(e){Yt(()=>this.statusReactive.set(e))}_status=Hs(()=>this.statusReactive());statusReactive=qn(void 0);get valid(){return this.status===aa}get invalid(){return this.status===du}get pending(){return this.status==ds}get disabled(){return this.status===ca}get enabled(){return this.status!==ca}errors;get pristine(){return Yt(this.pristineReactive)}set pristine(e){Yt(()=>this.pristineReactive.set(e))}_pristine=Hs(()=>this.pristineReactive());pristineReactive=qn(!0);get dirty(){return!this.pristine}get touched(){return Yt(this.touchedReactive)}set touched(e){Yt(()=>this.touchedReactive.set(e))}_touched=Hs(()=>this.touchedReactive());touchedReactive=qn(!1);get untouched(){return!this.touched}_events=new Ft;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PI(e,this._rawAsyncValidators))}hasValidator(e){return hu(this._rawValidators,e)}hasAsyncValidator(e){return hu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new da(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new da(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ua(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ua(!0,r))}markAsPending(e={}){this.status=ds;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ca,this.errors=null,this._forEachChild(i=>{i.disable(pe(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mu(this.value,r)),this._events.next(new hs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=aa,this._forEachChild(r=>{r.enable(pe(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aa||this.status===ds)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mu(this.value,t)),this._events.next(new hs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ca:aa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ds,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=BI(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new hs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?ca:this.errors?du:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ds)?ds:this._anyControlsHaveStatus(du)?du:aa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ua(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new da(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_u(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=VD(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=LD(this._rawAsyncValidators)}},vu=class extends gu{constructor(e,t,r){super(HI(t),GI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){UD(this,!0,e),Object.keys(e).forEach(r=>{FD(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Hm=new _e("",{providedIn:"root",factory:()=>Gm}),Gm="always";function jD(n,e){return[...e.path,n]}function WI(n,e,t=Gm){KI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$D(n,e),zD(n,e),qD(n,e),BD(n,e)}function NI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function BD(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function KI(n,e){let t=ND(n);e.validator!==null?n.setValidators(kI(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=MD(n);e.asyncValidator!==null?n.setAsyncValidators(kI(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();NI(e._rawValidators,i),NI(e._rawAsyncValidators,i)}function $D(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QI(n,e)})}function qD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function QI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zD(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function HD(n,e){n==null,KI(n,e)}function GD(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function WD(n){return Object.getPrototypeOf(n.constructor)===TD}function KD(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function QD(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===vr?t=s:WD(s)?r=s:i=s}),i||r||t||null}var YD={provide:fs,useExisting:Bs(()=>si)},la=Promise.resolve(),si=(()=>{class n extends fs{callSetDisabledState;get submitted(){return Yt(this.submittedReactive)}_submitted=Hs(()=>this.submittedReactive());submittedReactive=qn(!1);_directives=new Set;form;ngSubmit=new at;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new vu({},qm(t),zm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){la.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),WI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){la.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){la.then(()=>{let r=this._findContainer(t.path),i=new vu({});HD(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){la.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){la.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),KD(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new jm(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Bm(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(K($m,10),K(UI,10),K(Hm,8))};static \u0275dir=ot({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&z("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[zs([YD]),zn]})}return n})();function MI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function OI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var JD=class extends gu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(HI(t),GI(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_u(t)&&(t.nonNullable||t.initialValueIsDefault)&&(OI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){OI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var XD={provide:ha,useExisting:Bs(()=>oi)},VI=Promise.resolve(),oi=(()=>{class n extends ha{_changeDetectorRef;callSetDisabledState;control=new JD;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QD(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),GD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){WI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){VI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xr(r);VI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jD(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(K(fs,9),K($m,10),K(UI,10),K(FI,10),K(pi,8),K(Hm,8))};static \u0275dir=ot({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[zs([XD]),zn,Qt]})}return n})();var gs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ot({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var ZD=(()=>{class n{_validator=RI;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ot({type:n,features:[Qt]})}return n})();var eP={provide:$m,useExisting:Bs(()=>fa),multi:!0};var fa=(()=>{class n extends ZD{required;inputName="required";normalizeInput=xr;createValidator=t=>RD;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=di(n)))(i||n)}})();static \u0275dir=ot({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ja("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[zs([eP]),zn]})}return n})();var tP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({})}return n})();var vs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hm,useValue:t.callSetDisabledState??Gm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({imports:[tP]})}return n})();function nP(n,e){if(n&1&&(m(0,"span",26),R(1),y()),n&2){let t=G(3);P(),qa(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function rP(n,e){if(n&1){let t=Ce();m(0,"form",9),z("ngSubmit",function(){Y(t);let i=G(2);return J(i.saveEditList())}),m(1,"div")(2,"label",10),R(3," Title * "),y(),m(4,"input",11),En("ngModelChange",function(i){Y(t);let s=G(2);return wn(s.editListTitle,i)||(s.editListTitle=i),J(i)}),y()(),m(5,"div")(6,"label",12),R(7," Description (optional) "),y(),m(8,"textarea",13),En("ngModelChange",function(i){Y(t);let s=G(2);return wn(s.editListDescription,i)||(s.editListDescription=i),J(i)}),y()(),m(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),R(13,"Sharing"),y(),m(14,"p",17),R(15," Share this list with others "),de(16,nP,2,2,"span",18),y()(),m(17,"button",19),z("click",function(){Y(t);let i=G(2);return J(i.switchToShare())}),H(),m(18,"svg",20),F(19,"path",21),y(),Z(),m(20,"span"),R(21,"Share"),y()()()(),m(22,"div",22)(23,"button",23),z("click",function(){Y(t);let i=G(2);return J(i.onClose())}),R(24,"Cancel"),y(),m(25,"button",24),H(),m(26,"svg",20),F(27,"path",25),y(),Z(),m(28,"span"),R(29,"Save Changes"),y()()()()}if(n&2){let t=G(2);P(4),yn("ngModel",t.editListTitle),P(4),yn("ngModel",t.editListDescription),P(8),q("ngIf",t.getSharedCount(t.list)>0),P(9),q("disabled",!t.editListTitle.trim())}}function iP(n,e){if(n&1){let t=Ce();m(0,"form",9),z("ngSubmit",function(){Y(t);let i=G(2);return J(i.confirmShare())}),m(1,"div")(2,"label",27),R(3," Email Address "),y(),m(4,"input",28),En("ngModelChange",function(i){Y(t);let s=G(2);return wn(s.shareEmail,i)||(s.shareEmail=i),J(i)}),y()(),m(5,"div",22)(6,"button",23),z("click",function(){Y(t);let i=G(2);return J(i.switchToEdit())}),R(7,"Back"),y(),m(8,"button",24),H(),m(9,"svg",20),F(10,"path",21),y(),Z(),m(11,"span"),R(12,"Share"),y()()()()}if(n&2){let t=G(2);P(4),yn("ngModel",t.shareEmail),P(4),q("disabled",!t.shareEmail.trim())}}function sP(n,e){if(n&1){let t=Ce();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),R(4),y(),m(5,"button",5),z("click",function(){Y(t);let i=G();return J(i.onClose())}),H(),m(6,"svg",6),F(7,"path",7),y()()(),de(8,rP,30,4,"form",8)(9,iP,13,2,"form",8),y()()}if(n&2){let t=G();P(4),be(t.mode==="edit"?"Edit List":"Share List"),P(4),q("ngIf",t.mode==="edit"),P(),q("ngIf",t.mode==="share")}}var _s=class n{open=!1;list=null;mode="edit";save=new at;share=new at;close=new at;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[Qt],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&de(0,sP,10,3,"div",0),t&2&&q("ngIf",r.open)},dependencies:[He,lt,vs,gs,vr,ps,ms,fa,oi,si],encapsulation:2})};var _r=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=su(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(De(e=>{if(!e)return W([]);let t=ri(this.listsCollection,ii("owner","==",e.uid),Lm("updatedAt","desc")),r=ri(this.listsCollection,ii("sharedWith","array-contains",e.email),Lm("updatedAt","desc"));return Ee(Promise.all([ls(t),ls(r)])).pipe(le(([i,s])=>{let o=i.docs.map(f=>pe(L({},f.data()),{id:f.id})),c=s.docs.map(f=>pe(L({},f.data()),{id:f.id}));return[...o,...c].filter((f,g,v)=>g===v.findIndex(x=>x.id===f.id)).sort((f,g)=>new Date(g.updatedAt).getTime()-new Date(f.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(We(1),De(r=>{if(!r)return W(Promise.reject("User not logged in"));let i=new Date,s={title:e,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),Ee(iu(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=hn(this.firestore,`todoLists/${e.id}`),s=e,{id:r}=s,i=Da(s,["id"]);return i.updatedAt=new Date,Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),console.log("Updating list with data:",i),us(t,i)}deleteList(e){let t=hn(this.firestore,`todoLists/${e}`);return ou(t)}shareList(e,t){return E(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let r=hn(this.firestore,`todoLists/${e}`);try{let i=yield au(r);if(!i.exists())throw new Error("List not found");let s=i.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let o=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",o);let c={sharedWith:o,updatedAt:new Date};console.log("TodoListService: Updating list with data:",c),yield us(r,c),console.log("TodoListService: List shared successfully")}catch(i){throw console.error("TodoListService: Error sharing list:",i),i}})}unshareList(e,t){return E(this,null,function*(){let r=hn(this.firestore,`todoLists/${e}`),i=yield au(r);if(!i.exists())throw new Error("List not found");let o=(i.data().sharedWith||[]).filter(c=>c!==t);yield us(r,{sharedWith:o,updatedAt:new Date})})}hasAccess(e){return E(this,null,function*(){return tv(this.authService.user$.pipe(We(1),De(t=>t?Ee(au(hn(this.firestore,`todoLists/${e}`))).pipe(le(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):W(!1))))})}static \u0275fac=function(t){return new(t||n)(se(On),se(qe))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var yu=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=su(this.firestore,"todos")}firestore=$(On);todosCollection;getTodosForList(e){return this.authService.user$.pipe(De(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),W([]);console.log("TodoService: Creating query for todos in list:",e);let r=ri(this.todosCollection,ii("listId","==",e));return console.log("TodoService: Executing todos query"),CI(r,{idField:"id"}).pipe(le(i=>i),vn(i=>(console.error("TodoService: Error loading todos:",i),W([]))))}))}addTodo(e,t){return this.authService.user$.pipe(We(1),De(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),Ee(ls(ri(this.todosCollection,ii("listId","==",e)))).pipe(De(i=>{let s=i.size,o=new Date,c={title:t,completed:!1,listId:e,position:s,createdBy:r.uid,createdAt:o,updatedAt:o};return console.log("Creating todo with data:",c),Ee(iu(this.todosCollection,c))}))):(console.error("User not logged in"),W(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=hn(this.firestore,`todos/${e.id}`),s=e,{id:r}=s,i=Da(s,["id"]);return i.updatedAt=new Date,us(t,i)}deleteTodo(e){let t=hn(this.firestore,`todos/${e}`);return ou(t)}updateTodoPosition(e){let t=Fm(this.firestore);return e.forEach((r,i)=>{if(r.id){let s=hn(this.firestore,`todos/${r.id}`);t.update(s,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return Ee(ls(ri(this.todosCollection,ii("listId","==",e)))).pipe(De(t=>{let r=Fm(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),Ee(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(se(qe),se(_r))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function aP(n,e){n&1&&(m(0,"div",20)(1,"div",21),F(2,"div",22),m(3,"span",9),R(4,"Loading todo list..."),y()()())}function cP(n,e){if(n&1&&(m(0,"div",23)(1,"div",24),H(),m(2,"svg",25),F(3,"path",26),y(),Z(),m(4,"div")(5,"h3",27),R(6,"Error"),y(),m(7,"p",28),R(8),y()()()()),n&2){let t=G();P(8),be(t.error)}}function lP(n,e){n&1&&(H(),m(0,"svg",48),F(1,"path",49),y())}function uP(n,e){n&1&&(H(),m(0,"svg",50),F(1,"path",51),y())}function dP(n,e){n&1&&(m(0,"div",52),H(),m(1,"svg",53),F(2,"path",54),y(),Z(),m(3,"h3",55),R(4,"No todos yet"),y(),m(5,"p",56),R(6,"Add your first todo item above to get started."),y()())}function hP(n,e){if(n&1){let t=Ce();m(0,"div",59)(1,"input",60),z("change",function(){let i=Y(t).$implicit,s=G(3);return J(s.toggleTodo(i))}),y(),m(2,"div",3)(3,"input",61),z("blur",function(i){let s=Y(t).$implicit,o=G(3);return J(o.updateTodoText(s,i))}),y()(),m(4,"button",62),z("click",function(){let i=Y(t).$implicit,s=G(3);return J(s.deleteTodo(i))}),H(),m(5,"svg",12),F(6,"path",63),y()()()}if(n&2){let t=e.$implicit;P(),q("checked",t.completed),P(2),qs("line-through",t.completed)("text-gray-500",t.completed),q("value",t.title)}}function fP(n,e){if(n&1&&(m(0,"div",57),de(1,hP,7,6,"div",58),y()),n&2){let t=G(2);P(),q("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function pP(n,e){if(n&1){let t=Ce();m(0,"div",29)(1,"div",30)(2,"form",31),z("ngSubmit",function(){Y(t);let i=G();return J(i.addTodo())}),m(3,"input",32),En("ngModelChange",function(i){Y(t);let s=G();return wn(s.newTodoText,i)||(s.newTodoText=i),J(i)}),y(),m(4,"button",33),de(5,lP,2,0,"svg",34)(6,uP,2,0,"svg",35),m(7,"span"),R(8),y()()()(),m(9,"div",30)(10,"div",36)(11,"h2",37),R(12,"Todo Items"),y(),m(13,"div",38)(14,"span"),R(15),y(),m(16,"div",39),F(17,"div",40),y()()(),de(18,dP,7,0,"div",41)(19,fP,2,2,"div",42),y(),m(20,"div",30)(21,"h3",43),R(22,"List Information"),y(),m(23,"div",44)(24,"div",45)(25,"span",46),R(26,"Created:"),y(),m(27,"span",47),R(28),Re(29,"date"),y()(),m(30,"div",45)(31,"span",46),R(32,"Last Updated:"),y(),m(33,"span",47),R(34),Re(35,"date"),y()(),m(36,"div",45)(37,"span",46),R(38,"Owner:"),y(),m(39,"span",47),R(40),y()(),m(41,"div",45)(42,"span",46),R(43,"Shared With:"),y(),m(44,"span",47),R(45),y()()()()()}if(n&2){let t=G();P(3),yn("ngModel",t.newTodoText),q("disabled",t.isAdding),P(),q("disabled",!t.newTodoText.trim()||t.isAdding),P(),q("ngIf",!t.isAdding),P(),q("ngIf",t.isAdding),P(2),be(t.isAdding?"Adding...":"Add"),P(7),qa("",t.completedCount," of ",t.todos.length||0," completed"),P(2),Av("width",t.completionPercentage,"%"),P(),q("ngIf",!t.todos.length),P(),q("ngIf",t.todos.length>0),P(9),be(Cr(29,16,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),P(6),be(Cr(35,19,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),P(6),be(t.ownerName||"Loading..."),P(5),ze("",t.todoList.sharedWith.length||0," users")}}var wu=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.todoListService=r;this.todoService=i;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(We(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:r=>{if(console.log("All lists loaded:",r),this.todoList=r.find(i=>i.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(i=>{if(console.log("User has access to list:",i),!i){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let o="Failed to load todos. ";s.code==="permission-denied"?o+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?o+="Please log in to view todos.":o+="Please try again later.",this.error=o,this.isLoading=!1}})}).catch(i=>{console.error("Error checking access:",i),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:r=>{console.error("Error loading todo list:",r),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(pe(L({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let r=t.target.value.trim();!e.id||!r||r===e.title||this.todoService.updateTodo(pe(L({},e),{title:r})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let r=pe(L({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.todoList=r,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(We(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)(K(Nt),K(xe),K(_r),K(yu),K(qe))};static \u0275cmp=Ue({type:n,selectors:[["app-todo"]],decls:27,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","sm:space-x-4","mb-1","sm:mb-2"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","mt-3","sm:mt-0"],[1,"btn-secondary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-1.5","sm:space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),z("click",function(){return r.goBack()}),H(),m(6,"svg",6),F(7,"path",7),y()(),Z(),m(8,"h1",8),R(9),y()(),m(10,"p",9),R(11),y()(),m(12,"div",10)(13,"button",11),z("click",function(){return r.editList()}),H(),m(14,"svg",12),F(15,"path",13),y(),Z(),m(16,"span"),R(17,"Edit List"),y()(),m(18,"button",14),z("click",function(){return r.shareList()}),H(),m(19,"svg",12),F(20,"path",15),y(),Z(),m(21,"span"),R(22,"Share"),y()()()(),de(23,aP,5,0,"div",16)(24,cP,9,1,"div",17)(25,pP,46,22,"div",18),m(26,"app-list-edit-share-modal",19),z("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),y()()()),t&2&&(P(9),be((r.todoList==null?null:r.todoList.title)||"Loading..."),P(2),be((r.todoList==null?null:r.todoList.description)||"No description"),P(12),q("ngIf",r.isLoading),P(),q("ngIf",r.error),P(),q("ngIf",r.todoList&&!r.isLoading),P(),q("open",r.showEditShareModal)("list",r.todoList)("mode",r.modalMode))},dependencies:[He,za,lt,gi,vs,gs,vr,ps,ms,oi,si,_s],encapsulation:2})};var Eu=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(K(qe),K(xe))};static \u0275cmp=Ue({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"h2"),R(2,"Sign in to Todo List"),y(),m(3,"p"),R(4,"Please sign in to access your personal todo list"),y(),m(5,"button",1),z("click",function(){return r.login()}),F(6,"img",2),R(7," Sign in with Google "),y()())},dependencies:[He],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function mP(n,e){n&1&&(m(0,"div",12)(1,"div",13),F(2,"div",14),m(3,"span",15),R(4,"Loading your lists..."),y()()())}function gP(n,e){if(n&1){let t=Ce();m(0,"div",12)(1,"div",16),H(),m(2,"svg",17),F(3,"path",18),y(),Z(),m(4,"h3",19),R(5,"No lists yet"),y(),m(6,"p",4),R(7,"Get started by creating your first todo list."),y(),m(8,"button",20),z("click",function(){Y(t);let i=G();return J(i.openCreateModal())}),H(),m(9,"svg",6),F(10,"path",7),y(),Z(),m(11,"span"),R(12,"Create First List"),y()()()()}}function vP(n,e){if(n&1&&(m(0,"span",44),H(),m(1,"svg",39),F(2,"path",31),y(),R(3),y()),n&2){let t=G().$implicit;P(3),ze(" ",t.sharedWith.length," shared ")}}function _P(n,e){if(n&1){let t=Ce();m(0,"div",23),z("click",function(){let i=Y(t).$implicit,s=G(2);return J(s.openList(i))}),m(1,"div",24)(2,"div",25)(3,"h3",26),R(4),y(),m(5,"p",27),R(6),y()(),m(7,"div",28)(8,"button",29),z("click",function(i){let s=Y(t).$implicit;return G(2).openShareModal(s),J(i.stopPropagation())}),H(),m(9,"svg",30),F(10,"path",31),y()(),Z(),m(11,"button",32),z("click",function(){let i=Y(t).$implicit,s=G(2);return J(s.openEditModal(i))}),H(),m(12,"svg",30),F(13,"path",33),y()(),Z(),m(14,"button",34),z("click",function(i){let s=Y(t).$implicit,o=G(2);return J(o.deleteList(s,i))}),H(),m(15,"svg",30),F(16,"path",35),y()()()(),Z(),m(17,"div",36)(18,"div",37)(19,"span",38),H(),m(20,"svg",39),F(21,"path",18),y(),R(22," View items "),y(),Z(),m(23,"span",38),H(),m(24,"svg",39),F(25,"path",40),y(),R(26),Re(27,"date"),y(),de(28,vP,4,1,"span",41),y(),m(29,"svg",42),F(30,"path",43),y()()()}if(n&2){let t=e.$implicit,r=G(2);P(4),ze(" ",t.title," "),P(2),ze(" ",t.description||"No description"," "),P(20),ze(" ",Cr(27,4,r.getDateFromTimestamp(t.updatedAt),"short")," "),P(2),q("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function yP(n,e){if(n&1&&(m(0,"div",21),de(1,_P,31,7,"div",22),y()),n&2){let t=G();P(),q("ngForOf",t.todoLists)}}function wP(n,e){if(n&1){let t=Ce();m(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),R(4,"Create New List"),y(),m(5,"button",49),z("click",function(){Y(t);let i=G();return J(i.closeCreateModal())}),H(),m(6,"svg",50),F(7,"path",51),y()()(),Z(),m(8,"form",52),z("ngSubmit",function(){Y(t);let i=G();return J(i.createNewList())}),m(9,"div")(10,"label",53),R(11," Title * "),y(),m(12,"input",54),En("ngModelChange",function(i){Y(t);let s=G();return wn(s.newListTitle,i)||(s.newListTitle=i),J(i)}),y()(),m(13,"div")(14,"label",55),R(15," Description (optional) "),y(),m(16,"textarea",56),En("ngModelChange",function(i){Y(t);let s=G();return wn(s.newListDescription,i)||(s.newListDescription=i),J(i)}),y()(),m(17,"div",57)(18,"button",58),z("click",function(){Y(t);let i=G();return J(i.closeCreateModal())}),R(19," Cancel "),y(),m(20,"button",59),H(),m(21,"svg",6),F(22,"path",7),y(),Z(),m(23,"span"),R(24,"Create List"),y()()()()()()}if(n&2){let t=G();P(12),yn("ngModel",t.newListTitle),P(4),yn("ngModel",t.newListDescription),P(4),q("disabled",!t.newListTitle.trim())}}var Iu=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(We(1)).subscribe(r=>{if(console.log("Current user:",r),!r){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:r=>{console.log("List created successfully:",r),this.todoLists.unshift(r),this.closeCreateModal()},error:r=>{console.error("Error creating list:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details});let i="Failed to create list. ";r.code==="permission-denied"?i+="You may not have permission to create lists. Please try logging out and back in.":r.code==="unauthenticated"?i+="Please log in to create lists.":i+="Please try again later.",alert(i)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let r=pe(L({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(r=>r.id!==e.id)}).catch(r=>{console.error("Error deleting list:",r)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)(K(_r),K(qe),K(xe))};static \u0275cmp=Ue({type:n,selectors:[["app-lists"]],decls:18,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),R(5,"Todo Lists"),y(),m(6,"p",4),R(7,"Create and manage your todo lists"),y()(),m(8,"button",5),z("click",function(){return r.openCreateModal()}),H(),m(9,"svg",6),F(10,"path",7),y(),Z(),m(11,"span"),R(12,"New List"),y()()(),de(13,mP,5,0,"div",8)(14,gP,13,0,"div",8)(15,yP,2,1,"div",9),y(),de(16,wP,25,3,"div",10),m(17,"app-list-edit-share-modal",11),z("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),y()()),t&2&&(P(13),q("ngIf",r.isLoading),P(),q("ngIf",!r.isLoading&&r.todoLists.length===0),P(),q("ngIf",!r.isLoading&&r.todoLists.length>0),P(),q("ngIf",r.showCreateModal),P(),q("open",r.showEditShareModal)("list",r.modalList)("mode",r.modalMode))},dependencies:[He,za,lt,gi,vs,gs,vr,ps,ms,fa,oi,si,Or,_s],encapsulation:2})};function EP(n,e){if(n&1&&(Ba(0),m(1,"div",14)(2,"div")(3,"label",15),R(4,"Display Name"),y(),m(5,"div",16),R(6),y()(),m(7,"div")(8,"label",15),R(9,"Email"),y(),m(10,"div",16),R(11),y()(),m(12,"div")(13,"label",15),R(14,"User ID"),y(),m(15,"div",17),R(16),y()(),m(17,"div")(18,"label",15),R(19,"Account Created"),y(),m(20,"div",16),R(21),Re(22,"date"),y()()(),$a()),n&2){let t=e.ngIf;P(6),ze(" ",(t==null?null:t.displayName)||"Not provided"," "),P(5),ze(" ",(t==null?null:t.email)||"Not provided"," "),P(5),ze(" ",(t==null?null:t.uid)||"Not available"," "),P(5),ze(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Cr(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}var Tu=class n{authService=$(qe);router=$(xe);user$=this.authService.user$;logout(){this.authService.signOut(),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ue({type:n,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6","sm:mb-8"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-secondary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),R(4,"Profile"),y(),m(5,"p",4),R(6,"Manage your account information"),y()(),m(7,"div",5)(8,"div",6)(9,"div",2)(10,"h2",7),R(11,"Account Information"),y(),de(12,EP,23,7,"ng-container",8),Re(13,"async"),y(),m(14,"div",9)(15,"h3",10),R(16,"Account Actions"),y(),m(17,"div",11)(18,"button",12),z("click",function(){return r.logout()}),R(19," Sign Out "),y(),m(20,"button",13),z("click",function(){return r.goBack()}),R(21," Back to Home "),y()()()()()()()),t&2&&(P(12),q("ngIf",Ke(13,1,r.user$)))},dependencies:[He,lt,Gn,gi],encapsulation:2})};var ys=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(We(1),le(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(se(qe),se(xe))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var YI=[{path:"",component:cu},{path:"ip-lookup",component:uu},{path:"login",component:Eu},{path:"profile",component:Tu,canActivate:[ys]},{path:"lists",component:Iu,canActivate:[ys]},{path:"todo/:id",component:wu,canActivate:[ys]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-322MNJLG.js").then(n=>n.QuotesComponent)}];var JI={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var XI={providers:[Rv({eventCoalescing:!0}),th(YI),Hv(),N_(()=>M_(JI.firebaseConfig)),AI(()=>xI()),Oy(()=>Ly())]};var bu=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new st(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){iv(this.checkInterval).pipe(De(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new Et(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(se(Ha))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function TP(n,e){if(n&1){let t=Ce();m(0,"div",1)(1,"div",2)(2,"div",3),R(3,"\u{1F504}"),y(),m(4,"div",4)(5,"h4"),R(6,"New version available!"),y(),m(7,"p"),R(8,"A new version of the app is ready. Refresh to get the latest features."),y()(),m(9,"div",5)(10,"button",6),z("click",function(){Y(t);let i=G();return J(i.update())}),R(11,"Update Now"),y(),m(12,"button",7),z("click",function(){Y(t);let i=G();return J(i.dismiss())}),R(13,"Later"),y()()()()}}var Su=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(K(bu))};static \u0275cmp=Ue({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(de(0,TP,14,0,"div",0),Re(1,"async")),t&2&&q("ngIf",Ke(1,1,r.updateAvailable$))},dependencies:[He,lt,Gn],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Au=class n{themeSubject=new st("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");this.setTheme(r)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZI=()=>({exact:!0});function SP(n,e){n&1&&(m(0,"a",24),H(),m(1,"svg",7),F(2,"path",25),y(),Z(),m(3,"span"),R(4,"Profile"),y()())}function AP(n,e){n&1&&(H(),m(0,"svg",26),F(1,"path",27),y())}function CP(n,e){n&1&&(H(),m(0,"svg",26),F(1,"path",28),y())}function xP(n,e){if(n&1){let t=Ce();m(0,"button",29),z("click",function(){Y(t);let i=G();return J(i.login())}),H(),m(1,"svg",7),F(2,"path",30),y(),Z(),m(3,"span"),R(4,"Login"),y()()}}function RP(n,e){if(n&1){let t=Ce();m(0,"button",31),z("click",function(){Y(t);let i=G();return J(i.logout())}),H(),m(1,"svg",7),F(2,"path",32),y(),Z(),m(3,"span"),R(4,"Sign Out"),y()()}}function kP(n,e){n&1&&(H(),m(0,"svg",33),F(1,"path",34),y())}function DP(n,e){n&1&&(H(),m(0,"svg",33),F(1,"path",35),y())}function PP(n,e){if(n&1){let t=Ce();m(0,"a",47),z("click",function(){Y(t);let i=G(2);return J(i.closeMobileMenu())}),H(),m(1,"svg",7),F(2,"path",25),y(),Z(),m(3,"span"),R(4,"Profile"),y()()}}function NP(n,e){n&1&&(H(),m(0,"svg",48),F(1,"path",27),y())}function MP(n,e){n&1&&(H(),m(0,"svg",48),F(1,"path",28),y())}function OP(n,e){if(n&1){let t=Ce();m(0,"button",49),z("click",function(){Y(t);let i=G(2);return i.login(),J(i.closeMobileMenu())}),H(),m(1,"svg",7),F(2,"path",30),y(),Z(),m(3,"span"),R(4,"Login"),y()()}}function VP(n,e){if(n&1){let t=Ce();m(0,"button",50),z("click",function(){Y(t);let i=G(2);return i.logout(),J(i.closeMobileMenu())}),H(),m(1,"svg",7),F(2,"path",32),y(),Z(),m(3,"span"),R(4,"Sign Out"),y()()}}function LP(n,e){if(n&1){let t=Ce();m(0,"div",36)(1,"nav",37)(2,"a",38),z("click",function(){Y(t);let i=G();return J(i.closeMobileMenu())}),H(),m(3,"svg",7),F(4,"path",8),y(),Z(),m(5,"span"),R(6,"Home"),y()(),m(7,"a",39),z("click",function(){Y(t);let i=G();return J(i.closeMobileMenu())}),H(),m(8,"svg",7),F(9,"path",10),y(),Z(),m(10,"span"),R(11,"Lists"),y()(),m(12,"a",40),z("click",function(){Y(t);let i=G();return J(i.closeMobileMenu())}),H(),m(13,"svg",7),F(14,"path",12),y(),Z(),m(15,"span"),R(16,"IP Lookup"),y()(),m(17,"a",41),z("click",function(){Y(t);let i=G();return J(i.closeMobileMenu())}),H(),m(18,"svg",7),F(19,"path",14),y(),Z(),m(20,"span"),R(21,"Quotes"),y()(),de(22,PP,5,0,"a",42),Re(23,"async"),m(24,"button",43),z("click",function(){Y(t);let i=G();return J(i.toggleTheme())}),de(25,NP,2,0,"svg",44),Re(26,"async"),de(27,MP,2,0,"svg",44),Re(28,"async"),m(29,"span"),R(30),Re(31,"async"),y()(),de(32,OP,5,0,"button",45),Re(33,"async"),de(34,VP,5,0,"button",46),Re(35,"async"),y()()}if(n&2){let t=G();P(2),q("routerLinkActiveOptions",gd(19,ZI)),P(20),q("ngIf",Ke(23,7,t.user$)),P(3),q("ngIf",Ke(26,9,t.theme$)==="light"),P(2),q("ngIf",Ke(28,11,t.theme$)==="dark"),P(3),be(Ke(31,13,t.theme$)==="light"?"Dark Mode":"Light Mode"),P(2),q("ngIf",!Ke(33,15,t.user$)),P(2),q("ngIf",Ke(35,17,t.user$))}}var Cu=class n{constructor(e,t,r){this.authService=e;this.themeService=t;this.router=r}isMobileMenuOpen=!1;get user$(){return this.authService.user$}get theme$(){return this.themeService.theme$}logout(){this.authService.signOut(),this.router.navigate(["/"])}login(){this.authService.signInWithGoogle()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}static \u0275fac=function(t){return new(t||n)(K(qe),K(Au),K(xe))};static \u0275cmp=Ue({type:n,selectors:[["app-root"]],decls:45,vars:20,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/lists","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/profile","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/profile","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,r){t&1&&(m(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),R(5," Manu's Playground "),y()(),m(6,"nav",5)(7,"a",6),H(),m(8,"svg",7),F(9,"path",8),y(),Z(),m(10,"span"),R(11,"Home"),y()(),m(12,"a",9),H(),m(13,"svg",7),F(14,"path",10),y(),Z(),m(15,"span"),R(16,"Lists"),y()(),m(17,"a",11),H(),m(18,"svg",7),F(19,"path",12),y(),Z(),m(20,"span"),R(21,"IP Lookup"),y()(),m(22,"a",13),H(),m(23,"svg",7),F(24,"path",14),y(),Z(),m(25,"span"),R(26,"Quotes"),y()(),de(27,SP,5,0,"a",15),Re(28,"async"),m(29,"button",16),z("click",function(){return r.toggleTheme()}),de(30,AP,2,0,"svg",17),Re(31,"async"),de(32,CP,2,0,"svg",17),Re(33,"async"),y(),de(34,xP,5,0,"button",18),Re(35,"async"),de(36,RP,5,0,"button",19),Re(37,"async"),y(),m(38,"button",20),z("click",function(){return r.toggleMobileMenu()}),de(39,kP,2,0,"svg",21)(40,DP,2,0,"svg",21),y()(),de(41,LP,36,20,"div",22),y()(),m(42,"main",23),F(43,"router-outlet"),y(),F(44,"app-update-notification")),t&2&&(P(7),q("routerLinkActiveOptions",gd(19,ZI)),P(20),q("ngIf",Ke(28,9,r.user$)),P(3),q("ngIf",Ke(31,11,r.theme$)==="light"),P(2),q("ngIf",Ke(33,13,r.theme$)==="dark"),P(2),q("ngIf",!Ke(35,15,r.user$)),P(2),q("ngIf",Ke(37,17,r.user$)),P(3),q("ngIf",!r.isMobileMenuOpen),P(),q("ngIf",r.isMobileMenuOpen),P(),q("ngIf",r.isMobileMenuOpen))},dependencies:[He,lt,Gn,ho,Or,Ri,eh,Su],encapsulation:2})};Ad(Cu,XI).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
