var gO=Object.defineProperty,yO=Object.defineProperties;var vO=Object.getOwnPropertyDescriptors;var xd=Object.getOwnPropertySymbols,_O=Object.getPrototypeOf,eC=Object.prototype.hasOwnProperty,tC=Object.prototype.propertyIsEnumerable,EO=Reflect.get;var Xb=(n,e,t)=>e in n?gO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})eC.call(e,t)&&Xb(n,t,e[t]);if(xd)for(var t of xd(e))tC.call(e,t)&&Xb(n,t,e[t]);return n},ne=(n,e)=>yO(n,vO(e));var Kc=(n,e)=>{var t={};for(var r in n)eC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&xd)for(var r of xd(n))e.indexOf(r)<0&&tC.call(n,r)&&(t[r]=n[r]);return t};var _i=(n,e,t)=>EO(_O(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var oy;function sy(){return oy}function Or(n){let e=oy;return oy=n,e}var wO=Symbol("NotFound"),Rd=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Vs(n){return n===wO||n?.name==="\u0275NotFound"}function Od(n,e){return Object.is(n,e)}var wt=null,Md=!1,ay=1,IO=null,Bt=Symbol("SIGNAL");function ve(n){let e=wt;return wt=n,e}function Ld(){return wt}var Eo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function js(n){if(Md)throw new Error("");if(wt===null)return;wt.consumerOnSignalRead(n);let e=wt.nextProducerIndex++;if(Ud(wt),e<wt.producerNode.length&&wt.producerNode[e]!==n&&Yc(wt)){let t=wt.producerNode[e];jd(t,wt.producerIndexOfThis[e])}wt.producerNode[e]!==n&&(wt.producerNode[e]=n,wt.producerIndexOfThis[e]=Yc(wt)?rC(n,wt,e):0),wt.producerLastReadVersion[e]=n.version}function nC(){ay++}function Fd(n){if(!(Yc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ay)){if(!n.producerMustRecompute(n)&&!Zc(n)){Pd(n);return}n.producerRecomputeValue(n),Pd(n)}}function cy(n){if(n.liveConsumerNode===void 0)return;let e=Md;Md=!0;try{for(let t of n.liveConsumerNode)t.dirty||TO(t)}finally{Md=e}}function uy(){return wt?.consumerAllowSignalWrites!==!1}function TO(n){n.dirty=!0,cy(n),n.consumerMarkedDirty?.(n)}function Pd(n){n.dirty=!1,n.lastCleanEpoch=ay}function wo(n){return n&&(n.nextProducerIndex=0),ve(n)}function Us(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Yc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Zc(n){Ud(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Fd(t),r!==t.version))return!0}return!1}function Vd(n){if(Ud(n),Yc(n))for(let e=0;e<n.producerNode.length;e++)jd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function rC(n,e,t){if(iC(n),n.liveConsumerNode.length===0&&oC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=rC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jd(n,e){if(iC(n),n.liveConsumerNode.length===1&&oC(n))for(let r=0;r<n.producerNode.length;r++)jd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ud(i),i.producerIndexOfThis[r]=e}}function Yc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ud(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function iC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oC(n){return n.producerNode!==void 0}function Bd(n){IO?.(n)}function $d(n,e){let t=Object.create(bO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Fd(t),js(t),t.value===Qc)throw t.error;return t.value};return r[Bt]=t,Bd(t),r}var Nd=Symbol("UNSET"),kd=Symbol("COMPUTING"),Qc=Symbol("ERRORED"),bO=ne(V({},Eo),{value:Nd,dirty:!0,error:null,equal:Od,kind:"computed",producerMustRecompute(n){return n.value===Nd||n.value===kd},producerRecomputeValue(n){if(n.value===kd)throw new Error("");let e=n.value;n.value=kd;let t=wo(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==Nd&&e!==Qc&&r!==Qc&&n.equal(e,r)}catch(o){r=Qc,n.error=o}finally{Us(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function CO(){throw new Error}var sC=CO;function aC(n){sC(n)}function ly(n){sC=n}var DO=null;function dy(n,e){let t=Object.create(Hd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>cC(t);return r[Bt]=t,Bd(t),[r,s=>Bs(t,s),s=>hy(t,s)]}function cC(n){return js(n),n.value}function Bs(n,e){uy()||aC(n),n.equal(n.value,e)||(n.value=e,SO(n))}function hy(n,e){uy()||aC(n),Bs(n,e(n.value))}var Hd=ne(V({},Eo),{equal:Od,value:void 0,kind:"signal"});function SO(n){n.version++,nC(),cy(n),DO?.(n)}function fe(n){return typeof n=="function"}function $s(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zd=$s(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Io(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(o){e=o instanceof zd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{uC(o)}catch(s){e=e??[],s instanceof zd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)uC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Io(t,e)}remove(e){let{_finalizers:t}=this;t&&Io(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var fy=Ze.EMPTY;function qd(n){return n instanceof Ze||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function uC(n){fe(n)?n():n.unsubscribe()}var Vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hs={setTimeout(n,e,...t){let{delegate:r}=Hs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Hs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gd(n){Hs.setTimeout(()=>{let{onUnhandledError:e}=Vn;if(e)e(n);else throw n})}function Jc(){}var lC=py("C",void 0,void 0);function dC(n){return py("E",void 0,n)}function hC(n){return py("N",n,void 0)}function py(n,e,t){return{kind:n,value:e,error:t}}var To=null;function zs(n){if(Vn.useDeprecatedSynchronousErrorHandling){let e=!To;if(e&&(To={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=To;if(To=null,t)throw r}}else n()}function fC(n){Vn.useDeprecatedSynchronousErrorHandling&&To&&(To.errorThrown=!0,To.error=n)}var bo=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qd(e)&&e.add(this)):this.destination=RO}static create(e,t,r){return new Ei(e,t,r)}next(e){this.isStopped?gy(hC(e),this):this._next(e)}error(e){this.isStopped?gy(dC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gy(lC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AO=Function.prototype.bind;function my(n,e){return AO.call(n,e)}var yy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Wd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Wd(r)}else Wd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Wd(t)}}},Ei=class extends bo{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Vn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&my(e.next,o),error:e.error&&my(e.error,o),complete:e.complete&&my(e.complete,o)}):i=e}this.destination=new yy(i)}};function Wd(n){Vn.useDeprecatedSynchronousErrorHandling?fC(n):Gd(n)}function xO(n){throw n}function gy(n,e){let{onStoppedNotification:t}=Vn;t&&Hs.setTimeout(()=>t(n,e))}var RO={closed:!0,next:Jc,error:xO,complete:Jc};var qs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ln(n){return n}function Kd(...n){return vy(n)}function vy(n){return n.length===0?ln:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=NO(t)?t:new Ei(t,r,i);return zs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=pC(r),new r((i,o)=>{let s=new Ei({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[qs](){return this}pipe(...t){return vy(t)(this)}toPromise(t){return t=pC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pC(n){var e;return(e=n??Vn.Promise)!==null&&e!==void 0?e:Promise}function MO(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function NO(n){return n&&n instanceof bo||MO(n)&&qd(n)}function _y(n){return fe(n?.lift)}function De(n){return e=>{if(_y(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new Ey(n,e,t,r,i)}var Ey=class extends bo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gs(){return De((n,e)=>{let t=null;n._refCount++;let r=Te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ws=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(Te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return Gs()(this)}};var mC=$s(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Qd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mC}next(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?fy:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,Io(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new Qd(e,t),n})(),Qd=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:fy}};var at=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wy={now(){return(wy.delegate||Date).now()},delegate:void 0};var Yd=class extends Ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Xc={setInterval(n,e,...t){let{delegate:r}=Xc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ks=class extends Yd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Xc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Io(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Qs.now=wy.now;var Ys=class extends Qs{constructor(e,t=Qs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Zs=new Ys(Ks),Iy=Zs;var Zd=class extends Ks{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Jd=class extends Ys{};var Ty=new Jd(Zd);var tn=new ie(n=>n.complete());function Xd(n){return n&&fe(n.schedule)}function gC(n){return n[n.length-1]}function eh(n){return fe(gC(n))?n.pop():void 0}function wi(n){return Xd(gC(n))?n.pop():void 0}function th(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function yC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(n){return this instanceof Co?(this.v=n,this):new Co(n)}function _C(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(k){return new Promise(function(R,j){o.push([y,k,R,j])>1||u(y,k)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(k){m(o[0][3],k)}}function l(y){y.value instanceof Co?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function EC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yC=="function"?yC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var nh=n=>n&&typeof n.length=="number"&&typeof n!="function";function rh(n){return fe(n?.then)}function ih(n){return fe(n[qs])}function oh(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function sh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ah=kO();function ch(n){return fe(n?.[ah])}function uh(n){return _C(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Co(t.read());if(i)return yield Co(void 0);yield yield Co(r)}}finally{t.releaseLock()}})}function lh(n){return fe(n?.getReader)}function dt(n){if(n instanceof ie)return n;if(n!=null){if(ih(n))return PO(n);if(nh(n))return OO(n);if(rh(n))return LO(n);if(oh(n))return wC(n);if(ch(n))return FO(n);if(lh(n))return VO(n)}throw sh(n)}function PO(n){return new ie(e=>{let t=n[qs]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OO(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LO(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gd)})}function FO(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wC(n){return new ie(e=>{jO(n,e).catch(t=>e.error(t))})}function VO(n){return wC(uh(n))}function jO(n,e){var t,r,i,o;return vC(this,void 0,void 0,function*(){try{for(t=EC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function nn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ii(n,e=0){return De((t,r)=>{t.subscribe(Te(r,i=>nn(r,n,()=>r.next(i),e),()=>nn(r,n,()=>r.complete(),e),i=>nn(r,n,()=>r.error(i),e)))})}function Ti(n,e=0){return De((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IC(n,e){return dt(n).pipe(Ti(e),Ii(e))}function TC(n,e){return dt(n).pipe(Ti(e),Ii(e))}function bC(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function CC(n,e){return new ie(t=>{let r;return nn(t,e,()=>{r=n[ah](),nn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function dh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{nn(t,e,()=>{let r=n[Symbol.asyncIterator]();nn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function DC(n,e){return dh(uh(n),e)}function SC(n,e){if(n!=null){if(ih(n))return IC(n,e);if(nh(n))return bC(n,e);if(rh(n))return TC(n,e);if(oh(n))return dh(n,e);if(ch(n))return CC(n,e);if(lh(n))return DC(n,e)}throw sh(n)}function we(n,e){return e?SC(n,e):dt(n)}function Q(...n){let e=wi(n);return we(n,e)}function Js(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function by(n){return!!n&&(n instanceof ie||fe(n.lift)&&fe(n.subscribe))}var jn=$s(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Cy(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Ei({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new jn)}});n.subscribe(o)})}function AC(n){return n instanceof Date&&!isNaN(n)}function re(n,e){return De((t,r)=>{let i=0;t.subscribe(Te(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:UO}=Array;function BO(n,e){return UO(e)?n(...e):n(e)}function hh(n){return re(e=>BO(n,e))}var{isArray:$O}=Array,{getPrototypeOf:HO,prototype:zO,keys:qO}=Object;function fh(n){if(n.length===1){let e=n[0];if($O(e))return{args:e,keys:null};if(GO(e)){let t=qO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function GO(n){return n&&typeof n=="object"&&HO(n)===zO}function ph(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function eu(...n){let e=wi(n),t=eh(n),{args:r,keys:i}=fh(n);if(r.length===0)return we([],e);let o=new ie(WO(r,e,i?s=>ph(i,s):ln));return t?o.pipe(hh(t)):o}function WO(n,e,t=ln){return r=>{xC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xC(e,()=>{let l=we(n[u],e),h=!1;l.subscribe(Te(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xC(n,e,t){n?nn(t,n,e):e()}function RC(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=k=>l<r?S(k):u.push(k),S=k=>{o&&e.next(k),l++;let R=!1;dt(t(k,h++)).subscribe(Te(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let j=u.shift();s?nn(e,s,()=>S(j)):S(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(Te(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ct(n,e,t=1/0){return fe(e)?ct((r,i)=>re((o,s)=>e(r,o,i,s))(dt(n(r,i))),t):(typeof e=="number"&&(t=e),De((r,i)=>RC(r,i,n,t)))}function bi(n=1/0){return ct(ln,n)}function MC(){return bi(1)}function Xs(...n){return MC()(we(n,wi(n)))}function tu(n){return new ie(e=>{dt(n()).subscribe(e)})}function Dy(...n){let e=eh(n),{args:t,keys:r}=fh(n),i=new ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;dt(t[h]).subscribe(Te(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ph(r,a):a),o.complete())}))}});return e?i.pipe(hh(e)):i}function NC(n=0,e,t=Iy){let r=-1;return e!=null&&(Xd(e)?t=e:r=e),new ie(i=>{let o=AC(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Sy(n=0,e=Zs){return n<0&&(n=0),NC(n,n,e)}function kt(n,e){return De((t,r)=>{let i=0;t.subscribe(Te(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Un(n){return De((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Te(t,void 0,void 0,s=>{o=dt(n(s,Un(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function kC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(Te(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ar(n,e){return fe(e)?ct(n,e,1):ct(n,1)}function Ci(n){return De((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Je(n){return n<=0?()=>tn:De((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function mh(n=KO){return De((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function KO(){return new jn}function Do(n){return De((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Lr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?kt((i,o)=>n(i,o,r)):ln,Je(1),t?Ci(e):mh(()=>new jn))}function ea(n){return n<=0?()=>tn:De((e,t)=>{let r=[];e.subscribe(Te(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ay(n,e){let t=arguments.length>=2;return r=>r.pipe(n?kt((i,o)=>n(i,o,r)):ln,ea(1),t?Ci(e):mh(()=>new jn))}function gh(n,e){return De(kC(n,e,arguments.length>=2,!0))}function yh(...n){let e=wi(n);return De((t,r)=>{(e?Xs(n,t,e):Xs(n,t)).subscribe(r)})}function Ve(n,e){return De((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Te(r,u=>{i?.unsubscribe();let l=0,h=o++;dt(n(u,h)).subscribe(i=Te(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vh(n){return De((e,t)=>{dt(n).subscribe(Te(t,()=>t.complete(),Jc)),!t.closed&&e.subscribe(t)})}function Ct(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ln}function PC(n){let e=ve(null);try{return n()}finally{ve(e)}}var Th="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,t){super(ou(e,t)),this.code=e}};function QO(n){return`NG0${Math.abs(n)}`}function ou(n,e){return`${QO(n)}${e?": "+e:""}`}var jr=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("")}function VC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(rn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function By(n,e){return n?e?`${n} ${e}`:n:e||""}var YO=Ge({__forward_ref__:Ge});function Ur(n){return n.__forward_ref__=Ur,n.toString=function(){return rn(this())},n}function Pt(n){return $y(n)?n():n}function $y(n){return typeof n=="function"&&n.hasOwnProperty(YO)&&n.__forward_ref__===Ur}function jC(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function su(n){return ZO(n,bh)}function Hy(n){return su(n)!==null}function ZO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function JO(n){let e=n?.[bh]??null;return e||null}function Ry(n){return n&&n.hasOwnProperty(Eh)?n[Eh]:null}var bh=Ge({\u0275prov:Ge}),Eh=Ge({\u0275inj:Ge}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zy(n){return n&&!!n.\u0275providers}var qy=Ge({\u0275cmp:Ge}),Gy=Ge({\u0275dir:Ge}),Wy=Ge({\u0275pipe:Ge}),Ky=Ge({\u0275mod:Ge}),ru=Ge({\u0275fac:Ge}),Mo=Ge({__NG_ELEMENT_ID__:Ge}),OC=Ge({__NG_ENV_ID__:Ge});function No(n){return typeof n=="string"?n:n==null?"":String(n)}function UC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():No(n)}function Qy(n,e){throw new B(-200,n)}function Ch(n,e){throw new B(-201,!1)}var My;function BC(){return My}function Qt(n){let e=My;return My=n,e}function Yy(n,e,t){let r=su(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ch(n,"Injector")}var XO={},So=XO,Ny="__NG_DI_FLAG__",ky=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ao(t)||0;try{return this.injector.get(e,r&8?null:So,r)}catch(i){if(Vs(i))return i;throw i}}},wh="ngTempTokenPath",eL="ngTokenPath",tL=/\n/gm,nL="\u0275",LC="__source";function rL(n,e=0){let t=sy();if(t===void 0)throw new B(-203,!1);if(t===null)return Yy(n,void 0,e);{let r=iL(e),i=t.retrieve(n,r);if(Vs(i)){if(r.optional)return null;throw i}return i}}function q(n,e=0){return(BC()||rL)(Pt(n),e)}function P(n,e){return q(n,Ao(e))}function Ao(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function iL(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Py(n){let e=[];for(let t=0;t<n.length;t++){let r=Pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=oL(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function Zy(n,e){return n[Ny]=e,n.prototype[Ny]=e,n}function oL(n){return n[Ny]}function sL(n,e,t,r){let i=n[wh];throw e[LC]&&i.unshift(e[LC]),n.message=aL(`
`+n.message,i,t,r),n[eL]=i,n[wh]=null,n}function aL(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==nL?n.slice(2):n;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):rn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(tL,`
  `)}`}function Di(n,e){let t=n.hasOwnProperty(ru);return t?n[ru]:null}function $C(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function HC(n){return n.flat(Number.POSITIVE_INFINITY)}function Dh(n,e){n.forEach(t=>Array.isArray(t)?Dh(t,e):e(t))}function Jy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function au(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function qC(n,e,t){let r=na(n,e);return r>=0?n[r|1]=t:(r=~r,zC(n,r,e,t)),r}function Sh(n,e){let t=na(n,e);if(t>=0)return n[t|1]}function na(n,e){return cL(n,e,1)}function cL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ai={},dn=[],xi=new H(""),Xy=new H("",-1),ev=new H(""),iu=class{get(e,t=So){if(t===So)throw new Rd(`NullInjectorError: No provider for ${rn(e)}!`);return t}};function tv(n){return n[Ky]||null}function Br(n){return n[qy]||null}function nv(n){return n[Gy]||null}function GC(n){return n[Wy]||null}function on(n){return{\u0275providers:n}}function WC(...n){return{\u0275providers:rv(!0,n),\u0275fromNgModule:!0}}function rv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Dh(e,s=>{let a=s;Ih(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&KC(i,o),t}function KC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];iv(i,o=>{e(o,r)})}}function Ih(n,e,t,r){if(n=Pt(n),!n)return!1;let i=null,o=Ry(n),s=!o&&Br(n);if(!o&&!s){let u=n.ngModule;if(o=Ry(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ih(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dh(o.imports,h=>{Ih(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&KC(l,e)}if(!a){let l=Di(i)||(()=>new i);e({provide:i,useFactory:l,deps:dn},i),e({provide:ev,useValue:i,multi:!0},i),e({provide:xi,useValue:()=>q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;iv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function iv(n,e){for(let t of n)zy(t)&&(t=t.\u0275providers),Array.isArray(t)?iv(t,e):e(t)}var uL=Ge({provide:String,useValue:Ge});function QC(n){return n!==null&&typeof n=="object"&&uL in n}function lL(n){return!!(n&&n.useExisting)}function dL(n){return!!(n&&n.useFactory)}function xo(n){return typeof n=="function"}function YC(n){return!!n.useClass}var cu=new H(""),_h={},FC={},xy;function uu(){return xy===void 0&&(xy=new iu),xy}var Ke=class{},Ro=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ly(e,s=>this.processProvider(s)),this.records.set(Xy,ta(void 0,this)),i.has("environment")&&this.records.set(Ke,ta(void 0,this));let o=this.records.get(cu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ev,dn,{self:!0}))}retrieve(e,t){let r=Ao(t)||0;try{return this.get(e,So,r)}catch(i){if(Vs(i))return i;throw i}}destroy(){nu(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return nu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){nu(this);let t=Or(this),r=Qt(void 0),i;try{return e()}finally{Or(t),Qt(r)}}get(e,t=So,r){if(nu(this),e.hasOwnProperty(OC))return e[OC](this);let i=Ao(r),o,s=Or(this),a=Qt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=gL(e)&&su(e);h&&this.injectableDefInScope(h)?l=ta(Oy(e),_h):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?uu():this.parent;return t=i&8&&t===So?null:t,u.get(e,t)}catch(u){if(Vs(u)){if((u[wh]=u[wh]||[]).unshift(rn(e)),s)throw u;return sL(u,e,"R3InjectorError",this.source)}else throw u}finally{Qt(a),Or(s)}}resolveInjectorInitializers(){let e=ve(null),t=Or(this),r=Qt(void 0),i;try{let o=this.get(xi,dn,{self:!0});for(let s of o)s()}finally{Or(t),Qt(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pt(e);let t=xo(e)?e:Pt(e&&e.provide),r=fL(e);if(!xo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ta(void 0,_h,!0),i.factory=()=>Py(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===FC?Qy(rn(e)):t.value===_h&&(t.value=FC,t.value=t.factory()),typeof t.value=="object"&&t.value&&mL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Oy(n){let e=su(n),t=e!==null?e.factory:Di(n);if(t!==null)return t;if(n instanceof H)throw new B(204,!1);if(n instanceof Function)return hL(n);throw new B(204,!1)}function hL(n){if(n.length>0)throw new B(204,!1);let t=JO(n);return t!==null?()=>t.factory(n):()=>new n}function fL(n){if(QC(n))return ta(void 0,n.useValue);{let e=ov(n);return ta(e,_h)}}function ov(n,e,t){let r;if(xo(n)){let i=Pt(n);return Di(i)||Oy(i)}else if(QC(n))r=()=>Pt(n.useValue);else if(dL(n))r=()=>n.useFactory(...Py(n.deps||[]));else if(lL(n))r=()=>q(Pt(n.useExisting));else{let i=Pt(n&&(n.useClass||n.provide));if(pL(n))r=()=>new i(...Py(n.deps));else return Di(i)||Oy(i)}return r}function nu(n){if(n.destroyed)throw new B(205,!1)}function ta(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pL(n){return!!n.deps}function mL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function gL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Ly(n,e){for(let t of n)Array.isArray(t)?Ly(t,e):t&&zy(t)?Ly(t.\u0275providers,e):e(t)}function ht(n,e){let t;n instanceof Ro?(nu(n),t=n):t=new ky(n);let r,i=Or(t),o=Qt(void 0);try{return e()}finally{Or(i),Qt(o)}}function sv(){return BC()!==void 0||sy()!=null}function av(n){if(!sv())throw new B(-203,!1)}var $n=0,ge=1,le=2,Dt=3,bn=4,Cn=5,lu=6,ra=7,$t=8,ko=9,cr=10,et=11,ia=12,cv=13,Po=14,Dn=15,Ri=16,Oo=17,ur=18,du=19,uv=20,Fr=21,Ah=22,hu=23,hn=24,Lo=25,Ht=26,ZC=1;var Mi=7,fu=8,Fo=9,Yt=10;function lr(n){return Array.isArray(n)&&typeof n[ZC]=="object"}function Hn(n){return Array.isArray(n)&&n[ZC]===!0}function xh(n){return(n.flags&4)!==0}function Ni(n){return n.componentOffset>-1}function pu(n){return(n.flags&1)===1}function dr(n){return!!n.template}function oa(n){return(n[le]&512)!==0}function Vo(n){return(n[le]&256)===256}var lv="svg",JC="math";function Sn(n){for(;Array.isArray(n);)n=n[$n];return n}function dv(n,e){return Sn(e[n])}function zn(n,e){return Sn(e[n.index])}function Rh(n,e){return n.data[e]}function Mh(n,e){return n[e]}function hv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function An(n,e){let t=e[n];return lr(t)?t:t[$n]}function XC(n){return(n[le]&4)===4}function Nh(n){return(n[le]&128)===128}function eD(n){return Hn(n[Dt])}function jo(n,e){return e==null?null:n[e]}function fv(n){n[Oo]=0}function pv(n){n[le]&1024||(n[le]|=1024,Nh(n)&&sa(n))}function tD(n,e){for(;n>0;)e=e[Po],n--;return e}function mu(n){return!!(n[le]&9216||n[hn]?.dirty)}function kh(n){n[cr].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),mu(n)&&sa(n)}function sa(n){n[cr].changeDetectionScheduler?.notify(0);let e=Si(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!Nh(e)));)e=Si(e)}function mv(n,e){if(Vo(n))throw new B(911,!1);n[Fr]===null&&(n[Fr]=[]),n[Fr].push(e)}function nD(n,e){if(n[Fr]===null)return;let t=n[Fr].indexOf(e);t!==-1&&n[Fr].splice(t,1)}function Si(n){let e=n[Dt];return Hn(e)?e[Dt]:e}function gv(n){return n[ra]??=[]}function yv(n){return n.cleanup??=[]}function rD(n,e,t,r){let i=gv(e);i.push(t),n.firstCreatePass&&yv(n).push(r,i.length-1)}var me={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null},gu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(gu||{}),yL=0,Fy=!1;function iD(){return me.lFrame.elementDepthCount}function oD(){me.lFrame.elementDepthCount++}function sD(){me.lFrame.elementDepthCount--}function Ph(){return me.bindingsEnabled}function aD(){return me.skipHydrationRootTNode!==null}function cD(n){return me.skipHydrationRootTNode===n}function uD(){me.skipHydrationRootTNode=null}function be(){return me.lFrame.lView}function It(){return me.lFrame.tView}function ae(n){return me.lFrame.contextLView=n,n[$t]}function ce(n){return me.lFrame.contextLView=null,n}function St(){let n=vv();for(;n!==null&&n.type===64;)n=n.parent;return n}function vv(){return me.lFrame.currentTNode}function lD(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ki(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function Oh(){return me.lFrame.isParent}function _v(){me.lFrame.isParent=!1}function dD(){return me.lFrame.contextLView}function Ev(n){jC("Must never be called in production mode"),yL=n}function wv(){return Fy}function Iv(n){let e=Fy;return Fy=n,e}function Lh(){let n=me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function hD(){return me.lFrame.bindingIndex}function fD(n){return me.lFrame.bindingIndex=n}function yu(){return me.lFrame.bindingIndex++}function Tv(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function pD(){return me.lFrame.inI18n}function mD(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fh(e)}function gD(){return me.lFrame.currentDirectiveIndex}function Fh(n){me.lFrame.currentDirectiveIndex=n}function yD(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bv(){return me.lFrame.currentQueryIndex}function Vh(n){me.lFrame.currentQueryIndex=n}function vL(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Cn]:null}function Cv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=vL(o),i===null||(o=o[Po],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=vD();return r.currentTNode=e,r.lView=n,!0}function jh(n){let e=vD(),t=n[ge];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?_D(n):e}function _D(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ED(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dv=ED;function Uh(){let n=ED();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wD(n){return(me.lFrame.contextLView=tD(n,me.lFrame.contextLView))[$t]}function Pi(){return me.lFrame.selectedIndex}function Oi(n){me.lFrame.selectedIndex=n}function Bh(){let n=me.lFrame;return Rh(n.tView,n.selectedIndex)}function X(){me.lFrame.currentNamespace=lv}function de(){_L()}function _L(){me.lFrame.currentNamespace=null}function ID(){return me.lFrame.currentNamespace}var TD=!0;function vu(){return TD}function _u(n){TD=n}function Vy(n,e=null,t=null,r){let i=Sv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Sv(n,e=null,t=null,r,i=new Set){let o=[t||dn,WC(n)];return r=r||(typeof n=="object"?void 0:rn(n)),new Ro(o,e||uu(),r||null,i)}var Xe=class n{static THROW_IF_NOT_FOUND=So;static NULL=new iu;static create(e,t){if(Array.isArray(e))return Vy({name:""},t,e,"");{let r=e.name??"";return Vy({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:n,providedIn:"any",factory:()=>q(Xy)});static __NG_ELEMENT_ID__=-1},tt=new H(""),$r=(()=>{class n{static __NG_ELEMENT_ID__=EL;static __NG_ENV_ID__=t=>t}return n})(),jy=class extends $r{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Vo(this._lView)}onDestroy(e){let t=this._lView;return mv(t,e),()=>nD(t,e)}};function EL(){return new jy(be())}var Bn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Zt=new H("",{providedIn:"root",factory:()=>{let n=P(Ke),e;return t=>{e??=n.get(Bn),e.handleError(t)}}}),bD={provide:xi,useValue:()=>void P(Bn),multi:!0};function Av(n){return typeof n=="function"&&n[Bt]!==void 0}function hr(n,e){let[t,r,i]=dy(n,e?.equal),o=t,s=o[Bt];return o.set=r,o.update=i,o.asReadonly=CD.bind(o),o}function CD(){let n=this[Bt];if(n.readonlyFn===void 0){let e=()=>this();e[Bt]=n,n.readonlyFn=e}return n.readonlyFn}function xv(n){return Av(n)&&typeof n.set=="function"}var Vr=class{},Eu=new H("",{providedIn:"root",factory:()=>!1});var Rv=new H(""),Mv=new H("");var $h=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=wL}return n})();function wL(){return new $h(be(),St())}var Hr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new at(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),Li=(()=>{class n{internalPendingTasks=P(Hr);scheduler=P(Vr);errorHandler=P(Zt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})();function wu(...n){}var Nv=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new Uy})}return n})(),Uy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function da(n){return{toString:n}.toString()}var Hh="__parameters__";function SL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function nS(n,e,t){return da(()=>{let r=SL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Hh)?u[Hh]:Object.defineProperty(u,Hh,{value:[]})[Hh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var sn=Zy(nS("Optional"),8);var rS=Zy(nS("SkipSelf"),4);function AL(n){return typeof n=="function"}var Yh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function iS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var xn=(()=>{let n=()=>oS;return n.ngInherit=!0,n})();function oS(n){return n.type.prototype.ngOnChanges&&(n.setInput=RL),xL}function xL(){let n=aS(this),e=n?.current;if(e){let t=n.previous;if(t===Ai)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RL(n,e,t,r,i){let o=this.declaredInputs[r],s=aS(n)||ML(n,{previous:Ai,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Yh(l&&l.currentValue,t,u===Ai),iS(n,e,i,t)}var sS="__ngSimpleChanges__";function aS(n){return n[sS]||null}function ML(n,e){return n[sS]=e}var DD=[];var Pe=function(n,e=null,t){for(let r=0;r<DD.length;r++){let i=DD[r];i(n,e,t)}};function NL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=oS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function g_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Gh(n,e,t){cS(n,e,3,t)}function Wh(n,e,t,r){(n[le]&3)===t&&cS(n,e,t,r)}function kv(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function cS(n,e,t,r){let i=r!==void 0?n[Oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Oo]+=65536),(a<o||o==-1)&&(kL(n,t,e,u),n[Oo]=(n[Oo]&4294901760)+u+2),u++}function SD(n,e){Pe(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),Pe(5,n,e)}}function kL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[le]>>14<n[Oo]>>16&&(n[le]&3)===e&&(n[le]+=16384,SD(a,o)):SD(a,o)}var ca=-1,$o=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function PL(n){return(n.flags&8)!==0}function OL(n){return(n.flags&16)!==0}function LL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];FL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function uS(n){return n===3||n===4||n===6}function FL(n){return n.charCodeAt(0)===64}function ua(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?AD(n,t,i,null,e[++r]):AD(n,t,i,null,null))}}return n}function AD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function lS(n){return n!==ca}function Zh(n){return n&32767}function VL(n){return n>>16}function Jh(n,e){let t=VL(n),r=e;for(;t>0;)r=r[Po],t--;return r}var zv=!0;function Xh(n){let e=zv;return zv=n,e}var jL=256,dS=jL-1,hS=5,UL=0,fr={};function BL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Mo)&&(r=t[Mo]),r==null&&(r=t[Mo]=UL++);let i=r&dS,o=1<<i;e.data[n+(i>>hS)]|=o}function ef(n,e){let t=fS(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Pv(r.data,n),Pv(e,null),Pv(r.blueprint,null));let i=y_(n,e),o=n.injectorIndex;if(lS(i)){let s=Zh(i),a=Jh(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Pv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function y_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vS(i),r===null)return ca;if(t++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ca}function qv(n,e,t){BL(n,e,t)}function $L(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(uS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function pS(n,e,t){if(t&8||n!==void 0)return n;Ch(e,"NodeInjector")}function mS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ko],o=Qt(void 0);try{return i?i.get(e,r,t&8):Yy(e,r,t&8)}finally{Qt(o)}}return pS(r,e,t)}function gS(n,e,t,r=0,i){if(n!==null){if(e[le]&2048&&!(r&2)){let s=GL(n,e,t,r,fr);if(s!==fr)return s}let o=yS(n,e,t,r,fr);if(o!==fr)return o}return mS(e,t,r,i)}function yS(n,e,t,r,i){let o=zL(t);if(typeof o=="function"){if(!Cv(e,n,r))return r&1?pS(i,t,r):mS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ch(t);else return s}finally{Dv()}}else if(typeof o=="number"){let s=null,a=fS(n,e),u=ca,l=r&1?e[Dn][Cn]:null;for((a===-1||r&4)&&(u=a===-1?y_(n,e):e[a+8],u===ca||!RD(r,!1)?a=-1:(s=e[ge],a=Zh(u),e=Jh(u,e)));a!==-1;){let h=e[ge];if(xD(o,a,h.data)){let p=HL(a,e,t,s,r,l);if(p!==fr)return p}u=e[a+8],u!==ca&&RD(r,e[ge].data[a+8]===l)&&xD(o,a,e)?(s=h,a=Zh(u),e=Jh(u,e)):a=-1}}return i}function HL(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?Ni(a)&&zv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Kh(a,s,t,u,l);return h!==null?bu(e,s,h,a):fr}function Kh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&dr(y)&&y.type===t)return u}return null}function bu(n,e,t,r){let i=n[t],o=e.data;if(i instanceof $o){let s=i;s.resolving&&Qy(UC(o[t]));let a=Xh(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?Qt(s.injectImpl):null,p=Cv(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&NL(t,o[t],e)}finally{h!==null&&Qt(h),Xh(a),s.resolving=!1,Dv()}}return i}function zL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Mo)?n[Mo]:void 0;return typeof e=="number"?e>=0?e&dS:qL:e}function xD(n,e,t){let r=1<<n;return!!(t[e+(n>>hS)]&r)}function RD(n,e){return!(n&2)&&!(n&1&&e)}var Bo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gS(this._tNode,this._lView,e,Ao(r),t)}};function qL(){return new Bo(St(),be())}function Wo(n){return da(()=>{let e=n.prototype.constructor,t=e[ru]||Gv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ru]||Gv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gv(n){return $y(n)?()=>{let e=Gv(Pt(n));return e&&e()}:Di(n)}function GL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!oa(s);){let a=yS(o,s,t,r|2,fr);if(a!==fr)return a;let u=o.parent;if(!u){let l=s[uv];if(l){let h=l.get(t,fr,r);if(h!==fr)return h}u=vS(s),s=s[Po]}o=u}return i}function vS(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Cn]:null}function Au(n){return $L(St(),n)}function WL(){return ha(St(),be())}function ha(n,e){return new fn(zn(n,e))}var fn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=WL}return n})();function KL(n){return n instanceof fn?n.nativeElement:n}function QL(){return this._results[Symbol.iterator]()}var tf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new st}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=HC(e);(this._changesDetected=!$C(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=QL};function _S(n){return(n.flags&128)===128}var v_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(v_||{}),ES=new Map,YL=0;function ZL(){return YL++}function JL(n){ES.set(n[du],n)}function Wv(n){ES.delete(n[du])}var MD="__ngContext__";function fa(n,e){lr(e)?(n[MD]=e[du],JL(e)):n[MD]=e}function wS(n){return TS(n[ia])}function IS(n){return TS(n[bn])}function TS(n){for(;n!==null&&!Hn(n);)n=n[bn];return n}var Kv;function __(n){Kv=n}function bS(){if(Kv!==void 0)return Kv;if(typeof document<"u")return document;throw new B(210,!1)}var pf=new H("",{providedIn:"root",factory:()=>XL}),XL="ng",mf=new H(""),Ui=new H("",{providedIn:"platform",factory:()=>"unknown"});var gf=new H("",{providedIn:"root",factory:()=>bS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var eF="h",tF="b";var CS=!1,DS=new H("",{providedIn:"root",factory:()=>CS});var nF=(n,e,t,r)=>{};function rF(n,e,t,r){nF(n,e,t,r)}var iF=()=>null;function SS(n,e,t=!1){return iF(n,e,t)}function AS(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Vh(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function Qv(n,e,t){Vh(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function E_(n,e,t){if(xh(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}var zr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zr||{});var zh;function oF(){if(zh===void 0&&(zh=null,jr.trustedTypes))try{zh=jr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zh}function ND(n){return oF()?.createScriptURL(n)||n}var nf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Th})`}};function xu(n){return n instanceof nf?n.changingThisBreaksApplicationSecurity:n}function w_(n,e){let t=xS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Th})`)}return t===e}function xS(n){return n instanceof nf&&n.getTypeName()||null}var sF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RS(n){return n=String(n),n.match(sF)?n:"unsafe:"+n}var yf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yf||{});function MS(n){let e=kS();return e?e.sanitize(yf.URL,n)||"":w_(n,"URL")?xu(n):RS(No(n))}function NS(n){let e=kS();if(e)return ND(e.sanitize(yf.RESOURCE_URL,n)||"");if(w_(n,"ResourceURL"))return ND(xu(n));throw new B(904,!1)}function aF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?NS:MS}function I_(n,e,t){return aF(e,t)(n)}function kS(){let n=be();return n&&n[cr].sanitizer}var cF=/^>|^->|<!--|-->|--!>|<!-$/g,uF=/(<|>)/g,lF="\u200B$1\u200B";function dF(n){return n.replace(cF,e=>e.replace(uF,lF))}function PS(n){return n instanceof Function?n():n}function hF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var OS="ng-template";function fF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(T_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function T_(n){return n.type===4&&n.value!==OS}function pF(n,e,t){let r=n.type===4&&!t?OS:n.value;return e===r}function mF(n,e,t){let r=4,i=n.attrs,o=i!==null?vF(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!qn(r)&&!qn(u))return!1;if(s&&qn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!pF(n,u,t)||u===""&&e.length===1){if(qn(r))return!1;s=!0}}else if(r&8){if(i===null||!fF(n,i,u,t)){if(qn(r))return!1;s=!0}}else{let l=e[++a],h=gF(u,i,T_(n),t);if(h===-1){if(qn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(qn(r))return!1;s=!0}}}}return qn(r)||s}function qn(n){return(n&1)===0}function gF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _F(e,n)}function yF(n,e,t=!1){for(let r=0;r<e.length;r++)if(mF(n,e[r],t))return!0;return!1}function vF(n){for(let e=0;e<n.length;e++){let t=n[e];if(uS(t))return e}return n.length}function _F(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function kD(n,e){return n?":not("+e.trim()+")":e}function EF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qn(s)&&(e+=kD(o,i),i=""),r=s,o=o||!qn(r);t++}return i!==""&&(e+=kD(o,i)),e}function wF(n){return n.map(EF).join(",")}function IF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!qn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Rn={};function TF(n,e){return n.createText(e)}function bF(n,e,t){n.setValue(e,t)}function CF(n,e){return n.createComment(dF(e))}function LS(n,e,t){return n.createElement(e,t)}function rf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FS(n,e,t){n.appendChild(e,t)}function PD(n,e,t,r,i){r!==null?rf(n,e,t,r,i):FS(n,e,t)}function DF(n,e,t){n.removeChild(null,e,t)}function SF(n,e,t){n.setAttribute(e,"style",t)}function AF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&LL(n,e,r),i!==null&&AF(n,e,i),o!==null&&SF(n,e,o)}function b_(n,e,t,r,i,o,s,a,u,l,h){let p=Ht+r,m=p+i,y=xF(p,m),S=typeof l=="function"?l():l;return y[ge]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function xF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rn);return t}function RF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=b_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function C_(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[$n]=i,p[le]=r|4|128|8|64|1024,(l!==null||n&&n[le]&2048)&&(p[le]|=2048),fv(p),p[Dt]=p[Po]=n,p[$t]=t,p[cr]=s||n&&n[cr],p[et]=a||n&&n[et],p[ko]=u||n&&n[ko]||null,p[Cn]=o,p[du]=ZL(),p[lu]=h,p[uv]=l,p[Dn]=e.type==2?n[Dn]:p,p}function MF(n,e,t){let r=zn(e,n),i=RF(t),o=n[cr].rendererFactory,s=D_(n,C_(n,i,null,jS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function jS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function US(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function D_(n,e){return n[ia]?n[cv][bn]=e:n[ia]=e,n[cv]=e,e}function F(n=1){BS(It(),be(),Pi()+n,!1)}function BS(n,e,t,r){if(!r)if((e[le]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Gh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Wh(e,o,0,t)}Oi(t)}var vf=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vf||{});function Yv(n,e,t,r){let i=ve(null);try{let[o,s,a]=n.inputs[t],u=null;(s&vf.SignalBased)!==0&&(u=e[o][Bt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):iS(e,u,o,r)}finally{ve(i)}}function $S(n,e,t,r,i){let o=Pi(),s=r&2;try{Oi(-1),s&&e.length>Ht&&BS(n,e,Ht,!1),Pe(s?2:0,i,t),t(r,i)}finally{Oi(o),Pe(s?3:1,i,t)}}function _f(n,e,t){VF(n,e,t),(t.flags&64)===64&&jF(n,e,t)}function S_(n,e,t=zn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function NF(n,e,t,r){let o=r.get(DS,CS)||t===zr.ShadowDom,s=n.selectRootElement(e,o);return kF(s),s}function kF(n){PF(n)}var PF=()=>null;function OF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HS(n,e,t,r,i,o){let s=e[ge];if(x_(n,s,e,t,r)){Ni(n)&&FF(e,n.index);return}LF(n,e,t,r,i,o)}function LF(n,e,t,r,i,o){if(n.type&3){let s=zn(n,e);t=OF(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function FF(n,e){let t=An(e,n);t[le]&16||(t[le]|=64)}function VF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ni(t)&&MF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ef(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=bu(e,n,s,t);if(fa(u,e),o!==null&&HF(e,s-r,u,a,t,o),dr(a)){let l=An(t.index,e);l[$t]=bu(e,n,s,t)}}}function jF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=gD();try{Oi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Fh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&UF(u,l)}}finally{Oi(-1),Fh(s)}}function UF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function A_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];yF(e,o.selectors,!1)&&(r??=[],dr(o)?r.unshift(o):r.push(o))}return r}function BF(n,e,t,r,i,o){let s=zn(n,e);$F(e[et],s,o,n.value,t,r,i)}function $F(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?No(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function HF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Yv(r,t,u,l)}}function zF(n,e){let t=n[ko];if(!t)return;t.get(Zt,null)?.(e)}function x_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Yv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Yv(h,l,r,i),a=!0}return a}function qF(n,e){let t=An(e,n),r=t[ge];GF(r,t);let i=t[$n];i!==null&&t[lu]===null&&(t[lu]=SS(i,t[ko])),Pe(18),R_(r,t,t[$t]),Pe(19,t[$t])}function GF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function R_(n,e,t){jh(e);try{let r=n.viewQuery;r!==null&&Qv(1,r,t);let i=n.template;i!==null&&$S(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ur]?.finishViewCreation(n),n.staticContentQueries&&AS(n,e),n.staticViewQueries&&Qv(2,n.viewQuery,t);let o=n.components;o!==null&&WF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,Uh()}}function WF(n,e){for(let t=0;t<e.length;t++)qF(n,e[t])}function KF(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[le]&4096?4096:16,u=C_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ri]=l;let h=n[ur];return h!==null&&(u[ur]=h.createEmbeddedView(o)),R_(o,u,t),u}finally{ve(i)}}function OD(n,e){return!e||e.firstChild===null||_S(n)}var LD=!1,QF=new H(""),YF;function M_(n,e){return YF(n,e)}var pr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pr||{});function N_(n){return(n.flags&32)===32}function aa(n,e,t,r,i){if(r!=null){let o,s=!1;Hn(r)?o=r:lr(r)&&(s=!0,r=r[$n]);let a=Sn(r);n===0&&t!==null?i==null?FS(e,t,a):rf(e,t,a,i||null,!0):n===1&&t!==null?rf(e,t,a,i||null,!0):n===2?DF(e,a,s):n===3&&e.destroyNode(a),o!=null&&c2(e,n,o,t,i)}}function ZF(n,e){zS(n,e),e[$n]=null,e[Cn]=null}function JF(n,e,t,r,i,o){r[$n]=i,r[Cn]=e,wf(n,r,t,1,i,o)}function zS(n,e){e[cr].changeDetectionScheduler?.notify(9),wf(n,e,e[et],2,null,null)}function XF(n){let e=n[ia];if(!e)return Ov(n[ge],n);for(;e;){let t=null;if(lr(e))t=e[ia];else{let r=e[Yt];r&&(t=r)}if(!t){for(;e&&!e[bn]&&e!==n;)lr(e)&&Ov(e[ge],e),e=e[Dt];e===null&&(e=n),lr(e)&&Ov(e[ge],e),t=e&&e[bn]}e=t}}function k_(n,e){let t=n[Fo],r=t.indexOf(e);t.splice(r,1)}function qS(n,e){if(Vo(e))return;let t=e[et];t.destroyNode&&wf(n,e,t,3,null,null),XF(e)}function Ov(n,e){if(Vo(e))return;let t=ve(null);try{e[le]&=-129,e[le]|=256,e[hn]&&Vd(e[hn]),t2(n,e),e2(n,e),e[ge].type===1&&e[et].destroy();let r=e[Ri];if(r!==null&&Hn(e[Dt])){r!==e[Dt]&&k_(r,e);let i=e[ur];i!==null&&i.detachView(n)}Wv(e)}finally{ve(t)}}function e2(n,e){let t=n.cleanup,r=e[ra];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ra]=null);let i=e[Fr];if(i!==null){e[Fr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[hu];if(o!==null){e[hu]=null;for(let s of o)s.destroy()}}function t2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $o)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Pe(4,a,u);try{u.call(a)}finally{Pe(5,a,u)}}else{Pe(4,i,o);try{o.call(i)}finally{Pe(5,i,o)}}}}}function n2(n,e,t){return r2(n,e.parent,t)}function r2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$n];if(Ni(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===zr.None||i===zr.Emulated)return null}return zn(r,t)}function i2(n,e,t){return s2(n,e,t)}function o2(n,e,t){return n.type&40?zn(n,t):null}var s2=o2,FD;function Ef(n,e,t,r){let i=n2(n,r,e),o=e[et],s=r.parent||e[Cn],a=i2(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)PD(o,i,t[u],a,!1);else PD(o,i,t,a,!1);FD!==void 0&&FD(o,r,e,t,i)}function Iu(n,e){if(e!==null){let t=e.type;if(t&3)return zn(e,n);if(t&4)return Zv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Iu(n,r);{let i=n[e.index];return Hn(i)?Zv(-1,i):Sn(i)}}else{if(t&128)return Iu(n,e.next);if(t&32)return M_(e,n)()||Sn(n[e.index]);{let r=GS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Si(n[Dn]);return Iu(i,r)}else return Iu(n,e.next)}}}return null}function GS(n,e){if(e!==null){let r=n[Dn][Cn],i=e.projection;return r.projection[i]}return null}function Zv(n,e){let t=Yt+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Iu(r,i)}return e[Mi]}function P_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&fa(Sn(a),r),t.flags|=2),!N_(t))if(u&8)P_(n,e,t.child,r,i,o,!1),aa(e,n,i,a,o);else if(u&32){let l=M_(t,r),h;for(;h=l();)aa(e,n,i,h,o);aa(e,n,i,a,o)}else u&16?a2(n,e,r,t,i,o):aa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function wf(n,e,t,r,i,o){P_(t,r,n.firstChild,e,i,o,!1)}function a2(n,e,t,r,i,o){let s=t[Dn],u=s[Cn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];aa(e,n,i,h,o)}else{let l=u,h=s[Dt];_S(r)&&(l.flags|=128),P_(n,e,l,h,i,o,!0)}}function c2(n,e,t,r,i){let o=t[Mi],s=Sn(t);o!==s&&aa(e,n,r,o,i);for(let a=Yt;a<t.length;a++){let u=t[a];wf(u[ge],u,n,e,r,o)}}function u2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:pr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pr.Important),n.setStyle(t,r,i,o))}}function Cu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Sn(o)),Hn(o)&&WS(o,r);let s=t.type;if(s&8)Cu(n,e,t.child,r);else if(s&32){let a=M_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=GS(e,t);if(Array.isArray(a))r.push(...a);else{let u=Si(e[Dn]);Cu(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function WS(n,e){for(let t=Yt;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&Cu(r[ge],r,i,e)}n[Mi]!==n[$n]&&e.push(n[Mi])}function KS(n){if(n[Lo]!==null){for(let e of n[Lo])e.impl.addSequence(e);n[Lo].length=0}}var QS=[];function l2(n){return n[hn]??d2(n)}function d2(n){let e=QS.pop()??Object.create(f2);return e.lView=n,e}function h2(n){n.lView[hn]!==n&&(n.lView=null,QS.push(n))}var f2=ne(V({},Eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{sa(n.lView)},consumerOnSignalRead(){this.lView[hn]=this}});function p2(n){let e=n[hn]??Object.create(m2);return e.lView=n,e}var m2=ne(V({},Eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Si(n.lView);for(;e&&!YS(e[ge]);)e=Si(e);e&&pv(e)},consumerOnSignalRead(){this.lView[hn]=this}});function YS(n){return n.type!==2}function ZS(n){if(n[hu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[le]&8192)}}var g2=100;function O_(n,e=0){let r=n[cr].rendererFactory,i=!1;i||r.begin?.();try{y2(n,e)}finally{i||r.end?.()}}function y2(n,e){let t=wv();try{Iv(!0),Jv(n,e);let r=0;for(;mu(n);){if(r===g2)throw new B(103,!1);r++,Jv(n,1)}}finally{Iv(t)}}function JS(n,e){Ev(e?gu.Exhaustive:gu.OnlyDirtyViews);try{O_(n)}finally{Ev(gu.Off)}}function v2(n,e,t,r){if(Vo(e))return;let i=e[le],o=!1,s=!1;jh(e);let a=!0,u=null,l=null;o||(YS(n)?(l=l2(e),u=wo(l)):Ld()===null?(a=!1,l=p2(e),u=wo(l)):e[hn]&&(Vd(e[hn]),e[hn]=null));try{fv(e),fD(n.bindingStartIndex),t!==null&&$S(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Gh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Wh(e,y,0,null),kv(e,0)}if(s||_2(e),ZS(e),XS(e,0),n.contentQueries!==null&&AS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Gh(e,y)}else{let y=n.contentHooks;y!==null&&Wh(e,y,1),kv(e,1)}w2(n,e);let p=n.components;p!==null&&tA(e,p,0);let m=n.viewQuery;if(m!==null&&Qv(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Gh(e,y)}else{let y=n.viewHooks;y!==null&&Wh(e,y,2),kv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ah]){for(let y of e[Ah])y();e[Ah]=null}o||(KS(e),e[le]&=-73)}catch(h){throw o||sa(e),h}finally{l!==null&&(Us(l,u),a&&h2(l)),Uh()}}function XS(n,e){for(let t=wS(n);t!==null;t=IS(t))for(let r=Yt;r<t.length;r++){let i=t[r];eA(i,e)}}function _2(n){for(let e=wS(n);e!==null;e=IS(e)){if(!(e[le]&2))continue;let t=e[Fo];for(let r=0;r<t.length;r++){let i=t[r];pv(i)}}}function E2(n,e,t){Pe(18);let r=An(e,n);eA(r,t),Pe(19,r[$t])}function eA(n,e){Nh(n)&&Jv(n,e)}function Jv(n,e){let r=n[ge],i=n[le],o=n[hn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Zc(o)),s||=!1,o&&(o.dirty=!1),n[le]&=-9217,s)v2(r,n,r.template,n[$t]);else if(i&8192){let a=ve(null);try{ZS(n),XS(n,1);let u=r.components;u!==null&&tA(n,u,1),KS(n)}finally{ve(a)}}}function tA(n,e,t){for(let r=0;r<e.length;r++)E2(n,e[r],t)}function w2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Oi(~i);else{let o=i,s=t[++r],a=t[++r];mD(s,o);let u=e[o];Pe(24,u),a(2,u),Pe(25,u)}}}finally{Oi(-1)}}function L_(n,e){let t=wv()?64:1088;for(n[cr].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=Si(n);if(oa(n)&&!r)return n;n=r}return null}function nA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function I2(n,e,t,r=!0){let i=e[ge];if(T2(i,e,n,t),r){let s=Zv(t,n),a=e[et],u=a.parentNode(n[Mi]);u!==null&&JF(i,n[Cn],a,e,u,s)}let o=e[lu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xv(n,e){if(n.length<=Yt)return;let t=Yt+e,r=n[t];if(r){let i=r[Ri];i!==null&&i!==n&&k_(i,r),e>0&&(n[t-1][bn]=r[bn]);let o=au(n,Yt+e);ZF(r[ge],r);let s=o[ur];s!==null&&s.detachView(o[ge]),r[Dt]=null,r[bn]=null,r[le]&=-129}return r}function T2(n,e,t,r){let i=Yt+r,o=t.length;r>0&&(t[i-1][bn]=e),r<o-Yt?(e[bn]=t[i],Jy(t,Yt+r,e)):(t.push(e),e[bn]=null),e[Dt]=t;let s=e[Ri];s!==null&&t!==s&&rA(s,e);let a=e[ur];a!==null&&a.insertView(n),kh(e),e[le]|=128}function rA(n,e){let t=n[Fo],r=e[Dt];if(lr(r))n[le]|=2;else{let i=r[Dt][Dn];e[Dn]!==i&&(n[le]|=2)}t===null?n[Fo]=[e]:t.push(e)}var Fi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ge];return Cu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$t]}set context(e){this._lView[$t]=e}get destroyed(){return Vo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Hn(e)){let t=e[fu],r=t?t.indexOf(this):-1;r>-1&&(Xv(e,r),au(t,r))}this._attachedToViewContainer=!1}qS(this._lView[ge],this._lView)}onDestroy(e){mv(this._lView,e)}markForCheck(){L_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){kh(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,O_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[ko].get(QF,LD)}catch{this.exhaustive=LD}}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=oa(this._lView),t=this._lView[Ri];t!==null&&!e&&k_(t,this._lView),zS(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=oa(this._lView),r=this._lView[Ri];r!==null&&!t&&rA(r,this._lView),kh(this._lView)}};var Vi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=b2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=KF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Fi(o)}}return n})();function b2(){return If(St(),be())}function If(n,e){return n.type&4?new Vi(e,n,ha(n,e)):null}function Tf(n,e,t,r,i){let o=n.data[e];if(o===null)o=C2(n,e,t,r,i),pD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=lD();o.injectorIndex=s===null?-1:s.injectorIndex}return ki(o,!0),o}function C2(n,e,t,r,i){let o=vv(),s=Oh(),a=s?o:o&&o.parent,u=n.data[e]=S2(n,a,t,e,r,i);return D2(n,u,o,s),u}function D2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function S2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return aD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bZ=new RegExp(`^(\\d+)*(${tF}|${eF})*(.*)`);var A2=()=>null;function VD(n,e){return A2(n,e)}var iA=class{},bf=class{},e_=class{resolveComponentFactory(e){throw new B(917,!1)}},Ru=class{static NULL=new e_},Ho=class{},qr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>x2()}return n})();function x2(){let n=be(),e=St(),t=An(e.index,n);return(lr(t)?t:n)[et]}var oA=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>null})}return n})();var Qh={},t_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Qh,r);return i!==Qh||t===Qh?i:this.parentInjector.get(e,t,r)}};function n_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=By(i,a);else if(o==2){let u=a,l=e[++s];r=By(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function K(n,e=0){let t=be();if(t===null)return q(n,e);let r=St();return gS(r,t,Pt(n),e)}function F_(){let n="invalid";throw new Error(n)}function V_(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}N2(n,e,t,a,o,u,l)}o!==null&&r!==null&&R2(t,r,o)}function R2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}function M2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function N2(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&dr(y)&&(u=!0,M2(n,t,m)),qv(ef(t,e),n,y.type)}V2(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=US(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=ua(t.mergedAttrs,y.hostAttrs),P2(n,t,e,p,y),F2(p,y,i),s!==null&&s.has(y)){let[k,R]=s.get(y);t.directiveToIndex.set(y.type,[p,k+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}k2(n,t,o)}function k2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))jD(0,e,i,r),jD(1,e,i,r),BD(e,r,!1);else{let o=t.get(i);UD(0,e,o,r),UD(1,e,o,r),BD(e,r,!0)}}}function jD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),sA(e,o)}}function UD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),sA(e,s)}}function sA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function BD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||T_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function P2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Di(i.type,!0)),s=new $o(o,dr(i),K);n.blueprint[r]=s,t[r]=s,O2(n,e,r,US(n,t,i.hostVars,Rn),i)}function O2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;L2(s)!=a&&s.push(a),s.push(t,r,o)}}function L2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function F2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;dr(e)&&(t[""]=n)}}function V2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aA(n,e,t,r,i,o,s,a){let u=e.consts,l=jo(u,s),h=Tf(e,n,2,r,l);return o&&V_(e,t,h,jo(u,a),i),h.mergedAttrs=ua(h.mergedAttrs,h.attrs),h.attrs!==null&&n_(h,h.attrs,!1),h.mergedAttrs!==null&&n_(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function cA(n,e){g_(n,e),xh(e)&&n.queries.elementEnd(e)}function j_(n){return lA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function lA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function U_(n,e,t){return n[e]=t}function j2(n,e){return n[e]}function ji(n,e,t){if(t===Rn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dA(n,e,t,r){let i=ji(n,e,t);return ji(n,e+1,r)||i}function Lv(n,e,t){return function r(i){let o=Ni(n)?An(n.index,e):e;L_(o,5);let s=e[$t],a=$D(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=$D(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function $D(n,e,t,r){let i=ve(null);try{return Pe(6,e,t),t(r)!==!1}catch(o){return zF(n,o),!1}finally{Pe(7,e,t),ve(i)}}function U2(n,e,t,r,i,o,s,a){let u=pu(n),l=!1,h=null;if(!r&&u&&(h=B2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=zn(n,t),m=r?r(p):p;rF(t,m,o,a);let y=i.listen(m,o,a),S=r?k=>r(Sn(k[n.index])):n.index;hA(S,e,t,o,a,y,!1)}return l}function B2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ra],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function hA(n,e,t,r,i,o,s){let a=e.firstCreatePass?yv(e):null,u=gv(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function HD(n,e,t,r,i,o){let s=e[t],a=e[ge],l=a.data[t].outputs[r],p=s[l].subscribe(o);hA(n.index,a,e,i,o,p,!0)}var r_=Symbol("BINDING");var of=class extends Ru{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Br(e);return new zo(t,this.ngModule)}};function $2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&vf.SignalBased)!==0};return i&&(o.transform=i),o})}function H2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function z2(n,e,t){let r=e instanceof Ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new t_(t,r):t}function q2(n){let e=n.get(Ho,null);if(e===null)throw new B(407,!1);let t=n.get(oA,null),r=n.get(Vr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function G2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return LS(e,t,t==="svg"?lv:t==="math"?JC:null)}var zo=class extends bf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=H2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=wF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Pe(22);let a=ve(null);try{let u=this.componentDef,l=W2(r,u,s,o),h=z2(u,i||this.ngModule,e),p=q2(h),m=p.rendererFactory.createRenderer(null,u),y=r?NF(m,r,u.encapsulation,h):G2(u,m),S=s?.some(zD)||o?.some(j=>typeof j!="function"&&j.bindings.some(zD)),k=C_(null,l,null,512|jS(u),null,null,p,m,h,null,SS(y,h,!0));k[Ht]=y,jh(k);let R=null;try{let j=aA(Ht,l,k,"#host",()=>l.directiveRegistry,!0,0);y&&(VS(m,y,j),fa(y,k)),_f(l,k,j),E_(l,j,k),cA(l,j),t!==void 0&&Q2(j,this.ngContentSelectors,t),R=An(j.index,k),k[$t]=R[$t],R_(l,k,null)}catch(j){throw R!==null&&Wv(R),Wv(k),j}finally{Pe(23),Uh()}return new sf(this.componentType,k,!!S)}finally{ve(a)}}};function W2(n,e,t,r){let i=n?["ng-version","20.0.4"]:IF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[r_].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[r_].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=nv(p);u.push(m)}return b_(0,null,K2(o,s),1,a,u,null,null,null,[i],null)}function K2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function zD(n){let e=n[r_].kind;return e==="input"||e==="twoWay"}var sf=class extends iA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Rh(t[ge],Ht),this.location=ha(this._tNode,t),this.instance=An(this._tNode.index,t)[$t],this.hostView=this.changeDetectorRef=new Fi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=x_(r,i[ge],i,e,t);this.previousInputValues.set(e,t);let s=An(r.index,i);L_(s,1)}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Q2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Gr=(()=>{class n{static __NG_ELEMENT_ID__=Y2}return n})();function Y2(){let n=St();return pA(n,be())}var Z2=Gr,fA=class extends Z2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ha(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){let e=y_(this._hostTNode,this._hostLView);if(lS(e)){let t=Jh(e,this._hostLView),r=Zh(e),i=t[ge].data[r+8];return new Bo(i,t)}else return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=VD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,OD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!AL(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new zo(Br(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(Ke,null);j&&(o=j)}let m=Br(h.componentType??{}),y=VD(this._lContainer,m?.id??null),S=y?.firstChild??null,k=h.create(p,i,S,o,s,a);return this.insertImpl(k.hostView,l,OD(this._hostTNode,y)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(eD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Dt],l=new fA(u,u[Cn],u[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return I2(s,i,o,r),e.attachToViewContainerRef(),Jy(Fv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xv(this._lContainer,t);r&&(au(Fv(this._lContainer),t),qS(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xv(this._lContainer,t);return r&&au(Fv(this._lContainer),t)!=null?new Fi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qD(n){return n[fu]}function Fv(n){return n[fu]||(n[fu]=[])}function pA(n,e){let t,r=e[n.index];return Hn(r)?t=r:(t=nA(r,e,null,n),e[n.index]=t,D_(e,t)),X2(t,e,n,r),new fA(t,n,e)}function J2(n,e){let t=n[et],r=t.createComment(""),i=zn(e,n),o=t.parentNode(i);return rf(t,o,r,t.nextSibling(i),!1),r}var X2=nV,eV=()=>!1;function tV(n,e,t){return eV(n,e,t)}function nV(n,e,t,r){if(n[Mi])return;let i;t.type&8?i=Sn(r):i=J2(e,t),n[Mi]=i}var i_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},o_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)B_(e,t).matches!==null&&this.queries[t].setDirty()}},s_=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=lV(e):this.predicate=e}},a_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},c_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,rV(t,o)),this.matchTNodeWithReadOption(e,t,Kh(t,e,o,!1,!1))}else r===Vi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Kh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===fn||i===Gr||i===Vi&&t.type&4)this.addMatch(t.index,-2);else{let o=Kh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function rV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function iV(n,e){return n.type&11?ha(n,e):n.type&4?If(n,e):null}function oV(n,e,t,r){return t===-1?iV(e,n):t===-2?sV(n,e,r):bu(n,n[ge],t,e)}function sV(n,e,t){if(t===fn)return ha(e,n);if(t===Vi)return If(e,n);if(t===Gr)return pA(e,n)}function mA(n,e,t,r){let i=e[ur].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(oV(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function u_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=mA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Yt;p<h.length;p++){let m=h[p];m[Ri]===m[Dt]&&u_(m[ge],m,l,r)}if(h[Fo]!==null){let p=h[Fo];for(let m=0;m<p.length;m++){let y=p[m];u_(y[ge],y,l,r)}}}}}return r}function aV(n,e){return n[ur].queries[e].queryList}function cV(n,e,t){let r=new tf((t&4)===4);return rD(n,e,r,r.destroy),(e[ur]??=new o_).queries.push(new i_(r))-1}function uV(n,e,t,r){let i=It();if(i.firstCreatePass){let o=St();dV(i,new s_(e,t,r),o.index),hV(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return cV(i,be(),t)}function lV(n){return n.split(",").map(e=>e.trim())}function dV(n,e,t){n.queries===null&&(n.queries=new a_),n.queries.track(new c_(e,t))}function hV(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function B_(n,e){return n.queries.getByIndex(e)}function fV(n,e){let t=n[ge],r=B_(t,e);return r.crossesNgTemplate?u_(t,n,e,[]):mA(t,n,r,e)}var GD=new Set;function Ko(n){GD.has(n)||(GD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var qo=class{},Cf=class{};var af=class extends qo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new of(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=tv(e);this._bootstrapComponents=PS(o.bootstrap),this._r3Injector=Sv(e,t,[{provide:qo,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},cf=class extends Cf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new af(this.moduleType,e,[])}};var Du=class extends qo{injector;componentFactoryResolver=new of(this);instance=null;constructor(e){super();let t=new Ro([...e.providers,{provide:qo,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],e.parent||uu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pa(n,e,t=null){return new Du({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var pV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rv(!1,t.type),i=r.length>0?pa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(q(Ke))})}return n})();function ut(n){return da(()=>{let e=gA(n),t=ne(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===v_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(pV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zr.Emulated,styles:n.styles||dn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ko("NgStandalone"),yA(t);let r=n.dependencies;return t.directiveDefs=WD(r,!1),t.pipeDefs=WD(r,!0),t.id=_V(t),t})}function mV(n){return Br(n)||nv(n)}function gV(n){return n!==null}function Gn(n){return da(()=>({type:n.type,bootstrap:n.bootstrap||dn,declarations:n.declarations||dn,imports:n.imports||dn,exports:n.exports||dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yV(n,e){if(n==null)return Ai;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=vf.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function vV(n){if(n==null)return Ai;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ft(n){return da(()=>{let e=gA(n);return yA(e),e})}function Df(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function gA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ai,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:yV(n.inputs,e),outputs:vV(n.outputs),debugInfo:null}}function yA(n){n.features?.forEach(e=>e(n))}function WD(n,e){if(!n)return null;let t=e?GC:mV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(gV)}function _V(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function EV(n){return Object.getPrototypeOf(n.prototype).constructor}function mr(n){let e=EV(n.type),t=!0,r=[n];for(;e;){let i;if(dr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Vv(n.inputs),s.declaredInputs=Vv(n.declaredInputs),s.outputs=Vv(n.outputs);let a=i.hostBindings;a&&CV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&TV(n,u),l&&bV(n,l),wV(n,i),VC(n.outputs,i.outputs),dr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===mr&&(t=!1)}}e=Object.getPrototypeOf(e)}IV(r)}function wV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function IV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ua(i.hostAttrs,t=ua(t,i.hostAttrs))}}function Vv(n){return n===Ai?{}:n===dn?[]:n}function TV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function bV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function CV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function DV(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Tf(e,n,4,s||null,a||null);Ph()&&V_(e,t,h,jo(l,u),A_),h.mergedAttrs=ua(h.mergedAttrs,h.attrs),g_(e,h);let p=h.tView=b_(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function SV(n,e,t,r,i,o,s,a,u,l,h){let p=t+Ht,m=e.firstCreatePass?DV(p,e,n,r,i,o,s,a,l):e.data[p];u&&(m.flags|=u),ki(m,!1);let y=AV(e,n,m,t);vu()&&Ef(e,n,y,m),fa(y,n);let S=nA(y,n,y,m);return n[p]=S,D_(n,S),tV(S,m,n),pu(m)&&_f(e,n,m),l!=null&&S_(n,m,h),m}function _e(n,e,t,r,i,o,s,a){let u=be(),l=It(),h=jo(l.consts,o);return SV(u,l,n,e,t,r,i,h,void 0,s,a),_e}var AV=xV;function xV(n,e,t,r){return _u(!0),e[et].createComment("")}var Sf=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Sf||{}),Qo=new H(""),vA=!1,l_=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sv()&&(this.destroyRef=P($r,{optional:!0})??void 0,this.pendingTasks=P(Hr,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},$e=l_;function _A(n){let e,t;function r(){n=wu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function KD(n){return queueMicrotask(()=>n()),()=>{n=wu}}var $_="isAngularZone",uf=$_+"_ID",RV=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new $e(!1);onMicrotaskEmpty=new $e(!1);onStable=new $e(!1);onError=new $e(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vA}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,MV,wu,wu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},MV={};function H_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function NV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){_A(()=>{n.callbackScheduled=!1,d_(n),n.isCheckStableRunning=!0,H_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),d_(n)}function kV(n){let e=()=>{NV(n)},t=RV++;n._inner=n._inner.fork({name:"angular",properties:{[$_]:!0,[uf]:t,[uf+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(PV(u))return r.invokeTask(o,s,a,u);try{return QD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return QD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!OV(u)&&e(),YD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,d_(n),H_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function d_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YD(n){n._nesting--,H_(n)}var lf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new $e;onMicrotaskEmpty=new $e;onStable=new $e;onError=new $e;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function PV(n){return EA(n,"__ignore_ng_zone__")}function OV(n){return EA(n,"__scheduler_tick__")}function EA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var z_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),wA=[0,1,2,3],IA=(()=>{class n{ngZone=P(xe);scheduler=P(Vr);errorHandler=P(Bn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Qo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Pe(16),this.executing=!0;for(let r of wA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Pe(17)}register(t){let{view:r}=t;r!==void 0?((r[Lo]??=[]).push(t),sa(r),r[le]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Sf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),df=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Lo];e&&(this.view[Lo]=e.filter(t=>t!==this))}};function Af(n,e){!e?.injector&&av(Af);let t=e?.injector??P(Xe);return Ko("NgAfterNextRender"),FV(n,t,e,!0)}function LV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function FV(n,e,t,r){let i=e.get(z_);i.impl??=e.get(IA);let o=e.get(Qo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get($r):null,a=e.get($h,null,{optional:!0}),u=new df(i.impl,LV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var q_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var G_=new H("");function Wr(n){return!!n&&typeof n.then=="function"}function xf(n){return!!n&&typeof n.subscribe=="function"}var W_=new H("");function Rf(n){return on([{provide:W_,multi:!0,useValue:n}])}var K_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(W_,{optional:!0})??[];injector=P(Xe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ht(this.injector,i);if(Wr(o))t.push(o);else if(xf(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mu=new H("");function TA(){ly(()=>{let n="";throw new B(600,n)})}function bA(n){return n.isBoundToModule}var VV=10;var Yo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Zt);afterRenderManager=P(z_);zonelessEnabled=P(Eu);rootEffectScheduler=P(Nv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new st;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Hr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(re(t=>!t))}constructor(){P(Qo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Xe.NULL){return this._injector.get(xe).run(()=>{Pe(10);let s=t instanceof bf;if(!this._injector.get(K_).done){let S="";throw new B(405,S)}let u;s?u=t:u=this._injector.get(Ru).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=bA(u)?void 0:this._injector.get(qo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(G_,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Tu(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Pe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Pe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Sf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),Pe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ho,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<VV;)Pe(14),this.synchronizeOnce(),Pe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!mu(i))continue;let o=r&&!this.zonelessEnabled?0:1;O_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Tu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Mu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Tu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ma(n,e,t,r){let i=be(),o=yu();if(ji(i,o,e)){let s=It(),a=Bh();BF(a,i,n,e,t,r)}return ma}function Y(n,e,t){let r=be(),i=yu();if(ji(r,i,e)){let o=It(),s=Bh();HS(s,r,n,e,r[et],t)}return Y}function ZD(n,e,t,r,i){x_(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=be(),o=It(),s=Ht+n,a=i[et],u=o.firstCreatePass?aA(s,o,i,e,A_,Ph(),t,r):o.data[s],l=jV(o,i,u,a,e,n);i[s]=l;let h=pu(u);return ki(u,!0),VS(a,l,u),!N_(u)&&vu()&&Ef(o,i,l,u),(iD()===0||h)&&fa(l,i),oD(),h&&(_f(o,i,u),E_(o,u,i)),r!==null&&S_(i,u),v}function w(){let n=St();Oh()?_v():(n=n.parent,ki(n,!1));let e=n;cD(e)&&uD(),sD();let t=It();return t.firstCreatePass&&cA(t,e),e.classesWithoutHost!=null&&PL(e)&&ZD(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OL(e)&&ZD(t,e,be(),e.stylesWithoutHost,!1),w}function G(n,e,t,r){return v(n,e,t,r),w(),G}var jV=(n,e,t,r,i,o)=>(_u(!0),LS(r,i,ID()));function UV(n,e,t,r,i){let o=e.consts,s=jo(o,r),a=Tf(e,n,8,"ng-container",s);s!==null&&n_(a,s,!0);let u=jo(o,i);return Ph()&&V_(e,t,a,u,A_),a.mergedAttrs=ua(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function ga(n,e,t){let r=be(),i=It(),o=n+Ht,s=i.firstCreatePass?UV(o,i,r,e,t):i.data[o];ki(s,!0);let a=BV(i,r,s,n);return r[o]=a,vu()&&Ef(i,r,a,s),fa(a,r),pu(s)&&(_f(i,r,s),E_(i,s,r)),t!=null&&S_(r,s),ga}function ya(){let n=St(),e=It();return Oh()?_v():(n=n.parent,ki(n,!1)),e.firstCreatePass&&(g_(e,n),xh(n)&&e.queries.elementEnd(n)),ya}var BV=(n,e,t,r)=>(_u(!0),CF(e[et],""));function He(){return be()}var Uo=void 0;function $V(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var HV=["en",[["a","p"],["AM","PM"],Uo],[["AM","PM"],Uo,Uo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uo,"{1} 'at' {0}",Uo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",$V],jv={};function pn(n){let e=zV(n),t=JD(e);if(t)return t;let r=e.split("-")[0];if(t=JD(r),t)return t;if(r==="en")return HV;throw new B(701,!1)}function JD(n){return n in jv||(jv[n]=jr.ng&&jr.ng.common&&jr.ng.common.locales&&jr.ng.common.locales[n]),jv[n]}var lt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(lt||{});function zV(n){return n.toLowerCase().replace(/_/g,"-")}var Nu="en-US";var qV=Nu;function CA(n){typeof n=="string"&&(qV=n.toLowerCase().replace(/_/g,"-"))}function Z(n,e,t){let r=be(),i=It(),o=St();return DA(i,r,r[et],o,n,e,t),Z}function DA(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Lv(r,e,o),U2(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Lv(r,e,o),HD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Lv(r,e,o),HD(r,e,p,i,i,u)}}function ee(n=1){return wD(n)}function Q_(n,e,t,r){uV(n,e,t,r)}function Y_(n){let e=be(),t=It(),r=bv();Vh(r+1);let i=B_(t,r);if(n.dirty&&XC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=fV(e,r);n.reset(o,KL),n.notifyOnChanges()}return!0}return!1}function Z_(){return aV(be(),bv())}function J_(n){let e=dD();return Mh(e,Ht+n)}function qh(n,e){return n<<17|e<<2}function Go(n){return n>>17&32767}function GV(n){return(n&2)==2}function WV(n,e){return n&131071|e<<17}function h_(n){return n|2}function la(n){return(n&131068)>>2}function Uv(n,e){return n&-131069|e<<2}function KV(n){return(n&1)===1}function f_(n){return n|1}function QV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Go(s),u=la(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||na(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Go(n[a+1]);n[r+1]=qh(m,a),m!==0&&(n[m+1]=Uv(n[m+1],r)),n[a+1]=WV(n[a+1],r)}else n[r+1]=qh(a,0),a!==0&&(n[a+1]=Uv(n[a+1],r)),a=r;else n[r+1]=qh(u,0),a===0?a=r:n[u+1]=Uv(n[u+1],r),u=r;l&&(n[r+1]=h_(n[r+1])),XD(n,h,r,!0),XD(n,h,r,!1),YV(e,h,n,r,o),s=qh(a,u),o?e.classBindings=s:e.styleBindings=s}function YV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&na(o,e)>=0&&(t[r+1]=f_(t[r+1]))}function XD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Go(i):la(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ZV(u,e)&&(a=!0,n[s+1]=r?f_(l):h_(l)),s=r?Go(l):la(l)}a&&(n[t+1]=r?h_(i):f_(i))}function ZV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?na(n,e)>=0:!1}function Mf(n,e,t){return SA(n,e,t,!1),Mf}function Zo(n,e){return SA(n,e,null,!0),Zo}function SA(n,e,t,r){let i=be(),o=It(),s=Tv(2);if(o.firstUpdatePass&&XV(o,n,s,r),e!==Rn&&ji(i,s,e)){let a=o.data[Pi()];ij(o,a,i,i[et],n,i[s+1]=oj(e,t),r,s)}}function JV(n,e){return e>=n.expandoStartIndex}function XV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Pi()],s=JV(n,t);sj(o,r)&&e===null&&!s&&(e=!1),e=ej(i,o,e,r),QV(i,o,e,t,s,r)}}function ej(n,e,t,r){let i=yD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bv(null,n,e,t,r),t=Su(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Bv(i,n,e,t,r),o===null){let u=tj(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Bv(null,n,e,u[1],r),u=Su(u,e.attrs,r),nj(n,e,r,u))}else o=rj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function tj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(la(r)!==0)return n[Go(r)]}function nj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Go(i)]=r}function rj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Su(r,s,t)}return Su(r,e.attrs,t)}function Bv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Su(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Su(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),qC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function ij(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=KV(l)?eS(u,e,t,i,la(l),s):void 0;if(!hf(h)){hf(o)||GV(l)&&(o=eS(u,null,t,i,a,s));let p=dv(Pi(),t);u2(r,s,p,i,o)}}function eS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Rn&&(m=p?dn:void 0);let y=p?Sh(m,r):h===r?m:void 0;if(l&&!hf(y)&&(y=Sh(u,r)),hf(y)&&(a=y,s))return a;let S=n[i+1];i=s?Go(S):la(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Sh(u,r))}return a}function hf(n){return n!==void 0}function oj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=rn(xu(n)))),n}function sj(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=be(),r=It(),i=n+Ht,o=r.firstCreatePass?Tf(r,i,1,e,null):r.data[i],s=aj(r,t,o,e,n);t[i]=s,vu()&&Ef(r,t,s,o),ki(o,!1)}var aj=(n,e,t,r,i)=>(_u(!0),TF(e[et],r));function cj(n,e,t,r=""){return ji(n,yu(),t)?e+No(t)+r:Rn}function uj(n,e,t,r,i,o=""){let s=hD(),a=dA(n,s,t,i);return Tv(2),a?e+No(t)+r+No(i)+o:Rn}function Fe(n){return pt("",n),Fe}function pt(n,e,t){let r=be(),i=cj(r,n,e,t);return i!==Rn&&AA(r,Pi(),i),pt}function va(n,e,t,r,i){let o=be(),s=uj(o,n,e,t,r,i);return s!==Rn&&AA(o,Pi(),s),va}function AA(n,e,t){let r=dv(e,n);bF(n[et],r,t)}function Wn(n,e,t){xv(e)&&(e=e());let r=be(),i=yu();if(ji(r,i,e)){let o=It(),s=Bh();HS(s,r,n,e,r[et],t)}return Wn}function gr(n,e){let t=xv(n);return t&&n.set(e),t}function Kn(n,e){let t=be(),r=It(),i=St();return DA(r,t,t[et],i,n,e),Kn}function lj(n,e,t){let r=It();if(r.firstCreatePass){let i=dr(n);p_(t,r.data,r.blueprint,i,!0),p_(e,r.data,r.blueprint,i,!1)}}function p_(n,e,t,r,i){if(n=Pt(n),Array.isArray(n))for(let o=0;o<n.length;o++)p_(n[o],e,t,r,i);else{let o=It(),s=be(),a=St(),u=xo(n)?n:Pt(n.provide),l=ov(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(xo(n)||!n.multi){let y=new $o(l,i,K),S=Hv(u,e,i?h:h+m,p);S===-1?(qv(ef(a,s),o,u),$v(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=Hv(u,e,h+m,p),S=Hv(u,e,h,h+m),k=y>=0&&t[y],R=S>=0&&t[S];if(i&&!R||!i&&!k){qv(ef(a,s),o,u);let j=fj(i?hj:dj,t.length,i,r,l);!i&&R&&(t[S].providerFactory=j),$v(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=xA(t[i?S:y],l,!i&&r);$v(o,n,y>-1?y:S,j)}!i&&r&&R&&t[S].componentProviders++}}}function $v(n,e,t,r){let i=xo(e),o=YC(e);if(i||o){let u=(o?Pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function xA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function dj(n,e,t,r){return m_(this.multi,[])}function hj(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=bu(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),m_(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],m_(i,o);return o}function m_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function fj(n,e,t,r,i){let o=new $o(n,t,K);return o.multi=[],o.index=e,o.componentProviders=0,xA(o,i,r&&!t),o}function _a(n,e=[]){return t=>{t.providersResolver=(r,i)=>lj(r,i?i(n):n,e)}}function Nf(n,e,t){let r=Lh()+n,i=be();return i[r]===Rn?U_(i,r,t?e.call(t):e()):j2(i,r)}function RA(n,e){let t=n[e];return t===Rn?void 0:t}function pj(n,e,t,r,i,o){let s=e+t;return ji(n,s,i)?U_(n,s+1,o?r.call(o,i):r(i)):RA(n,s+1)}function mj(n,e,t,r,i,o,s){let a=e+t;return dA(n,a,i,o)?U_(n,a+2,s?r.call(s,i,o):r(i,o)):RA(n,a+2)}function ze(n,e){let t=It(),r,i=n+Ht;t.firstCreatePass?(r=gj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Di(r.type,!0)),s,a=Qt(K);try{let u=Xh(!1),l=o();return Xh(u),hv(t,be(),i,l),l}finally{Qt(a)}}function gj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Tt(n,e,t){let r=n+Ht,i=be(),o=Mh(i,r);return MA(i,r)?pj(i,Lh(),e,o.transform,t,o):o.transform(t)}function Bi(n,e,t,r){let i=n+Ht,o=be(),s=Mh(o,i);return MA(o,i)?mj(o,Lh(),e,s.transform,t,r,s):s.transform(t,r)}function MA(n,e){return n[ge].data[e].pure}function X_(n,e){return If(n,e)}var ff=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},e0=(()=>{class n{compileModuleSync(t){return new cf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=tv(t),o=PS(i.declarations).reduce((s,a)=>{let u=Br(a);return u&&s.push(new zo(u)),s},[]);return new ff(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yj=(()=>{class n{zone=P(xe);changeDetectionScheduler=P(Vr);applicationRef=P(Yo);applicationErrorHandler=P(Zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NA=new H("",{factory:()=>!1});function t0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(ne(V({},r0()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:xi,multi:!0,useFactory:()=>{let r=P(yj,{optional:!0});return()=>r.initialize()}},{provide:xi,multi:!0,useFactory:()=>{let r=P(vj);return()=>{r.initialize()}}},e===!0?{provide:Rv,useValue:!0}:[],{provide:Mv,useValue:t??vA},{provide:Zt,useFactory:()=>{let r=P(xe),i=P(Ke),o;return s=>{o??=i.get(Bn),r.runOutsideAngular(()=>o.handleError(s))}}}]}function n0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=t0({ngZoneFactory:()=>{let i=r0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ko("NgZone_CoalesceEvent"),new xe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return on([{provide:NA,useValue:!0},{provide:Eu,useValue:!1},r])}function r0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var vj=(()=>{class n{subscription=new Ze;initialized=!1;zone=P(xe);pendingTasks=P(Hr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kA=(()=>{class n{applicationErrorHandler=P(Zt);appRef=P(Yo);taskService=P(Hr);ngZone=P(xe);zonelessEnabled=P(Eu);tracing=P(Qo,{optional:!0});disableScheduling=P(Rv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(uf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Mv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof lf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?KD:_A;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(uf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _j(){return typeof $localize<"u"&&$localize.locale||Nu}var ku=new H("",{providedIn:"root",factory:()=>P(ku,{optional:!0,skipSelf:!0})||_j()});function an(n){return PC(n)}function Ea(n,e){return $d(n,e?.equal)}var PA=class{[Bt];constructor(e){this[Bt]=e}destroy(){this[Bt].destroy()}};var jA=Symbol("InputSignalNode#UNSET"),Mj=ne(V({},Hd),{transformFn:void 0,applyValueToInputSignal(n,e){Bs(n,e)}});function UA(n,e){let t=Object.create(Mj);t.value=n,t.transformFn=e?.transform;function r(){if(js(t),t.value===jA){let i=null;throw new B(-950,i)}return t.value}return r[Bt]=t,r}var Pf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Au(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Nj=new H("");Nj.__NG_ELEMENT_ID__=n=>{let e=St();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new B(204,!1)};function OA(n,e){return UA(n,e)}function kj(n){return UA(jA,n)}var BA=(OA.required=kj,OA);var Jo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$A=new Jo("20.0.4");var i0=new H(""),Pj=new H("");function Pu(n){return!n.moduleRef}function Oj(n){let e=Pu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{Pu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Zt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(i0);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(i0);s.add(o),n.moduleRef.onDestroy(()=>{Tu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Fj(r,t,()=>{let o=e.get(K_);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ku,Nu);if(CA(s||Nu),!e.get(Pj,!0))return Pu(n)?e.get(Yo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pu(n)){let u=e.get(Yo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Lj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var Lj;function Fj(n,e,t){try{let r=t();return Wr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kf=null;function Vj(n=[],e){return Xe.create({name:e,providers:[{provide:cu,useValue:"platform"},{provide:i0,useValue:new Set([()=>kf=null])},...n]})}function jj(n=[]){if(kf)return kf;let e=Vj(n);return kf=e,TA(),Uj(e),e}function Uj(n){let e=n.get(mf,null);ht(n,()=>{e?.forEach(t=>t())})}function u0(){return!1}var Qr=(()=>{class n{static __NG_ELEMENT_ID__=Bj}return n})();function Bj(n){return $j(St(),be(),(n&16)===16)}function $j(n,e,t){if(Ni(n)&&!t){let r=An(n.index,e);return new Fi(r,r)}else if(n.type&175){let r=e[Dn];return new Fi(r,e)}return null}var o0=class{constructor(){}supports(e){return j_(e)}create(e){return new s0(e)}},Hj=(n,e)=>e,s0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Hj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<LA(r,i,o)?t:r,a=LA(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!j_(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,uA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new a0(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Of),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Of),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},a0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},c0=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Of=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new c0,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function LA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function FA(){return new l0([new o0])}var l0=(()=>{class n{factories;static \u0275prov=$({token:n,providedIn:"root",factory:FA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||FA()),deps:[[n,new rS,new sn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();function HA(n){Pe(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=jj(r),o=[t0({}),{provide:Vr,useExisting:kA},bD,...t||[]],s=new Du({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Oj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Pe(9)}}function $i(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zA(n){let e=Br(n);if(!e)return null;let t=new zo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var WA=null;function Mn(){return WA}function d0(n){WA??=n}var Ou=class{},Lu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(KA),providedIn:"platform"})}return n})(),h0=new H(""),KA=(()=>{class n extends Lu{_location;_history;_doc=P(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mn().getBaseHref(this._doc)}onPopState(t){let r=Mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Lf(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function qA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qn(n){return n&&n[0]!=="?"?`?${n}`:n}var Yn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(Vf),providedIn:"root"})}return n})(),Ff=new H(""),Vf=(()=>{class n extends Yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(Lu),q(Ff,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hi=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Gj(qA(GA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qn(r))}normalize(t){return n.stripTrailingSlash(qj(this._basePath,GA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qn;static joinWithSlash=Lf;static stripTrailingSlash=qA;static \u0275fac=function(r){return new(r||n)(q(Yn))};static \u0275prov=$({token:n,factory:()=>zj(),providedIn:"root"})}return n})();function zj(){return new Hi(q(Yn))}function qj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GA(n){return n.replace(/\/index.html$/,"")}function Gj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var v0=(()=>{class n extends Yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Lf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(Lu),q(Ff,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var zt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(zt||{}),Oe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Oe||{}),cn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(cn||{}),Zr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function JA(n){return pn(n)[lt.LocaleId]}function XA(n,e,t){let r=pn(n),i=[r[lt.DayPeriodsFormat],r[lt.DayPeriodsStandalone]],o=Nn(i,e);return Nn(o,t)}function ex(n,e,t){let r=pn(n),i=[r[lt.DaysFormat],r[lt.DaysStandalone]],o=Nn(i,e);return Nn(o,t)}function tx(n,e,t){let r=pn(n),i=[r[lt.MonthsFormat],r[lt.MonthsStandalone]],o=Nn(i,e);return Nn(o,t)}function nx(n,e){let r=pn(n)[lt.Eras];return Nn(r,e)}function Fu(n,e){let t=pn(n);return Nn(t[lt.DateFormat],e)}function Vu(n,e){let t=pn(n);return Nn(t[lt.TimeFormat],e)}function ju(n,e){let r=pn(n)[lt.DateTimeFormat];return Nn(r,e)}function Uu(n,e){let t=pn(n),r=t[lt.NumberSymbols][e];if(typeof r>"u"){if(e===Zr.CurrencyDecimal)return t[lt.NumberSymbols][Zr.Decimal];if(e===Zr.CurrencyGroup)return t[lt.NumberSymbols][Zr.Group]}return r}function rx(n){if(!n[lt.ExtraData])throw new B(2303,!1)}function ix(n){let e=pn(n);return rx(e),(e[lt.ExtraData][2]||[]).map(r=>typeof r=="string"?f0(r):[f0(r[0]),f0(r[1])])}function ox(n,e,t){let r=pn(n);rx(r);let i=[r[lt.ExtraData][0],r[lt.ExtraData][1]],o=Nn(i,e)||[];return Nn(o,t)||[]}function Nn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new B(2304,!1)}function f0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Wj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,jf={},Kj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function sx(n,e,t,r){let i=rU(n);e=Yr(t,e)||e;let s=[],a;for(;e;)if(a=Kj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=cx(r,u),i=nU(i,r));let l="";return s.forEach(h=>{let p=eU(h);l+=p?p(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function zf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yr(n,e){let t=JA(n);if(jf[t]??={},jf[t][e])return jf[t][e];let r="";switch(e){case"shortDate":r=Fu(n,cn.Short);break;case"mediumDate":r=Fu(n,cn.Medium);break;case"longDate":r=Fu(n,cn.Long);break;case"fullDate":r=Fu(n,cn.Full);break;case"shortTime":r=Vu(n,cn.Short);break;case"mediumTime":r=Vu(n,cn.Medium);break;case"longTime":r=Vu(n,cn.Long);break;case"fullTime":r=Vu(n,cn.Full);break;case"short":let i=Yr(n,"shortTime"),o=Yr(n,"shortDate");r=Uf(ju(n,cn.Short),[i,o]);break;case"medium":let s=Yr(n,"mediumTime"),a=Yr(n,"mediumDate");r=Uf(ju(n,cn.Medium),[s,a]);break;case"long":let u=Yr(n,"longTime"),l=Yr(n,"longDate");r=Uf(ju(n,cn.Long),[u,l]);break;case"full":let h=Yr(n,"fullTime"),p=Yr(n,"fullDate");r=Uf(ju(n,cn.Full),[h,p]);break}return r&&(jf[t][e]=r),r}function Uf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Qj(n,e){return Zn(n,3).substring(0,e)}function mt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Yj(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Qj(a,e);let u=Uu(s,Zr.MinusSign);return Zn(a,e,u,r,i)}}function Yj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new B(2301,!1)}}function Ue(n,e,t=zt.Format,r=!1){return function(i,o){return Zj(i,o,n,e,t,r)}}function Zj(n,e,t,r,i,o){switch(t){case 2:return tx(e,i,r)[n.getMonth()];case 1:return ex(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=ix(e),h=ox(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,S]=m,k=s>=y.hours&&a>=y.minutes,R=s<S.hours||s===S.hours&&a<S.minutes;if(y.hours<S.hours){if(k&&R)return!0}else if(k||R)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return XA(e,i,r)[s<12?0:1];case 3:return nx(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new B(2302,!1)}}function Bf(n){return function(e,t,r){let i=-1*r,o=Uu(t,Zr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Zn(s,2,o)+Zn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Zn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);default:throw new B(2302,!1)}}}var Jj=0,Hf=4;function Xj(n){let e=zf(n,Jj,1).getDay();return zf(n,0,1+(e<=Hf?Hf:Hf+7)-e)}function ax(n){let e=n.getDay(),t=e===0?-3:Hf-e;return zf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function p0(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=ax(t),s=Xj(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Zn(i,n,Uu(r,Zr.MinusSign))}}function $f(n,e=!1){return function(t,r){let o=ax(t).getFullYear();return Zn(o,n,Uu(r,Zr.MinusSign),e)}}var m0={};function eU(n){if(m0[n])return m0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ue(3,Oe.Abbreviated);break;case"GGGG":e=Ue(3,Oe.Wide);break;case"GGGGG":e=Ue(3,Oe.Narrow);break;case"y":e=mt(0,1,0,!1,!0);break;case"yy":e=mt(0,2,0,!0,!0);break;case"yyy":e=mt(0,3,0,!1,!0);break;case"yyyy":e=mt(0,4,0,!1,!0);break;case"Y":e=$f(1);break;case"YY":e=$f(2,!0);break;case"YYY":e=$f(3);break;case"YYYY":e=$f(4);break;case"M":case"L":e=mt(1,1,1);break;case"MM":case"LL":e=mt(1,2,1);break;case"MMM":e=Ue(2,Oe.Abbreviated);break;case"MMMM":e=Ue(2,Oe.Wide);break;case"MMMMM":e=Ue(2,Oe.Narrow);break;case"LLL":e=Ue(2,Oe.Abbreviated,zt.Standalone);break;case"LLLL":e=Ue(2,Oe.Wide,zt.Standalone);break;case"LLLLL":e=Ue(2,Oe.Narrow,zt.Standalone);break;case"w":e=p0(1);break;case"ww":e=p0(2);break;case"W":e=p0(1,!0);break;case"d":e=mt(2,1);break;case"dd":e=mt(2,2);break;case"c":case"cc":e=mt(7,1);break;case"ccc":e=Ue(1,Oe.Abbreviated,zt.Standalone);break;case"cccc":e=Ue(1,Oe.Wide,zt.Standalone);break;case"ccccc":e=Ue(1,Oe.Narrow,zt.Standalone);break;case"cccccc":e=Ue(1,Oe.Short,zt.Standalone);break;case"E":case"EE":case"EEE":e=Ue(1,Oe.Abbreviated);break;case"EEEE":e=Ue(1,Oe.Wide);break;case"EEEEE":e=Ue(1,Oe.Narrow);break;case"EEEEEE":e=Ue(1,Oe.Short);break;case"a":case"aa":case"aaa":e=Ue(0,Oe.Abbreviated);break;case"aaaa":e=Ue(0,Oe.Wide);break;case"aaaaa":e=Ue(0,Oe.Narrow);break;case"b":case"bb":case"bbb":e=Ue(0,Oe.Abbreviated,zt.Standalone,!0);break;case"bbbb":e=Ue(0,Oe.Wide,zt.Standalone,!0);break;case"bbbbb":e=Ue(0,Oe.Narrow,zt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ue(0,Oe.Abbreviated,zt.Format,!0);break;case"BBBB":e=Ue(0,Oe.Wide,zt.Format,!0);break;case"BBBBB":e=Ue(0,Oe.Narrow,zt.Format,!0);break;case"h":e=mt(3,1,-12);break;case"hh":e=mt(3,2,-12);break;case"H":e=mt(3,1);break;case"HH":e=mt(3,2);break;case"m":e=mt(4,1);break;case"mm":e=mt(4,2);break;case"s":e=mt(5,1);break;case"ss":e=mt(5,2);break;case"S":e=mt(6,1);break;case"SS":e=mt(6,2);break;case"SSS":e=mt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Bf(0);break;case"ZZZZZ":e=Bf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bf(2);break;default:return null}return m0[n]=e,e}function cx(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function tU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function nU(n,e,t){let i=n.getTimezoneOffset(),o=cx(e,i);return tU(n,-1*(o-i))}function rU(n){if(QA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return zf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Wj))return iU(r)}let e=new Date(n);if(!QA(e))throw new B(2302,!1);return e}function iU(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function QA(n){return n instanceof Date&&!isNaN(n.valueOf())}var qf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wa=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new qf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),YA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);YA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(K(Gr),K(Vi),K(l0))};static \u0275dir=ft({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function YA(n,e){n.context.$implicit=e.item}var Ot=(()=>{class n{_viewContainer;_context=new Gf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(K(Gr),K(Vi))};static \u0275dir=ft({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Gf=class{$implicit=null;ngIf=null};function ZA(n,e){if(n&&!n.createEmbeddedView)throw new B(2020,!1)}function ux(n,e){return new B(2100,!1)}var g0=class{createSubscription(e,t,r){return an(()=>e.subscribe({next:t,error:r}))}dispose(e){an(()=>e.unsubscribe())}},y0=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},oU=new y0,sU=new g0,Jr=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Zt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Wr(t))return oU;if(xf(t))return sU;throw ux(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(K(Qr,16))};static \u0275pipe=Df({name:"async",type:n,pure:!1})}return n})();var aU="mediumDate",lx=new H(""),dx=new H(""),Xo=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??aU,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return sx(t,s,o||this.locale,a)}catch(s){throw ux(n,s.message)}}static \u0275fac=function(r){return new(r||n)(K(ku,16),K(lx,24),K(dx,24))};static \u0275pipe=Df({name:"date",type:n,pure:!0})}return n})();var gt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Tn({})}return n})();function Bu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var es=class{};var hx="browser",cU="server";function fx(n){return n===cU}var px=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new _0(P(tt),window)})}return n})(),_0=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ne(V({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=uU(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ne(V({},t),{left:i-s[0],top:o-s[1]}))}};function uU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Qf=new H(""),T0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(q(Qf),q(xe))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),$u=class{_doc;constructor(e){this._doc=e}manager},Wf="ng-app-id";function mx(n){for(let e of n)e.remove()}function gx(n,e){let t=e.createElement("style");return t.textContent=n,t}function lU(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Wf}="${e}"],link[${Wf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Wf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function w0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var b0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=fx(o),lU(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,gx);r?.forEach(i=>this.addUsage(i,this.external,w0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(mx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])mx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,gx(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,w0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Wf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(q(tt),q(pf),q(gf,8),q(Ui))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),E0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},C0=/%COMP%/g;var vx="%COMP%",dU=`_nghost-${vx}`,hU=`_ngcontent-${vx}`,fU=!0,pU=new H("",{providedIn:"root",factory:()=>fU});function mU(n){return hU.replace(C0,n)}function gU(n){return dU.replace(C0,n)}function _x(n,e){return e.map(t=>t.replace(C0,n))}var D0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Hu(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Kf?i.applyToHost(t):i instanceof zu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case zr.Emulated:o=new Kf(u,l,r,this.appId,h,s,a,p,m);break;case zr.ShadowDom:return new I0(u,l,t,r,s,a,this.nonce,p,m);default:o=new zu(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(q(T0),q(b0),q(pf),q(pU),q(tt),q(Ui),q(xe),q(gf),q(Qo,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Hu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(E0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=E0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=E0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pr.DashCase|pr.Important)?e.style.setProperty(t,r,i&pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Mn().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function yx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var I0=class extends Hu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_x(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=w0(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zu=class extends Hu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?_x(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kf=class extends zu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=mU(h),this.hostAttr=gU(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Yf=class n extends Ou{supportsDOMEvents=!0;static makeCurrent(){d0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yU();return t==null?null:vU(t)}resetBaseElement(){qu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Bu(document.cookie,e)}},qu=null;function yU(){return qu=qu||document.head.querySelector("base"),qu?qu.getAttribute("href"):null}function vU(n){return new URL(n,document.baseURI).pathname}var _U=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),wx=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(q(tt))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Ex=["alt","control","meta","shift"],EU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ix=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ex.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=EU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ex.forEach(s=>{if(s!==i){let a=wU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(q(tt))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function S0(n,e){return HA(V({rootComponent:n},IU(e)))}function IU(n){return{appProviders:[...SU,...n?.providers??[]],platformProviders:DU}}function TU(){Yf.makeCurrent()}function bU(){return new Bn}function CU(){return __(document),document}var DU=[{provide:Ui,useValue:hx},{provide:mf,useValue:TU,multi:!0},{provide:tt,useFactory:CU}];var SU=[{provide:cu,useValue:"root"},{provide:Bn,useFactory:bU},{provide:Qf,useClass:wx,multi:!0,deps:[tt]},{provide:Qf,useClass:Ix,multi:!0,deps:[tt]},D0,b0,T0,{provide:Ho,useExisting:D0},{provide:es,useClass:_U},[]];var Ta=class{},Gu=class{},zi=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Jf=class{encodeKey(e){return Tx(e)}encodeValue(e){return Tx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function AU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var xU=/%(\d[a-f0-9])/gi,RU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tx(n){return encodeURIComponent(n).replace(xU,(e,t)=>RU[t]??e)}function Zf(n){return`${n}`}var ei=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Jf,e.fromString){if(e.fromObject)throw new B(2805,!1);this.map=AU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zf):[Zf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function MU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Cx(n){return typeof Blob<"u"&&n instanceof Blob}function Dx(n){return typeof FormData<"u"&&n instanceof FormData}function NU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Sx="Content-Type",Ax="Accept",xx="X-Request-URL",Rx="text/plain",Mx="application/json",kU=`${Mx}, ${Rx}, */*`,Ia=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(MU(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new zi,this.context??=new Xf,!this.params)this.params=new ei,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||bx(this.body)||Cx(this.body)||Dx(this.body)||NU(this.body)?this.body:this.body instanceof ei?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Dx(this.body)?null:Cx(this.body)?this.body.type||null:bx(this.body)?null:typeof this.body=="string"?Rx:this.body instanceof ei?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Mx:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,S)=>y.set(S,e.setHeaders[S]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,S)=>y.set(S,e.setParams[S]),p)),new n(t,r,a,{params:p,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},ts=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ts||{}),ba=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new zi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ep=class n extends ba{constructor(e={}){super(e)}type=ts.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Wu=class n extends ba{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ts.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ku=class extends ba{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},PU=200,OU=204;function A0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Ca=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ia)o=t;else{let u;i.headers instanceof zi?u=i.headers:u=new zi(i.headers);let l;i.params&&(i.params instanceof ei?l=i.params:l=new ei({fromObject:i.params})),o=new Ia(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=Q(o).pipe(ar(u=>this.handler.handle(u)));if(t instanceof Ia||i.observe==="events")return s;let a=s.pipe(kt(u=>u instanceof Wu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new B(2806,!1);return u.body}));case"blob":return a.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new B(2807,!1);return u.body}));case"text":return a.pipe(re(u=>{if(u.body!==null&&typeof u.body!="string")throw new B(2808,!1);return u.body}));case"json":default:return a.pipe(re(u=>u.body))}case"response":return a;default:throw new B(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ei().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,A0(i,r))}post(t,r,i={}){return this.request("POST",t,A0(i,r))}put(t,r,i={}){return this.request("PUT",t,A0(i,r))}static \u0275fac=function(r){return new(r||n)(q(Ta))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var LU=new H("");function FU(n,e){return e(n)}function VU(n,e,t){return(r,i)=>ht(t,()=>e(r,o=>n(o,i)))}var Nx=new H(""),kx=new H(""),Px=new H("",{providedIn:"root",factory:()=>!0});var tp=(()=>{class n extends Ta{backend;injector;chain=null;pendingTasks=P(Li);contributeToStability=P(Px);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Nx),...this.injector.get(kx,[])]));this.chain=r.reduceRight((i,o)=>VU(i,o,this.injector),FU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Do(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(q(Gu),q(Ke))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var jU=/^\)\]\}',?\n/,UU=RegExp(`^${xx}:`,"m");function BU(n){return"responseURL"in n&&n.responseURL?n.responseURL:UU.test(n.getAllResponseHeaders())?n.getResponseHeader(xx):null}var x0=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new B(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?we(r.\u0275loadImpl()):Q(null)).pipe(Ve(()=>new ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((k,R)=>s.setRequestHeader(k,R.join(","))),t.headers.has(Ax)||s.setRequestHeader(Ax,kU),!t.headers.has(Sx)){let k=t.detectContentTypeHeader();k!==null&&s.setRequestHeader(Sx,k)}if(t.responseType){let k=t.responseType.toLowerCase();s.responseType=k!=="json"?k:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let k=s.statusText||"OK",R=new zi(s.getAllResponseHeaders()),j=BU(s)||t.url;return u=new ep({headers:R,status:s.status,statusText:k,url:j}),u},h=()=>{let{headers:k,status:R,statusText:j,url:se}=l(),J=null;R!==OU&&(J=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=J?PU:0);let Re=R>=200&&R<300;if(t.responseType==="json"&&typeof J=="string"){let Mt=J;J=J.replace(jU,"");try{J=J!==""?JSON.parse(J):null}catch(Me){J=Mt,Re&&(Re=!1,J={error:Me,text:J})}}Re?(o.next(new Wu({body:J,headers:k,status:R,statusText:j,url:se||void 0})),o.complete()):o.error(new Ku({error:J,headers:k,status:R,statusText:j,url:se||void 0}))},p=k=>{let{url:R}=l(),j=new Ku({error:k,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(j)},m=!1,y=k=>{m||(o.next(l()),m=!0);let R={type:ts.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(R.total=k.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},S=k=>{let R={type:ts.UploadProgress,loaded:k.loaded};k.lengthComputable&&(R.total=k.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:ts.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(q(es))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Ox=new H(""),$U="XSRF-TOKEN",HU=new H("",{providedIn:"root",factory:()=>$U}),zU="X-XSRF-TOKEN",qU=new H("",{providedIn:"root",factory:()=>zU}),Qu=class{},GU=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Bu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(q(tt),q(HU))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function WU(n,e){let t=n.url.toLowerCase();if(!P(Ox)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=P(Qu).getToken(),i=P(qU);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function R0(...n){let e=[Ca,x0,tp,{provide:Ta,useExisting:tp},{provide:Gu,useFactory:()=>P(LU,{optional:!0})??P(x0)},{provide:Nx,useValue:WU,multi:!0},{provide:Ox,useValue:!0},{provide:Qu,useClass:GU}];for(let t of n)e.push(...t.\u0275providers);return on(e)}var Fx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(q(tt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ye="primary",cl=Symbol("RouteTitle"),O0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function is(n){return new O0(n)}function qx(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function QU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yr(n[t],e[t]))return!1;return!0}function yr(n,e){let t=n?L0(n):void 0,r=e?L0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Gx(n[i],e[i]))return!1;return!0}function L0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Gx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Wx(n){return n.length>0?n[n.length-1]:null}function ti(n){return by(n)?n:Wr(n)?we(Promise.resolve(n)):Q(n)}var YU={exact:Qx,subset:Yx},Kx={exact:ZU,subset:JU,ignored:()=>!0};function Vx(n,e,t){return YU[t.paths](n.root,e.root,t.matrixParams)&&Kx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function ZU(n,e){return yr(n,e)}function Qx(n,e,t){if(!ns(n.segments,e.segments)||!ip(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Qx(n.children[r],e.children[r],t))return!1;return!0}function JU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gx(n[t],e[t]))}function Yx(n,e,t){return Zx(n,e,e.segments,t)}function Zx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ns(i,t)||e.hasChildren()||!ip(i,t,r))}else if(n.segments.length===t.length){if(!ns(n.segments,t)||!ip(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Yx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ns(n.segments,i)||!ip(n.segments,i,r)||!n.children[ye]?!1:Zx(n.children[ye],e,o,r)}}function ip(n,e,t){return e.every((r,i)=>Kx[t](n[i].parameters,r.parameters))}var _r=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){return tB.serialize(this)}},Ne=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return op(this)}},qi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=is(this.parameters),this._parameterMap}toString(){return Xx(this)}};function XU(n,e){return ns(n,e)&&n.every((t,r)=>yr(t.parameters,e[r].parameters))}function ns(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function eB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ye&&(t=t.concat(e(i,r)))}),t}var os=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new Gi,providedIn:"root"})}return n})(),Gi=class{parse(e){let t=new V0(e);return new _r(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Yu(e.root,!0)}`,r=iB(e.queryParams),i=typeof e.fragment=="string"?`#${nB(e.fragment)}`:"";return`${t}${r}${i}`}},tB=new Gi;function op(n){return n.segments.map(e=>Xx(e)).join("/")}function Yu(n,e){if(!n.hasChildren())return op(n);if(e){let t=n.children[ye]?Yu(n.children[ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ye&&r.push(`${i}:${Yu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=eB(n,(r,i)=>i===ye?[Yu(n.children[ye],!1)]:[`${i}:${Yu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ye]!=null?`${op(n)}/${t[0]}`:`${op(n)}/(${t.join("//")})`}}function Jx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function np(n){return Jx(n).replace(/%3B/gi,";")}function nB(n){return encodeURI(n)}function F0(n){return Jx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sp(n){return decodeURIComponent(n)}function jx(n){return sp(n.replace(/\+/g,"%20"))}function Xx(n){return`${F0(n.path)}${rB(n.parameters)}`}function rB(n){return Object.entries(n).map(([e,t])=>`;${F0(e)}=${F0(t)}`).join("")}function iB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${np(t)}=${np(i)}`).join("&"):`${np(t)}=${np(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var oB=/^[^\/()?;#]+/;function M0(n){let e=n.match(oB);return e?e[0]:""}var sB=/^[^\/()?;=#]+/;function aB(n){let e=n.match(sB);return e?e[0]:""}var cB=/^[^=?&#]+/;function uB(n){let e=n.match(cB);return e?e[0]:""}var lB=/^[^&#]+/;function dB(n){let e=n.match(lB);return e?e[0]:""}var V0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ye]=new Ne(e,t)),r}parseSegment(){let e=M0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new qi(sp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=M0(this.remaining);i&&(r=i,this.capture(r))}e[sp(t)]=sp(r)}parseQueryParam(e){let t=uB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=dB(this.remaining);s&&(r=s,this.capture(r))}let i=jx(t),o=jx(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=M0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ye);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ye]:new Ne([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function eR(n){return n.segments.length>0?new Ne([],{[ye]:n}):n}function tR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=tR(i);if(r===ye&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ne(n.segments,e);return hB(t)}function hB(n){if(n.numberOfChildren===1&&n.children[ye]){let e=n.children[ye];return new Ne(n.segments.concat(e.segments),e.children)}return n}function Wi(n){return n instanceof _r}function nR(n,e,t=null,r=null){let i=rR(n);return iR(i,e,t,r)}function rR(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ne(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=eR(r);return e??i}function iR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return N0(i,i,i,t,r);let o=fB(e);if(o.toRoot())return N0(i,i,new Ne([],{}),t,r);let s=pB(o,i,n),a=s.processChildren?Ju(s.segmentGroup,s.index,o.commands):sR(s.segmentGroup,s.index,o.commands);return N0(i,s.segmentGroup,a,t,r)}function ap(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function el(n){return typeof n=="object"&&n!=null&&n.outlets}function N0(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=oR(n,e,t);let a=eR(tR(s));return new _r(a,o,i)}function oR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oR(o,e,t)}),new Ne(n.segments,r)}var cp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ap(r[0]))throw new B(4003,!1);let i=r.find(el);if(i&&i!==Wx(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cp(t,e,r)}var Aa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function pB(n,e,t){if(n.isAbsolute)return new Aa(e,!0,0);if(!t)return new Aa(e,!1,NaN);if(t.parent===null)return new Aa(t,!0,0);let r=ap(n.commands[0])?0:1,i=t.segments.length-1+r;return mB(t,i,n.numberOfDoubleDots)}function mB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Aa(r,!1,i-o)}function gB(n){return el(n[0])?n[0].outlets:{[ye]:n}}function sR(n,e,t){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return Ju(n,e,t);let r=yB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ne(n.segments.slice(0,r.pathIndex),{});return o.children[ye]=new Ne(n.segments.slice(r.pathIndex),n.children),Ju(o,0,i)}else return r.match&&i.length===0?new Ne(n.segments,{}):r.match&&!n.hasChildren()?j0(n,e,t):r.match?Ju(n,0,i):j0(n,e,t)}function Ju(n,e,t){if(t.length===0)return new Ne(n.segments,{});{let r=gB(t),i={};if(Object.keys(r).some(o=>o!==ye)&&n.children[ye]&&n.numberOfChildren===1&&n.children[ye].segments.length===0){let o=Ju(n.children[ye],e,t);return new Ne(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(n.segments,i)}}function yB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(el(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Bx(u,l,s))return o;r+=2}else{if(!Bx(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function j0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(el(o)){let u=vB(o.outlets);return new Ne(r,u)}if(i===0&&ap(t[0])){let u=n.segments[e];r.push(new qi(u.path,Ux(t[0]))),i++;continue}let s=el(o)?o.outlets[ye]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ap(a)?(r.push(new qi(s,Ux(a))),i+=2):(r.push(new qi(s,{})),i++)}return new Ne(r,{})}function vB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=j0(new Ne([],{}),0,r))}),e}function Ux(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Bx(n,e,t){return n==t.path&&yr(e,t.parameters)}var xa="imperative",bt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(bt||{}),gn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ki=class extends gn{type=bt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yn=class extends gn{urlAfterRedirects;type=bt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Jt||{}),Ma=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ma||{}),vr=class extends gn{reason;code;type=bt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Er=class extends gn{reason;code;type=bt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Na=class extends gn{error;target;type=bt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tl=class extends gn{urlAfterRedirects;state;type=bt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends gn{urlAfterRedirects;state;type=bt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lp=class extends gn{urlAfterRedirects;state;shouldActivate;type=bt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dp=class extends gn{urlAfterRedirects;state;type=bt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends gn{urlAfterRedirects;state;type=bt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class{route;type=bt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pp=class{route;type=bt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mp=class{snapshot;type=bt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{snapshot;type=bt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{snapshot;type=bt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{snapshot;type=bt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ka=class{routerEvent;position;anchor;type=bt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},nl=class{},Pa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function _B(n){return!(n instanceof nl)&&!(n instanceof Pa)}function EB(n,e){return n.providers&&!n._injector&&(n._injector=pa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jn(n){return n.outlet||ye}function wB(n,e){let t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function ul(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _p=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ul(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ss(this.rootInjector)}},ss=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _p(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(q(Ke))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ep=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=U0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=U0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=B0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return B0(e,this._root).map(t=>t.value)}};function U0(n,e){if(n===e.value)return e;for(let t of e.children){let r=U0(n,t);if(r)return r}return null}function B0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=B0(n,t);if(r.length)return r.unshift(e),r}return[]}var mn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Sa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var rl=class extends Ep{snapshot;constructor(e,t){super(e),this.snapshot=t,Q0(this,e)}toString(){return this.snapshot.toString()}};function aR(n){let e=IB(n),t=new at([new qi("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new kn(t,r,o,s,i,ye,n,e.root);return a.snapshot=e.root,new rl(new mn(a,[]),e)}function IB(n){let e={},t={},r={},i="",o=new rs([],e,r,i,t,ye,n,null,{});return new il("",new mn(o,[]))}var kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[cl]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>is(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>is(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&uR(i)&&(r.resolve[cl]=i.title),r}var rs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cl]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=is(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},il=class extends Ep{url;constructor(e,t){super(t),this.url=e,Q0(this,t)}toString(){return cR(this._root)}};function Q0(n,e){e.value._routerState=n,e.children.forEach(t=>Q0(n,t))}function cR(n){let e=n.children.length>0?` { ${n.children.map(cR).join(", ")} } `:"";return`${n.value}${e}`}function k0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),yr(e.params,t.params)||n.paramsSubject.next(t.params),QU(e.url,t.url)||n.urlSubject.next(t.url),yr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $0(n,e){let t=yr(n.params,e.params)&&XU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$0(n.parent,e.parent))}function uR(n){return typeof n.title=="string"||n.title===null}var lR=new H(""),ll=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ye;activateEvents=new $e;deactivateEvents=new $e;attachEvents=new $e;detachEvents=new $e;routerOutletData=BA(void 0);parentContexts=P(ss);location=P(Gr);changeDetector=P(Qr);inputBinder=P(dl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new H0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ft({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[xn]})}return n})(),H0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===kn?this.route:e===ss?this.childContexts:e===lR?this.outletData:this.parent.get(e,t)}},dl=new H(""),Y0=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=eu([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?Q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=zA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Z0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ut({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&G(0,"router-outlet")},dependencies:[ll],encapsulation:2})}return n})();function J0(n){let e=n.children&&n.children.map(J0),t=e?ne(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ye&&(t.component=Z0),t}function TB(n,e,t){let r=ol(n,e._root,t?t._root:void 0);return new rl(r,e)}function ol(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bB(n,e,t);return new mn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ol(n,a)),s}}let r=CB(e.value),i=e.children.map(o=>ol(n,o));return new mn(r,i)}}function bB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ol(n,r,i);return ol(n,r)})}function CB(n){return new kn(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var Oa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dR="ngNavigationCancelingError";function Ip(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hR(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function hR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dR]=!0,t.cancellationCode=e,t}function DB(n){return fR(n)&&Wi(n.url)}function fR(n){return!!n&&n[dR]}var SB=(n,e,t,r)=>re(i=>(new z0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),z0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),k0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Sa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Sa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(k0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),k0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Tp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ra=class{component;route;constructor(e,t){this.component=e,this.route=t}};function AB(n,e,t){let r=n._root,i=e?e._root:null;return Zu(r,i,t,[r.value])}function xB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Hy(n)?n:e.get(n):r}function Zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Sa(e);return n.children.forEach(s=>{RB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Xu(a,t.getContext(s),i)),i}function RB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=MB(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Tp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zu(n,e,a?a.children:null,r,i):Zu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ra(a.outlet.component,s))}else s&&Xu(e,a,i),i.canActivateChecks.push(new Tp(r)),o.component?Zu(n,null,a?a.children:null,r,i):Zu(n,null,t,r,i);return i}function MB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ns(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ns(n.url,e.url)||!yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$0(n,e)||!yr(n.queryParams,e.queryParams);case"paramsChange":default:return!$0(n,e)}}function Xu(n,e,t){let r=Sa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Xu(s,e.children.getContext(o),t):Xu(s,null,t):Xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ra(e.outlet.component,i)):t.canDeactivateChecks.push(new Ra(null,i)):t.canDeactivateChecks.push(new Ra(null,i))}function hl(n){return typeof n=="function"}function NB(n){return typeof n=="boolean"}function kB(n){return n&&hl(n.canLoad)}function PB(n){return n&&hl(n.canActivate)}function OB(n){return n&&hl(n.canActivateChild)}function LB(n){return n&&hl(n.canDeactivate)}function FB(n){return n&&hl(n.canMatch)}function pR(n){return n instanceof jn||n?.name==="EmptyError"}var rp=Symbol("INITIAL_VALUE");function La(){return Ve(n=>eu(n.map(e=>e.pipe(Je(1),yh(rp)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===rp)return rp;if(t===!1||VB(t))return t}return!0}),kt(e=>e!==rp),Je(1)))}function VB(n){return Wi(n)||n instanceof Oa}function jB(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Q(ne(V({},t),{guardsResult:!0})):UB(s,r,i,n).pipe(ct(a=>a&&NB(a)?BB(r,o,n,e):Q(a)),re(a=>ne(V({},t),{guardsResult:a})))})}function UB(n,e,t,r){return we(n).pipe(ct(i=>GB(i.component,i.route,t,e,r)),Lr(i=>i!==!0,!0))}function BB(n,e,t,r){return we(e).pipe(ar(i=>Xs(HB(i.route.parent,r),$B(i.route,r),qB(n,i.path,t),zB(n,i.route,t))),Lr(i=>i!==!0,!0))}function $B(n,e){return n!==null&&e&&e(new yp(n)),Q(!0)}function HB(n,e){return n!==null&&e&&e(new mp(n)),Q(!0)}function zB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>tu(()=>{let s=ul(e)??t,a=Fa(o,s),u=PB(a)?a.canActivate(e,n):ht(s,()=>a(e,n));return ti(u).pipe(Lr())}));return Q(i).pipe(La())}function qB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xB(s)).filter(s=>s!==null).map(s=>tu(()=>{let a=s.guards.map(u=>{let l=ul(s.node)??t,h=Fa(u,l),p=OB(h)?h.canActivateChild(r,n):ht(l,()=>h(r,n));return ti(p).pipe(Lr())});return Q(a).pipe(La())}));return Q(o).pipe(La())}function GB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(a=>{let u=ul(e)??i,l=Fa(a,u),h=LB(l)?l.canDeactivate(n,e,t,r):ht(u,()=>l(n,e,t,r));return ti(h).pipe(Lr())});return Q(s).pipe(La())}function WB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let a=Fa(s,n),u=kB(a)?a.canLoad(e,t):ht(n,()=>a(e,t));return ti(u)});return Q(o).pipe(La(),mR(r))}function mR(n){return Kd(Ct(e=>{if(typeof e!="boolean")throw Ip(n,e)}),re(e=>e===!0))}function KB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let a=Fa(s,n),u=FB(a)?a.canMatch(e,t):ht(n,()=>a(e,t));return ti(u)});return Q(o).pipe(La(),mR(r))}var sl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},al=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Da(n){return Js(new sl(n))}function QB(n){return Js(new B(4e3,!1))}function YB(n){return Js(hR(!1,Jt.GuardRejected))}var q0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[ye])return QB(`${e.redirectTo}`);i=i.children[ye]}}applyRedirectCommands(e,t,r,i,o){return ZB(t,i,o).pipe(re(s=>{if(s instanceof _r)throw new al(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new al(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new _r(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ne(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function ZB(n,e,t){if(typeof n=="string")return Q(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ti(ht(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var G0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JB(n,e,t,r,i){let o=gR(n,e,t);return o.matched?(r=EB(e,r),KB(r,e,t,i).pipe(re(s=>s===!0?o:V({},G0)))):Q(o)}function gR(n,e,t){if(e.path==="**")return XB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},G0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||qx)(t,n,e);if(!i)return V({},G0);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function XB(n){return{matched:!0,parameters:n.length>0?Wx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $x(n,e,t,r){return t.length>0&&n4(n,t,r)?{segmentGroup:new Ne(e,t4(r,new Ne(t,n.children))),slicedSegments:[]}:t.length===0&&r4(n,t,r)?{segmentGroup:new Ne(n.segments,e4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:t}}function e4(n,e,t,r){let i={};for(let o of t)if(Cp(n,e,o)&&!r[Jn(o)]){let s=new Ne([],{});i[Jn(o)]=s}return V(V({},r),i)}function t4(n,e){let t={};t[ye]=e;for(let r of n)if(r.path===""&&Jn(r)!==ye){let i=new Ne([],{});t[Jn(r)]=i}return t}function n4(n,e,t){return t.some(r=>Cp(n,e,r)&&Jn(r)!==ye)}function r4(n,e,t){return t.some(r=>Cp(n,e,r))}function Cp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function i4(n,e,t){return e.length===0&&!n.children[t]}var W0=class{};function o4(n,e,t,r,i,o,s="emptyOnly"){return new K0(n,e,t,r,i,s,o).recognize()}var s4=31,K0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new q0(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=$x(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new mn(r,t),o=new il("",i),s=nR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new rs([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ye,t).pipe(re(r=>({children:r,rootSnapshot:t})),Un(r=>{if(r instanceof al)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof sl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(re(s=>s instanceof mn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(ar(s=>{let a=r.children[s],u=wB(t,s);return this.processSegmentGroup(e,u,a,s,i)}),gh((s,a)=>(s.push(...a),s)),Ci(null),Ay(),ct(s=>{if(s===null)return Da(r);let a=yR(s);return a4(a),Q(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(ar(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Un(l=>{if(l instanceof sl)return Q(null);throw l}))),Lr(u=>!!u),Un(u=>{if(pR(u))return i4(r,i,o)?Q(new W0):Da(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Jn(r)!==s&&(s===ye||!Cp(i,o,r))?Da(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Da(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=gR(t,i,o);if(!u)return Da(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s4&&(this.allowRedirects=!1));let y=new rs(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Hx(i),Jn(i),i.component??i._loadedComponent??null,i,zx(i)),S=wp(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ve(R=>this.applyRedirects.lineralizeSegments(i,R)),ct(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=JB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ve(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new rs(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Hx(r),Jn(r),r.component??r._loadedComponent??null,r,zx(r)),k=wp(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let{segmentGroup:R,slicedSegments:j}=$x(t,m,y,l);if(j.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(re(J=>new mn(S,J)));if(l.length===0&&j.length===0)return Q(new mn(S,[]));let se=Jn(r)===o;return this.processSegment(h,l,R,j,se?ye:o,!0,S).pipe(re(J=>new mn(S,J instanceof mn?[J]:[])))}))):Da(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):WB(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(Ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):YB(t))):Q({routes:[],injector:e})}};function a4(n){n.sort((e,t)=>e.value.outlet===ye?-1:t.value.outlet===ye?1:e.value.outlet.localeCompare(t.value.outlet))}function c4(n){let e=n.value.routeConfig;return e&&e.path===""}function yR(n){let e=[],t=new Set;for(let r of n){if(!c4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yR(r.children);e.push(new mn(r.value,i))}return e.filter(r=>!t.has(r))}function Hx(n){return n.data||{}}function zx(n){return n.resolve||{}}function u4(n,e,t,r,i,o){return ct(s=>o4(n,e,t,r,s.extractedUrl,i,o).pipe(re(({state:a,tree:u})=>ne(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function l4(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of vR(u))s.add(l);let a=0;return we(s).pipe(ar(u=>o.has(u)?d4(u,r,n,e):(u.data=wp(u,u.parent,n).resolve,Q(void 0))),Ct(()=>a++),ea(1),ct(u=>a===s.size?Q(t):tn))})}function vR(n){let e=n.children.map(t=>vR(t)).flat();return[n,...e]}function d4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!uR(i)&&(o[cl]=i.title),tu(()=>(n.data=wp(n,n.parent,t).resolve,h4(o,n,e,r).pipe(re(s=>(n._resolvedData=s,n.data=V(V({},n.data),s),null)))))}function h4(n,e,t,r){let i=L0(n);if(i.length===0)return Q({});let o={};return we(i).pipe(ct(s=>f4(n[s],e,t,r).pipe(Lr(),Ct(a=>{if(a instanceof Oa)throw Ip(new Gi,a);o[s]=a}))),ea(1),re(()=>o),Un(s=>pR(s)?tn:Js(s)))}function f4(n,e,t,r){let i=ul(e)??r,o=Fa(n,i),s=o.resolve?o.resolve(e,t):ht(i,()=>o(e,t));return ti(s)}function P0(n){return Ve(e=>{let t=n(e);return t?we(t).pipe(re(()=>e)):Q(e)})}var X0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ye);return r}getResolvedTitleForRoute(t){return t.data[cl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(_R),providedIn:"root"})}return n})(),_R=(()=>{class n extends X0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(q(Fx))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qi=new H("",{providedIn:"root",factory:()=>({})}),as=new H(""),Dp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(e0);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ti(t.loadComponent()).pipe(re(wR),Ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Do(()=>{this.componentLoaders.delete(t)})),i=new Ws(r,()=>new st).pipe(Gs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ER(r,this.compiler,t,this.onLoadEndListener).pipe(Do(()=>{this.childrenLoaders.delete(r)})),s=new Ws(o,()=>new st).pipe(Gs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ER(n,e,t,r){return ti(n.loadChildren()).pipe(re(wR),ct(i=>i instanceof Cf||Array.isArray(i)?Q(i):we(e.compileModuleAsync(i))),re(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(as,[],{optional:!0,self:!0}).flat()),{routes:s.map(J0),injector:o}}))}function p4(n){return n&&typeof n=="object"&&"default"in n}function wR(n){return p4(n)?n.default:n}var Sp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(m4),providedIn:"root"})}return n})(),m4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eE=new H(""),tE=new H("");function IR(n,e,t){let r=n.get(tE),i=n.get(tt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),g4(n))),{onViewTransitionCreated:u}=r;return u&&ht(n,()=>u({transition:a,from:e,to:t})),s}function g4(n){return new Promise(e=>{Af({read:()=>setTimeout(e)},{injector:n})})}var nE=new H(""),Ap=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortWithErrorSubject=new st;configLoader=P(Dp);environmentInjector=P(Ke);destroyRef=P($r);urlSerializer=P(os);rootContexts=P(ss);location=P(Hi);inputBindingEnabled=P(dl,{optional:!0})!==null;titleStrategy=P(X0);options=P(Qi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Sp);createViewTransition=P(eE,{optional:!0});navigationErrorHandler=P(nE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new fp(i)),r=i=>this.events.next(new pp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ne(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new at(null),this.transitions.pipe(kt(r=>r!==null),Ve(r=>{let i=!1;return Q(r).pipe(Ve(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),tn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ne(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Er(o.id,this.urlSerializer.serialize(o.rawUrl),u,Ma.IgnoredSameUrlNavigation)),o.resolve(!1),tn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Q(o).pipe(Ve(u=>(this.events.next(new Ki(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?tn:Promise.resolve(u))),u4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ct(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ne(V({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new tl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Ki(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=aR(this.rootComponentType).snapshot;return this.currentTransition=r=ne(V({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:ne(V({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Q(r)}else{let u="";return this.events.next(new Er(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Ma.IgnoredByUrlHandlingStrategy)),o.resolve(!1),tn}}),Ct(o=>{let s=new up(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),re(o=>(this.currentTransition=r=ne(V({},o),{guards:AB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),jB(this.environmentInjector,o=>this.events.next(o)),Ct(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ip(this.urlSerializer,o.guardsResult);let s=new lp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),kt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Jt.GuardRejected),!1)),P0(o=>{if(o.guards.canActivateChecks.length!==0)return Q(o).pipe(Ct(s=>{let a=new dp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ve(s=>{let a=!1;return Q(s).pipe(l4(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Jt.NoDataFromResolver)}}))}),Ct(s=>{let a=new hp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),P0(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(Ct(l=>{a.component=l}),re(()=>{})));for(let l of a.children)u.push(...s(l));return u};return eu(s(o.targetSnapshot.root)).pipe(Ci(null),Je(1))}),P0(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?we(a).pipe(re(()=>r)):Q(r)}),re(o=>{let s=TB(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ne(V({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ct(()=>{this.events.next(new nl)}),SB(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Je(1),vh(new ie(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(kt(()=>!i&&!r.targetRouterState),Ct(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Jt.Aborted)}))),Ct({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),vh(this.transitionAbortWithErrorSubject.pipe(Ct(o=>{throw o}))),Do(()=>{i||this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Un(o=>{if(this.destroyed)return r.resolve(!1),tn;if(i=!0,fR(o))this.events.next(new vr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),DB(o)?this.events.next(new Pa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Na(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ht(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Oa){let{message:u,cancellationCode:l}=Ip(this.urlSerializer,a);this.events.next(new vr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Pa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return tn}))}))}cancelNavigationTransition(t,r,i){let o=new vr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y4(n){return n!==xa}var TR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(v4),providedIn:"root"})}return n})(),bp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},v4=(()=>{class n extends bp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bR=(()=>{class n{urlSerializer=P(os);options=P(Qi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Hi);urlHandlingStrategy=P(Sp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _r;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof _r?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=aR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>P(_4),providedIn:"root"})}return n})(),_4=(()=>{class n extends bR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ki?this.updateStateMemento():t instanceof Er?this.commitTransition(r):t instanceof tl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof nl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vr&&t.code!==Jt.SupersededByNewNavigation&&t.code!==Jt.Redirect?this.restoreHistory(r):t instanceof Na?this.restoreHistory(r,!0):t instanceof yn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xp(n,e){n.events.pipe(kt(t=>t instanceof yn||t instanceof vr||t instanceof Na||t instanceof Er),re(t=>t instanceof yn||t instanceof Er?0:(t instanceof vr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?2:1),kt(t=>t!==2),Je(1)).subscribe(()=>{e()})}var E4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(q_);stateManager=P(bR);options=P(Qi,{optional:!0})||{};pendingTasks=P(Hr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Ap);urlSerializer=P(os);location=P(Hi);urlHandlingStrategy=P(Sp);injector=P(Ke);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(TR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(as,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(dl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof vr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yn)this.navigated=!0;else if(r instanceof Pa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||y4(i.source)},s);this.scheduleNavigation(a,xa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_B(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(Zt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(J0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=rR(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return iR(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Wi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xa,null,r)}navigate(t,r={skipLocationChange:!1}){return I4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},E4):r===!1?i=V({},w4):i=r,Wi(t))return Vx(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Vx(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return xp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}var Va=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=hr(null);get href(){return an(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new st;applicationErrorHandler=P(Zt);options=P(Qi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new Pf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof yn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Wi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(K(qe),K(kn),Au("tabindex"),K(qr),K(fn),K(Yn))};static \u0275dir=ft({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Z("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ma("href",i.reactiveHref(),I_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",$i],skipLocationChange:[2,"skipLocationChange","skipLocationChange",$i],replaceUrl:[2,"replaceUrl","replaceUrl",$i],routerLink:"routerLink"},features:[xn]})}return n})(),iE=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new $e;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof yn&&this.update()})}ngAfterContentInit(){Q(this.links.changes,Q(null)).pipe(bi()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=we(t).pipe(bi()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=T4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(K(qe),K(fn),K(qr),K(Qr),K(Va,8))};static \u0275dir=ft({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Q_(o,Va,5),r&2){let s;Y_(s=Z_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[xn]})}return n})();function T4(n){return!!n.paths}var fl=class{};var CR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(kt(t=>t instanceof yn),ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=pa(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(bi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Q(null);let o=i.pipe(ct(s=>s===null?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return we([o,s]).pipe(bi())}else return o})}static \u0275fac=function(r){return new(r||n)(q(qe),q(Ke),q(fl),q(Dp))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DR=new H(""),b4=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=xa;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Er&&t.code===Ma.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ka&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ka(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){F_()};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function oE(n,...e){return on([{provide:as,multi:!0,useValue:n},[],{provide:kn,useFactory:SR,deps:[qe]},{provide:Mu,multi:!0,useFactory:AR},e.map(t=>t.\u0275providers)])}function SR(n){return n.routerState.root}function pl(n,e){return{\u0275kind:n,\u0275providers:e}}function AR(){let n=P(Xe);return e=>{let t=n.get(Yo);if(e!==t.components[0])return;let r=n.get(qe),i=n.get(xR);n.get(sE)===1&&r.initialNavigation(),n.get(NR,null,{optional:!0})?.setUpPreloading(),n.get(DR,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xR=new H("",{factory:()=>new st}),sE=new H("",{providedIn:"root",factory:()=>1});function RR(){let n=[{provide:sE,useValue:0},Rf(()=>{let e=P(Xe);return e.get(h0,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(qe),o=e.get(xR);xp(i,()=>{r(!0)}),e.get(Ap).afterPreactivation=()=>(r(!0),o.closed?Q(void 0):o),i.initialNavigation()}))})];return pl(2,n)}function MR(){let n=[Rf(()=>{P(qe).setUpLocationChangeListener()}),{provide:sE,useValue:2}];return pl(3,n)}var NR=new H("");function kR(n){return pl(0,[{provide:NR,useExisting:CR},{provide:fl,useExisting:n}])}function PR(){return pl(8,[Y0,{provide:dl,useExisting:Y0}])}function OR(n){Ko("NgRouterViewTransitions");let e=[{provide:eE,useValue:IR},{provide:tE,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return pl(9,e)}var LR=[Hi,{provide:os,useClass:Gi},qe,ss,{provide:kn,useFactory:SR,deps:[qe]},Dp,[]],cs=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[LR,[],{provide:as,multi:!0,useValue:t},[],r?.errorHandler?{provide:nE,useValue:r.errorHandler}:[],{provide:Qi,useValue:r||{}},r?.useHash?D4():S4(),C4(),r?.preloadingStrategy?kR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?A4(r):[],r?.bindToComponentInputs?PR().\u0275providers:[],r?.enableViewTransitions?OR().\u0275providers:[],x4()]}}static forChild(t){return{ngModule:n,providers:[{provide:as,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Tn({})}return n})();function C4(){return{provide:DR,useFactory:()=>{let n=P(px),e=P(xe),t=P(Qi),r=P(Ap),i=P(os);return t.scrollOffset&&n.setOffset(t.scrollOffset),new b4(i,r,n,e,t)}}}function D4(){return{provide:Yn,useClass:v0}}function S4(){return{provide:Yn,useClass:Vf}}function A4(n){return[n.initialNavigation==="disabled"?MR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?RR().\u0275providers:[]]}var rE=new H("");function x4(){return[{provide:rE,useFactory:AR},{provide:Mu,multi:!0,useExisting:rE}]}var FR=()=>{};var UR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},R4=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Rp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(UR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):R4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new cE;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},cE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},M4=function(n){let e=UR(n);return Rp.encodeByteArray(e,!0)},gl=function(n){return M4(n).replace(/\./g,"")},Mp=function(n){try{return Rp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var N4=()=>lE().__FIREBASE_DEFAULTS__,k4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mp(n[1]);return e&&JSON.parse(e)},Np=()=>{try{return FR()||N4()||k4()||P4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dE=n=>{var e,t;return(t=(e=Np())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BR=n=>{let e=dE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},hE=()=>{var n;return(n=Np())===null||n===void 0?void 0:n.config},fE=n=>{var e;return(e=Np())===null||e===void 0?void 0:e[`_${n}`]};var us=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Yi(n){return n.endsWith(".cloudworkstations.dev")}function kp(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function $R(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gl(JSON.stringify(t)),gl(JSON.stringify(s)),""].join(".")}var ml={};function O4(){let n={prod:[],emulator:[]};for(let e of Object.keys(ml))ml[e]?n.emulator.push(e):n.prod.push(e);return n}function L4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var VR=!1;function Pp(n,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||ml[n]===e||ml[n]||VR)return;ml[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=O4().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{VR=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=L4(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),k=t("learnmore"),R=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),se=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let J=m.element;a(J),h(R,k);let Re=l();u(se,j),J.append(se,S,R,Re),document.body.appendChild(J)}o?(S.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function F4(){var n;let e=(n=Np())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WR(){let n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KR(){return!F4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yl(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var V4="FirebaseError",vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=V4,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?j4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new vn(i,a,r)}};function j4(n,e){return n.replace(U4,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var U4=/\{\$([^}]+)}/g;function YR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(jR(o)&&jR(s)){if(!wr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jR(n){return n!==null&&typeof n=="object"}function Ua(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZR(n,e){let t=new uE(n,e);return t.subscribe.bind(t)}var uE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");B4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=aE),i.error===void 0&&(i.error=aE),i.complete===void 0&&(i.complete=aE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function B4(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function aE(){}var jse=4*60*60*1e3;function nt(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ls="[DEFAULT]";var pE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new us;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H4(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $4(n){return n===ls?void 0:n}function H4(n){return n.instantiationMode==="EAGER"}var Op=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new pE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var z4=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),q4={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},G4=Ie.INFO,W4={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},K4=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=W4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ir=class{constructor(e){this.name=e,this._logLevel=G4,this._logHandler=K4,this._userLogHandler=null,z4.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var Q4=(n,e)=>e.some(t=>n instanceof t),JR,XR;function Y4(){return JR||(JR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z4(){return XR||(XR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var e1=new WeakMap,gE=new WeakMap,t1=new WeakMap,mE=new WeakMap,vE=new WeakMap;function J4(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Tr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&e1.set(t,n)}).catch(()=>{}),vE.set(e,n),e}function X4(n){if(gE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});gE.set(n,e)}var yE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||t1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n1(n){yE=n(yE)}function e3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Lp(this),e,...t);return t1.set(r,e.sort?e.sort():[e]),Tr(r)}:Z4().includes(n)?function(...e){return n.apply(Lp(this),e),Tr(e1.get(this))}:function(...e){return Tr(n.apply(Lp(this),e))}}function t3(n){return typeof n=="function"?e3(n):(n instanceof IDBTransaction&&X4(n),Q4(n,Y4())?new Proxy(n,yE):n)}function Tr(n){if(n instanceof IDBRequest)return J4(n);if(mE.has(n))return mE.get(n);let e=t3(n);return e!==n&&(mE.set(n,e),vE.set(e,n)),e}var Lp=n=>vE.get(n);function i1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Tr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Tr(s.result),u.oldVersion,u.newVersion,Tr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var n3=["get","getKey","getAll","getAllKeys","count"],r3=["put","add","delete","clear"],_E=new Map;function r1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_E.get(e))return _E.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=r3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n3.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return _E.set(e,o),o}n1(n=>ne(V({},n),{get:(e,t,r)=>r1(e,t)||n.get(e,t,r),has:(e,t)=>!!r1(e,t)||n.has(e,t)}));var wE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function i3(n){let e=n.getComponent();return e?.type==="VERSION"}var IE="@firebase/app",o1="0.13.1";var ni=new Ir("@firebase/app"),o3="@firebase/app-compat",s3="@firebase/analytics-compat",a3="@firebase/analytics",c3="@firebase/app-check-compat",u3="@firebase/app-check",l3="@firebase/auth",d3="@firebase/auth-compat",h3="@firebase/database",f3="@firebase/data-connect",p3="@firebase/database-compat",m3="@firebase/functions",g3="@firebase/functions-compat",y3="@firebase/installations",v3="@firebase/installations-compat",_3="@firebase/messaging",E3="@firebase/messaging-compat",w3="@firebase/performance",I3="@firebase/performance-compat",T3="@firebase/remote-config",b3="@firebase/remote-config-compat",C3="@firebase/storage",D3="@firebase/storage-compat",S3="@firebase/firestore",A3="@firebase/ai",x3="@firebase/firestore-compat",R3="firebase",M3="11.9.0";var TE="[DEFAULT]",N3={[IE]:"fire-core",[o3]:"fire-core-compat",[a3]:"fire-analytics",[s3]:"fire-analytics-compat",[u3]:"fire-app-check",[c3]:"fire-app-check-compat",[l3]:"fire-auth",[d3]:"fire-auth-compat",[h3]:"fire-rtdb",[f3]:"fire-data-connect",[p3]:"fire-rtdb-compat",[m3]:"fire-fn",[g3]:"fire-fn-compat",[y3]:"fire-iid",[v3]:"fire-iid-compat",[_3]:"fire-fcm",[E3]:"fire-fcm-compat",[w3]:"fire-perf",[I3]:"fire-perf-compat",[T3]:"fire-rc",[b3]:"fire-rc-compat",[C3]:"fire-gcs",[D3]:"fire-gcs-compat",[S3]:"fire-fst",[x3]:"fire-fst-compat",[A3]:"fire-vertex","fire-js":"fire-js",[R3]:"fire-js-all"};var vl=new Map,k3=new Map,bE=new Map;function s1(n,e){try{n.container.addComponent(e)}catch(t){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function er(n){let e=n.name;if(bE.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;bE.set(e,n);for(let t of vl.values())s1(t,n);for(let t of k3.values())s1(t,n);return!0}function Ba(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _n(n){return n==null?!1:n.settings!==void 0}var P3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new Xn("app","Firebase",P3);var CE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}};var Ji=M3;function AE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:TE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zi.create("bad-app-name",{appName:String(i)});if(t||(t=hE()),!t)throw Zi.create("no-options");let o=vl.get(i);if(o){if(wr(t,o.options)&&wr(r,o.config))return o;throw Zi.create("duplicate-app",{appName:i})}let s=new Op(i);for(let u of bE.values())s.addComponent(u);let a=new CE(t,r,s);return vl.set(i,a),a}function ds(n=TE){let e=vl.get(n);if(!e&&n===TE&&hE())return AE();if(!e)throw Zi.create("no-app",{appName:n});return e}function Fp(){return Array.from(vl.values())}function rt(n,e,t){var r;let i=(r=N3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(a.join(" "));return}er(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var O3="firebase-heartbeat-database",L3=1,_l="firebase-heartbeat-store",EE=null;function l1(){return EE||(EE=i1(O3,L3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zi.create("idb-open",{originalErrorMessage:n.message})})),EE}function F3(n){return E(this,null,function*(){try{let t=(yield l1()).transaction(_l),r=yield t.objectStore(_l).get(d1(n));return yield t.done,r}catch(e){if(e instanceof vn)ni.warn(e.message);else{let t=Zi.create("idb-get",{originalErrorMessage:e?.message});ni.warn(t.message)}}})}function a1(n,e){return E(this,null,function*(){try{let r=(yield l1()).transaction(_l,"readwrite");yield r.objectStore(_l).put(e,d1(n)),yield r.done}catch(t){if(t instanceof vn)ni.warn(t.message);else{let r=Zi.create("idb-set",{originalErrorMessage:t?.message});ni.warn(r.message)}}})}function d1(n){return`${n.name}!${n.options.appId}`}var V3=1024,j3=30,DE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new SE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=c1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>j3){let s=B3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ni.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=c1(),{heartbeatsToSend:r,unsentEntries:i}=U3(this._heartbeatsCache.heartbeats),o=gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ni.warn(t),""}})}};function c1(){return new Date().toISOString().substring(0,10)}function U3(n,e=V3){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),u1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),u1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var SE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return yl()?QR().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield F3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return a1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return a1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function u1(n){return gl(JSON.stringify({version:2,heartbeats:n})).length}function B3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function $3(n){er(new Xt("platform-logger",e=>new wE(e),"PRIVATE")),er(new Xt("heartbeat",e=>new DE(e),"PRIVATE")),rt(IE,o1,n),rt(IE,o1,"esm2017"),rt("fire-js","")}$3("");var H3="firebase",z3="11.9.1";rt(H3,z3,"app");function h1(n){n===void 0&&(n=P(Xe));let e=n.get(Li);return t=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Xi=new Jo("ANGULARFIRE2_VERSION");function El(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ha=(n,e)=>{let t=e?[e]:Fp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},$a=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}($a||{}),f1=u0()&&typeof Zone<"u"?$a.WARN:$a.SILENT;var Vp=class{zone;delegate;constructor(e,t=Ty){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},eo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(xe);this.outsideAngular=t.runOutsideAngular(()=>new Vp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Vp(typeof Zone>"u"?void 0:Zone.current,Zs))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p1=!1;function q3(n,e){!p1&&(f1>$a.SILENT||u0())&&(p1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),f1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function G3(n){let e=P(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function hs(n){let e=P(xe,{optional:!0});return e?e.run(()=>n()):n()}var W3=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ht(t,()=>hs(()=>n.apply(void 0,r)))),it=(n,e,t)=>(t||=e?$a.WARN:$a.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(eo),s=P(Li),a=P(Ke)}catch{return q3(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=hs(()=>s.add())),i[l]=W3(i[l],r,a));let u=G3(()=>n.apply(this,i));return e?u instanceof ie?u.pipe(Ti(o.outsideAngular),Ii(o.insideAngular),h1(a)):u instanceof Promise?hs(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>ht(a,()=>hs(()=>h(m))),m=>ht(a,()=>hs(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:hs(()=>u):u instanceof ie?u.pipe(Ti(o.outsideAngular),Ii(o.insideAngular)):hs(()=>u)});var ri=class{constructor(e){return e}},fs=class{constructor(){return Fp()}};function K3(n){return n&&n.length===1?n[0]:new ri(ds())}var xE=new H("angularfire2._apps"),Q3={provide:ri,useFactory:K3,deps:[[new sn,xE]]},Y3={provide:fs,deps:[[new sn,xE]]};function Z3(n){return(e,t)=>{let r=t.get(Ui);rt("angularfire",Xi.full,"core"),rt("angularfire",Xi.full,"app"),rt("angular",$A.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ri(i)}}function m1(n,...e){return on([Q3,Y3,{provide:xE,useFactory:Z3(n),multi:!0,deps:[xe,Xe,eo,...e]}])}var g1=it(AE,!0);var J3=new Map,X3={activated:!1,tokenObservers:[]},e$={initialized:!1,enabled:!1};function tr(n){return J3.get(n)||Object.assign({},X3)}function E1(){return e$}var t$="https://content-firebaseappcheck.googleapis.com/v1";var n$="exchangeDebugToken",y1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$ae=24*60*60*1e3;var NE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new us,this.pending.promise.catch(t=>{}),yield r$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new us,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function r$(n){return new Promise(e=>{setTimeout(e,n)})}var i$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},to=new Xn("appCheck","AppCheck",i$);function w1(n){if(!tr(n).activated)throw to.create("use-before-activation",{appName:n.name})}function I1(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw to.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw to.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw to.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function T1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${t$}/projects/${t}/apps/${r}:${n$}?key=${i}`,body:{debug_token:e}}}var o$="firebase-app-check-database",s$=1,kE="firebase-app-check-store";var jp=null;function a$(){return jp||(jp=new Promise((n,e)=>{try{let t=indexedDB.open(o$,s$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(kE,{keyPath:"compositeKey"})}}}catch(t){e(to.create("storage-open",{originalErrorMessage:t?.message}))}}),jp)}function c$(n,e){return u$(l$(n),e)}function u$(n,e){return E(this,null,function*(){let r=(yield a$()).transaction(kE,"readwrite"),o=r.objectStore(kE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(to.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function l$(n){return`${n.options.appId}-${n.name}`}var wl=new Ir("@firebase/app-check");function RE(n,e){return yl()?c$(n,e).catch(t=>{wl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function b1(){return E1().enabled}function C1(){return E(this,null,function*(){let n=E1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var d$={error:"UNKNOWN_ERROR"};function h$(n){return Rp.encodeString(JSON.stringify(n),!1)}function PE(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;w1(r);let i=tr(r),o=i.token,s;if(o&&!Il(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Il(l)?o=l:yield RE(r,void 0))}if(!e&&o&&Il(o))return{token:o.token};let a=!1;if(b1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=I1(T1(r,yield C1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield RE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wl.warn(l.message):t&&wl.error(l),ME(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wl.warn(l.message):t&&wl.error(l),s=l}let u;return o?s?Il(o)?u={token:o.token,internalError:s}:u=ME(s):(u={token:o.token},i.token=o,yield RE(r,o)):u=ME(s),a&&g$(r,u),u})}function f$(n){return E(this,null,function*(){let e=n.app;w1(e);let{provider:t}=tr(e);if(b1()){let r=yield C1(),{token:i}=yield I1(T1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function p$(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Il(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),v1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>v1(n))}function D1(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function v1(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=m$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function m$(n){let{app:e}=n;return new NE(()=>E(null,null,function*(){let t=tr(e),r;if(t.token?r=yield PE(n,!0):r=yield PE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},y1.RETRIAL_MIN_WAIT,y1.RETRIAL_MAX_WAIT)}function g$(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Il(n){return n.expireTimeMillis-Date.now()>0}function ME(n){return{token:h$(d$),error:n}}var OE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)D1(this.app,t.next);return Promise.resolve()}};function y$(n,e){return new OE(n,e)}function v$(n){return{getToken:e=>PE(n,e),getLimitedUseToken:()=>f$(n),addTokenListener:e=>p$(n,"INTERNAL",e),removeTokenListener:e=>D1(n.app,e)}}var _$="@firebase/app-check",E$="0.10.0";var w$="app-check",_1="app-check-internal";function I$(){er(new Xt(w$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return y$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_1).initialize()})),er(new Xt(_1,n=>{let e=n.getProvider("app-check").getImmediate();return v$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),rt(_$,E$)}I$();var T$="app-check";var za=class{constructor(){return Ha(T$)}};var b$=["localhost","0.0.0.0","127.0.0.1"],tce=typeof window<"u"&&b$.includes(window.location.hostname);function B1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $1=B1,H1=new Xn("auth","Firebase",B1());var qp=new Ir("@firebase/auth");function C$(n,...e){qp.logLevel<=Ie.WARN&&qp.warn(`Auth (${Ji}): ${n}`,...e)}function Bp(n,...e){qp.logLevel<=Ie.ERROR&&qp.error(`Auth (${Ji}): ${n}`,...e)}function Cr(n,...e){throw XE(n,...e)}function nr(n,...e){return XE(n,...e)}function JE(n,e,t){let r=Object.assign(Object.assign({},$1()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function ps(n){return JE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D$(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(n,"argument-error"),JE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function XE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return H1.create(n,...e)}function ue(n,e,...t){if(!n)throw XE(e,...t)}function ii(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Bp(e),new Error(e)}function si(n,e){n||ii(e)}function VE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function S$(){return S1()==="http:"||S1()==="https:"}function S1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function A$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S$()||qR()||"connection"in navigator)?navigator.onLine:!0}function x$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ms=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile=HR()||GR()}get(){return A$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ew(n,e){si(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Gp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var R$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var M$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N$=new ms(3e4,6e4);function tw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ga(o,s,a,u){return E(this,arguments,function*(n,e,t,r,i={}){return z1(n,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ua(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return zR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Yi(n.emulatorConfig.host)&&(y.credentials="include"),Gp.fetch()(yield q1(n,n.config.apiHost,t,p),y)}))})}function z1(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},R$),e);try{let i=new jE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Up(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Up(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Up(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Up(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw JE(n,h,l);Cr(n,h)}}catch(i){if(i instanceof vn)throw i;Cr(n,"network-request-failed",{message:String(i)})}})}function k$(o,s,a,u){return E(this,arguments,function*(n,e,t,r,i={}){let l=yield Ga(n,e,t,r,i);return"mfaPendingCredential"in l&&Cr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function q1(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?ew(n.config,i):`${n.config.apiScheme}://${i}`;return M$.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var jE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),N$.get())})}};function Up(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=nr(n,e,r);return i.customData._tokenResponse=t,i}function P$(n,e){return E(this,null,function*(){return Ga(n,"POST","/v1/accounts:delete",e)})}function Wp(n,e){return E(this,null,function*(){return Ga(n,"POST","/v1/accounts:lookup",e)})}function Tl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nw(n,e=!1){return E(this,null,function*(){let t=nt(n),r=yield t.getIdToken(e),i=rw(r);ue(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Tl(LE(i.auth_time)),issuedAtTime:Tl(LE(i.iat)),expirationTime:Tl(LE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function LE(n){return Number(n)*1e3}function rw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mp(t);return i?JSON.parse(i):(Bp("Failed to decode base64 JWT payload"),null)}catch(i){return Bp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function A1(n){let e=rw(n);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cl(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof vn&&O$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function O$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var UE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Dl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Kp(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Cl(n,Wp(t,{idToken:r}));ue(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?G1(o.providerUserInfo):[],a=L$(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Dl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function iw(n){return E(this,null,function*(){let e=nt(n);yield Kp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function L$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G1(n){return n.map(e=>{var{providerId:t}=e,r=th(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function F$(n,e){return E(this,null,function*(){let t=yield z1(n,{},()=>E(null,null,function*(){let r=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield q1(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Yi(n.emulatorConfig.host)&&(u.credentials="include"),Gp.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function V$(n,e){return E(this,null,function*(){return Ga(n,"POST","/v2/accounts:revokeToken",tw(n,e))})}var bl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ue(e.length!==0,"internal-error");let t=A1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield F$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ue(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ue(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ii("not implemented")}};function no(n,e){ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ro=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=th(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Cl(this,this.stsTokenManager.getToken(this.auth,e));return ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return nw(this,e)}reload(){return iw(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Kp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(_n(this.auth.app))return Promise.reject(ps(this.auth));let e=yield this.getIdToken();return yield Cl(this,P$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,se=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:J,emailVerified:Re,isAnonymous:Mt,providerData:Me,stsTokenManager:C}=t;ue(J&&C,e,"internal-error");let _=bl.fromJSON(this.name,C);ue(typeof J=="string",e,"internal-error"),no(p,e.name),no(m,e.name),ue(typeof Re=="boolean",e,"internal-error"),ue(typeof Mt=="boolean",e,"internal-error"),no(y,e.name),no(S,e.name),no(k,e.name),no(R,e.name),no(j,e.name),no(se,e.name);let T=new n({uid:J,auth:e,email:m,emailVerified:Re,displayName:p,isAnonymous:Mt,photoURL:S,phoneNumber:y,tenantId:k,stsTokenManager:_,createdAt:j,lastLoginAt:se});return Me&&Array.isArray(Me)&&(T.providerData=Me.map(b=>Object.assign({},b))),R&&(T._redirectEventId=R),T}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new bl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Kp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];ue(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?G1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new bl;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var x1=new Map;function oi(n){si(n instanceof Function,"Expected a class definition");let e=x1.get(n);return e?(si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,x1.set(n,e),e)}var j$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),BE=j$;function $p(n,e,t){return`firebase:${n}:${e}:${t}`}var Qp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$p(this.userKey,i.apiKey,o),this.fullPersistenceKey=$p("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Wp(this.auth,{idToken:e}).catch(()=>{});return t?ro._fromGetAccountInfoResponse(this.auth,t,e):null}return ro._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(oi(BE),e,r);let i=(yield Promise.all(t.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||oi(BE),s=$p(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Wp(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield ro._fromGetAccountInfoResponse(e,m,h)}else p=ro._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function R1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J1(e))return"Blackberry";if(X1(e))return"Webos";if(K1(e))return"Safari";if((e.includes("chrome/")||Q1(e))&&!e.includes("edge/"))return"Chrome";if(Z1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function W1(n=At()){return/firefox\//i.test(n)}function K1(n=At()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q1(n=At()){return/crios\//i.test(n)}function Y1(n=At()){return/iemobile/i.test(n)}function Z1(n=At()){return/android/i.test(n)}function J1(n=At()){return/blackberry/i.test(n)}function X1(n=At()){return/webos/i.test(n)}function ow(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function U$(n=At()){var e;return ow(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B$(){return WR()&&document.documentMode===10}function eM(n=At()){return ow(n)||Z1(n)||X1(n)||J1(n)||/windows phone/i.test(n)||Y1(n)}function tM(n,e=[]){let t;switch(n){case"Browser":t=R1(At());break;case"Worker":t=`${R1(At())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ji}/${r}`}var $E=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function $$(t){return E(this,arguments,function*(n,e={}){return Ga(n,"GET","/v2/passwordPolicy",tw(n,e))})}var H$=6,HE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:H$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var zE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yp(this),this.idTokenSubscription=new Yp(this),this.beforeStateQueue=new $E(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Qp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Wp(this,{idToken:e}),r=yield ro._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(_n(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Kp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=x$()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(_n(this.app))return Promise.reject(ps(this));let t=e?nt(e):null;return t&&ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return _n(this.app)?Promise.reject(ps(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _n(this.app)?Promise.reject(ps(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield $$(this),t=new HE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield V$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&oi(e)||this._popupRedirectResolver;ue(t,this,"argument-error"),this.redirectPersistenceManager=yield Qp.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&C$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function im(n){return nt(n)}var Yp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var sw={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z$(n){sw=n}function q$(n){return sw.loadJS(n)}function G$(){return sw.gapiScript}function nM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function aw(n,e){let t=Ba(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(wr(o,e??{}))return i;Cr(i,"already-initialized")}return t.initialize({options:e})}function W$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(oi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function cw(n,e,t){let r=im(n);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=rM(e),{host:s,port:a}=K$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(wr(l,r.config.emulator)&&wr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Yi(s)?(kp(`${o}//${s}${u}`),Pp("Auth",!0)):i||Q$()}function rM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function K$(n){let e=rM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:M1(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:M1(s)}}}function M1(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Q$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Sl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}};function qa(n,e){return E(this,null,function*(){return k$(n,"POST","/v1/accounts:signInWithIdp",tw(n,e))})}var Y$="http://localhost",Zp=class n extends Sl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=th(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return qa(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,qa(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,qa(e,t)}buildRequest(){let e={requestUri:Y$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ua(t)}return e}};var Al=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Jp=class extends Al{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var uw=(()=>{class n extends Jp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Zp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var xl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield ro._fromIdTokenResponse(e,r,i),s=N1(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=N1(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function N1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var qE=class n extends vn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function iM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qE._fromErrorAndOperation(n,o,e,r):o})}function Z$(n,e,t=!1){return E(this,null,function*(){let r=yield Cl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xl._forOperation(n,"link",r)})}function J$(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(_n(r.app))return Promise.reject(ps(r));let i="reauthenticate";try{let o=yield Cl(n,iM(r,i,e,n),t);ue(o.idToken,r,"internal-error");let s=rw(o.idToken);ue(s,r,"internal-error");let{sub:a}=s;return ue(n.uid===a,r,"user-mismatch"),xl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cr(r,"user-mismatch"),o}})}function X$(n,e,t=!1){return E(this,null,function*(){if(_n(n.app))return Promise.reject(ps(n));let r="signIn",i=yield iM(n,r,e),o=yield xl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Ml(n,e,t,r){return nt(n).onIdTokenChanged(e,t,r)}function lw(n,e,t){return nt(n).beforeAuthStateChanged(e,t)}function dw(n){return nt(n).signOut()}var Xp="__sak";var em=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xp,"1"),this.storage.removeItem(Xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var eH=1e3,tH=10,nH=(()=>{class n extends em{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);B$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,tH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},eH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield _i(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield _i(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield _i(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oM=nH;var rH=(()=>{class n extends em{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),hw=rH;function iH(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var oH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield iH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function fw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var GE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=fw("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function br(){return window}function sH(n){br().location.href=n}function sM(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}function aH(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uH(){return sM()?self:null}var aM="firebaseLocalStorageDb",lH=1,tm="firebaseLocalStorage",cM="fbase_key",gs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function om(n,e){return n.transaction([tm],e?"readwrite":"readonly").objectStore(tm)}function dH(){let n=indexedDB.deleteDatabase(aM);return new gs(n).toPromise()}function WE(){let n=indexedDB.open(aM,lH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(tm,{keyPath:cM})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(tm)?e(r):(r.close(),yield dH(),e(yield WE()))}))})}function k1(n,e,t){return E(this,null,function*(){let r=om(n,!0).put({[cM]:e,value:t});return new gs(r).toPromise()})}function hH(n,e){return E(this,null,function*(){let t=om(n,!1).get(e),r=yield new gs(t).toPromise();return r===void 0?null:r.value})}function P1(n,e){let t=om(n,!0).delete(e);return new gs(t).toPromise()}var fH=800,pH=3,mH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield WE(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>pH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return sM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=oH._getInstance(uH()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield aH(),!this.activeServiceWorker)return;this.sender=new GE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield WE();return yield k1(t,Xp,"1"),yield P1(t,Xp),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>k1(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>hH(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>P1(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=om(o,!1).getAll();return new gs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),fH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),uM=mH;var dce=nM("rcb"),hce=new ms(3e4,6e4);function lM(n,e){return e?oi(e):(ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Rl=class extends Sl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qa(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function gH(n){return X$(n.auth,new Rl(n),n.bypassAuthState)}function yH(n){let{auth:e,user:t}=n;return ue(t,e,"internal-error"),J$(t,new Rl(n),n.bypassAuthState)}function vH(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ue(t,e,"internal-error"),Z$(t,new Rl(n),n.bypassAuthState)})}var nm=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gH;case"linkViaPopup":case"linkViaRedirect":return vH;case"reauthViaPopup":case"reauthViaRedirect":return yH;default:Cr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _H=new ms(2e3,1e4);function pw(n,e,t){return E(this,null,function*(){if(_n(n.app))return Promise.reject(nr(n,"operation-not-supported-in-this-environment"));let r=im(n);D$(n,e,Al);let i=lM(r,t);return new EH(r,"signInViaPopup",e,i).executeNotNull()})}var EH=(()=>{class n extends nm{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return E(this,null,function*(){let t=yield this.execute();return ue(t,this.auth,"internal-error"),t})}onExecution(){return E(this,null,function*(){si(this.filter.length===1,"Popup operations only handle one event");let t=fw();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_H.get())};t()}}n.currentPopupAction=null;return n})(),wH="pendingRedirect",Hp=new Map,KE=class n extends nm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Hp.get(this.auth._key());if(!e){try{let r=(yield IH(this.resolver,this.auth))?yield _i(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hp.set(this.auth._key(),e)}return this.bypassAuthState||Hp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return _i(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,_i(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function IH(n,e){return E(this,null,function*(){let t=CH(e),r=bH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function TH(n,e){Hp.set(n._key(),e)}function bH(n){return oi(n._redirectPersistence)}function CH(n){return $p(wH,n.config.apiKey,n.name)}function DH(n,e,t=!1){return E(this,null,function*(){if(_n(n.app))return Promise.reject(ps(n));let r=im(n),i=lM(r,e),s=yield new KE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var SH=10*60*1e3,QE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SH&&this.cachedEventUids.clear(),this.cachedEventUids.has(O1(e))}saveEventToCache(e){this.cachedEventUids.add(O1(e)),this.lastProcessedEventTime=Date.now()}};function O1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function AH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dM(n);default:return!1}}function xH(t){return E(this,arguments,function*(n,e={}){return Ga(n,"GET","/v1/projects",e)})}var RH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MH=/^https?/;function NH(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield xH(n);for(let t of e)try{if(kH(t))return}catch{}Cr(n,"unauthorized-domain")})}function kH(n){let e=VE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!MH.test(t))return!1;if(RH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var PH=new ms(3e4,6e4);function L1(){let n=br().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OH(n){return new Promise((e,t)=>{var r,i,o;function s(){L1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L1(),t(nr(n,"network-request-failed"))},timeout:PH.get()})}if(!((i=(r=br().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=br().gapi)===null||o===void 0)&&o.load)s();else{let a=nM("iframefcb");return br()[a]=()=>{gapi.load?s():t(nr(n,"network-request-failed"))},q$(`${G$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw zp=null,e})}var zp=null;function LH(n){return zp=zp||OH(n),zp}var FH=new ms(5e3,15e3),VH="__/auth/iframe",jH="emulator/auth/iframe",UH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $H(n){let e=n.config;ue(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ew(e,jH):`https://${n.config.authDomain}/${VH}`,r={apiKey:e.apiKey,appName:n.name,v:Ji},i=BH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ua(r).slice(1)}`}function HH(n){return E(this,null,function*(){let e=yield LH(n),t=br().gapi;return ue(t,n,"internal-error"),e.open({where:document.body,url:$H(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UH,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=nr(n,"network-request-failed"),a=br().setTimeout(()=>{o(s)},FH.get());function u(){br().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var zH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qH=500,GH=600,WH="_blank",KH="http://localhost",rm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function QH(n,e,t,r=qH,i=GH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},zH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=At().toLowerCase();t&&(a=Q1(l)?WH:t),W1(l)&&(e=e||KH,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(U$(l)&&a!=="_self")return YH(e||"",a),new rm(null);let p=window.open(e||"",a,h);ue(p,n,"popup-blocked");try{p.focus()}catch{}return new rm(p)}function YH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var ZH="__/auth/handler",JH="emulator/auth/handler",XH=encodeURIComponent("fac");function F1(n,e,t,r,i,o){return E(this,null,function*(){ue(n.config.authDomain,n,"auth-domain-config-required"),ue(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ji,eventId:i};if(e instanceof Al){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",YR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Jp){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${XH}=${encodeURIComponent(u)}`:"";return`${e6(n)}?${Ua(a).slice(1)}${l}`})}function e6({config:n}){return n.emulator?ew(n,JH):`https://${n.authDomain}/${ZH}`}var FE="webStorageSupport",YE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hw,this._completeRedirectFn=DH,this._overrideRedirectResult=TH}_openPopup(e,t,r,i){return E(this,null,function*(){var o;si((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield F1(e,t,r,VE(),i);return QH(e,s,fw())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield F1(e,t,r,VE(),i);return sH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(si(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield HH(e),r=new QE(e);return t.register("authEvent",i=>(ue(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(FE,{type:FE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[FE];s!==void 0&&t(!!s),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eM()||K1()||ow()}},hM=YE;var V1="@firebase/auth",j1="1.10.7";var ZE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function t6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n6(n){er(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ue(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tM(n)},l=new zE(r,i,o,u);return W$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),er(new Xt("auth-internal",e=>{let t=im(e.getProvider("auth").getImmediate());return(r=>new ZE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(V1,j1,t6(n)),rt(V1,j1,"esm2017")}var r6=5*60,i6=fE("authIdTokenMaxAge")||r6,U1=null,o6=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>i6)return;let i=t?.token;U1!==i&&(U1=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function mw(n=ds()){let e=Ba(n,"auth");if(e.isInitialized())return e.getImmediate();let t=aw(n,{popupRedirectResolver:hM,persistence:[uM,oM,hw]}),r=fE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=o6(o.toString());lw(t,s,()=>s(t.currentUser)),Ml(t,a=>s(a))}}let i=dE("auth");return i&&cw(t,`http://${i}`),t}function s6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}z$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=nr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",s6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n6("Browser");function mM(n){return new ie(function(e){var t=Ml(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var gM="auth",ys=class{constructor(e){return e}},Nl=class{constructor(){return Ha(gM)}};var gw=new H("angularfire2.auth-instances");function Q6(n,e){let t=El(gM,n,e);return t&&new ys(t)}function Y6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ys(r)}}var Z6={provide:Nl,deps:[[new sn,gw]]},J6={provide:ys,useFactory:Q6,deps:[[new sn,gw],ri]};function yM(n,...e){return rt("angularfire",Xi.full,"auth"),on([J6,Z6,{provide:gw,useFactory:Y6(n),multi:!0,deps:[xe,Xe,eo,fs,[new sn,za],...e]}])}var vM=it(mM,!0);var _M=it(mw,!0);var EM=it(pw,!0,2);var wM=it(dw,!0,2);var IM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TM={};var ai,yw;(function(){var n;function e(C,_){function T(){}T.prototype=_.prototype,C.D=_.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(b,D,x){for(var I=Array(arguments.length-2),Nr=2;Nr<arguments.length;Nr++)I[Nr-2]=arguments[Nr];return _.prototype[D].apply(b,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,T){T||(T=0);var b=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)b[D]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(D=0;16>D;++D)b[D]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=C.g[0],T=C.g[1],D=C.g[2];var x=C.g[3],I=_+(x^T&(D^x))+b[0]+3614090360&4294967295;_=T+(I<<7&4294967295|I>>>25),I=x+(D^_&(T^D))+b[1]+3905402710&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(T^x&(_^T))+b[2]+606105819&4294967295,D=x+(I<<17&4294967295|I>>>15),I=T+(_^D&(x^_))+b[3]+3250441966&4294967295,T=D+(I<<22&4294967295|I>>>10),I=_+(x^T&(D^x))+b[4]+4118548399&4294967295,_=T+(I<<7&4294967295|I>>>25),I=x+(D^_&(T^D))+b[5]+1200080426&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(T^x&(_^T))+b[6]+2821735955&4294967295,D=x+(I<<17&4294967295|I>>>15),I=T+(_^D&(x^_))+b[7]+4249261313&4294967295,T=D+(I<<22&4294967295|I>>>10),I=_+(x^T&(D^x))+b[8]+1770035416&4294967295,_=T+(I<<7&4294967295|I>>>25),I=x+(D^_&(T^D))+b[9]+2336552879&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(T^x&(_^T))+b[10]+4294925233&4294967295,D=x+(I<<17&4294967295|I>>>15),I=T+(_^D&(x^_))+b[11]+2304563134&4294967295,T=D+(I<<22&4294967295|I>>>10),I=_+(x^T&(D^x))+b[12]+1804603682&4294967295,_=T+(I<<7&4294967295|I>>>25),I=x+(D^_&(T^D))+b[13]+4254626195&4294967295,x=_+(I<<12&4294967295|I>>>20),I=D+(T^x&(_^T))+b[14]+2792965006&4294967295,D=x+(I<<17&4294967295|I>>>15),I=T+(_^D&(x^_))+b[15]+1236535329&4294967295,T=D+(I<<22&4294967295|I>>>10),I=_+(D^x&(T^D))+b[1]+4129170786&4294967295,_=T+(I<<5&4294967295|I>>>27),I=x+(T^D&(_^T))+b[6]+3225465664&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^T&(x^_))+b[11]+643717713&4294967295,D=x+(I<<14&4294967295|I>>>18),I=T+(x^_&(D^x))+b[0]+3921069994&4294967295,T=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(T^D))+b[5]+3593408605&4294967295,_=T+(I<<5&4294967295|I>>>27),I=x+(T^D&(_^T))+b[10]+38016083&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^T&(x^_))+b[15]+3634488961&4294967295,D=x+(I<<14&4294967295|I>>>18),I=T+(x^_&(D^x))+b[4]+3889429448&4294967295,T=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(T^D))+b[9]+568446438&4294967295,_=T+(I<<5&4294967295|I>>>27),I=x+(T^D&(_^T))+b[14]+3275163606&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^T&(x^_))+b[3]+4107603335&4294967295,D=x+(I<<14&4294967295|I>>>18),I=T+(x^_&(D^x))+b[8]+1163531501&4294967295,T=D+(I<<20&4294967295|I>>>12),I=_+(D^x&(T^D))+b[13]+2850285829&4294967295,_=T+(I<<5&4294967295|I>>>27),I=x+(T^D&(_^T))+b[2]+4243563512&4294967295,x=_+(I<<9&4294967295|I>>>23),I=D+(_^T&(x^_))+b[7]+1735328473&4294967295,D=x+(I<<14&4294967295|I>>>18),I=T+(x^_&(D^x))+b[12]+2368359562&4294967295,T=D+(I<<20&4294967295|I>>>12),I=_+(T^D^x)+b[5]+4294588738&4294967295,_=T+(I<<4&4294967295|I>>>28),I=x+(_^T^D)+b[8]+2272392833&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^T)+b[11]+1839030562&4294967295,D=x+(I<<16&4294967295|I>>>16),I=T+(D^x^_)+b[14]+4259657740&4294967295,T=D+(I<<23&4294967295|I>>>9),I=_+(T^D^x)+b[1]+2763975236&4294967295,_=T+(I<<4&4294967295|I>>>28),I=x+(_^T^D)+b[4]+1272893353&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^T)+b[7]+4139469664&4294967295,D=x+(I<<16&4294967295|I>>>16),I=T+(D^x^_)+b[10]+3200236656&4294967295,T=D+(I<<23&4294967295|I>>>9),I=_+(T^D^x)+b[13]+681279174&4294967295,_=T+(I<<4&4294967295|I>>>28),I=x+(_^T^D)+b[0]+3936430074&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^T)+b[3]+3572445317&4294967295,D=x+(I<<16&4294967295|I>>>16),I=T+(D^x^_)+b[6]+76029189&4294967295,T=D+(I<<23&4294967295|I>>>9),I=_+(T^D^x)+b[9]+3654602809&4294967295,_=T+(I<<4&4294967295|I>>>28),I=x+(_^T^D)+b[12]+3873151461&4294967295,x=_+(I<<11&4294967295|I>>>21),I=D+(x^_^T)+b[15]+530742520&4294967295,D=x+(I<<16&4294967295|I>>>16),I=T+(D^x^_)+b[2]+3299628645&4294967295,T=D+(I<<23&4294967295|I>>>9),I=_+(D^(T|~x))+b[0]+4096336452&4294967295,_=T+(I<<6&4294967295|I>>>26),I=x+(T^(_|~D))+b[7]+1126891415&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~T))+b[14]+2878612391&4294967295,D=x+(I<<15&4294967295|I>>>17),I=T+(x^(D|~_))+b[5]+4237533241&4294967295,T=D+(I<<21&4294967295|I>>>11),I=_+(D^(T|~x))+b[12]+1700485571&4294967295,_=T+(I<<6&4294967295|I>>>26),I=x+(T^(_|~D))+b[3]+2399980690&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~T))+b[10]+4293915773&4294967295,D=x+(I<<15&4294967295|I>>>17),I=T+(x^(D|~_))+b[1]+2240044497&4294967295,T=D+(I<<21&4294967295|I>>>11),I=_+(D^(T|~x))+b[8]+1873313359&4294967295,_=T+(I<<6&4294967295|I>>>26),I=x+(T^(_|~D))+b[15]+4264355552&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~T))+b[6]+2734768916&4294967295,D=x+(I<<15&4294967295|I>>>17),I=T+(x^(D|~_))+b[13]+1309151649&4294967295,T=D+(I<<21&4294967295|I>>>11),I=_+(D^(T|~x))+b[4]+4149444226&4294967295,_=T+(I<<6&4294967295|I>>>26),I=x+(T^(_|~D))+b[11]+3174756917&4294967295,x=_+(I<<10&4294967295|I>>>22),I=D+(_^(x|~T))+b[2]+718787259&4294967295,D=x+(I<<15&4294967295|I>>>17),I=T+(x^(D|~_))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+x&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var T=_-this.blockSize,b=this.B,D=this.h,x=0;x<_;){if(D==0)for(;x<=T;)i(this,C,x),x+=this.blockSize;if(typeof C=="string"){for(;x<_;)if(b[D++]=C.charCodeAt(x++),D==this.blockSize){i(this,b),D=0;break}}else for(;x<_;)if(b[D++]=C[x++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var T=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=T&255,T/=256;for(this.u(C),C=Array(16),_=T=0;4>_;++_)for(var b=0;32>b;b+=8)C[T++]=this.g[_]>>>b&255;return C};function o(C,_){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=_(C)}function s(C,_){this.h=_;for(var T=[],b=!0,D=C.length-1;0<=D;D--){var x=C[D]|0;b&&x==_||(T[D]=x,b=!1)}this.g=T}var a={};function u(C){return-128<=C&&128>C?o(C,function(_){return new s([_|0],0>_?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return R(l(-C));for(var _=[],T=1,b=0;C>=T;b++)_[b]=C/T|0,T*=4294967296;return new s(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=l(Math.pow(_,8)),b=p,D=0;D<C.length;D+=8){var x=Math.min(8,C.length-D),I=parseInt(C.substring(D,D+x),_);8>x?(x=l(Math.pow(_,x)),b=b.j(x).add(l(I))):(b=b.j(T),b=b.add(l(I)))}return b}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(k(this))return-R(this).m();for(var C=0,_=1,T=0;T<this.g.length;T++){var b=this.i(T);C+=(0<=b?b:4294967296+b)*_,_*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(k(this))return"-"+R(this).toString(C);for(var _=l(Math.pow(C,6)),T=this,b="";;){var D=Re(T,_).g;T=j(T,D.j(_));var x=((0<T.g.length?T.g[0]:T.h)>>>0).toString(C);if(T=D,S(T))return x+b;for(;6>x.length;)x="0"+x;b=x+b}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function k(C){return C.h==-1}n.l=function(C){return C=j(this,C),k(C)?-1:S(C)?0:1};function R(C){for(var _=C.g.length,T=[],b=0;b<_;b++)T[b]=~C.g[b];return new s(T,~C.h).add(m)}n.abs=function(){return k(this)?R(this):this},n.add=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],b=0,D=0;D<=_;D++){var x=b+(this.i(D)&65535)+(C.i(D)&65535),I=(x>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);b=I>>>16,x&=65535,I&=65535,T[D]=I<<16|x}return new s(T,T[T.length-1]&-2147483648?-1:0)};function j(C,_){return C.add(R(_))}n.j=function(C){if(S(this)||S(C))return p;if(k(this))return k(C)?R(this).j(R(C)):R(R(this).j(C));if(k(C))return R(this.j(R(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,T=[],b=0;b<2*_;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<C.g.length;D++){var x=this.i(b)>>>16,I=this.i(b)&65535,Nr=C.i(D)>>>16,xc=C.i(D)&65535;T[2*b+2*D]+=I*xc,se(T,2*b+2*D),T[2*b+2*D+1]+=x*xc,se(T,2*b+2*D+1),T[2*b+2*D+1]+=I*Nr,se(T,2*b+2*D+1),T[2*b+2*D+2]+=x*Nr,se(T,2*b+2*D+2)}for(b=0;b<_;b++)T[b]=T[2*b+1]<<16|T[2*b];for(b=_;b<2*_;b++)T[b]=0;return new s(T,0)};function se(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function J(C,_){this.g=C,this.h=_}function Re(C,_){if(S(_))throw Error("division by zero");if(S(C))return new J(p,p);if(k(C))return _=Re(R(C),_),new J(R(_.g),R(_.h));if(k(_))return _=Re(C,R(_)),new J(R(_.g),_.h);if(30<C.g.length){if(k(C)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var T=m,b=_;0>=b.l(C);)T=Mt(T),b=Mt(b);var D=Me(T,1),x=Me(b,1);for(b=Me(b,2),T=Me(T,2);!S(b);){var I=x.add(b);0>=I.l(C)&&(D=D.add(T),x=I),b=Me(b,1),T=Me(T,1)}return _=j(C,D.j(_)),new J(D,_)}for(D=p;0<=C.l(_);){for(T=Math.max(1,Math.floor(C.m()/_.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),x=l(T),I=x.j(_);k(I)||0<I.l(C);)T-=b,x=l(T),I=x.j(_);S(x)&&(x=m),D=D.add(x),C=j(C,I)}return new J(D,C)}n.A=function(C){return Re(this,C).h},n.and=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],b=0;b<_;b++)T[b]=this.i(b)&C.i(b);return new s(T,this.h&C.h)},n.or=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],b=0;b<_;b++)T[b]=this.i(b)|C.i(b);return new s(T,this.h|C.h)},n.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),T=[],b=0;b<_;b++)T[b]=this.i(b)^C.i(b);return new s(T,this.h^C.h)};function Mt(C){for(var _=C.g.length+1,T=[],b=0;b<_;b++)T[b]=C.i(b)<<1|C.i(b-1)>>>31;return new s(T,C.h)}function Me(C,_){var T=_>>5;_%=32;for(var b=C.g.length-T,D=[],x=0;x<b;x++)D[x]=0<_?C.i(x+T)>>>_|C.i(x+T+1)<<32-_:C.i(x+T);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yw=TM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ai=TM.Integer=s}).apply(typeof IM<"u"?IM:typeof self<"u"?self:typeof window<"u"?window:{});var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var vw,e5,Wa,_w,kl,am,Ew,ww,Iw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sm=="object"&&sm];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var A=c[g];if(!(A in f))break e;f=f[A]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,A={next:function(){if(!g&&f<c.length){var M=f++;return{value:d(M,c[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),c.apply(d,A)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,A,M){for(var U=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)U[Le-2]=arguments[Le];return d.prototype[A].apply(g,U)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let A=c.length||0,M=g.length||0;c.length=A+M;for(let U=0;U<M;U++)c[A+U]=g[U]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function se(c){return/^[\s\xa0]*$/.test(c)}function J(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Re(c){return Re[" "](c),c}Re[" "]=function(){};var Mt=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Me(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,d){let f,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(f in g)c[f]=g[f];for(let M=0;M<T.length;M++)f=T[M],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function x(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Pg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Nr{constructor(){this.h=this.g=null}add(d,f){let g=xc.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xc=new j(()=>new LP,c=>c.reset());class LP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Rc,Mc=!1,Pg=new Nr,JT=()=>{let c=a.Promise.resolve(void 0);Rc=()=>{c.then(FP)}};var FP=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){x(f)}var d=xc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Mc=!1};function mi(){this.s=this.s,this.C=this.C}mi.prototype.s=!1,mi.prototype.ma=function(){this.s||(this.s=!0,this.N())},mi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};var VP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Nc(c,d){if(Ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Mt){e:{try{Re(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:jP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Nc.aa.h.call(this)}}S(Nc,Ft);var jP={2:"touch",3:"pen",4:"mouse"};Nc.prototype.h=function(){Nc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var kc="closure_listenable_"+(1e6*Math.random()|0),UP=0;function BP(c,d,f,g,A){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=A,this.key=++UP,this.da=this.fa=!1}function hd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fd(c){this.src=c,this.g={},this.h=0}fd.prototype.add=function(c,d,f,g,A){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var U=Lg(c,d,g,A);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new BP(d,this.src,M,!!g,A),d.fa=f,c.push(d)),d};function Og(c,d){var f=d.type;if(f in c.g){var g=c.g[f],A=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=A)&&Array.prototype.splice.call(g,A,1),M&&(hd(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Lg(c,d,f,g){for(var A=0;A<c.length;++A){var M=c[A];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==g)return A}return-1}var Fg="closure_lm_"+(1e6*Math.random()|0),Vg={};function XT(c,d,f,g,A){if(g&&g.once)return tb(c,d,f,g,A);if(Array.isArray(d)){for(var M=0;M<d.length;M++)XT(c,d[M],f,g,A);return null}return f=$g(f),c&&c[kc]?c.K(d,f,l(g)?!!g.capture:!!g,A):eb(c,d,f,!1,g,A)}function eb(c,d,f,g,A,M){if(!d)throw Error("Invalid event type");var U=l(A)?!!A.capture:!!A,Le=Ug(c);if(Le||(c[Fg]=Le=new fd(c)),f=Le.add(d,f,g,U,M),f.proxy)return f;if(g=$P(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)VP||(A=U),A===void 0&&(A=!1),c.addEventListener(d.toString(),g,A);else if(c.attachEvent)c.attachEvent(rb(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $P(){function c(f){return d.call(c.src,c.listener,f)}let d=HP;return c}function tb(c,d,f,g,A){if(Array.isArray(d)){for(var M=0;M<d.length;M++)tb(c,d[M],f,g,A);return null}return f=$g(f),c&&c[kc]?c.L(d,f,l(g)?!!g.capture:!!g,A):eb(c,d,f,!0,g,A)}function nb(c,d,f,g,A){if(Array.isArray(d))for(var M=0;M<d.length;M++)nb(c,d[M],f,g,A);else g=l(g)?!!g.capture:!!g,f=$g(f),c&&c[kc]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],f=Lg(M,f,g,A),-1<f&&(hd(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ug(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Lg(d,f,g,A)),(f=-1<c?d[c]:null)&&jg(f))}function jg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[kc])Og(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(rb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ug(d))?(Og(f,c),f.h==0&&(f.src=null,d[Fg]=null)):hd(c)}}}function rb(c){return c in Vg?Vg[c]:Vg[c]="on"+c}function HP(c,d){if(c.da)c=!0;else{d=new Nc(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&jg(c),c=f.call(g,d)}return c}function Ug(c){return c=c[Fg],c instanceof fd?c:null}var Bg="__closure_events_fn_"+(1e9*Math.random()>>>0);function $g(c){return typeof c=="function"?c:(c[Bg]||(c[Bg]=function(d){return c.handleEvent(d)}),c[Bg])}function Vt(){mi.call(this),this.i=new fd(this),this.M=this,this.F=null}S(Vt,mi),Vt.prototype[kc]=!0,Vt.prototype.removeEventListener=function(c,d,f,g){nb(this,c,d,f,g)};function Wt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ft(d,c);else if(d instanceof Ft)d.target=d.target||c;else{var A=d;d=new Ft(g,c),b(d,A)}if(A=!0,f)for(var M=f.length-1;0<=M;M--){var U=d.g=f[M];A=pd(U,g,!0,d)&&A}if(U=d.g=c,A=pd(U,g,!0,d)&&A,A=pd(U,g,!1,d)&&A,f)for(M=0;M<f.length;M++)U=d.g=f[M],A=pd(U,g,!1,d)&&A}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)hd(f[g]);delete c.g[d],c.h--}}this.F=null},Vt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Vt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function pd(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,M=0;M<d.length;++M){var U=d[M];if(U&&!U.da&&U.capture==f){var Le=U.listener,Nt=U.ha||U.src;U.fa&&Og(c.i,U),A=Le.call(Nt,g)!==!1&&A}}return A&&!g.defaultPrevented}function ib(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ob(c){c.g=ib(()=>{c.g=null,c.i&&(c.i=!1,ob(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class zP extends mi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ob(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pc(c){mi.call(this),this.h=c,this.g={}}S(Pc,mi);var sb=[];function ab(c){Me(c.g,function(d,f){this.g.hasOwnProperty(f)&&jg(d)},c),c.g={}}Pc.prototype.N=function(){Pc.aa.N.call(this),ab(this)},Pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hg=a.JSON.stringify,qP=a.JSON.parse,GP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function zg(){}zg.prototype.h=null;function cb(c){return c.h||(c.h=c.i())}function ub(){}var Oc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qg(){Ft.call(this,"d")}S(qg,Ft);function Gg(){Ft.call(this,"c")}S(Gg,Ft);var go={},lb=null;function md(){return lb=lb||new Vt}go.La="serverreachability";function db(c){Ft.call(this,go.La,c)}S(db,Ft);function Lc(c){let d=md();Wt(d,new db(d))}go.STAT_EVENT="statevent";function hb(c,d){Ft.call(this,go.STAT_EVENT,c),this.stat=d}S(hb,Ft);function Kt(c){let d=md();Wt(d,new hb(d,c))}go.Ma="timingevent";function fb(c,d){Ft.call(this,go.Ma,c),this.size=d}S(fb,Ft);function Fc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Vc(){this.g=!0}Vc.prototype.xa=function(){this.g=!1};function WP(c,d,f,g,A,M){c.info(function(){if(c.g)if(M)for(var U="",Le=M.split("&"),Nt=0;Nt<Le.length;Nt++){var Ae=Le[Nt].split("=");if(1<Ae.length){var jt=Ae[0];Ae=Ae[1];var Ut=jt.split("_");U=2<=Ut.length&&Ut[1]=="type"?U+(jt+"="+Ae+"&"):U+(jt+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+d+`
`+f+`
`+U})}function KP(c,d,f,g,A,M,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+d+`
`+f+`
`+M+" "+U})}function Ps(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+YP(c,f)+(g?" "+g:"")})}function QP(c,d){c.info(function(){return"TIMEOUT: "+d})}Vc.prototype.info=function(){};function YP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var M=A[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<A.length;U++)A[U]=""}}}}return Hg(f)}catch{return d}}var gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wg;function yd(){}S(yd,zg),yd.prototype.g=function(){return new XMLHttpRequest},yd.prototype.i=function(){return{}},Wg=new yd;function gi(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Pc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mb}function mb(){this.i=null,this.g="",this.h=!1}var gb={},Kg={};function Qg(c,d,f){c.L=1,c.v=wd(kr(d)),c.m=f,c.P=!0,yb(c,null)}function yb(c,d){c.F=Date.now(),vd(c),c.A=kr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Mb(f.i,"t",g),c.C=0,f=c.j.J,c.h=new mb,c.g=Qb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new zP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var A="readystatechange";Array.isArray(A)||(A&&(sb[0]=A.toString()),A=sb);for(var M=0;M<A.length;M++){var U=XT(f,A[M],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Lc(),WP(c.i,c.u,c.A,c.l,c.R,c.m)}gi.prototype.ca=function(c){c=c.target;let d=this.M;d&&Pr(c)==3?d.j():this.Y(c)},gi.prototype.Y=function(c){try{if(c==this.g)e:{let Ut=Pr(this.g);var d=this.g.Ba();let Fs=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Vb(this.g)))){this.J||Ut!=4||d==7||(d==8||0>=Fs?Lc(3):Lc(2)),Yg(this);var f=this.g.Z();this.X=f;t:if(vb(this)){var g=Vb(this.g);c="";var A=g.length,M=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yo(this),jc(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(M&&d==A-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,KP(this.i,this.u,this.A,this.l,this.R,Ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Nt=this.g;if((Le=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Le)){var Ae=Le;break t}}Ae=null}if(f=Ae)Ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zg(this,f);else{this.o=!1,this.s=3,Kt(12),yo(this),jc(this);break e}}if(this.P){f=!0;let Fn;for(;!this.J&&this.C<U.length;)if(Fn=ZP(this,U),Fn==Kg){Ut==4&&(this.s=4,Kt(14),f=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==gb){this.s=4,Kt(15),Ps(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Ps(this.i,this.l,Fn,null),Zg(this,Fn);if(vb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||U.length!=0||this.h.h||(this.s=1,Kt(16),f=!1),this.o=this.o&&f,!f)Ps(this.i,this.l,U,"[Invalid Chunked Response]"),yo(this),jc(this);else if(0<U.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ry(jt),jt.M=!0,Kt(11))}}else Ps(this.i,this.l,U,null),Zg(this,U);Ut==4&&yo(this),this.o&&!this.J&&(Ut==4?qb(this.j,this):(this.o=!1,vd(this)))}else pO(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),yo(this),jc(this)}}}catch{}finally{}};function vb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ZP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kg:(f=Number(d.substring(f,g)),isNaN(f)?gb:(g+=1,g+f>d.length?Kg:(d=d.slice(g,g+f),c.C=g+f,d)))}gi.prototype.cancel=function(){this.J=!0,yo(this)};function vd(c){c.S=Date.now()+c.I,_b(c,c.I)}function _b(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fc(m(c.ba,c),d)}function Yg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}gi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(QP(this.i,this.A),this.L!=2&&(Lc(),Kt(17)),yo(this),this.s=2,jc(this)):_b(this,this.S-c)};function jc(c){c.j.G==0||c.J||qb(c.j,c)}function yo(c){Yg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ab(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Zg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Jg(f.h,c))){if(!c.K&&Jg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Dd(f),bd(f);else break e;ny(f),Kt(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fc(m(f.Za,f),6e3));if(1>=Ib(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _o(f,11)}else if((c.K||f.g==c)&&Dd(f),!se(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let Ae=A[d];if(f.T=Ae[0],Ae=Ae[1],f.G==2)if(Ae[0]=="c"){f.K=Ae[1],f.ia=Ae[2];let jt=Ae[3];jt!=null&&(f.la=jt,f.j.info("VER="+f.la));let Ut=Ae[4];Ut!=null&&(f.Aa=Ut,f.j.info("SVER="+f.Aa));let Fs=Ae[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(g=1.5*Fs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Fn=c.g;if(Fn){let Ad=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ad){var M=g.h;M.g||Ad.indexOf("spdy")==-1&&Ad.indexOf("quic")==-1&&Ad.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Xg(M,M.h),M.h=null))}if(g.D){let iy=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;iy&&(g.ya=iy,Be(g.I,g.D,iy))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=c;if(g.qa=Kb(g,g.J?g.ia:null,g.W),U.K){Tb(g.h,U);var Le=U,Nt=g.L;Nt&&(Le.I=Nt),Le.B&&(Yg(Le),vd(Le)),g.g=U}else Hb(g);0<f.i.length&&Cd(f)}else Ae[0]!="stop"&&Ae[0]!="close"||_o(f,7);else f.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?_o(f,7):ty(f):Ae[0]!="noop"&&f.l&&f.l.ta(Ae),f.v=0)}}Lc(4)}catch{}}var JP=class{constructor(c,d){this.g=c,this.map=d}};function Eb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ib(c){return c.h?1:c.g?c.g.size:0}function Jg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xg(c,d){c.g?c.g.add(d):c.h=d}function Tb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Eb.prototype.cancel=function(){if(this.i=bb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function bb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function XP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function eO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Cb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=eO(c),g=XP(c),A=g.length,M=0;M<A;M++)d.call(void 0,g[M],f&&f[M],c)}var Db=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),A=null;if(0<=g){var M=c[f].substring(0,g);A=c[f].substring(g+1)}else M=c[f];d(M,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function vo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vo){this.h=c.h,_d(this,c.j),this.o=c.o,this.g=c.g,Ed(this,c.s),this.l=c.l;var d=c.i,f=new $c;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Sb(this,f),this.m=c.m}else c&&(d=String(c).match(Db))?(this.h=!1,_d(this,d[1]||"",!0),this.o=Uc(d[2]||""),this.g=Uc(d[3]||"",!0),Ed(this,d[4]),this.l=Uc(d[5]||"",!0),Sb(this,d[6]||"",!0),this.m=Uc(d[7]||"")):(this.h=!1,this.i=new $c(null,this.h))}vo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Bc(d,Ab,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Bc(d,Ab,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Bc(f,f.charAt(0)=="/"?iO:rO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Bc(f,sO)),c.join("")};function kr(c){return new vo(c)}function _d(c,d,f){c.j=f?Uc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ed(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Sb(c,d,f){d instanceof $c?(c.i=d,aO(c.i,c.h)):(f||(d=Bc(d,oO)),c.i=new $c(d,c.h))}function Be(c,d,f){c.i.set(d,f)}function wd(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Uc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,nO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ab=/[#\/\?@]/g,rO=/[#\?:]/g,iO=/[#\?]/g,oO=/[#\?@]/g,sO=/#/g;function $c(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yi(c){c.g||(c.g=new Map,c.h=0,c.i&&tO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=$c.prototype,n.add=function(c,d){yi(this),this.i=null,c=Os(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function xb(c,d){yi(c),d=Os(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Rb(c,d){return yi(c),d=Os(c,d),c.g.has(d)}n.forEach=function(c,d){yi(this),this.g.forEach(function(f,g){f.forEach(function(A){c.call(d,A,g,this)},this)},this)},n.na=function(){yi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let A=c[g];for(let M=0;M<A.length;M++)f.push(d[g])}return f},n.V=function(c){yi(this);let d=[];if(typeof c=="string")Rb(this,c)&&(d=d.concat(this.g.get(Os(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return yi(this),this.i=null,c=Os(this,c),Rb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Mb(c,d,f){xb(c,d),0<f.length&&(c.i=null,c.g.set(Os(c,d),k(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let M=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var A=M;U[g]!==""&&(A+="="+encodeURIComponent(String(U[g]))),c.push(A)}}return this.i=c.join("&")};function Os(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function aO(c,d){d&&!c.j&&(yi(c),c.i=null,c.g.forEach(function(f,g){var A=g.toLowerCase();g!=A&&(xb(this,g),Mb(this,A,f))},c)),c.j=d}function cO(c,d){let f=new Vc;if(a.Image){let g=new Image;g.onload=y(vi,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(vi,f,"TestLoadImage: error",!1,d,g),g.onabort=y(vi,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(vi,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function uO(c,d){let f=new Vc,g=new AbortController,A=setTimeout(()=>{g.abort(),vi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(A),M.ok?vi(f,"TestPingServer: ok",!0,d):vi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),vi(f,"TestPingServer: error",!1,d)})}function vi(c,d,f,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(f)}catch{}}function lO(){this.g=new GP}function dO(c,d,f){let g=f||"";try{Cb(c,function(A,M){let U=A;l(A)&&(U=Hg(A)),d.push(g+M+"="+encodeURIComponent(U))})}catch(A){throw d.push(g+"type="+encodeURIComponent("_badmap")),A}}function Hc(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Hc,zg),Hc.prototype.g=function(){return new Id(this.l,this.j)},Hc.prototype.i=function(c){return function(){return c}}({});function Id(c,d){Vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Id,Vt),n=Id.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qc(this)),this.g&&(this.readyState=3,qc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?zc(this):qc(this),this.readyState==3&&Nb(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,zc(this))},n.Qa=function(c){this.g&&(this.response=c,zc(this))},n.ga=function(){this.g&&zc(this)};function zc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function kb(c){let d="";return Me(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ey(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=kb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Be(c,d,f))}function Ye(c){Vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ye,Vt);var hO=/^https?$/i,fO=["POST","PUT"];n=Ye.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wg.g(),this.v=this.o?cb(this.o):cb(Wg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){Pb(this,M);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)f.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),A=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fO,d,void 0))||g||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,U]of f)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fb(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){Pb(this,M)}};function Pb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ob(c),Td(c)}function Ob(c){c.A||(c.A=!0,Wt(c,"complete"),Wt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Wt(this,"complete"),Wt(this,"abort"),Td(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Td(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lb(this):this.bb())},n.bb=function(){Lb(this)};function Lb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Pr(c)!=4||c.Z()!=2)){if(c.u&&Pr(c)==4)ib(c.Ea,0,c);else if(Wt(c,"readystatechange"),Pr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var A=String(c.D).match(Db)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),g=!hO.test(A?A.toLowerCase():"")}f=g}if(f)Wt(c,"complete"),Wt(c,"success");else{c.m=6;try{var M=2<Pr(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",Ob(c)}}finally{Td(c)}}}}function Td(c,d){if(c.g){Fb(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Wt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Fb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Pr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),qP(d)}};function Vb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pO(c){let d={};c=(c.g&&2<=Pr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(se(c[g]))continue;var f=D(c[g]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[A]||[];d[A]=M,M.push(f)}C(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function jb(c){this.Aa=0,this.i=[],this.j=new Vc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gc("baseRetryDelayMs",5e3,c),this.cb=Gc("retryDelaySeedMs",1e4,c),this.Wa=Gc("forwardChannelMaxRetries",2,c),this.wa=Gc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Eb(c&&c.concurrentRequestLimit),this.Da=new lO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jb.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Kt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Kb(this,null,this.W),Cd(this)};function ty(c){if(Ub(c),c.G==3){var d=c.U++,f=kr(c.I);if(Be(f,"SID",c.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),Wc(c,f),d=new gi(c,c.j,d),d.L=2,d.v=wd(kr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Qb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),vd(d)}Wb(c)}function bd(c){c.g&&(ry(c),c.g.cancel(),c.g=null)}function Ub(c){bd(c),c.u&&(a.clearTimeout(c.u),c.u=null),Dd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cd(c){if(!wb(c.h)&&!c.s){c.s=!0;var d=c.Ga;Rc||JT(),Mc||(Rc(),Mc=!0),Pg.add(d,c),c.B=0}}function mO(c,d){return Ib(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fc(m(c.Ga,c,d),Gb(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let A=new gi(this,this.j,c),M=this.o;if(this.S&&(M?(M=_(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(A.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=$b(this,A,d),f=kr(this.I),Be(f,"RID",c),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),Wc(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(kb(M)))+"&"+d:this.m&&ey(f,this.m,M)),Xg(this.h,A),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),A.T=!0,Qg(A,f,null)):Qg(A,f,d),this.G=2}}else this.G==3&&(c?Bb(this,c):this.i.length==0||wb(this.h)||Bb(this))};function Bb(c,d){var f;d?f=d.l:f=c.U++;let g=kr(c.I);Be(g,"SID",c.K),Be(g,"RID",f),Be(g,"AID",c.T),Wc(c,g),c.m&&c.o&&ey(g,c.m,c.o),f=new gi(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=$b(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xg(c.h,f),Qg(f,g,d)}function Wc(c,d){c.H&&Me(c.H,function(f,g){Be(d,g,f)}),c.l&&Cb({},function(f,g){Be(d,g,f)})}function $b(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var A=c.i;let M=-1;for(;;){let U=["count="+f];M==-1?0<f?(M=A[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let Le=!0;for(let Nt=0;Nt<f;Nt++){let Ae=A[Nt].g,jt=A[Nt].map;if(Ae-=M,0>Ae)M=Math.max(0,A[Nt].g-100),Le=!1;else try{dO(jt,U,"req"+Ae+"_")}catch{g&&g(jt)}}if(Le){g=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Hb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Rc||JT(),Mc||(Rc(),Mc=!0),Pg.add(d,c),c.v=0}}function ny(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fc(m(c.Fa,c),Gb(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,zb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fc(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),bd(this),zb(this))};function ry(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function zb(c){c.g=new gi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=kr(c.qa);Be(d,"RID","rpc"),Be(d,"SID",c.K),Be(d,"AID",c.T),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(d,"TO",c.ja),Be(d,"TYPE","xmlhttp"),Wc(c,d),c.m&&c.o&&ey(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wd(kr(d)),f.m=null,f.P=!0,yb(f,c)}n.Za=function(){this.C!=null&&(this.C=null,bd(this),ny(this),Kt(19))};function Dd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function qb(c,d){var f=null;if(c.g==d){Dd(c),ry(c),c.g=null;var g=2}else if(Jg(c.h,d))f=d.D,Tb(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=c.B;g=md(),Wt(g,new fb(g,f)),Cd(c)}else Hb(c);else if(A=d.s,A==3||A==0&&0<d.X||!(g==1&&mO(c,d)||g==2&&ny(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),A){case 1:_o(c,5);break;case 4:_o(c,10);break;case 3:_o(c,6);break;default:_o(c,2)}}}function Gb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function _o(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let A=!g;g=new vo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_d(g,"https"),wd(g),A?cO(g.toString(),f):uO(g.toString(),f)}else Kt(2);c.G=0,c.l&&c.l.sa(d),Wb(c),Ub(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Wb(c){if(c.G=0,c.ka=[],c.l){let d=bb(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Kb(c,d,f){var g=f instanceof vo?kr(f):new vo(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ed(g,g.s);else{var A=a.location;g=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var M=new vo(null);g&&_d(M,g),d&&(M.g=d),A&&Ed(M,A),f&&(M.l=f),g=M}return f=c.D,d=c.ya,f&&d&&Be(g,f,d),Be(g,"VER",c.la),Wc(c,g),g}function Qb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ye(new Hc({eb:f})):new Ye(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yb(){}n=Yb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Sd(){}Sd.prototype.g=function(c,d){return new un(c,d)};function un(c,d){Vt.call(this),this.g=new jb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!se(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!se(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ls(this)}S(un,Vt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){ty(this.g)},un.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Hg(c),c=f);d.i.push(new JP(d.Ya++,c)),d.G==3&&Cd(d)},un.prototype.N=function(){this.g.l=null,delete this.j,ty(this.g),delete this.g,un.aa.N.call(this)};function Zb(c){qg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Zb,qg);function Jb(){Gg.call(this),this.status=1}S(Jb,Gg);function Ls(c){this.g=c}S(Ls,Yb),Ls.prototype.ua=function(){Wt(this.g,"a")},Ls.prototype.ta=function(c){Wt(this.g,new Zb(c))},Ls.prototype.sa=function(c){Wt(this.g,new Jb)},Ls.prototype.ra=function(){Wt(this.g,"b")},Sd.prototype.createWebChannel=Sd.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Iw=ci.createWebChannelTransport=function(){return new Sd},ww=ci.getStatEventTarget=function(){return md()},Ew=ci.Event=go,am=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gd.NO_ERROR=0,gd.TIMEOUT=8,gd.HTTP_ERROR=6,kl=ci.ErrorCode=gd,pb.COMPLETE="complete",_w=ci.EventType=pb,ub.EventType=Oc,Oc.OPEN="a",Oc.CLOSE="b",Oc.ERROR="c",Oc.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Wa=ci.WebChannel=ub,e5=ci.FetchXmlHttpFactory=Hc,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,vw=ci.XhrIo=Ye}).apply(typeof sm<"u"?sm:typeof self<"u"?self:typeof window<"u"?window:{});var bM="@firebase/firestore",CM="4.7.17";var xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");var pc="11.9.0";var ws=new Ir("@firebase/firestore");function Ka(){return ws.logLevel}function W(n,...e){if(ws.logLevel<=Ie.DEBUG){let t=e.map(hT);ws.debug(`Firestore (${pc}): ${n}`,...t)}}function ui(n,...e){if(ws.logLevel<=Ie.ERROR){let t=e.map(hT);ws.error(`Firestore (${pc}): ${n}`,...t)}}function tc(n,...e){if(ws.logLevel<=Ie.WARN){let t=e.map(hT);ws.warn(`Firestore (${pc}): ${n}`,...t)}}function hT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yN(n,r,t)}function yN(n,e,t){let r=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ui(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||yN(e,i,r)}function he(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Aw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}},xw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rw=class{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new pm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new xt(e)}},Mw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Nw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Mw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kw=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function t5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function vN(){return new TextEncoder}var gm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=t5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ee(n,e){return n<e?-1:n>e?1:0}function Pw(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ee(r,i);{let o=vN(),s=n5(o.encode(DM(n,t)),o.encode(DM(e,t)));return s!==0?s:Ee(r,i)}}t+=r>65535?2:1}return Ee(n.length,e.length)}function DM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function n5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ee(n[t],e[t]);return Ee(n.length,e.length)}function nc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var SM=-62135596800,AM=1e6,Lt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SM)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AM}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-SM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Lt(0,0))}static max(){return new n(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xM="__name__",ym=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ee(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Pw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},Qe=class n extends ym{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},r5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=class n extends ym{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return r5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xM}static keyField(){return new n([xM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qe.fromString(e))}static fromName(e){return new n(Qe.fromString(e).popFirst(5))}static empty(){return new n(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qe(e.slice()))}};var jl=-1,Ow=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ow.UNKNOWN_ID=-1;function i5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new Is(i,te.empty(),e)}function o5(n){return new Is(n.readTime,n.key,jl)}var Is=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pe.min(),te.empty(),jl)}static max(){return new n(pe.max(),te.empty(),jl)}};function s5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:Ee(n.largestBatchId,e.largestBatchId))}var a5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mc(n){return E(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==a5)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function c5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gc(n){return n.name==="IndexedDbTransactionError"}var fT=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),pT=-1;function Zm(n){return n==null}function Ul(n){return n===0&&1/n==-1/0}function u5(n){return typeof n=="number"&&Number.isInteger(n)&&!Ul(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _N="";function l5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RM(e)),e=d5(n.get(t),e);return RM(e)}function d5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case _N:t+="";break;default:t+=o}}return t}function RM(n){return n+_N+""}var h5="remoteDocuments",EN="owner";var wN="mutationQueues";var IN="mutations";var TN="documentMutations",f5="remoteDocumentsV14";var bN="remoteDocumentGlobal";var CN="targets";var DN="targetDocuments";var SN="targetGlobal",AN="collectionParents";var xN="clientMetadata";var RN="bundles";var MN="namedQueries";var p5="indexConfiguration";var m5="indexState";var g5="indexEntries";var NN="documentOverlays";var y5="globals";var v5=[wN,IN,TN,h5,CN,EN,SN,DN,xN,bN,AN,RN,MN],vue=[...v5,NN],_5=[wN,IN,TN,f5,CN,EN,SN,DN,xN,bN,AN,RN,MN,NN],E5=_5,w5=[...E5,p5,m5,g5];var _ue=[...w5,y5];function MM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ot=class n{constructor(e,t){this.comparator=e,this.root=t||Dr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}},Ja=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}};Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Rt=class n{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vm(this.data.getIterator())}getIteratorFrom(e){return new vm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},vm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var On=class n{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Rt(wn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var _m=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _m("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var I5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(n){if(ke(!!n,39018),typeof n=="string"){let e=0,t=I5.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function di(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}var PN="server_timestamp",ON="__type__",LN="__previous_value__",FN="__local_write_time__";function mT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ON])===null||t===void 0?void 0:t.stringValue)===PN}function Jm(n){let e=n.mapValue.fields[LN];return mT(e)?Jm(e):e}function Bl(n){let e=li(n.mapValue.fields[FN].timestampValue);return new Lt(e.seconds,e.nanos)}var Fw=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Em="(default)",wm=class n{constructor(e,t){this.projectId=e,this.database=t||Em}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Em}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var gT="__type__",VN="__max__",cm={mapValue:{fields:{__type__:{stringValue:VN}}}},yT="__vector__",rc="value";function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mT(n)?4:UN(n)?9007199254740991:jN(n)?10:11:oe(28295,{value:n})}function xr(n,e){if(n===e)return!0;let t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bl(n).isEqual(Bl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=li(i.timestampValue),a=li(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return di(i.bytesValue).isEqual(di(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?Ul(s)===Ul(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return nc(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MM(s)!==MM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!xr(s[u],a[u])))return!1;return!0}(n,e);default:return oe(52216,{left:n})}}function $l(n,e){return(n.values||[]).find(t=>xr(t,e))!==void 0}function ic(n,e){if(n===e)return 0;let t=oo(n),r=oo(e);if(t!==r)return Ee(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ee(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),u=We(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return NM(n.timestampValue,e.timestampValue);case 4:return NM(Bl(n),Bl(e));case 5:return Pw(n.stringValue,e.stringValue);case 6:return function(o,s){let a=di(o),u=di(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Ee(a[l],u[l]);if(h!==0)return h}return Ee(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ee(We(o.latitude),We(s.latitude));return a!==0?a:Ee(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[rc])===null||a===void 0?void 0:a.arrayValue,S=(u=m[rc])===null||u===void 0?void 0:u.arrayValue,k=Ee(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:kM(y,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===cm.mapValue&&s===cm.mapValue)return 0;if(o===cm.mapValue)return 1;if(s===cm.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Pw(u[p],h[p]);if(m!==0)return m;let y=ic(a[u[p]],l[h[p]]);if(y!==0)return y}return Ee(u.length,h.length)}(n.mapValue,e.mapValue);default:throw oe(23264,{Pe:t})}}function NM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ee(n,e);let t=li(n),r=li(e),i=Ee(t.seconds,r.seconds);return i!==0?i:Ee(t.nanos,r.nanos)}function kM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ic(t[i],r[i]);if(o)return o}return Ee(t.length,r.length)}function oc(n){return Vw(n)}function Vw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=li(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return di(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Vw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Vw(t.fields[s])}`;return i+"}"}(n.mapValue):oe(61005,{value:n})}function dm(n){switch(oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Jm(n);return e?16+dm(e):16;case 5:return 2*n.stringValue.length;case 6:return di(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+dm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return lo(r.fields,(o,s)=>{i+=o.length+dm(s)}),i}(n.mapValue);default:throw oe(13486,{value:n})}}function PM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jw(n){return!!n&&"integerValue"in n}function vT(n){return!!n&&"arrayValue"in n}function OM(n){return!!n&&"nullValue"in n}function LM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hm(n){return!!n&&"mapValue"in n}function jN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gT])===null||t===void 0?void 0:t.stringValue)===yT}function Ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ol(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VN}var wue={mapValue:{fields:{[gT]:{stringValue:yT},[rc]:{arrayValue:{}}}}};var En=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ol(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ol(this.value))}};function BN(n){let e=[];return lo(n.fields,(t,r)=>{let i=new wn([t]);if(hm(r)){let o=BN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var ir=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),En.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),En.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sc=class{constructor(e,t){this.position=e,this.inclusive=t}};function FM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),t.key):r=ic(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function VM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}var Ts=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function T5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Im=class{},_t=class n extends Im{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bw(e,t,r):t==="array-contains"?new zw(e,r):t==="in"?new qw(e,r):t==="not-in"?new Gw(e,r):t==="array-contains-any"?new Ww(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $w(e,r):new Hw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ic(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class n extends Im{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return $N(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function $N(n){return n.op==="and"}function HN(n){return b5(n)&&$N(n)}function b5(n){for(let e of n.filters)if(e instanceof or)return!1;return!0}function Uw(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+oc(n.value);if(HN(n))return n.filters.map(e=>Uw(e)).join(",");{let e=n.filters.map(t=>Uw(t)).join(",");return`${n.op}(${e})`}}function zN(n,e){return n instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&xr(r.value,i.value)}(n,e):n instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zN(s,i.filters[a]),!0):!1}(n,e):void oe(19439)}function qN(n){return n instanceof _t?function(t){return`${t.field.canonicalString()} ${t.op} ${oc(t.value)}`}(n):n instanceof or?function(t){return t.op.toString()+" {"+t.getFilters().map(qN).join(" ,")+"}"}(n):"Filter"}var Bw=class extends _t{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},$w=class extends _t{constructor(e,t){super(e,"in",t),this.keys=GN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Hw=class extends _t{constructor(e,t){super(e,"not-in",t),this.keys=GN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function GN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var zw=class extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vT(t)&&$l(t.arrayValue,this.value)}},qw=class extends _t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$l(this.value.arrayValue,t)}},Gw=class extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$l(this.value.arrayValue,t)}},Ww=class extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$l(this.value.arrayValue,r))}};var Kw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function jM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Kw(n,e,t,r,i,o,s)}function _T(n){let e=he(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Uw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Zm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oc(r)).join(",")),e.Ie=t}return e.Ie}function ET(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!T5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VM(n.startAt,e.startAt)&&VM(n.endAt,e.endAt)}function Qw(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var so=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function C5(n,e,t,r,i,o,s,a){return new so(n,e,t,r,i,o,s,a)}function Xm(n){return new so(n)}function UM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WN(n){return n.collectionGroup!==null}function Ll(n){let e=he(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Rt(wn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ts(o,r))}),t.has(wn.keyField().canonicalString())||e.Ee.push(new Ts(wn.keyField(),r))}return e.Ee}function Sr(n){let e=he(n);return e.de||(e.de=D5(e,Ll(n))),e.de}function D5(n,e){if(n.limitType==="F")return jM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ts(i.field,o)});let t=n.endAt?new sc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sc(n.startAt.position,n.startAt.inclusive):null;return jM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yw(n,e){let t=n.filters.concat([e]);return new so(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zw(n,e,t){return new so(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eg(n,e){return ET(Sr(n),Sr(e))&&n.limitType===e.limitType}function KN(n){return`${_T(Sr(n))}|lt:${n.limitType}`}function Qa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qN(i)).join(", ")}]`),Zm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>oc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>oc(i)).join(",")),`Target(${r})`}(Sr(n))}; limitType=${n.limitType})`}function tg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ll(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ll(r),i)||r.endAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ll(r),i))}(n,e)}function S5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QN(n){return(e,t)=>{let r=!1;for(let i of Ll(n)){let o=A5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function A5(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ic(u,l):oe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:n.dir})}}var hi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kN(this.inner)}size(){return this.innerSize}};var x5=new ot(te.comparator);function fi(){return x5}var YN=new ot(te.comparator);function Pl(...n){let e=YN;for(let t of n)e=e.insert(t.key,t);return e}function ZN(n){let e=YN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vs(){return Fl()}function JN(){return Fl()}function Fl(){return new hi(n=>n.toString(),(n,e)=>n.isEqual(e))}var R5=new ot(te.comparator),M5=new Rt(te.comparator);function Ce(...n){let e=M5;for(let t of n)e=e.add(t);return e}var N5=new Rt(Ee);function k5(){return N5}function wT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function XN(n){return{integerValue:""+n}}function P5(n,e){return u5(e)?XN(e):wT(n,e)}var ac=class{constructor(){this._=void 0}};function O5(n,e,t){return n instanceof cc?function(i,o){let s={fields:{[ON]:{stringValue:PN},[FN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mT(o)&&(o=Jm(o)),o&&(s.fields[LN]=o),{mapValue:s}}(t,e):n instanceof bs?tk(n,e):n instanceof Cs?nk(n,e):function(i,o){let s=ek(i,o),a=BM(s)+BM(i.Re);return jw(s)&&jw(i.Re)?XN(a):wT(i.serializer,a)}(n,e)}function L5(n,e,t){return n instanceof bs?tk(n,e):n instanceof Cs?nk(n,e):t}function ek(n,e){return n instanceof uc?function(r){return jw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var cc=class extends ac{},bs=class extends ac{constructor(e){super(),this.elements=e}};function tk(n,e){let t=rk(e);for(let r of n.elements)t.some(i=>xr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Cs=class extends ac{constructor(e){super(),this.elements=e}};function nk(n,e){let t=rk(e);for(let r of n.elements)t=t.filter(i=>!xr(i,r));return{arrayValue:{values:t}}}var uc=class extends ac{constructor(e,t){super(),this.serializer=e,this.Re=t}};function BM(n){return We(n.integerValue||n.doubleValue)}function rk(n){return vT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function F5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bs&&i instanceof bs||r instanceof Cs&&i instanceof Cs?nc(r.elements,i.elements,xr):r instanceof uc&&i instanceof uc?xr(r.Re,i.Re):r instanceof cc&&i instanceof cc}(n.transform,e.transform)}var Jw=class{constructor(e,t){this.version=e,this.transformResults=t}},Ln=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var lc=class{};function ik(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dc(n.key,Ln.none()):new Ds(n.key,n.data,Ln.none());{let t=n.data,r=En.empty(),i=new Rt(wn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rr(n.key,r,new On(i.toArray()),Ln.none())}}function V5(n,e,t){n instanceof Ds?function(i,o,s){let a=i.value.clone(),u=HM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Rr?function(i,o,s){if(!fm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=HM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ok(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Vl(n,e,t,r){return n instanceof Ds?function(o,s,a,u){if(!fm(o.precondition,s))return a;let l=o.value.clone(),h=zM(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rr?function(o,s,a,u){if(!fm(o.precondition,s))return a;let l=zM(o.fieldTransforms,u,s),h=s.data;return h.setAll(ok(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return fm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function j5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ek(r.transform,i||null);o!=null&&(t===null&&(t=En.empty()),t.set(r.field,o))}return t||null}function $M(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nc(r,i,(o,s)=>F5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ds=class extends lc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rr=class extends lc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ok(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function HM(n,e,t){let r=new Map;ke(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,L5(s,a,t[i]))}return r}function zM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,O5(o,s,e))}return r}var dc=class extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xw=class extends lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var eI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&V5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=ik(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,(t,r)=>$M(t,r))&&nc(this.baseMutations,e.baseMutations,(t,r)=>$M(t,r))}},tI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return R5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var nI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var yt,Se;function U5(n){switch(n){case O.OK:return oe(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function sk(n){if(n===void 0)return ui("GRPC error has no .code"),O.UNKNOWN;switch(n){case yt.OK:return O.OK;case yt.CANCELLED:return O.CANCELLED;case yt.UNKNOWN:return O.UNKNOWN;case yt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case yt.INTERNAL:return O.INTERNAL;case yt.UNAVAILABLE:return O.UNAVAILABLE;case yt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case yt.NOT_FOUND:return O.NOT_FOUND;case yt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case yt.ABORTED:return O.ABORTED;case yt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case yt.DATA_LOSS:return O.DATA_LOSS;default:return oe(39323,{code:n})}}(Se=yt||(yt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";var qM=null;var B5=new ai([4294967295,4294967295],0);function GM(n){let e=vN().encode(n),t=new yw;return t.update(e),new Uint8Array(t.digest())}function WM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,o],0)]}var iI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _s(`Invalid padding: ${t}`);if(r<0)throw new _s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _s(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _s(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ai.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(B5)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=GM(e),[r,i]=WM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=GM(e),[r,i]=WM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(pe.min(),i,new ot(Ee),fi(),Ce())}},Hl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ce(),Ce(),Ce())}};var Xa=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},bm=class{constructor(e,t){this.targetId=e,this.Ce=t}},Cm=class{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Dm=class{constructor(){this.Fe=0,this.Me=KM(),this.xe=Gt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ce(),t=Ce(),r=Ce();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe(38017,{changeType:o})}}),new Hl(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=KM()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ke(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},oI=class{constructor(e){this.ze=e,this.je=new Map,this.He=fi(),this.Je=um(),this.Ye=um(),this.Ze=new ot(Ee)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(Qw(o))if(r===0){let s=new te(o.path);this.tt(t,s,ir.newNoDocument(s,pe.min()))}else ke(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}qM?.ht(function(h,p,m,y,S){var k,R,j,se,J,Re;let Mt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Me=p.unchangedNames;return Me&&(Mt.bloomFilter={applied:S===0,hashCount:(k=Me?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(se=(j=(R=Me?.bits)===null||R===void 0?void 0:R.bitmap)===null||j===void 0?void 0:j.length)!==null&&se!==void 0?se:0,padding:(Re=(J=Me?.bits)===null||J===void 0?void 0:J.padding)!==null&&Re!==void 0?Re:0,mightContain:C=>{var _;return(_=y?.mightContain(C))!==null&&_!==void 0&&_}}),Mt}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=di(r).toUint8Array()}catch(u){if(u instanceof _m)return tc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iI(s,i,o)}catch(u){return tc(u instanceof _s?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Qw(a.target)){let u=new te(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,ir.newNoDocument(u,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=Ce();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Tm(e,t,this.Ze,this.He,r);return this.He=fi(),this.Je=um(),this.Ye=um(),this.Ze=new ot(Ee),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Dm,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Rt(Ee),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Rt(Ee),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Dm),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function um(){return new ot(te.comparator)}function KM(){return new ot(te.comparator)}var $5={asc:"ASCENDING",desc:"DESCENDING"},H5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z5={and:"AND",or:"OR"},sI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function aI(n,e){return n.useProto3Json||Zm(e)?e:{value:e}}function Sm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ak(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function q5(n,e){return Sm(n,e.toTimestamp())}function Ar(n){return ke(!!n,49232),pe.fromTimestamp(function(t){let r=li(t);return new Lt(r.seconds,r.nanos)}(n))}function IT(n,e){return cI(n,e).canonicalString()}function cI(n,e){let t=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ck(n){let e=Qe.fromString(n);return ke(fk(e),10190,{key:e.toString()}),e}function uI(n,e){return IT(n.databaseId,e.path)}function Tw(n,e){let t=ck(e);if(t.get(1)!==n.databaseId.projectId)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(lk(t))}function uk(n,e){return IT(n.databaseId,e)}function G5(n){let e=ck(n);return e.length===4?Qe.emptyPath():lk(e)}function lI(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lk(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QM(n,e,t){return{name:uI(n,e),fields:t.value.mapValue.fields}}function W5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ke(h===void 0||typeof h=="string",58123),Gt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?O.UNKNOWN:sk(l.code);return new z(h,l.message||"")}(s);t=new Cm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Tw(n,r.document.name),o=Ar(r.document.updateTime),s=r.document.createTime?Ar(r.document.createTime):pe.min(),a=new En({mapValue:{fields:r.document.fields}}),u=ir.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Xa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Tw(n,r.document),o=r.readTime?Ar(r.readTime):pe.min(),s=ir.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Xa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Tw(n,r.document),o=r.removedTargetIds||[];t=new Xa([],o,i,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new rI(i,o),a=r.targetId;t=new bm(a,s)}}return t}function K5(n,e){let t;if(e instanceof Ds)t={update:QM(n,e.key,e.value)};else if(e instanceof dc)t={delete:uI(n,e.key)};else if(e instanceof Rr)t={update:QM(n,e.key,e.data),updateMask:r8(e.fieldMask)};else{if(!(e instanceof Xw))return oe(16599,{ft:e.type});t={verify:uI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof cc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uc)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw oe(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:q5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe(27497)}(n,e.precondition)),t}function Q5(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Ar(i.updateTime):Ar(o);return s.isEqual(pe.min())&&(s=Ar(o)),new Jw(s,i.transformResults||[])}(t,e))):[]}function Y5(n,e){return{documents:[uk(n,e.path)]}}function Z5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uk(n,i);let o=function(l){if(l.length!==0)return hk(or.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ya(m.field),direction:e8(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=aI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function J5(n){let e=G5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ke(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=dk(p);return m instanceof or&&HN(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(S){return new Ts(Za(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Zm(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new sc(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new sc(y,m)}(t.endAt)),C5(e,i,s,o,a,"F",u,l)}function X5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Za(t.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Za(t.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Za(t.unaryFilter.field);return _t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Za(t.unaryFilter.field);return _t.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(n):n.fieldFilter!==void 0?function(t){return _t.create(Za(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return or.create(t.compositeFilter.filters.map(r=>dk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(t.compositeFilter.op))}(n):oe(30097,{filter:n})}function e8(n){return $5[n]}function t8(n){return H5[n]}function n8(n){return z5[n]}function Ya(n){return{fieldPath:n.canonicalString()}}function Za(n){return wn.fromServerFormat(n.fieldPath)}function hk(n){return n instanceof _t?function(t){if(t.op==="=="){if(LM(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NAN"}};if(OM(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LM(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NAN"}};if(OM(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(t.field),op:t8(t.op),value:t.value}}}(n):n instanceof or?function(t){let r=t.getFilters().map(i=>hk(i));return r.length===1?r[0]:{compositeFilter:{op:n8(t.op),filters:r}}}(n):oe(54877,{filter:n})}function r8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zl=class n{constructor(e,t,r,i,o=pe.min(),s=pe.min(),a=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dI=class{constructor(e){this.wt=e}};function i8(n){let e=J5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zw(e,e.limit,"L"):e}var Am=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Ul(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=li(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(di(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?UN(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):jN(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):oe(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=rc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(We(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),te.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Am.Wt=new Am;var hI=class{constructor(){this.Cn=new fI}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Is.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},fI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rt(Qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(Qe.comparator)).toArray()}};var Iue=new Uint8Array(0);var YM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pk=41943040,Pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(pk,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var ql=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var ZM="LruGarbageCollector",o8=1048576;function JM([n,e],[t,r]){let i=Ee(n,t);return i===0?Ee(e,r):i}var pI=class{constructor(e){this.Er=e,this.buffer=new Rt(JM),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();JM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},mI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){W(ZM,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){gc(t)?W(ZM,"Ignoring IndexedDB error during garbage collection: ",t):yield mc(t)}yield this.mr(3e5)}))}},gI=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(fT.le);let r=new pI(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(YM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YM):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ka()<=Ie.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function s8(n,e){return new gI(n,e)}var yI=class{constructor(){this.changes=new hi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _I=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vl(r.mutation,i,On.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=vs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Pl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=vs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=fi(),s=Fl(),a=function(){return Fl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Vl(h.mutation,l,h.mutation.getFieldMask(),Lt.now())):s.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new vI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Fl(),i=new ot((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||On.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=JN();h.forEach(m=>{if(!o.has(m)){let y=ik(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(vs()),a=jl,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ce())).next(h=>({batchId:a,changes:ZN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Pl();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=function(p,m){return new so(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ir.newInvalidDocument(h)))});let a=Pl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Vl(h.mutation,l,On.empty(),Lt.now()),tg(t,l)&&(a=a.insert(u,l))}),a})}};var EI=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return L.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ar(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:i8(i.bundledQuery),readTime:Ar(i.readTime)}}(t)),L.resolve()}};var wI=class{constructor(){this.overlays=new ot(te.comparator),this.Qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vs();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=vs(),o=t.length+1,s=new te(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ot((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=vs(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=vs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nI(t,r));let o=this.Qr.get(t);o===void 0&&(o=Ce(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var II=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Gl=class{constructor(){this.$r=new Rt(vt.Ur),this.Kr=new Rt(vt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new vt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new vt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new te(new Qe([])),r=new vt(t,e),i=new vt(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new te(new Qe([])),r=new vt(t,e),i=new vt(t,e+1),o=Ce();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new vt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},vt=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return te.comparator(e.key,t.key)||Ee(e.Zr,t.Zr)}static Wr(e,t){return Ee(e.Zr,t.Zr)||te.comparator(e.key,t.key)}};var TI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Rt(vt.Ur)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new eI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?pT:this.nr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new vt(t,0),i=new vt(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rt(Ee);return t.forEach(i=>{let o=new vt(i,0),s=new vt(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),L.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new vt(new te(o),0),a=new Rt(Ee);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),L.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return L.forEach(t.mutations,i=>{let o=new vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new vt(t,0),i=this.Xr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bI=class{constructor(e){this.ii=e,this.docs=function(){return new ot(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ir.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fi(),s=t.path,a=new te(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||s5(o5(h),r)<=0||(i.has(h.key)||tg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){oe(9500)}si(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CI(this)}getSize(e){return L.resolve(this.size)}},CI=class extends yI{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var DI=class{constructor(e){this.persistence=e,this.oi=new hi(t=>_T(t),ET),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this._i=0,this.ai=new Gl,this.targetCount=0,this.ui=ql.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),L.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new ql(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Tr(t),L.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.ai.containsKey(t))}};var xm=class{constructor(e,t){this.ci={},this.overlays={},this.li=new fT(0),this.hi=!1,this.hi=!0,this.Pi=new II,this.referenceDelegate=e(this),this.Ti=new DI(this),this.indexManager=new hI,this.remoteDocumentCache=function(i){return new bI(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new dI(t),this.Ei=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new TI(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new SI(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return L.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},SI=class extends Lw{constructor(e){super(),this.currentSequenceNumber=e}},AI=class n{constructor(e){this.persistence=e,this.Vi=new Gl,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw oe(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.gi,r=>{let i=te.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,pe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return L.or([()=>L.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Rm=class n{constructor(e,t){this.persistence=e,this.yi=new hi(r=>l5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=s8(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return L.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),L.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dm(e.data.value)),t}Dr(e,t,r){return L.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Ce(),i=Ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var RI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var MI=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return KR()?8:c5(At())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new RI;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Ka()<=Ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Qa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),L.resolve()):(Ka()<=Ie.DEBUG&&W("QueryEngine","Query:",Qa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Ka()<=Ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Qa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):L.resolve())}ws(e,t){if(UM(t))return L.resolve(null);let r=Sr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zw(t,null,"F"),r=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(t,a);return this.Cs(t,l,s,u.readTime)?this.ws(e,Zw(t,null,"F")):this.Fs(e,l,t,u)}))})))}bs(e,t,r,i){return UM(t)||i.isEqual(pe.min())?L.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?L.resolve(null):(Ka()<=Ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qa(t)),this.Fs(e,s,t,i5(i,jl)).next(a=>a))})}vs(e,t){let r=new Rt(QN(e));return t.forEach((i,o)=>{tg(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ka()<=Ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Qa(t)),this.ys.getDocumentsMatchingQuery(e,t,Is.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var TT="LocalStore",a8=3e8,NI=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new ot(Ee),this.Os=new hi(o=>_T(o),ET),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _I(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function c8(n,e,t,r){return new NI(n,e,t,r)}function mk(n,e){return E(this,null,function*(){let t=he(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function u8(n,e){let t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=L.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(k=>{let R=l.docVersions.get(S);ke(R!==null,48541),k.version.compareTo(R)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gk(n){let e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function l8(n,e){let t=he(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Gt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(k,R,j){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=a8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,y,h)&&a.push(t.Ti.updateTargetData(o,y))});let u=fi(),l=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(d8(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(pe.min())){let h=t.Ti.getLastRemoteSnapshotVersion(o).next(p=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.xs=i,o))}function d8(n,e,t){let r=Ce(),i=Ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=fi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):W(TT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function h8(n,e){let t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pT),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function f8(n,e){let t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new zl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function kI(n,e,t){return E(this,null,function*(){let r=he(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!gc(s))throw s;W(TT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function XM(n,e,t){let r=he(n),i=pe.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=he(u),m=p.Os.get(h);return m!==void 0?L.resolve(p.xs.get(m)):p.Ti.getTargetData(l,h)}(r,s,Sr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:pe.min(),t?o:Ce())).next(a=>(p8(r,S5(e),a),{documents:a,$s:o})))}function p8(n,e,t){let r=n.Ns.get(e)||pe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var Mm=class{constructor(){this.activeTargetIds=k5()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var PI=class{constructor(){this.xo=new Mm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var OI=class{No(e){}shutdown(){}};var eN="ConnectivityMonitor",Nm=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){W(eN,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){W(eN,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lm=null;function LI(){return lm===null?lm=function(){return 268435456+Math.round(2147483648*Math.random())}():lm++,"0x"+lm.toString(16)}var bw="RestConnection",m8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},FI=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Em?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=LI(),a=this.jo(e,t.toUriEncodedString());W(bw,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=Yi(l);return this.Jo(e,a,u,r,h).then(p=>(W(bw,`Received RPC '${e}' ${s}: `,p),p),p=>{throw tc(bw,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=m8[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var VI=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var qt="WebChannelConnection",jI=class extends FI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=LI();return new Promise((a,u)=>{let l=new vw;l.setWithCredentials(!0),l.listenOnce(_w.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kl.NO_ERROR:let p=l.getResponseJson();W(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case kl.TIMEOUT:W(qt,`RPC '${e}' ${s} timed out`),u(new z(O.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:let m=l.getStatus();if(W(qt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let k=function(j){let se=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(se)>=0?se:O.UNKNOWN}(S.status);u(new z(k,S.message))}else u(new z(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(O.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{W(qt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);W(qt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}I_(e,t,r){let i=LI(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Iw(),a=ww(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");W(qt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let m=!1,y=!1,S=new VI({Zo:R=>{y?W(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(W(qt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),W(qt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),k=(R,j,se)=>{R.listen(j,J=>{try{se(J)}catch(Re){setTimeout(()=>{throw Re},0)}})};return k(p,Wa.EventType.OPEN,()=>{y||(W(qt,`RPC '${e}' stream ${i} transport opened.`),S.__())}),k(p,Wa.EventType.CLOSE,()=>{y||(y=!0,W(qt,`RPC '${e}' stream ${i} transport closed`),S.u_(),this.d_(p))}),k(p,Wa.EventType.ERROR,R=>{y||(y=!0,tc(qt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.u_(new z(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,Wa.EventType.MESSAGE,R=>{var j;if(!y){let se=R.data[0];ke(!!se,16349);let J=se,Re=J?.error||((j=J[0])===null||j===void 0?void 0:j.error);if(Re){W(qt,`RPC '${e}' stream ${i} received error:`,Re);let Mt=Re.status,Me=function(T){let b=yt[T];if(b!==void 0)return sk(b)}(Mt),C=Re.message;Me===void 0&&(Me=O.INTERNAL,C="Unknown error status: "+Mt+" with message "+Re.message),y=!0,S.u_(new z(Me,C)),p.close()}else W(qt,`RPC '${e}' stream ${i} received:`,se),S.c_(se)}}),k(a,Ew.STAT_EVENT,R=>{R.stat===am.PROXY?W(qt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===am.NOPROXY&&W(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function Cw(){return typeof document<"u"?document:null}function ng(n){return new sI(n,!0)}var km=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var tN="PersistentStream",Pm=class{constructor(e,t,r,i,o,s,a,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new km(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return E(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return E(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return E(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new z(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>E(this,null,function*(){this.state=0,this.start()}))}j_(e){return W(tN,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(W(tN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},UI=class extends Pm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=W5(this.serializer,e),r=function(o){if(!("targetChange"in o))return pe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?pe.min():s.readTime?Ar(s.readTime):pe.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=lI(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Qw(u)?{documents:Y5(o,u)}:{query:Z5(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ak(o,s.resumeToken);let l=aI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(pe.min())>0){a.readTime=Sm(o,s.snapshotVersion.toTimestamp());let l=aI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=X5(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=lI(this.serializer),t.removeTarget=e,this.Q_(t)}},BI=class extends Pm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=Q5(e.writeResults,e.commitTime),r=Ar(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=lI(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>K5(this.serializer,r))};this.Q_(t)}};var $I=class{},HI=class extends $I{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,cI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(O.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,cI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(O.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},zI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ui(t),this.ua=!1):W("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Ss="RemoteStore",qI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>E(this,null,function*(){xs(this)&&(W(Ss,"Restarting streams for network reachability change."),yield function(u){return E(this,null,function*(){let l=he(u);l.da.add(4),yield td(l),l.Va.set("Unknown"),l.da.delete(4),yield rg(l)})}(this))}))}),this.Va=new zI(r,i)}};function rg(n){return E(this,null,function*(){if(xs(n))for(let e of n.Aa)yield e(!0)})}function td(n){return E(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function yk(n,e){let t=he(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),ST(t)?DT(t):yc(t).N_()&&CT(t,e))}function bT(n,e){let t=he(n),r=yc(t);t.Ea.delete(e),r.N_()&&vk(t,e),t.Ea.size===0&&(r.N_()?r.k_():xs(t)&&t.Va.set("Unknown"))}function CT(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yc(n).Z_(e)}function vk(n,e){n.ma.Ke(e),yc(n).X_(e)}function DT(n){n.ma=new oI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),yc(n).start(),n.Va.ca()}function ST(n){return xs(n)&&!yc(n).O_()&&n.Ea.size>0}function xs(n){return he(n).da.size===0}function _k(n){n.ma=void 0}function g8(n){return E(this,null,function*(){n.Va.set("Online")})}function y8(n){return E(this,null,function*(){n.Ea.forEach((e,t)=>{CT(n,e)})})}function v8(n,e){return E(this,null,function*(){_k(n),ST(n)?(n.Va.Pa(e),DT(n)):n.Va.set("Unknown")})}function _8(n,e,t){return E(this,null,function*(){if(n.Va.set("Online"),e instanceof Cm&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){W(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Om(n,r)}else if(e instanceof Xa?n.ma.Xe(e):e instanceof bm?n.ma.ot(e):n.ma.nt(e),!t.isEqual(pe.min()))try{let r=yield gk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(Gt.EMPTY_BYTE_STRING,h.snapshotVersion)),vk(o,u);let p=new zl(h.target,u,l,h.sequenceNumber);CT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){W(Ss,"Failed to raise snapshot:",r),yield Om(n,r)}})}function Om(n,e,t){return E(this,null,function*(){if(!gc(e))throw e;n.da.add(1),yield td(n),n.Va.set("Offline"),t||(t=()=>gk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){W(Ss,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield rg(n)}))})}function Ek(n,e){return e().catch(t=>Om(n,t,e))}function ig(n){return E(this,null,function*(){let e=he(n),t=ao(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:pT;for(;E8(e);)try{let i=yield h8(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,w8(e,i)}catch(i){yield Om(e,i)}wk(e)&&Ik(e)})}function E8(n){return xs(n)&&n.Ia.length<10}function w8(n,e){n.Ia.push(e);let t=ao(n);t.N_()&&t.ea&&t.ta(e.mutations)}function wk(n){return xs(n)&&!ao(n).O_()&&n.Ia.length>0}function Ik(n){ao(n).start()}function I8(n){return E(this,null,function*(){ao(n).ia()})}function T8(n){return E(this,null,function*(){let e=ao(n);for(let t of n.Ia)e.ta(t.mutations)})}function b8(n,e,t){return E(this,null,function*(){let r=n.Ia.shift(),i=tI.from(r,e,t);yield Ek(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ig(n)})}function C8(n,e){return E(this,null,function*(){e&&ao(n).ea&&(yield function(r,i){return E(this,null,function*(){if(function(s){return U5(s)&&s!==O.ABORTED}(i.code)){let o=r.Ia.shift();ao(r).L_(),yield Ek(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ig(r)}})}(n,e)),wk(n)&&Ik(n)})}function nN(n,e){return E(this,null,function*(){let t=he(n);t.asyncQueue.verifyOperationInProgress(),W(Ss,"RemoteStore received new credentials");let r=xs(t);t.da.add(3),yield td(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield rg(t)})}function D8(n,e){return E(this,null,function*(){let t=he(n);e?(t.da.delete(2),yield rg(t)):e||(t.da.add(2),yield td(t),t.Va.set("Unknown"))})}function yc(n){return n.fa||(n.fa=function(t,r,i){let o=he(t);return o.oa(),new UI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:g8.bind(null,n),n_:y8.bind(null,n),i_:v8.bind(null,n),Y_:_8.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.fa.L_(),ST(n)?DT(n):n.Va.set("Unknown")):(yield n.fa.stop(),_k(n))}))),n.fa}function ao(n){return n.ga||(n.ga=function(t,r,i){let o=he(t);return o.oa(),new BI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:I8.bind(null,n),i_:C8.bind(null,n),na:T8.bind(null,n),ra:b8.bind(null,n)}),n.Aa.push(e=>E(null,null,function*(){e?(n.ga.L_(),yield ig(n)):(yield n.ga.stop(),n.Ia.length>0&&(W(Ss,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var GI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function AT(n,e){if(ui("AsyncQueue",`${e}: ${n}`),gc(n))return new z(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Lm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Pl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fm=class{constructor(){this.pa=new ot(te.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):oe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},hc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Lm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var WI=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},KI=class{constructor(){this.queries=rN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=he(t),o=i.queries;i.queries=rN(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new z(O.ABORTED,"Firestore shutting down"))}};function rN(){return new hi(n=>KN(n),eg)}function xT(n,e){return E(this,null,function*(){let t=he(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new WI,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield t.onListen(i,!0);break;case 1:o.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=AT(s,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&MT(t)})}function RT(n,e){return E(this,null,function*(){let t=he(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function S8(n,e){let t=he(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&MT(t)}function A8(n,e,t){let r=he(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function MT(n){n.Ca.forEach(e=>{e.next()})}var QI,iN;(iN=QI||(QI={})).xa="default",iN.Cache="cache";var Wl=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==QI.Cache}};var Vm=class{constructor(e){this.key=e}},jm=class{constructor(e){this.key=e}},YI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ce(),this.mutatedKeys=Ce(),this.Za=QN(e),this.Xa=new Lm(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Fm,i=t?t.Xa:this.Xa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=tg(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==k&&(r.track({type:3,doc:y}),R=!0):this.ru(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Za(y,u)>0||l&&this.Za(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,S){let k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:R})}};return k(y)-k(S)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new hc(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Fm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=Ce(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new jm(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Vm(r))}),t}au(e){this.Ha=e.$s,this.Ya=Ce();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return hc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},NT="SyncEngine",ZI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},JI=class{constructor(e){this.key=e,this.cu=!1}},XI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new hi(a=>KN(a),eg),this.Pu=new Map,this.Tu=new Set,this.Iu=new ot(te.comparator),this.Eu=new Map,this.du=new Gl,this.Au={},this.Ru=new Map,this.Vu=ql.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function x8(n,e,t=!0){return E(this,null,function*(){let r=Ak(n),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield Tk(r,e,t,!0),i})}function R8(n,e){return E(this,null,function*(){let t=Ak(n);yield Tk(t,e,!0,!1)})}function Tk(n,e,t,r){return E(this,null,function*(){let i=yield f8(n.localStore,Sr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield M8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&yk(n.remoteStore,i),a})}function M8(n,e,t,r,i){return E(this,null,function*(){n.fu=(p,m,y)=>function(k,R,j,se){return E(this,null,function*(){let J=R.view.tu(j);J.Cs&&(J=yield XM(k.localStore,R.query,!1).then(({documents:C})=>R.view.tu(C,J)));let Re=se&&se.targetChanges.get(R.targetId),Mt=se&&se.targetMismatches.get(R.targetId)!=null,Me=R.view.applyChanges(J,k.isPrimaryClient,Re,Mt);return sN(k,R.targetId,Me.ou),Me.snapshot})}(n,p,m,y);let o=yield XM(n.localStore,e,!0),s=new YI(e,o.$s),a=s.tu(o.documents),u=Hl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);sN(n,t,l.ou);let h=new ZI(e,t,s);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),l.snapshot})}function N8(n,e,t){return E(this,null,function*(){let r=he(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!eg(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield kI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bT(r.remoteStore,i.targetId),eT(r,i.targetId)}).catch(mc))):(eT(r,i.targetId),yield kI(r.localStore,i.targetId,!0))})}function k8(n,e){return E(this,null,function*(){let t=he(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bT(t.remoteStore,r.targetId))})}function P8(n,e,t){return E(this,null,function*(){let r=B8(n);try{let i=yield function(s,a){let u=he(s),l=Lt.now(),h=a.reduce((y,S)=>y.add(S.key),Ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=fi(),k=Ce();return u.Bs.getEntries(y,h).next(R=>{S=R,S.forEach((j,se)=>{se.isValidDocument()||(k=k.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let j=[];for(let se of a){let J=j5(se,p.get(se.key).overlayedDocument);J!=null&&j.push(new Rr(se.key,J,BN(J.value.mapValue),Ln.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(R=>{m=R;let j=R.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(y,R.batchId,j)})}).then(()=>({batchId:m.batchId,changes:ZN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new ot(Ee)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,t),yield nd(r,i.changes),yield ig(r.remoteStore)}catch(i){let o=AT(i,"Failed to persist write");t.reject(o)}})}function bk(n,e){return E(this,null,function*(){let t=he(n);try{let r=yield l8(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?ke(s.cu,14607):i.removedDocuments.size>0&&(ke(s.cu,42227),s.cu=!1))}),yield nd(t,r,e)}catch(r){yield mc(r)}})}function oN(n,e,t){let r=he(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=he(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.Fa(a)&&(l=!0)}),l&&MT(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O8(n,e,t){return E(this,null,function*(){let r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ot(te.comparator);s=s.insert(o,ir.newNoDocument(o,pe.min()));let a=Ce().add(o),u=new Tm(pe.min(),new Map,new ot(Ee),s,a);yield bk(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),kT(r)}else yield kI(r.localStore,e,!1).then(()=>eT(r,e,t)).catch(mc)})}function L8(n,e){return E(this,null,function*(){let t=he(n),r=e.batch.batchId;try{let i=yield u8(t.localStore,e);Dk(t,r,null),Ck(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,i)}catch(i){yield mc(i)}})}function F8(n,e,t){return E(this,null,function*(){let r=he(n);try{let i=yield function(s,a){let u=he(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ke(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Dk(r,e,t),Ck(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,i)}catch(i){yield mc(i)}})}function Ck(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function Dk(n,e,t){let r=he(n),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function eT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||Sk(n,r)})}function Sk(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(bT(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),kT(n))}function sN(n,e,t){for(let r of t)r instanceof Vm?(n.du.addReference(r.key,e),V8(n,r)):r instanceof jm?(W(NT,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||Sk(n,r.key)):oe(19791,{pu:r})}function V8(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(W(NT,"New document in limbo: "+t),n.Tu.add(r),kT(n))}function kT(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new te(Qe.fromString(e)),r=n.Vu.next();n.Eu.set(r,new JI(t)),n.Iu=n.Iu.insert(t,r),yk(n.remoteStore,new zl(Sr(Xm(t.path)),r,"TargetPurposeLimboResolution",fT.le))}}function nd(n,e,t){return E(this,null,function*(){let r=he(n),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{s.push(r.fu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=xI.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return E(this,null,function*(){let h=he(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,m=>L.forEach(m.ds,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>L.forEach(m.As,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!gc(p))throw p;W(TT,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.xs.get(m),S=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(S);h.xs=h.xs.insert(m,k)}}})}(r.localStore,o))})}function j8(n,e){return E(this,null,function*(){let t=he(n);if(!t.currentUser.isEqual(e)){W(NT,"User change. New user:",e.toKey());let r=yield mk(t.localStore,e);t.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new z(O.CANCELLED,s))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.ks)}})}function U8(n,e){let t=he(n),r=t.Eu.get(e);if(r&&r.cu)return Ce().add(r.key);{let i=Ce(),o=t.Pu.get(e);if(!o)return i;for(let s of o){let a=t.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function Ak(n){let e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O8.bind(null,e),e.lu.Y_=S8.bind(null,e.eventManager),e.lu.gu=A8.bind(null,e.eventManager),e}function B8(n){let e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F8.bind(null,e),e}var xk=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=ng(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return c8(this.persistence,new MI,t.initialUser,this.serializer)}Su(t){return new xm(AI.fi,this.serializer)}bu(t){return new PI}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),tT=class extends xk{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ke(this.persistence.referenceDelegate instanceof Rm,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new mI(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new xm(r=>Rm.fi(r,t),this.serializer)}};var $8=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j8.bind(null,this.syncEngine),yield D8(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new KI}()}createDatastore(t){let r=ng(t.databaseInfo.databaseId),i=function(s){return new jI(s)}(t.databaseInfo);return function(s,a,u,l){return new HI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new qI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>oN(this.syncEngine,r,0),function(){return Nm.C()?new Nm:new OI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new XI(o,s,a,u,l,h);return p&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(o){return E(this,null,function*(){let s=he(o);W(Ss,"RemoteStore shutting down."),s.da.add(5),yield td(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Kl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var co="FirestoreClient",nT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){W(co,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(W(co,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=AT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dw(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W(co,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield mk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function aN(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield H8(n);W(co,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nN(e.remoteStore,i)),n._onlineComponents=e})}function H8(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(co,"Using user provided OfflineComponentProvider");try{yield Dw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;tc("Error using user provided cache. Falling back to memory cache: "+t),yield Dw(n,new xk)}}else W(co,"Using default OfflineComponentProvider"),yield Dw(n,new tT(void 0));return n._offlineComponents})}function Rk(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(co,"Using user provided OnlineComponentProvider"),yield aN(n,n._uninitializedComponentsProvider._online)):(W(co,"Using default OnlineComponentProvider"),yield aN(n,new $8))),n._onlineComponents})}function z8(n){return Rk(n).then(e=>e.syncEngine)}function Um(n){return E(this,null,function*(){let e=yield Rk(n),t=e.eventManager;return t.onListen=x8.bind(null,e.syncEngine),t.onUnlisten=N8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k8.bind(null,e.syncEngine),t})}function q8(n,e,t={}){let r=new rr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new Kl({next:m=>{h.xu(),s.enqueueAndForget(()=>RT(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new z(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new z(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Wl(Xm(a.path),h,{includeMetadataChanges:!0,Qa:!0});return xT(o,p)}(yield Um(n),n.asyncQueue,e,t,r)})),r.promise}function G8(n,e,t={}){let r=new rr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new Kl({next:m=>{h.xu(),s.enqueueAndForget(()=>RT(o,p)),m.fromCache&&u.source==="server"?l.reject(new z(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Wl(a,h,{includeMetadataChanges:!0,Qa:!0});return xT(o,p)}(yield Um(n),n.asyncQueue,e,t,r)})),r.promise}function Mk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var cN=new Map;function Nk(n,e,t){if(!t)throw new z(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W8(n,e,t,r){if(e===!0&&r===!0)throw new z(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uN(n){if(!te.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lN(n){if(te.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function og(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=og(n);throw new z(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var kk="firestore.googleapis.com",dN=!0,Bm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kk,this.ssl=dN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o8)throw new z(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Aw;switch(r.type){case"firstParty":return new Nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=cN.get(t);r&&(W("ComponentProvider","Removing Datastore"),cN.delete(t),r.terminate())}(this),Promise.resolve()}};function Pk(n,e,t,r={}){var i;n=In(n,fc);let o=Yi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(kp(`https://${u}`),Pp("Firestore",!0)),s.host!==kk&&s.host!==u&&tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=xt.MOCK_USER;else{h=$R(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xt(m)}n._authCredentials=new xw(new pm(h,p))}}var uo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},en=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},io=class n extends uo{constructor(e,t,r){super(e,t,Xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ok(n,e,...t){if(n=nt(n),Nk("collection","path",e),n instanceof fc){let r=Qe.fromString(e,...t);return lN(r),new io(n,null,r)}{if(!(n instanceof en||n instanceof io))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return lN(r),new io(n.firestore,null,r)}}function PT(n,e,...t){if(n=nt(n),arguments.length===1&&(e=gm.newId()),Nk("doc","path",e),n instanceof fc){let r=Qe.fromString(e,...t);return uN(r),new en(n,null,new te(r))}{if(!(n instanceof en||n instanceof io))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return uN(r),new en(n.firestore,n instanceof io?n.converter:null,new te(r))}}var hN="AsyncQueue",$m=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new km(this,"async_queue_retry"),this.rc=()=>{let r=Cw();r&&W(hN,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=Cw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=Cw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new rr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return E(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!gc(e))throw e;W(hN,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ui("INTERNAL UNHANDLED ERROR: ",fN(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=GI.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&oe(47125,{cc:fN(this.Xu)})}verifyOperationInProgress(){}lc(){return E(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function fN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function pN(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var sr=class extends fc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,yield e}})}};function Lk(n,e){let t=typeof n=="object"?n:ds(),r=typeof n=="string"?n:e||Em,i=Ba(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=BR("firestore");o&&Pk(i,...o)}return i}function rd(n){if(n._terminated)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||K8(n),n._firestoreClient}function K8(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Fw(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Mk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new nT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Ql=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new z(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var As=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yl=class{constructor(e){this._methodName=e}};var Zl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}};var Jl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Q8=/^__.*__$/,rT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ds(e,this.data,t,this.fieldTransforms)}},Hm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Fk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ic:n})}}var iT=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return qm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Fk(this.Ic)&&Q8.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},oT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ng(e)}bc(e,t,r,i=!1){return new iT({Ic:e,methodName:t,wc:r,path:wn.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sg(n){let e=n._freezeSettings(),t=ng(n._databaseId);return new oT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vk(n,e,t,r,i,o={}){let s=n.bc(o.merge||o.mergeFields?2:0,e,t,i);OT("Data must be an object, but it was:",s,r);let a=Bk(r,s),u,l;if(o.merge)u=new On(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=sT(e,p,t);if(!s.contains(m))throw new z(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Hk(h,m)||h.push(m)}u=new On(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new rT(new En(a),u,l)}var zm=class n extends Yl{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function jk(n,e,t,r){let i=n.bc(1,e,t);OT("Data must be an object, but it was:",i,r);let o=[],s=En.empty();lo(r,(u,l)=>{let h=LT(e,u,t);l=nt(l);let p=i.mc(h);if(l instanceof zm)o.push(h);else{let m=id(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new On(o);return new Hm(s,a,i.fieldTransforms)}function Uk(n,e,t,r,i,o){let s=n.bc(1,e,t),a=[sT(e,r,t)],u=[i];if(o.length%2!=0)throw new z(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(sT(e,o[m])),u.push(o[m+1]);let l=[],h=En.empty();for(let m=a.length-1;m>=0;--m)if(!Hk(l,a[m])){let y=a[m],S=u[m];S=nt(S);let k=s.mc(y);if(S instanceof zm)l.push(y);else{let R=id(S,k);R!=null&&(l.push(y),h.set(y,R))}}let p=new On(l);return new Hm(h,p,s.fieldTransforms)}function Y8(n,e,t,r=!1){return id(t,n.bc(r?4:3,e))}function id(n,e){if($k(n=nt(n)))return OT("Unsupported field value:",e,n),Bk(n,e);if(n instanceof Yl)return function(r,i){if(!Fk(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=id(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return P5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Lt.fromDate(r);return{timestampValue:Sm(i.serializer,o)}}if(r instanceof Lt){let o=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sm(i.serializer,o)}}if(r instanceof Zl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ql)return{bytesValue:ak(i.serializer,r._byteString)};if(r instanceof en){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:IT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jl)return function(s,a){return{mapValue:{fields:{[gT]:{stringValue:yT},[rc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return wT(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${og(r)}`)}(n,e)}function Bk(n,e){let t={};return kN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,(r,i)=>{let o=id(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function $k(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof Zl||n instanceof Ql||n instanceof en||n instanceof Yl||n instanceof Jl)}function OT(n,e,t){if(!$k(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=og(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function sT(n,e,t){if((e=nt(e))instanceof As)return e._internalPath;if(typeof e=="string")return LT(n,e);throw qm("Field path arguments must be of type string or ",n,!1,void 0,t)}var Z8=new RegExp("[~\\*/\\[\\]]");function LT(n,e,t){if(e.search(Z8)>=0)throw qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new As(...e.split("."))._internalPath}catch{throw qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(O.INVALID_ARGUMENT,a+n+u)}function Hk(n,e){return n.some(t=>t.isEqual(e))}var Gm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new aT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ag("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},aT=class extends Gm{data(){return super.data()}};function ag(n,e){return typeof e=="string"?LT(n,e):e instanceof As?e._internalPath:e._delegate._internalPath}function zk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xl=class{},Wm=class extends Xl{};function qk(n,e,...t){let r=[];e instanceof Xl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof cT).length,a=o.filter(u=>u instanceof Km).length;if(s>1||s>0&&a>0)throw new z(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Km=class n extends Wm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Kk(e._query,t),new uo(e.firestore,e.converter,Yw(e._query,t))}_parse(e){let t=sg(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gN(p,h);let S=[];for(let k of p)S.push(mN(u,o,k));m={arrayValue:{values:S}}}else m=mN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gN(p,h),m=Y8(a,s,p,h==="in"||h==="not-in");return _t.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Gk(n,e,t){let r=e,i=ag("where",n);return Km._create(i,r,t)}var cT=class n extends Xl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:or.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Kk(s,u),s=Yw(s,u)}(e._query,t),new uo(e.firestore,e.converter,Yw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var uT=class n extends Wm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new z(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ts(o,s)}(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new so(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Wk(n,e="asc"){let t=e,r=ag("orderBy",n);return uT._create(r,t)}function mN(n,e,t){if(typeof(t=nt(t))=="string"){if(t==="")throw new z(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WN(e)&&t.indexOf("/")!==-1)throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Qe.fromString(t));if(!te.isDocumentKey(r))throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PM(n,new te(r))}if(t instanceof en)return PM(n,t._key);throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${og(t)}.`)}function gN(n,e){if(!Array.isArray(n)||n.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kk(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var lT=class{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return lo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[rc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new Jl(o)}convertGeoPoint(e){return new Zl(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Jm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){let t=li(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Qe.fromString(e);ke(fk(r),9688,{name:e});let i=new wm(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(t)||ui(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Qk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Es=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Qm=class extends Gm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ec=class extends Qm{data(e={}){return super.data(e)}},Ym=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Es(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ec(this._firestore,this._userDataWriter,r.key,r,new Es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ec(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ec(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:J8(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function J8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}function Yk(n){n=In(n,en);let e=In(n.firestore,sr);return q8(rd(e),n._key).then(t=>tP(e,n,t))}var ed=class extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ql(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}};function Zk(n){n=In(n,uo);let e=In(n.firestore,sr),t=rd(e),r=new ed(e);return zk(n._query),G8(t,n._query).then(i=>new Ym(e,r,n,i))}function Jk(n,e,t,...r){n=In(n,en);let i=In(n.firestore,sr),o=sg(i),s;return s=typeof(e=nt(e))=="string"||e instanceof As?Uk(o,"updateDoc",n._key,e,t,r):jk(o,"updateDoc",n._key,e),cg(i,[s.toMutation(n._key,Ln.exists(!0))])}function Xk(n){return cg(In(n.firestore,sr),[new dc(n._key,Ln.none())])}function eP(n,e){let t=In(n.firestore,sr),r=PT(n),i=Qk(n.converter,e);return cg(t,[Vk(sg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ln.exists(!1))]).then(()=>r)}function FT(n,...e){var t,r,i;n=nt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pN(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pN(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof en)l=In(n.firestore,sr),h=Xm(n._key.path),u={next:p=>{e[s]&&e[s](tP(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=In(n,uo);l=In(p.firestore,sr),h=p._query;let m=new ed(l);u={next:y=>{e[s]&&e[s](new Ym(l,m,p,y))},error:e[s+1],complete:e[s+2]},zk(n._query)}return function(m,y,S,k){let R=new Kl(k),j=new Wl(y,R,S);return m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return xT(yield Um(m),j)})),()=>{R.xu(),m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return RT(yield Um(m),j)}))}}(rd(l),h,a,u)}function cg(n,e){return function(r,i){let o=new rr;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return P8(yield z8(r),i,o)})),o.promise}(rd(n),e)}function tP(n,e,t){let r=t.docs.get(e._key),i=new ed(n);return new Qm(n,i,e._key,r,new Es(t.hasPendingWrites,t.fromCache),e.converter)}var dT=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sg(e)}set(e,t,r){this._verifyNotCommitted();let i=Sw(e,this._firestore),o=Qk(i.converter,t,r),s=Vk(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ln.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Sw(e,this._firestore),s;return s=typeof(t=nt(t))=="string"||t instanceof As?Uk(this._dataReader,"WriteBatch.update",o._key,t,r,i):jk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ln.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Sw(e,this._firestore);return this._mutations=this._mutations.concat(new dc(t._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Sw(n,e){if((n=nt(n)).firestore!==e)throw new z(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function nP(n){return rd(n=In(n,sr)),new dT(n,e=>cg(n,e))}(function(e,t=!0){(function(i){pc=i})(Ji),er(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new sr(new Rw(r.getProvider("auth-internal")),new kw(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wm(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),rt(bM,CM,e),rt(bM,CM,"esm2017")})();var ug=function(){return ug=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ug.apply(this,arguments)};var t9={includeMetadataChanges:!1};function rP(n,e){return e===void 0&&(e=t9),new ie(function(t){var r=FT(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function iP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ug(ug({},r),(t={},t[e.idField]=n.id,t))}function oP(n){return rP(n,{includeMetadataChanges:!0}).pipe(re(function(e){return e.docs}))}function sP(n,e){return e===void 0&&(e={}),oP(n).pipe(re(function(t){return t.map(function(r){return iP(r,e)})}))}var pi=class{constructor(e){return e}},aP="firestore",VT=class{constructor(){return Ha(aP)}};var jT=new H("angularfire2.firestore-instances");function n9(n,e){let t=El(aP,n,e);return t&&new pi(t)}function r9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pi(r)}}var i9={provide:VT,deps:[[new sn,jT]]},o9={provide:pi,useFactory:n9,deps:[[new sn,jT],ri]};function cP(n,...e){return rt("angularfire",Xi.full,"fst"),on([o9,i9,{provide:jT,useFactory:r9(n),multi:!0,deps:[xe,Xe,eo,fs,[new sn,Nl],[new sn,za],...e]}])}var uP=it(sP,!0);var lg=it(eP,!0,2);var dg=it(Ok,!0,2);var hg=it(Xk,!0,2);var Mr=it(PT,!0,2);var fg=it(Yk,!0);var vc=it(Zk,!0);var lP=it(Lk,!0);var UT=it(Wk,!0,2),Rs=it(qk,!0,2);var _c=it(Jk,!0,2);var Ms=it(Gk,!0,2),BT=it(nP,!0,2);var Et=class n{constructor(e){this.auth=e;this.user$=vM(this.auth)}user$;signInWithGoogle(){let e=new uw;return EM(this.auth,e)}signOut(){return wM(this.auth)}static \u0275fac=function(t){return new(t||n)(q(ys))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function a9(n,e){if(n&1&&(ga(0),N(1),ya()),n&2){let t=e.ngIf;F(),pt(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function c9(n,e){n&1&&N(0," Welcome! ")}var pg=class n{constructor(e,t){this.authService=e;this.router=t}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}showProfile(){this.router.navigate(["/profile"])}static \u0275fac=function(t){return new(t||n)(K(Et),K(qe))};static \u0275cmp=ut({type:n,selectors:[["app-home"]],decls:44,vars:4,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"]],template:function(t,r){if(t&1){let i=He();v(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),_e(4,a9,2,1,"ng-container",5),ze(5,"async"),_e(6,c9,1,0,"ng-template",null,0,X_),N(8," Explore some of my utilities, tools and research items. "),w()(),v(9,"div",6)(10,"div",7),Z("click",function(){return ae(i),ce(r.navigateToLists())}),v(11,"div",8)(12,"div",9)(13,"div",10),X(),v(14,"svg",11),G(15,"path",12),w()()(),de(),v(16,"div",13)(17,"h3",14),N(18," Todo Lists "),w(),v(19,"p",15),N(20," Create and manage your todo lists "),w()()()(),v(21,"div",7),Z("click",function(){return ae(i),ce(r.navigateToIpLookup())}),v(22,"div",8)(23,"div",9)(24,"div",16),X(),v(25,"svg",17),G(26,"path",18)(27,"path",19),w()()(),de(),v(28,"div",13)(29,"h3",20),N(30," IP Lookup "),w(),v(31,"p",15),N(32," Check your IP address and location "),w()()()(),v(33,"div",7),Z("click",function(){return ae(i),ce(r.showProfile())}),v(34,"div",8)(35,"div",9)(36,"div",21),X(),v(37,"svg",22),G(38,"path",23),w()()(),de(),v(39,"div",13)(40,"h3",24),N(41," Profile "),w(),v(42,"p",15),N(43," View your account information "),w()()()()()()()}if(t&2){let i=J_(7);F(4),Y("ngIf",Tt(5,2,r.user$))("ngIfElse",i)}},dependencies:[gt,Ot,Jr],encapsulation:2})};var mg=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(q(Ca))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function l9(n,e){n&1&&(v(0,"div",8)(1,"div",9),G(2,"div",10),v(3,"span",11),N(4,"Loading IP information..."),w()()())}function d9(n,e){if(n&1&&(v(0,"div",12)(1,"div",13),X(),v(2,"svg",14),G(3,"path",15),w(),de(),v(4,"div")(5,"h3",16),N(6,"Error"),w(),v(7,"p",17),N(8),w()()()()),n&2){let t=ee();F(8),Fe(t.error)}}function h9(n,e){n&1&&(X(),v(0,"svg",49),G(1,"path",50),w())}function f9(n,e){n&1&&(X(),v(0,"svg",51),G(1,"path",50),w())}function p9(n,e){if(n&1){let t=He();v(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),X(),v(4,"svg",22),G(5,"path",23),w()(),de(),v(6,"div")(7,"h2",24),N(8,"Your IP Address"),w(),v(9,"p",11),N(10,"Current network information"),w()()(),v(11,"div",25)(12,"div",26)(13,"div")(14,"label",27),N(15,"IP Address"),w(),v(16,"div",28)(17,"code",29),N(18),w(),v(19,"button",30),Z("click",function(){ae(t);let i=ee();return ce(i.copyToClipboard(i.ipInfo.ip))}),X(),v(20,"svg",31),G(21,"path",32),w()()()(),de(),v(22,"div")(23,"label",27),N(24,"Type"),w(),v(25,"span",33),N(26),w()()(),v(27,"div",26)(28,"div")(29,"label",27),N(30,"Continent"),w(),v(31,"p",34),N(32),w()(),v(33,"div")(34,"label",27),N(35,"Country"),w(),v(36,"p",34),N(37),w()()()()(),v(38,"div",35)(39,"div",19)(40,"h3",36),X(),v(41,"svg",37),G(42,"path",38)(43,"path",39),w(),N(44," Location Details "),w(),de(),v(45,"div",40)(46,"div",41)(47,"span",42),N(48,"Region:"),w(),v(49,"span",43),N(50),w()(),v(51,"div",41)(52,"span",42),N(53,"City:"),w(),v(54,"span",43),N(55),w()(),v(56,"div",41)(57,"span",42),N(58,"ZIP Code:"),w(),v(59,"span",43),N(60),w()(),v(61,"div",41)(62,"span",42),N(63,"Latitude:"),w(),v(64,"span",43),N(65),w()(),v(66,"div",41)(67,"span",42),N(68,"Longitude:"),w(),v(69,"span",43),N(70),w()()()(),v(71,"div",19)(72,"h3",36),X(),v(73,"svg",37),G(74,"path",44),w(),N(75," Network Information "),w(),de(),v(76,"div",40)(77,"div",41)(78,"span",42),N(79,"ISP:"),w(),v(80,"span",43),N(81),w()(),v(82,"div",41)(83,"span",42),N(84,"Organization:"),w(),v(85,"span",43),N(86),w()(),v(87,"div",41)(88,"span",42),N(89,"ASN:"),w(),v(90,"span",43),N(91),w()()()()(),v(92,"div",45)(93,"button",46),Z("click",function(){ae(t);let i=ee();return ce(i.refreshIpInfo())}),_e(94,h9,2,0,"svg",47)(95,f9,2,0,"svg",48),N(96),w()()()}if(n&2){let t=ee();F(18),Fe(t.ipInfo.ip),F(8),pt(" ",t.ipInfo.type||"Unknown"," "),F(6),Fe(t.ipInfo.continent_name||"Unknown"),F(5),Fe(t.ipInfo.country_name||"Unknown"),F(13),Fe(t.ipInfo.region_name||"Unknown"),F(5),Fe(t.ipInfo.city||"Unknown"),F(5),Fe(t.ipInfo.zip||"Unknown"),F(5),Fe(t.ipInfo.latitude||"Unknown"),F(5),Fe(t.ipInfo.longitude||"Unknown"),F(11),Fe((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),F(5),Fe((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),F(5),Fe((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown"),F(2),Y("disabled",t.isLoading),F(),Y("ngIf",!t.isLoading),F(),Y("ngIf",t.isLoading),F(),pt(" ",t.isLoading?"Refreshing...":"Refresh IP Info"," ")}}var gg=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)(K(mg))};static \u0275cmp=ut({type:n,selectors:[["app-ip-lookup"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2","sm:mb-4"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center"],[1,"btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-1.5 sm:mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-1.5 sm:mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2","animate-spin"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),N(4," IP Address Lookup "),w(),v(5,"p",4),N(6," Get detailed information about your current IP address and location "),w()(),_e(7,l9,5,0,"div",5)(8,d9,9,1,"div",6)(9,p9,97,16,"div",7),w()()),t&2&&(F(7),Y("ngIf",r.isLoading),F(),Y("ngIf",r.error),F(),Y("ngIf",r.ipInfo&&!r.isLoading))},dependencies:[gt,Ot,cs],encapsulation:2})};var _P=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(K(qr),K(fn))};static \u0275dir=ft({type:n})}return n})(),m9=(()=>{class n extends _P{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})();static \u0275dir=ft({type:n,features:[mr]})}return n})(),EP=new H("");var g9={provide:EP,useExisting:Ur(()=>po),multi:!0};function y9(){let n=Mn()?Mn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var v9=new H(""),po=(()=>{class n extends _P{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!y9())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(K(qr),K(fn),K(v9,8))};static \u0275dir=ft({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Z("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[_a([g9]),mr]})}return n})();function _9(n){return n==null||E9(n)===0}function E9(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var qT=new H(""),wP=new H("");function w9(n){return _9(n.value)?{required:!0}:null}function dP(n){return null}function IP(n){return n!=null}function TP(n){return Wr(n)?we(n):n}function bP(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function CP(n,e){return e.map(t=>t(n))}function I9(n){return!n.validate}function DP(n){return n.map(e=>I9(e)?e:t=>e.validate(t))}function T9(n){if(!n)return null;let e=n.filter(IP);return e.length==0?null:function(t){return bP(CP(t,e))}}function GT(n){return n!=null?T9(DP(n)):null}function b9(n){if(!n)return null;let e=n.filter(IP);return e.length==0?null:function(t){let r=CP(t,e).map(TP);return Dy(r).pipe(re(bP))}}function WT(n){return n!=null?b9(DP(n)):null}function hP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function C9(n){return n._rawValidators}function D9(n){return n._rawAsyncValidators}function $T(n){return n?Array.isArray(n)?n:[n]:[]}function vg(n,e){return Array.isArray(n)?n.includes(e):n===e}function fP(n,e){let t=$T(e);return $T(n).forEach(i=>{vg(t,i)||t.push(i)}),t}function pP(n,e){return $T(e).filter(t=>!vg(n,t))}var _g=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ic=class extends _g{name;get formDirective(){return null}get path(){return null}},ld=class extends _g{_parent=null;name=null;valueAccessor=null},Eg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},S9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ade=ne(V({},S9),{"[class.ng-submitted]":"isSubmitted"}),Tc=(()=>{class n extends Eg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(ld,2))};static \u0275dir=ft({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Zo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[mr]})}return n})(),bc=(()=>{class n extends Eg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(Ic,10))};static \u0275dir=ft({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Zo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[mr]})}return n})();var od="VALID",yg="INVALID",Ec="PENDING",sd="DISABLED",fo=class{},wg=class extends fo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},cd=class extends fo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ud=class extends fo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},wc=class extends fo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},HT=class extends fo{source;constructor(e){super(),this.source=e}},zT=class extends fo{source;constructor(e){super(),this.source=e}};function SP(n){return(bg(n)?n.validators:n)||null}function A9(n){return Array.isArray(n)?GT(n):n||null}function AP(n,e){return(bg(e)?e.asyncValidators:n)||null}function x9(n){return Array.isArray(n)?WT(n):n||null}function bg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function R9(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[t])throw new B(1001,"")}function M9(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new B(1002,"")})}var Ig=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return an(this.statusReactive)}set status(e){an(()=>this.statusReactive.set(e))}_status=Ea(()=>this.statusReactive());statusReactive=hr(void 0);get valid(){return this.status===od}get invalid(){return this.status===yg}get pending(){return this.status==Ec}get disabled(){return this.status===sd}get enabled(){return this.status!==sd}errors;get pristine(){return an(this.pristineReactive)}set pristine(e){an(()=>this.pristineReactive.set(e))}_pristine=Ea(()=>this.pristineReactive());pristineReactive=hr(!0);get dirty(){return!this.pristine}get touched(){return an(this.touchedReactive)}set touched(e){an(()=>this.touchedReactive.set(e))}_touched=Ea(()=>this.touchedReactive());touchedReactive=hr(!1);get untouched(){return!this.touched}_events=new st;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pP(e,this._rawAsyncValidators))}hasValidator(e){return vg(this._rawValidators,e)}hasAsyncValidator(e){return vg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ud(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ud(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new cd(!0,r))}markAsPending(e={}){this.status=Ec;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sd,this.errors=null,this._forEachChild(i=>{i.disable(ne(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wg(this.value,r)),this._events.next(new wc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=od,this._forEachChild(r=>{r.enable(ne(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===od||this.status===Ec)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wg(this.value,t)),this._events.next(new wc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sd:od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ec,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=TP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?sd:this.errors?yg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ec)?Ec:this._anyControlsHaveStatus(yg)?yg:od}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new cd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ud(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=A9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=x9(this._rawAsyncValidators)}},Tg=class extends Ig{constructor(e,t,r){super(SP(t),AP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){M9(this,!0,e),Object.keys(e).forEach(r=>{R9(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var KT=new H("",{providedIn:"root",factory:()=>QT}),QT="always";function N9(n,e){return[...e.path,n]}function xP(n,e,t=QT){RP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),P9(n,e),L9(n,e),O9(n,e),k9(n,e)}function mP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function k9(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function RP(n,e){let t=C9(n);e.validator!==null?n.setValidators(hP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=D9(n);e.asyncValidator!==null?n.setAsyncValidators(hP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();mP(e._rawValidators,i),mP(e._rawAsyncValidators,i)}function P9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MP(n,e)})}function O9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function L9(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function F9(n,e){n==null,RP(n,e)}function V9(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function j9(n){return Object.getPrototypeOf(n.constructor)===m9}function U9(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function B9(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===po?t=o:j9(o)?r=o:i=o}),i||r||t||null}var $9={provide:Ic,useExisting:Ur(()=>Ns)},ad=Promise.resolve(),Ns=(()=>{class n extends Ic{callSetDisabledState;get submitted(){return an(this.submittedReactive)}_submitted=Ea(()=>this.submittedReactive());submittedReactive=hr(!1);_directives=new Set;form;ngSubmit=new $e;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Tg({},GT(t),WT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ad.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ad.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ad.then(()=>{let r=this._findContainer(t.path),i=new Tg({});F9(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ad.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ad.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),U9(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new HT(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new zT(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(K(qT,10),K(wP,10),K(KT,8))};static \u0275dir=ft({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Z("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_a([$9]),mr]})}return n})();function gP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function yP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var H9=class extends Ig{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(SP(t),AP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(yP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){yP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var z9={provide:ld,useExisting:Ur(()=>ks)},vP=Promise.resolve(),ks=(()=>{class n extends ld{_changeDetectorRef;callSetDisabledState;control=new H9;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new $e;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=B9(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),V9(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&$i(r);vP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?N9(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(K(Ic,9),K(qT,10),K(wP,10),K(EP,10),K(Qr,8),K(KT,8))};static \u0275dir=ft({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_a([z9]),mr,xn]})}return n})();var Cc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ft({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var q9=(()=>{class n{_validator=dP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ft({type:n,features:[xn]})}return n})();var G9={provide:qT,useExisting:Ur(()=>dd),multi:!0};var dd=(()=>{class n extends q9{required;inputName="required";normalizeInput=$i;createValidator=t=>w9;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})();static \u0275dir=ft({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ma("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[_a([G9]),mr]})}return n})();var W9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Tn({})}return n})();var Dc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KT,useValue:t.callSetDisabledState??QT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Tn({imports:[W9]})}return n})();function K9(n,e){if(n&1&&(v(0,"span",26),N(1),w()),n&2){let t=ee(3);F(),va(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function Q9(n,e){if(n&1){let t=He();v(0,"form",9),Z("ngSubmit",function(){ae(t);let i=ee(2);return ce(i.saveEditList())}),v(1,"div")(2,"label",10),N(3," Title * "),w(),v(4,"input",11),Kn("ngModelChange",function(i){ae(t);let o=ee(2);return gr(o.editListTitle,i)||(o.editListTitle=i),ce(i)}),w()(),v(5,"div")(6,"label",12),N(7," Description (optional) "),w(),v(8,"textarea",13),Kn("ngModelChange",function(i){ae(t);let o=ee(2);return gr(o.editListDescription,i)||(o.editListDescription=i),ce(i)}),w()(),v(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),N(13,"Sharing"),w(),v(14,"p",17),N(15," Share this list with others "),_e(16,K9,2,2,"span",18),w()(),v(17,"button",19),Z("click",function(){ae(t);let i=ee(2);return ce(i.switchToShare())}),X(),v(18,"svg",20),G(19,"path",21),w(),de(),v(20,"span"),N(21,"Share"),w()()()(),v(22,"div",22)(23,"button",23),Z("click",function(){ae(t);let i=ee(2);return ce(i.onClose())}),N(24,"Cancel"),w(),v(25,"button",24),X(),v(26,"svg",20),G(27,"path",25),w(),de(),v(28,"span"),N(29,"Save Changes"),w()()()()}if(n&2){let t=ee(2);F(4),Wn("ngModel",t.editListTitle),F(4),Wn("ngModel",t.editListDescription),F(8),Y("ngIf",t.getSharedCount(t.list)>0),F(9),Y("disabled",!t.editListTitle.trim())}}function Y9(n,e){if(n&1){let t=He();v(0,"form",9),Z("ngSubmit",function(){ae(t);let i=ee(2);return ce(i.confirmShare())}),v(1,"div")(2,"label",27),N(3," Email Address "),w(),v(4,"input",28),Kn("ngModelChange",function(i){ae(t);let o=ee(2);return gr(o.shareEmail,i)||(o.shareEmail=i),ce(i)}),w()(),v(5,"div",22)(6,"button",23),Z("click",function(){ae(t);let i=ee(2);return ce(i.switchToEdit())}),N(7,"Back"),w(),v(8,"button",24),X(),v(9,"svg",20),G(10,"path",21),w(),de(),v(11,"span"),N(12,"Share"),w()()()()}if(n&2){let t=ee(2);F(4),Wn("ngModel",t.shareEmail),F(4),Y("disabled",!t.shareEmail.trim())}}function Z9(n,e){if(n&1){let t=He();v(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),N(4),w(),v(5,"button",5),Z("click",function(){ae(t);let i=ee();return ce(i.onClose())}),X(),v(6,"svg",6),G(7,"path",7),w()()(),_e(8,Q9,30,4,"form",8)(9,Y9,13,2,"form",8),w()()}if(n&2){let t=ee();F(4),Fe(t.mode==="edit"?"Edit List":"Share List"),F(4),Y("ngIf",t.mode==="edit"),F(),Y("ngIf",t.mode==="share")}}var Sc=class n{open=!1;list=null;mode="edit";save=new $e;share=new $e;close=new $e;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[xn],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&_e(0,Z9,10,3,"div",0),t&2&&Y("ngIf",r.open)},dependencies:[gt,Ot,Dc,Cc,po,Tc,bc,dd,ks,Ns],encapsulation:2})};var mo=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=dg(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(Ve(e=>{if(!e)return Q([]);let t=Rs(this.listsCollection,Ms("owner","==",e.uid),UT("updatedAt","desc")),r=Rs(this.listsCollection,Ms("sharedWith","array-contains",e.email),UT("updatedAt","desc"));return we(Promise.all([vc(t),vc(r)])).pipe(re(([i,o])=>{let s=i.docs.map(h=>ne(V({},h.data()),{id:h.id})),a=o.docs.map(h=>ne(V({},h.data()),{id:h.id}));return[...s,...a].filter((h,p,m)=>p===m.findIndex(y=>y.id===h.id)).sort((h,p)=>new Date(p.updatedAt).getTime()-new Date(h.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(Je(1),Ve(r=>{if(!r)return Q(Promise.reject("User not logged in"));let i=new Date,o={title:e,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return t&&t.trim()&&(o.description=t.trim()),console.log("Creating list with data:",o),we(lg(this.listsCollection,o))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=Mr(this.firestore,`todoLists/${e.id}`),o=e,{id:r}=o,i=Kc(o,["id"]);return i.updatedAt=new Date,Object.keys(i).forEach(s=>{i[s]===void 0&&delete i[s]}),console.log("Updating list with data:",i),_c(t,i)}deleteList(e){let t=Mr(this.firestore,`todoLists/${e}`);return hg(t)}shareList(e,t){return E(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let r=Mr(this.firestore,`todoLists/${e}`);try{let i=yield fg(r);if(!i.exists())throw new Error("List not found");let o=i.data();if(console.log("TodoListService: Current list data:",o),o.sharedWith&&o.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let s=[...o.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",s);let a={sharedWith:s,updatedAt:new Date};console.log("TodoListService: Updating list with data:",a),yield _c(r,a),console.log("TodoListService: List shared successfully")}catch(i){throw console.error("TodoListService: Error sharing list:",i),i}})}unshareList(e,t){return E(this,null,function*(){let r=Mr(this.firestore,`todoLists/${e}`),i=yield fg(r);if(!i.exists())throw new Error("List not found");let s=(i.data().sharedWith||[]).filter(a=>a!==t);yield _c(r,{sharedWith:s,updatedAt:new Date})})}hasAccess(e){return E(this,null,function*(){return Cy(this.authService.user$.pipe(Je(1),Ve(t=>t?we(fg(Mr(this.firestore,`todoLists/${e}`))).pipe(re(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):Q(!1))))})}static \u0275fac=function(t){return new(t||n)(q(pi),q(Et))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cg=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=dg(this.firestore,"todos")}firestore=P(pi);todosCollection;getTodosForList(e){return this.authService.user$.pipe(Ve(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),Q([]);console.log("TodoService: Creating query for todos in list:",e);let r=Rs(this.todosCollection,Ms("listId","==",e));return console.log("TodoService: Executing todos query"),uP(r,{idField:"id"}).pipe(re(i=>i),Un(i=>(console.error("TodoService: Error loading todos:",i),Q([]))))}))}addTodo(e,t){return this.authService.user$.pipe(Je(1),Ve(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),we(vc(Rs(this.todosCollection,Ms("listId","==",e)))).pipe(Ve(i=>{let o=i.size,s=new Date,a={title:t,completed:!1,listId:e,position:o,createdBy:r.uid,createdAt:s,updatedAt:s};return console.log("Creating todo with data:",a),we(lg(this.todosCollection,a))}))):(console.error("User not logged in"),Q(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=Mr(this.firestore,`todos/${e.id}`),o=e,{id:r}=o,i=Kc(o,["id"]);return i.updatedAt=new Date,_c(t,i)}deleteTodo(e){let t=Mr(this.firestore,`todos/${e}`);return hg(t)}updateTodoPosition(e){let t=BT(this.firestore);return e.forEach((r,i)=>{if(r.id){let o=Mr(this.firestore,`todos/${r.id}`);t.update(o,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return we(vc(Rs(this.todosCollection,Ms("listId","==",e)))).pipe(Ve(t=>{let r=BT(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),we(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(q(Et),q(mo))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function X9(n,e){n&1&&(v(0,"div",20)(1,"div",21),G(2,"div",22),v(3,"span",9),N(4,"Loading todo list..."),w()()())}function ez(n,e){if(n&1&&(v(0,"div",23)(1,"div",24),X(),v(2,"svg",25),G(3,"path",26),w(),de(),v(4,"div")(5,"h3",27),N(6,"Error"),w(),v(7,"p",28),N(8),w()()()()),n&2){let t=ee();F(8),Fe(t.error)}}function tz(n,e){n&1&&(X(),v(0,"svg",48),G(1,"path",49),w())}function nz(n,e){n&1&&(X(),v(0,"svg",50),G(1,"path",51),w())}function rz(n,e){n&1&&(v(0,"div",52),X(),v(1,"svg",53),G(2,"path",54),w(),de(),v(3,"h3",55),N(4,"No todos yet"),w(),v(5,"p",56),N(6,"Add your first todo item above to get started."),w()())}function iz(n,e){if(n&1){let t=He();v(0,"div",59)(1,"input",60),Z("change",function(){let i=ae(t).$implicit,o=ee(3);return ce(o.toggleTodo(i))}),w(),v(2,"div",3)(3,"input",61),Z("blur",function(i){let o=ae(t).$implicit,s=ee(3);return ce(s.updateTodoText(o,i))}),w()(),v(4,"button",62),Z("click",function(){let i=ae(t).$implicit,o=ee(3);return ce(o.deleteTodo(i))}),X(),v(5,"svg",12),G(6,"path",63),w()()()}if(n&2){let t=e.$implicit;F(),Y("checked",t.completed),F(2),Zo("line-through",t.completed)("text-gray-500",t.completed),Y("value",t.title)}}function oz(n,e){if(n&1&&(v(0,"div",57),_e(1,iz,7,6,"div",58),w()),n&2){let t=ee(2);F(),Y("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function sz(n,e){if(n&1){let t=He();v(0,"div",29)(1,"div",30)(2,"form",31),Z("ngSubmit",function(){ae(t);let i=ee();return ce(i.addTodo())}),v(3,"input",32),Kn("ngModelChange",function(i){ae(t);let o=ee();return gr(o.newTodoText,i)||(o.newTodoText=i),ce(i)}),w(),v(4,"button",33),_e(5,tz,2,0,"svg",34)(6,nz,2,0,"svg",35),v(7,"span"),N(8),w()()()(),v(9,"div",30)(10,"div",36)(11,"h2",37),N(12,"Todo Items"),w(),v(13,"div",38)(14,"span"),N(15),w(),v(16,"div",39),G(17,"div",40),w()()(),_e(18,rz,7,0,"div",41)(19,oz,2,2,"div",42),w(),v(20,"div",30)(21,"h3",43),N(22,"List Information"),w(),v(23,"div",44)(24,"div",45)(25,"span",46),N(26,"Created:"),w(),v(27,"span",47),N(28),ze(29,"date"),w()(),v(30,"div",45)(31,"span",46),N(32,"Last Updated:"),w(),v(33,"span",47),N(34),ze(35,"date"),w()(),v(36,"div",45)(37,"span",46),N(38,"Owner:"),w(),v(39,"span",47),N(40),w()(),v(41,"div",45)(42,"span",46),N(43,"Shared With:"),w(),v(44,"span",47),N(45),w()()()()()}if(n&2){let t=ee();F(3),Wn("ngModel",t.newTodoText),Y("disabled",t.isAdding),F(),Y("disabled",!t.newTodoText.trim()||t.isAdding),F(),Y("ngIf",!t.isAdding),F(),Y("ngIf",t.isAdding),F(2),Fe(t.isAdding?"Adding...":"Add"),F(7),va("",t.completedCount," of ",t.todos.length||0," completed"),F(2),Mf("width",t.completionPercentage,"%"),F(),Y("ngIf",!t.todos.length),F(),Y("ngIf",t.todos.length>0),F(9),Fe(Bi(29,16,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),F(6),Fe(Bi(35,19,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),F(6),Fe(t.ownerName||"Loading..."),F(5),pt("",t.todoList.sharedWith.length||0," users")}}var Dg=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.todoListService=r;this.todoService=i;this.authService=o}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(Je(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:r=>{if(console.log("All lists loaded:",r),this.todoList=r.find(i=>i.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(i=>{if(console.log("User has access to list:",i),!i){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:o=>{console.log("Todos loaded successfully:",o),this.todos=o,this.isLoading=!1},error:o=>{console.error("Error loading todos:",o),console.error("Error details:",{code:o.code,message:o.message,details:o.details});let s="Failed to load todos. ";o.code==="permission-denied"?s+="You may not have permission to view todos in this list.":o.code==="unauthenticated"?s+="Please log in to view todos.":s+="Please try again later.",this.error=s,this.isLoading=!1}})}).catch(i=>{console.error("Error checking access:",i),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:r=>{console.error("Error loading todo list:",r),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(ne(V({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let r=t.target.value.trim();!e.id||!r||r===e.title||this.todoService.updateTodo(ne(V({},e),{title:r})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let r=ne(V({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.todoList=r,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(Je(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)(K(kn),K(qe),K(mo),K(Cg),K(Et))};static \u0275cmp=ut({type:n,selectors:[["app-todo"]],decls:27,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","sm:space-x-4","mb-1","sm:mb-2"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","mt-3","sm:mt-0"],[1,"btn-secondary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-1.5","sm:space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),Z("click",function(){return r.goBack()}),X(),v(6,"svg",6),G(7,"path",7),w()(),de(),v(8,"h1",8),N(9),w()(),v(10,"p",9),N(11),w()(),v(12,"div",10)(13,"button",11),Z("click",function(){return r.editList()}),X(),v(14,"svg",12),G(15,"path",13),w(),de(),v(16,"span"),N(17,"Edit List"),w()(),v(18,"button",14),Z("click",function(){return r.shareList()}),X(),v(19,"svg",12),G(20,"path",15),w(),de(),v(21,"span"),N(22,"Share"),w()()()(),_e(23,X9,5,0,"div",16)(24,ez,9,1,"div",17)(25,sz,46,22,"div",18),v(26,"app-list-edit-share-modal",19),Z("save",function(o){return r.handleSaveEdit(o)})("share",function(o){return r.handleShare(o)})("close",function(){return r.closeModal()}),w()()()),t&2&&(F(9),Fe((r.todoList==null?null:r.todoList.title)||"Loading..."),F(2),Fe((r.todoList==null?null:r.todoList.description)||"No description"),F(12),Y("ngIf",r.isLoading),F(),Y("ngIf",r.error),F(),Y("ngIf",r.todoList&&!r.isLoading),F(),Y("open",r.showEditShareModal)("list",r.todoList)("mode",r.modalMode))},dependencies:[gt,wa,Ot,Xo,Dc,Cc,po,Tc,bc,ks,Ns,Sc],encapsulation:2})};var Sg=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(K(Et),K(qe))};static \u0275cmp=ut({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h2"),N(2,"Sign in to Todo List"),w(),v(3,"p"),N(4,"Please sign in to access your personal todo list"),w(),v(5,"button",1),Z("click",function(){return r.login()}),G(6,"img",2),N(7," Sign in with Google "),w()())},dependencies:[gt],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function az(n,e){n&1&&(v(0,"div",12)(1,"div",13),G(2,"div",14),v(3,"span",15),N(4,"Loading your lists..."),w()()())}function cz(n,e){if(n&1){let t=He();v(0,"div",12)(1,"div",16),X(),v(2,"svg",17),G(3,"path",18),w(),de(),v(4,"h3",19),N(5,"No lists yet"),w(),v(6,"p",4),N(7,"Get started by creating your first todo list."),w(),v(8,"button",20),Z("click",function(){ae(t);let i=ee();return ce(i.openCreateModal())}),X(),v(9,"svg",6),G(10,"path",7),w(),de(),v(11,"span"),N(12,"Create First List"),w()()()()}}function uz(n,e){if(n&1&&(v(0,"span",44),X(),v(1,"svg",39),G(2,"path",31),w(),N(3),w()),n&2){let t=ee().$implicit;F(3),pt(" ",t.sharedWith.length," shared ")}}function lz(n,e){if(n&1){let t=He();v(0,"div",23),Z("click",function(){let i=ae(t).$implicit,o=ee(2);return ce(o.openList(i))}),v(1,"div",24)(2,"div",25)(3,"h3",26),N(4),w(),v(5,"p",27),N(6),w()(),v(7,"div",28)(8,"button",29),Z("click",function(i){let o=ae(t).$implicit;return ee(2).openShareModal(o),ce(i.stopPropagation())}),X(),v(9,"svg",30),G(10,"path",31),w()(),de(),v(11,"button",32),Z("click",function(){let i=ae(t).$implicit,o=ee(2);return ce(o.openEditModal(i))}),X(),v(12,"svg",30),G(13,"path",33),w()(),de(),v(14,"button",34),Z("click",function(i){let o=ae(t).$implicit,s=ee(2);return ce(s.deleteList(o,i))}),X(),v(15,"svg",30),G(16,"path",35),w()()()(),de(),v(17,"div",36)(18,"div",37)(19,"span",38),X(),v(20,"svg",39),G(21,"path",18),w(),N(22," View items "),w(),de(),v(23,"span",38),X(),v(24,"svg",39),G(25,"path",40),w(),N(26),ze(27,"date"),w(),_e(28,uz,4,1,"span",41),w(),v(29,"svg",42),G(30,"path",43),w()()()}if(n&2){let t=e.$implicit,r=ee(2);F(4),pt(" ",t.title," "),F(2),pt(" ",t.description||"No description"," "),F(20),pt(" ",Bi(27,4,r.getDateFromTimestamp(t.updatedAt),"short")," "),F(2),Y("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function dz(n,e){if(n&1&&(v(0,"div",21),_e(1,lz,31,7,"div",22),w()),n&2){let t=ee();F(),Y("ngForOf",t.todoLists)}}function hz(n,e){if(n&1){let t=He();v(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),N(4,"Create New List"),w(),v(5,"button",49),Z("click",function(){ae(t);let i=ee();return ce(i.closeCreateModal())}),X(),v(6,"svg",50),G(7,"path",51),w()()(),de(),v(8,"form",52),Z("ngSubmit",function(){ae(t);let i=ee();return ce(i.createNewList())}),v(9,"div")(10,"label",53),N(11," Title * "),w(),v(12,"input",54),Kn("ngModelChange",function(i){ae(t);let o=ee();return gr(o.newListTitle,i)||(o.newListTitle=i),ce(i)}),w()(),v(13,"div")(14,"label",55),N(15," Description (optional) "),w(),v(16,"textarea",56),Kn("ngModelChange",function(i){ae(t);let o=ee();return gr(o.newListDescription,i)||(o.newListDescription=i),ce(i)}),w()(),v(17,"div",57)(18,"button",58),Z("click",function(){ae(t);let i=ee();return ce(i.closeCreateModal())}),N(19," Cancel "),w(),v(20,"button",59),X(),v(21,"svg",6),G(22,"path",7),w(),de(),v(23,"span"),N(24,"Create List"),w()()()()()()}if(n&2){let t=ee();F(12),Wn("ngModel",t.newListTitle),F(4),Wn("ngModel",t.newListDescription),F(4),Y("disabled",!t.newListTitle.trim())}}var Ag=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(Je(1)).subscribe(r=>{if(console.log("Current user:",r),!r){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:r=>{console.log("List created successfully:",r),this.todoLists.unshift(r),this.closeCreateModal()},error:r=>{console.error("Error creating list:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details});let i="Failed to create list. ";r.code==="permission-denied"?i+="You may not have permission to create lists. Please try logging out and back in.":r.code==="unauthenticated"?i+="Please log in to create lists.":i+="Please try again later.",alert(i)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let r=ne(V({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(r=>r.id!==e.id)}).catch(r=>{console.error("Error deleting list:",r)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)(K(mo),K(Et),K(qe))};static \u0275cmp=ut({type:n,selectors:[["app-lists"]],decls:18,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),N(5,"Todo Lists"),w(),v(6,"p",4),N(7,"Create and manage your todo lists"),w()(),v(8,"button",5),Z("click",function(){return r.openCreateModal()}),X(),v(9,"svg",6),G(10,"path",7),w(),de(),v(11,"span"),N(12,"New List"),w()()(),_e(13,az,5,0,"div",8)(14,cz,13,0,"div",8)(15,dz,2,1,"div",9),w(),_e(16,hz,25,3,"div",10),v(17,"app-list-edit-share-modal",11),Z("save",function(o){return r.handleSaveEdit(o)})("share",function(o){return r.handleShare(o)})("close",function(){return r.closeModal()}),w()()),t&2&&(F(13),Y("ngIf",r.isLoading),F(),Y("ngIf",!r.isLoading&&r.todoLists.length===0),F(),Y("ngIf",!r.isLoading&&r.todoLists.length>0),F(),Y("ngIf",r.showCreateModal),F(),Y("open",r.showEditShareModal)("list",r.modalList)("mode",r.modalMode))},dependencies:[gt,wa,Ot,Xo,Dc,Cc,po,Tc,bc,dd,ks,Ns,cs,Sc],encapsulation:2})};function fz(n,e){if(n&1&&(ga(0),v(1,"div",14)(2,"div")(3,"label",15),N(4,"Display Name"),w(),v(5,"div",16),N(6),w()(),v(7,"div")(8,"label",15),N(9,"Email"),w(),v(10,"div",16),N(11),w()(),v(12,"div")(13,"label",15),N(14,"User ID"),w(),v(15,"div",17),N(16),w()(),v(17,"div")(18,"label",15),N(19,"Account Created"),w(),v(20,"div",16),N(21),ze(22,"date"),w()()(),ya()),n&2){let t=e.ngIf;F(6),pt(" ",(t==null?null:t.displayName)||"Not provided"," "),F(5),pt(" ",(t==null?null:t.email)||"Not provided"," "),F(5),pt(" ",(t==null?null:t.uid)||"Not available"," "),F(5),pt(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Bi(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}var xg=class n{authService=P(Et);router=P(qe);user$=this.authService.user$;logout(){this.authService.signOut(),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6","sm:mb-8"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-secondary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),N(4,"Profile"),w(),v(5,"p",4),N(6,"Manage your account information"),w()(),v(7,"div",5)(8,"div",6)(9,"div",2)(10,"h2",7),N(11,"Account Information"),w(),_e(12,fz,23,7,"ng-container",8),ze(13,"async"),w(),v(14,"div",9)(15,"h3",10),N(16,"Account Actions"),w(),v(17,"div",11)(18,"button",12),Z("click",function(){return r.logout()}),N(19," Sign Out "),w(),v(20,"button",13),Z("click",function(){return r.goBack()}),N(21," Back to Home "),w()()()()()()()),t&2&&(F(12),Y("ngIf",Tt(13,1,r.user$)))},dependencies:[gt,Ot,Jr,Xo],encapsulation:2})};var Ac=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Je(1),re(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(q(Et),q(qe))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var NP=[{path:"",component:pg},{path:"ip-lookup",component:gg},{path:"login",component:Sg},{path:"profile",component:xg,canActivate:[Ac]},{path:"lists",component:Ag,canActivate:[Ac]},{path:"todo/:id",component:Dg,canActivate:[Ac]},{path:"todo",redirectTo:"/lists",pathMatch:"full"}];var kP={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var PP={providers:[n0({eventCoalescing:!0}),oE(NP),R0(),m1(()=>g1(kP.firebaseConfig)),cP(()=>lP()),yM(()=>_M())]};var Rg=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new at(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){Sy(this.checkInterval).pipe(Ve(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new ie(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(q(Ca))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function mz(n,e){if(n&1){let t=He();v(0,"div",1)(1,"div",2)(2,"div",3),N(3,"\u{1F504}"),w(),v(4,"div",4)(5,"h4"),N(6,"New version available!"),w(),v(7,"p"),N(8,"A new version of the app is ready. Refresh to get the latest features."),w()(),v(9,"div",5)(10,"button",6),Z("click",function(){ae(t);let i=ee();return ce(i.update())}),N(11,"Update Now"),w(),v(12,"button",7),Z("click",function(){ae(t);let i=ee();return ce(i.dismiss())}),N(13,"Later"),w()()()()}}var Mg=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(K(Rg))};static \u0275cmp=ut({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(_e(0,mz,14,0,"div",0),ze(1,"async")),t&2&&Y("ngIf",Tt(1,1,r.updateAvailable$))},dependencies:[gt,Ot,Jr],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Ng=class n{themeSubject=new at("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");this.setTheme(r)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var OP=()=>({exact:!0});function yz(n,e){n&1&&(v(0,"a",22),X(),v(1,"svg",7),G(2,"path",23),w(),de(),v(3,"span"),N(4,"Profile"),w()())}function vz(n,e){n&1&&(X(),v(0,"svg",24),G(1,"path",25),w())}function _z(n,e){n&1&&(X(),v(0,"svg",24),G(1,"path",26),w())}function Ez(n,e){if(n&1){let t=He();v(0,"button",27),Z("click",function(){ae(t);let i=ee();return ce(i.login())}),X(),v(1,"svg",7),G(2,"path",28),w(),de(),v(3,"span"),N(4,"Login"),w()()}}function wz(n,e){if(n&1){let t=He();v(0,"button",29),Z("click",function(){ae(t);let i=ee();return ce(i.logout())}),X(),v(1,"svg",7),G(2,"path",30),w(),de(),v(3,"span"),N(4,"Sign Out"),w()()}}function Iz(n,e){n&1&&(X(),v(0,"svg",31),G(1,"path",32),w())}function Tz(n,e){n&1&&(X(),v(0,"svg",31),G(1,"path",33),w())}function bz(n,e){if(n&1){let t=He();v(0,"a",44),Z("click",function(){ae(t);let i=ee(2);return ce(i.closeMobileMenu())}),X(),v(1,"svg",7),G(2,"path",23),w(),de(),v(3,"span"),N(4,"Profile"),w()()}}function Cz(n,e){n&1&&(X(),v(0,"svg",45),G(1,"path",25),w())}function Dz(n,e){n&1&&(X(),v(0,"svg",45),G(1,"path",26),w())}function Sz(n,e){if(n&1){let t=He();v(0,"button",46),Z("click",function(){ae(t);let i=ee(2);return i.login(),ce(i.closeMobileMenu())}),X(),v(1,"svg",7),G(2,"path",28),w(),de(),v(3,"span"),N(4,"Login"),w()()}}function Az(n,e){if(n&1){let t=He();v(0,"button",47),Z("click",function(){ae(t);let i=ee(2);return i.logout(),ce(i.closeMobileMenu())}),X(),v(1,"svg",7),G(2,"path",30),w(),de(),v(3,"span"),N(4,"Sign Out"),w()()}}function xz(n,e){if(n&1){let t=He();v(0,"div",34)(1,"nav",35)(2,"a",36),Z("click",function(){ae(t);let i=ee();return ce(i.closeMobileMenu())}),X(),v(3,"svg",7),G(4,"path",8),w(),de(),v(5,"span"),N(6,"Home"),w()(),v(7,"a",37),Z("click",function(){ae(t);let i=ee();return ce(i.closeMobileMenu())}),X(),v(8,"svg",7),G(9,"path",10),w(),de(),v(10,"span"),N(11,"Lists"),w()(),v(12,"a",38),Z("click",function(){ae(t);let i=ee();return ce(i.closeMobileMenu())}),X(),v(13,"svg",7),G(14,"path",12),w(),de(),v(15,"span"),N(16,"IP Lookup"),w()(),_e(17,bz,5,0,"a",39),ze(18,"async"),v(19,"button",40),Z("click",function(){ae(t);let i=ee();return ce(i.toggleTheme())}),_e(20,Cz,2,0,"svg",41),ze(21,"async"),_e(22,Dz,2,0,"svg",41),ze(23,"async"),v(24,"span"),N(25),ze(26,"async"),w()(),_e(27,Sz,5,0,"button",42),ze(28,"async"),_e(29,Az,5,0,"button",43),ze(30,"async"),w()()}if(n&2){let t=ee();F(2),Y("routerLinkActiveOptions",Nf(19,OP)),F(15),Y("ngIf",Tt(18,7,t.user$)),F(3),Y("ngIf",Tt(21,9,t.theme$)==="light"),F(2),Y("ngIf",Tt(23,11,t.theme$)==="dark"),F(3),Fe(Tt(26,13,t.theme$)==="light"?"Dark Mode":"Light Mode"),F(2),Y("ngIf",!Tt(28,15,t.user$)),F(2),Y("ngIf",Tt(30,17,t.user$))}}var kg=class n{constructor(e,t,r){this.authService=e;this.themeService=t;this.router=r}isMobileMenuOpen=!1;get user$(){return this.authService.user$}get theme$(){return this.themeService.theme$}logout(){this.authService.signOut(),this.router.navigate(["/"])}login(){this.authService.signInWithGoogle()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}static \u0275fac=function(t){return new(t||n)(K(Et),K(Ng),K(qe))};static \u0275cmp=ut({type:n,selectors:[["app-root"]],decls:40,vars:20,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/lists","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/profile","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/profile","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,r){t&1&&(v(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),N(5," Manu's Playground "),w()(),v(6,"nav",5)(7,"a",6),X(),v(8,"svg",7),G(9,"path",8),w(),de(),v(10,"span"),N(11,"Home"),w()(),v(12,"a",9),X(),v(13,"svg",7),G(14,"path",10),w(),de(),v(15,"span"),N(16,"Lists"),w()(),v(17,"a",11),X(),v(18,"svg",7),G(19,"path",12),w(),de(),v(20,"span"),N(21,"IP Lookup"),w()(),_e(22,yz,5,0,"a",13),ze(23,"async"),v(24,"button",14),Z("click",function(){return r.toggleTheme()}),_e(25,vz,2,0,"svg",15),ze(26,"async"),_e(27,_z,2,0,"svg",15),ze(28,"async"),w(),_e(29,Ez,5,0,"button",16),ze(30,"async"),_e(31,wz,5,0,"button",17),ze(32,"async"),w(),v(33,"button",18),Z("click",function(){return r.toggleMobileMenu()}),_e(34,Iz,2,0,"svg",19)(35,Tz,2,0,"svg",19),w()(),_e(36,xz,31,20,"div",20),w()(),v(37,"main",21),G(38,"router-outlet"),w(),G(39,"app-update-notification")),t&2&&(F(7),Y("routerLinkActiveOptions",Nf(19,OP)),F(15),Y("ngIf",Tt(23,9,r.user$)),F(3),Y("ngIf",Tt(26,11,r.theme$)==="light"),F(2),Y("ngIf",Tt(28,13,r.theme$)==="dark"),F(2),Y("ngIf",!Tt(30,15,r.user$)),F(2),Y("ngIf",Tt(32,17,r.user$)),F(3),Y("ngIf",!r.isMobileMenuOpen),F(),Y("ngIf",r.isMobileMenuOpen),F(),Y("ngIf",r.isMobileMenuOpen))},dependencies:[gt,Ot,Jr,ll,cs,Va,iE,Mg],encapsulation:2})};S0(kg,PP).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
