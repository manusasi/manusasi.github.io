var TF=Object.defineProperty,CF=Object.defineProperties;var SF=Object.getOwnPropertyDescriptors;var Pd=Object.getOwnPropertySymbols,AF=Object.getPrototypeOf,IC=Object.prototype.hasOwnProperty,DC=Object.prototype.propertyIsEnumerable,RF=Reflect.get;var wC=(n,e,t)=>e in n?TF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})IC.call(e,t)&&wC(n,t,e[t]);if(Pd)for(var t of Pd(e))DC.call(e,t)&&wC(n,t,e[t]);return n},ee=(n,e)=>CF(n,SF(e));var jc=(n,e)=>{var t={};for(var r in n)IC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Pd)for(var r of Pd(n))e.indexOf(r)<0&&DC.call(n,r)&&(t[r]=n[r]);return t};var Ri=(n,e,t)=>RF(AF(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var vv;function yv(){return vv}function Qr(n){let e=vv;return vv=n,e}var PF=Symbol("NotFound"),xd=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Bs(n){return n===PF||n?.name==="\u0275NotFound"}function Fd(n,e){return Object.is(n,e)}var ht=null,Nd=!1,_v=1,xF=null,Mt=Symbol("SIGNAL");function de(n){let e=ht;return ht=n,e}function Ld(){return ht}var So={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $s(n){if(Nd)throw new Error("");if(ht===null)return;ht.consumerOnSignalRead(n);let e=ht.nextProducerIndex++;if(Bd(ht),e<ht.producerNode.length&&ht.producerNode[e]!==n&&Bc(ht)){let t=ht.producerNode[e];Ud(t,ht.producerIndexOfThis[e])}ht.producerNode[e]!==n&&(ht.producerNode[e]=n,ht.producerIndexOfThis[e]=Bc(ht)?TC(n,ht,e):0),ht.producerLastReadVersion[e]=n.version}function bC(){_v++}function Vd(n){if(!(Bc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===_v)){if(!n.producerMustRecompute(n)&&!$c(n)){Od(n);return}n.producerRecomputeValue(n),Od(n)}}function Ev(n){if(n.liveConsumerNode===void 0)return;let e=Nd;Nd=!0;try{for(let t of n.liveConsumerNode)t.dirty||NF(t)}finally{Nd=e}}function wv(){return ht?.consumerAllowSignalWrites!==!1}function NF(n){n.dirty=!0,Ev(n),n.consumerMarkedDirty?.(n)}function Od(n){n.dirty=!1,n.lastCleanEpoch=_v}function Ao(n){return n&&(n.nextProducerIndex=0),de(n)}function Hs(n,e){if(de(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Bc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ud(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $c(n){Bd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Vd(t),r!==t.version))return!0}return!1}function jd(n){if(Bd(n),Bc(n))for(let e=0;e<n.producerNode.length;e++)Ud(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function TC(n,e,t){if(CC(n),n.liveConsumerNode.length===0&&SC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=TC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ud(n,e){if(CC(n),n.liveConsumerNode.length===1&&SC(n))for(let r=0;r<n.producerNode.length;r++)Ud(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bd(i),i.producerIndexOfThis[r]=e}}function Bc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function CC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function SC(n){return n.producerNode!==void 0}function $d(n){xF?.(n)}function Hd(n,e){let t=Object.create(MF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Vd(t),$s(t),t.value===Uc)throw t.error;return t.value};return r[Mt]=t,$d(t),r}var Md=Symbol("UNSET"),kd=Symbol("COMPUTING"),Uc=Symbol("ERRORED"),MF=ee(F({},So),{value:Md,dirty:!0,error:null,equal:Fd,kind:"computed",producerMustRecompute(n){return n.value===Md||n.value===kd},producerRecomputeValue(n){if(n.value===kd)throw new Error("");let e=n.value;n.value=kd;let t=Ao(n),r,i=!1;try{r=n.computation(),de(null),i=e!==Md&&e!==Uc&&r!==Uc&&n.equal(e,r)}catch(o){r=Uc,n.error=o}finally{Hs(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function kF(){throw new Error}var AC=kF;function RC(n){AC(n)}function Iv(n){AC=n}var OF=null;function Dv(n,e){let t=Object.create(zd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>PC(t);return r[Mt]=t,$d(t),[r,s=>zs(t,s),s=>bv(t,s)]}function PC(n){return $s(n),n.value}function zs(n,e){wv()||RC(n),n.equal(n.value,e)||(n.value=e,FF(n))}function bv(n,e){wv()||RC(n),zs(n,e(n.value))}var zd=ee(F({},So),{equal:Fd,value:void 0,kind:"signal"});function FF(n){n.version++,bC(),Ev(n),OF?.(n)}function se(n){return typeof n=="function"}function qs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var qd=qs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ro(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof qd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{xC(o)}catch(s){e=e??[],s instanceof qd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ro(t,e)}remove(e){let{_finalizers:t}=this;t&&Ro(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var Tv=Pe.EMPTY;function Gd(n){return n instanceof Pe||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function xC(n){se(n)?n():n.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gs={setTimeout(n,e,...t){let{delegate:r}=Gs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wd(n){Gs.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(n);else throw n})}function Hc(){}var NC=Cv("C",void 0,void 0);function MC(n){return Cv("E",void 0,n)}function kC(n){return Cv("N",n,void 0)}function Cv(n,e,t){return{kind:n,value:e,error:t}}var Po=null;function Ws(n){if($n.useDeprecatedSynchronousErrorHandling){let e=!Po;if(e&&(Po={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Po;if(Po=null,t)throw r}}else n()}function OC(n){$n.useDeprecatedSynchronousErrorHandling&&Po&&(Po.errorThrown=!0,Po.error=n)}var xo=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gd(e)&&e.add(this)):this.destination=jF}static create(e,t,r){return new Pi(e,t,r)}next(e){this.isStopped?Av(kC(e),this):this._next(e)}error(e){this.isStopped?Av(MC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Av(NC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},LF=Function.prototype.bind;function Sv(n,e){return LF.call(n,e)}var Rv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Kd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Kd(r)}else Kd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Kd(t)}}},Pi=class extends xo{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sv(e.next,o),error:e.error&&Sv(e.error,o),complete:e.complete&&Sv(e.complete,o)}):i=e}this.destination=new Rv(i)}};function Kd(n){$n.useDeprecatedSynchronousErrorHandling?OC(n):Wd(n)}function VF(n){throw n}function Av(n,e){let{onStoppedNotification:t}=$n;t&&Gs.setTimeout(()=>t(n,e))}var jF={closed:!0,next:Hc,error:VF,complete:Hc};var Ks=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dn(n){return n}function Qd(...n){return Pv(n)}function Pv(n){return n.length===0?dn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Q=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=BF(t)?t:new Pi(t,r,i);return Ws(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=FC(r),new r((i,o)=>{let s=new Pi({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ks](){return this}pipe(...t){return Pv(t)(this)}toPromise(t){return t=FC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function FC(n){var e;return(e=n??$n.Promise)!==null&&e!==void 0?e:Promise}function UF(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function BF(n){return n&&n instanceof xo||UF(n)&&Gd(n)}function xv(n){return se(n?.lift)}function _e(n){return e=>{if(xv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Nv(n,e,t,r,i)}var Nv=class extends xo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qs(){return _e((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ys=class extends Q{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Qs()(this)}};var Zs={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Zs;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new Pe(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Zs;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Zs;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var LC=qs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=(()=>{class n extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Yd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new LC}next(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tv:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,Ro(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Q;return t.source=this,t}}return n.create=(e,t)=>new Yd(e,t),n})(),Yd=class extends ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Tv}};var et=class extends ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mv={now(){return(Mv.delegate||Date).now()},delegate:void 0};var Zd=class extends Pe{constructor(e,t){super()}schedule(e,t=0){return this}};var zc={setInterval(n,e,...t){let{delegate:r}=zc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=zc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var xi=class extends Zd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&zc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ro(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Js=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Js.now=Mv.now;var Ni=class extends Js{constructor(e,t=Js.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Mi=new Ni(xi),kv=Mi;var Jd=class extends xi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Xd=class extends Ni{};var Ov=new Xd(Jd);var eh=class extends xi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Zs.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(Zs.cancelAnimationFrame(t),e._scheduled=void 0)}};var th=class extends Ni{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var nh=new th(eh);var kt=new Q(n=>n.complete());function rh(n){return n&&se(n.schedule)}function Fv(n){return n[n.length-1]}function ih(n){return se(Fv(n))?n.pop():void 0}function dr(n){return rh(Fv(n))?n.pop():void 0}function VC(n,e){return typeof Fv(n)=="number"?n.pop():e}function oh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function UC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function l(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function jC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(n){return this instanceof No?(this.v=n,this):new No(n)}function BC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(b){return Promise.resolve(b).then(v,p)}}function a(v,b){r[v]&&(i[v]=function(x){return new Promise(function(R,V){o.push([v,x,R,V])>1||l(v,x)})},b&&(i[v]=b(i[v])))}function l(v,b){try{u(r[v](b))}catch(x){g(o[0][3],x)}}function u(v){v.value instanceof No?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){l("next",v)}function p(v){l("throw",v)}function g(v,b){v(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function $C(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jC=="function"?jC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var sh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ah(n){return se(n?.then)}function ch(n){return se(n[Ks])}function lh(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function uh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $F(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dh=$F();function hh(n){return se(n?.[dh])}function fh(n){return BC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield No(t.read());if(i)return yield No(void 0);yield yield No(r)}}finally{t.releaseLock()}})}function ph(n){return se(n?.getReader)}function ze(n){if(n instanceof Q)return n;if(n!=null){if(ch(n))return HF(n);if(sh(n))return zF(n);if(ah(n))return qF(n);if(lh(n))return HC(n);if(hh(n))return GF(n);if(ph(n))return WF(n)}throw uh(n)}function HF(n){return new Q(e=>{let t=n[Ks]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zF(n){return new Q(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function qF(n){return new Q(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Wd)})}function GF(n){return new Q(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function HC(n){return new Q(e=>{KF(n,e).catch(t=>e.error(t))})}function WF(n){return HC(fh(n))}function KF(n,e){var t,r,i,o;return UC(this,void 0,void 0,function*(){try{for(t=$C(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function nn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ki(n,e=0){return _e((t,r)=>{t.subscribe(he(r,i=>nn(r,n,()=>r.next(i),e),()=>nn(r,n,()=>r.complete(),e),i=>nn(r,n,()=>r.error(i),e)))})}function Oi(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zC(n,e){return ze(n).pipe(Oi(e),ki(e))}function qC(n,e){return ze(n).pipe(Oi(e),ki(e))}function GC(n,e){return new Q(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function WC(n,e){return new Q(t=>{let r;return nn(t,e,()=>{r=n[dh](),nn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function gh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Q(t=>{nn(t,e,()=>{let r=n[Symbol.asyncIterator]();nn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function KC(n,e){return gh(fh(n),e)}function QC(n,e){if(n!=null){if(ch(n))return zC(n,e);if(sh(n))return GC(n,e);if(ah(n))return qC(n,e);if(lh(n))return gh(n,e);if(hh(n))return WC(n,e);if(ph(n))return KC(n,e)}throw uh(n)}function ce(n,e){return e?QC(n,e):ze(n)}function G(...n){let e=dr(n);return ce(n,e)}function Xs(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new Q(e?i=>e.schedule(r,0,i):r)}function mh(n){return!!n&&(n instanceof Q||se(n.lift)&&se(n.subscribe))}var Hn=qs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Lv(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Pi({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Hn)}});n.subscribe(o)})}function YC(n){return n instanceof Date&&!isNaN(n)}function Y(n,e){return _e((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:QF}=Array;function YF(n,e){return QF(e)?n(...e):n(e)}function vh(n){return Y(e=>YF(n,e))}var{isArray:ZF}=Array,{getPrototypeOf:JF,prototype:XF,keys:eL}=Object;function yh(n){if(n.length===1){let e=n[0];if(ZF(e))return{args:e,keys:null};if(tL(e)){let t=eL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tL(n){return n&&typeof n=="object"&&JF(n)===XF}function _h(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qc(...n){let e=dr(n),t=ih(n),{args:r,keys:i}=yh(n);if(r.length===0)return ce([],e);let o=new Q(nL(r,e,i?s=>_h(i,s):dn));return t?o.pipe(vh(t)):o}function nL(n,e,t=dn){return r=>{ZC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)ZC(e,()=>{let u=ce(n[l],e),h=!1;u.subscribe(he(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ZC(n,e,t){n?nn(t,n,e):e()}function JC(n,e,t,r,i,o,s,a){let l=[],u=0,h=0,p=!1,g=()=>{p&&!l.length&&!u&&e.complete()},v=x=>u<r?b(x):l.push(x),b=x=>{o&&e.next(x),u++;let R=!1;ze(t(x,h++)).subscribe(he(e,V=>{i?.(V),o?v(V):e.next(V)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;l.length&&u<r;){let V=l.shift();s?nn(e,s,()=>b(V)):b(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(he(e,v,()=>{p=!0,g()})),()=>{a?.()}}function tt(n,e,t=1/0){return se(e)?tt((r,i)=>Y((o,s)=>e(r,o,i,s))(ze(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>JC(r,i,n,t)))}function hr(n=1/0){return tt(dn,n)}function XC(){return hr(1)}function ea(...n){return XC()(ce(n,dr(n)))}function Gc(n){return new Q(e=>{ze(n()).subscribe(e)})}function Vv(...n){let e=ih(n),{args:t,keys:r}=yh(n),i=new Q(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let p=!1;ze(t[h]).subscribe(he(o,g=>{p||(p=!0,u--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?_h(r,a):a),o.complete())}))}});return e?i.pipe(vh(e)):i}function Eh(n=0,e,t=kv){let r=-1;return e!=null&&(rh(e)?t=e:r=e),new Q(i=>{let o=YC(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Wc(n=0,e=Mi){return n<0&&(n=0),Eh(n,n,e)}function Kc(...n){let e=dr(n),t=VC(n,1/0),r=n;return r.length?r.length===1?ze(r[0]):hr(t)(ce(r,e)):kt}function ft(n,e){return _e((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function e0(n){return _e((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let u=i;i=null,t.next(u)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(he(t,u=>{r=!0,i=u,o||ze(n(u)).subscribe(o=he(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function wh(n,e=Mi){return e0(()=>Eh(n,e))}function Yr(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=ze(n(s,Yr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function t0(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(he(s,h=>{let p=u++;l=a?n(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function fr(n,e){return se(e)?tt(n,e,1):tt(n,1)}function Fi(n){return _e((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vt(n){return n<=0?()=>kt:_e((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ih(n=rL){return _e((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rL(){return new Hn}function Mo(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ft((i,o)=>n(i,o,r)):dn,vt(1),t?Fi(e):Ih(()=>new Hn))}function ta(n){return n<=0?()=>kt:_e((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ft((i,o)=>n(i,o,r)):dn,ta(1),t?Fi(e):Ih(()=>new Hn))}function Dh(n,e){return _e(t0(n,e,arguments.length>=2,!0))}function Li(...n){let e=dr(n);return _e((t,r)=>{(e?ea(n,t,e):ea(n,t)).subscribe(r)})}function Ie(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,l=>{i?.unsubscribe();let u=0,h=o++;ze(n(l,h)).subscribe(i=he(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function pr(n){return _e((e,t)=>{ze(n).subscribe(he(t,()=>t.complete(),Hc)),!t.closed&&e.subscribe(t)})}function ot(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):dn}function n0(n){let e=de(null);try{return n()}finally{de(e)}}var Ah="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(Jc(e,t)),this.code=e}};function iL(n){return`NG0${Math.abs(n)}`}function Jc(n,e){return`${iL(n)}${e?": "+e:""}`}var ei=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("")}function s0(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(rn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Jv(n,e){return n?e?`${n} ${e}`:n:e||""}var oL=qe({__forward_ref__:qe});function gr(n){return n.__forward_ref__=gr,n.toString=function(){return rn(this())},n}function Dt(n){return Xv(n)?n():n}function Xv(n){return typeof n=="function"&&n.hasOwnProperty(oL)&&n.__forward_ref__===gr}function a0(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xc(n){return sL(n,Rh)}function ey(n){return Xc(n)!==null}function sL(n,e){return n.hasOwnProperty(e)&&n[e]||null}function aL(n){let e=n?.[Rh]??null;return e||null}function Bv(n){return n&&n.hasOwnProperty(Th)?n[Th]:null}var Rh=qe({\u0275prov:qe}),Th=qe({\u0275inj:qe}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=L({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ty(n){return n&&!!n.\u0275providers}var ny=qe({\u0275cmp:qe}),ry=qe({\u0275dir:qe}),iy=qe({\u0275pipe:qe}),oy=qe({\u0275mod:qe}),Yc=qe({\u0275fac:qe}),Vo=qe({__NG_ELEMENT_ID__:qe}),r0=qe({__NG_ENV_ID__:qe});function el(n){return typeof n=="string"?n:n==null?"":String(n)}function c0(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():el(n)}function sy(n,e){throw new $(-200,n)}function Ph(n,e){throw new $(-201,!1)}var $v;function l0(){return $v}function qt(n){let e=$v;return $v=n,e}function ay(n,e,t){let r=Xc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ph(n,"Injector")}var cL={},ko=cL,Hv="__NG_DI_FLAG__",zv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Oo(t)||0;try{return this.injector.get(e,r&8?null:ko,r)}catch(i){if(Bs(i))return i;throw i}}},Ch="ngTempTokenPath",lL="ngTokenPath",uL=/\n/gm,dL="\u0275",i0="__source";function hL(n,e=0){let t=yv();if(t===void 0)throw new $(-203,!1);if(t===null)return ay(n,void 0,e);{let r=fL(e),i=t.retrieve(n,r);if(Bs(i)){if(r.optional)return null;throw i}return i}}function z(n,e=0){return(l0()||hL)(Dt(n),e)}function S(n,e){return z(n,Oo(e))}function Oo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fL(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function qv(n){let e=[];for(let t=0;t<n.length;t++){let r=Dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=pL(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function cy(n,e){return n[Hv]=e,n.prototype[Hv]=e,n}function pL(n){return n[Hv]}function gL(n,e,t,r){let i=n[Ch];throw e[i0]&&i.unshift(e[i0]),n.message=mL(`
`+n.message,i,t,r),n[lL]=i,n[Ch]=null,n}function mL(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==dL?n.slice(2):n;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):rn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(uL,`
  `)}`}function Vi(n,e){let t=n.hasOwnProperty(Yc);return t?n[Yc]:null}function u0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function d0(n){return n.flat(Number.POSITIVE_INFINITY)}function xh(n,e){n.forEach(t=>Array.isArray(t)?xh(t,e):e(t))}function ly(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function tl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function h0(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function f0(n,e,t){let r=ra(n,e);return r>=0?n[r|1]=t:(r=~r,h0(n,r,e,t)),r}function Nh(n,e){let t=ra(n,e);if(t>=0)return n[t|1]}function ra(n,e){return vL(n,e,1)}function vL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ui={},hn=[],Bi=new j(""),uy=new j("",-1),dy=new j(""),Zc=class{get(e,t=ko){if(t===ko)throw new xd(`NullInjectorError: No provider for ${rn(e)}!`);return t}};function hy(n){return n[oy]||null}function mr(n){return n[ny]||null}function fy(n){return n[ry]||null}function p0(n){return n[iy]||null}function on(n){return{\u0275providers:n}}function g0(...n){return{\u0275providers:py(!0,n),\u0275fromNgModule:!0}}function py(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return xh(e,s=>{let a=s;Sh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&m0(i,o),t}function m0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gy(i,o=>{e(o,r)})}}function Sh(n,e,t,r){if(n=Dt(n),!n)return!1;let i=null,o=Bv(n),s=!o&&mr(n);if(!o&&!s){let l=n.ngModule;if(o=Bv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Sh(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{xh(o.imports,h=>{Sh(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&m0(u,e)}if(!a){let u=Vi(i)||(()=>new i);e({provide:i,useFactory:u,deps:hn},i),e({provide:dy,useValue:i,multi:!0},i),e({provide:Bi,useValue:()=>z(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;gy(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function gy(n,e){for(let t of n)ty(t)&&(t=t.\u0275providers),Array.isArray(t)?gy(t,e):e(t)}var yL=qe({provide:String,useValue:qe});function v0(n){return n!==null&&typeof n=="object"&&yL in n}function _L(n){return!!(n&&n.useExisting)}function EL(n){return!!(n&&n.useFactory)}function Fo(n){return typeof n=="function"}function y0(n){return!!n.useClass}var nl=new j(""),bh={},o0={},Uv;function ia(){return Uv===void 0&&(Uv=new Zc),Uv}var $e=class{},Lo=class extends $e{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Wv(e,s=>this.processProvider(s)),this.records.set(uy,na(void 0,this)),i.has("environment")&&this.records.set($e,na(void 0,this));let o=this.records.get(nl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dy,hn,{self:!0}))}retrieve(e,t){let r=Oo(t)||0;try{return this.get(e,ko,r)}catch(i){if(Bs(i))return i;throw i}}destroy(){Qc(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return Qc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Qc(this);let t=Qr(this),r=qt(void 0),i;try{return e()}finally{Qr(t),qt(r)}}get(e,t=ko,r){if(Qc(this),e.hasOwnProperty(r0))return e[r0](this);let i=Oo(r),o,s=Qr(this),a=qt(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=TL(e)&&Xc(e);h&&this.injectableDefInScope(h)?u=na(Gv(e),bh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let l=i&2?ia():this.parent;return t=i&8&&t===ko?null:t,l.get(e,t)}catch(l){if(Bs(l)){if((l[Ch]=l[Ch]||[]).unshift(rn(e)),s)throw l;return gL(l,e,"R3InjectorError",this.source)}else throw l}finally{qt(a),Qr(s)}}resolveInjectorInitializers(){let e=de(null),t=Qr(this),r=qt(void 0),i;try{let o=this.get(Bi,hn,{self:!0});for(let s of o)s()}finally{Qr(t),qt(r),de(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Dt(e);let t=Fo(e)?e:Dt(e&&e.provide),r=IL(e);if(!Fo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=na(void 0,bh,!0),i.factory=()=>qv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=de(null);try{return t.value===o0?sy(rn(e)):t.value===bh&&(t.value=o0,t.value=t.factory()),typeof t.value=="object"&&t.value&&bL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gv(n){let e=Xc(n),t=e!==null?e.factory:Vi(n);if(t!==null)return t;if(n instanceof j)throw new $(204,!1);if(n instanceof Function)return wL(n);throw new $(204,!1)}function wL(n){if(n.length>0)throw new $(204,!1);let t=aL(n);return t!==null?()=>t.factory(n):()=>new n}function IL(n){if(v0(n))return na(void 0,n.useValue);{let e=my(n);return na(e,bh)}}function my(n,e,t){let r;if(Fo(n)){let i=Dt(n);return Vi(i)||Gv(i)}else if(v0(n))r=()=>Dt(n.useValue);else if(EL(n))r=()=>n.useFactory(...qv(n.deps||[]));else if(_L(n))r=()=>z(Dt(n.useExisting));else{let i=Dt(n&&(n.useClass||n.provide));if(DL(n))r=()=>new i(...qv(n.deps));else return Vi(i)||Gv(i)}return r}function Qc(n){if(n.destroyed)throw new $(205,!1)}function na(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DL(n){return!!n.deps}function bL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function TL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Wv(n,e){for(let t of n)Array.isArray(t)?Wv(t,e):t&&ty(t)?Wv(t.\u0275providers,e):e(t)}function st(n,e){let t;n instanceof Lo?(Qc(n),t=n):t=new zv(n);let r,i=Qr(t),o=qt(void 0);try{return e()}finally{Qr(i),qt(o)}}function vy(){return l0()!==void 0||yv()!=null}function yy(n){if(!vy())throw new $(-203,!1)}var qn=0,le=1,ie=2,yt=3,Sn=4,An=5,rl=6,oa=7,Ft=8,jo=9,vr=10,nt=11,sa=12,_y=13,Uo=14,Rn=15,$i=16,Bo=17,yr=18,il=19,Ey=20,Jr=21,Mh=22,ol=23,fn=24,$o=25,Gt=26,_0=1;var Hi=7,sl=8,Ho=9,Wt=10;function _r(n){return Array.isArray(n)&&typeof n[_0]=="object"}function Gn(n){return Array.isArray(n)&&n[_0]===!0}function wy(n){return(n.flags&4)!==0}function zi(n){return n.componentOffset>-1}function kh(n){return(n.flags&1)===1}function Er(n){return!!n.template}function aa(n){return(n[ie]&512)!==0}function zo(n){return(n[ie]&256)===256}var E0="svg",w0="math";function Pn(n){for(;Array.isArray(n);)n=n[qn];return n}function Iy(n,e){return Pn(e[n])}function Wn(n,e){return Pn(e[n.index])}function Oh(n,e){return n.data[e]}function Fh(n,e){return n[e]}function Dy(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xn(n,e){let t=e[n];return _r(t)?t:t[qn]}function I0(n){return(n[ie]&4)===4}function Lh(n){return(n[ie]&128)===128}function D0(n){return Gn(n[yt])}function al(n,e){return e==null?null:n[e]}function by(n){n[Bo]=0}function Ty(n){n[ie]&1024||(n[ie]|=1024,Lh(n)&&ca(n))}function b0(n,e){for(;n>0;)e=e[Uo],n--;return e}function cl(n){return!!(n[ie]&9216||n[fn]?.dirty)}function Vh(n){n[vr].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),cl(n)&&ca(n)}function ca(n){n[vr].changeDetectionScheduler?.notify(0);let e=ji(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Lh(e)));)e=ji(e)}function Cy(n,e){if(zo(n))throw new $(911,!1);n[Jr]===null&&(n[Jr]=[]),n[Jr].push(e)}function T0(n,e){if(n[Jr]===null)return;let t=n[Jr].indexOf(e);t!==-1&&n[Jr].splice(t,1)}function ji(n){let e=n[yt];return Gn(e)?e[yt]:e}function Sy(n){return n[oa]??=[]}function Ay(n){return n.cleanup??=[]}function C0(n,e,t,r){let i=Sy(e);i.push(t),n.firstCreatePass&&Ay(n).push(r,i.length-1)}var fe={lFrame:H0(null),bindingsEnabled:!0,skipHydrationRootTNode:null},ll=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(ll||{}),CL=0,Kv=!1;function S0(){return fe.lFrame.elementDepthCount}function A0(){fe.lFrame.elementDepthCount++}function R0(){fe.lFrame.elementDepthCount--}function Ry(){return fe.bindingsEnabled}function P0(){return fe.skipHydrationRootTNode!==null}function x0(n){return fe.skipHydrationRootTNode===n}function N0(){fe.skipHydrationRootTNode=null}function De(){return fe.lFrame.lView}function bt(){return fe.lFrame.tView}function Ce(n){return fe.lFrame.contextLView=n,n[Ft]}function Se(n){return fe.lFrame.contextLView=null,n}function Tt(){let n=Py();for(;n!==null&&n.type===64;)n=n.parent;return n}function Py(){return fe.lFrame.currentTNode}function M0(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function la(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function xy(){return fe.lFrame.isParent}function k0(){fe.lFrame.isParent=!1}function O0(){return fe.lFrame.contextLView}function Ny(n){a0("Must never be called in production mode"),CL=n}function My(){return Kv}function ky(n){let e=Kv;return Kv=n,e}function jh(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function F0(n){return fe.lFrame.bindingIndex=n}function ul(){return fe.lFrame.bindingIndex++}function L0(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function V0(){return fe.lFrame.inI18n}function j0(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uh(e)}function U0(){return fe.lFrame.currentDirectiveIndex}function Uh(n){fe.lFrame.currentDirectiveIndex=n}function B0(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Oy(){return fe.lFrame.currentQueryIndex}function Bh(n){fe.lFrame.currentQueryIndex=n}function SL(n){let e=n[le];return e.type===2?e.declTNode:e.type===1?n[An]:null}function Fy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=SL(o),i===null||(o=o[Uo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=$0();return r.currentTNode=e,r.lView=n,!0}function $h(n){let e=$0(),t=n[le];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $0(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?H0(n):e}function H0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function z0(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ly=z0;function Hh(){let n=z0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function q0(n){return(fe.lFrame.contextLView=b0(n,fe.lFrame.contextLView))[Ft]}function qo(){return fe.lFrame.selectedIndex}function qi(n){fe.lFrame.selectedIndex=n}function zh(){let n=fe.lFrame;return Oh(n.tView,n.selectedIndex)}function G0(){return fe.lFrame.currentNamespace}var W0=!0;function qh(){return W0}function Gh(n){W0=n}function Qv(n,e=null,t=null,r){let i=Vy(n,e,t,r);return i.resolveInjectorInitializers(),i}function Vy(n,e=null,t=null,r,i=new Set){let o=[t||hn,g0(n)];return r=r||(typeof n=="object"?void 0:rn(n)),new Lo(o,e||ia(),r||null,i)}var Ve=class n{static THROW_IF_NOT_FOUND=ko;static NULL=new Zc;static create(e,t){if(Array.isArray(e))return Qv({name:""},t,e,"");{let r=e.name??"";return Qv({name:r},e.parent,e.providers,r)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>z(uy)});static __NG_ELEMENT_ID__=-1},Me=new j(""),ti=(()=>{class n{static __NG_ELEMENT_ID__=AL;static __NG_ENV_ID__=t=>t}return n})(),Yv=class extends ti{_lView;constructor(e){super(),this._lView=e}get destroyed(){return zo(this._lView)}onDestroy(e){let t=this._lView;return Cy(t,e),()=>T0(t,e)}};function AL(){return new Yv(De())}var zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kt=new j("",{providedIn:"root",factory:()=>{let n=S($e),e;return t=>{e??=n.get(zn),e.handleError(t)}}}),K0={provide:Bi,useValue:()=>void S(zn),multi:!0};function jy(n){return typeof n=="function"&&n[Mt]!==void 0}function Lt(n,e){let[t,r,i]=Dv(n,e?.equal),o=t,s=o[Mt];return o.set=r,o.update=i,o.asReadonly=Q0.bind(o),o}function Q0(){let n=this[Mt];if(n.readonlyFn===void 0){let e=()=>this();e[Mt]=n,n.readonlyFn=e}return n.readonlyFn}function Uy(n){return jy(n)&&typeof n.set=="function"}var Xr=class{},dl=new j("",{providedIn:"root",factory:()=>!1});var By=new j(""),$y=new j("");var Wh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=RL}return n})();function RL(){return new Wh(De(),Tt())}var ni=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Q(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Gi=(()=>{class n{internalPendingTasks=S(ni);scheduler=S(Xr);errorHandler=S(Kt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})();function hl(...n){}var Hy=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Zv})}return n})(),Zv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function fa(n){return{toString:n}.toString()}var Kh="__parameters__";function LL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function SS(n,e,t){return fa(()=>{let r=LL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let p=l.hasOwnProperty(Kh)?l[Kh]:Object.defineProperty(l,Kh,{value:[]})[Kh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qt=cy(SS("Optional"),8);var AS=cy(SS("SkipSelf"),4);function VL(n){return typeof n=="function"}var tf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function RS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var gn=(()=>{let n=()=>PS;return n.ngInherit=!0,n})();function PS(n){return n.type.prototype.ngOnChanges&&(n.setInput=UL),jL}function jL(){let n=NS(this),e=n?.current;if(e){let t=n.previous;if(t===Ui)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function UL(n,e,t,r,i){let o=this.declaredInputs[r],s=NS(n)||BL(n,{previous:Ui,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new tf(u&&u.currentValue,t,l===Ui),RS(n,e,i,t)}var xS="__ngSimpleChanges__";function NS(n){return n[xS]||null}function BL(n,e){return n[xS]=e}var Y0=[];var ke=function(n,e=null,t){for(let r=0;r<Y0.length;r++){let i=Y0[r];i(n,e,t)}};function $L(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=PS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function MS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zh(n,e,t){kS(n,e,3,t)}function Jh(n,e,t,r){(n[ie]&3)===t&&kS(n,e,t,r)}function zy(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function kS(n,e,t,r){let i=r!==void 0?n[Bo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Bo]+=65536),(a<o||o==-1)&&(HL(n,t,e,l),n[Bo]=(n[Bo]&4294901760)+l+2),l++}function Z0(n,e){ke(4,n,e);let t=de(null);try{e.call(n)}finally{de(t),ke(5,n,e)}}function HL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[Bo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,Z0(a,o)):Z0(a,o)}var da=-1,Ko=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function zL(n){return(n.flags&8)!==0}function qL(n){return(n.flags&16)!==0}function GL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];WL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OS(n){return n===3||n===4||n===6}function WL(n){return n.charCodeAt(0)===64}function gl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?J0(n,t,i,null,e[++r]):J0(n,t,i,null,null))}}return n}function J0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function FS(n){return n!==da}function nf(n){return n&32767}function KL(n){return n>>16}function rf(n,e){let t=KL(n),r=e;for(;t>0;)r=r[Uo],t--;return r}var t_=!0;function of(n){let e=t_;return t_=n,e}var QL=256,LS=QL-1,VS=5,YL=0,wr={};function ZL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vo)&&(r=t[Vo]),r==null&&(r=t[Vo]=YL++);let i=r&LS,o=1<<i;e.data[n+(i>>VS)]|=o}function sf(n,e){let t=jS(n,e);if(t!==-1)return t;let r=e[le];r.firstCreatePass&&(n.injectorIndex=e.length,qy(r.data,n),qy(e,null),qy(r.blueprint,null));let i=C_(n,e),o=n.injectorIndex;if(FS(i)){let s=nf(i),a=rf(i,e),l=a[le].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function qy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function C_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=zS(i),r===null)return da;if(t++,i=i[Uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return da}function n_(n,e,t){ZL(n,e,t)}function JL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(OS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function US(n,e,t){if(t&8||n!==void 0)return n;Ph(e,"NodeInjector")}function BS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[jo],o=qt(void 0);try{return i?i.get(e,r,t&8):ay(e,r,t&8)}finally{qt(o)}}return US(r,e,t)}function $S(n,e,t,r=0,i){if(n!==null){if(e[ie]&2048&&!(r&2)){let s=nV(n,e,t,r,wr);if(s!==wr)return s}let o=HS(n,e,t,r,wr);if(o!==wr)return o}return BS(e,t,r,i)}function HS(n,e,t,r,i){let o=eV(t);if(typeof o=="function"){if(!Fy(e,n,r))return r&1?US(i,t,r):BS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ph(t);else return s}finally{Ly()}}else if(typeof o=="number"){let s=null,a=jS(n,e),l=da,u=r&1?e[Rn][An]:null;for((a===-1||r&4)&&(l=a===-1?C_(n,e):e[a+8],l===da||!eS(r,!1)?a=-1:(s=e[le],a=nf(l),e=rf(l,e)));a!==-1;){let h=e[le];if(X0(o,a,h.data)){let p=XL(a,e,t,s,r,u);if(p!==wr)return p}l=e[a+8],l!==da&&eS(r,e[le].data[a+8]===u)&&X0(o,a,e)?(s=h,a=nf(l),e=rf(l,e)):a=-1}}return i}function XL(n,e,t,r,i,o){let s=e[le],a=s.data[n+8],l=r==null?zi(a)&&t_:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=Xh(a,s,t,l,u);return h!==null?ml(e,s,h,a):wr}function Xh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:u;for(let v=p;v<g;v++){let b=s[v];if(v<l&&t===b||v>=l&&b.type===t)return v}if(i){let v=s[l];if(v&&Er(v)&&v.type===t)return l}return null}function ml(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Ko){let s=i;s.resolving&&sy(c0(o[t]));let a=of(s.canSeeViewProviders);s.resolving=!0;let l=o[t].type||o[t],u,h=s.injectImpl?qt(s.injectImpl):null,p=Fy(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&$L(t,o[t],e)}finally{h!==null&&qt(h),of(a),s.resolving=!1,Ly()}}return i}function eV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vo)?n[Vo]:void 0;return typeof e=="number"?e>=0?e&LS:tV:e}function X0(n,e,t){let r=1<<n;return!!(t[e+(n>>VS)]&r)}function eS(n,e){return!(n&2)&&!(n&1&&e)}var Wo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return $S(this._tNode,this._lView,e,Oo(r),t)}};function tV(){return new Wo(Tt(),De())}function Zo(n){return fa(()=>{let e=n.prototype.constructor,t=e[Yc]||r_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Yc]||r_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function r_(n){return Xv(n)?()=>{let e=r_(Dt(n));return e&&e()}:Vi(n)}function nV(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!aa(s);){let a=HS(o,s,t,r|2,wr);if(a!==wr)return a;let l=o.parent;if(!l){let u=s[Ey];if(u){let h=u.get(t,wr,r);if(h!==wr)return h}l=zS(s),s=s[Uo]}o=l}return i}function zS(n){let e=n[le],t=e.type;return t===2?e.declTNode:t===1?n[An]:null}function El(n){return JL(Tt(),n)}function rV(){return pa(Tt(),De())}function pa(n,e){return new pt(Wn(n,e))}var pt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=rV}return n})();function iV(n){return n instanceof pt?n.nativeElement:n}function oV(){return this._results[Symbol.iterator]()}var af=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ne}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=d0(e);(this._changesDetected=!u0(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=oV};function qS(n){return(n.flags&128)===128}var S_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(S_||{}),GS=new Map,sV=0;function aV(){return sV++}function cV(n){GS.set(n[il],n)}function i_(n){GS.delete(n[il])}var tS="__ngContext__";function wl(n,e){_r(e)?(n[tS]=e[il],cV(e)):n[tS]=e}function WS(n){return QS(n[sa])}function KS(n){return QS(n[Sn])}function QS(n){for(;n!==null&&!Gn(n);)n=n[Sn];return n}var o_;function A_(n){o_=n}function YS(){if(o_!==void 0)return o_;if(typeof document<"u")return document;throw new $(210,!1)}var ga=new j("",{providedIn:"root",factory:()=>lV}),lV="ng",_f=new j(""),br=new j("",{providedIn:"platform",factory:()=>"unknown"});var Ef=new j("",{providedIn:"root",factory:()=>YS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uV="h",dV="b";var ZS=!1,JS=new j("",{providedIn:"root",factory:()=>ZS});var hV=(n,e,t,r)=>{};function fV(n,e,t,r){hV(n,e,t,r)}var pV=()=>null;function XS(n,e,t=!1){return pV(n,e,t)}function eA(n,e){let t=n.contentQueries;if(t!==null){let r=de(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Bh(o),a.contentQueries(2,e[s],s)}}}finally{de(r)}}}function s_(n,e,t){Bh(0);let r=de(null);try{e(n,t)}finally{de(r)}}function tA(n,e,t){if(wy(e)){let r=de(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{de(r)}}}var ri=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ri||{});var Qh;function gV(){if(Qh===void 0&&(Qh=null,ei.trustedTypes))try{Qh=ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qh}function nS(n){return gV()?.createScriptURL(n)||n}var cf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ah})`}};function Il(n){return n instanceof cf?n.changingThisBreaksApplicationSecurity:n}function R_(n,e){let t=nA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ah})`)}return t===e}function nA(n){return n instanceof cf&&n.getTypeName()||null}var mV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rA(n){return n=String(n),n.match(mV)?n:"unsafe:"+n}var wf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(wf||{});function iA(n){let e=sA();return e?e.sanitize(wf.URL,n)||"":R_(n,"URL")?Il(n):rA(el(n))}function oA(n){let e=sA();if(e)return nS(e.sanitize(wf.RESOURCE_URL,n)||"");if(R_(n,"ResourceURL"))return nS(Il(n));throw new $(904,!1)}function vV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?oA:iA}function P_(n,e,t){return vV(e,t)(n)}function sA(){let n=De();return n&&n[vr].sanitizer}function aA(n){return n instanceof Function?n():n}function yV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var cA="ng-template";function _V(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(x_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function x_(n){return n.type===4&&n.value!==cA}function EV(n,e,t){let r=n.type===4&&!t?cA:n.value;return e===r}function wV(n,e,t){let r=4,i=n.attrs,o=i!==null?bV(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Kn(r)&&!Kn(l))return!1;if(s&&Kn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!EV(n,l,t)||l===""&&e.length===1){if(Kn(r))return!1;s=!0}}else if(r&8){if(i===null||!_V(n,i,l,t)){if(Kn(r))return!1;s=!0}}else{let u=e[++a],h=IV(l,i,x_(n),t);if(h===-1){if(Kn(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(Kn(r))return!1;s=!0}}}}return Kn(r)||s}function Kn(n){return(n&1)===0}function IV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return TV(e,n)}function DV(n,e,t=!1){for(let r=0;r<e.length;r++)if(wV(n,e[r],t))return!0;return!1}function bV(n){for(let e=0;e<n.length;e++){let t=n[e];if(OS(t))return e}return n.length}function TV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rS(n,e){return n?":not("+e.trim()+")":e}function CV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kn(s)&&(e+=rS(o,i),i=""),r=s,o=o||!Kn(r);t++}return i!==""&&(e+=rS(o,i)),e}function SV(n){return n.map(CV).join(",")}function AV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Tr={};function RV(n,e){return n.createText(e)}function PV(n,e,t){n.setValue(e,t)}function lA(n,e,t){return n.createElement(e,t)}function lf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uA(n,e,t){n.appendChild(e,t)}function iS(n,e,t,r,i){r!==null?lf(n,e,t,r,i):uA(n,e,t)}function xV(n,e,t){n.removeChild(null,e,t)}function NV(n,e,t){n.setAttribute(e,"style",t)}function MV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&GL(n,e,r),i!==null&&MV(n,e,i),o!==null&&NV(n,e,o)}function N_(n,e,t,r,i,o,s,a,l,u,h){let p=Gt+r,g=p+i,v=kV(p,g),b=typeof u=="function"?u():u;return v[le]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:h}}function kV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Tr);return t}function OV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=N_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function M_(n,e,t,r,i,o,s,a,l,u,h){let p=e.blueprint.slice();return p[qn]=i,p[ie]=r|4|128|8|64|1024,(u!==null||n&&n[ie]&2048)&&(p[ie]|=2048),by(p),p[yt]=p[Uo]=n,p[Ft]=t,p[vr]=s||n&&n[vr],p[nt]=a||n&&n[nt],p[jo]=l||n&&n[jo]||null,p[An]=o,p[il]=aV(),p[rl]=h,p[Ey]=u,p[Rn]=e.type==2?n[Rn]:p,p}function FV(n,e,t){let r=Wn(e,n),i=OV(t),o=n[vr].rendererFactory,s=k_(n,M_(n,i,null,hA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function hA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function fA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function k_(n,e){return n[sa]?n[_y][Sn]=e:n[sa]=e,n[_y]=e,e}function re(n=1){pA(bt(),De(),qo()+n,!1)}function pA(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jh(e,o,0,t)}qi(t)}var If=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(If||{});function a_(n,e,t,r){let i=de(null);try{let[o,s,a]=n.inputs[t],l=null;(s&If.SignalBased)!==0&&(l=e[o][Mt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):RS(e,l,o,r)}finally{de(i)}}function gA(n,e,t,r,i){let o=qo(),s=r&2;try{qi(-1),s&&e.length>Gt&&pA(n,e,Gt,!1),ke(s?2:0,i,t),t(r,i)}finally{qi(o),ke(s?3:1,i,t)}}function O_(n,e,t){HV(n,e,t),(t.flags&64)===64&&zV(n,e,t)}function mA(n,e,t=Wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function LV(n,e,t,r){let o=r.get(JS,ZS)||t===ri.ShadowDom,s=n.selectRootElement(e,o);return VV(s),s}function VV(n){jV(n)}var jV=()=>null;function UV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vA(n,e,t,r,i,o){let s=e[le];if(F_(n,s,e,t,r)){zi(n)&&$V(e,n.index);return}BV(n,e,t,r,i,o)}function BV(n,e,t,r,i,o){if(n.type&3){let s=Wn(n,e);t=UV(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function $V(n,e){let t=xn(e,n);t[ie]&16||(t[ie]|=64)}function HV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;zi(t)&&FV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ml(e,n,s,t);if(wl(l,e),o!==null&&KV(e,s-r,l,a,t,o),Er(a)){let u=xn(t.index,e);u[Ft]=ml(e,n,s,t)}}}function zV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=U0();try{qi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Uh(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&qV(l,u)}}finally{qi(-1),Uh(s)}}function qV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function yA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];DV(e,o.selectors,!1)&&(r??=[],Er(o)?r.unshift(o):r.push(o))}return r}function GV(n,e,t,r,i,o){let s=Wn(n,e);WV(e[nt],s,o,n.value,t,r,i)}function WV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?el(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function KV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];a_(r,t,l,u)}}function QV(n,e){let t=n[jo];if(!t)return;t.get(Kt,null)?.(e)}function F_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],h=s[l+1],p=e.data[u];a_(p,t[u],h,i),a=!0}if(o)for(let l of o){let u=t[l],h=e.data[l];a_(h,u,r,i),a=!0}return a}function YV(n,e){let t=xn(e,n),r=t[le];ZV(r,t);let i=t[qn];i!==null&&t[rl]===null&&(t[rl]=XS(i,t[jo])),ke(18),L_(r,t,t[Ft]),ke(19,t[Ft])}function ZV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function L_(n,e,t){$h(e);try{let r=n.viewQuery;r!==null&&s_(1,r,t);let i=n.template;i!==null&&gA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[yr]?.finishViewCreation(n),n.staticContentQueries&&eA(n,e),n.staticViewQueries&&s_(2,n.viewQuery,t);let o=n.components;o!==null&&JV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Hh()}}function JV(n,e){for(let t=0;t<e.length;t++)YV(n,e[t])}function XV(n,e,t,r){let i=de(null);try{let o=e.tView,a=n[ie]&4096?4096:16,l=M_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[$i]=u;let h=n[yr];return h!==null&&(l[yr]=h.createEmbeddedView(o)),L_(o,l,t),l}finally{de(i)}}function oS(n,e){return!e||e.firstChild===null||qS(n)}var sS=!1,e2=new j(""),t2;function V_(n,e){return t2(n,e)}var Ir=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ir||{});function j_(n){return(n.flags&32)===32}function ua(n,e,t,r,i){if(r!=null){let o,s=!1;Gn(r)?o=r:_r(r)&&(s=!0,r=r[qn]);let a=Pn(r);n===0&&t!==null?i==null?uA(e,t,a):lf(e,t,a,i||null,!0):n===1&&t!==null?lf(e,t,a,i||null,!0):n===2?xV(e,a,s):n===3&&e.destroyNode(a),o!=null&&f2(e,n,o,t,i)}}function n2(n,e){_A(n,e),e[qn]=null,e[An]=null}function r2(n,e,t,r,i,o){r[qn]=i,r[An]=e,Df(n,r,t,1,i,o)}function _A(n,e){e[vr].changeDetectionScheduler?.notify(9),Df(n,e,e[nt],2,null,null)}function i2(n){let e=n[sa];if(!e)return Gy(n[le],n);for(;e;){let t=null;if(_r(e))t=e[sa];else{let r=e[Wt];r&&(t=r)}if(!t){for(;e&&!e[Sn]&&e!==n;)_r(e)&&Gy(e[le],e),e=e[yt];e===null&&(e=n),_r(e)&&Gy(e[le],e),t=e&&e[Sn]}e=t}}function U_(n,e){let t=n[Ho],r=t.indexOf(e);t.splice(r,1)}function EA(n,e){if(zo(e))return;let t=e[nt];t.destroyNode&&Df(n,e,t,3,null,null),i2(e)}function Gy(n,e){if(zo(e))return;let t=de(null);try{e[ie]&=-129,e[ie]|=256,e[fn]&&jd(e[fn]),s2(n,e),o2(n,e),e[le].type===1&&e[nt].destroy();let r=e[$i];if(r!==null&&Gn(e[yt])){r!==e[yt]&&U_(r,e);let i=e[yr];i!==null&&i.detachView(n)}i_(e)}finally{de(t)}}function o2(n,e){let t=n.cleanup,r=e[oa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[oa]=null);let i=e[Jr];if(i!==null){e[Jr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ol];if(o!==null){e[ol]=null;for(let s of o)s.destroy()}}function s2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ko)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];ke(4,a,l);try{l.call(a)}finally{ke(5,a,l)}}else{ke(4,i,o);try{o.call(i)}finally{ke(5,i,o)}}}}}function a2(n,e,t){return c2(n,e.parent,t)}function c2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];if(zi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ri.None||i===ri.Emulated)return null}return Wn(r,t)}function l2(n,e,t){return d2(n,e,t)}function u2(n,e,t){return n.type&40?Wn(n,t):null}var d2=u2,aS;function B_(n,e,t,r){let i=a2(n,r,e),o=e[nt],s=r.parent||e[An],a=l2(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)iS(o,i,t[l],a,!1);else iS(o,i,t,a,!1);aS!==void 0&&aS(o,r,e,t,i)}function fl(n,e){if(e!==null){let t=e.type;if(t&3)return Wn(e,n);if(t&4)return c_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fl(n,r);{let i=n[e.index];return Gn(i)?c_(-1,i):Pn(i)}}else{if(t&128)return fl(n,e.next);if(t&32)return V_(e,n)()||Pn(n[e.index]);{let r=wA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(n[Rn]);return fl(i,r)}else return fl(n,e.next)}}}return null}function wA(n,e){if(e!==null){let r=n[Rn][An],i=e.projection;return r.projection[i]}return null}function c_(n,e){let t=Wt+n+1;if(t<e.length){let r=e[t],i=r[le].firstChild;if(i!==null)return fl(r,i)}return e[Hi]}function $_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&wl(Pn(a),r),t.flags|=2),!j_(t))if(l&8)$_(n,e,t.child,r,i,o,!1),ua(e,n,i,a,o);else if(l&32){let u=V_(t,r),h;for(;h=u();)ua(e,n,i,h,o);ua(e,n,i,a,o)}else l&16?h2(n,e,r,t,i,o):ua(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Df(n,e,t,r,i,o){$_(t,r,n.firstChild,e,i,o,!1)}function h2(n,e,t,r,i,o){let s=t[Rn],l=s[An].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];ua(e,n,i,h,o)}else{let u=l,h=s[yt];qS(r)&&(u.flags|=128),$_(n,e,u,h,i,o,!0)}}function f2(n,e,t,r,i){let o=t[Hi],s=Pn(t);o!==s&&ua(e,n,r,o,i);for(let a=Wt;a<t.length;a++){let l=t[a];Df(l[le],l,n,e,r,o)}}function p2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ir.Important),n.setStyle(t,r,i,o))}}function vl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),Gn(o)&&IA(o,r);let s=t.type;if(s&8)vl(n,e,t.child,r);else if(s&32){let a=V_(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=wA(e,t);if(Array.isArray(a))r.push(...a);else{let l=ji(e[Rn]);vl(l[le],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IA(n,e){for(let t=Wt;t<n.length;t++){let r=n[t],i=r[le].firstChild;i!==null&&vl(r[le],r,i,e)}n[Hi]!==n[qn]&&e.push(n[Hi])}function DA(n){if(n[$o]!==null){for(let e of n[$o])e.impl.addSequence(e);n[$o].length=0}}var bA=[];function g2(n){return n[fn]??m2(n)}function m2(n){let e=bA.pop()??Object.create(y2);return e.lView=n,e}function v2(n){n.lView[fn]!==n&&(n.lView=null,bA.push(n))}var y2=ee(F({},So),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ca(n.lView)},consumerOnSignalRead(){this.lView[fn]=this}});function _2(n){let e=n[fn]??Object.create(E2);return e.lView=n,e}var E2=ee(F({},So),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ji(n.lView);for(;e&&!TA(e[le]);)e=ji(e);e&&Ty(e)},consumerOnSignalRead(){this.lView[fn]=this}});function TA(n){return n.type!==2}function CA(n){if(n[ol]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ol])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ie]&8192)}}var w2=100;function H_(n,e=0){let r=n[vr].rendererFactory,i=!1;i||r.begin?.();try{I2(n,e)}finally{i||r.end?.()}}function I2(n,e){let t=My();try{ky(!0),l_(n,e);let r=0;for(;cl(n);){if(r===w2)throw new $(103,!1);r++,l_(n,1)}}finally{ky(t)}}function SA(n,e){Ny(e?ll.Exhaustive:ll.OnlyDirtyViews);try{H_(n)}finally{Ny(ll.Off)}}function D2(n,e,t,r){if(zo(e))return;let i=e[ie],o=!1,s=!1;$h(e);let a=!0,l=null,u=null;o||(TA(n)?(u=g2(e),l=Ao(u)):Ld()===null?(a=!1,u=_2(e),l=Ao(u)):e[fn]&&(jd(e[fn]),e[fn]=null));try{by(e),F0(n.bindingStartIndex),t!==null&&gA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Zh(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Jh(e,v,0,null),zy(e,0)}if(s||b2(e),CA(e),AA(e,0),n.contentQueries!==null&&eA(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Zh(e,v)}else{let v=n.contentHooks;v!==null&&Jh(e,v,1),zy(e,1)}C2(n,e);let p=n.components;p!==null&&PA(e,p,0);let g=n.viewQuery;if(g!==null&&s_(2,g,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Zh(e,v)}else{let v=n.viewHooks;v!==null&&Jh(e,v,2),zy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Mh]){for(let v of e[Mh])v();e[Mh]=null}o||(DA(e),e[ie]&=-73)}catch(h){throw o||ca(e),h}finally{u!==null&&(Hs(u,l),a&&v2(u)),Hh()}}function AA(n,e){for(let t=WS(n);t!==null;t=KS(t))for(let r=Wt;r<t.length;r++){let i=t[r];RA(i,e)}}function b2(n){for(let e=WS(n);e!==null;e=KS(e)){if(!(e[ie]&2))continue;let t=e[Ho];for(let r=0;r<t.length;r++){let i=t[r];Ty(i)}}}function T2(n,e,t){ke(18);let r=xn(e,n);RA(r,t),ke(19,r[Ft])}function RA(n,e){Lh(n)&&l_(n,e)}function l_(n,e){let r=n[le],i=n[ie],o=n[fn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$c(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)D2(r,n,r.template,n[Ft]);else if(i&8192){let a=de(null);try{CA(n),AA(n,1);let l=r.components;l!==null&&PA(n,l,1),DA(n)}finally{de(a)}}}function PA(n,e,t){for(let r=0;r<e.length;r++)T2(n,e[r],t)}function C2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qi(~i);else{let o=i,s=t[++r],a=t[++r];j0(s,o);let l=e[o];ke(24,l),a(2,l),ke(25,l)}}}finally{qi(-1)}}function z_(n,e){let t=My()?64:1088;for(n[vr].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=ji(n);if(aa(n)&&!r)return n;n=r}return null}function xA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function S2(n,e,t,r=!0){let i=e[le];if(A2(i,e,n,t),r){let s=c_(t,n),a=e[nt],l=a.parentNode(n[Hi]);l!==null&&r2(i,n[An],a,e,l,s)}let o=e[rl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function u_(n,e){if(n.length<=Wt)return;let t=Wt+e,r=n[t];if(r){let i=r[$i];i!==null&&i!==n&&U_(i,r),e>0&&(n[t-1][Sn]=r[Sn]);let o=tl(n,Wt+e);n2(r[le],r);let s=o[yr];s!==null&&s.detachView(o[le]),r[yt]=null,r[Sn]=null,r[ie]&=-129}return r}function A2(n,e,t,r){let i=Wt+r,o=t.length;r>0&&(t[i-1][Sn]=e),r<o-Wt?(e[Sn]=t[i],ly(t,Wt+r,e)):(t.push(e),e[Sn]=null),e[yt]=t;let s=e[$i];s!==null&&t!==s&&NA(s,e);let a=e[yr];a!==null&&a.insertView(n),Vh(e),e[ie]|=128}function NA(n,e){let t=n[Ho],r=e[yt];if(_r(r))n[ie]|=2;else{let i=r[yt][Rn];e[Rn]!==i&&(n[ie]|=2)}t===null?n[Ho]=[e]:t.push(e)}var Wi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[le];return vl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ft]}set context(e){this._lView[Ft]=e}get destroyed(){return zo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(Gn(e)){let t=e[sl],r=t?t.indexOf(this):-1;r>-1&&(u_(e,r),tl(t,r))}this._attachedToViewContainer=!1}EA(this._lView[le],this._lView)}onDestroy(e){Cy(this._lView,e)}markForCheck(){z_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Vh(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,H_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[jo].get(e2,sS)}catch{this.exhaustive=sS}}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=aa(this._lView),t=this._lView[$i];t!==null&&!e&&U_(t,this._lView),_A(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=aa(this._lView),r=this._lView[$i];r!==null&&!t&&NA(r,this._lView),Vh(this._lView)}};var Dr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=R2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=XV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Wi(o)}}return n})();function R2(){return bf(Tt(),De())}function bf(n,e){return n.type&4?new Dr(e,n,pa(n,e)):null}function q_(n,e,t,r,i){let o=n.data[e];if(o===null)o=P2(n,e,t,r,i),V0()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=M0();o.injectorIndex=s===null?-1:s.injectorIndex}return la(o,!0),o}function P2(n,e,t,r,i){let o=Py(),s=xy(),a=s?o:o&&o.parent,l=n.data[e]=N2(n,a,t,e,r,i);return x2(n,l,o,s),l}function x2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function N2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return P0()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uX=new RegExp(`^(\\d+)*(${dV}|${uV})*(.*)`);var M2=()=>null;function cS(n,e){return M2(n,e)}var MA=class{},Tf=class{},d_=class{resolveComponentFactory(e){throw new $(917,!1)}},Dl=class{static NULL=new d_},pn=class{},Cr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>k2()}return n})();function k2(){let n=De(),e=Tt(),t=xn(e.index,n);return(_r(t)?t:n)[nt]}var kA=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var ef={},h_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ef,r);return i!==ef||t===ef?i:this.parentInjector.get(e,t,r)}};function lS(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Jv(i,a);else if(o==2){let l=a,u=e[++s];r=Jv(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function K(n,e=0){let t=De();if(t===null)return z(n,e);let r=Tt();return $S(r,t,Dt(n),e)}function G_(){let n="invalid";throw new Error(n)}function OA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,l,u]=h.resolveHostDirectives(s);break}L2(n,e,t,a,o,l,u)}o!==null&&r!==null&&O2(t,r,o)}function O2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function F2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function L2(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let g=0;g<a;g++){let v=r[g];!l&&Er(v)&&(l=!0,F2(n,t,g)),n_(sf(t,e),n,v.type)}H2(t,n.data.length,a);for(let g=0;g<a;g++){let v=r[g];v.providersResolver&&v.providersResolver(v)}let u=!1,h=!1,p=fA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let v=r[g];if(t.mergedAttrs=gl(t.mergedAttrs,v.hostAttrs),j2(n,t,e,p,v),$2(p,v,i),s!==null&&s.has(v)){let[x,R]=s.get(v);t.directiveToIndex.set(v.type,[p,x+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(v))&&t.directiveToIndex.set(v.type,p);v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let b=v.type.prototype;!u&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}V2(n,t,o)}function V2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))uS(0,e,i,r),uS(1,e,i,r),hS(e,r,!1);else{let o=t.get(i);dS(0,e,o,r),dS(1,e,o,r),hS(e,r,!0)}}}function uS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),FA(e,o)}}function dS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),FA(e,s)}}function FA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function hS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||x_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function j2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Vi(i.type,!0)),s=new Ko(o,Er(i),K);n.blueprint[r]=s,t[r]=s,U2(n,e,r,fA(n,t,i.hostVars,Tr),i)}function U2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;B2(s)!=a&&s.push(a),s.push(t,r,o)}}function B2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Er(e)&&(t[""]=n)}}function H2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function LA(n,e,t,r,i,o,s,a){let l=e.consts,u=al(l,s),h=q_(e,n,2,r,u);return o&&OA(e,t,h,al(l,a),i),h.mergedAttrs=gl(h.mergedAttrs,h.attrs),h.attrs!==null&&lS(h,h.attrs,!1),h.mergedAttrs!==null&&lS(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function VA(n,e){MS(n,e),wy(e)&&n.queries.elementEnd(e)}function W_(n){return UA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function UA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function K_(n,e,t){return n[e]=t}function z2(n,e){return n[e]}function Ki(n,e,t){if(t===Tr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function q2(n,e,t,r){let i=Ki(n,e,t);return Ki(n,e+1,r)||i}function Wy(n,e,t){return function r(i){let o=zi(n)?xn(n.index,e):e;z_(o,5);let s=e[Ft],a=fS(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=fS(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function fS(n,e,t,r){let i=de(null);try{return ke(6,e,t),t(r)!==!1}catch(o){return QV(n,o),!1}finally{ke(7,e,t),de(i)}}function G2(n,e,t,r,i,o,s,a){let l=kh(n),u=!1,h=null;if(!r&&l&&(h=W2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=Wn(n,t),g=r?r(p):p;fV(t,g,o,a);let v=i.listen(g,o,a),b=r?x=>r(Pn(x[n.index])):n.index;BA(b,e,t,o,a,v,!1)}return u}function W2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[oa],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function BA(n,e,t,r,i,o,s){let a=e.firstCreatePass?Ay(e):null,l=Sy(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function pS(n,e,t,r,i,o){let s=e[t],a=e[le],u=a.data[t].outputs[r],p=s[u].subscribe(o);BA(n.index,a,e,i,o,p,!0)}var f_=Symbol("BINDING");var uf=class extends Dl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=mr(e);return new Qi(t,this.ngModule)}};function K2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&If.SignalBased)!==0};return i&&(o.transform=i),o})}function Q2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Y2(n,e,t){let r=e instanceof $e?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new h_(t,r):t}function Z2(n){let e=n.get(pn,null);if(e===null)throw new $(407,!1);let t=n.get(kA,null),r=n.get(Xr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function J2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return lA(e,t,t==="svg"?E0:t==="math"?w0:null)}var Qi=class extends Tf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=K2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Q2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=SV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ke(22);let a=de(null);try{let l=this.componentDef,u=X2(r,l,s,o),h=Y2(l,i||this.ngModule,e),p=Z2(h),g=p.rendererFactory.createRenderer(null,l),v=r?LV(g,r,l.encapsulation,h):J2(l,g),b=s?.some(gS)||o?.some(V=>typeof V!="function"&&V.bindings.some(gS)),x=M_(null,u,null,512|hA(l),null,null,p,g,h,null,XS(v,h,!0));x[Gt]=v,$h(x);let R=null;try{let V=LA(Gt,u,x,"#host",()=>u.directiveRegistry,!0,0);v&&(dA(g,v,V),wl(v,x)),O_(u,x,V),tA(u,V,x),VA(u,V),t!==void 0&&tj(V,this.ngContentSelectors,t),R=xn(V.index,x),x[Ft]=R[Ft],L_(u,x,null)}catch(V){throw R!==null&&i_(R),i_(x),V}finally{ke(23),Hh()}return new df(this.componentType,x,!!b)}finally{de(a)}}};function X2(n,e,t,r){let i=n?["ng-version","20.0.4"]:AV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[f_].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[f_].requiredVars;let v=h+1;g.create&&(g.targetIdx=v,(o??=[]).push(g)),g.update&&(g.targetIdx=v,(s??=[]).push(g))}}let l=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=fy(p);l.push(g)}return N_(0,null,ej(o,s),1,a,l,null,null,null,[i],null)}function ej(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function gS(n){let e=n[f_].kind;return e==="input"||e==="twoWay"}var df=class extends MA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Oh(t[le],Gt),this.location=pa(this._tNode,t),this.instance=xn(this._tNode.index,t)[Ft],this.hostView=this.changeDetectorRef=new Wi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=F_(r,i[le],i,e,t);this.previousInputValues.set(e,t);let s=xn(r.index,i);z_(s,1)}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Nn=(()=>{class n{static __NG_ELEMENT_ID__=nj}return n})();function nj(){let n=Tt();return HA(n,De())}var rj=Nn,$A=class extends rj{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pa(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){let e=C_(this._hostTNode,this._hostLView);if(FS(e)){let t=rf(e,this._hostLView),r=nf(e),i=t[le].data[r+8];return new Wo(i,t)}else return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=mS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=cS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,oS(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!VL(e),u;if(l)u=t;else{let R=t||{};u=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=l?e:new Qi(mr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let V=(l?p:this.parentInjector).get($e,null);V&&(o=V)}let g=mr(h.componentType??{}),v=cS(this._lContainer,g?.id??null),b=v?.firstChild??null,x=h.create(p,i,b,o,s,a);return this.insertImpl(x.hostView,u,oS(this._hostTNode,v)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(D0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[yt],u=new $A(l,l[An],l[yt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return S2(s,i,o,r),e.attachToViewContainerRef(),ly(Ky(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=mS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=u_(this._lContainer,t);r&&(tl(Ky(this._lContainer),t),EA(r[le],r))}detach(e){let t=this._adjustIndex(e,-1),r=u_(this._lContainer,t);return r&&tl(Ky(this._lContainer),t)!=null?new Wi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function mS(n){return n[sl]}function Ky(n){return n[sl]||(n[sl]=[])}function HA(n,e){let t,r=e[n.index];return Gn(r)?t=r:(t=xA(r,e,null,n),e[n.index]=t,k_(e,t)),oj(t,e,n,r),new $A(t,n,e)}function ij(n,e){let t=n[nt],r=t.createComment(""),i=Wn(e,n),o=t.parentNode(i);return lf(t,o,r,t.nextSibling(i),!1),r}var oj=cj,sj=()=>!1;function aj(n,e,t){return sj(n,e,t)}function cj(n,e,t,r){if(n[Hi])return;let i;t.type&8?i=Pn(r):i=ij(e,t),n[Hi]=i}var p_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},g_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Q_(e,t).matches!==null&&this.queries[t].setDirty()}},m_=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=mj(e):this.predicate=e}},v_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},y_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,lj(t,o)),this.matchTNodeWithReadOption(e,t,Xh(t,e,o,!1,!1))}else r===Dr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===pt||i===Nn||i===Dr&&t.type&4)this.addMatch(t.index,-2);else{let o=Xh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function lj(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function uj(n,e){return n.type&11?pa(n,e):n.type&4?bf(n,e):null}function dj(n,e,t,r){return t===-1?uj(e,n):t===-2?hj(n,e,r):ml(n,n[le],t,e)}function hj(n,e,t){if(t===pt)return pa(e,n);if(t===Dr)return bf(e,n);if(t===Nn)return HA(e,n)}function zA(n,e,t,r){let i=e[yr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let h=o[u];a.push(dj(e,h,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function __(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=zA(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-l];for(let p=Wt;p<h.length;p++){let g=h[p];g[$i]===g[yt]&&__(g[le],g,u,r)}if(h[Ho]!==null){let p=h[Ho];for(let g=0;g<p.length;g++){let v=p[g];__(v[le],v,u,r)}}}}}return r}function fj(n,e){return n[yr].queries[e].queryList}function pj(n,e,t){let r=new af((t&4)===4);return C0(n,e,r,r.destroy),(e[yr]??=new g_).queries.push(new p_(r))-1}function gj(n,e,t,r){let i=bt();if(i.firstCreatePass){let o=Tt();vj(i,new m_(e,t,r),o.index),yj(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return pj(i,De(),t)}function mj(n){return n.split(",").map(e=>e.trim())}function vj(n,e,t){n.queries===null&&(n.queries=new v_),n.queries.track(new y_(e,t))}function yj(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Q_(n,e){return n.queries.getByIndex(e)}function _j(n,e){let t=n[le],r=Q_(t,e);return r.crossesNgTemplate?__(t,n,e,[]):zA(t,n,r,e)}var vS=new Set;function Jo(n){vS.has(n)||(vS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Qo=class{},Cf=class{};var hf=class extends Qo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new uf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=hy(e);this._bootstrapComponents=aA(o.bootstrap),this._r3Injector=Vy(e,t,[{provide:Qo,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ff=class extends Cf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hf(this.moduleType,e,[])}};var yl=class extends Qo{injector;componentFactoryResolver=new uf(this);instance=null;constructor(e){super();let t=new Lo([...e.providers,{provide:Qo,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],e.parent||ia(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ma(n,e,t=null){return new yl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Ej=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=py(!1,t.type),i=r.length>0?ma([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(z($e))})}return n})();function at(n){return fa(()=>{let e=qA(n),t=ee(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===S_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Ej).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ri.Emulated,styles:n.styles||hn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jo("NgStandalone"),GA(t);let r=n.dependencies;return t.directiveDefs=yS(r,!1),t.pipeDefs=yS(r,!0),t.id=Tj(t),t})}function wj(n){return mr(n)||fy(n)}function Ij(n){return n!==null}function Yt(n){return fa(()=>({type:n.type,bootstrap:n.bootstrap||hn,declarations:n.declarations||hn,imports:n.imports||hn,exports:n.exports||hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Dj(n,e){if(n==null)return Ui;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=If.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function bj(n){if(n==null)return Ui;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ge(n){return fa(()=>{let e=qA(n);return GA(e),e})}function Sf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function qA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ui,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Dj(n.inputs,e),outputs:bj(n.outputs),debugInfo:null}}function GA(n){n.features?.forEach(e=>e(n))}function yS(n,e){if(!n)return null;let t=e?p0:wj;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Ij)}function Tj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cj(n){return Object.getPrototypeOf(n.prototype).constructor}function Qn(n){let e=Cj(n.type),t=!0,r=[n];for(;e;){let i;if(Er(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Qy(n.inputs),s.declaredInputs=Qy(n.declaredInputs),s.outputs=Qy(n.outputs);let a=i.hostBindings;a&&xj(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&Rj(n,l),u&&Pj(n,u),Sj(n,i),s0(n.outputs,i.outputs),Er(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qn&&(t=!1)}}e=Object.getPrototypeOf(e)}Aj(r)}function Sj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Aj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gl(i.hostAttrs,t=gl(t,i.hostAttrs))}}function Qy(n){return n===Ui?{}:n===hn?[]:n}function Rj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Pj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function xj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Nj(n,e,t,r,i,o,s,a,l){let u=e.consts,h=q_(e,n,4,s||null,a||null);Ry()&&OA(e,t,h,al(u,l),yA),h.mergedAttrs=gl(h.mergedAttrs,h.attrs),MS(e,h);let p=h.tView=N_(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Mj(n,e,t,r,i,o,s,a,l,u,h){let p=t+Gt,g=e.firstCreatePass?Nj(p,e,n,r,i,o,s,a,u):e.data[p];l&&(g.flags|=l),la(g,!1);let v=kj(e,n,g,t);qh()&&B_(e,n,v,g),wl(v,n);let b=xA(v,n,v,g);return n[p]=b,k_(n,b),aj(b,g,n),kh(g)&&O_(e,n,g),u!=null&&mA(n,g,h),g}function He(n,e,t,r,i,o,s,a){let l=De(),u=bt(),h=al(u.consts,o);return Mj(l,u,n,e,t,r,i,h,void 0,s,a),He}var kj=Oj;function Oj(n,e,t,r){return Gh(!0),e[nt].createComment("")}var Af=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Af||{}),Xo=new j(""),WA=!1,E_=class extends ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vy()&&(this.destroyRef=S(ti,{optional:!0})??void 0,this.pendingTasks=S(ni,{optional:!0})??void 0)}emit(e){let t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},be=E_;function KA(n){let e,t;function r(){n=hl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _S(n){return queueMicrotask(()=>n()),()=>{n=hl}}var Y_="isAngularZone",pf=Y_+"_ID",Fj=0,pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new be(!1);onMicrotaskEmpty=new be(!1);onStable=new be(!1);onError=new be(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=WA}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Y_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Lj,hl,hl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Lj={};function Z_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){KA(()=>{n.callbackScheduled=!1,w_(n),n.isCheckStableRunning=!0,Z_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),w_(n)}function jj(n){let e=()=>{Vj(n)},t=Fj++;n._inner=n._inner.fork({name:"angular",properties:{[Y_]:!0,[pf]:t,[pf+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(Uj(l))return r.invokeTask(o,s,a,l);try{return ES(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),wS(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return ES(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Bj(l)&&e(),wS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,w_(n),Z_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function w_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ES(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wS(n){n._nesting--,Z_(n)}var gf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new be;onMicrotaskEmpty=new be;onStable=new be;onError=new be;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Uj(n){return QA(n,"__ignore_ng_zone__")}function Bj(n){return QA(n,"__scheduler_tick__")}function QA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var J_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),YA=[0,1,2,3],ZA=(()=>{class n{ngZone=S(pe);scheduler=S(Xr);errorHandler=S(zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(Xo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ke(16),this.executing=!0;for(let r of YA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ke(17)}register(t){let{view:r}=t;r!==void 0?((r[$o]??=[]).push(t),ca(r),r[ie]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Af.AFTER_NEXT_RENDER,t):t()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),mf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$o];e&&(this.view[$o]=e.filter(t=>t!==this))}};function es(n,e){!e?.injector&&yy(es);let t=e?.injector??S(Ve);return Jo("NgAfterNextRender"),Hj(n,t,e,!0)}function $j(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Hj(n,e,t,r){let i=e.get(J_);i.impl??=e.get(ZA);let o=e.get(Xo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ti):null,a=e.get(Wh,null,{optional:!0}),l=new mf(i.impl,$j(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var X_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var eE=new j("");function ii(n){return!!n&&typeof n.then=="function"}function Rf(n){return!!n&&typeof n.subscribe=="function"}var tE=new j("");function Pf(n){return on([{provide:tE,multi:!0,useValue:n}])}var nE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(tE,{optional:!0})??[];injector=S(Ve);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=st(this.injector,i);if(ii(o))t.push(o);else if(Rf(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bl=new j("");function JA(){Iv(()=>{let n="";throw new $(600,n)})}function XA(n){return n.isBoundToModule}var zj=10;var oi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(Kt);afterRenderManager=S(J_);zonelessEnabled=S(dl);rootEffectScheduler=S(Hy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ne;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(ni);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Y(t=>!t))}constructor(){S(Xo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S($e);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ve.NULL){return this._injector.get(pe).run(()=>{ke(10);let s=t instanceof Tf;if(!this._injector.get(nE).done){let b="";throw new $(405,b)}let l;s?l=t:l=this._injector.get(Dl).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=XA(l)?void 0:this._injector.get(Qo),h=r||l.selector,p=l.create(i,[],h,u),g=p.location.nativeElement,v=p.injector.get(eE,null);return v?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),pl(this.components,p),v?.unregisterApplication(g)}),this._loadComponent(p),ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Af.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let t=de(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(t),this.afterTick.next(),ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(pn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<zj;)ke(14),this.synchronizeOnce(),ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!cl(i))continue;let o=r&&!this.zonelessEnabled?0:1;H_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;pl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(bl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yi(n,e,t,r){let i=De(),o=ul();if(Ki(i,o,e)){let s=bt(),a=zh();GV(a,i,n,e,t,r)}return Yi}function je(n,e,t){let r=De(),i=ul();if(Ki(r,i,e)){let o=bt(),s=zh();vA(s,r,n,e,r[nt],t)}return je}function IS(n,e,t,r,i){F_(e,n,t,i?"class":"style",r)}function M(n,e,t,r){let i=De(),o=bt(),s=Gt+n,a=i[nt],l=o.firstCreatePass?LA(s,o,i,e,yA,Ry(),t,r):o.data[s],u=qj(o,i,l,a,e,n);i[s]=u;let h=kh(l);return la(l,!0),dA(a,u,l),!j_(l)&&qh()&&B_(o,i,u,l),(S0()===0||h)&&wl(u,i),A0(),h&&(O_(o,i,l),tA(o,l,i)),r!==null&&mA(i,l),M}function k(){let n=Tt();xy()?k0():(n=n.parent,la(n,!1));let e=n;x0(e)&&N0(),R0();let t=bt();return t.firstCreatePass&&VA(t,e),e.classesWithoutHost!=null&&zL(e)&&IS(t,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qL(e)&&IS(t,e,De(),e.stylesWithoutHost,!1),k}function Sr(n,e,t,r){return M(n,e,t,r),k(),Sr}var qj=(n,e,t,r,i,o)=>(Gh(!0),lA(r,i,G0()));function Ct(){return De()}var Go=void 0;function Gj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Wj=["en",[["a","p"],["AM","PM"],Go],[["AM","PM"],Go,Go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Go,"{1} 'at' {0}",Go],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Gj],Yy={};function mn(n){let e=Kj(n),t=DS(e);if(t)return t;let r=e.split("-")[0];if(t=DS(r),t)return t;if(r==="en")return Wj;throw new $(701,!1)}function DS(n){return n in Yy||(Yy[n]=ei.ng&&ei.ng.common&&ei.ng.common.locales&&ei.ng.common.locales[n]),Yy[n]}var rt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(rt||{});function Kj(n){return n.toLowerCase().replace(/_/g,"-")}var Tl="en-US";var Qj=Tl;function eR(n){typeof n=="string"&&(Qj=n.toLowerCase().replace(/_/g,"-"))}function ve(n,e,t){let r=De(),i=bt(),o=Tt();return tR(i,r,r[nt],o,n,e,t),ve}function tR(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Wy(r,e,o),G2(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],v=h[p+1];l??=Wy(r,e,o),pS(r,e,g,v,i,l)}if(u&&u.length)for(let p of u)l??=Wy(r,e,o),pS(r,e,p,i,i,l)}}function ge(n=1){return q0(n)}function rE(n,e,t,r){gj(n,e,t,r)}function xf(n){let e=De(),t=bt(),r=Oy();Bh(r+1);let i=Q_(t,r);if(n.dirty&&I0(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=_j(e,r);n.reset(o,iV),n.notifyOnChanges()}return!0}return!1}function Nf(){return fj(De(),Oy())}function Mf(n){let e=O0();return Fh(e,Gt+n)}function Yh(n,e){return n<<17|e<<2}function Yo(n){return n>>17&32767}function Yj(n){return(n&2)==2}function Zj(n,e){return n&131071|e<<17}function I_(n){return n|2}function ha(n){return(n&131068)>>2}function Zy(n,e){return n&-131069|e<<2}function Jj(n){return(n&1)===1}function D_(n){return n|1}function Xj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yo(s),l=ha(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ra(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let g=Yo(n[a+1]);n[r+1]=Yh(g,a),g!==0&&(n[g+1]=Zy(n[g+1],r)),n[a+1]=Zj(n[a+1],r)}else n[r+1]=Yh(a,0),a!==0&&(n[a+1]=Zy(n[a+1],r)),a=r;else n[r+1]=Yh(l,0),a===0?a=r:n[l+1]=Zy(n[l+1],r),l=r;u&&(n[r+1]=I_(n[r+1])),bS(n,h,r,!0),bS(n,h,r,!1),eU(e,h,n,r,o),s=Yh(a,l),o?e.classBindings=s:e.styleBindings=s}function eU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ra(o,e)>=0&&(t[r+1]=D_(t[r+1]))}function bS(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yo(i):ha(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];tU(l,e)&&(a=!0,n[s+1]=r?D_(u):I_(u)),s=r?Yo(u):ha(u)}a&&(n[t+1]=r?I_(i):D_(i))}function tU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ra(n,e)>=0:!1}function Yn(n,e){return nU(n,e,null,!0),Yn}function nU(n,e,t,r){let i=De(),o=bt(),s=L0(2);if(o.firstUpdatePass&&iU(o,n,s,r),e!==Tr&&Ki(i,s,e)){let a=o.data[qo()];lU(o,a,i,i[nt],n,i[s+1]=uU(e,t),r,s)}}function rU(n,e){return e>=n.expandoStartIndex}function iU(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[qo()],s=rU(n,t);dU(o,r)&&e===null&&!s&&(e=!1),e=oU(i,o,e,r),Xj(i,o,e,t,s,r)}}function oU(n,e,t,r){let i=B0(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Jy(null,n,e,t,r),t=_l(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Jy(i,n,e,t,r),o===null){let l=sU(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Jy(null,n,e,l[1],r),l=_l(l,e.attrs,r),aU(n,e,r,l))}else o=cU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function sU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ha(r)!==0)return n[Yo(r)]}function aU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yo(i)]=r}function cU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=_l(r,s,t)}return _l(r,e.attrs,t)}function Jy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=_l(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function _l(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),f0(n,s,t?!0:e[++o]))}return n===void 0?null:n}function lU(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=Jj(u)?TS(l,e,t,i,ha(u),s):void 0;if(!vf(h)){vf(o)||Yj(u)&&(o=TS(l,null,t,i,a,s));let p=Iy(qo(),t);p2(r,s,p,i,o)}}function TS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,g=t[i+1];g===Tr&&(g=p?hn:void 0);let v=p?Nh(g,r):h===r?g:void 0;if(u&&!vf(v)&&(v=Nh(l,r)),vf(v)&&(a=v,s))return a;let b=n[i+1];i=s?Yo(b):ha(b)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Nh(l,r))}return a}function vf(n){return n!==void 0}function uU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=rn(Il(n)))),n}function dU(n,e){return(n.flags&(e?8:16))!==0}function U(n,e=""){let t=De(),r=bt(),i=n+Gt,o=r.firstCreatePass?q_(r,i,1,e,null):r.data[i],s=hU(r,t,o,e,n);t[i]=s,qh()&&B_(r,t,s,o),la(o,!1)}var hU=(n,e,t,r,i)=>(Gh(!0),RV(e[nt],r));function fU(n,e,t,r=""){return Ki(n,ul(),t)?e+el(t)+r:Tr}function St(n){return Mn("",n),St}function Mn(n,e,t){let r=De(),i=fU(r,n,e,t);return i!==Tr&&pU(r,qo(),i),Mn}function pU(n,e,t){let r=Iy(e,n);PV(n[nt],r,t)}function si(n,e,t){Uy(e)&&(e=e());let r=De(),i=ul();if(Ki(r,i,e)){let o=bt(),s=zh();vA(s,r,n,e,r[nt],t)}return si}function Zi(n,e){let t=Uy(n);return t&&n.set(e),t}function ai(n,e){let t=De(),r=bt(),i=Tt();return tR(r,t,t[nt],i,n,e),ai}function gU(n,e,t){let r=bt();if(r.firstCreatePass){let i=Er(n);b_(t,r.data,r.blueprint,i,!0),b_(e,r.data,r.blueprint,i,!1)}}function b_(n,e,t,r,i){if(n=Dt(n),Array.isArray(n))for(let o=0;o<n.length;o++)b_(n[o],e,t,r,i);else{let o=bt(),s=De(),a=Tt(),l=Fo(n)?n:Dt(n.provide),u=my(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Fo(n)||!n.multi){let v=new Ko(u,i,K),b=e_(l,e,i?h:h+g,p);b===-1?(n_(sf(a,s),o,l),Xy(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[b]=v,s[b]=v)}else{let v=e_(l,e,h+g,p),b=e_(l,e,h,h+g),x=v>=0&&t[v],R=b>=0&&t[b];if(i&&!R||!i&&!x){n_(sf(a,s),o,l);let V=yU(i?vU:mU,t.length,i,r,u);!i&&R&&(t[b].providerFactory=V),Xy(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=nR(t[i?b:v],u,!i&&r);Xy(o,n,v>-1?v:b,V)}!i&&r&&R&&t[b].componentProviders++}}}function Xy(n,e,t,r){let i=Fo(e),o=y0(e);if(i||o){let l=(o?Dt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function nR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function e_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function mU(n,e,t,r){return T_(this.multi,[])}function vU(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ml(t,t[le],this.providerFactory.index,r);o=a.slice(0,s),T_(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],T_(i,o);return o}function T_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function yU(n,e,t,r,i){let o=new Ko(n,t,K);return o.multi=[],o.index=e,o.componentProviders=0,nR(o,i,r&&!t),o}function Ar(n,e=[]){return t=>{t.providersResolver=(r,i)=>gU(r,i?i(n):n,e)}}function iE(n,e,t){let r=jh()+n,i=De();return i[r]===Tr?K_(i,r,t?e.call(t):e()):z2(i,r)}function rR(n,e){let t=n[e];return t===Tr?void 0:t}function _U(n,e,t,r,i,o){let s=e+t;return Ki(n,s,i)?K_(n,s+1,o?r.call(o,i):r(i)):rR(n,s+1)}function EU(n,e,t,r,i,o,s){let a=e+t;return q2(n,a,i,o)?K_(n,a+2,s?r.call(s,i,o):r(i,o)):rR(n,a+2)}function Zt(n,e){let t=bt(),r,i=n+Gt;t.firstCreatePass?(r=wU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Vi(r.type,!0)),s,a=qt(K);try{let l=of(!1),u=o();return of(l),Dy(t,De(),i,u),u}finally{qt(a)}}function wU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function sn(n,e,t){let r=n+Gt,i=De(),o=Fh(i,r);return iR(i,r)?_U(i,jh(),e,o.transform,t,o):o.transform(t)}function oE(n,e,t,r){let i=n+Gt,o=De(),s=Fh(o,i);return iR(o,i)?EU(o,jh(),e,s.transform,t,r,s):s.transform(t,r)}function iR(n,e){return n[le].data[e].pure}function kf(n,e){return bf(n,e)}var yf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sE=(()=>{class n{compileModuleSync(t){return new ff(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=hy(t),o=aA(i.declarations).reduce((s,a)=>{let l=mr(a);return l&&s.push(new Qi(l)),s},[]);return new yf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var IU=(()=>{class n{zone=S(pe);changeDetectionScheduler=S(Xr);applicationRef=S(oi);applicationErrorHandler=S(Kt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oR=new j("",{factory:()=>!1});function aE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(ee(F({},lE()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:Bi,multi:!0,useFactory:()=>{let r=S(IU,{optional:!0});return()=>r.initialize()}},{provide:Bi,multi:!0,useFactory:()=>{let r=S(DU);return()=>{r.initialize()}}},e===!0?{provide:By,useValue:!0}:[],{provide:$y,useValue:t??WA},{provide:Kt,useFactory:()=>{let r=S(pe),i=S($e),o;return s=>{o??=i.get(zn),r.runOutsideAngular(()=>o.handleError(s))}}}]}function cE(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=aE({ngZoneFactory:()=>{let i=lE(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Jo("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return on([{provide:oR,useValue:!0},{provide:dl,useValue:!1},r])}function lE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DU=(()=>{class n{subscription=new Pe;initialized=!1;zone=S(pe);pendingTasks=S(ni);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sR=(()=>{class n{applicationErrorHandler=S(Kt);appRef=S(oi);taskService=S(ni);ngZone=S(pe);zonelessEnabled=S(dl);tracing=S(Xo,{optional:!0});disableScheduling=S(By,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S($y,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?_S:KA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_S(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bU(){return typeof $localize<"u"&&$localize.locale||Tl}var Cl=new j("",{providedIn:"root",factory:()=>S(Cl,{optional:!0,skipSelf:!0})||bU()});function an(n){return n0(n)}function va(n,e){return Hd(n,e?.equal)}var aR=class{[Mt];constructor(e){this[Mt]=e}destroy(){this[Mt].destroy()}};var hR=Symbol("InputSignalNode#UNSET"),BU=ee(F({},zd),{transformFn:void 0,applyValueToInputSignal(n,e){zs(n,e)}});function fR(n,e){let t=Object.create(BU);t.value=n,t.transformFn=e?.transform;function r(){if($s(t),t.value===hR){let i=null;throw new $(-950,i)}return t.value}return r[Mt]=t,r}var Ff=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>El(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},$U=new j("");$U.__NG_ELEMENT_ID__=n=>{let e=Tt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new $(204,!1)};function cR(n,e){return fR(n,e)}function HU(n){return fR(hR,n)}var pR=(cR.required=HU,cR);var ts=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},gR=new ts("20.0.4");var uE=new j(""),zU=new j("");function Sl(n){return!n.moduleRef}function qU(n){let e=Sl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Sl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Sl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(uE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(uE);s.add(o),n.moduleRef.onDestroy(()=>{pl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return WU(r,t,()=>{let o=e.get(nE);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cl,Tl);if(eR(s||Tl),!e.get(zU,!0))return Sl(n)?e.get(oi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Sl(n)){let l=e.get(oi);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return GU?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var GU;function WU(n,e,t){try{let r=t();return ii(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Of=null;function KU(n=[],e){return Ve.create({name:e,providers:[{provide:nl,useValue:"platform"},{provide:uE,useValue:new Set([()=>Of=null])},...n]})}function QU(n=[]){if(Of)return Of;let e=KU(n);return Of=e,JA(),YU(e),e}function YU(n){let e=n.get(_f,null);st(n,()=>{e?.forEach(t=>t())})}function gE(){return!1}var vn=(()=>{class n{static __NG_ELEMENT_ID__=ZU}return n})();function ZU(n){return JU(Tt(),De(),(n&16)===16)}function JU(n,e,t){if(zi(n)&&!t){let r=xn(n.index,e);return new Wi(r,r)}else if(n.type&175){let r=e[Rn];return new Wi(r,e)}return null}var dE=class{constructor(){}supports(e){return W_(e)}create(e){return new hE(e)}},XU=(n,e)=>e,hE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||XU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<lR(r,i,o)?t:r,a=lR(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=l-i;if(u!=h){for(let g=0;g<u;g++){let v=g<o.length?o[g]:o[g]=0,b=v+g;h<=b&&b<u&&(o[g]=v+1)}let p=s.previousIndex;o[p]=h-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!W_(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,jA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new fE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},fE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},pE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Lf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new pE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function lR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function uR(){return new Vf([new dE])}var Vf=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:uR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||uR()),deps:[[n,new AS,new Qt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function mR(n){ke(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=QU(r),o=[aE({}),{provide:Xr,useExisting:sR},K0,...t||[]],s=new yl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return qU({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ke(9)}}function cn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function mE(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function vR(n,e){let t=mr(n),r=e.elementInjector||ia();return new Qi(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function yR(n){let e=mr(n);if(!e)return null;let t=new Qi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var wR=null;function kn(){return wR}function vE(n){wR??=n}var Al=class{},Rl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(IR),providedIn:"platform"})}return n})(),yE=new j(""),IR=(()=>{class n extends Rl{_location;_history;_doc=S(Me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kn().getBaseHref(this._doc)}onPopState(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function jf(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function _R(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Zn(n){return n&&n[0]!=="?"?`?${n}`:n}var Jn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(Bf),providedIn:"root"})}return n})(),Uf=new j(""),Bf=(()=>{class n extends Jn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(Me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(z(Rl),z(Uf,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ji=(()=>{class n{_subject=new ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=nB(_R(ER(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zn(r))}normalize(t){return n.stripTrailingSlash(tB(this._basePath,ER(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Zn;static joinWithSlash=jf;static stripTrailingSlash=_R;static \u0275fac=function(r){return new(r||n)(z(Jn))};static \u0275prov=L({token:n,factory:()=>eB(),providedIn:"root"})}return n})();function eB(){return new Ji(z(Jn))}function tB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ER(n){return n.replace(/\/index.html$/,"")}function nB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var bE=(()=>{class n extends Jn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=jf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(z(Rl),z(Uf,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var Vt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Vt||{}),Fe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Fe||{}),ln=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ln||{}),li={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function CR(n){return mn(n)[rt.LocaleId]}function SR(n,e,t){let r=mn(n),i=[r[rt.DayPeriodsFormat],r[rt.DayPeriodsStandalone]],o=On(i,e);return On(o,t)}function AR(n,e,t){let r=mn(n),i=[r[rt.DaysFormat],r[rt.DaysStandalone]],o=On(i,e);return On(o,t)}function RR(n,e,t){let r=mn(n),i=[r[rt.MonthsFormat],r[rt.MonthsStandalone]],o=On(i,e);return On(o,t)}function PR(n,e){let r=mn(n)[rt.Eras];return On(r,e)}function Pl(n,e){let t=mn(n);return On(t[rt.DateFormat],e)}function xl(n,e){let t=mn(n);return On(t[rt.TimeFormat],e)}function Nl(n,e){let r=mn(n)[rt.DateTimeFormat];return On(r,e)}function Ml(n,e){let t=mn(n),r=t[rt.NumberSymbols][e];if(typeof r>"u"){if(e===li.CurrencyDecimal)return t[rt.NumberSymbols][li.Decimal];if(e===li.CurrencyGroup)return t[rt.NumberSymbols][li.Group]}return r}function xR(n){if(!n[rt.ExtraData])throw new $(2303,!1)}function NR(n){let e=mn(n);return xR(e),(e[rt.ExtraData][2]||[]).map(r=>typeof r=="string"?_E(r):[_E(r[0]),_E(r[1])])}function MR(n,e,t){let r=mn(n);xR(r);let i=[r[rt.ExtraData][0],r[rt.ExtraData][1]],o=On(i,e)||[];return On(o,t)||[]}function On(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new $(2304,!1)}function _E(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var rB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$f={},iB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function kR(n,e,t,r){let i=fB(n);e=ci(t,e)||e;let s=[],a;for(;e;)if(a=iB.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=FR(r,l),i=hB(i,r));let u="";return s.forEach(h=>{let p=uB(h);u+=p?p(i,t,l):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Wf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ci(n,e){let t=CR(n);if($f[t]??={},$f[t][e])return $f[t][e];let r="";switch(e){case"shortDate":r=Pl(n,ln.Short);break;case"mediumDate":r=Pl(n,ln.Medium);break;case"longDate":r=Pl(n,ln.Long);break;case"fullDate":r=Pl(n,ln.Full);break;case"shortTime":r=xl(n,ln.Short);break;case"mediumTime":r=xl(n,ln.Medium);break;case"longTime":r=xl(n,ln.Long);break;case"fullTime":r=xl(n,ln.Full);break;case"short":let i=ci(n,"shortTime"),o=ci(n,"shortDate");r=Hf(Nl(n,ln.Short),[i,o]);break;case"medium":let s=ci(n,"mediumTime"),a=ci(n,"mediumDate");r=Hf(Nl(n,ln.Medium),[s,a]);break;case"long":let l=ci(n,"longTime"),u=ci(n,"longDate");r=Hf(Nl(n,ln.Long),[l,u]);break;case"full":let h=ci(n,"fullTime"),p=ci(n,"fullDate");r=Hf(Nl(n,ln.Full),[h,p]);break}return r&&($f[t][e]=r),r}function Hf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Xn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function oB(n,e){return Xn(n,3).substring(0,e)}function ct(n,e,t=0,r=!1,i=!1){return function(o,s){let a=sB(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return oB(a,e);let l=Ml(s,li.MinusSign);return Xn(a,e,l,r,i)}}function sB(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function Ue(n,e,t=Vt.Format,r=!1){return function(i,o){return aB(i,o,n,e,t,r)}}function aB(n,e,t,r,i,o){switch(t){case 2:return RR(e,i,r)[n.getMonth()];case 1:return AR(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=NR(e),h=MR(e,i,r),p=u.findIndex(g=>{if(Array.isArray(g)){let[v,b]=g,x=s>=v.hours&&a>=v.minutes,R=s<b.hours||s===b.hours&&a<b.minutes;if(v.hours<b.hours){if(x&&R)return!0}else if(x||R)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return SR(e,i,r)[s<12?0:1];case 3:return PR(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new $(2302,!1)}}function zf(n){return function(e,t,r){let i=-1*r,o=Ml(t,li.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xn(s,2,o)+Xn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Xn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Xn(s,2,o)+":"+Xn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Xn(s,2,o)+":"+Xn(Math.abs(i%60),2,o);default:throw new $(2302,!1)}}}var cB=0,Gf=4;function lB(n){let e=Wf(n,cB,1).getDay();return Wf(n,0,1+(e<=Gf?Gf:Gf+7)-e)}function OR(n){let e=n.getDay(),t=e===0?-3:Gf-e;return Wf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function EE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=OR(t),s=lB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Xn(i,n,Ml(r,li.MinusSign))}}function qf(n,e=!1){return function(t,r){let o=OR(t).getFullYear();return Xn(o,n,Ml(r,li.MinusSign),e)}}var wE={};function uB(n){if(wE[n])return wE[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ue(3,Fe.Abbreviated);break;case"GGGG":e=Ue(3,Fe.Wide);break;case"GGGGG":e=Ue(3,Fe.Narrow);break;case"y":e=ct(0,1,0,!1,!0);break;case"yy":e=ct(0,2,0,!0,!0);break;case"yyy":e=ct(0,3,0,!1,!0);break;case"yyyy":e=ct(0,4,0,!1,!0);break;case"Y":e=qf(1);break;case"YY":e=qf(2,!0);break;case"YYY":e=qf(3);break;case"YYYY":e=qf(4);break;case"M":case"L":e=ct(1,1,1);break;case"MM":case"LL":e=ct(1,2,1);break;case"MMM":e=Ue(2,Fe.Abbreviated);break;case"MMMM":e=Ue(2,Fe.Wide);break;case"MMMMM":e=Ue(2,Fe.Narrow);break;case"LLL":e=Ue(2,Fe.Abbreviated,Vt.Standalone);break;case"LLLL":e=Ue(2,Fe.Wide,Vt.Standalone);break;case"LLLLL":e=Ue(2,Fe.Narrow,Vt.Standalone);break;case"w":e=EE(1);break;case"ww":e=EE(2);break;case"W":e=EE(1,!0);break;case"d":e=ct(2,1);break;case"dd":e=ct(2,2);break;case"c":case"cc":e=ct(7,1);break;case"ccc":e=Ue(1,Fe.Abbreviated,Vt.Standalone);break;case"cccc":e=Ue(1,Fe.Wide,Vt.Standalone);break;case"ccccc":e=Ue(1,Fe.Narrow,Vt.Standalone);break;case"cccccc":e=Ue(1,Fe.Short,Vt.Standalone);break;case"E":case"EE":case"EEE":e=Ue(1,Fe.Abbreviated);break;case"EEEE":e=Ue(1,Fe.Wide);break;case"EEEEE":e=Ue(1,Fe.Narrow);break;case"EEEEEE":e=Ue(1,Fe.Short);break;case"a":case"aa":case"aaa":e=Ue(0,Fe.Abbreviated);break;case"aaaa":e=Ue(0,Fe.Wide);break;case"aaaaa":e=Ue(0,Fe.Narrow);break;case"b":case"bb":case"bbb":e=Ue(0,Fe.Abbreviated,Vt.Standalone,!0);break;case"bbbb":e=Ue(0,Fe.Wide,Vt.Standalone,!0);break;case"bbbbb":e=Ue(0,Fe.Narrow,Vt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ue(0,Fe.Abbreviated,Vt.Format,!0);break;case"BBBB":e=Ue(0,Fe.Wide,Vt.Format,!0);break;case"BBBBB":e=Ue(0,Fe.Narrow,Vt.Format,!0);break;case"h":e=ct(3,1,-12);break;case"hh":e=ct(3,2,-12);break;case"H":e=ct(3,1);break;case"HH":e=ct(3,2);break;case"m":e=ct(4,1);break;case"mm":e=ct(4,2);break;case"s":e=ct(5,1);break;case"ss":e=ct(5,2);break;case"S":e=ct(6,1);break;case"SS":e=ct(6,2);break;case"SSS":e=ct(6,3);break;case"Z":case"ZZ":case"ZZZ":e=zf(0);break;case"ZZZZZ":e=zf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=zf(2);break;default:return null}return wE[n]=e,e}function FR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function dB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function hB(n,e,t){let i=n.getTimezoneOffset(),o=FR(e,i);return dB(n,-1*(o-i))}function fB(n){if(DR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Wf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(rB))return pB(r)}let e=new Date(n);if(!DR(e))throw new $(2302,!1);return e}function pB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,u),e}function DR(n){return n instanceof Date&&!isNaN(n.valueOf())}var Kf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ya=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Kf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),bR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);bR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(K(Nn),K(Dr),K(Vf))};static \u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function bR(n,e){n.context.$implicit=e.item}var yn=(()=>{class n{_viewContainer;_context=new Qf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){TR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){TR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(K(Nn),K(Dr))};static \u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qf=class{$implicit=null;ngIf=null};function TR(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}function LR(n,e){return new $(2100,!1)}var IE=class{createSubscription(e,t,r){return an(()=>e.subscribe({next:t,error:r}))}dispose(e){an(()=>e.unsubscribe())}},DE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},gB=new DE,mB=new IE,er=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=S(Kt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ii(t))return gB;if(Rf(t))return mB;throw LR(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(K(vn,16))};static \u0275pipe=Sf({name:"async",type:n,pure:!1})}return n})();var vB="mediumDate",VR=new j(""),jR=new j(""),TE=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??vB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return kR(t,s,o||this.locale,a)}catch(s){throw LR(n,s.message)}}static \u0275fac=function(r){return new(r||n)(K(Cl,16),K(VR,24),K(jR,24))};static \u0275pipe=Sf({name:"date",type:n,pure:!0})}return n})();var jt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({})}return n})();function kl(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var rs=class{};var SE="browser",yB="server";function UR(n){return n===SE}function BR(n){return n===yB}var $R=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new CE(S(Me),window)})}return n})(),CE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ee(F({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=_B(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ee(F({},t),{left:i-s[0],top:o-s[1]}))}};function _B(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Jf=new j(""),xE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(z(Jf),z(pe))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Ol=class{_doc;constructor(e){this._doc=e}manager},Yf="ng-app-id";function HR(n){for(let e of n)e.remove()}function zR(n,e){let t=e.createElement("style");return t.textContent=n,t}function EB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Yf}="${e}"],link[${Yf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Yf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function RE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var NE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=BR(o),EB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,zR);r?.forEach(i=>this.addUsage(i,this.external,RE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(HR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])HR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,zR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,RE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Yf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(z(Me),z(ga),z(Ef,8),z(br))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),AE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ME=/%COMP%/g;var GR="%COMP%",wB=`_nghost-${GR}`,IB=`_ngcontent-${GR}`,DB=!0,bB=new j("",{providedIn:"root",factory:()=>DB});function TB(n){return IB.replace(ME,n)}function CB(n){return wB.replace(ME,n)}function WR(n,e){return e.map(t=>t.replace(ME,n))}var kE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Fl(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Zf?i.applyToHost(t):i instanceof Ll&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case ri.Emulated:o=new Zf(l,u,r,this.appId,h,s,a,p,g);break;case ri.ShadowDom:return new PE(l,u,t,r,s,a,this.nonce,p,g);default:o=new Ll(l,u,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(z(xE),z(NE),z(ga),z(bB),z(Me),z(br),z(pe),z(Ef),z(Xo,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Fl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(AE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=AE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=AE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(t,r,i&Ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var PE=class extends Fl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=WR(i.id,h);for(let g of h){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=g,this.shadowRoot.appendChild(v)}let p=i.getExternalStyles?.();if(p)for(let g of p){let v=RE(g,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ll=class extends Fl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?WR(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zf=class extends Ll{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,l,u,h),this.contentAttr=TB(h),this.hostAttr=CB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Xf=class n extends Al{supportsDOMEvents=!0;static makeCurrent(){vE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SB();return t==null?null:AB(t)}resetBaseElement(){Vl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kl(document.cookie,e)}},Vl=null;function SB(){return Vl=Vl||document.head.querySelector("base"),Vl?Vl.getAttribute("href"):null}function AB(n){return new URL(n,document.baseURI).pathname}var RB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),QR=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(z(Me))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),KR=["alt","control","meta","shift"],PB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},YR=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),KR.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=PB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KR.forEach(s=>{if(s!==i){let a=xB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(z(Me))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function OE(n,e){return mR(F({rootComponent:n},NB(e)))}function NB(n){return{appProviders:[...LB,...n?.providers??[]],platformProviders:FB}}function MB(){Xf.makeCurrent()}function kB(){return new zn}function OB(){return A_(document),document}var FB=[{provide:br,useValue:SE},{provide:_f,useValue:MB,multi:!0},{provide:Me,useFactory:OB}];var LB=[{provide:nl,useValue:"root"},{provide:zn,useFactory:kB},{provide:Jf,useClass:QR,multi:!0,deps:[Me]},{provide:Jf,useClass:YR,multi:!0,deps:[Me]},kE,NE,xE,{provide:pn,useExisting:kE},{provide:rs,useClass:RB},[]];var Ea=class{},jl=class{},Xi=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var tp=class{encodeKey(e){return ZR(e)}encodeValue(e){return ZR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var jB=/%(\d[a-f0-9])/gi,UB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZR(n){return encodeURIComponent(n).replace(jB,(e,t)=>UB[t]??e)}function ep(n){return`${n}`}var ui=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new tp,e.fromString){if(e.fromObject)throw new $(2805,!1);this.map=VB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ep):[ep(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ep(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ep(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var np=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function BB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function XR(n){return typeof Blob<"u"&&n instanceof Blob}function eP(n){return typeof FormData<"u"&&n instanceof FormData}function $B(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var tP="Content-Type",nP="Accept",rP="X-Request-URL",iP="text/plain",oP="application/json",HB=`${oP}, ${iP}, */*`,_a=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(BB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Xi,this.context??=new np,!this.params)this.params=new ui,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JR(this.body)||XR(this.body)||eP(this.body)||$B(this.body)?this.body:this.body instanceof ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eP(this.body)?null:XR(this.body)?this.body.type||null:JR(this.body)?null:typeof this.body=="string"?iP:this.body instanceof ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?oP:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((v,b)=>v.set(b,e.setHeaders[b]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((v,b)=>v.set(b,e.setParams[b]),p)),new n(t,r,a,{params:p,headers:h,context:g,reportProgress:u,responseType:i,withCredentials:l,transferCache:s,keepalive:o})}},os=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(os||{}),wa=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Xi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},rp=class n extends wa{constructor(e={}){super(e)}type=os.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ul=class n extends wa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=os.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Bl=class extends wa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zB=200,qB=204;function FE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Ia=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof _a)o=t;else{let l;i.headers instanceof Xi?l=i.headers:l=new Xi(i.headers);let u;i.params&&(i.params instanceof ui?u=i.params:u=new ui({fromObject:i.params})),o=new _a(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=G(o).pipe(fr(l=>this.handler.handle(l)));if(t instanceof _a||i.observe==="events")return s;let a=s.pipe(ft(l=>l instanceof Ul));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new $(2806,!1);return l.body}));case"blob":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new $(2807,!1);return l.body}));case"text":return a.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new $(2808,!1);return l.body}));case"json":default:return a.pipe(Y(l=>l.body))}case"response":return a;default:throw new $(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ui().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,FE(i,r))}post(t,r,i={}){return this.request("POST",t,FE(i,r))}put(t,r,i={}){return this.request("PUT",t,FE(i,r))}static \u0275fac=function(r){return new(r||n)(z(Ea))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var GB=new j("");function WB(n,e){return e(n)}function KB(n,e,t){return(r,i)=>st(t,()=>e(r,o=>n(o,i)))}var sP=new j(""),aP=new j(""),cP=new j("",{providedIn:"root",factory:()=>!0});var ip=(()=>{class n extends Ea{backend;injector;chain=null;pendingTasks=S(Gi);contributeToStability=S(cP);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(sP),...this.injector.get(aP,[])]));this.chain=r.reduceRight((i,o)=>KB(i,o,this.injector),WB)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Mo(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(z(jl),z($e))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var QB=/^\)\]\}',?\n/,YB=RegExp(`^${rP}:`,"m");function ZB(n){return"responseURL"in n&&n.responseURL?n.responseURL:YB.test(n.getAllResponseHeaders())?n.getResponseHeader(rP):null}var LE=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new $(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?ce(r.\u0275loadImpl()):G(null)).pipe(Ie(()=>new Q(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,R)=>s.setRequestHeader(x,R.join(","))),t.headers.has(nP)||s.setRequestHeader(nP,HB),!t.headers.has(tP)){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader(tP,x)}if(t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let x=s.statusText||"OK",R=new Xi(s.getAllResponseHeaders()),V=ZB(s)||t.url;return l=new rp({headers:R,status:s.status,statusText:x,url:V}),l},h=()=>{let{headers:x,status:R,statusText:V,url:Z}=u(),W=null;R!==qB&&(W=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=W?zB:0);let we=R>=200&&R<300;if(t.responseType==="json"&&typeof W=="string"){let it=W;W=W.replace(QB,"");try{W=W!==""?JSON.parse(W):null}catch(Re){W=it,we&&(we=!1,W={error:Re,text:W})}}we?(o.next(new Ul({body:W,headers:x,status:R,statusText:V,url:Z||void 0})),o.complete()):o.error(new Bl({error:W,headers:x,status:R,statusText:V,url:Z||void 0}))},p=x=>{let{url:R}=u(),V=new Bl({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(V)},g=!1,v=x=>{g||(o.next(u()),g=!0);let R={type:os.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(R.total=x.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},b=x=>{let R={type:os.UploadProgress,loaded:x.loaded};x.lengthComputable&&(R.total=x.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:os.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(z(rs))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),lP=new j(""),JB="XSRF-TOKEN",XB=new j("",{providedIn:"root",factory:()=>JB}),e$="X-XSRF-TOKEN",t$=new j("",{providedIn:"root",factory:()=>e$}),$l=class{},n$=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=kl(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(z(Me),z(XB))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function r$(n,e){let t=n.url.toLowerCase();if(!S(lP)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=S($l).getToken(),i=S(t$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function VE(...n){let e=[Ia,LE,ip,{provide:Ea,useExisting:ip},{provide:jl,useFactory:()=>S(GB,{optional:!0})??S(LE)},{provide:sP,useValue:r$,multi:!0},{provide:lP,useValue:!0},{provide:$l,useClass:n$}];for(let t of n)e.push(...t.\u0275providers);return on(e)}var dP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(z(Me))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ue="primary",tu=Symbol("RouteTitle"),HE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function cs(n){return new HE(n)}function _P(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function o$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rr(n[t],e[t]))return!1;return!0}function Rr(n,e){let t=n?zE(n):void 0,r=e?zE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!EP(n[i],e[i]))return!1;return!0}function zE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function EP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function wP(n){return n.length>0?n[n.length-1]:null}function di(n){return mh(n)?n:ii(n)?ce(Promise.resolve(n)):G(n)}var s$={exact:DP,subset:bP},IP={exact:a$,subset:c$,ignored:()=>!0};function hP(n,e,t){return s$[t.paths](n.root,e.root,t.matrixParams)&&IP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function a$(n,e){return Rr(n,e)}function DP(n,e,t){if(!ss(n.segments,e.segments)||!ap(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DP(n.children[r],e.children[r],t))return!1;return!0}function c$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>EP(n[t],e[t]))}function bP(n,e,t){return TP(n,e,e.segments,t)}function TP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ss(i,t)||e.hasChildren()||!ap(i,t,r))}else if(n.segments.length===t.length){if(!ss(n.segments,t)||!ap(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ss(n.segments,i)||!ap(n.segments,i,r)||!n.children[ue]?!1:TP(n.children[ue],e,o,r)}}function ap(n,e,t){return e.every((r,i)=>IP[t](n[i].parameters,r.parameters))}var xr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){return d$.serialize(this)}},xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cp(this)}},eo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=cs(this.parameters),this._parameterMap}toString(){return SP(this)}};function l$(n,e){return ss(n,e)&&n.every((t,r)=>Rr(t.parameters,e[r].parameters))}function ss(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function u$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var ls=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new to,providedIn:"root"})}return n})(),to=class{parse(e){let t=new GE(e);return new xr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hl(e.root,!0)}`,r=p$(e.queryParams),i=typeof e.fragment=="string"?`#${h$(e.fragment)}`:"";return`${t}${r}${i}`}},d$=new to;function cp(n){return n.segments.map(e=>SP(e)).join("/")}function Hl(n,e){if(!n.hasChildren())return cp(n);if(e){let t=n.children[ue]?Hl(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${Hl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=u$(n,(r,i)=>i===ue?[Hl(n.children[ue],!1)]:[`${i}:${Hl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${cp(n)}/${t[0]}`:`${cp(n)}/(${t.join("//")})`}}function CP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function op(n){return CP(n).replace(/%3B/gi,";")}function h$(n){return encodeURI(n)}function qE(n){return CP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lp(n){return decodeURIComponent(n)}function fP(n){return lp(n.replace(/\+/g,"%20"))}function SP(n){return`${qE(n.path)}${f$(n.parameters)}`}function f$(n){return Object.entries(n).map(([e,t])=>`;${qE(e)}=${qE(t)}`).join("")}function p$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${op(t)}=${op(i)}`).join("&"):`${op(t)}=${op(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var g$=/^[^\/()?;#]+/;function jE(n){let e=n.match(g$);return e?e[0]:""}var m$=/^[^\/()?;=#]+/;function v$(n){let e=n.match(m$);return e?e[0]:""}var y$=/^[^=?&#]+/;function _$(n){let e=n.match(y$);return e?e[0]:""}var E$=/^[^&#]+/;function w$(n){let e=n.match(E$);return e?e[0]:""}var GE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new xe(e,t)),r}parseSegment(){let e=jE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new eo(lp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=v$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=jE(this.remaining);i&&(r=i,this.capture(r))}e[lp(t)]=lp(r)}parseQueryParam(e){let t=_$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=w$(this.remaining);s&&(r=s,this.capture(r))}let i=fP(t),o=fP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function AP(n){return n.segments.length>0?new xe([],{[ue]:n}):n}function RP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=RP(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return I$(t)}function I$(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new xe(n.segments.concat(e.segments),e.children)}return n}function no(n){return n instanceof xr}function PP(n,e,t=null,r=null){let i=xP(n);return NP(i,e,t,r)}function xP(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=AP(r);return e??i}function NP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return UE(i,i,i,t,r);let o=D$(e);if(o.toRoot())return UE(i,i,new xe([],{}),t,r);let s=b$(o,i,n),a=s.processChildren?ql(s.segmentGroup,s.index,o.commands):kP(s.segmentGroup,s.index,o.commands);return UE(i,s.segmentGroup,a,t,r)}function up(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wl(n){return typeof n=="object"&&n!=null&&n.outlets}function UE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=MP(n,e,t);let a=AP(RP(s));return new xr(a,o,i)}function MP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=MP(o,e,t)}),new xe(n.segments,r)}var dp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&up(r[0]))throw new $(4003,!1);let i=r.find(Wl);if(i&&i!==wP(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function D$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new dp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dp(t,e,r)}var Ta=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function b$(n,e,t){if(n.isAbsolute)return new Ta(e,!0,0);if(!t)return new Ta(e,!1,NaN);if(t.parent===null)return new Ta(t,!0,0);let r=up(n.commands[0])?0:1,i=t.segments.length-1+r;return T$(t,i,n.numberOfDoubleDots)}function T$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ta(r,!1,i-o)}function C$(n){return Wl(n[0])?n[0].outlets:{[ue]:n}}function kP(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return ql(n,e,t);let r=S$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new xe(n.segments.slice(r.pathIndex),n.children),ql(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?WE(n,e,t):r.match?ql(n,0,i):WE(n,e,t)}function ql(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=C$(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=ql(n.children[ue],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function S$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Wl(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!gP(l,u,s))return o;r+=2}else{if(!gP(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function WE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Wl(o)){let l=A$(o.outlets);return new xe(r,l)}if(i===0&&up(t[0])){let l=n.segments[e];r.push(new eo(l.path,pP(t[0]))),i++;continue}let s=Wl(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&up(a)?(r.push(new eo(s,pP(a))),i+=2):(r.push(new eo(s,{})),i++)}return new xe(r,{})}function A$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=WE(new xe([],{}),0,r))}),e}function pP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gP(n,e,t){return n==t.path&&Rr(e,t.parameters)}var Ca="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),En=class{id;url;constructor(e,t){this.id=e,this.url=t}},ro=class extends En{type=gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wn=class extends En{urlAfterRedirects;type=gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Jt||{}),Aa=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Aa||{}),Pr=class extends En{reason;code;type=gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends En{reason;code;type=gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ra=class extends En{error;target;type=gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kl=class extends En{urlAfterRedirects;state;type=gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends En{urlAfterRedirects;state;type=gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class extends En{urlAfterRedirects;state;shouldActivate;type=gt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pp=class extends En{urlAfterRedirects;state;type=gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class extends En{urlAfterRedirects;state;type=gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mp=class{route;type=gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vp=class{route;type=gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yp=class{snapshot;type=gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{snapshot;type=gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{snapshot;type=gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wp=class{snapshot;type=gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pa=class{routerEvent;position;anchor;type=gt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ql=class{},xa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function R$(n){return!(n instanceof Ql)&&!(n instanceof xa)}function P$(n,e){return n.providers&&!n._injector&&(n._injector=ma(n.providers,e,`Route: ${n.path}`)),n._injector??e}function tr(n){return n.outlet||ue}function x$(n,e){let t=n.filter(r=>tr(r)===e);return t.push(...n.filter(r=>tr(r)!==e)),t}function nu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ip=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return nu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new us(this.rootInjector)}},us=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ip(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(z($e))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=KE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=KE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=QE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QE(e,this._root).map(t=>t.value)}};function KE(n,e){if(n===e.value)return e;for(let t of e.children){let r=KE(n,t);if(r)return r}return null}function QE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=QE(n,t);if(r.length)return r.unshift(e),r}return[]}var _n=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ba(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yl=class extends Dp{snapshot;constructor(e,t){super(e),this.snapshot=t,rw(this,e)}toString(){return this.snapshot.toString()}};function OP(n){let e=N$(n),t=new et([new eo("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new Fn(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new Yl(new _n(a,[]),e)}function N$(n){let e={},t={},r={},i="",o=new as([],e,r,i,t,ue,n,null,{});return new Zl("",new _n(o,[]))}var Fn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Y(u=>u[tu]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>cs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>cs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&LP(i)&&(r.resolve[tu]=i.title),r}var as=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[tu]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zl=class extends Dp{url;constructor(e,t){super(t),this.url=e,rw(this,t)}toString(){return FP(this._root)}};function rw(n,e){e.value._routerState=n,e.children.forEach(t=>rw(n,t))}function FP(n){let e=n.children.length>0?` { ${n.children.map(FP).join(", ")} } `:"";return`${n.value}${e}`}function BE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rr(e.params,t.params)||n.paramsSubject.next(t.params),o$(e.url,t.url)||n.urlSubject.next(t.url),Rr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function YE(n,e){let t=Rr(n.params,e.params)&&l$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||YE(n.parent,e.parent))}function LP(n){return typeof n.title=="string"||n.title===null}var VP=new j(""),ru=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ue;activateEvents=new be;deactivateEvents=new be;attachEvents=new be;detachEvents=new be;routerOutletData=pR(void 0);parentContexts=S(us);location=S(Nn);changeDetector=S(vn);inputBinder=S(iu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new ZE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[gn]})}return n})(),ZE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Fn?this.route:e===us?this.childContexts:e===VP?this.outletData:this.parent.get(e,t)}},iu=new j(""),iw=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=qc([r.queryParams,r.params,r.data]).pipe(Ie(([o,s,a],l)=>(a=F(F(F({},o),s),a),l===0?G(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=yR(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),ow=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Sr(0,"router-outlet")},dependencies:[ru],encapsulation:2})}return n})();function sw(n){let e=n.children&&n.children.map(sw),t=e?ee(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=ow),t}function M$(n,e,t){let r=Jl(n,e._root,t?t._root:void 0);return new Yl(r,e)}function Jl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=k$(n,e,t);return new _n(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Jl(n,a)),s}}let r=O$(e.value),i=e.children.map(o=>Jl(n,o));return new _n(r,i)}}function k$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Jl(n,r,i);return Jl(n,r)})}function O$(n){return new Fn(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var Na=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jP="ngNavigationCancelingError";function Tp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=no(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UP(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function UP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jP]=!0,t.cancellationCode=e,t}function F$(n){return BP(n)&&no(n.url)}function BP(n){return!!n&&n[jP]}var L$=(n,e,t,r)=>Y(i=>(new JE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),JE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),BE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _p(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(BE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),BE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Cp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sa=class{component;route;constructor(e,t){this.component=e,this.route=t}};function V$(n,e,t){let r=n._root,i=e?e._root:null;return zl(r,i,t,[r.value])}function j$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ka(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ey(n)?n:e.get(n):r}function zl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ba(e);return n.children.forEach(s=>{U$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Gl(a,t.getContext(s),i)),i}function U$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=B$(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Cp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zl(n,e,a?a.children:null,r,i):zl(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sa(a.outlet.component,s))}else s&&Gl(e,a,i),i.canActivateChecks.push(new Cp(r)),o.component?zl(n,null,a?a.children:null,r,i):zl(n,null,t,r,i);return i}function B$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ss(n.url,e.url)||!Rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!YE(n,e)||!Rr(n.queryParams,e.queryParams);case"paramsChange":default:return!YE(n,e)}}function Gl(n,e,t){let r=ba(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Gl(s,e.children.getContext(o),t):Gl(s,null,t):Gl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sa(e.outlet.component,i)):t.canDeactivateChecks.push(new Sa(null,i)):t.canDeactivateChecks.push(new Sa(null,i))}function ou(n){return typeof n=="function"}function $$(n){return typeof n=="boolean"}function H$(n){return n&&ou(n.canLoad)}function z$(n){return n&&ou(n.canActivate)}function q$(n){return n&&ou(n.canActivateChild)}function G$(n){return n&&ou(n.canDeactivate)}function W$(n){return n&&ou(n.canMatch)}function $P(n){return n instanceof Hn||n?.name==="EmptyError"}var sp=Symbol("INITIAL_VALUE");function Ma(){return Ie(n=>qc(n.map(e=>e.pipe(vt(1),Li(sp)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===sp)return sp;if(t===!1||K$(t))return t}return!0}),ft(e=>e!==sp),vt(1)))}function K$(n){return no(n)||n instanceof Na}function Q$(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?G(ee(F({},t),{guardsResult:!0})):Y$(s,r,i,n).pipe(tt(a=>a&&$$(a)?Z$(r,o,n,e):G(a)),Y(a=>ee(F({},t),{guardsResult:a})))})}function Y$(n,e,t,r){return ce(n).pipe(tt(i=>nH(i.component,i.route,t,e,r)),Zr(i=>i!==!0,!0))}function Z$(n,e,t,r){return ce(e).pipe(fr(i=>ea(X$(i.route.parent,r),J$(i.route,r),tH(n,i.path,t),eH(n,i.route,t))),Zr(i=>i!==!0,!0))}function J$(n,e){return n!==null&&e&&e(new Ep(n)),G(!0)}function X$(n,e){return n!==null&&e&&e(new yp(n)),G(!0)}function eH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>Gc(()=>{let s=nu(e)??t,a=ka(o,s),l=z$(a)?a.canActivate(e,n):st(s,()=>a(e,n));return di(l).pipe(Zr())}));return G(i).pipe(Ma())}function tH(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>j$(s)).filter(s=>s!==null).map(s=>Gc(()=>{let a=s.guards.map(l=>{let u=nu(s.node)??t,h=ka(l,u),p=q$(h)?h.canActivateChild(r,n):st(u,()=>h(r,n));return di(p).pipe(Zr())});return G(a).pipe(Ma())}));return G(o).pipe(Ma())}function nH(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let l=nu(e)??i,u=ka(a,l),h=G$(u)?u.canDeactivate(n,e,t,r):st(l,()=>u(n,e,t,r));return di(h).pipe(Zr())});return G(s).pipe(Ma())}function rH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=ka(s,n),l=H$(a)?a.canLoad(e,t):st(n,()=>a(e,t));return di(l)});return G(o).pipe(Ma(),HP(r))}function HP(n){return Qd(ot(e=>{if(typeof e!="boolean")throw Tp(n,e)}),Y(e=>e===!0))}function iH(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=ka(s,n),l=W$(a)?a.canMatch(e,t):st(n,()=>a(e,t));return di(l)});return G(o).pipe(Ma(),HP(r))}var Xl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},eu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Da(n){return Xs(new Xl(n))}function oH(n){return Xs(new $(4e3,!1))}function sH(n){return Xs(UP(!1,Jt.GuardRejected))}var XE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[ue])return oH(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){return aH(t,i,o).pipe(Y(s=>{if(s instanceof xr)throw new eu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new eu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new xr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function aH(n,e,t){if(typeof n=="string")return G(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:u,data:h,title:p}=e;return di(st(t,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:p})))}var ew={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cH(n,e,t,r,i){let o=zP(n,e,t);return o.matched?(r=P$(e,r),iH(r,e,t,i).pipe(Y(s=>s===!0?o:F({},ew)))):G(o)}function zP(n,e,t){if(e.path==="**")return lH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},ew):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_P)(t,n,e);if(!i)return F({},ew);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function lH(n){return{matched:!0,parameters:n.length>0?wP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mP(n,e,t,r){return t.length>0&&hH(n,t,r)?{segmentGroup:new xe(e,dH(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&fH(n,t,r)?{segmentGroup:new xe(n.segments,uH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function uH(n,e,t,r){let i={};for(let o of t)if(Ap(n,e,o)&&!r[tr(o)]){let s=new xe([],{});i[tr(o)]=s}return F(F({},r),i)}function dH(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&tr(r)!==ue){let i=new xe([],{});t[tr(r)]=i}return t}function hH(n,e,t){return t.some(r=>Ap(n,e,r)&&tr(r)!==ue)}function fH(n,e,t){return t.some(r=>Ap(n,e,r))}function Ap(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function pH(n,e,t){return e.length===0&&!n.children[t]}var tw=class{};function gH(n,e,t,r,i,o,s="emptyOnly"){return new nw(n,e,t,r,i,s,o).recognize()}var mH=31,nw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new XE(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=mP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new _n(r,t),o=new Zl("",i),s=PP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new as([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Yr(r=>{if(r instanceof eu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof _n?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ce(o).pipe(fr(s=>{let a=r.children[s],l=x$(t,s);return this.processSegmentGroup(e,l,a,s,i)}),Dh((s,a)=>(s.push(...a),s)),Fi(null),jv(),tt(s=>{if(s===null)return Da(r);let a=qP(s);return vH(a),G(a)}))}processSegment(e,t,r,i,o,s,a){return ce(t).pipe(fr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(Yr(u=>{if(u instanceof Xl)return G(null);throw u}))),Zr(l=>!!l),Yr(l=>{if($P(l))return pH(r,i,o)?G(new tw):Da(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return tr(r)!==s&&(s===ue||!Ap(i,o,r))?Da(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Da(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=zP(t,i,o);if(!l)return Da(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mH&&(this.allowRedirects=!1));let v=new as(o,u,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,vP(i),tr(i),i.component??i._loadedComponent??null,i,yP(i)),b=bp(v,a,this.paramsInheritanceStrategy);return v.params=Object.freeze(b.params),v.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e).pipe(Ie(R=>this.applyRedirects.lineralizeSegments(i,R)),tt(R=>this.processSegment(e,r,t,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=cH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ie(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ie(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=l,b=new as(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,vP(r),tr(r),r.component??r._loadedComponent??null,r,yP(r)),x=bp(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(x.params),b.data=Object.freeze(x.data);let{segmentGroup:R,slicedSegments:V}=mP(t,g,v,u);if(V.length===0&&R.hasChildren())return this.processChildren(h,u,R,b).pipe(Y(W=>new _n(b,W)));if(u.length===0&&V.length===0)return G(new _n(b,[]));let Z=tr(r)===o;return this.processSegment(h,u,R,V,Z?ue:o,!0,b).pipe(Y(W=>new _n(b,W instanceof _n?[W]:[])))}))):Da(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):rH(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):sH(t))):G({routes:[],injector:e})}};function vH(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function yH(n){let e=n.value.routeConfig;return e&&e.path===""}function qP(n){let e=[],t=new Set;for(let r of n){if(!yH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=qP(r.children);e.push(new _n(r.value,i))}return e.filter(r=>!t.has(r))}function vP(n){return n.data||{}}function yP(n){return n.resolve||{}}function _H(n,e,t,r,i,o){return tt(s=>gH(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:l})=>ee(F({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function EH(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of GP(l))s.add(u);let a=0;return ce(s).pipe(fr(l=>o.has(l)?wH(l,r,n,e):(l.data=bp(l,l.parent,n).resolve,G(void 0))),ot(()=>a++),ta(1),tt(l=>a===s.size?G(t):kt))})}function GP(n){let e=n.children.map(t=>GP(t)).flat();return[n,...e]}function wH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!LP(i)&&(o[tu]=i.title),Gc(()=>(n.data=bp(n,n.parent,t).resolve,IH(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function IH(n,e,t,r){let i=zE(n);if(i.length===0)return G({});let o={};return ce(i).pipe(tt(s=>DH(n[s],e,t,r).pipe(Zr(),ot(a=>{if(a instanceof Na)throw Tp(new to,a);o[s]=a}))),ta(1),Y(()=>o),Yr(s=>$P(s)?kt:Xs(s)))}function DH(n,e,t,r){let i=nu(e)??r,o=ka(n,i),s=o.resolve?o.resolve(e,t):st(i,()=>o(e,t));return di(s)}function $E(n){return Ie(e=>{let t=n(e);return t?ce(t).pipe(Y(()=>e)):G(e)})}var aw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[tu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(WP),providedIn:"root"})}return n})(),WP=(()=>{class n extends aw{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(z(dP))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),io=new j("",{providedIn:"root",factory:()=>({})}),ds=new j(""),Rp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(sE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=di(t.loadComponent()).pipe(Y(QP),ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Mo(()=>{this.componentLoaders.delete(t)})),i=new Ys(r,()=>new ne).pipe(Qs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=KP(r,this.compiler,t,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(r)})),s=new Ys(o,()=>new ne).pipe(Qs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KP(n,e,t,r){return di(n.loadChildren()).pipe(Y(QP),tt(i=>i instanceof Cf||Array.isArray(i)?G(i):ce(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ds,[],{optional:!0,self:!0}).flat()),{routes:s.map(sw),injector:o}}))}function bH(n){return n&&typeof n=="object"&&"default"in n}function QP(n){return bH(n)?n.default:n}var Pp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(TH),providedIn:"root"})}return n})(),TH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cw=new j(""),lw=new j("");function YP(n,e,t){let r=n.get(lw),i=n.get(Me);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),CH(n))),{onViewTransitionCreated:l}=r;return l&&st(n,()=>l({transition:a,from:e,to:t})),s}function CH(n){return new Promise(e=>{es({read:()=>setTimeout(e)},{injector:n})})}var uw=new j(""),xp=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ne;transitionAbortWithErrorSubject=new ne;configLoader=S(Rp);environmentInjector=S($e);destroyRef=S(ti);urlSerializer=S(ls);rootContexts=S(us);location=S(Ji);inputBindingEnabled=S(iu,{optional:!0})!==null;titleStrategy=S(aw);options=S(io,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Pp);createViewTransition=S(cw,{optional:!0});navigationErrorHandler=S(uw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new mp(i)),r=i=>this.events.next(new vp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ee(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new et(null),this.transitions.pipe(ft(r=>r!==null),Ie(r=>{let i=!1;return G(r).pipe(Ie(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),kt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ee(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let l="";return this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.rawUrl),l,Aa.IgnoredSameUrlNavigation)),o.resolve(!1),kt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(Ie(l=>(this.events.next(new ro(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?kt:Promise.resolve(l))),_H(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ee(F({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new Kl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:h,restoredState:p,extras:g}=o,v=new ro(l,this.urlSerializer.serialize(u),h,p);this.events.next(v);let b=OP(this.rootComponentType).snapshot;return this.currentTransition=r=ee(F({},o),{targetSnapshot:b,urlAfterRedirects:u,extras:ee(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,G(r)}else{let l="";return this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),l,Aa.IgnoredByUrlHandlingStrategy)),o.resolve(!1),kt}}),ot(o=>{let s=new hp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Y(o=>(this.currentTransition=r=ee(F({},o),{guards:V$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Q$(this.environmentInjector,o=>this.events.next(o)),ot(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Tp(this.urlSerializer,o.guardsResult);let s=new fp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ft(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Jt.GuardRejected),!1)),$E(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(ot(s=>{let a=new pp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ie(s=>{let a=!1;return G(s).pipe(EH(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Jt.NoDataFromResolver)}}))}),ot(s=>{let a=new gp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),$E(o=>{let s=a=>{let l=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(a.routeConfig).pipe(ot(u=>{a.component=u}),Y(()=>{})));for(let u of a.children)l.push(...s(u));return l};return qc(s(o.targetSnapshot.root)).pipe(Fi(null),vt(1))}),$E(()=>this.afterPreactivation()),Ie(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ce(a).pipe(Y(()=>r)):G(r)}),Y(o=>{let s=M$(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ee(F({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),ot(()=>{this.events.next(new Ql)}),L$(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),vt(1),pr(new Q(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ft(()=>!i&&!r.targetRouterState),ot(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Jt.Aborted)}))),ot({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),pr(this.transitionAbortWithErrorSubject.pipe(ot(o=>{throw o}))),Mo(()=>{i||this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yr(o=>{if(this.destroyed)return r.resolve(!1),kt;if(i=!0,BP(o))this.events.next(new Pr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),F$(o)?this.events.next(new xa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ra(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=st(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Na){let{message:l,cancellationCode:u}=Tp(this.urlSerializer,a);this.events.next(new Pr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new xa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return kt}))}))}cancelNavigationTransition(t,r,i){let o=new Pr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SH(n){return n!==Ca}var ZP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(AH),providedIn:"root"})}return n})(),Sp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},AH=(()=>{class n extends Sp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zo(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JP=(()=>{class n{urlSerializer=S(ls);options=S(io,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(Ji);urlHandlingStrategy=S(Pp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new xr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof xr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=OP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>S(RH),providedIn:"root"})}return n})(),RH=(()=>{class n extends JP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ro?this.updateStateMemento():t instanceof Nr?this.commitTransition(r):t instanceof Kl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ql?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Pr&&t.code!==Jt.SupersededByNewNavigation&&t.code!==Jt.Redirect?this.restoreHistory(r):t instanceof Ra?this.restoreHistory(r,!0):t instanceof wn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zo(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Np(n,e){n.events.pipe(ft(t=>t instanceof wn||t instanceof Pr||t instanceof Ra||t instanceof Nr),Y(t=>t instanceof wn||t instanceof Nr?0:(t instanceof Pr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?2:1),ft(t=>t!==2),vt(1)).subscribe(()=>{e()})}var PH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(X_);stateManager=S(JP);options=S(io,{optional:!0})||{};pendingTasks=S(ni);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(xp);urlSerializer=S(ls);location=S(Ji);urlHandlingStrategy=S(Pp);injector=S($e);_events=new ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(ZP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(ds,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(iu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wn)this.navigated=!0;else if(r instanceof xa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SH(i.source)},s);this.scheduleNavigation(a,Ca,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}R$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ca,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=F({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.injector.get(Kt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=xP(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return NP(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=no(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ca,null,r)}navigate(t,r={skipLocationChange:!1}){return NH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},PH):r===!1?i=F({},xH):i=r,no(t))return hP(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hP(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,g)=>{a=p,l=g});let h=this.pendingTasks.add();return Np(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var Mr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Lt(null);get href(){return an(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ne;applicationErrorHandler=S(Kt);options=S(io,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new Ff("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof wn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(no(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:no(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(K(mt),K(Fn),El("tabindex"),K(Cr),K(pt),K(Jn))};static \u0275dir=Ge({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ve("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Yi("href",i.reactiveHref(),P_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cn],replaceUrl:[2,"replaceUrl","replaceUrl",cn],routerLink:"routerLink"},features:[gn]})}return n})(),hw=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new be;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof wn&&this.update()})}ngAfterContentInit(){G(this.links.changes,G(null)).pipe(hr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ce(t).pipe(hr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=MH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(K(mt),K(pt),K(Cr),K(vn),K(Mr,8))};static \u0275dir=Ge({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&rE(o,Mr,5),r&2){let s;xf(s=Nf())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[gn]})}return n})();function MH(n){return!!n.paths}var su=class{};var XP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ft(t=>t instanceof wn),fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ma(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ce(i).pipe(hr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let o=i.pipe(tt(s=>s===null?G(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ce([o,s]).pipe(hr())}else return o})}static \u0275fac=function(r){return new(r||n)(z(mt),z($e),z(su),z(Rp))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ex=new j(""),kH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ca;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nr&&t.code===Aa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pa&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Pa(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){G_()};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function fw(n,...e){return on([{provide:ds,multi:!0,useValue:n},[],{provide:Fn,useFactory:tx,deps:[mt]},{provide:bl,multi:!0,useFactory:nx},e.map(t=>t.\u0275providers)])}function tx(n){return n.routerState.root}function au(n,e){return{\u0275kind:n,\u0275providers:e}}function nx(){let n=S(Ve);return e=>{let t=n.get(oi);if(e!==t.components[0])return;let r=n.get(mt),i=n.get(rx);n.get(pw)===1&&r.initialNavigation(),n.get(sx,null,{optional:!0})?.setUpPreloading(),n.get(ex,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rx=new j("",{factory:()=>new ne}),pw=new j("",{providedIn:"root",factory:()=>1});function ix(){let n=[{provide:pw,useValue:0},Pf(()=>{let e=S(Ve);return e.get(yE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(mt),o=e.get(rx);Np(i,()=>{r(!0)}),e.get(xp).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))})];return au(2,n)}function ox(){let n=[Pf(()=>{S(mt).setUpLocationChangeListener()}),{provide:pw,useValue:2}];return au(3,n)}var sx=new j("");function ax(n){return au(0,[{provide:sx,useExisting:XP},{provide:su,useExisting:n}])}function cx(){return au(8,[iw,{provide:iu,useExisting:iw}])}function lx(n){Jo("NgRouterViewTransitions");let e=[{provide:cw,useValue:YP},{provide:lw,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return au(9,e)}var ux=[Ji,{provide:ls,useClass:to},mt,us,{provide:Fn,useFactory:tx,deps:[mt]},Rp,[]],nr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[ux,[],{provide:ds,multi:!0,useValue:t},[],r?.errorHandler?{provide:uw,useValue:r.errorHandler}:[],{provide:io,useValue:r||{}},r?.useHash?FH():LH(),OH(),r?.preloadingStrategy?ax(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?VH(r):[],r?.bindToComponentInputs?cx().\u0275providers:[],r?.enableViewTransitions?lx().\u0275providers:[],jH()]}}static forChild(t){return{ngModule:n,providers:[{provide:ds,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({})}return n})();function OH(){return{provide:ex,useFactory:()=>{let n=S($R),e=S(pe),t=S(io),r=S(xp),i=S(ls);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kH(i,r,n,e,t)}}}function FH(){return{provide:Jn,useClass:bE}}function LH(){return{provide:Jn,useClass:Bf}}function VH(n){return[n.initialNavigation==="disabled"?ox().\u0275providers:[],n.initialNavigation==="enabledBlocking"?ix().\u0275providers:[]]}var dw=new j("");function jH(){return[{provide:dw,useFactory:nx},{provide:bl,multi:!0,useExisting:dw}]}var dx=()=>{};var px=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,v=u&63;l||(v=64,s||(g=64)),r.push(t[h],t[p],t[g],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(px(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new mw;let g=o<<2|a>>4;if(r.push(g),u!==64){let v=a<<4&240|u>>2;if(r.push(v),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},mw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BH=function(n){let e=px(n);return Mp.encodeByteArray(e,!0)},lu=function(n){return BH(n).replace(/\./g,"")},kp=function(n){try{return Mp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $H=()=>yw().__FIREBASE_DEFAULTS__,HH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&kp(n[1]);return e&&JSON.parse(e)},Op=()=>{try{return dx()||$H()||HH()||zH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_w=n=>{var e,t;return(t=(e=Op())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},gx=n=>{let e=_w(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ew=()=>{var n;return(n=Op())===null||n===void 0?void 0:n.config},ww=n=>{var e;return(e=Op())===null||e===void 0?void 0:e[`_${n}`]};var fs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function oo(n){return n.endsWith(".cloudworkstations.dev")}function Fp(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function mx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lu(JSON.stringify(t)),lu(JSON.stringify(s)),""].join(".")}var cu={};function qH(){let n={prod:[],emulator:[]};for(let e of Object.keys(cu))cu[e]?n.emulator.push(e):n.prod.push(e);return n}function GH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var hx=!1;function Lp(n,e){if(typeof window>"u"||typeof document>"u"||!oo(window.location.host)||cu[n]===e||cu[n]||hx)return;cu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=qH().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{hx=!0,s()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=GH(r),v=t("text"),b=document.getElementById(v)||document.createElement("span"),x=t("learnmore"),R=document.getElementById(x)||document.createElement("a"),V=t("preprendIcon"),Z=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let W=g.element;a(W),h(R,x);let we=u();l(Z,V),W.append(Z,b,R,we),document.body.appendChild(W)}o?(b.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function WH(){var n;let e=(n=Op())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _x(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ex(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wx(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ix(){return!WH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uu(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var KH="FirebaseError",In=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}},rr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?QH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new In(i,a,r)}};function QH(n,e){return n.replace(YH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var YH=/\{\$([^}]+)}/g;function bx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(fx(o)&&fx(s)){if(!kr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function fx(n){return n!==null&&typeof n=="object"}function Oa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tx(n,e){let t=new vw(n,e);return t.subscribe.bind(t)}var vw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ZH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=gw),i.error===void 0&&(i.error=gw),i.complete===void 0&&(i.complete=gw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gw(){}var Dce=4*60*60*1e3;function Ye(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ps="[DEFAULT]";var Iw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new fs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XH(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JH(n){return n===ps?void 0:n}function XH(n){return n.instantiationMode==="EAGER"}var Vp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Iw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ez=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),tz={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},nz=ye.INFO,rz={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},iz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=rz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Or=class{constructor(e){this.name=e,this._logLevel=nz,this._logHandler=iz,this._userLogHandler=null,ez.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var oz=(n,e)=>e.some(t=>n instanceof t),Cx,Sx;function sz(){return Cx||(Cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function az(){return Sx||(Sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ax=new WeakMap,bw=new WeakMap,Rx=new WeakMap,Dw=new WeakMap,Cw=new WeakMap;function cz(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Fr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Ax.set(t,n)}).catch(()=>{}),Cw.set(e,n),e}function lz(n){if(bw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});bw.set(n,e)}var Tw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Rx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Px(n){Tw=n(Tw)}function uz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(jp(this),e,...t);return Rx.set(r,e.sort?e.sort():[e]),Fr(r)}:az().includes(n)?function(...e){return n.apply(jp(this),e),Fr(Ax.get(this))}:function(...e){return Fr(n.apply(jp(this),e))}}function dz(n){return typeof n=="function"?uz(n):(n instanceof IDBTransaction&&lz(n),oz(n,sz())?new Proxy(n,Tw):n)}function Fr(n){if(n instanceof IDBRequest)return cz(n);if(Dw.has(n))return Dw.get(n);let e=dz(n);return e!==n&&(Dw.set(n,e),Cw.set(e,n)),e}var jp=n=>Cw.get(n);function Nx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Fr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Fr(s.result),l.oldVersion,l.newVersion,Fr(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var hz=["get","getKey","getAll","getAllKeys","count"],fz=["put","add","delete","clear"],Sw=new Map;function xx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sw.get(e))return Sw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=fz.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hz.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return Sw.set(e,o),o}Px(n=>ee(F({},n),{get:(e,t,r)=>xx(e,t)||n.get(e,t,r),has:(e,t)=>!!xx(e,t)||n.has(e,t)}));var Rw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function pz(n){let e=n.getComponent();return e?.type==="VERSION"}var Pw="@firebase/app",Mx="0.13.1";var hi=new Or("@firebase/app"),gz="@firebase/app-compat",mz="@firebase/analytics-compat",vz="@firebase/analytics",yz="@firebase/app-check-compat",_z="@firebase/app-check",Ez="@firebase/auth",wz="@firebase/auth-compat",Iz="@firebase/database",Dz="@firebase/data-connect",bz="@firebase/database-compat",Tz="@firebase/functions",Cz="@firebase/functions-compat",Sz="@firebase/installations",Az="@firebase/installations-compat",Rz="@firebase/messaging",Pz="@firebase/messaging-compat",xz="@firebase/performance",Nz="@firebase/performance-compat",Mz="@firebase/remote-config",kz="@firebase/remote-config-compat",Oz="@firebase/storage",Fz="@firebase/storage-compat",Lz="@firebase/firestore",Vz="@firebase/ai",jz="@firebase/firestore-compat",Uz="firebase",Bz="11.9.0";var xw="[DEFAULT]",$z={[Pw]:"fire-core",[gz]:"fire-core-compat",[vz]:"fire-analytics",[mz]:"fire-analytics-compat",[_z]:"fire-app-check",[yz]:"fire-app-check-compat",[Ez]:"fire-auth",[wz]:"fire-auth-compat",[Iz]:"fire-rtdb",[Dz]:"fire-data-connect",[bz]:"fire-rtdb-compat",[Tz]:"fire-fn",[Cz]:"fire-fn-compat",[Sz]:"fire-iid",[Az]:"fire-iid-compat",[Rz]:"fire-fcm",[Pz]:"fire-fcm-compat",[xz]:"fire-perf",[Nz]:"fire-perf-compat",[Mz]:"fire-rc",[kz]:"fire-rc-compat",[Oz]:"fire-gcs",[Fz]:"fire-gcs-compat",[Lz]:"fire-fst",[jz]:"fire-fst-compat",[Vz]:"fire-vertex","fire-js":"fire-js",[Uz]:"fire-js-all"};var du=new Map,Hz=new Map,Nw=new Map;function kx(n,e){try{n.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ir(n){let e=n.name;if(Nw.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Nw.set(e,n);for(let t of du.values())kx(t,n);for(let t of Hz.values())kx(t,n);return!0}function Fa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}var zz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new rr("app","Firebase",zz);var Mw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}};var ao=Bz;function Fw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw so.create("bad-app-name",{appName:String(i)});if(t||(t=Ew()),!t)throw so.create("no-options");let o=du.get(i);if(o){if(kr(t,o.options)&&kr(r,o.config))return o;throw so.create("duplicate-app",{appName:i})}let s=new Vp(i);for(let l of Nw.values())s.addComponent(l);let a=new Mw(t,r,s);return du.set(i,a),a}function gs(n=xw){let e=du.get(n);if(!e&&n===xw&&Ew())return Fw();if(!e)throw so.create("no-app",{appName:n});return e}function Up(){return Array.from(du.values())}function Ze(n,e,t){var r;let i=(r=$z[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}ir(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qz="firebase-heartbeat-database",Gz=1,hu="firebase-heartbeat-store",Aw=null;function Vx(){return Aw||(Aw=Nx(qz,Gz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hu)}catch(t){console.warn(t)}}}}).catch(n=>{throw so.create("idb-open",{originalErrorMessage:n.message})})),Aw}function Wz(n){return _(this,null,function*(){try{let t=(yield Vx()).transaction(hu),r=yield t.objectStore(hu).get(jx(n));return yield t.done,r}catch(e){if(e instanceof In)hi.warn(e.message);else{let t=so.create("idb-get",{originalErrorMessage:e?.message});hi.warn(t.message)}}})}function Ox(n,e){return _(this,null,function*(){try{let r=(yield Vx()).transaction(hu,"readwrite");yield r.objectStore(hu).put(e,jx(n)),yield r.done}catch(t){if(t instanceof In)hi.warn(t.message);else{let r=so.create("idb-set",{originalErrorMessage:t?.message});hi.warn(r.message)}}})}function jx(n){return`${n.name}!${n.options.appId}`}var Kz=1024,Qz=30,kw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ow(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Fx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Qz){let s=Zz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hi.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Fx(),{heartbeatsToSend:r,unsentEntries:i}=Yz(this._heartbeatsCache.heartbeats),o=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return hi.warn(t),""}})}};function Fx(){return new Date().toISOString().substring(0,10)}function Yz(n,e=Kz){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Lx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Lx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ow=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return uu()?Dx().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Wz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ox(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ox(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Lx(n){return lu(JSON.stringify({version:2,heartbeats:n})).length}function Zz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Jz(n){ir(new Xt("platform-logger",e=>new Rw(e),"PRIVATE")),ir(new Xt("heartbeat",e=>new kw(e),"PRIVATE")),Ze(Pw,Mx,n),Ze(Pw,Mx,"esm2017"),Ze("fire-js","")}Jz("");var Xz="firebase",e4="11.9.1";Ze(Xz,e4,"app");function Ux(n){n===void 0&&(n=S(Ve));let e=n.get(Gi);return t=>new Q(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var co=new ts("ANGULARFIRE2_VERSION");function fu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Va=(n,e)=>{let t=e?[e]:Up(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},La=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(La||{}),Bx=gE()&&typeof Zone<"u"?La.WARN:La.SILENT;var Bp=class{zone;delegate;constructor(e,t=Ov){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},lo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(pe);this.outsideAngular=t.runOutsideAngular(()=>new Bp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Bp(typeof Zone>"u"?void 0:Zone.current,Mi))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$x=!1;function t4(n,e){!$x&&(Bx>La.SILENT||gE())&&($x=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Bx>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function n4(n){let e=S(pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ms(n){let e=S(pe,{optional:!0});return e?e.run(()=>n()):n()}var r4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),st(t,()=>ms(()=>n.apply(void 0,r)))),Je=(n,e,t)=>(t||=e?La.WARN:La.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(lo),s=S(Gi),a=S($e)}catch{return t4(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ms(()=>s.add())),i[u]=r4(i[u],r,a));let l=n4(()=>n.apply(this,i));return e?l instanceof Q?l.pipe(Oi(o.outsideAngular),ki(o.insideAngular),Ux(a)):l instanceof Promise?ms(()=>{let u=s.add();return new Promise((h,p)=>{l.then(g=>st(a,()=>ms(()=>h(g))),g=>st(a,()=>ms(()=>p(g)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ms(()=>l):l instanceof Q?l.pipe(Oi(o.outsideAngular),ki(o.insideAngular)):ms(()=>l)});var fi=class{constructor(e){return e}},vs=class{constructor(){return Up()}};function i4(n){return n&&n.length===1?n[0]:new fi(gs())}var Lw=new j("angularfire2._apps"),o4={provide:fi,useFactory:i4,deps:[[new Qt,Lw]]},s4={provide:vs,deps:[[new Qt,Lw]]};function a4(n){return(e,t)=>{let r=t.get(br);Ze("angularfire",co.full,"core"),Ze("angularfire",co.full,"app"),Ze("angular",gR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new fi(i)}}function Hx(n,...e){return on([o4,s4,{provide:Lw,useFactory:a4(n),multi:!0,deps:[pe,Ve,lo,...e]}])}var zx=Je(Fw,!0);var c4=new Map,l4={activated:!1,tokenObservers:[]},u4={initialized:!1,enabled:!1};function or(n){return c4.get(n)||Object.assign({},l4)}function Kx(){return u4}var d4="https://content-firebaseappcheck.googleapis.com/v1";var h4="exchangeDebugToken",qx={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cle=24*60*60*1e3;var Uw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new fs,this.pending.promise.catch(t=>{}),yield f4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new fs,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function f4(n){return new Promise(e=>{setTimeout(e,n)})}var p4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},uo=new rr("appCheck","AppCheck",p4);function Qx(n){if(!or(n).activated)throw uo.create("use-before-activation",{appName:n.name})}function Yx(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,a)}catch(v){throw uo.create("fetch-network-error",{originalErrorMessage:v?.message})}if(l.status!==200)throw uo.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(v){throw uo.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function Zx(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${d4}/projects/${t}/apps/${r}:${h4}?key=${i}`,body:{debug_token:e}}}var g4="firebase-app-check-database",m4=1,Bw="firebase-app-check-store";var $p=null;function v4(){return $p||($p=new Promise((n,e)=>{try{let t=indexedDB.open(g4,m4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(uo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Bw,{keyPath:"compositeKey"})}}}catch(t){e(uo.create("storage-open",{originalErrorMessage:t?.message}))}}),$p)}function y4(n,e){return _4(E4(n),e)}function _4(n,e){return _(this,null,function*(){let r=(yield v4()).transaction(Bw,"readwrite"),o=r.objectStore(Bw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(uo.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function E4(n){return`${n.options.appId}-${n.name}`}var pu=new Or("@firebase/app-check");function Vw(n,e){return uu()?y4(n,e).catch(t=>{pu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Jx(){return Kx().enabled}function Xx(){return _(this,null,function*(){let n=Kx();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var w4={error:"UNKNOWN_ERROR"};function I4(n){return Mp.encodeString(JSON.stringify(n),!1)}function $w(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;Qx(r);let i=or(r),o=i.token,s;if(o&&!gu(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(gu(u)?o=u:yield Vw(r,void 0))}if(!e&&o&&gu(o))return{token:o.token};let a=!1;if(Jx())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Yx(Zx(r,yield Xx()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Vw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?pu.warn(u.message):t&&pu.error(u),jw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield or(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?pu.warn(u.message):t&&pu.error(u),s=u}let l;return o?s?gu(o)?l={token:o.token,internalError:s}:l=jw(s):(l={token:o.token},i.token=o,yield Vw(r,o)):l=jw(s),a&&C4(r,l),l})}function D4(n){return _(this,null,function*(){let e=n.app;Qx(e);let{provider:t}=or(e);if(Jx()){let r=yield Xx(),{token:i}=yield Yx(Zx(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function b4(n,e,t,r){let{app:i}=n,o=or(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&gu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Gx(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Gx(n))}function eN(n,e){let t=or(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Gx(n){let{app:e}=n,t=or(e),r=t.tokenRefresher;r||(r=T4(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function T4(n){let{app:e}=n;return new Uw(()=>_(null,null,function*(){let t=or(e),r;if(t.token?r=yield $w(n,!0):r=yield $w(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=or(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},qx.RETRIAL_MIN_WAIT,qx.RETRIAL_MAX_WAIT)}function C4(n,e){let t=or(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function gu(n){return n.expireTimeMillis-Date.now()>0}function jw(n){return{token:I4(w4),error:n}}var Hw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=or(this.app);for(let t of e)eN(this.app,t.next);return Promise.resolve()}};function S4(n,e){return new Hw(n,e)}function A4(n){return{getToken:e=>$w(n,e),getLimitedUseToken:()=>D4(n),addTokenListener:e=>b4(n,"INTERNAL",e),removeTokenListener:e=>eN(n.app,e)}}var R4="@firebase/app-check",P4="0.10.0";var x4="app-check",Wx="app-check-internal";function N4(){ir(new Xt(x4,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return S4(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Wx).initialize()})),ir(new Xt(Wx,n=>{let e=n.getProvider("app-check").getImmediate();return A4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ze(R4,P4)}N4();var M4="app-check";var ja=class{constructor(){return Va(M4)}};var k4=["localhost","0.0.0.0","127.0.0.1"],jle=typeof window<"u"&&k4.includes(window.location.hostname);function gN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mN=gN,vN=new rr("auth","Firebase",gN());var Kp=new Or("@firebase/auth");function O4(n,...e){Kp.logLevel<=ye.WARN&&Kp.warn(`Auth (${ao}): ${n}`,...e)}function zp(n,...e){Kp.logLevel<=ye.ERROR&&Kp.error(`Auth (${ao}): ${n}`,...e)}function Vr(n,...e){throw aI(n,...e)}function sr(n,...e){return aI(n,...e)}function sI(n,e,t){let r=Object.assign(Object.assign({},mN()),{[e]:t});return new rr("auth","Firebase",r).create(e,{appName:n.name})}function ys(n){return sI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F4(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(n,"argument-error"),sI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vN.create(n,...e)}function te(n,e,...t){if(!n)throw aI(e,...t)}function pi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw zp(e),new Error(e)}function mi(n,e){n||pi(e)}function Gw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function L4(){return tN()==="http:"||tN()==="https:"}function tN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function V4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L4()||_x()||"connection"in navigator)?navigator.onLine:!0}function j4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var _s=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=vx()||Ex()}get(){return V4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function cI(n,e){mi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Qp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var U4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var B4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$4=new _s(3e4,6e4);function lI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ba(o,s,a,l){return _(this,arguments,function*(n,e,t,r,i={}){return yN(n,i,()=>_(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=Oa(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:g},u);return yx()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&oo(n.emulatorConfig.host)&&(v.credentials="include"),Qp.fetch()(yield _N(n,n.config.apiHost,t,p),v)}))})}function yN(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},U4),e);try{let i=new Ww(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Hp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hp(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Hp(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Hp(n,"user-disabled",s);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sI(n,h,u);Vr(n,h)}}catch(i){if(i instanceof In)throw i;Vr(n,"network-request-failed",{message:String(i)})}})}function H4(o,s,a,l){return _(this,arguments,function*(n,e,t,r,i={}){let u=yield Ba(n,e,t,r,i);return"mfaPendingCredential"in u&&Vr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function _N(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?cI(n.config,i):`${n.config.apiScheme}://${i}`;return B4.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Ww=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(sr(this.auth,"network-request-failed")),$4.get())})}};function Hp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=sr(n,e,r);return i.customData._tokenResponse=t,i}function z4(n,e){return _(this,null,function*(){return Ba(n,"POST","/v1/accounts:delete",e)})}function Yp(n,e){return _(this,null,function*(){return Ba(n,"POST","/v1/accounts:lookup",e)})}function mu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function uI(n,e=!1){return _(this,null,function*(){let t=Ye(n),r=yield t.getIdToken(e),i=dI(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:mu(zw(i.auth_time)),issuedAtTime:mu(zw(i.iat)),expirationTime:mu(zw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function zw(n){return Number(n)*1e3}function dI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zp("JWT malformed, contained fewer than 3 sections"),null;try{let i=kp(t);return i?JSON.parse(i):(zp("Failed to decode base64 JWT payload"),null)}catch(i){return zp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nN(n){let e=dI(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function yu(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof In&&q4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function q4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Kw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _u=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Zp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield yu(n,Yp(t,{idToken:r}));te(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?EN(o.providerUserInfo):[],a=G4(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new _u(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function hI(n){return _(this,null,function*(){let e=Ye(n);yield Zp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function G4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EN(n){return n.map(e=>{var{providerId:t}=e,r=oh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function W4(n,e){return _(this,null,function*(){let t=yield yN(n,{},()=>_(null,null,function*(){let r=Oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield _N(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&oo(n.emulatorConfig.host)&&(l.credentials="include"),Qp.fetch()(s,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function K4(n,e){return _(this,null,function*(){return Ba(n,"POST","/v2/accounts:revokeToken",lI(n,e))})}var vu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=nN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield W4(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return pi("not implemented")}};function ho(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _u(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield yu(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return uI(this,e)}reload(){return hI(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Zp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Dn(this.auth.app))return Promise.reject(ys(this.auth));let e=yield this.getIdToken();return yield yu(this,z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,V=(u=t.createdAt)!==null&&u!==void 0?u:void 0,Z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:W,emailVerified:we,isAnonymous:it,providerData:Re,stsTokenManager:D}=t;te(W&&D,e,"internal-error");let y=vu.fromJSON(this.name,D);te(typeof W=="string",e,"internal-error"),ho(p,e.name),ho(g,e.name),te(typeof we=="boolean",e,"internal-error"),te(typeof it=="boolean",e,"internal-error"),ho(v,e.name),ho(b,e.name),ho(x,e.name),ho(R,e.name),ho(V,e.name),ho(Z,e.name);let w=new n({uid:W,auth:e,email:g,emailVerified:we,displayName:p,isAnonymous:it,photoURL:b,phoneNumber:v,tenantId:x,stsTokenManager:y,createdAt:V,lastLoginAt:Z});return Re&&Array.isArray(Re)&&(w.providerData=Re.map(I=>Object.assign({},I))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new vu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Zp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?EN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new vu;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _u(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l})}};var rN=new Map;function gi(n){mi(n instanceof Function,"Expected a class definition");let e=rN.get(n);return e?(mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rN.set(n,e),e)}var Q4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Qw=Q4;function qp(n,e,t){return`firebase:${n}:${e}:${t}`}var Jp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=qp(this.userKey,i.apiKey,o),this.fullPersistenceKey=qp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Yp(this.auth,{idToken:e}).catch(()=>{});return t?fo._fromGetAccountInfoResponse(this.auth,t,e):null}return fo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(gi(Qw),e,r);let i=(yield Promise.all(t.map(u=>_(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||gi(Qw),s=qp(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let p;if(typeof h=="string"){let g=yield Yp(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield fo._fromGetAccountInfoResponse(e,g,h)}else p=fo._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>_(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function iN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CN(e))return"Blackberry";if(SN(e))return"Webos";if(IN(e))return"Safari";if((e.includes("chrome/")||DN(e))&&!e.includes("edge/"))return"Chrome";if(TN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wN(n=_t()){return/firefox\//i.test(n)}function IN(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DN(n=_t()){return/crios\//i.test(n)}function bN(n=_t()){return/iemobile/i.test(n)}function TN(n=_t()){return/android/i.test(n)}function CN(n=_t()){return/blackberry/i.test(n)}function SN(n=_t()){return/webos/i.test(n)}function fI(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Y4(n=_t()){var e;return fI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z4(){return wx()&&document.documentMode===10}function AN(n=_t()){return fI(n)||TN(n)||SN(n)||CN(n)||/windows phone/i.test(n)||bN(n)}function RN(n,e=[]){let t;switch(n){case"Browser":t=iN(_t());break;case"Worker":t=`${iN(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ao}/${r}`}var Yw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function J4(t){return _(this,arguments,function*(n,e={}){return Ba(n,"GET","/v2/passwordPolicy",lI(n,e))})}var X4=6,Zw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:X4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Jw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xp(this),this.idTokenSubscription=new Xp(this),this.beforeStateQueue=new Yw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Jp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Yp(this,{idToken:e}),r=yield fo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Dn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Zp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=j4()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Dn(this.app))return Promise.reject(ys(this));let t=e?Ye(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Dn(this.app)?Promise.reject(ys(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dn(this.app)?Promise.reject(ys(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(gi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield J4(this),t=new Zw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield K4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&gi(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield Jp.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&O4(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ag(n){return Ye(n)}var Xp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tx(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pI={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e3(n){pI=n}function t3(n){return pI.loadJS(n)}function n3(){return pI.gapiScript}function PN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function gI(n,e){let t=Fa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(kr(o,e??{}))return i;Vr(i,"already-initialized")}return t.initialize({options:e})}function r3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mI(n,e,t){let r=ag(n);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=xN(e),{host:s,port:a}=i3(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(kr(u,r.config.emulator)&&kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,oo(s)?(Fp(`${o}//${s}${l}`),Lp("Auth",!0)):i||o3()}function xN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function i3(n){let e=xN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:oN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:oN(s)}}}function oN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function o3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Eu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}};function Ua(n,e){return _(this,null,function*(){return H4(n,"POST","/v1/accounts:signInWithIdp",lI(n,e))})}var s3="http://localhost",eg=class n extends Eu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=oh(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ua(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ua(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ua(e,t)}buildRequest(){let e={requestUri:s3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oa(t)}return e}};var wu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var tg=class extends wu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var vI=(()=>{class n extends tg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return eg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Iu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield fo._fromIdTokenResponse(e,r,i),s=sN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=sN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function sN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Xw=class n extends In{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function NN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Xw._fromErrorAndOperation(n,o,e,r):o})}function a3(n,e,t=!1){return _(this,null,function*(){let r=yield yu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Iu._forOperation(n,"link",r)})}function c3(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Dn(r.app))return Promise.reject(ys(r));let i="reauthenticate";try{let o=yield yu(n,NN(r,i,e,n),t);te(o.idToken,r,"internal-error");let s=dI(o.idToken);te(s,r,"internal-error");let{sub:a}=s;return te(n.uid===a,r,"user-mismatch"),Iu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Vr(r,"user-mismatch"),o}})}function l3(n,e,t=!1){return _(this,null,function*(){if(Dn(n.app))return Promise.reject(ys(n));let r="signIn",i=yield NN(n,r,e),o=yield Iu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function bu(n,e,t,r){return Ye(n).onIdTokenChanged(e,t,r)}function yI(n,e,t){return Ye(n).beforeAuthStateChanged(e,t)}function _I(n){return Ye(n).signOut()}var ng="__sak";var rg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ng,"1"),this.storage.removeItem(ng),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var u3=1e3,d3=10,h3=(()=>{class n extends rg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Z4()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,d3):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},u3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Ri(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Ri(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Ri(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),MN=h3;var f3=(()=>{class n extends rg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),EI=f3;function p3(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var g3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),u=yield p3(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var eI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{let u=wI("",20);i.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Lr(){return window}function m3(n){Lr().location.href=n}function kN(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}function v3(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function y3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _3(){return kN()?self:null}var ON="firebaseLocalStorageDb",E3=1,ig="firebaseLocalStorage",FN="fbase_key",Es=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function cg(n,e){return n.transaction([ig],e?"readwrite":"readonly").objectStore(ig)}function w3(){let n=indexedDB.deleteDatabase(ON);return new Es(n).toPromise()}function tI(){let n=indexedDB.open(ON,E3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ig,{keyPath:FN})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ig)?e(r):(r.close(),yield w3(),e(yield tI()))}))})}function aN(n,e,t){return _(this,null,function*(){let r=cg(n,!0).put({[FN]:e,value:t});return new Es(r).toPromise()})}function I3(n,e){return _(this,null,function*(){let t=cg(n,!1).get(e),r=yield new Es(t).toPromise();return r===void 0?null:r.value})}function cN(n,e){let t=cg(n,!0).delete(e);return new Es(t).toPromise()}var D3=800,b3=3,T3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield tI(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>b3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return kN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=g3._getInstance(_3()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield v3(),!this.activeServiceWorker)return;this.sender=new eI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||y3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield tI();return yield aN(t,ng,"1"),yield cN(t,ng),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>aN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>I3(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>cN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=cg(o,!1).getAll();return new Es(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),D3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),LN=T3;var Qle=PN("rcb"),Yle=new _s(3e4,6e4);function VN(n,e){return e?gi(e):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Du=class extends Eu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function C3(n){return l3(n.auth,new Du(n),n.bypassAuthState)}function S3(n){let{auth:e,user:t}=n;return te(t,e,"internal-error"),c3(t,new Du(n),n.bypassAuthState)}function A3(n){return _(this,null,function*(){let{auth:e,user:t}=n;return te(t,e,"internal-error"),a3(t,new Du(n),n.bypassAuthState)})}var og=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C3;case"linkViaPopup":case"linkViaRedirect":return A3;case"reauthViaPopup":case"reauthViaRedirect":return S3;default:Vr(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var R3=new _s(2e3,1e4);function II(n,e,t){return _(this,null,function*(){if(Dn(n.app))return Promise.reject(sr(n,"operation-not-supported-in-this-environment"));let r=ag(n);F4(n,e,wu);let i=VN(r,t);return new P3(r,"signInViaPopup",e,i).executeNotNull()})}var P3=(()=>{class n extends og{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let t=yield this.execute();return te(t,this.auth,"internal-error"),t})}onExecution(){return _(this,null,function*(){mi(this.filter.length===1,"Popup operations only handle one event");let t=wI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,R3.get())};t()}}n.currentPopupAction=null;return n})(),x3="pendingRedirect",Gp=new Map,nI=class n extends og{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Gp.get(this.auth._key());if(!e){try{let r=(yield N3(this.resolver,this.auth))?yield Ri(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gp.set(this.auth._key(),e)}return this.bypassAuthState||Gp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Ri(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ri(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function N3(n,e){return _(this,null,function*(){let t=O3(e),r=k3(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function M3(n,e){Gp.set(n._key(),e)}function k3(n){return gi(n._redirectPersistence)}function O3(n){return qp(x3,n.config.apiKey,n.name)}function F3(n,e,t=!1){return _(this,null,function*(){if(Dn(n.app))return Promise.reject(ys(n));let r=ag(n),i=VN(r,e),s=yield new nI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var L3=10*60*1e3,rI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L3&&this.cachedEventUids.clear(),this.cachedEventUids.has(lN(e))}saveEventToCache(e){this.cachedEventUids.add(lN(e)),this.lastProcessedEventTime=Date.now()}};function lN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function V3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jN(n);default:return!1}}function j3(t){return _(this,arguments,function*(n,e={}){return Ba(n,"GET","/v1/projects",e)})}var U3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B3=/^https?/;function $3(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield j3(n);for(let t of e)try{if(H3(t))return}catch{}Vr(n,"unauthorized-domain")})}function H3(n){let e=Gw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!B3.test(t))return!1;if(U3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var z3=new _s(3e4,6e4);function uN(){let n=Lr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function q3(n){return new Promise((e,t)=>{var r,i,o;function s(){uN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uN(),t(sr(n,"network-request-failed"))},timeout:z3.get()})}if(!((i=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Lr().gapi)===null||o===void 0)&&o.load)s();else{let a=PN("iframefcb");return Lr()[a]=()=>{gapi.load?s():t(sr(n,"network-request-failed"))},t3(`${n3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Wp=null,e})}var Wp=null;function G3(n){return Wp=Wp||q3(n),Wp}var W3=new _s(5e3,15e3),K3="__/auth/iframe",Q3="emulator/auth/iframe",Y3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J3(n){let e=n.config;te(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?cI(e,Q3):`https://${n.config.authDomain}/${K3}`,r={apiKey:e.apiKey,appName:n.name,v:ao},i=Z3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Oa(r).slice(1)}`}function X3(n){return _(this,null,function*(){let e=yield G3(n),t=Lr().gapi;return te(t,n,"internal-error"),e.open({where:document.body,url:J3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y3,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=sr(n,"network-request-failed"),a=Lr().setTimeout(()=>{o(s)},W3.get());function l(){Lr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}var eq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tq=500,nq=600,rq="_blank",iq="http://localhost",sg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oq(n,e,t,r=tq,i=nq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},eq),{width:r.toString(),height:i.toString(),top:o,left:s}),u=_t().toLowerCase();t&&(a=DN(u)?rq:t),wN(u)&&(e=e||iq,l.scrollbars="yes");let h=Object.entries(l).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(Y4(u)&&a!=="_self")return sq(e||"",a),new sg(null);let p=window.open(e||"",a,h);te(p,n,"popup-blocked");try{p.focus()}catch{}return new sg(p)}function sq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var aq="__/auth/handler",cq="emulator/auth/handler",lq=encodeURIComponent("fac");function dN(n,e,t,r,i,o){return _(this,null,function*(){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ao,eventId:i};if(e instanceof wu){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",bx(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof tg){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let l=yield n._getAppCheckToken(),u=l?`#${lq}=${encodeURIComponent(l)}`:"";return`${uq(n)}?${Oa(a).slice(1)}${u}`})}function uq({config:n}){return n.emulator?cI(n,cq):`https://${n.authDomain}/${aq}`}var qw="webStorageSupport",iI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=F3,this._overrideRedirectResult=M3}_openPopup(e,t,r,i){return _(this,null,function*(){var o;mi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield dN(e,t,r,Gw(),i);return oq(e,s,wI())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield dN(e,t,r,Gw(),i);return m3(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(mi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield X3(e),r=new rI(e);return t.register("authEvent",i=>(te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qw,{type:qw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[qw];s!==void 0&&t(!!s),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AN()||IN()||fI()}},UN=iI;var hN="@firebase/auth",fN="1.10.7";var oI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hq(n){ir(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RN(n)},u=new Jw(r,i,o,l);return r3(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ir(new Xt("auth-internal",e=>{let t=ag(e.getProvider("auth").getImmediate());return(r=>new oI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(hN,fN,dq(n)),Ze(hN,fN,"esm2017")}var fq=5*60,pq=ww("authIdTokenMaxAge")||fq,pN=null,gq=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pq)return;let i=t?.token;pN!==i&&(pN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function DI(n=gs()){let e=Fa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=gI(n,{popupRedirectResolver:UN,persistence:[LN,MN,EI]}),r=ww("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=gq(o.toString());yI(t,s,()=>s(t.currentUser)),bu(t,a=>s(a))}}let i=_w("auth");return i&&mI(t,`http://${i}`),t}function mq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}e3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=sr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",mq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hq("Browser");function HN(n){return new Q(function(e){var t=bu(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var zN="auth",ws=class{constructor(e){return e}},Tu=class{constructor(){return Va(zN)}};var bI=new j("angularfire2.auth-instances");function o6(n,e){let t=fu(zN,n,e);return t&&new ws(t)}function s6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ws(r)}}var a6={provide:Tu,deps:[[new Qt,bI]]},c6={provide:ws,useFactory:o6,deps:[[new Qt,bI],fi]};function qN(n,...e){return Ze("angularfire",co.full,"auth"),on([c6,a6,{provide:bI,useFactory:s6(n),multi:!0,deps:[pe,Ve,lo,vs,[new Qt,ja],...e]}])}var GN=Je(HN,!0);var WN=Je(DI,!0);var KN=Je(II,!0,2);var QN=Je(_I,!0,2);var YN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZN={};var vi,TI;(function(){var n;function e(D,y){function w(){}w.prototype=y.prototype,D.D=y.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(I,T,A){for(var E=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)E[Gr-2]=arguments[Gr];return y.prototype[T].apply(I,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,w){w||(w=0);var I=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)I[T]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(T=0;16>T;++T)I[T]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=D.g[0],w=D.g[1],T=D.g[2];var A=D.g[3],E=y+(A^w&(T^A))+I[0]+3614090360&4294967295;y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[3]+3250441966&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[4]+4118548399&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[7]+4249261313&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[8]+1770035416&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[11]+2304563134&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[12]+1804603682&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[15]+1236535329&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(T^A&(w^T))+I[1]+4129170786&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[0]+3921069994&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[5]+3593408605&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[4]+3889429448&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[9]+568446438&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[8]+1163531501&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[13]+2850285829&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[12]+2368359562&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(w^T^A)+I[5]+4294588738&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[14]+4259657740&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[1]+2763975236&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[10]+3200236656&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[13]+681279174&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[6]+76029189&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[9]+3654602809&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[2]+3299628645&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(T^(w|~A))+I[0]+4096336452&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[5]+4237533241&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[12]+1700485571&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[1]+2240044497&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[8]+1873313359&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[13]+1309151649&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[4]+4149444226&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var w=y-this.blockSize,I=this.B,T=this.h,A=0;A<y;){if(T==0)for(;A<=w;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<y;)if(I[T++]=D.charCodeAt(A++),T==this.blockSize){i(this,I),T=0;break}}else for(;A<y;)if(I[T++]=D[A++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var w=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=w&255,w/=256;for(this.u(D),D=Array(16),y=w=0;4>y;++y)for(var I=0;32>I;I+=8)D[w++]=this.g[y]>>>I&255;return D};function o(D,y){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=y(D)}function s(D,y){this.h=y;for(var w=[],I=!0,T=D.length-1;0<=T;T--){var A=D[T]|0;I&&A==y||(w[T]=A,I=!1)}this.g=w}var a={};function l(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(u(-D));for(var y=[],w=1,I=0;D>=w;I++)y[I]=D/w|0,w*=4294967296;return new s(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(y,8)),I=p,T=0;T<D.length;T+=8){var A=Math.min(8,D.length-T),E=parseInt(D.substring(T,T+A),y);8>A?(A=u(Math.pow(y,A)),I=I.j(A).add(u(E))):(I=I.j(w),I=I.add(u(E)))}return I}var p=l(0),g=l(1),v=l(16777216);n=s.prototype,n.m=function(){if(x(this))return-R(this).m();for(var D=0,y=1,w=0;w<this.g.length;w++){var I=this.i(w);D+=(0<=I?I:4294967296+I)*y,y*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(x(this))return"-"+R(this).toString(D);for(var y=u(Math.pow(D,6)),w=this,I="";;){var T=we(w,y).g;w=V(w,T.j(y));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=T,b(w))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function x(D){return D.h==-1}n.l=function(D){return D=V(this,D),x(D)?-1:b(D)?0:1};function R(D){for(var y=D.g.length,w=[],I=0;I<y;I++)w[I]=~D.g[I];return new s(w,~D.h).add(g)}n.abs=function(){return x(this)?R(this):this},n.add=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],I=0,T=0;T<=y;T++){var A=I+(this.i(T)&65535)+(D.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);I=E>>>16,A&=65535,E&=65535,w[T]=E<<16|A}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(D,y){return D.add(R(y))}n.j=function(D){if(b(this)||b(D))return p;if(x(this))return x(D)?R(this).j(R(D)):R(R(this).j(D));if(x(D))return R(this.j(R(D)));if(0>this.l(v)&&0>D.l(v))return u(this.m()*D.m());for(var y=this.g.length+D.g.length,w=[],I=0;I<2*y;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<D.g.length;T++){var A=this.i(I)>>>16,E=this.i(I)&65535,Gr=D.i(T)>>>16,Ec=D.i(T)&65535;w[2*I+2*T]+=E*Ec,Z(w,2*I+2*T),w[2*I+2*T+1]+=A*Ec,Z(w,2*I+2*T+1),w[2*I+2*T+1]+=E*Gr,Z(w,2*I+2*T+1),w[2*I+2*T+2]+=A*Gr,Z(w,2*I+2*T+2)}for(I=0;I<y;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=y;I<2*y;I++)w[I]=0;return new s(w,0)};function Z(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function W(D,y){this.g=D,this.h=y}function we(D,y){if(b(y))throw Error("division by zero");if(b(D))return new W(p,p);if(x(D))return y=we(R(D),y),new W(R(y.g),R(y.h));if(x(y))return y=we(D,R(y)),new W(R(y.g),y.h);if(30<D.g.length){if(x(D)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=y;0>=I.l(D);)w=it(w),I=it(I);var T=Re(w,1),A=Re(I,1);for(I=Re(I,2),w=Re(w,2);!b(I);){var E=A.add(I);0>=E.l(D)&&(T=T.add(w),A=E),I=Re(I,1),w=Re(w,1)}return y=V(D,T.j(y)),new W(T,y)}for(T=p;0<=D.l(y);){for(w=Math.max(1,Math.floor(D.m()/y.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=u(w),E=A.j(y);x(E)||0<E.l(D);)w-=I,A=u(w),E=A.j(y);b(A)&&(A=g),T=T.add(A),D=V(D,E)}return new W(T,D)}n.A=function(D){return we(this,D).h},n.and=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)&D.i(I);return new s(w,this.h&D.h)},n.or=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)|D.i(I);return new s(w,this.h|D.h)},n.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)^D.i(I);return new s(w,this.h^D.h)};function it(D){for(var y=D.g.length+1,w=[],I=0;I<y;I++)w[I]=D.i(I)<<1|D.i(I-1)>>>31;return new s(w,D.h)}function Re(D,y){var w=y>>5;y%=32;for(var I=D.g.length-w,T=[],A=0;A<I;A++)T[A]=0<y?D.i(A+w)>>>y|D.i(A+w+1)<<32-y:D.i(A+w);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TI=ZN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,vi=ZN.Integer=s}).apply(typeof YN<"u"?YN:typeof self<"u"?self:typeof window<"u"?window:{});var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yi={};var CI,u6,$a,SI,Cu,ug,AI,RI,PI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lg=="object"&&lg];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var P=f++;return{value:d(P,c[P]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,P){for(var B=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)B[Le-2]=arguments[Le];return d.prototype[C].apply(m,B)}}function x(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let C=c.length||0,P=m.length||0;c.length=C+P;for(let B=0;B<P;B++)c[C+B]=m[B]}else c.push(m)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function we(c){return we[" "](c),c}we[" "]=function(){};var it=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function Re(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let P=0;P<w.length;P++)f=w[P],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Gm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Gr{constructor(){this.h=this.g=null}add(d,f){let m=Ec.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ec=new V(()=>new q1,c=>c.reset());class q1{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let wc,Ic=!1,Gm=new Gr,ET=()=>{let c=a.Promise.resolve(void 0);wc=()=>{c.then(G1)}};var G1=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){A(f)}var d=Ec;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ic=!1};function Ti(){this.s=this.s,this.C=this.C}Ti.prototype.s=!1,Ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var W1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Dc(c,d){if(Rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(it){e:{try{we(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:K1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Dc.aa.h.call(this)}}b(Dc,Rt);var K1={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var bc="closure_listenable_"+(1e6*Math.random()|0),Q1=0;function Y1(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Q1,this.da=this.fa=!1}function fd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pd(c){this.src=c,this.g={},this.h=0}pd.prototype.add=function(c,d,f,m,C){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var B=Km(c,d,m,C);return-1<B?(d=c[B],f||(d.fa=!1)):(d=new Y1(d,this.src,P,!!m,C),d.fa=f,c.push(d)),d};function Wm(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),P;(P=0<=C)&&Array.prototype.splice.call(m,C,1),P&&(fd(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Km(c,d,f,m){for(var C=0;C<c.length;++C){var P=c[C];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==m)return C}return-1}var Qm="closure_lm_"+(1e6*Math.random()|0),Ym={};function wT(c,d,f,m,C){if(m&&m.once)return DT(c,d,f,m,C);if(Array.isArray(d)){for(var P=0;P<d.length;P++)wT(c,d[P],f,m,C);return null}return f=ev(f),c&&c[bc]?c.K(d,f,u(m)?!!m.capture:!!m,C):IT(c,d,f,!1,m,C)}function IT(c,d,f,m,C,P){if(!d)throw Error("Invalid event type");var B=u(C)?!!C.capture:!!C,Le=Jm(c);if(Le||(c[Qm]=Le=new pd(c)),f=Le.add(d,f,m,B,P),f.proxy)return f;if(m=Z1(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)W1||(C=B),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(TT(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Z1(){function c(f){return d.call(c.src,c.listener,f)}let d=J1;return c}function DT(c,d,f,m,C){if(Array.isArray(d)){for(var P=0;P<d.length;P++)DT(c,d[P],f,m,C);return null}return f=ev(f),c&&c[bc]?c.L(d,f,u(m)?!!m.capture:!!m,C):IT(c,d,f,!0,m,C)}function bT(c,d,f,m,C){if(Array.isArray(d))for(var P=0;P<d.length;P++)bT(c,d[P],f,m,C);else m=u(m)?!!m.capture:!!m,f=ev(f),c&&c[bc]?(c=c.i,d=String(d).toString(),d in c.g&&(P=c.g[d],f=Km(P,f,m,C),-1<f&&(fd(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete c.g[d],c.h--)))):c&&(c=Jm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Km(d,f,m,C)),(f=-1<c?d[c]:null)&&Zm(f))}function Zm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[bc])Wm(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(TT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Jm(d))?(Wm(f,c),f.h==0&&(f.src=null,d[Qm]=null)):fd(c)}}}function TT(c){return c in Ym?Ym[c]:Ym[c]="on"+c}function J1(c,d){if(c.da)c=!0;else{d=new Dc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Zm(c),c=f.call(m,d)}return c}function Jm(c){return c=c[Qm],c instanceof pd?c:null}var Xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function ev(c){return typeof c=="function"?c:(c[Xm]||(c[Xm]=function(d){return c.handleEvent(d)}),c[Xm])}function Pt(){Ti.call(this),this.i=new pd(this),this.M=this,this.F=null}b(Pt,Ti),Pt.prototype[bc]=!0,Pt.prototype.removeEventListener=function(c,d,f,m){bT(this,c,d,f,m)};function Ht(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Rt(d,c);else if(d instanceof Rt)d.target=d.target||c;else{var C=d;d=new Rt(m,c),I(d,C)}if(C=!0,f)for(var P=f.length-1;0<=P;P--){var B=d.g=f[P];C=gd(B,m,!0,d)&&C}if(B=d.g=c,C=gd(B,m,!0,d)&&C,C=gd(B,m,!1,d)&&C,f)for(P=0;P<f.length;P++)B=d.g=f[P],C=gd(B,m,!1,d)&&C}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)fd(f[m]);delete c.g[d],c.h--}}this.F=null},Pt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Pt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function gd(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,P=0;P<d.length;++P){var B=d[P];if(B&&!B.da&&B.capture==f){var Le=B.listener,It=B.ha||B.src;B.fa&&Wm(c.i,B),C=Le.call(It,m)!==!1&&C}}return C&&!m.defaultPrevented}function CT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ST(c){c.g=CT(()=>{c.g=null,c.i&&(c.i=!1,ST(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class X1 extends Ti{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ST(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tc(c){Ti.call(this),this.h=c,this.g={}}b(Tc,Ti);var AT=[];function RT(c){Re(c.g,function(d,f){this.g.hasOwnProperty(f)&&Zm(d)},c),c.g={}}Tc.prototype.N=function(){Tc.aa.N.call(this),RT(this)},Tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tv=a.JSON.stringify,eF=a.JSON.parse,tF=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function nv(){}nv.prototype.h=null;function PT(c){return c.h||(c.h=c.i())}function xT(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rv(){Rt.call(this,"d")}b(rv,Rt);function iv(){Rt.call(this,"c")}b(iv,Rt);var Do={},NT=null;function md(){return NT=NT||new Pt}Do.La="serverreachability";function MT(c){Rt.call(this,Do.La,c)}b(MT,Rt);function Sc(c){let d=md();Ht(d,new MT(d))}Do.STAT_EVENT="statevent";function kT(c,d){Rt.call(this,Do.STAT_EVENT,c),this.stat=d}b(kT,Rt);function zt(c){let d=md();Ht(d,new kT(d,c))}Do.Ma="timingevent";function OT(c,d){Rt.call(this,Do.Ma,c),this.size=d}b(OT,Rt);function Ac(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Rc(){this.g=!0}Rc.prototype.xa=function(){this.g=!1};function nF(c,d,f,m,C,P){c.info(function(){if(c.g)if(P)for(var B="",Le=P.split("&"),It=0;It<Le.length;It++){var Ae=Le[It].split("=");if(1<Ae.length){var xt=Ae[0];Ae=Ae[1];var Nt=xt.split("_");B=2<=Nt.length&&Nt[1]=="type"?B+(xt+"="+Ae+"&"):B+(xt+"=redacted&")}}else B=null;else B=P;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+B})}function rF(c,d,f,m,C,P,B){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+P+" "+B})}function Ls(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+oF(c,f)+(m?" "+m:"")})}function iF(c,d){c.info(function(){return"TIMEOUT: "+d})}Rc.prototype.info=function(){};function oF(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var P=C[0];if(P!="noop"&&P!="stop"&&P!="close")for(var B=1;B<C.length;B++)C[B]=""}}}}return tv(f)}catch{return d}}var vd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ov;function yd(){}b(yd,nv),yd.prototype.g=function(){return new XMLHttpRequest},yd.prototype.i=function(){return{}},ov=new yd;function Ci(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Tc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new LT}function LT(){this.i=null,this.g="",this.h=!1}var VT={},sv={};function av(c,d,f){c.L=1,c.v=Id(Wr(d)),c.m=f,c.P=!0,jT(c,null)}function jT(c,d){c.F=Date.now(),_d(c),c.A=Wr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),XT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new LT,c.g=vC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new X1(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(AT[0]=C.toString()),C=AT);for(var P=0;P<C.length;P++){var B=wT(f,C[P],m||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Sc(),nF(c.i,c.u,c.A,c.l,c.R,c.m)}Ci.prototype.ca=function(c){c=c.target;let d=this.M;d&&Kr(c)==3?d.j():this.Y(c)},Ci.prototype.Y=function(c){try{if(c==this.g)e:{let Nt=Kr(this.g);var d=this.g.Ba();let Us=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||sC(this.g)))){this.J||Nt!=4||d==7||(d==8||0>=Us?Sc(3):Sc(2)),cv(this);var f=this.g.Z();this.X=f;t:if(UT(this)){var m=sC(this.g);c="";var C=m.length,P=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bo(this),Pc(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(P&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,rF(this.i,this.u,this.A,this.l,this.R,Nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,It=this.g;if((Le=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Le)){var Ae=Le;break t}}Ae=null}if(f=Ae)Ls(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lv(this,f);else{this.o=!1,this.s=3,zt(12),bo(this),Pc(this);break e}}if(this.P){f=!0;let Bn;for(;!this.J&&this.C<B.length;)if(Bn=sF(this,B),Bn==sv){Nt==4&&(this.s=4,zt(14),f=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==VT){this.s=4,zt(15),Ls(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Ls(this.i,this.l,Bn,null),lv(this,Bn);if(UT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||B.length!=0||this.h.h||(this.s=1,zt(16),f=!1),this.o=this.o&&f,!f)Ls(this.i,this.l,B,"[Invalid Chunked Response]"),bo(this),Pc(this);else if(0<B.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),gv(xt),xt.M=!0,zt(11))}}else Ls(this.i,this.l,B,null),lv(this,B);Nt==4&&bo(this),this.o&&!this.J&&(Nt==4?fC(this.j,this):(this.o=!1,_d(this)))}else DF(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),bo(this),Pc(this)}}}catch{}finally{}};function UT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function sF(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?sv:(f=Number(d.substring(f,m)),isNaN(f)?VT:(m+=1,m+f>d.length?sv:(d=d.slice(m,m+f),c.C=m+f,d)))}Ci.prototype.cancel=function(){this.J=!0,bo(this)};function _d(c){c.S=Date.now()+c.I,BT(c,c.I)}function BT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ac(g(c.ba,c),d)}function cv(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ci.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(iF(this.i,this.A),this.L!=2&&(Sc(),zt(17)),bo(this),this.s=2,Pc(this)):BT(this,this.S-c)};function Pc(c){c.j.G==0||c.J||fC(c.j,c)}function bo(c){cv(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,RT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function lv(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||uv(f.h,c))){if(!c.K&&uv(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Sd(f),Td(f);else break e;pv(f),zt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ac(g(f.Za,f),6e3));if(1>=zT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Co(f,11)}else if((c.K||f.g==c)&&Sd(f),!Z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ae=C[d];if(f.T=Ae[0],Ae=Ae[1],f.G==2)if(Ae[0]=="c"){f.K=Ae[1],f.ia=Ae[2];let xt=Ae[3];xt!=null&&(f.la=xt,f.j.info("VER="+f.la));let Nt=Ae[4];Nt!=null&&(f.Aa=Nt,f.j.info("SVER="+f.Aa));let Us=Ae[5];Us!=null&&typeof Us=="number"&&0<Us&&(m=1.5*Us,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Bn=c.g;if(Bn){let Rd=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rd){var P=m.h;P.g||Rd.indexOf("spdy")==-1&&Rd.indexOf("quic")==-1&&Rd.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(dv(P,P.h),P.h=null))}if(m.D){let mv=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;mv&&(m.ya=mv,Be(m.I,m.D,mv))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var B=c;if(m.qa=mC(m,m.J?m.ia:null,m.W),B.K){qT(m.h,B);var Le=B,It=m.L;It&&(Le.I=It),Le.B&&(cv(Le),_d(Le)),m.g=B}else dC(m);0<f.i.length&&Cd(f)}else Ae[0]!="stop"&&Ae[0]!="close"||Co(f,7);else f.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Co(f,7):fv(f):Ae[0]!="noop"&&f.l&&f.l.ta(Ae),f.v=0)}}Sc(4)}catch{}}var aF=class{constructor(c,d){this.g=c,this.map=d}};function $T(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function HT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zT(c){return c.h?1:c.g?c.g.size:0}function uv(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function dv(c,d){c.g?c.g.add(d):c.h=d}function qT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}$T.prototype.cancel=function(){if(this.i=GT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function GT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return x(c.i)}function cF(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function lF(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function WT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=lF(c),m=cF(c),C=m.length,P=0;P<C;P++)d.call(void 0,m[P],f&&f[P],c)}var KT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uF(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var P=c[f].substring(0,m);C=c[f].substring(m+1)}else P=c[f];d(P,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function To(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof To){this.h=c.h,Ed(this,c.j),this.o=c.o,this.g=c.g,wd(this,c.s),this.l=c.l;var d=c.i,f=new Mc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),QT(this,f),this.m=c.m}else c&&(d=String(c).match(KT))?(this.h=!1,Ed(this,d[1]||"",!0),this.o=xc(d[2]||""),this.g=xc(d[3]||"",!0),wd(this,d[4]),this.l=xc(d[5]||"",!0),QT(this,d[6]||"",!0),this.m=xc(d[7]||"")):(this.h=!1,this.i=new Mc(null,this.h))}To.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Nc(d,YT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Nc(d,YT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Nc(f,f.charAt(0)=="/"?fF:hF,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Nc(f,gF)),c.join("")};function Wr(c){return new To(c)}function Ed(c,d,f){c.j=f?xc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function wd(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function QT(c,d,f){d instanceof Mc?(c.i=d,mF(c.i,c.h)):(f||(d=Nc(d,pF)),c.i=new Mc(d,c.h))}function Be(c,d,f){c.i.set(d,f)}function Id(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Nc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,dF),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function dF(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var YT=/[#\/\?@]/g,hF=/[#\?:]/g,fF=/[#\?]/g,pF=/[#\?@]/g,gF=/#/g;function Mc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Si(c){c.g||(c.g=new Map,c.h=0,c.i&&uF(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Mc.prototype,n.add=function(c,d){Si(this),this.i=null,c=Vs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ZT(c,d){Si(c),d=Vs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function JT(c,d){return Si(c),d=Vs(c,d),c.g.has(d)}n.forEach=function(c,d){Si(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},n.na=function(){Si(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let P=0;P<C.length;P++)f.push(d[m])}return f},n.V=function(c){Si(this);let d=[];if(typeof c=="string")JT(this,c)&&(d=d.concat(this.g.get(Vs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Si(this),this.i=null,c=Vs(this,c),JT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function XT(c,d,f){ZT(c,d),0<f.length&&(c.i=null,c.g.set(Vs(c,d),x(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let P=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var C=P;B[m]!==""&&(C+="="+encodeURIComponent(String(B[m]))),c.push(C)}}return this.i=c.join("&")};function Vs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function mF(c,d){d&&!c.j&&(Si(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(ZT(this,m),XT(this,C,f))},c)),c.j=d}function vF(c,d){let f=new Rc;if(a.Image){let m=new Image;m.onload=v(Ai,f,"TestLoadImage: loaded",!0,d,m),m.onerror=v(Ai,f,"TestLoadImage: error",!1,d,m),m.onabort=v(Ai,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=v(Ai,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function yF(c,d){let f=new Rc,m=new AbortController,C=setTimeout(()=>{m.abort(),Ai(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(P=>{clearTimeout(C),P.ok?Ai(f,"TestPingServer: ok",!0,d):Ai(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Ai(f,"TestPingServer: error",!1,d)})}function Ai(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function _F(){this.g=new tF}function EF(c,d,f){let m=f||"";try{WT(c,function(C,P){let B=C;u(C)&&(B=tv(C)),d.push(m+P+"="+encodeURIComponent(B))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function kc(c){this.l=c.Ub||null,this.j=c.eb||!1}b(kc,nv),kc.prototype.g=function(){return new Dd(this.l,this.j)},kc.prototype.i=function(c){return function(){return c}}({});function Dd(c,d){Pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Dd,Pt),n=Dd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Fc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function eC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Oc(this):Fc(this),this.readyState==3&&eC(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Oc(this))},n.Qa=function(c){this.g&&(this.response=c,Oc(this))},n.ga=function(){this.g&&Oc(this)};function Oc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Fc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tC(c){let d="";return Re(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function hv(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=tC(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Be(c,d,f))}function Qe(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Qe,Pt);var wF=/^https?$/i,IF=["POST","PUT"];n=Qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ov.g(),this.v=this.o?PT(this.o):PT(ov),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(P){nC(this,P);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IF,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,B]of f)this.g.setRequestHeader(P,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oC(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){nC(this,P)}};function nC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rC(c),bd(c)}function rC(c){c.A||(c.A=!0,Ht(c,"complete"),Ht(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ht(this,"complete"),Ht(this,"abort"),bd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bd(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iC(this):this.bb())},n.bb=function(){iC(this)};function iC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Kr(c)!=4||c.Z()!=2)){if(c.u&&Kr(c)==4)CT(c.Ea,0,c);else if(Ht(c,"readystatechange"),Kr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=B===0){var C=String(c.D).match(KT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!wF.test(C?C.toLowerCase():"")}f=m}if(f)Ht(c,"complete"),Ht(c,"success");else{c.m=6;try{var P=2<Kr(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",rC(c)}}finally{bd(c)}}}}function bd(c,d){if(c.g){oC(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ht(c,"ready");try{f.onreadystatechange=m}catch{}}}function oC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Kr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),eF(d)}};function sC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function DF(c){let d={};c=(c.g&&2<=Kr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(Z(c[m]))continue;var f=T(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=d[C]||[];d[C]=P,P.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function aC(c){this.Aa=0,this.i=[],this.j=new Rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lc("baseRetryDelayMs",5e3,c),this.cb=Lc("retryDelaySeedMs",1e4,c),this.Wa=Lc("forwardChannelMaxRetries",2,c),this.wa=Lc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $T(c&&c.concurrentRequestLimit),this.Da=new _F,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=aC.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){zt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=mC(this,null,this.W),Cd(this)};function fv(c){if(cC(c),c.G==3){var d=c.U++,f=Wr(c.I);if(Be(f,"SID",c.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),Vc(c,f),d=new Ci(c,c.j,d),d.L=2,d.v=Id(Wr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_d(d)}gC(c)}function Td(c){c.g&&(gv(c),c.g.cancel(),c.g=null)}function cC(c){Td(c),c.u&&(a.clearTimeout(c.u),c.u=null),Sd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cd(c){if(!HT(c.h)&&!c.s){c.s=!0;var d=c.Ga;wc||ET(),Ic||(wc(),Ic=!0),Gm.add(d,c),c.B=0}}function bF(c,d){return zT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ac(g(c.Ga,c,d),pC(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Ci(this,this.j,c),P=this.o;if(this.S&&(P?(P=y(P),I(P,this.S)):P=this.S),this.m!==null||this.O||(C.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=uC(this,C,d),f=Wr(this.I),Be(f,"RID",c),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),Vc(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(tC(P)))+"&"+d:this.m&&hv(f,this.m,P)),dv(this.h,C),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),C.T=!0,av(C,f,null)):av(C,f,d),this.G=2}}else this.G==3&&(c?lC(this,c):this.i.length==0||HT(this.h)||lC(this))};function lC(c,d){var f;d?f=d.l:f=c.U++;let m=Wr(c.I);Be(m,"SID",c.K),Be(m,"RID",f),Be(m,"AID",c.T),Vc(c,m),c.m&&c.o&&hv(m,c.m,c.o),f=new Ci(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=uC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dv(c.h,f),av(f,m,d)}function Vc(c,d){c.H&&Re(c.H,function(f,m){Be(d,m,f)}),c.l&&WT({},function(f,m){Be(d,m,f)})}function uC(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let P=-1;for(;;){let B=["count="+f];P==-1?0<f?(P=C[0].g,B.push("ofs="+P)):P=0:B.push("ofs="+P);let Le=!0;for(let It=0;It<f;It++){let Ae=C[It].g,xt=C[It].map;if(Ae-=P,0>Ae)P=Math.max(0,C[It].g-100),Le=!1;else try{EF(xt,B,"req"+Ae+"_")}catch{m&&m(xt)}}if(Le){m=B.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function dC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;wc||ET(),Ic||(wc(),Ic=!0),Gm.add(d,c),c.v=0}}function pv(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ac(g(c.Fa,c),pC(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,hC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ac(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Td(this),hC(this))};function gv(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function hC(c){c.g=new Ci(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Wr(c.qa);Be(d,"RID","rpc"),Be(d,"SID",c.K),Be(d,"AID",c.T),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(d,"TO",c.ja),Be(d,"TYPE","xmlhttp"),Vc(c,d),c.m&&c.o&&hv(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Id(Wr(d)),f.m=null,f.P=!0,jT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Td(this),pv(this),zt(19))};function Sd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function fC(c,d){var f=null;if(c.g==d){Sd(c),gv(c),c.g=null;var m=2}else if(uv(c.h,d))f=d.D,qT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=md(),Ht(m,new OT(m,f)),Cd(c)}else dC(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&bF(c,d)||m==2&&pv(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Co(c,5);break;case 4:Co(c,10);break;case 3:Co(c,6);break;default:Co(c,2)}}}function pC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Co(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new To(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ed(m,"https"),Id(m),C?vF(m.toString(),f):yF(m.toString(),f)}else zt(2);c.G=0,c.l&&c.l.sa(d),gC(c),cC(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function gC(c){if(c.G=0,c.ka=[],c.l){let d=GT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function mC(c,d,f){var m=f instanceof To?Wr(f):new To(f);if(m.g!="")d&&(m.g=d+"."+m.g),wd(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var P=new To(null);m&&Ed(P,m),d&&(P.g=d),C&&wd(P,C),f&&(P.l=f),m=P}return f=c.D,d=c.ya,f&&d&&Be(m,f,d),Be(m,"VER",c.la),Vc(c,m),m}function vC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Qe(new kc({eb:f})):new Qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yC(){}n=yC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ad(){}Ad.prototype.g=function(c,d){return new un(c,d)};function un(c,d){Pt.call(this),this.g=new aC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new js(this)}b(un,Pt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){fv(this.g)},un.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=tv(c),c=f);d.i.push(new aF(d.Ya++,c)),d.G==3&&Cd(d)},un.prototype.N=function(){this.g.l=null,delete this.j,fv(this.g),delete this.g,un.aa.N.call(this)};function _C(c){rv.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(_C,rv);function EC(){iv.call(this),this.status=1}b(EC,iv);function js(c){this.g=c}b(js,yC),js.prototype.ua=function(){Ht(this.g,"a")},js.prototype.ta=function(c){Ht(this.g,new _C(c))},js.prototype.sa=function(c){Ht(this.g,new EC)},js.prototype.ra=function(){Ht(this.g,"b")},Ad.prototype.createWebChannel=Ad.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,PI=yi.createWebChannelTransport=function(){return new Ad},RI=yi.getStatEventTarget=function(){return md()},AI=yi.Event=Do,ug=yi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vd.NO_ERROR=0,vd.TIMEOUT=8,vd.HTTP_ERROR=6,Cu=yi.ErrorCode=vd,FT.COMPLETE="complete",SI=yi.EventType=FT,xT.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,$a=yi.WebChannel=xT,u6=yi.FetchXmlHttpFactory=kc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,CI=yi.XhrIo=Qe}).apply(typeof lg<"u"?lg:typeof self<"u"?self:typeof window<"u"?window:{});var JN="@firebase/firestore",XN="4.7.17";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var lc="11.9.0";var Ts=new Or("@firebase/firestore");function Ha(){return Ts.logLevel}function q(n,...e){if(Ts.logLevel<=ye.DEBUG){let t=e.map(Eb);Ts.debug(`Firestore (${lc}): ${n}`,...t)}}function _i(n,...e){if(Ts.logLevel<=ye.ERROR){let t=e.map(Eb);Ts.error(`Firestore (${lc}): ${n}`,...t)}}function Ya(n,...e){if(Ts.logLevel<=ye.WARN){let t=e.map(Eb);Ts.warn(`Firestore (${lc}): ${n}`,...t)}}function Eb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qM(n,r,t)}function qM(n,e,t){let r=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _i(r),new Error(r)}function Ne(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||qM(e,i,r)}function oe(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends In{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ar=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},LI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VI=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ar,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ar)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new vg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Et(e)}},jI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},UI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},BI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function d6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function GM(){return new TextEncoder}var _g=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=d6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function $I(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return me(r,i);{let o=GM(),s=h6(o.encode(eM(n,t)),o.encode(eM(e,t)));return s!==0?s:me(r,i)}}t+=r>65535?2:1}return me(n.length,e.length)}function eM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function h6(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}function Za(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var tM=-62135596800,nM=1e6,At=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tM)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nM}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-tM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new At(0,0))}static max(){return new n(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rM="__name__",Eg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):$I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}},Ke=class n extends Eg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},f6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tn=class n extends Eg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return f6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rM}static keyField(){return new n([rM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ke.fromString(e))}static fromName(e){return new n(Ke.fromString(e).popFirst(5))}static empty(){return new n(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ke(e.slice()))}};var Nu=-1,HI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};HI.UNKNOWN_ID=-1;function p6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new Cs(i,J.empty(),e)}function g6(n){return new Cs(n.readTime,n.key,Nu)}var Cs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),J.empty(),Nu)}static max(){return new n(ae.max(),J.empty(),Nu)}};function m6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var v6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function uc(n){return _(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==v6)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function y6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dc(n){return n.name==="IndexedDbTransactionError"}var wb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Ib=-1;function em(n){return n==null}function Mu(n){return n===0&&1/n==-1/0}function _6(n){return typeof n=="number"&&Number.isInteger(n)&&!Mu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var WM="";function E6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iM(e)),e=w6(n.get(t),e);return iM(e)}function w6(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case WM:t+="";break;default:t+=o}}return t}function iM(n){return n+WM+""}var I6="remoteDocuments",KM="owner";var QM="mutationQueues";var YM="mutations";var ZM="documentMutations",D6="remoteDocumentsV14";var JM="remoteDocumentGlobal";var XM="targets";var ek="targetDocuments";var tk="targetGlobal",nk="collectionParents";var rk="clientMetadata";var ik="bundles";var ok="namedQueries";var b6="indexConfiguration";var T6="indexState";var C6="indexEntries";var sk="documentOverlays";var S6="globals";var A6=[QM,YM,ZM,I6,XM,KM,tk,ek,rk,JM,nk,ik,ok],nde=[...A6,sk],R6=[QM,YM,ZM,D6,XM,KM,tk,ek,rk,JM,nk,ik,ok,sk],P6=R6,x6=[...P6,b6,T6,C6];var rde=[...x6,S6];function oM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ak(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Xe=class n{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}},Wa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wt=class n{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class n{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new wt(Tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ig=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ig("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bt.EMPTY_BYTE_STRING=new Bt("");var N6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(n){if(Ne(!!n,39018),typeof n=="string"){let e=0,t=N6.exec(n);if(Ne(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}var ck="server_timestamp",lk="__type__",uk="__previous_value__",dk="__local_write_time__";function Db(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lk])===null||t===void 0?void 0:t.stringValue)===ck}function tm(n){let e=n.mapValue.fields[uk];return Db(e)?tm(e):e}function ku(n){let e=Ei(n.mapValue.fields[dk].timestampValue);return new At(e.seconds,e.nanos)}var qI=class{constructor(e,t,r,i,o,s,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}},Dg="(default)",bg=class n{constructor(e,t){this.projectId=e,this.database=t||Dg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bb="__type__",hk="__max__",dg={mapValue:{fields:{__type__:{stringValue:hk}}}},Tb="__vector__",Ja="value";function go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Db(n)?4:pk(n)?9007199254740991:fk(n)?10:11:X(28295,{value:n})}function $r(n,e){if(n===e)return!0;let t=go(n);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ku(n).isEqual(ku(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ei(i.timestampValue),a=Ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?Mu(s)===Mu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oM(s)!==oM(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!$r(s[l],a[l])))return!1;return!0}(n,e);default:return X(52216,{left:n})}}function Ou(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function Xa(n,e){if(n===e)return 0;let t=go(n),r=go(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),l=We(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return sM(n.timestampValue,e.timestampValue);case 4:return sM(ku(n),ku(e));case 5:return $I(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wi(o),l=wi(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=me(a[u],l[u]);if(h!==0)return h}return me(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(We(o.latitude),We(s.latitude));return a!==0?a:me(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return aM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,h;let p=o.fields||{},g=s.fields||{},v=(a=p[Ja])===null||a===void 0?void 0:a.arrayValue,b=(l=g[Ja])===null||l===void 0?void 0:l.arrayValue,x=me(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:aM(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===dg.mapValue&&s===dg.mapValue)return 0;if(o===dg.mapValue)return 1;if(s===dg.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let g=$I(l[p],h[p]);if(g!==0)return g;let v=Xa(a[l[p]],u[h[p]]);if(v!==0)return v}return me(l.length,h.length)}(n.mapValue,e.mapValue);default:throw X(23264,{Pe:t})}}function sM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=Ei(n),r=Ei(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function aM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xa(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function ec(n){return GI(n)}function GI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ei(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=GI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${GI(t.fields[s])}`;return i+"}"}(n.mapValue):X(61005,{value:n})}function pg(n){switch(go(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=tm(n);return e?16+pg(e):16;case 5:return 2*n.stringValue.length;case 6:return wi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+pg(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Eo(r.fields,(o,s)=>{i+=o.length+pg(s)}),i}(n.mapValue);default:throw X(13486,{value:n})}}function cM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WI(n){return!!n&&"integerValue"in n}function Cb(n){return!!n&&"arrayValue"in n}function lM(n){return!!n&&"nullValue"in n}function uM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gg(n){return!!n&&"mapValue"in n}function fk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bb])===null||t===void 0?void 0:t.stringValue)===Tb}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Eo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hk}var ode={mapValue:{fields:{[bb]:{stringValue:Tb},[Ja]:{arrayValue:{}}}}};var bn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Au(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Eo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Au(this.value))}};function gk(n){let e=[];return Eo(n.fields,(t,r)=>{let i=new Tn([t]);if(gg(r)){let o=gk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Vn(e)}var cr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),bn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var tc=class{constructor(e,t){this.position=e,this.inclusive=t}};function dM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=J.comparator(J.fromName(s.referenceValue),t.key):r=Xa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}var Ss=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function M6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Tg=class{},dt=class n extends Tg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new QI(e,t,r):t==="array-contains"?new JI(e,r):t==="in"?new XI(e,r):t==="not-in"?new eD(e,r):t==="array-contains-any"?new tD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YI(e,r):new ZI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xa(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},lr=class n extends Tg{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return mk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function mk(n){return n.op==="and"}function vk(n){return k6(n)&&mk(n)}function k6(n){for(let e of n.filters)if(e instanceof lr)return!1;return!0}function KI(n){if(n instanceof dt)return n.field.canonicalString()+n.op.toString()+ec(n.value);if(vk(n))return n.filters.map(e=>KI(e)).join(",");{let e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function yk(n,e){return n instanceof dt?function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&$r(r.value,i.value)}(n,e):n instanceof lr?function(r,i){return i instanceof lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&yk(s,i.filters[a]),!0):!1}(n,e):void X(19439)}function _k(n){return n instanceof dt?function(t){return`${t.field.canonicalString()} ${t.op} ${ec(t.value)}`}(n):n instanceof lr?function(t){return t.op.toString()+" {"+t.getFilters().map(_k).join(" ,")+"}"}(n):"Filter"}var QI=class extends dt{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},YI=class extends dt{constructor(e,t){super(e,"in",t),this.keys=Ek("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ZI=class extends dt{constructor(e,t){super(e,"not-in",t),this.keys=Ek("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ek(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}var JI=class extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Cb(t)&&Ou(t.arrayValue,this.value)}},XI=class extends dt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}},eD=class extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}},tD=class extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Cb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ou(this.value.arrayValue,r))}};var nD=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function fM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new nD(n,e,t,r,i,o,s)}function Sb(n){let e=oe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ec(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ec(r)).join(",")),e.Ie=t}return e.Ie}function Ab(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!M6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hM(n.startAt,e.startAt)&&hM(n.endAt,e.endAt)}function rD(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var mo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function O6(n,e,t,r,i,o,s,a){return new mo(n,e,t,r,i,o,s,a)}function nm(n){return new mo(n)}function pM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wk(n){return n.collectionGroup!==null}function Ru(n){let e=oe(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wt(Tn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ss(o,r))}),t.has(Tn.keyField().canonicalString())||e.Ee.push(new Ss(Tn.keyField(),r))}return e.Ee}function Ur(n){let e=oe(n);return e.de||(e.de=F6(e,Ru(n))),e.de}function F6(n,e){if(n.limitType==="F")return fM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ss(i.field,o)});let t=n.endAt?new tc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new tc(n.startAt.position,n.startAt.inclusive):null;return fM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iD(n,e){let t=n.filters.concat([e]);return new mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oD(n,e,t){return new mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rm(n,e){return Ab(Ur(n),Ur(e))&&n.limitType===e.limitType}function Ik(n){return`${Sb(Ur(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_k(i)).join(", ")}]`),em(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ec(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ec(i)).join(",")),`Target(${r})`}(Ur(n))}; limitType=${n.limitType})`}function im(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ru(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=dM(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Ru(r),i)||r.endAt&&!function(s,a,l){let u=dM(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Ru(r),i))}(n,e)}function L6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Dk(n){return(e,t)=>{let r=!1;for(let i of Ru(n)){let o=V6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function V6(n,e,t){let r=n.field.isKeyField()?J.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Xa(l,u):X(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var Ii=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ak(this.inner)}size(){return this.innerSize}};var j6=new Xe(J.comparator);function Di(){return j6}var bk=new Xe(J.comparator);function Su(...n){let e=bk;for(let t of n)e=e.insert(t.key,t);return e}function Tk(n){let e=bk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Is(){return Pu()}function Ck(){return Pu()}function Pu(){return new Ii(n=>n.toString(),(n,e)=>n.isEqual(e))}var U6=new Xe(J.comparator),B6=new wt(J.comparator);function Ee(...n){let e=B6;for(let t of n)e=e.add(t);return e}var $6=new wt(me);function H6(){return $6}function Rb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mu(e)?"-0":e}}function Sk(n){return{integerValue:""+n}}function z6(n,e){return _6(e)?Sk(e):Rb(n,e)}var nc=class{constructor(){this._=void 0}};function q6(n,e,t){return n instanceof rc?function(i,o){let s={fields:{[lk]:{stringValue:ck},[dk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Db(o)&&(o=tm(o)),o&&(s.fields[uk]=o),{mapValue:s}}(t,e):n instanceof As?Rk(n,e):n instanceof Rs?Pk(n,e):function(i,o){let s=Ak(i,o),a=gM(s)+gM(i.Re);return WI(s)&&WI(i.Re)?Sk(a):Rb(i.serializer,a)}(n,e)}function G6(n,e,t){return n instanceof As?Rk(n,e):n instanceof Rs?Pk(n,e):t}function Ak(n,e){return n instanceof ic?function(r){return WI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var rc=class extends nc{},As=class extends nc{constructor(e){super(),this.elements=e}};function Rk(n,e){let t=xk(e);for(let r of n.elements)t.some(i=>$r(i,r))||t.push(r);return{arrayValue:{values:t}}}var Rs=class extends nc{constructor(e){super(),this.elements=e}};function Pk(n,e){let t=xk(e);for(let r of n.elements)t=t.filter(i=>!$r(i,r));return{arrayValue:{values:t}}}var ic=class extends nc{constructor(e,t){super(),this.serializer=e,this.Re=t}};function gM(n){return We(n.integerValue||n.doubleValue)}function xk(n){return Cb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function W6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof As&&i instanceof As||r instanceof Rs&&i instanceof Rs?Za(r.elements,i.elements,$r):r instanceof ic&&i instanceof ic?$r(r.Re,i.Re):r instanceof rc&&i instanceof rc}(n.transform,e.transform)}var sD=class{constructor(e,t){this.version=e,this.transformResults=t}},jn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function mg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var oc=class{};function Nk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sc(n.key,jn.none()):new Ps(n.key,n.data,jn.none());{let t=n.data,r=bn.empty(),i=new wt(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hr(n.key,r,new Vn(i.toArray()),jn.none())}}function K6(n,e,t){n instanceof Ps?function(i,o,s){let a=i.value.clone(),l=vM(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hr?function(i,o,s){if(!mg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=vM(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Mk(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function xu(n,e,t,r){return n instanceof Ps?function(o,s,a,l){if(!mg(o.precondition,s))return a;let u=o.value.clone(),h=yM(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hr?function(o,s,a,l){if(!mg(o.precondition,s))return a;let u=yM(o.fieldTransforms,l,s),h=s.data;return h.setAll(Mk(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return mg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Q6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ak(r.transform,i||null);o!=null&&(t===null&&(t=bn.empty()),t.set(r.field,o))}return t||null}function mM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Za(r,i,(o,s)=>W6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ps=class extends oc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hr=class extends oc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Mk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vM(n,e,t){let r=new Map;Ne(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,G6(s,a,t[i]))}return r}function yM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,q6(o,s,e))}return r}var sc=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},aD=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&K6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=xu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ck();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=Nk(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,(t,r)=>mM(t,r))&&Za(this.baseMutations,e.baseMutations,(t,r)=>mM(t,r))}},lD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return U6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var uD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var lt,Te;function Y6(n){switch(n){case N.OK:return X(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function kk(n){if(n===void 0)return _i("GRPC error has no .code"),N.UNKNOWN;switch(n){case lt.OK:return N.OK;case lt.CANCELLED:return N.CANCELLED;case lt.UNKNOWN:return N.UNKNOWN;case lt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case lt.INTERNAL:return N.INTERNAL;case lt.UNAVAILABLE:return N.UNAVAILABLE;case lt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case lt.NOT_FOUND:return N.NOT_FOUND;case lt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case lt.ABORTED:return N.ABORTED;case lt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case lt.DATA_LOSS:return N.DATA_LOSS;default:return X(39323,{code:n})}}(Te=lt||(lt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var _M=null;var Z6=new vi([4294967295,4294967295],0);function EM(n){let e=GM().encode(n),t=new TI;return t.update(e),new Uint8Array(t.digest())}function wM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vi([t,r],0),new vi([i,o],0)]}var hD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ds(`Invalid padding: ${t}`);if(r<0)throw new Ds(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ds(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ds(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=vi.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(vi.fromNumber(r)));return i.compare(Z6)===1&&(i=new vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=EM(e),[r,i]=wM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=EM(e),[r,i]=wM(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ds=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Cg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Xe(me),Di(),Ee())}},Fu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var Ka=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},Sg=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ag=class{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Rg=class{constructor(){this.Fe=0,this.Me=IM(),this.xe=Bt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ee(),t=Ee(),r=Ee();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new Fu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=IM()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},fD=class{constructor(e){this.ze=e,this.je=new Map,this.He=Di(),this.Je=hg(),this.Ye=hg(),this.Ze=new Xe(me)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(rD(o))if(r===0){let s=new J(o.path);this.tt(t,s,cr.newNoDocument(s,ae.min()))}else Ne(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),l=a?this.lt(a,e,s):1;if(l!==0){this.st(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}_M?.ht(function(h,p,g,v,b){var x,R,V,Z,W,we;let it={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Re=p.unchangedNames;return Re&&(it.bloomFilter={applied:b===0,hashCount:(x=Re?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(Z=(V=(R=Re?.bits)===null||R===void 0?void 0:R.bitmap)===null||V===void 0?void 0:V.length)!==null&&Z!==void 0?Z:0,padding:(we=(W=Re?.bits)===null||W===void 0?void 0:W.padding)!==null&&we!==void 0?we:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),it}(s,e.Ce,this.ze.Pt(),a,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(l){if(l instanceof Ig)return Ya("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hD(s,i,o)}catch(l){return Ya(l instanceof Ds?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&rD(a.target)){let l=new J(a.target.path);this.Et(l).has(s)||this.dt(s,l)||this.tt(s,l,cr.newNoDocument(l,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=Ee();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Cg(e,t,this.Ze,this.He,r);return this.He=Di(),this.Je=hg(),this.Ye=hg(),this.Ze=new Xe(me),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Rg,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new wt(me),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new wt(me),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Rg),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function hg(){return new Xe(J.comparator)}function IM(){return new Xe(J.comparator)}var J6={asc:"ASCENDING",desc:"DESCENDING"},X6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eG={and:"AND",or:"OR"},pD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function gD(n,e){return n.useProto3Json||em(e)?e:{value:e}}function Pg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ok(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tG(n,e){return Pg(n,e.toTimestamp())}function Br(n){return Ne(!!n,49232),ae.fromTimestamp(function(t){let r=Ei(t);return new At(r.seconds,r.nanos)}(n))}function Pb(n,e){return mD(n,e).canonicalString()}function mD(n,e){let t=function(i){return new Ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Fk(n){let e=Ke.fromString(n);return Ne(Bk(e),10190,{key:e.toString()}),e}function vD(n,e){return Pb(n.databaseId,e.path)}function xI(n,e){let t=Fk(e);if(t.get(1)!==n.databaseId.projectId)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(Vk(t))}function Lk(n,e){return Pb(n.databaseId,e)}function nG(n){let e=Fk(n);return e.length===4?Ke.emptyPath():Vk(e)}function yD(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Vk(n){return Ne(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DM(n,e,t){return{name:vD(n,e),fields:t.value.mapValue.fields}}function rG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?N.UNKNOWN:kk(u.code);return new H(h,u.message||"")}(s);t=new Ag(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xI(n,r.document.name),o=Br(r.document.updateTime),s=r.document.createTime?Br(r.document.createTime):ae.min(),a=new bn({mapValue:{fields:r.document.fields}}),l=cr.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Ka(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xI(n,r.document),o=r.readTime?Br(r.readTime):ae.min(),s=cr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ka([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xI(n,r.document),o=r.removedTargetIds||[];t=new Ka([],o,i,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new dD(i,o),a=r.targetId;t=new Sg(a,s)}}return t}function iG(n,e){let t;if(e instanceof Ps)t={update:DM(n,e.key,e.value)};else if(e instanceof sc)t={delete:vD(n,e.key)};else if(e instanceof Hr)t={update:DM(n,e.key,e.data),updateMask:fG(e.fieldMask)};else{if(!(e instanceof aD))return X(16599,{ft:e.type});t={verify:vD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof rc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof As)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ic)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw X(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:tG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X(27497)}(n,e.precondition)),t}function oG(n,e){return n&&n.length>0?(Ne(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Br(i.updateTime):Br(o);return s.isEqual(ae.min())&&(s=Br(o)),new sD(s,i.transformResults||[])}(t,e))):[]}function sG(n,e){return{documents:[Lk(n,e.path)]}}function aG(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Lk(n,i);let o=function(u){if(u.length!==0)return Uk(lr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:qa(g.field),direction:uG(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=gD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function cG(n){let e=nG(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ne(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=jk(p);return g instanceof lr&&vk(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(b){return new Ss(Ga(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,em(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){let g=!!p.before,v=p.values||[];return new tc(v,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let g=!p.before,v=p.values||[];return new tc(v,g)}(t.endAt)),O6(e,i,s,o,a,"F",l,u)}function lG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ga(t.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ga(t.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ga(t.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ga(t.unaryFilter.field);return dt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(n):n.fieldFilter!==void 0?function(t){return dt.create(Ga(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return lr.create(t.compositeFilter.filters.map(r=>jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(t.compositeFilter.op))}(n):X(30097,{filter:n})}function uG(n){return J6[n]}function dG(n){return X6[n]}function hG(n){return eG[n]}function qa(n){return{fieldPath:n.canonicalString()}}function Ga(n){return Tn.fromServerFormat(n.fieldPath)}function Uk(n){return n instanceof dt?function(t){if(t.op==="=="){if(uM(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NAN"}};if(lM(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uM(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NAN"}};if(lM(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(t.field),op:dG(t.op),value:t.value}}}(n):n instanceof lr?function(t){let r=t.getFilters().map(i=>Uk(i));return r.length===1?r[0]:{compositeFilter:{op:hG(t.op),filters:r}}}(n):X(54877,{filter:n})}function fG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lu=class n{constructor(e,t,r,i,o=ae.min(),s=ae.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _D=class{constructor(e){this.wt=e}};function pG(n){let e=cG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oD(e,e.limit,"L"):e}var xg=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Mu(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Ei(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(wi(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?pk(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):fk(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):X(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=Ja,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(We(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),J.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};xg.Wt=new xg;var ED=class{constructor(){this.Cn=new wD}addToCollectionParentIndex(e,t){return this.Cn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Cs.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},wD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Ke.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Ke.comparator)).toArray()}};var sde=new Uint8Array(0);var bM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$k=41943040,Ln=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln($k,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);var Vu=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var TM="LruGarbageCollector",gG=1048576;function CM([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var ID=class{constructor(e){this.Er=e,this.buffer=new wt(CM),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();CM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},DD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(TM,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){dc(t)?q(TM,"Ignoring IndexedDB error during garbage collection: ",t):yield uc(t)}yield this.mr(3e5)}))}},bD=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(wb.le);let r=new ID(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(bM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bM):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Ha()<=ye.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function mG(n,e){return new bD(n,e)}var TD=class{constructor(){this.changes=new Ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var CD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var SD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xu(r.mutation,i,Vn.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=Is();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Su();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Is();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Di(),s=Pu(),a=function(){return Pu()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Hr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),xu(h.mutation,u,h.mutation.getFieldMask(),At.now())):s.set(u.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var p;return a.set(u,new CD(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Pu(),i=new Xe((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||Vn.empty();h=a.applyToLocalView(u,h),r.set(l,h);let p=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=Ck();h.forEach(g=>{if(!o.has(g)){let v=Nk(t.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(Is()),a=Nu,l=o;return s.next(u=>O.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ee())).next(h=>({batchId:a,changes:Tk(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Su();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,l=>{let u=function(p,g){return new mo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,cr.newInvalidDocument(h)))});let a=Su();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&xu(h.mutation,u,Vn.empty(),At.now()),im(t,u)&&(a=a.insert(l,u))}),a})}};var AD=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return O.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Br(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:pG(i.bundledQuery),readTime:Br(i.readTime)}}(t)),O.resolve()}};var RD=class{constructor(){this.overlays=new Xe(J.comparator),this.Qr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Is();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Is(),o=t.length+1,s=new J(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Xe((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Is(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Is(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return O.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new uD(t,r));let o=this.Qr.get(t);o===void 0&&(o=Ee(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var PD=class{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var ju=class{constructor(){this.$r=new wt(ut.Ur),this.Kr=new wt(ut.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new ut(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new ut(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new J(new Ke([])),r=new ut(t,e),i=new ut(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new J(new Ke([])),r=new ut(t,e),i=new ut(t,e+1),o=Ee();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ut(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ut=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return J.comparator(e.key,t.key)||me(e.Zr,t.Zr)}static Wr(e,t){return me(e.Zr,t.Zr)||J.comparator(e.key,t.key)}};var xD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new wt(ut.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new cD(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new ut(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Ib:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ut(t,0),i=new ut(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(me);return t.forEach(i=>{let o=new ut(i,0),s=new ut(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),O.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;J.isDocumentKey(o)||(o=o.child(""));let s=new ut(new J(o),0),a=new wt(me);return this.Xr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Zr)),!0)},s),O.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ne(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return O.forEach(t.mutations,i=>{let o=new ut(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new ut(t,0),i=this.Xr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ND=class{constructor(e){this.ii=e,this.docs=function(){return new Xe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let r=Di();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cr.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Di(),s=t.path,a=new J(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||m6(g6(h),r)<=0||(i.has(h.key)||im(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){X(9500)}si(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MD(this)}getSize(e){return O.resolve(this.size)}},MD=class extends TD{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var kD=class{constructor(e){this.persistence=e,this.oi=new Ii(t=>Sb(t),Ab),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this._i=0,this.ai=new ju,this.targetCount=0,this.ui=Vu.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),O.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new Vu(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Tr(t),O.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.ai.containsKey(t))}};var Ng=class{constructor(e,t){this.ci={},this.overlays={},this.li=new wb(0),this.hi=!1,this.hi=!0,this.Pi=new PD,this.referenceDelegate=e(this),this.Ti=new kD(this),this.indexManager=new ED,this.remoteDocumentCache=function(i){return new ND(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new _D(t),this.Ei=new AD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new xD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new OD(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return O.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},OD=class extends zI{constructor(e){super(),this.currentSequenceNumber=e}},FD=class n{constructor(e){this.persistence=e,this.Vi=new ju,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw X(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,r=>{let i=J.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,ae.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return O.or([()=>O.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Mg=class n{constructor(e,t){this.persistence=e,this.yi=new Ii(r=>E6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mG(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return O.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pg(e.data.value)),t}Dr(e,t,r){return O.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var LD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var VD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var jD=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ix()?8:y6(_t())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new VD;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Ha()<=ye.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(Ha()<=ye.DEBUG&&q("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Ha()<=ye.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):O.resolve())}ws(e,t){if(pM(t))return O.resolve(null);let r=Ur(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oD(t,null,"F"),r=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.vs(t,a);return this.Cs(t,u,s,l.readTime)?this.ws(e,oD(t,null,"F")):this.Fs(e,u,t,l)}))})))}bs(e,t,r,i){return pM(t)||i.isEqual(ae.min())?O.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?O.resolve(null):(Ha()<=ye.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(t)),this.Fs(e,s,t,p6(i,Nu)).next(a=>a))})}vs(e,t){let r=new wt(Dk(e));return t.forEach((i,o)=>{im(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ha()<=ye.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",za(t)),this.ys.getDocumentsMatchingQuery(e,t,Cs.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xb="LocalStore",vG=3e8,UD=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Xe(me),this.Os=new Ii(o=>Sb(o),Ab),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function yG(n,e,t,r){return new UD(n,e,t,r)}function Hk(n,e){return _(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Ee();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:s,addedBatchIds:a}))})})})}function _G(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,g=p.keys(),v=O.resolve();return g.forEach(b=>{v=v.next(()=>h.getEntry(l,b)).next(x=>{let R=u.docVersions.get(b);Ne(R!==null,48541),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zk(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function EG(n,e){let t=oe(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Bt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(x,R,V){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=vG?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,v,h)&&a.push(t.Ti.updateTargetData(o,v))});let l=Di(),u=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(wG(o,s,e.documentUpdates).next(h=>{l=h.qs,u=h.Qs})),!r.isEqual(ae.min())){let h=t.Ti.getLastRemoteSnapshotVersion(o).next(p=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.xs=i,o))}function wG(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Di();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):q(xb,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:s,Qs:i}})}function IG(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ib),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DG(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new Lu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function BD(n,e,t){return _(this,null,function*(){let r=oe(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!dc(s))throw s;q(xb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function SM(n,e,t){let r=oe(n),i=ae.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let p=oe(l),g=p.Os.get(h);return g!==void 0?O.resolve(p.xs.get(g)):p.Ti.getTargetData(u,h)}(r,s,Ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:ae.min(),t?o:Ee())).next(a=>(bG(r,L6(e),a),{documents:a,$s:o})))}function bG(n,e,t){let r=n.Ns.get(e)||ae.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var kg=class{constructor(){this.activeTargetIds=H6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $D=class{constructor(){this.xo=new kg,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new kg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var HD=class{No(e){}shutdown(){}};var AM="ConnectivityMonitor",Og=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(AM,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){q(AM,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fg=null;function zD(){return fg===null?fg=function(){return 268435456+Math.round(2147483648*Math.random())}():fg++,"0x"+fg.toString(16)}var NI="RestConnection",TG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qD=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Dg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=zD(),a=this.jo(e,t.toUriEncodedString());q(NI,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,o);let{host:u}=new URL(a),h=oo(u);return this.Jo(e,a,l,r,h).then(p=>(q(NI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ya(NI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=TG[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var GD=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var Ut="WebChannelConnection",WD=class extends qD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=zD();return new Promise((a,l)=>{let u=new CI;u.setWithCredentials(!0),u.listenOnce(SI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Cu.NO_ERROR:let p=u.getResponseJson();q(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Cu.TIMEOUT:q(Ut,`RPC '${e}' ${s} timed out`),l(new H(N.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:let g=u.getStatus();if(q(Ut,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);let b=v?.error;if(b&&b.status&&b.message){let x=function(V){let Z=V.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(Z)>=0?Z:N.UNKNOWN}(b.status);l(new H(x,b.message))}else l(new H(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(N.UNAVAILABLE,"Connection failed."));break;default:X(9055,{h_:e,streamId:s,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{q(Ut,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);q(Ut,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}I_(e,t,r){let i=zD(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=PI(),a=RI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=o.join("");q(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=s.createWebChannel(h,l);this.E_(p);let g=!1,v=!1,b=new GD({Zo:R=>{v?q(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(q(Ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),q(Ut,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),x=(R,V,Z)=>{R.listen(V,W=>{try{Z(W)}catch(we){setTimeout(()=>{throw we},0)}})};return x(p,$a.EventType.OPEN,()=>{v||(q(Ut,`RPC '${e}' stream ${i} transport opened.`),b.__())}),x(p,$a.EventType.CLOSE,()=>{v||(v=!0,q(Ut,`RPC '${e}' stream ${i} transport closed`),b.u_(),this.d_(p))}),x(p,$a.EventType.ERROR,R=>{v||(v=!0,Ya(Ut,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.u_(new H(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,$a.EventType.MESSAGE,R=>{var V;if(!v){let Z=R.data[0];Ne(!!Z,16349);let W=Z,we=W?.error||((V=W[0])===null||V===void 0?void 0:V.error);if(we){q(Ut,`RPC '${e}' stream ${i} received error:`,we);let it=we.status,Re=function(w){let I=lt[w];if(I!==void 0)return kk(I)}(it),D=we.message;Re===void 0&&(Re=N.INTERNAL,D="Unknown error status: "+it+" with message "+we.message),v=!0,b.u_(new H(Re,D)),p.close()}else q(Ut,`RPC '${e}' stream ${i} received:`,Z),b.c_(Z)}}),x(a,AI.STAT_EVENT,R=>{R.stat===ug.PROXY?q(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ug.NOPROXY&&q(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function MI(){return typeof document<"u"?document:null}function om(n){return new pD(n,!0)}var Fg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var RM="PersistentStream",Lg=class{constructor(e,t,r,i,o,s,a,l){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Fg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return _(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return _(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return _(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new H(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>_(this,null,function*(){this.state=0,this.start()}))}j_(e){return q(RM,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(q(RM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},KD=class extends Lg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=rG(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?Br(s.readTime):ae.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=yD(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=rD(l)?{documents:sG(o,l)}:{query:aG(o,l).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Ok(o,s.resumeToken);let u=gD(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ae.min())>0){a.readTime=Pg(o,s.snapshotVersion.toTimestamp());let u=gD(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=lG(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=yD(this.serializer),t.removeTarget=e,this.Q_(t)}},QD=class extends Lg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=oG(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=yD(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>iG(this.serializer,r))};this.Q_(t)}};var YD=class{},ZD=class extends YD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,mD(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(N.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,mD(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(N.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},JD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_i(t),this.ua=!1):q("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var xs="RemoteStore",XD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Ms(this)&&(q(xs,"Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let u=oe(l);u.da.add(4),yield Ku(u),u.Va.set("Unknown"),u.da.delete(4),yield sm(u)})}(this))}))}),this.Va=new JD(r,i)}};function sm(n){return _(this,null,function*(){if(Ms(n))for(let e of n.Aa)yield e(!0)})}function Ku(n){return _(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function qk(n,e){let t=oe(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Ob(t)?kb(t):hc(t).N_()&&Mb(t,e))}function Nb(n,e){let t=oe(n),r=hc(t);t.Ea.delete(e),r.N_()&&Gk(t,e),t.Ea.size===0&&(r.N_()?r.k_():Ms(t)&&t.Va.set("Unknown"))}function Mb(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(n).Z_(e)}function Gk(n,e){n.ma.Ke(e),hc(n).X_(e)}function kb(n){n.ma=new fD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),hc(n).start(),n.Va.ca()}function Ob(n){return Ms(n)&&!hc(n).O_()&&n.Ea.size>0}function Ms(n){return oe(n).da.size===0}function Wk(n){n.ma=void 0}function CG(n){return _(this,null,function*(){n.Va.set("Online")})}function SG(n){return _(this,null,function*(){n.Ea.forEach((e,t)=>{Mb(n,e)})})}function AG(n,e){return _(this,null,function*(){Wk(n),Ob(n)?(n.Va.Pa(e),kb(n)):n.Va.set("Unknown")})}function RG(n,e,t){return _(this,null,function*(){if(n.Va.set("Online"),e instanceof Ag&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){q(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vg(n,r)}else if(e instanceof Ka?n.ma.Xe(e):e instanceof Sg?n.ma.ot(e):n.ma.nt(e),!t.isEqual(ae.min()))try{let r=yield zk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.Ea.get(u);h&&o.Ea.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.Ea.get(l);if(!h)return;o.Ea.set(l,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),Gk(o,l);let p=new Lu(h.target,l,u,h.sequenceNumber);Mb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){q(xs,"Failed to raise snapshot:",r),yield Vg(n,r)}})}function Vg(n,e,t){return _(this,null,function*(){if(!dc(e))throw e;n.da.add(1),yield Ku(n),n.Va.set("Offline"),t||(t=()=>zk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){q(xs,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield sm(n)}))})}function Kk(n,e){return e().catch(t=>Vg(n,t,e))}function am(n){return _(this,null,function*(){let e=oe(n),t=vo(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Ib;for(;PG(e);)try{let i=yield IG(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,xG(e,i)}catch(i){yield Vg(e,i)}Qk(e)&&Yk(e)})}function PG(n){return Ms(n)&&n.Ia.length<10}function xG(n,e){n.Ia.push(e);let t=vo(n);t.N_()&&t.ea&&t.ta(e.mutations)}function Qk(n){return Ms(n)&&!vo(n).O_()&&n.Ia.length>0}function Yk(n){vo(n).start()}function NG(n){return _(this,null,function*(){vo(n).ia()})}function MG(n){return _(this,null,function*(){let e=vo(n);for(let t of n.Ia)e.ta(t.mutations)})}function kG(n,e,t){return _(this,null,function*(){let r=n.Ia.shift(),i=lD.from(r,e,t);yield Kk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield am(n)})}function OG(n,e){return _(this,null,function*(){e&&vo(n).ea&&(yield function(r,i){return _(this,null,function*(){if(function(s){return Y6(s)&&s!==N.ABORTED}(i.code)){let o=r.Ia.shift();vo(r).L_(),yield Kk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield am(r)}})}(n,e)),Qk(n)&&Yk(n)})}function PM(n,e){return _(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),q(xs,"RemoteStore received new credentials");let r=Ms(t);t.da.add(3),yield Ku(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield sm(t)})}function FG(n,e){return _(this,null,function*(){let t=oe(n);e?(t.da.delete(2),yield sm(t)):e||(t.da.add(2),yield Ku(t),t.Va.set("Unknown"))})}function hc(n){return n.fa||(n.fa=function(t,r,i){let o=oe(t);return o.oa(),new KD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:CG.bind(null,n),n_:SG.bind(null,n),i_:AG.bind(null,n),Y_:RG.bind(null,n)}),n.Aa.push(e=>_(null,null,function*(){e?(n.fa.L_(),Ob(n)?kb(n):n.Va.set("Unknown")):(yield n.fa.stop(),Wk(n))}))),n.fa}function vo(n){return n.ga||(n.ga=function(t,r,i){let o=oe(t);return o.oa(),new QD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:NG.bind(null,n),i_:OG.bind(null,n),na:MG.bind(null,n),ra:kG.bind(null,n)}),n.Aa.push(e=>_(null,null,function*(){e?(n.ga.L_(),yield am(n)):(yield n.ga.stop(),n.Ia.length>0&&(q(xs,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var eb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fb(n,e){if(_i("AsyncQueue",`${e}: ${n}`),dc(n))return new H(N.UNAVAILABLE,`${e}: ${n}`);throw n}var jg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ug=class{constructor(){this.pa=new Xe(J.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):X(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},ac=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,jg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var tb=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},nb=class{constructor(){this.queries=xM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=oe(t),o=i.queries;i.queries=xM(),o.forEach((s,a)=>{for(let l of a.Sa)l.onError(r)})})(this,new H(N.ABORTED,"Firestore shutting down"))}};function xM(){return new Ii(n=>Ik(n),rm)}function Lb(n,e){return _(this,null,function*(){let t=oe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new tb,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield t.onListen(i,!0);break;case 1:o.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Fb(s,`Initialization of query '${za(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&jb(t)})}function Vb(n,e){return _(this,null,function*(){let t=oe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function LG(n,e){let t=oe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&jb(t)}function VG(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function jb(n){n.Ca.forEach(e=>{e.next()})}var rb,NM;(NM=rb||(rb={})).xa="default",NM.Cache="cache";var Uu=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==rb.Cache}};var Bg=class{constructor(e){this.key=e}},$g=class{constructor(e){this.key=e}},ib=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ee(),this.mutatedKeys=Ee(),this.Za=Dk(e),this.Xa=new jg(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Ug,i=t?t.Xa:this.Xa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),v=im(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),R=!0):this.ru(g,v)||(r.track({type:2,doc:v}),R=!0,(l&&this.Za(v,l)>0||u&&this.Za(v,u)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),R=!0):g&&!v&&(r.track({type:1,doc:g}),R=!0,(l||u)&&(a=!0)),R&&(v?(s=s.add(v),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(v,b){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:R})}};return x(v)-x(b)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Ja;return this.Ja=l,s.length!==0||u?{snapshot:new ac(this.query,e.Xa,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ug,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=Ee(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new $g(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Bg(r))}),t}au(e){this.Ha=e.$s,this.Ya=Ee();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return ac.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},Ub="SyncEngine",ob=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sb=class{constructor(e){this.key=e,this.cu=!1}},ab=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Ii(a=>Ik(a),rm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Xe(J.comparator),this.Eu=new Map,this.du=new ju,this.Au={},this.Ru=new Map,this.Vu=Vu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function jG(n,e,t=!0){return _(this,null,function*(){let r=nO(n),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield Zk(r,e,t,!0),i})}function UG(n,e){return _(this,null,function*(){let t=nO(n);yield Zk(t,e,!0,!1)})}function Zk(n,e,t,r){return _(this,null,function*(){let i=yield DG(n.localStore,Ur(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield BG(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&qk(n.remoteStore,i),a})}function BG(n,e,t,r,i){return _(this,null,function*(){n.fu=(p,g,v)=>function(x,R,V,Z){return _(this,null,function*(){let W=R.view.tu(V);W.Cs&&(W=yield SM(x.localStore,R.query,!1).then(({documents:D})=>R.view.tu(D,W)));let we=Z&&Z.targetChanges.get(R.targetId),it=Z&&Z.targetMismatches.get(R.targetId)!=null,Re=R.view.applyChanges(W,x.isPrimaryClient,we,it);return kM(x,R.targetId,Re.ou),Re.snapshot})}(n,p,g,v);let o=yield SM(n.localStore,e,!0),s=new ib(e,o.$s),a=s.tu(o.documents),l=Fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);kM(n,t,u.ou);let h=new ob(e,t,s);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),u.snapshot})}function $G(n,e,t){return _(this,null,function*(){let r=oe(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!rm(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield BD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Nb(r.remoteStore,i.targetId),cb(r,i.targetId)}).catch(uc))):(cb(r,i.targetId),yield BD(r.localStore,i.targetId,!0))})}function HG(n,e){return _(this,null,function*(){let t=oe(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nb(t.remoteStore,r.targetId))})}function zG(n,e,t){return _(this,null,function*(){let r=ZG(n);try{let i=yield function(s,a){let l=oe(s),u=At.now(),h=a.reduce((v,b)=>v.add(b.key),Ee()),p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Di(),x=Ee();return l.Bs.getEntries(v,h).next(R=>{b=R,b.forEach((V,Z)=>{Z.isValidDocument()||(x=x.add(V))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,b)).next(R=>{p=R;let V=[];for(let Z of a){let W=Q6(Z,p.get(Z.key).overlayedDocument);W!=null&&V.push(new Hr(Z.key,W,gk(W.value.mapValue),jn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,V,a)}).next(R=>{g=R;let V=R.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(v,R.batchId,V)})}).then(()=>({batchId:g.batchId,changes:Tk(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Au[s.currentUser.toKey()];u||(u=new Xe(me)),u=u.insert(a,l),s.Au[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Qu(r,i.changes),yield am(r.remoteStore)}catch(i){let o=Fb(i,"Failed to persist write");t.reject(o)}})}function Jk(n,e){return _(this,null,function*(){let t=oe(n);try{let r=yield EG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?Ne(s.cu,14607):i.removedDocuments.size>0&&(Ne(s.cu,42227),s.cu=!1))}),yield Qu(t,r,e)}catch(r){yield uc(r)}})}function MM(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=oe(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(u=!0)}),u&&jb(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qG(n,e,t){return _(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(J.comparator);s=s.insert(o,cr.newNoDocument(o,ae.min()));let a=Ee().add(o),l=new Cg(ae.min(),new Map,new Xe(me),s,a);yield Jk(r,l),r.Iu=r.Iu.remove(o),r.Eu.delete(e),Bb(r)}else yield BD(r.localStore,e,!1).then(()=>cb(r,e,t)).catch(uc)})}function GG(n,e){return _(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield _G(t.localStore,e);eO(t,r,null),Xk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qu(t,i)}catch(i){yield uc(i)}})}function WG(n,e,t){return _(this,null,function*(){let r=oe(n);try{let i=yield function(s,a){let l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Ne(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);eO(r,e,t),Xk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qu(r,i)}catch(i){yield uc(i)}})}function Xk(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function eO(n,e,t){let r=oe(n),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function cb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||tO(n,r)})}function tO(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(Nb(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),Bb(n))}function kM(n,e,t){for(let r of t)r instanceof Bg?(n.du.addReference(r.key,e),KG(n,r)):r instanceof $g?(q(Ub,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||tO(n,r.key)):X(19791,{pu:r})}function KG(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(q(Ub,"New document in limbo: "+t),n.Tu.add(r),Bb(n))}function Bb(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new J(Ke.fromString(e)),r=n.Vu.next();n.Eu.set(r,new sb(t)),n.Iu=n.Iu.insert(t,r),qk(n.remoteStore,new Lu(Ur(nm(t.path)),r,"TargetPurposeLimboResolution",wb.le))}}function Qu(n,e,t){return _(this,null,function*(){let r=oe(n),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,l)=>{s.push(r.fu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=LD.Rs(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(l,u){return _(this,null,function*(){let h=oe(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(u,g=>O.forEach(g.ds,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>O.forEach(g.As,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!dc(p))throw p;q(xb,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let v=h.xs.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);h.xs=h.xs.insert(g,x)}}})}(r.localStore,o))})}function QG(n,e){return _(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){q(Ub,"User change. New user:",e.toKey());let r=yield Hk(t.localStore,e);t.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(l=>{l.reject(new H(N.CANCELLED,s))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qu(t,r.ks)}})}function YG(n,e){let t=oe(n),r=t.Eu.get(e);if(r&&r.cu)return Ee().add(r.key);{let i=Ee(),o=t.Pu.get(e);if(!o)return i;for(let s of o){let a=t.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function nO(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qG.bind(null,e),e.lu.Y_=LG.bind(null,e.eventManager),e.lu.gu=VG.bind(null,e.eventManager),e}function ZG(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WG.bind(null,e),e}var rO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=om(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return yG(this.persistence,new jD,t.initialUser,this.serializer)}Su(t){return new Ng(FD.fi,this.serializer)}bu(t){return new $D}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),lb=class extends rO{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ne(this.persistence.referenceDelegate instanceof Mg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new DD(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new Ng(r=>Mg.fi(r,t),this.serializer)}};var JG=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>MM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QG.bind(null,this.syncEngine),yield FG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new nb}()}createDatastore(t){let r=om(t.databaseInfo.databaseId),i=function(s){return new WD(s)}(t.databaseInfo);return function(s,a,l,u){return new ZD(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new XD(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>MM(this.syncEngine,r,0),function(){return Og.C()?new Og:new HD}())}createSyncEngine(t,r){return function(o,s,a,l,u,h,p){let g=new ab(o,s,a,l,u,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=oe(o);q(xs,"RemoteStore shutting down."),s.da.add(5),yield Ku(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Bu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var yo="FirestoreClient",ub=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){q(yo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q(yo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Fb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function kI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q(yo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield Hk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function OM(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield XG(n);q(yo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PM(e.remoteStore,i)),n._onlineComponents=e})}function XG(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(yo,"Using user provided OfflineComponentProvider");try{yield kI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ya("Error using user provided cache. Falling back to memory cache: "+t),yield kI(n,new rO)}}else q(yo,"Using default OfflineComponentProvider"),yield kI(n,new lb(void 0));return n._offlineComponents})}function iO(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(yo,"Using user provided OnlineComponentProvider"),yield OM(n,n._uninitializedComponentsProvider._online)):(q(yo,"Using default OnlineComponentProvider"),yield OM(n,new JG))),n._onlineComponents})}function e5(n){return iO(n).then(e=>e.syncEngine)}function Hg(n){return _(this,null,function*(){let e=yield iO(n),t=e.eventManager;return t.onListen=jG.bind(null,e.syncEngine),t.onUnlisten=$G.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HG.bind(null,e.syncEngine),t})}function t5(n,e,t={}){let r=new ar;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,l,u){let h=new Bu({next:g=>{h.xu(),s.enqueueAndForget(()=>Vb(o,p));let v=g.docs.has(a);!v&&g.fromCache?u.reject(new H(N.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?u.reject(new H(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Uu(nm(a.path),h,{includeMetadataChanges:!0,Qa:!0});return Lb(o,p)}(yield Hg(n),n.asyncQueue,e,t,r)})),r.promise}function n5(n,e,t={}){let r=new ar;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,l,u){let h=new Bu({next:g=>{h.xu(),s.enqueueAndForget(()=>Vb(o,p)),g.fromCache&&l.source==="server"?u.reject(new H(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Uu(a,h,{includeMetadataChanges:!0,Qa:!0});return Lb(o,p)}(yield Hg(n),n.asyncQueue,e,t,r)})),r.promise}function oO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var FM=new Map;function sO(n,e,t){if(!t)throw new H(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function r5(n,e,t,r){if(e===!0&&r===!0)throw new H(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LM(n){if(!J.isDocumentKey(n))throw new H(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VM(n){if(J.isDocumentKey(n))throw new H(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cm(n);throw new H(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var aO="firestore.googleapis.com",jM=!0,zg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aO,this.ssl=jM}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$k;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gG)throw new H(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},cc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new UI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=FM.get(t);r&&(q("ComponentProvider","Removing Datastore"),FM.delete(t),r.terminate())}(this),Promise.resolve()}};function cO(n,e,t,r={}){var i;n=Cn(n,cc);let o=oo(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(Fp(`https://${l}`),Lp("Firestore",!0)),s.host!==aO&&s.host!==l&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!kr(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Et.MOCK_USER;else{h=mx(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Et(g)}n._authCredentials=new LI(new vg(h,p))}}var _o=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},en=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},po=class n extends _o{constructor(e,t,r){super(e,t,nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lO(n,e,...t){if(n=Ye(n),sO("collection","path",e),n instanceof cc){let r=Ke.fromString(e,...t);return VM(r),new po(n,null,r)}{if(!(n instanceof en||n instanceof po))throw new H(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ke.fromString(e,...t));return VM(r),new po(n.firestore,null,r)}}function $b(n,e,...t){if(n=Ye(n),arguments.length===1&&(e=_g.newId()),sO("doc","path",e),n instanceof cc){let r=Ke.fromString(e,...t);return LM(r),new en(n,null,new J(r))}{if(!(n instanceof en||n instanceof po))throw new H(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ke.fromString(e,...t));return LM(r),new en(n.firestore,n instanceof po?n.converter:null,new J(r))}}var UM="AsyncQueue",qg=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Fg(this,"async_queue_retry"),this.rc=()=>{let r=MI();r&&q(UM,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=MI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=MI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new ar;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return _(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!dc(e))throw e;q(UM,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,_i("INTERNAL UNHANDLED ERROR: ",BM(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=eb.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&X(47125,{cc:BM(this.Xu)})}verifyOperationInProgress(){}lc(){return _(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function BM(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $M(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var ur=class extends cc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new qg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new qg(e),this._firestoreClient=void 0,yield e}})}};function uO(n,e){let t=typeof n=="object"?n:gs(),r=typeof n=="string"?n:e||Dg,i=Fa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=gx("firestore");o&&cO(i,...o)}return i}function Yu(n){if(n._terminated)throw new H(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||i5(n),n._firestoreClient}function i5(n){var e,t,r;let i=n._freezeSettings(),o=function(a,l,u,h){return new qI(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oO(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ub(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var $u=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Bt.fromBase64String(e))}catch(t){throw new H(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ns=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hu=class{constructor(e){this._methodName=e}};var zu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var qu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var o5=/^__.*__$/,db=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ps(e,this.data,t,this.fieldTransforms)}},Gg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function dO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ic:n})}}var hb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Kg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(dO(this.Ic)&&o5.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},fb=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||om(e)}bc(e,t,r,i=!1){return new hb({Ic:e,methodName:t,wc:r,path:Tn.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lm(n){let e=n._freezeSettings(),t=om(n._databaseId);return new fb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hO(n,e,t,r,i,o={}){let s=n.bc(o.merge||o.mergeFields?2:0,e,t,i);Hb("Data must be an object, but it was:",s,r);let a=gO(r,s),l,u;if(o.merge)l=new Vn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=pb(e,p,t);if(!s.contains(g))throw new H(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);vO(h,g)||h.push(g)}l=new Vn(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new db(new bn(a),l,u)}var Wg=class n extends Hu{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fO(n,e,t,r){let i=n.bc(1,e,t);Hb("Data must be an object, but it was:",i,r);let o=[],s=bn.empty();Eo(r,(l,u)=>{let h=zb(e,l,t);u=Ye(u);let p=i.mc(h);if(u instanceof Wg)o.push(h);else{let g=Zu(u,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Vn(o);return new Gg(s,a,i.fieldTransforms)}function pO(n,e,t,r,i,o){let s=n.bc(1,e,t),a=[pb(e,r,t)],l=[i];if(o.length%2!=0)throw new H(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(pb(e,o[g])),l.push(o[g+1]);let u=[],h=bn.empty();for(let g=a.length-1;g>=0;--g)if(!vO(u,a[g])){let v=a[g],b=l[g];b=Ye(b);let x=s.mc(v);if(b instanceof Wg)u.push(v);else{let R=Zu(b,x);R!=null&&(u.push(v),h.set(v,R))}}let p=new Vn(u);return new Gg(h,p,s.fieldTransforms)}function s5(n,e,t,r=!1){return Zu(t,n.bc(r?4:3,e))}function Zu(n,e){if(mO(n=Ye(n)))return Hb("Unsupported field value:",e,n),gO(n,e);if(n instanceof Hu)return function(r,i){if(!dO(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=Zu(a,i.fc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=At.fromDate(r);return{timestampValue:Pg(i.serializer,o)}}if(r instanceof At){let o=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pg(i.serializer,o)}}if(r instanceof zu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $u)return{bytesValue:Ok(i.serializer,r._byteString)};if(r instanceof en){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qu)return function(s,a){return{mapValue:{fields:{[bb]:{stringValue:Tb},[Ja]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.gc("VectorValues must only contain numeric values.");return Rb(a.serializer,u)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${cm(r)}`)}(n,e)}function gO(n,e){let t={};return ak(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(n,(r,i)=>{let o=Zu(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof zu||n instanceof $u||n instanceof en||n instanceof Hu||n instanceof qu)}function Hb(n,e,t){if(!mO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=cm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function pb(n,e,t){if((e=Ye(e))instanceof Ns)return e._internalPath;if(typeof e=="string")return zb(n,e);throw Kg("Field path arguments must be of type string or ",n,!1,void 0,t)}var a5=new RegExp("[~\\*/\\[\\]]");function zb(n,e,t){if(e.search(a5)>=0)throw Kg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ns(...e.split("."))._internalPath}catch{throw Kg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new H(N.INVALID_ARGUMENT,a+n+l)}function vO(n,e){return n.some(t=>t.isEqual(e))}var Qg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(um("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gb=class extends Qg{data(){return super.data()}};function um(n,e){return typeof e=="string"?zb(n,e):e instanceof Ns?e._internalPath:e._delegate._internalPath}function yO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gu=class{},Yg=class extends Gu{};function _O(n,e,...t){let r=[];e instanceof Gu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof mb).length,a=o.filter(l=>l instanceof Zg).length;if(s>1||s>0&&a>0)throw new H(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Zg=class n extends Yg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return IO(e._query,t),new _o(e.firestore,e.converter,iD(e._query,t))}_parse(e){let t=lm(e.firestore);return function(o,s,a,l,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){zM(p,h);let b=[];for(let x of p)b.push(HM(l,o,x));g={arrayValue:{values:b}}}else g=HM(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||zM(p,h),g=s5(a,s,p,h==="in"||h==="not-in");return dt.create(u,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function EO(n,e,t){let r=e,i=um("where",n);return Zg._create(i,r,t)}var mb=class n extends Gu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:lr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)IO(s,l),s=iD(s,l)}(e._query,t),new _o(e.firestore,e.converter,iD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vb=class n extends Yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new H(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ss(o,s)}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new mo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function wO(n,e="asc"){let t=e,r=um("orderBy",n);return vb._create(r,t)}function HM(n,e,t){if(typeof(t=Ye(t))=="string"){if(t==="")throw new H(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wk(e)&&t.indexOf("/")!==-1)throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ke.fromString(t));if(!J.isDocumentKey(r))throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cM(n,new J(r))}if(t instanceof en)return cM(n,t._key);throw new H(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(t)}.`)}function zM(n,e){if(!Array.isArray(n)||n.length===0)throw new H(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var yb=class{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Eo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ja].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new qu(o)}convertGeoPoint(e){return new zu(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){let t=Ei(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ke.fromString(e);Ne(Bk(r),9688,{name:e});let i=new bg(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(t)||_i(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function DO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jg=class extends Qg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(um("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Qa=class extends Jg{data(e={}){return super.data(e)}},Xg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qa(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Qa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Qa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:c5(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function c5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}function bO(n){n=Cn(n,en);let e=Cn(n.firestore,ur);return t5(Yu(e),n._key).then(t=>RO(e,n,t))}var Wu=class extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}};function TO(n){n=Cn(n,_o);let e=Cn(n.firestore,ur),t=Yu(e),r=new Wu(e);return yO(n._query),n5(t,n._query).then(i=>new Xg(e,r,n,i))}function CO(n,e,t,...r){n=Cn(n,en);let i=Cn(n.firestore,ur),o=lm(i),s;return s=typeof(e=Ye(e))=="string"||e instanceof Ns?pO(o,"updateDoc",n._key,e,t,r):fO(o,"updateDoc",n._key,e),dm(i,[s.toMutation(n._key,jn.exists(!0))])}function SO(n){return dm(Cn(n.firestore,ur),[new sc(n._key,jn.none())])}function AO(n,e){let t=Cn(n.firestore,ur),r=$b(n),i=DO(n.converter,e);return dm(t,[hO(lm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}function qb(n,...e){var t,r,i;n=Ye(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$M(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($M(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(n instanceof en)u=Cn(n.firestore,ur),h=nm(n._key.path),l={next:p=>{e[s]&&e[s](RO(u,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Cn(n,_o);u=Cn(p.firestore,ur),h=p._query;let g=new Wu(u);l={next:v=>{e[s]&&e[s](new Xg(u,g,p,v))},error:e[s+1],complete:e[s+2]},yO(n._query)}return function(g,v,b,x){let R=new Bu(x),V=new Uu(v,R,b);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Lb(yield Hg(g),V)})),()=>{R.xu(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Vb(yield Hg(g),V)}))}}(Yu(u),h,a,l)}function dm(n,e){return function(r,i){let o=new ar;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return zG(yield e5(r),i,o)})),o.promise}(Yu(n),e)}function RO(n,e,t){let r=t.docs.get(e._key),i=new Wu(n);return new Jg(n,i,e._key,r,new bs(t.hasPendingWrites,t.fromCache),e.converter)}var _b=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lm(e)}set(e,t,r){this._verifyNotCommitted();let i=OI(e,this._firestore),o=DO(i.converter,t,r),s=hO(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=OI(e,this._firestore),s;return s=typeof(t=Ye(t))=="string"||t instanceof Ns?pO(this._dataReader,"WriteBatch.update",o._key,t,r,i):fO(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=OI(e,this._firestore);return this._mutations=this._mutations.concat(new sc(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function OI(n,e){if((n=Ye(n)).firestore!==e)throw new H(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function PO(n){return Yu(n=Cn(n,ur)),new _b(n,e=>dm(n,e))}(function(e,t=!0){(function(i){lc=i})(ao),ir(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ur(new VI(r.getProvider("auth-internal")),new BI(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bg(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ze(JN,XN,e),Ze(JN,XN,"esm2017")})();var hm=function(){return hm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hm.apply(this,arguments)};var f5={includeMetadataChanges:!1};function xO(n,e){return e===void 0&&(e=f5),new Q(function(t){var r=qb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function NO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:hm(hm({},r),(t={},t[e.idField]=n.id,t))}function MO(n){return xO(n,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function kO(n,e){return e===void 0&&(e={}),MO(n).pipe(Y(function(t){return t.map(function(r){return NO(r,e)})}))}var bi=class{constructor(e){return e}},OO="firestore",Gb=class{constructor(){return Va(OO)}};var Wb=new j("angularfire2.firestore-instances");function p5(n,e){let t=fu(OO,n,e);return t&&new bi(t)}function g5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bi(r)}}var m5={provide:Gb,deps:[[new Qt,Wb]]},v5={provide:bi,useFactory:p5,deps:[[new Qt,Wb],fi]};function FO(n,...e){return Ze("angularfire",co.full,"fst"),on([v5,m5,{provide:Wb,useFactory:g5(n),multi:!0,deps:[pe,Ve,lo,vs,[new Qt,Tu],[new Qt,ja],...e]}])}var LO=Je(kO,!0);var fm=Je(AO,!0,2);var pm=Je(lO,!0,2);var gm=Je(SO,!0,2);var zr=Je($b,!0,2);var mm=Je(bO,!0);var fc=Je(TO,!0);var VO=Je(uO,!0);var Ju=Je(wO,!0,2),ks=Je(_O,!0,2);var pc=Je(CO,!0,2);var Os=Je(EO,!0,2),Kb=Je(PO,!0,2);var $t=class n{constructor(e){this.auth=e;this.user$=GN(this.auth)}user$;signInWithGoogle(){let e=new vI;return KN(this.auth,e)}signOut(){return QN(this.auth)}static \u0275fac=function(t){return new(t||n)(z(ws))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function y5(n,e){n&1&&(M(0,"div",3)(1,"div",4),U(2,"\u2705"),k(),M(3,"h3"),U(4,"Todo Lists"),k(),M(5,"p"),U(6,"Manage your tasks with drag-and-drop reordering, cloud sync, and sharing"),k(),M(7,"a",7),U(8,"Get started"),k()())}function _5(n,e){if(n&1){let t=Ct();M(0,"div",3)(1,"div",4),U(2,"\u{1F512}"),k(),M(3,"h3"),U(4,"Todo Lists"),k(),M(5,"p"),U(6,"Manage your tasks with drag-and-drop reordering, cloud sync, and sharing"),k(),M(7,"p",8),U(8,"Sign in required to access this feature"),k(),M(9,"button",9),ve("click",function(){Ce(t);let i=ge();return Se(i.goToLogin())}),U(10,"Sign in to access"),k()()}}var vm=class n{constructor(e,t){this.authService=e;this.router=t;this.user$=this.authService.user$}user$;goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(K($t),K(mt))};static \u0275cmp=at({type:n,selectors:[["app-home"]],decls:20,vars:6,consts:[[1,"home-container"],[1,"hero"],[1,"apps-grid"],[1,"app-card"],[1,"app-icon"],["routerLink","/ip-lookup",1,"app-link"],["class","app-card",4,"ngIf"],["routerLink","/lists",1,"app-link"],[1,"auth-required"],[1,"login-btn",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"header",1)(2,"h1"),U(3,"Manu's App Library"),k(),M(4,"p"),U(5,"A collection of useful web applications"),k()(),M(6,"div",2)(7,"div",3)(8,"div",4),U(9,"\u{1F310}"),k(),M(10,"h3"),U(11,"IP Lookup"),k(),M(12,"p"),U(13,"Get detailed information about your current IP address and location"),k(),M(14,"a",5),U(15,"Try it out"),k()(),He(16,y5,9,0,"div",6),Zt(17,"async"),He(18,_5,11,0,"div",6),Zt(19,"async"),k()()),t&2&&(re(16),je("ngIf",sn(17,2,r.user$)),re(2),je("ngIf",!sn(19,4,r.user$)))},dependencies:[jt,yn,er,nr,Mr],styles:[".home-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.hero[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.apps-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.app-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a;text-align:center;transition:transform .2s ease,box-shadow .2s ease}.app-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.app-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.app-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:1rem}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem;line-height:1.6}.app-link[_ngcontent-%COMP%]{display:inline-block;background:#007bff;color:#fff;padding:.75rem 1.5rem;border-radius:6px;text-decoration:none;font-weight:500;transition:background-color .2s ease}.app-link[_ngcontent-%COMP%]:hover{background:#0056b3}.auth-required[_ngcontent-%COMP%]{color:#dc3545;font-weight:500;margin-top:.5rem;font-size:.9rem}.login-btn[_ngcontent-%COMP%]{display:inline-block;background:#007bff;color:#fff;padding:.75rem 1.5rem;border-radius:6px;text-decoration:none;font-weight:500;border:none;cursor:pointer;transition:background-color .2s ease;margin-top:1rem}.login-btn[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};var ym=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(z(Ia))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function w5(n,e){if(n&1&&(M(0,"div",6)(1,"h2"),U(2,"Your Location Information"),k(),M(3,"div",7)(4,"div",8)(5,"span",9),U(6,"IP Address:"),k(),M(7,"span",10),U(8),k()(),M(9,"div",8)(10,"span",9),U(11,"Country:"),k(),M(12,"span",10),U(13),k()(),M(14,"div",8)(15,"span",9),U(16,"Region:"),k(),M(17,"span",10),U(18),k()(),M(19,"div",8)(20,"span",9),U(21,"City:"),k(),M(22,"span",10),U(23),k()(),M(24,"div",8)(25,"span",9),U(26,"ZIP Code:"),k(),M(27,"span",10),U(28),k()(),M(29,"div",8)(30,"span",9),U(31,"Latitude:"),k(),M(32,"span",10),U(33),k()(),M(34,"div",8)(35,"span",9),U(36,"Longitude:"),k(),M(37,"span",10),U(38),k()()()()),n&2){let t=ge();re(8),St(t.locationData.ip),re(5),St(t.locationData.country_name),re(5),St(t.locationData.region_name),re(5),St(t.locationData.city),re(5),St(t.locationData.zip),re(5),St(t.locationData.latitude),re(5),St(t.locationData.longitude)}}function I5(n,e){n&1&&(M(0,"div",11)(1,"p"),U(2,"Loading location data..."),k()())}function D5(n,e){if(n&1){let t=Ct();M(0,"div",12)(1,"p"),U(2),k(),M(3,"button",13),ve("click",function(){Ce(t);let i=ge();return Se(i.loadLocation())}),U(4,"Try Again"),k()()}if(n&2){let t=ge();re(2),Mn("Error: ",t.error)}}var _m=class n{constructor(e){this.locationService=e}locationData=null;loading=!1;error=null;ngOnInit(){this.loadLocation()}loadLocation(){this.loading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.locationData=e,this.loading=!1},error:e=>{this.error="Failed to load location data. Please try again.",this.loading=!1,console.error("Location error:",e)}})}static \u0275fac=function(t){return new(t||n)(K(ym))};static \u0275cmp=at({type:n,selectors:[["app-ip-lookup"]],decls:11,vars:3,consts:[[1,"ip-lookup-container"],[1,"app-header"],["routerLink","/",1,"back-link"],["class","location-card",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"location-card"],[1,"location-grid"],[1,"location-item"],[1,"label"],[1,"value"],[1,"loading"],[1,"error"],[1,"retry-btn",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"header",1)(2,"a",2),U(3,"\u2190 Back to Home"),k(),M(4,"h1"),U(5,"IP Lookup"),k(),M(6,"p"),U(7,"Get detailed information about your current location"),k()(),He(8,w5,39,7,"div",3)(9,I5,3,0,"div",4)(10,D5,5,1,"div",5),k()),t&2&&(re(8),je("ngIf",r.locationData),re(),je("ngIf",r.loading),re(),je("ngIf",r.error))},dependencies:[jt,yn,nr,Mr],styles:[".ip-lookup-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.app-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#007bff;text-decoration:none;margin-bottom:1rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.app-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.location-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a}.location-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem}.location-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.location-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem;background:#f8f9fa;border-radius:6px}.label[_ngcontent-%COMP%]{font-weight:600;color:#555}.value[_ngcontent-%COMP%]{color:#333}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:2rem}.retry-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-size:1rem;margin-top:1rem}.retry-btn[_ngcontent-%COMP%]:hover{background:#0056b3}"]})};var KO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(K(Cr),K(pt))};static \u0275dir=Ge({type:n})}return n})(),b5=(()=>{class n extends KO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zo(n)))(i||n)}})();static \u0275dir=Ge({type:n,features:[Qn]})}return n})(),QO=new j("");var T5={provide:QO,useExisting:gr(()=>yc),multi:!0};function C5(){let n=kn()?kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var S5=new j(""),yc=(()=>{class n extends KO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!C5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(K(Cr),K(pt),K(S5,8))};static \u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ve("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ar([T5]),Qn]})}return n})();function A5(n){return n==null||R5(n)===0}function R5(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Jb=new j(""),YO=new j("");function P5(n){return A5(n.value)?{required:!0}:null}function UO(n){return null}function ZO(n){return n!=null}function JO(n){return ii(n)?ce(n):n}function XO(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function e1(n,e){return e.map(t=>t(n))}function x5(n){return!n.validate}function t1(n){return n.map(e=>x5(e)?e:t=>e.validate(t))}function N5(n){if(!n)return null;let e=n.filter(ZO);return e.length==0?null:function(t){return XO(e1(t,e))}}function Xb(n){return n!=null?N5(t1(n)):null}function M5(n){if(!n)return null;let e=n.filter(ZO);return e.length==0?null:function(t){let r=e1(t,e).map(JO);return Vv(r).pipe(Y(XO))}}function eT(n){return n!=null?M5(t1(n)):null}function BO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function k5(n){return n._rawValidators}function O5(n){return n._rawAsyncValidators}function Qb(n){return n?Array.isArray(n)?n:[n]:[]}function wm(n,e){return Array.isArray(n)?n.includes(e):n===e}function $O(n,e){let t=Qb(e);return Qb(n).forEach(i=>{wm(t,i)||t.push(i)}),t}function HO(n,e){return Qb(e).filter(t=>!wm(n,t))}var Im=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vc=class extends Im{name;get formDirective(){return null}get path(){return null}},id=class extends Im{_parent=null;name=null;valueAccessor=null},Dm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},F5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qhe=ee(F({},F5),{"[class.ng-submitted]":"isSubmitted"}),Sm=(()=>{class n extends Dm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(id,2))};static \u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qn]})}return n})(),Am=(()=>{class n extends Dm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(K(vc,10))};static \u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qn]})}return n})();var Xu="VALID",Em="INVALID",gc="PENDING",ed="DISABLED",wo=class{},bm=class extends wo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},nd=class extends wo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},rd=class extends wo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},mc=class extends wo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Yb=class extends wo{source;constructor(e){super(),this.source=e}},Zb=class extends wo{source;constructor(e){super(),this.source=e}};function n1(n){return(Rm(n)?n.validators:n)||null}function L5(n){return Array.isArray(n)?Xb(n):n||null}function r1(n,e){return(Rm(e)?e.asyncValidators:n)||null}function V5(n){return Array.isArray(n)?eT(n):n||null}function Rm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function j5(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function U5(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var Tm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return an(this.statusReactive)}set status(e){an(()=>this.statusReactive.set(e))}_status=va(()=>this.statusReactive());statusReactive=Lt(void 0);get valid(){return this.status===Xu}get invalid(){return this.status===Em}get pending(){return this.status==gc}get disabled(){return this.status===ed}get enabled(){return this.status!==ed}errors;get pristine(){return an(this.pristineReactive)}set pristine(e){an(()=>this.pristineReactive.set(e))}_pristine=va(()=>this.pristineReactive());pristineReactive=Lt(!0);get dirty(){return!this.pristine}get touched(){return an(this.touchedReactive)}set touched(e){an(()=>this.touchedReactive.set(e))}_touched=va(()=>this.touchedReactive());touchedReactive=Lt(!1);get untouched(){return!this.touched}_events=new ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($O(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($O(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HO(e,this._rawAsyncValidators))}hasValidator(e){return wm(this._rawValidators,e)}hasAsyncValidator(e){return wm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new rd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new nd(!0,r))}markAsPending(e={}){this.status=gc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ed,this.errors=null,this._forEachChild(i=>{i.disable(ee(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bm(this.value,r)),this._events.next(new mc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xu,this._forEachChild(r=>{r.enable(ee(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xu||this.status===gc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bm(this.value,t)),this._events.next(new mc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ed:Xu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=gc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=JO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new mc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?ed:this.errors?Em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gc)?gc:this._anyControlsHaveStatus(Em)?Em:Xu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new nd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=L5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=V5(this._rawAsyncValidators)}},Cm=class extends Tm{constructor(e,t,r){super(n1(t),r1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){U5(this,!0,e),Object.keys(e).forEach(r=>{j5(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var tT=new j("",{providedIn:"root",factory:()=>nT}),nT="always";function B5(n,e){return[...e.path,n]}function i1(n,e,t=nT){o1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),H5(n,e),q5(n,e),z5(n,e),$5(n,e)}function zO(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function o1(n,e){let t=k5(n);e.validator!==null?n.setValidators(BO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=O5(n);e.asyncValidator!==null?n.setAsyncValidators(BO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();zO(e._rawValidators,i),zO(e._rawAsyncValidators,i)}function H5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&s1(n,e)})}function z5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&s1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function s1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function q5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function G5(n,e){n==null,o1(n,e)}function W5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function K5(n){return Object.getPrototypeOf(n.constructor)===b5}function Q5(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Y5(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===yc?t=o:K5(o)?r=o:i=o}),i||r||t||null}var Z5={provide:vc,useExisting:gr(()=>od)},td=Promise.resolve(),od=(()=>{class n extends vc{callSetDisabledState;get submitted(){return an(this.submittedReactive)}_submitted=va(()=>this.submittedReactive());submittedReactive=Lt(!1);_directives=new Set;form;ngSubmit=new be;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Cm({},Xb(t),eT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){td.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),i1(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){td.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){td.then(()=>{let r=this._findContainer(t.path),i=new Cm({});G5(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){td.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){td.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Q5(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Yb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Zb(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(K(Jb,10),K(YO,10),K(tT,8))};static \u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ve("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ar([Z5]),Qn]})}return n})();function qO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function GO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var J5=class extends Tm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(n1(t),r1(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(GO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){GO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var X5={provide:id,useExisting:gr(()=>sd)},WO=Promise.resolve(),sd=(()=>{class n extends id{_changeDetectorRef;callSetDisabledState;control=new J5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new be;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Y5(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),W5(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){i1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){WO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&cn(r);WO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?B5(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(K(vc,9),K(Jb,10),K(YO,10),K(QO,10),K(vn,8),K(tT,8))};static \u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ar([X5]),Qn,gn]})}return n})();var Pm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var eW=(()=>{class n{_validator=UO;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):UO,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,features:[gn]})}return n})();var tW={provide:Jb,useExisting:gr(()=>rT),multi:!0};var rT=(()=>{class n extends eW{required;inputName="required";normalizeInput=cn;createValidator=t=>P5;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zo(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Yi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ar([tW]),Qn]})}return n})();var nW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({})}return n})();var xm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tT,useValue:t.callSetDisabledState??nT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({imports:[nW]})}return n})();var iT;function rW(){if(iT==null){let n=typeof document<"u"?document.head:null;iT=!!(n&&(n.createShadowRoot||n.attachShadow))}return iT}function Nm(n){if(rW()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ad(n){return n.composedPath?n.composedPath()[0]:n.target}function c1(n){return n.buttons===0||n.detail===0}function l1(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function Mm(n,e=0){return iW(n)?Number(n):arguments.length===2?e:0}function iW(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function qr(n){return n instanceof pt?n.nativeElement:n}var km=new WeakMap,u1=(()=>{class n{_appRef;_injector=S(Ve);_environmentInjector=S($e);load(t){let r=this._appRef=this._appRef||this._injector.get(oi),i=km.get(r);i||(i={loaders:new Set,refs:[]},km.set(r,i),r.onDestroy(()=>{km.get(r)?.refs.forEach(o=>o.destroy()),km.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(vR(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oT;try{oT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oT=!1}var sT=(()=>{class n{_platformId=S(br);isBrowser=this._platformId?UR(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||oT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oW=new j("cdk-dir-doc",{providedIn:"root",factory:sW});function sW(){return S(Me)}var aW=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function cW(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?aW.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var aT=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Lt("ltr");change=new be;constructor(){let t=S(oW,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(cW(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lW=20,d1=(()=>{class n{_ngZone=S(pe);_platform=S(sT);_renderer=S(pn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ne;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=lW){return this._platform.isBrowser?new Q(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(wh(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):G()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(ft(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=qr(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uW=20,h1=(()=>{class n{_platform=S(sT);_listeners;_viewportSize;_change=new ne;_document=S(Me,{optional:!0});constructor(){let t=S(pe),r=S(pn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=uW){return t>0?this._change.pipe(wh(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({})}return n})();var cT={},p1=(()=>{class n{_appId=S(ga);getId(t){return this._appId!=="ng"&&(t+=this._appId),cT.hasOwnProperty(t)||(cT[t]=0),`${t}${cT[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g1(n){return Array.isArray(n)?n:[n]}function x1(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?y1(n,e):(r==="input"||r==="select"||r==="textarea")&&v1(n,e),m1("canvas",n,e,y1),m1("input, textarea, select",n,e,v1),e}function m1(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var dW=0;function v1(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${dW++}`)}function y1(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function mT(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function dT(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function hW(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function ud(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function _1(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:l,height:u}=n,h=l*e,p=u*e;return r>i-p&&r<s+p&&t>a-h&&t<o+h}var Om=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:mT(t)})})}handleScroll(e){let t=ad(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,l=i.left-s;return this.positions.forEach((u,h)=>{u.clientRect&&t!==h&&t.contains(h)&&ud(u.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function N1(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function vT(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function _c(n,e){let t=e?"":"none";vT(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function E1(n,e,t){vT(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Fm(n,e){return e&&e!="none"?n+" "+e:n}function w1(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=dd(e.left,e.top)}function dd(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function I1(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function fW(n){let e=getComputedStyle(n),t=lT(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=lT(e,"transition-duration"),s=lT(e,"transition-delay");return I1(o[i])+I1(s[i])}function lT(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var pW=new Set(["position"]),hT=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,l,u,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=u,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),D1(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return fW(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=N1(s,this._document),this._previewEmbeddedView=s,e.matchSize?w1(i,o):i.style.transform=dd(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=x1(this._rootElement),w1(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return vT(i.style,{"pointer-events":"none",margin:D1(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},pW),_c(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function D1(n){return"showPopover"in n}var gW={passive:!0},b1={passive:!1},mW={passive:!1,capture:!0},vW=800,T1=new Set(["position"]),fT=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Lt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ne;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Pe.EMPTY;_pointerUpSubscription=Pe.EMPTY;_scrollSubscription=Pe.EMPTY;_resizeSubscription=Pe.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>_c(t,e)))}_disabled=!1;beforeStarted=new ne;started=new ne;released=new ne;ended=new ne;entered=new ne;exited=new ne;dropped=new ne;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Om(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>qr(r)),this._handles.forEach(r=>_c(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=qr(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,b1),r.listen(t,"touchstart",this._pointerDown,gW),r.listen(t,"dragstart",this._nativeDragStart,b1)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?qr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&hW(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,l=s+i;this._rootElement.style.transform=dd(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),_c(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),_c(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){cd(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",yW,mW)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new hT(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),E1(i,!1,T1),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=cd(t),o=!i&&t.button!==0,s=this._rootElement,a=ad(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+vW>Date.now(),u=i?l1(t):c1(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||l||u)return;if(this._handles.length){let g=s.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=mT(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){E1(this._rootElement,!0,T1),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&ad(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=N1(this._placeholderRef,this._document)):r=x1(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=cd(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,u=s.pageY-o.top-a.top;return{x:o.left-e.left+l,y:o.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=cd(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),h=a.top+s,p=a.bottom-(u-s),g=a.left+o,v=a.right-(l-o);r=C1(r,g,v),i=C1(i,h,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,_c(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=dd(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Fm(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=dd(e,t);this._preview.setTransform(Fm(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:cd(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=ad(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&ud(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Nm(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return qr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function C1(n,e,t){return Math.max(e,Math.min(t,n))}function cd(n){return n.type[0]==="t"}function yW(n){n.preventDefault()}function Vm(n,e,t){let r=S1(e,n.length-1),i=S1(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function S1(n,e){return Math.max(0,Math.min(e,n))}var Lm=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(R=>R.drag===e),u=o[s],h=o[l].clientRect,p=u.clientRect,g=l>s?1:-1,v=this._getItemOffsetPx(h,p,g),b=this._getSiblingOffsetPx(l,o,g),x=o.slice();return Vm(o,l,s),o.forEach((R,V)=>{if(x[V]===R)return;let Z=R.drag===e,W=Z?v:b,we=Z?e.getPlaceholderElement():R.drag.getRootElement();R.offset+=W;let it=Math.round(R.offset*(1/R.drag.scale));a?(we.style.transform=Fm(`translate3d(${it}px, 0, 0)`,R.initialTransform),ud(R.clientRect,0,W)):(we.style.transform=Fm(`translate3d(0, ${it}px, 0)`,R.initialTransform),ud(R.clientRect,W,0))}),this._previousSwap.overlaps=dT(p,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement(),u=s[o];if(u===e&&(u=s[o+1]),!u&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let h=u.getRootElement();h.parentElement.insertBefore(l,h),s.splice(o,0,e)}else this._element.appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{ud(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:mT(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let l=i?"left":"top",u=i?"right":"bottom";r===-1?a-=s.clientRect[l]-o[u]:a+=o[l]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){let u=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},pT=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let l=this.getItemIndex(e),u=e.getPlaceholderElement(),h=a.getRootElement();o>l?h.after(u):h.before(u),Vm(this._activeItems,l,o);let p=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=h===p||h.contains(p),{previousIndex:l,currentIndex:o}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let s=this._activeItems[o],a=this._activeItems.indexOf(e);a>-1&&this._activeItems.splice(a,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,e),s.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Nm(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:l,y:u}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-l,r-u);h<i&&(i=h,o=s)}}return o}},A1=.05,M1=.05,Un=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Un||{}),tn=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(tn||{}),gT=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ne;entered=new ne;exited=new ne;dropped=new ne;sorted=new ne;receivingStarted=new ne;receivingStopped=new ne;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Pe.EMPTY;_verticalScrollDirection=Un.NONE;_horizontalScrollDirection=tn.NONE;_scrollNode;_stopScrollTimers=new ne;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=qr(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new Om(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Lm&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new pT(this._document,this._dragDropRegistry);else{let t=new Lm(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=qr(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!_1(this._domRect,A1,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Un.NONE,o=tn.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||_1(s.clientRect,A1,e,t)&&([i,o]=_W(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=k1(l,t),o=O1(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Wc(0,nh).pipe(pr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Un.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Un.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===tn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===tn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&dT(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!dT(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Nm(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function k1(n,e){let{top:t,bottom:r,height:i}=n,o=i*M1;return e>=t-o&&e<=t+o?Un.UP:e>=r-o&&e<=r+o?Un.DOWN:Un.NONE}function O1(n,e){let{left:t,right:r,width:i}=n,o=i*M1;return e>=t-o&&e<=t+o?tn.LEFT:e>=r-o&&e<=r+o?tn.RIGHT:tn.NONE}function _W(n,e,t,r,i){let o=k1(e,i),s=O1(e,r),a=Un.NONE,l=tn.NONE;if(o){let u=n.scrollTop;o===Un.UP?u>0&&(a=Un.UP):n.scrollHeight-u>n.clientHeight&&(a=Un.DOWN)}if(s){let u=n.scrollLeft;t==="rtl"?s===tn.RIGHT?u<0&&(l=tn.RIGHT):n.scrollWidth+u>n.clientWidth&&(l=tn.LEFT):s===tn.LEFT?u>0&&(l=tn.LEFT):n.scrollWidth-u>n.clientWidth&&(l=tn.RIGHT)}return[a,l]}var ld={capture:!0},uT={passive:!1,capture:!0},EW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),F1=(()=>{class n{_ngZone=S(pe);_document=S(Me);_styleLoader=S(u1);_renderer=S(pn).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ne;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Lt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new ne;pointerUp=new ne;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,uT)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(EW),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),ld],["selectstart",this._preventDefaultWhileDragging,uT]];i?s.push(["touchend",o,ld],["touchcancel",o,ld]):s.push(["mouseup",o,ld]),i||s.push(["mousemove",a=>this.pointerMove.next(a),uT]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,u])=>this._renderer.listen(this._document,a,l,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new Q(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},ld);return()=>{o()}}))),Kc(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wW={dragStartThreshold:5,pointerDirectionChangeThreshold:5},yT=(()=>{class n{_document=S(Me);_ngZone=S(pe);_viewportRuler=S(h1);_dragDropRegistry=S(F1);_renderer=S(pn).createRenderer(null,null);constructor(){}createDrag(t,r=wW){return new fT(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new gT(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R1=new j("CDK_DRAG_PARENT");var IW=new j("CdkDragHandle");var L1=new j("CDK_DRAG_CONFIG"),V1=new j("CdkDropList"),j1=(()=>{class n{element=S(pt);dropContainer=S(V1,{optional:!0,skipSelf:!0});_ngZone=S(pe);_viewContainerRef=S(Nn);_dir=S(aT,{optional:!0});_changeDetectorRef=S(vn);_selfHandle=S(IW,{optional:!0,self:!0});_parentDrag=S(R1,{optional:!0,skipSelf:!0});_dragDropRegistry=S(F1);_destroyed=new ne;_handles=new et([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new be;released=new be;ended=new be;entered=new be;exited=new be;dropped=new be;moved=new Q(t=>{let r=this._dragRef.moved.pipe(Y(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=S(Ve);constructor(){let t=this.dropContainer,r=S(L1,{optional:!0}),i=S(yT);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this),t._dropListRef.beforeStarted.pipe(pr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){es(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):qr(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:Mm(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(vt(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:u,previewContainer:h}=t;this.disabled=l??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(ot(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Ie(t=>Kc(...t.map(r=>r._stateChanges.pipe(Li(r))))),pr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Yn("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",cn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",mE]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Ar([{provide:R1,useExisting:n}]),gn]})}return n})(),P1=new j("CdkDropListGroup");var U1=(()=>{class n{element=S(pt);_changeDetectorRef=S(vn);_scrollDispatcher=S(d1);_dir=S(aT,{optional:!0});_group=S(P1,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ne;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=S(p1).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new be;entered=new be;exited=new be;sorted=new be;_unsortedItems=new Set;constructor(){let t=S(yT),r=S(L1,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,s)=>this.sortPredicate(i,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Li(this._dir.value),pr(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=g1(this.connectedTo).map(i=>{if(typeof i=="string"){let o=n._dropLists.find(s=>s.id===i);return o}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Mm(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Kc(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(Yi("id",i.id),Yn("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",cn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",cn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",cn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Ar([{provide:P1,useValue:void 0},{provide:V1,useExisting:n}])]})}return n})();var B1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Ot({providers:[yT],imports:[f1]})}return n})();var Io=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=pm(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(Ie(e=>{if(!e)return G([]);let t=ks(this.listsCollection,Os("owner","==",e.uid),Ju("updatedAt","desc")),r=ks(this.listsCollection,Os("sharedWith","array-contains",e.email),Ju("updatedAt","desc"));return ce(Promise.all([fc(t),fc(r)])).pipe(Y(([i,o])=>{let s=i.docs.map(h=>ee(F({},h.data()),{id:h.id})),a=o.docs.map(h=>ee(F({},h.data()),{id:h.id}));return[...s,...a].filter((h,p,g)=>p===g.findIndex(v=>v.id===h.id)).sort((h,p)=>new Date(p.updatedAt).getTime()-new Date(h.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(vt(1),Ie(r=>{if(!r)return G(Promise.reject("User not logged in"));let i=new Date,o={title:e,description:t,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return ce(fm(this.listsCollection,o))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=zr(this.firestore,`todoLists/${e.id}`),o=e,{id:r}=o,i=jc(o,["id"]);return i.updatedAt=new Date,pc(t,i)}deleteList(e){let t=zr(this.firestore,`todoLists/${e}`);return gm(t)}shareList(e,t){return _(this,null,function*(){let r=zr(this.firestore,`todoLists/${e}`),i=yield mm(r);if(!i.exists())throw new Error("List not found");let s=[...i.data().sharedWith||[],t];yield pc(r,{sharedWith:s,updatedAt:new Date})})}unshareList(e,t){return _(this,null,function*(){let r=zr(this.firestore,`todoLists/${e}`),i=yield mm(r);if(!i.exists())throw new Error("List not found");let s=(i.data().sharedWith||[]).filter(a=>a!==t);yield pc(r,{sharedWith:s,updatedAt:new Date})})}hasAccess(e){return _(this,null,function*(){return Lv(this.authService.user$.pipe(vt(1),Ie(t=>t?ce(mm(zr(this.firestore,`todoLists/${e}`))).pipe(Y(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):G(!1))))})}static \u0275fac=function(t){return new(t||n)(z(bi),z($t))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var jm=class n{constructor(e,t,r){this.firestore=e;this.authService=t;this.todoListService=r;this.todosCollection=pm(this.firestore,"todos")}todosCollection;getTodosForList(e){return this.authService.user$.pipe(Ie(t=>t?ce(this.todoListService.hasAccess(e)).pipe(Ie(r=>{if(!r)return G([]);let i=ks(this.todosCollection,Os("listId","==",e),Ju("position"));return LO(i,{idField:"id"})})):G([])))}addTodo(e,t){return this.authService.user$.pipe(vt(1),Ie(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),ce(this.todoListService.hasAccess(e)).pipe(Ie(i=>(console.log("User has access to list:",i),i?ce(fc(ks(this.todosCollection,Os("listId","==",e)))).pipe(Ie(o=>{let s=o.size,a=new Date,l={title:t,completed:!1,listId:e,position:s,createdBy:r.uid,createdAt:a,updatedAt:a};return console.log("Creating todo with data:",l),ce(fm(this.todosCollection,l))})):(console.error("Access denied to list:",e),G(Promise.reject("Access denied"))))))):(console.error("User not logged in"),G(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=zr(this.firestore,`todos/${e.id}`),o=e,{id:r}=o,i=jc(o,["id"]);return i.updatedAt=new Date,pc(t,i)}deleteTodo(e){let t=zr(this.firestore,`todos/${e}`);return gm(t)}updateTodoPosition(e){let t=Kb(this.firestore);return e.forEach((r,i)=>{if(r.id){let o=zr(this.firestore,`todos/${r.id}`);t.update(o,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return ce(fc(ks(this.todosCollection,Os("listId","==",e)))).pipe(Ie(t=>{let r=Kb(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),ce(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(z(bi),z($t),z(Io))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function TW(n,e){if(n&1&&(M(0,"p"),U(1),k()),n&2){let t=ge().ngIf;re(),St(t.description)}}function CW(n,e){if(n&1&&(M(0,"div")(1,"h2"),U(2),k(),He(3,TW,2,1,"p",10),k()),n&2){let t=e.ngIf;re(2),St(t.title),re(),je("ngIf",t.description)}}function SW(n,e){n&1&&(M(0,"h2"),U(1,"Todo List"),k(),M(2,"p"),U(3,"Loading list details..."),k())}function AW(n,e){if(n&1){let t=Ct();M(0,"div",18),ve("dblclick",function(){Ce(t);let i=ge().$implicit,o=ge();return Se(o.editTodo(i))}),U(1),k()}if(n&2){let t=ge().$implicit;re(),Mn(" ",t.title," ")}}function RW(n,e){if(n&1){let t=Ct();M(0,"div",11)(1,"div",12)(2,"input",13),ve("change",function(){let i=Ce(t).$implicit,o=ge();return Se(o.toggleCompletion(i))}),k(),He(3,AW,2,1,"div",14),M(4,"div",15)(5,"button",16),ve("click",function(){let i=Ce(t).$implicit,o=ge();return Se(o.editTodo(i))}),U(6,"Edit"),k(),M(7,"button",17),ve("click",function(){let i=Ce(t).$implicit,o=ge();return Se(o.deleteTodo(i.id))}),U(8,"Delete"),k()()()()}if(n&2){let t=e.$implicit,r=ge(),i=Mf(13);Yn("completed",t.completed),re(2),je("checked",t.completed),re(),je("ngIf",(r.editingTodo==null?null:r.editingTodo.id)!==t.id)("ngIfElse",i)}}function PW(n,e){if(n&1){let t=Ct();M(0,"div",19)(1,"input",20),ai("ngModelChange",function(i){Ce(t);let o=ge();return Zi(o.editingTodo.title,i)||(o.editingTodo.title=i),Se(i)}),ve("keyup.enter",function(){Ce(t);let i=ge();return Se(i.saveTodo())})("keyup.escape",function(){Ce(t);let i=ge();return Se(i.cancelEdit())}),k(),M(2,"button",21),ve("click",function(){Ce(t);let i=ge();return Se(i.saveTodo())}),U(3,"Save"),k(),M(4,"button",22),ve("click",function(){Ce(t);let i=ge();return Se(i.cancelEdit())}),U(5,"Cancel"),k()()}if(n&2){let t=ge();re(),si("ngModel",t.editingTodo.title)}}var Um=class n{constructor(e,t,r){this.todoService=e;this.todoListService=t;this.route=r;this.todos$=new Q,this.currentList$=new Q}todos$;todos=[];newTodoTitle="";editingTodo=null;originalTitle="";currentList$;listId=null;ngOnInit(){this.route.params.subscribe(e=>{this.listId=e.id,this.listId&&(this.todos$=this.todoService.getTodosForList(this.listId),this.todos$.subscribe(t=>this.todos=t),this.currentList$=this.todoListService.getLists().pipe(Ie(t=>{let r=t.find(i=>i.id===this.listId);return new Q(i=>{i.next(r||null),i.complete()})})))})}drop(e){Vm(this.todos,e.previousIndex,e.currentIndex),this.todoService.updateTodoPosition(this.todos)}addTodo(){this.newTodoTitle.trim()&&this.listId&&this.todoService.addTodo(this.listId,this.newTodoTitle.trim()).subscribe({next:()=>{this.newTodoTitle=""},error:e=>{console.error("Error adding todo:",e)}})}toggleCompletion(e){this.todoService.updateTodo(ee(F({},e),{completed:!e.completed}))}editTodo(e){this.editingTodo=F({},e),this.originalTitle=e.title}saveTodo(){this.editingTodo&&this.editingTodo.title.trim()&&(this.todoService.updateTodo(this.editingTodo),this.editingTodo=null)}cancelEdit(){this.editingTodo=null}deleteTodo(e){e&&this.todoService.deleteTodo(e)}static \u0275fac=function(t){return new(t||n)(K(jm),K(Io),K(Fn))};static \u0275cmp=at({type:n,selectors:[["app-todo"]],decls:14,vars:6,consts:[["loadingList",""],["editTpl",""],[1,"todo-container"],[4,"ngIf","ngIfElse"],[1,"add-todo-form",3,"ngSubmit"],["type","text","name","newTodoTitle","placeholder","Add a new todo...",1,"todo-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn","add-btn"],[1,"todo-list"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","class","todo-item",3,"completed",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkDrag","",1,"todo-item"],[1,"todo-item-details"],["type","checkbox",3,"change","checked"],["class","todo-title",3,"dblclick",4,"ngIf","ngIfElse"],[1,"actions"],[1,"btn","edit-btn",3,"click"],[1,"btn","delete-btn",3,"click"],[1,"todo-title",3,"dblclick"],[1,"edit-mode"],["type","text","name","editTitle","autofocus","",1,"edit-input",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],[1,"btn","save-btn",3,"click"],[1,"btn","cancel-btn",3,"click"]],template:function(t,r){if(t&1){let i=Ct();M(0,"div",2),He(1,CW,4,2,"div",3),Zt(2,"async"),He(3,SW,4,0,"ng-template",null,0,kf),M(5,"form",4),ve("ngSubmit",function(){return Ce(i),Se(r.addTodo())}),M(6,"input",5),ai("ngModelChange",function(s){return Ce(i),Zi(r.newTodoTitle,s)||(r.newTodoTitle=s),Se(s)}),k(),M(7,"button",6),U(8,"Add"),k()(),M(9,"div",7)(10,"div",8),ve("cdkDropListDropped",function(s){return Ce(i),Se(r.drop(s))}),He(11,RW,9,5,"div",9),k()(),He(12,PW,6,1,"ng-template",null,1,kf),k()}if(t&2){let i=Mf(4);re(),je("ngIf",sn(2,4,r.currentList$))("ngIfElse",i),re(5),si("ngModel",r.newTodoTitle),re(5),je("ngForOf",r.todos)}},dependencies:[jt,ya,yn,er,xm,Pm,yc,Sm,Am,sd,od,nr,B1,U1,j1],styles:[".todo-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff}.app-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#007bff;text-decoration:none;margin-bottom:1rem;font-weight:500}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.app-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.app-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.9rem;margin-top:1rem}.logout-btn[_ngcontent-%COMP%]:hover{background:#c82333}.add-todo-form[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.todo-input[_ngcontent-%COMP%]{flex-grow:1;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border:none;border-radius:4px;cursor:pointer;margin-left:.5rem;color:#fff}.add-btn[_ngcontent-%COMP%]{background-color:#28a745}.edit-btn[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545}.save-btn[_ngcontent-%COMP%]{background-color:#007bff}.cancel-btn[_ngcontent-%COMP%]{background-color:#6c757d}.todo-list[_ngcontent-%COMP%]{padding:0}.todo-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem;border-bottom:1px solid #eee;background-color:#fff}.todo-item.completed[_ngcontent-%COMP%]   .todo-title[_ngcontent-%COMP%]{text-decoration:line-through;color:#888}.todo-item-details[_ngcontent-%COMP%], .edit-mode[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}input[type=checkbox][_ngcontent-%COMP%]{margin-right:1rem}.todo-title[_ngcontent-%COMP%]{flex-grow:1;cursor:pointer}.edit-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;font-size:1rem;border:1px solid #ddd;border-radius:4px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .todo-item.cdk-drop-list-dragging[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var Bm=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(K($t),K(mt))};static \u0275cmp=at({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"h2"),U(2,"Sign in to Todo List"),k(),M(3,"p"),U(4,"Please sign in to access your personal todo list"),k(),M(5,"button",1),ve("click",function(){return r.login()}),Sr(6,"img",2),U(7," Sign in with Google "),k()())},dependencies:[jt],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function xW(n,e){if(n&1&&(M(0,"p",22),U(1),k()),n&2){let t=ge().$implicit;re(),St(t.description)}}function NW(n,e){n&1&&(M(0,"span",23),U(1,"Owner"),k())}function MW(n,e){n&1&&(M(0,"span",24),U(1,"Shared with you"),k())}function kW(n,e){if(n&1&&(M(0,"div",25)(1,"small"),U(2),k()()),n&2){let t=ge().$implicit;re(2),Mn("Shared with: ",t.sharedWith.join(", "))}}function OW(n,e){if(n&1){let t=Ct();M(0,"div",10)(1,"div",11)(2,"h3"),U(3),k(),M(4,"div",12)(5,"button",13),ve("click",function(){let i=Ce(t).$implicit,o=ge();return Se(o.openList(i))}),U(6,"Open"),k(),M(7,"button",14),ve("click",function(){let i=Ce(t).$implicit,o=ge();return Se(o.shareList(i))}),U(8,"Share"),k(),M(9,"button",15),ve("click",function(){let i=Ce(t).$implicit,o=ge();return Se(o.deleteList(i.id))}),U(10,"Delete"),k()()(),He(11,xW,2,1,"p",16),M(12,"div",17),He(13,NW,2,0,"span",18),Zt(14,"async"),He(15,MW,2,0,"span",19),Zt(16,"async"),M(17,"span",20),U(18),Zt(19,"date"),k()(),He(20,kW,3,1,"div",21),k()}if(n&2){let t=e.$implicit,r=ge();re(3),St(t.title),re(8),je("ngIf",t.description),re(2),je("ngIf",sn(14,6,r.isOwner(t))),re(2),je("ngIf",!sn(16,8,r.isOwner(t))),re(3),St(oE(19,10,r.getDate(t.updatedAt),"short")),re(2),je("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function FW(n,e){if(n&1){let t=Ct();M(0,"div",26),ve("click",function(){Ce(t);let i=ge();return Se(i.closeShareModal())}),M(1,"div",27),ve("click",function(i){return Ce(t),Se(i.stopPropagation())}),M(2,"h3"),U(3),k(),M(4,"form",28),ve("ngSubmit",function(){Ce(t);let i=ge();return Se(i.confirmShare())}),M(5,"input",29),ai("ngModelChange",function(i){Ce(t);let o=ge();return Zi(o.shareEmail,i)||(o.shareEmail=i),Se(i)}),k(),M(6,"div",30)(7,"button",31),U(8,"Share"),k(),M(9,"button",32),ve("click",function(){Ce(t);let i=ge();return Se(i.closeShareModal())}),U(10,"Cancel"),k()()()()()}if(n&2){let t=ge();re(3),Mn('Share "',t.sharingList.title,'"'),re(2),si("ngModel",t.shareEmail)}}var $m=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r;this.lists$=this.todoListService.getLists()}lists$;newListTitle="";newListDescription="";sharingList=null;shareEmail="";ngOnInit(){}createList(){this.newListTitle.trim()&&this.todoListService.createList(this.newListTitle.trim(),this.newListDescription.trim()).subscribe({next:e=>{this.newListTitle="",this.newListDescription="",console.log("List created:",e)},error:e=>{console.error("Error creating list:",e)}})}openList(e){this.router.navigate(["/todo",e.id])}shareList(e){this.sharingList=e,this.shareEmail=""}closeShareModal(){this.sharingList=null,this.shareEmail=""}confirmShare(){this.sharingList&&this.shareEmail.trim()&&this.todoListService.shareList(this.sharingList.id,this.shareEmail.trim()).then(()=>{this.closeShareModal(),console.log("List shared successfully")}).catch(e=>{console.error("Error sharing list:",e)})}deleteList(e){confirm("Are you sure you want to delete this list? This action cannot be undone.")&&this.todoListService.deleteList(e).then(()=>{console.log("List deleted successfully")}).catch(t=>{console.error("Error deleting list:",t)})}isOwner(e){return this.authService.user$.pipe(Y(t=>t?.uid===e.owner))}getDate(e){return e&&typeof e.toDate=="function"?e.toDate():new Date}logout(){this.authService.signOut()}static \u0275fac=function(t){return new(t||n)(K(Io),K($t),K(mt))};static \u0275cmp=at({type:n,selectors:[["app-lists"]],decls:18,vars:6,consts:[[1,"lists-container"],[1,"page-header"],[1,"create-list-section"],[1,"create-list-form",3,"ngSubmit"],["type","text","name","newListTitle","placeholder","List title...","required","",1,"list-input",3,"ngModelChange","ngModel"],["type","text","name","newListDescription","placeholder","Description (optional)...",1,"list-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn","create-btn"],[1,"lists-grid"],["class","list-card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"list-card"],[1,"list-header"],[1,"list-actions"],[1,"btn","open-btn",3,"click"],[1,"btn","share-btn",3,"click"],[1,"btn","delete-btn",3,"click"],["class","list-description",4,"ngIf"],[1,"list-meta"],["class","list-owner",4,"ngIf"],["class","list-shared",4,"ngIf"],[1,"list-date"],["class","shared-with",4,"ngIf"],[1,"list-description"],[1,"list-owner"],[1,"list-shared"],[1,"shared-with"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"ngSubmit"],["type","email","name","shareEmail","placeholder","Enter email address...","required","",1,"share-input",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn","share-btn"],["type","button",1,"btn","cancel-btn",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"header",1)(2,"h2"),U(3,"My Todo Lists"),k(),M(4,"p"),U(5,"Create and manage your todo lists"),k()(),M(6,"div",2)(7,"h3"),U(8,"Create New List"),k(),M(9,"form",3),ve("ngSubmit",function(){return r.createList()}),M(10,"input",4),ai("ngModelChange",function(o){return Zi(r.newListTitle,o)||(r.newListTitle=o),o}),k(),M(11,"input",5),ai("ngModelChange",function(o){return Zi(r.newListDescription,o)||(r.newListDescription=o),o}),k(),M(12,"button",6),U(13,"Create List"),k()()(),M(14,"div",7),He(15,OW,21,13,"div",8),Zt(16,"async"),k(),He(17,FW,11,2,"div",9),k()),t&2&&(re(10),si("ngModel",r.newListTitle),re(),si("ngModel",r.newListDescription),re(4),je("ngForOf",sn(16,4,r.lists$)),re(2),je("ngIf",r.sharingList))},dependencies:[jt,ya,yn,er,TE,xm,Pm,yc,Sm,Am,rT,sd,od,nr],styles:[".lists-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.create-list-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:2rem}.create-list-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333}.create-list-form[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end}.list-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}.lists-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.list-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.list-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.2rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-description[_ngcontent-%COMP%]{color:#666;margin-bottom:1rem;font-style:italic}.list-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.list-owner[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:.2rem .5rem;border-radius:12px;font-size:.8rem}.list-shared[_ngcontent-%COMP%]{background:#ffc107;color:#333;padding:.2rem .5rem;border-radius:12px;font-size:.8rem}.list-date[_ngcontent-%COMP%]{color:#999;font-size:.9rem}.shared-with[_ngcontent-%COMP%]{margin-top:.5rem;color:#666;font-size:.9rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem;border:none;border-radius:4px;cursor:pointer;color:#fff}.create-btn[_ngcontent-%COMP%]{background-color:#28a745}.open-btn[_ngcontent-%COMP%]{background-color:#007bff}.share-btn[_ngcontent-%COMP%]{background-color:#17a2b8}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545}.cancel-btn[_ngcontent-%COMP%]{background-color:#6c757d}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;min-width:400px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333}.share-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}"]})};var hd=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(vt(1),Y(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(z($t),z(mt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var $1=[{path:"",component:vm},{path:"ip-lookup",component:_m},{path:"login",component:Bm},{path:"lists",component:$m,canActivate:[hd]},{path:"todo/:id",component:Um,canActivate:[hd]},{path:"todo",redirectTo:"/lists",pathMatch:"full"}];var H1={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var z1={providers:[cE({eventCoalescing:!0}),fw($1),VE(),Hx(()=>zx(H1.firebaseConfig)),FO(()=>VO()),qN(()=>WN())]};var Hm=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new et(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){Wc(this.checkInterval).pipe(Ie(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new Q(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(z(Ia))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function VW(n,e){if(n&1){let t=Ct();M(0,"div",1)(1,"div",2)(2,"div",3),U(3,"\u{1F504}"),k(),M(4,"div",4)(5,"h4"),U(6,"New version available!"),k(),M(7,"p"),U(8,"A new version of the app is ready. Refresh to get the latest features."),k()(),M(9,"div",5)(10,"button",6),ve("click",function(){Ce(t);let i=ge();return Se(i.update())}),U(11,"Update Now"),k(),M(12,"button",7),ve("click",function(){Ce(t);let i=ge();return Se(i.dismiss())}),U(13,"Later"),k()()()()}}var zm=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(K(Hm))};static \u0275cmp=at({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(He(0,VW,14,0,"div",0),Zt(1,"async")),t&2&&je("ngIf",sn(1,1,r.updateAvailable$))},dependencies:[jt,yn,er],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var jW=()=>({exact:!0});function UW(n,e){if(n&1){let t=Ct();M(0,"header",2)(1,"div",3)(2,"h1"),U(3),k(),M(4,"nav",4)(5,"a",5),U(6,"Home"),k(),M(7,"a",6),U(8,"Todo Lists"),k(),M(9,"button",7),ve("click",function(){Ce(t);let i=ge();return Se(i.logout())}),U(10,"Sign Out"),k()()()()}if(n&2){let t=e.ngIf;re(3),Mn("Welcome, ",t.displayName,"!"),re(2),je("routerLinkActiveOptions",iE(2,jW))}}var qm=class n{constructor(e){this.authService=e;this.user$=this.authService.user$}user$;logout(){this.authService.signOut()}static \u0275fac=function(t){return new(t||n)(K($t))};static \u0275cmp=at({type:n,selectors:[["app-root"]],decls:5,vars:3,consts:[["class","app-header",4,"ngIf"],[1,"main-content"],[1,"app-header"],[1,"header-content"],[1,"nav-menu"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","active"],[1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(He(0,UW,11,3,"header",0),Zt(1,"async"),M(2,"main",1),Sr(3,"router-outlet"),k(),Sr(4,"app-update-notification")),t&2&&je("ngIf",sn(1,1,r.user$))},dependencies:[jt,yn,er,ru,nr,Mr,hw,zm],styles:[".container[_ngcontent-%COMP%]{font-family:sans-serif;max-width:600px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#f9f9f9}h1[_ngcontent-%COMP%]{color:#333;text-align:center}p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;color:#555}strong[_ngcontent-%COMP%]{color:#000}.error[_ngcontent-%COMP%]{color:#d9534f;font-weight:700}.app-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e9ecef;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:1000}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#333;text-align:left}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#666;font-weight:500;padding:.5rem 1rem;border-radius:6px;transition:all .2s ease}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;background-color:#f8f9fa}.nav-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#007bff;background-color:#e7f3ff}.logout-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s ease}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#f8f9fa}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}"]})};OE(qm,z1).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
