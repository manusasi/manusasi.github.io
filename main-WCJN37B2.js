import{$ as K,$a as cc,$b as ji,A as wt,Aa as Bd,Ab as ke,B as co,Ba as H0,Bb as Qr,C as O0,Ca as G0,Cb as Bn,D as nc,Da as R,Db as av,E as V0,Ea as lo,Eb as cv,F as L0,Fa as W0,Fb as Jt,G as Ot,Ga as Vi,Gb as Li,H as Nn,Ha as q,Hb as lv,I as Hr,Ia as K0,Ib as uv,J as Pd,Ja as Q0,Jb as Hd,K as Je,Ka as Y0,Kb as dv,L as rc,La as J0,Lb as Gd,M as ar,Ma as oc,Mb as Fi,N as Md,Na as Se,Nb as hv,O as F0,Oa as dr,Ob as Yr,P as Nd,Pa as Xe,Pb as fv,Q as Od,Qa as un,Qb as hr,R as xe,Ra as J,Rb as pv,S as Vd,Sa as X0,Sb as mv,T as Qe,Ta as Oe,Tb as gv,U as Pe,Ua as lt,Ub as ho,V as Gr,Va as Z0,Vb as vv,W as ee,Wa as ev,Wb as Ui,X as cr,Xa as ac,Xb as _v,Y as U0,Ya as $d,Yb as fr,Z as we,Za as qd,Zb as He,_ as te,_a as tv,_b as Ft,a as B,aa as lr,ab as N,ac as Re,b as pe,ba as j0,bb as p,bc as yv,c as Za,ca as On,cb as g,cc as wv,d as or,da as Et,db as U,dc as Ev,e as w,ea as H,eb as Qt,ec as Iv,f as R0,fa as G,fb as Yt,fc as bv,g as Ad,ga as Q,gb as de,gc as uc,h as St,ha as ie,hb as F,hc as Tv,i as xd,ia as Ct,ib as V,j as kd,ja as At,jb as nv,jc as Sv,k as Kt,ka as Ld,kb as rv,l as ct,la as Fd,lb as iv,m as D0,ma as ic,mb as Ln,n as P0,na as Vn,nb as sv,o as Mn,oa as B0,ob as uo,p as ec,pa as sc,pb as b,q as Rd,qa as Vt,qb as ge,r as Dd,ra as Lt,rb as Fe,s as Te,sa as Oi,sb as lc,t as Y,ta as $0,tb as Fn,u as ao,ua as ur,ub as Un,v as M0,va as q0,vb as jn,w as N0,wa as Ud,wb as Kr,x as tc,xa as z0,xb as zd,y as ae,ya as Wr,yb as ov,z as Ni,za as jd,zb as _e}from"./chunk-SIOTEXDY.js";var fc=new we(""),Yd=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Pe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(fc),te(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),fo=class{_doc;constructor(e){this._doc=e}manager},dc="ng-app-id";function Cv(n){for(let e of n)e.remove()}function Av(n,e){let t=e.createElement("style");return t.textContent=n,t}function AT(n,e,t,r){let i=n.head?.querySelectorAll(`style[${dc}="${e}"],link[${dc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(dc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Kd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Jd=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Iv(s),AT(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Av);r?.forEach(i=>this.addUsage(i,this.external,Kd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Cv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Cv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Av(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Kd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(dc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(At),te(Ud),te(jd,8),te(Wr))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Wd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xd=/%COMP%/g;var kv="%COMP%",xT=`_nghost-${kv}`,kT=`_ngcontent-${kv}`,RT=!0,DT=new we("",{providedIn:"root",factory:()=>RT});function PT(n){return kT.replace(Xd,n)}function MT(n){return xT.replace(Xd,n)}function Rv(n,e){return e.map(t=>t.replace(Xd,n))}var Zd=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,c,l,d=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new po(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof hc?i.applyToHost(t):i instanceof mo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,v=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Bd.Emulated:s=new hc(l,d,r,this.appId,f,o,c,v,_);break;case Bd.ShadowDom:return new Qd(l,d,t,r,o,c,this.nonce,v,_);default:s=new mo(l,d,r,f,o,c,v,_);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(Yd),te(Jd),te(Ud),te(DT),te(At),te(Wr),te(lt),te(jd),te(X0,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),po=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Wd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xv(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xv(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Pe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Wd[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Wd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(lo.DashCase|lo.Important)?e.style.setProperty(t,r,i&lo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&lo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=hr().getGlobalEventTarget(this.doc,e),!e))throw new Pe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function xv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qd=class extends po{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,l,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=Rv(i.id,f);for(let _ of f){let k=document.createElement("style");c&&k.setAttribute("nonce",c),k.textContent=_,this.shadowRoot.appendChild(k)}let v=i.getExternalStyles?.();if(v)for(let _ of v){let k=Kd(_,s);c&&k.setAttribute("nonce",c),this.shadowRoot.appendChild(k)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mo=class extends po{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=d?Rv(d,f):f,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},hc=class extends mo{contentAttr;hostAttr;constructor(e,t,r,i,s,o,c,l,d){let f=i+"-"+r.id;super(e,t,r,s,o,c,l,d,f),this.contentAttr=PT(f),this.hostAttr=MT(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var pc=class n extends mv{supportsDOMEvents=!0;static makeCurrent(){pv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=NT();return t==null?null:OT(t)}resetBaseElement(){go=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yv(document.cookie,e)}},go=null;function NT(){return go=go||document.head.querySelector("base"),go?go.getAttribute("href"):null}function OT(n){return new URL(n,document.baseURI).pathname}var VT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Pv=(()=>{class n extends fo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(te(At))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Dv=["alt","control","meta","shift"],LT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Mv=(()=>{class n extends fo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hr().onAndCancel(t,o.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Dv.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=LT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Dv.forEach(o=>{if(o!==i){let c=FT[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(At))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function eh(n,e){return hv(B({rootComponent:n},UT(e)))}function UT(n){return{appProviders:[...zT,...n?.providers??[]],platformProviders:qT}}function jT(){pc.makeCurrent()}function BT(){return new Fd}function $T(){return q0(document),document}var qT=[{provide:Wr,useValue:Ev},{provide:z0,useValue:jT,multi:!0},{provide:At,useFactory:$T}];var zT=[{provide:j0,useValue:"root"},{provide:Fd,useFactory:BT},{provide:fc,useClass:Pv,multi:!0,deps:[At]},{provide:fc,useClass:Mv,multi:!0,deps:[At]},Zd,Jd,Yd,{provide:W0,useExisting:Zd},{provide:wv,useClass:VT},[]];var Nv=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(At))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ue="primary",ko=Symbol("RouteTitle"),sh=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Zr(n){return new sh(n)}function $v(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function GT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dn(n[t],e[t]))return!1;return!0}function dn(n,e){let t=n?oh(n):void 0,r=e?oh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!qv(n[i],e[i]))return!1;return!0}function oh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function zv(n){return n.length>0?n[n.length-1]:null}function $n(n){return M0(n)?n:ac(n)?Te(Promise.resolve(n)):Y(n)}var WT={exact:Gv,subset:Wv},Hv={exact:KT,subset:QT,ignored:()=>!0};function Ov(n,e,t){return WT[t.paths](n.root,e.root,t.matrixParams)&&Hv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KT(n,e){return dn(n,e)}function Gv(n,e,t){if(!Jr(n.segments,e.segments)||!vc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Gv(n.children[r],e.children[r],t))return!1;return!0}function QT(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qv(n[t],e[t]))}function Wv(n,e,t){return Kv(n,e,e.segments,t)}function Kv(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Jr(i,t)||e.hasChildren()||!vc(i,t,r))}else if(n.segments.length===t.length){if(!Jr(n.segments,t)||!vc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Wv(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Jr(n.segments,i)||!vc(n.segments,i,r)||!n.children[ue]?!1:Kv(n.children[ue],e,s,r)}}function vc(n,e,t){return e.every((r,i)=>Hv[t](n[i].parameters,r.parameters))}var fn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){return XT.serialize(this)}},Ee=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _c(this)}},pr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Zr(this.parameters),this._parameterMap}toString(){return Yv(this)}};function YT(n,e){return Jr(n,e)&&n.every((t,r)=>dn(t.parameters,e[r].parameters))}function Jr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JT(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var ei=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new mr,providedIn:"root"})}return n})(),mr=class{parse(e){let t=new ch(e);return new fn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vo(e.root,!0)}`,r=t1(e.queryParams),i=typeof e.fragment=="string"?`#${ZT(e.fragment)}`:"";return`${t}${r}${i}`}},XT=new mr;function _c(n){return n.segments.map(e=>Yv(e)).join("/")}function vo(n,e){if(!n.hasChildren())return _c(n);if(e){let t=n.children[ue]?vo(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${vo(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JT(n,(r,i)=>i===ue?[vo(n.children[ue],!1)]:[`${i}:${vo(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${_c(n)}/${t[0]}`:`${_c(n)}/(${t.join("//")})`}}function Qv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mc(n){return Qv(n).replace(/%3B/gi,";")}function ZT(n){return encodeURI(n)}function ah(n){return Qv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yc(n){return decodeURIComponent(n)}function Vv(n){return yc(n.replace(/\+/g,"%20"))}function Yv(n){return`${ah(n.path)}${e1(n.parameters)}`}function e1(n){return Object.entries(n).map(([e,t])=>`;${ah(e)}=${ah(t)}`).join("")}function t1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${mc(t)}=${mc(i)}`).join("&"):`${mc(t)}=${mc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var n1=/^[^\/()?;#]+/;function th(n){let e=n.match(n1);return e?e[0]:""}var r1=/^[^\/()?;=#]+/;function i1(n){let e=n.match(r1);return e?e[0]:""}var s1=/^[^=?&#]+/;function o1(n){let e=n.match(s1);return e?e[0]:""}var a1=/^[^&#]+/;function c1(n){let e=n.match(a1);return e?e[0]:""}var ch=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new Ee(e,t)),r}parseSegment(){let e=th(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(e),new pr(yc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=i1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=th(this.remaining);i&&(r=i,this.capture(r))}e[yc(t)]=yc(r)}parseQueryParam(e){let t=o1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=c1(this.remaining);o&&(r=o,this.capture(r))}let i=Vv(t),s=Vv(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=th(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Pe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ue]:new Ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pe(4011,!1)}};function Jv(n){return n.segments.length>0?new Ee([],{[ue]:n}):n}function Xv(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Xv(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ee(n.segments,e);return l1(t)}function l1(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new Ee(n.segments.concat(e.segments),e.children)}return n}function gr(n){return n instanceof fn}function Zv(n,e,t=null,r=null){let i=e_(n);return t_(i,e,t,r)}function e_(n){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new Ee(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=Jv(r);return e??i}function t_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return nh(i,i,i,t,r);let s=u1(e);if(s.toRoot())return nh(i,i,new Ee([],{}),t,r);let o=d1(s,i,n),c=o.processChildren?yo(o.segmentGroup,o.index,s.commands):r_(o.segmentGroup,o.index,s.commands);return nh(i,o.segmentGroup,c,t,r)}function wc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Eo(n){return typeof n=="object"&&n!=null&&n.outlets}function nh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=n_(n,e,t);let c=Jv(Xv(o));return new fn(c,s,i)}function n_(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=n_(s,e,t)}),new Ee(n.segments,r)}var Ec=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wc(r[0]))throw new Pe(4003,!1);let i=r.find(Eo);if(i&&i!==zv(r))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function u1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ec(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Ec(t,e,r)}var qi=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function d1(n,e,t){if(n.isAbsolute)return new qi(e,!0,0);if(!t)return new qi(e,!1,NaN);if(t.parent===null)return new qi(t,!0,0);let r=wc(n.commands[0])?0:1,i=t.segments.length-1+r;return h1(t,i,n.numberOfDoubleDots)}function h1(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Pe(4005,!1);i=r.segments.length}return new qi(r,!1,i-s)}function f1(n){return Eo(n[0])?n[0].outlets:{[ue]:n}}function r_(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return yo(n,e,t);let r=p1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ee(n.segments.slice(0,r.pathIndex),{});return s.children[ue]=new Ee(n.segments.slice(r.pathIndex),n.children),yo(s,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?lh(n,e,t):r.match?yo(n,0,i):lh(n,e,t)}function yo(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=f1(t),i={};if(Object.keys(r).some(s=>s!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let s=yo(n.children[ue],e,t);return new Ee(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=r_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(n.segments,i)}}function p1(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Eo(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Fv(l,d,o))return s;r+=2}else{if(!Fv(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function lh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Eo(s)){let l=m1(s.outlets);return new Ee(r,l)}if(i===0&&wc(t[0])){let l=n.segments[e];r.push(new pr(l.path,Lv(t[0]))),i++;continue}let o=Eo(s)?s.outlets[ue]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&wc(c)?(r.push(new pr(o,Lv(c))),i+=2):(r.push(new pr(o,{})),i++)}return new Ee(r,{})}function m1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=lh(new Ee([],{}),0,r))}),e}function Lv(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Fv(n,e,t){return n==t.path&&dn(e,t.parameters)}var zi="imperative",Ye=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ye||{}),kt=class{id;url;constructor(e,t){this.id=e,this.url=t}},vr=class extends kt{type=Ye.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gt=class extends kt{urlAfterRedirects;type=Ye.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(mt||{}),Gi=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gi||{}),hn=class extends kt{reason;code;type=Ye.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pn=class extends kt{reason;code;type=Ye.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wi=class extends kt{error;target;type=Ye.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Io=class extends kt{urlAfterRedirects;state;type=Ye.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class extends kt{urlAfterRedirects;state;type=Ye.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bc=class extends kt{urlAfterRedirects;state;shouldActivate;type=Ye.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tc=class extends kt{urlAfterRedirects;state;type=Ye.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sc=class extends kt{urlAfterRedirects;state;type=Ye.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cc=class{route;type=Ye.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ac=class{route;type=Ye.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xc=class{snapshot;type=Ye.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kc=class{snapshot;type=Ye.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rc=class{snapshot;type=Ye.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dc=class{snapshot;type=Ye.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ki=class{routerEvent;position;anchor;type=Ye.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},bo=class{},Qi=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function g1(n){return!(n instanceof bo)&&!(n instanceof Qi)}function v1(n,e){return n.providers&&!n._injector&&(n._injector=oc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xt(n){return n.outlet||ue}function _1(n,e){let t=n.filter(r=>Xt(r)===e);return t.push(...n.filter(r=>Xt(r)!==e)),t}function Ro(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Pc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ro(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ti(this.rootInjector)}},ti=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Pc(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(On))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=uh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=uh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dh(e,this._root).map(t=>t.value)}};function uh(n,e){if(n===e.value)return e;for(let t of e.children){let r=uh(n,t);if(r)return r}return null}function dh(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dh(n,t);if(r.length)return r.unshift(e),r}return[]}var xt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $i(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var To=class extends Mc{snapshot;constructor(e,t){super(e),this.snapshot=t,yh(this,e)}toString(){return this.snapshot.toString()}};function i_(n){let e=y1(n),t=new ct([new pr("",{})]),r=new ct({}),i=new ct({}),s=new ct({}),o=new ct(""),c=new It(t,r,s,o,i,ue,n,e.root);return c.snapshot=e.root,new To(new xt(c,[]),e)}function y1(n){let e={},t={},r={},i="",s=new Xr([],e,r,i,t,ue,n,null,{});return new So("",new xt(s,[]))}var It=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(d=>d[ko]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Zr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Zr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&o_(i)&&(r.resolve[ko]=i.title),r}var Xr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ko]}constructor(e,t,r,i,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},So=class extends Mc{url;constructor(e,t){super(t),this.url=e,yh(this,t)}toString(){return s_(this._root)}};function yh(n,e){e.value._routerState=n,e.children.forEach(t=>yh(n,t))}function s_(n){let e=n.children.length>0?` { ${n.children.map(s_).join(", ")} } `:"";return`${n.value}${e}`}function rh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),dn(e.params,t.params)||n.paramsSubject.next(t.params),GT(e.url,t.url)||n.urlSubject.next(t.url),dn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hh(n,e){let t=dn(n.params,e.params)&&YT(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hh(n.parent,e.parent))}function o_(n){return typeof n.title=="string"||n.title===null}var a_=new we(""),Do=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ue;activateEvents=new Oe;deactivateEvents=new Oe;attachEvents=new Oe;detachEvents=new Oe;routerOutletData=uv(void 0);parentContexts=K(ti);location=K(Q0);changeDetector=K(Fi);inputBinder=K(Po,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new fh(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Lt]})}return n})(),fh=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===It?this.route:e===ti?this.childContexts:e===a_?this.outletData:this.parent.get(e,t)}},Po=new we(""),wh=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ni([r.queryParams,r.params,r.data]).pipe(xe(([s,o,c],l)=>(c=B(B(B({},s),o),c),l===0?Y(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=fv(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Eh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Se({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&U(0,"router-outlet")},dependencies:[Do],encapsulation:2})}return n})();function Ih(n){let e=n.children&&n.children.map(Ih),t=e?pe(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=Eh),t}function w1(n,e,t){let r=Co(n,e._root,t?t._root:void 0);return new To(r,e)}function Co(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=E1(n,e,t);return new xt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Co(n,c)),o}}let r=I1(e.value),i=e.children.map(s=>Co(n,s));return new xt(r,i)}}function E1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Co(n,r,i);return Co(n,r)})}function I1(n){return new It(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Yi=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},c_="ngNavigationCancelingError";function Oc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=gr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=l_(!1,mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function l_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[c_]=!0,t.cancellationCode=e,t}function b1(n){return u_(n)&&gr(n.url)}function u_(n){return!!n&&n[c_]}var T1=(n,e,t,r)=>ae(i=>(new ph(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ph=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$i(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$i(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Dc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new kc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(rh(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),rh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Vc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hi=class{component;route;constructor(e,t){this.component=e,this.route=t}};function S1(n,e,t){let r=n._root,i=e?e._root:null;return _o(r,i,t,[r.value])}function C1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!U0(n)?n:e.get(n):r}function _o(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=$i(e);return n.children.forEach(o=>{A1(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>wo(c,t.getContext(o),i)),i}function A1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=x1(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Vc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_o(n,e,c?c.children:null,r,i):_o(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Hi(c.outlet.component,o))}else o&&wo(e,c,i),i.canActivateChecks.push(new Vc(r)),s.component?_o(n,null,c?c.children:null,r,i):_o(n,null,t,r,i);return i}function x1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Jr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jr(n.url,e.url)||!dn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hh(n,e)||!dn(n.queryParams,e.queryParams);case"paramsChange":default:return!hh(n,e)}}function wo(n,e,t){let r=$i(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?wo(o,e.children.getContext(s),t):wo(o,null,t):wo(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hi(e.outlet.component,i)):t.canDeactivateChecks.push(new Hi(null,i)):t.canDeactivateChecks.push(new Hi(null,i))}function Mo(n){return typeof n=="function"}function k1(n){return typeof n=="boolean"}function R1(n){return n&&Mo(n.canLoad)}function D1(n){return n&&Mo(n.canActivate)}function P1(n){return n&&Mo(n.canActivateChild)}function M1(n){return n&&Mo(n.canDeactivate)}function N1(n){return n&&Mo(n.canMatch)}function d_(n){return n instanceof N0||n?.name==="EmptyError"}var gc=Symbol("INITIAL_VALUE");function Ji(){return xe(n=>Ni(n.map(e=>e.pipe(Je(1),Od(gc)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===gc)return gc;if(t===!1||O1(t))return t}return!0}),Ot(e=>e!==gc),Je(1)))}function O1(n){return gr(n)||n instanceof Yi}function V1(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Y(pe(B({},t),{guardsResult:!0})):L1(o,r,i,n).pipe(wt(c=>c&&k1(c)?F1(r,s,n,e):Y(c)),ae(c=>pe(B({},t),{guardsResult:c})))})}function L1(n,e,t,r){return Te(n).pipe(wt(i=>q1(i.component,i.route,t,e,r)),ar(i=>i!==!0,!0))}function F1(n,e,t,r){return Te(e).pipe(Hr(i=>O0(j1(i.route.parent,r),U1(i.route,r),$1(n,i.path,t),B1(n,i.route,t))),ar(i=>i!==!0,!0))}function U1(n,e){return n!==null&&e&&e(new Rc(n)),Y(!0)}function j1(n,e){return n!==null&&e&&e(new xc(n)),Y(!0)}function B1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>nc(()=>{let o=Ro(e)??t,c=Xi(s,o),l=D1(c)?c.canActivate(e,n):Et(o,()=>c(e,n));return $n(l).pipe(ar())}));return Y(i).pipe(Ji())}function $1(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>C1(o)).filter(o=>o!==null).map(o=>nc(()=>{let c=o.guards.map(l=>{let d=Ro(o.node)??t,f=Xi(l,d),v=P1(f)?f.canActivateChild(r,n):Et(d,()=>f(r,n));return $n(v).pipe(ar())});return Y(c).pipe(Ji())}));return Y(s).pipe(Ji())}function q1(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(c=>{let l=Ro(e)??i,d=Xi(c,l),f=M1(d)?d.canDeactivate(n,e,t,r):Et(l,()=>d(n,e,t,r));return $n(f).pipe(ar())});return Y(o).pipe(Ji())}function z1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let c=Xi(o,n),l=R1(c)?c.canLoad(e,t):Et(n,()=>c(e,t));return $n(l)});return Y(s).pipe(Ji(),h_(r))}function h_(n){return Ad(Qe(e=>{if(typeof e!="boolean")throw Oc(n,e)}),ae(e=>e===!0))}function H1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let c=Xi(o,n),l=N1(c)?c.canMatch(e,t):Et(n,()=>c(e,t));return $n(l)});return Y(s).pipe(Ji(),h_(r))}var Ao=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xo=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Bi(n){return ao(new Ao(n))}function G1(n){return ao(new Pe(4e3,!1))}function W1(n){return ao(l_(!1,mt.GuardRejected))}var mh=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ue])return G1(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,s){return K1(t,i,s).pipe(ae(o=>{if(o instanceof fn)throw new xo(o);let c=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new xo(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new fn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new Ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Pe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function K1(n,e,t){if(typeof n=="string")return Y(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,params:d,data:f,title:v}=e;return $n(Et(t,()=>r({params:d,data:f,queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,title:v})))}var gh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Q1(n,e,t,r,i){let s=f_(n,e,t);return s.matched?(r=v1(e,r),H1(r,e,t,i).pipe(ae(o=>o===!0?s:B({},gh)))):Y(s)}function f_(n,e,t){if(e.path==="**")return Y1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},gh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$v)(t,n,e);if(!i)return B({},gh);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Y1(n){return{matched:!0,parameters:n.length>0?zv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Uv(n,e,t,r){return t.length>0&&Z1(n,t,r)?{segmentGroup:new Ee(e,X1(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&eS(n,t,r)?{segmentGroup:new Ee(n.segments,J1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function J1(n,e,t,r){let i={};for(let s of t)if(Fc(n,e,s)&&!r[Xt(s)]){let o=new Ee([],{});i[Xt(s)]=o}return B(B({},r),i)}function X1(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&Xt(r)!==ue){let i=new Ee([],{});t[Xt(r)]=i}return t}function Z1(n,e,t){return t.some(r=>Fc(n,e,r)&&Xt(r)!==ue)}function eS(n,e,t){return t.some(r=>Fc(n,e,r))}function Fc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tS(n,e,t){return e.length===0&&!n.children[t]}var vh=class{};function nS(n,e,t,r,i,s,o="emptyOnly"){return new _h(n,e,t,r,i,o,s).recognize()}var rS=31,_h=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new mh(this.urlSerializer,this.urlTree)}noMatchError(e){return new Pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Uv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new xt(r,t),s=new So("",i),o=Zv(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Xr([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(ae(r=>({children:r,rootSnapshot:t})),Nn(r=>{if(r instanceof xo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ao?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof xt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Te(s).pipe(Hr(o=>{let c=r.children[o],l=_1(t,o);return this.processSegmentGroup(e,l,c,o,i)}),Nd((o,c)=>(o.push(...c),o)),Pd(null),F0(),wt(o=>{if(o===null)return Bi(r);let c=p_(o);return iS(c),Y(c)}))}processSegment(e,t,r,i,s,o,c){return Te(t).pipe(Hr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,c).pipe(Nn(d=>{if(d instanceof Ao)return Y(null);throw d}))),ar(l=>!!l),Nn(l=>{if(d_(l))return tS(r,i,s)?Y(new vh):Bi(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,l){return Xt(r)!==o&&(o===ue||!Fc(i,s,r))?Bi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Bi(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:l,parameters:d,consumedSegments:f,positionalParamSegments:v,remainingSegments:_}=f_(t,i,s);if(!l)return Bi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rS&&(this.allowRedirects=!1));let k=new Xr(s,d,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,jv(i),Xt(i),i.component??i._loadedComponent??null,i,Bv(i)),M=Nc(k,c,this.paramsInheritanceStrategy);return k.params=Object.freeze(M.params),k.data=Object.freeze(M.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,v,k,e).pipe(xe(L=>this.applyRedirects.lineralizeSegments(i,L)),wt(L=>this.processSegment(e,r,t,L.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=Q1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(xe(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xe(({routes:d})=>{let f=r._loadedInjector??e,{parameters:v,consumedSegments:_,remainingSegments:k}=l,M=new Xr(_,v,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,jv(r),Xt(r),r.component??r._loadedComponent??null,r,Bv(r)),$=Nc(M,o,this.paramsInheritanceStrategy);M.params=Object.freeze($.params),M.data=Object.freeze($.data);let{segmentGroup:L,slicedSegments:oe}=Uv(t,_,k,d);if(oe.length===0&&L.hasChildren())return this.processChildren(f,d,L,M).pipe(ae(se=>new xt(M,se)));if(d.length===0&&oe.length===0)return Y(new xt(M,[]));let re=Xt(r)===s;return this.processSegment(f,d,L,oe,re?ue:s,!0,M).pipe(ae(se=>new xt(M,se instanceof xt?[se]:[])))}))):Bi(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):z1(e,t,r,this.urlSerializer).pipe(wt(i=>i?this.configLoader.loadChildren(e,t).pipe(Qe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):W1(t))):Y({routes:[],injector:e})}};function iS(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function sS(n){let e=n.value.routeConfig;return e&&e.path===""}function p_(n){let e=[],t=new Set;for(let r of n){if(!sS(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=p_(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!t.has(r))}function jv(n){return n.data||{}}function Bv(n){return n.resolve||{}}function oS(n,e,t,r,i,s){return wt(o=>nS(n,e,t,r,o.extractedUrl,i,s).pipe(ae(({state:c,tree:l})=>pe(B({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function aS(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of m_(l))o.add(d);let c=0;return Te(o).pipe(Hr(l=>s.has(l)?cS(l,r,n,e):(l.data=Nc(l,l.parent,n).resolve,Y(void 0))),Qe(()=>c++),Md(1),wt(l=>c===o.size?Y(t):Mn))})}function m_(n){let e=n.children.map(t=>m_(t)).flat();return[n,...e]}function cS(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!o_(i)&&(s[ko]=i.title),nc(()=>(n.data=Nc(n,n.parent,t).resolve,lS(s,n,e,r).pipe(ae(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function lS(n,e,t,r){let i=oh(n);if(i.length===0)return Y({});let s={};return Te(i).pipe(wt(o=>uS(n[o],e,t,r).pipe(ar(),Qe(c=>{if(c instanceof Yi)throw Oc(new mr,c);s[o]=c}))),Md(1),ae(()=>s),Nn(o=>d_(o)?Mn:ao(o)))}function uS(n,e,t,r){let i=Ro(e)??r,s=Xi(n,i),o=s.resolve?s.resolve(e,t):Et(i,()=>s(e,t));return $n(o)}function ih(n){return xe(e=>{let t=n(e);return t?Te(t).pipe(ae(()=>e)):Y(e)})}var bh=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[ko]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>K(g_),providedIn:"root"})}return n})(),g_=(()=>{class n extends bh{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(Nv))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_r=new we("",{providedIn:"root",factory:()=>({})}),ni=new we(""),Uc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=K(av);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=$n(t.loadComponent()).pipe(ae(__),Qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),rc(()=>{this.componentLoaders.delete(t)})),i=new kd(r,()=>new Kt).pipe(xd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=v_(r,this.compiler,t,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(r)})),o=new kd(s,()=>new Kt).pipe(xd());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function v_(n,e,t,r){return $n(n.loadChildren()).pipe(ae(__),wt(i=>i instanceof J0||Array.isArray(i)?Y(i):Te(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(ni,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ih),injector:s}}))}function dS(n){return n&&typeof n=="object"&&"default"in n}function __(n){return dS(n)?n.default:n}var jc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>K(hS),providedIn:"root"})}return n})(),hS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Th=new we(""),Sh=new we("");function y_(n,e,t){let r=n.get(Sh),i=n.get(At);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),fS(n))),{onViewTransitionCreated:l}=r;return l&&Et(n,()=>l({transition:c,from:e,to:t})),o}function fS(n){return new Promise(e=>{Z0({read:()=>setTimeout(e)},{injector:n})})}var Ch=new we(""),Bc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Kt;transitionAbortWithErrorSubject=new Kt;configLoader=K(Uc);environmentInjector=K(On);destroyRef=K(Ld);urlSerializer=K(ei);rootContexts=K(ti);location=K(Ui);inputBindingEnabled=K(Po,{optional:!0})!==null;titleStrategy=K(bh);options=K(_r,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=K(jc);createViewTransition=K(Th,{optional:!0});navigationErrorHandler=K(Ch,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Cc(i)),r=i=>this.events.next(new Ac(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new ct(null),this.transitions.pipe(Ot(r=>r!==null),xe(r=>{let i=!1;return Y(r).pipe(xe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),Mn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?pe(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&c!=="reload"){let l="";return this.events.next(new pn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Gi.IgnoredSameUrlNavigation)),s.resolve(!1),Mn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(xe(l=>(this.events.next(new vr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Mn:Promise.resolve(l))),oS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=pe(B({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let d=new Io(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:f,restoredState:v,extras:_}=s,k=new vr(l,this.urlSerializer.serialize(d),f,v);this.events.next(k);let M=i_(this.rootComponentType).snapshot;return this.currentTransition=r=pe(B({},s),{targetSnapshot:M,urlAfterRedirects:d,extras:pe(B({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,Y(r)}else{let l="";return this.events.next(new pn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Gi.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Mn}}),Qe(s=>{let o=new Ic(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),ae(s=>(this.currentTransition=r=pe(B({},s),{guards:S1(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),V1(this.environmentInjector,s=>this.events.next(s)),Qe(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Oc(this.urlSerializer,s.guardsResult);let o=new bc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Ot(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",mt.GuardRejected),!1)),ih(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(Qe(o=>{let c=new Tc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),xe(o=>{let c=!1;return Y(o).pipe(aS(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(o,"",mt.NoDataFromResolver)}}))}),Qe(o=>{let c=new Sc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}))}),ih(s=>{let o=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Qe(d=>{c.component=d}),ae(()=>{})));for(let d of c.children)l.push(...o(d));return l};return Ni(o(s.targetSnapshot.root)).pipe(Pd(null),Je(1))}),ih(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return c?Te(c).pipe(ae(()=>r)):Y(r)}),ae(s=>{let o=w1(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=pe(B({},s),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),Qe(()=>{this.events.next(new bo)}),T1(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Je(1),Vd(new St(s=>{let o=r.abortController.signal,c=()=>s.next();return o.addEventListener("abort",c),()=>o.removeEventListener("abort",c)}).pipe(Ot(()=>!i&&!r.targetRouterState),Qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",mt.Aborted)}))),Qe({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Vd(this.transitionAbortWithErrorSubject.pipe(Qe(s=>{throw s}))),rc(()=>{i||this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(s=>{if(this.destroyed)return r.resolve(!1),Mn;if(i=!0,u_(s))this.events.next(new hn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),b1(s)?this.events.next(new Qi(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Wi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(c instanceof Yi){let{message:l,cancellationCode:d}=Oc(this.urlSerializer,c);this.events.next(new hn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Qi(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Mn}))}))}cancelNavigationTransition(t,r,i){let s=new hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pS(n){return n!==zi}var w_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>K(mS),providedIn:"root"})}return n})(),Lc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mS=(()=>{class n extends Lc{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E_=(()=>{class n{urlSerializer=K(ei);options=K(_r,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=K(Ui);urlHandlingStrategy=K(jc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new fn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof fn?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=i_(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>K(gS),providedIn:"root"})}return n})(),gS=(()=>{class n extends E_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof vr?this.updateStateMemento():t instanceof pn?this.commitTransition(r):t instanceof Io?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof bo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hn&&t.code!==mt.SupersededByNewNavigation&&t.code!==mt.Redirect?this.restoreHistory(r):t instanceof Wi?this.restoreHistory(r,!0):t instanceof gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=B(B({},o),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $c(n,e){n.events.pipe(Ot(t=>t instanceof gt||t instanceof hn||t instanceof Wi||t instanceof pn),ae(t=>t instanceof gt||t instanceof pn?0:(t instanceof hn?t.code===mt.Redirect||t.code===mt.SupersededByNewNavigation:!1)?2:1),Ot(t=>t!==2),Je(1)).subscribe(()=>{e()})}var vS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_S={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ne=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=K(ev);stateManager=K(E_);options=K(_r,{optional:!0})||{};pendingTasks=K(B0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=K(Bc);urlSerializer=K(ei);location=K(Ui);urlHandlingStrategy=K(jc);injector=K(On);_events=new Kt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=K(w_);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=K(ni,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!K(Po,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new R0;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof hn&&r.code!==mt.Redirect&&r.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gt)this.navigated=!0;else if(r instanceof Qi){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||pS(i.source)},o);this.scheduleNavigation(c,zi,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}g1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=B({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s).catch(l=>{this.injector.get(ic)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ih),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let v;try{let _=i?i.snapshot:this.routerState.snapshot.root;v=e_(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return t_(v,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=gr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,zi,null,r)}navigate(t,r={skipLocationChange:!1}){return yS(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},vS):r===!1?i=B({},_S):i=r,gr(t))return Ov(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Ov(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((v,_)=>{c=v,l=_});let f=this.pendingTasks.add();return $c(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(v=>Promise.reject(v))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Pe(4008,!1)}var mn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Vn(null);get href(){return Jt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Kt;applicationErrorHandler=K(ic);options=K(_r,{optional:!0});constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.reactiveHref.set(K(new lv("href"),{optional:!0}));let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof gt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(gr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:gr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(Ne),q(It),$0("tabindex"),q(Vi),q(ur),q(ho))};static \u0275dir=Xe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&F("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&cc("href",i.reactiveHref(),H0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Yr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Yr],replaceUrl:[2,"replaceUrl","replaceUrl",Yr],routerLink:"routerLink"},features:[Lt]})}return n})(),xh=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Oe;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof gt&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(co()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(t).pipe(co()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=wS(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(q(Ne),q(ur),q(Vi),q(Fi),q(mn,8))};static \u0275dir=Xe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&nv(s,mn,5),r&2){let o;rv(o=iv())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Lt]})}return n})();function wS(n){return!!n.paths}var No=class{};var I_=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ot(t=>t instanceof gt),Hr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=oc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Te(i).pipe(co())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let s=i.pipe(wt(o=>o===null?Y(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Te([s,o]).pipe(co())}else return s})}static \u0275fac=function(r){return new(r||n)(te(Ne),te(On),te(No),te(Uc))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b_=new we(""),ES=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=zi;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof pn&&t.code===Gi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ki&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>w(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ki(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){K0()};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function kh(n,...e){return lr([{provide:ni,multi:!0,useValue:n},[],{provide:It,useFactory:T_,deps:[Ne]},{provide:qd,multi:!0,useFactory:S_},e.map(t=>t.\u0275providers)])}function T_(n){return n.routerState.root}function Oo(n,e){return{\u0275kind:n,\u0275providers:e}}function S_(){let n=K(Ct);return e=>{let t=n.get(tv);if(e!==t.components[0])return;let r=n.get(Ne),i=n.get(C_);n.get(Rh)===1&&r.initialNavigation(),n.get(k_,null,{optional:!0})?.setUpPreloading(),n.get(b_,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var C_=new we("",{factory:()=>new Kt}),Rh=new we("",{providedIn:"root",factory:()=>1});function A_(){let n=[{provide:Rh,useValue:0},$d(()=>{let e=K(Ct);return e.get(gv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ne),s=e.get(C_);$c(i,()=>{r(!0)}),e.get(Bc).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))})];return Oo(2,n)}function x_(){let n=[$d(()=>{K(Ne).setUpLocationChangeListener()}),{provide:Rh,useValue:2}];return Oo(3,n)}var k_=new we("");function R_(n){return Oo(0,[{provide:k_,useExisting:I_},{provide:No,useExisting:n}])}function D_(){return Oo(8,[wh,{provide:Po,useExisting:wh}])}function P_(n){Y0("NgRouterViewTransitions");let e=[{provide:Th,useValue:y_},{provide:Sh,useValue:B({skipNextTransition:!!n?.skipInitialTransition},n)}];return Oo(9,e)}var M_=[Ui,{provide:ei,useClass:mr},Ne,ti,{provide:It,useFactory:T_,deps:[Ne]},Uc,[]],Vo=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[M_,[],{provide:ni,multi:!0,useValue:t},[],r?.errorHandler?{provide:Ch,useValue:r.errorHandler}:[],{provide:_r,useValue:r||{}},r?.useHash?bS():TS(),IS(),r?.preloadingStrategy?R_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?SS(r):[],r?.bindToComponentInputs?D_().\u0275providers:[],r?.enableViewTransitions?P_().\u0275providers:[],CS()]}}static forChild(t){return{ngModule:n,providers:[{provide:ni,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=cr({})}return n})();function IS(){return{provide:b_,useFactory:()=>{let n=K(bv),e=K(lt),t=K(_r),r=K(Bc),i=K(ei);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ES(i,r,n,e,t)}}}function bS(){return{provide:ho,useClass:_v}}function TS(){return{provide:ho,useClass:vv}}function SS(n){return[n.initialNavigation==="disabled"?x_().\u0275providers:[],n.initialNavigation==="enabledBlocking"?A_().\u0275providers:[]]}var Ah=new we("");function CS(){return[{provide:Ah,useFactory:S_},{provide:qd,multi:!0,useExisting:Ah}]}var N_=()=>{};var L_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},AS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},qc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,f=s>>2,v=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,k=d&63;l||(k=64,o||(_=64)),r.push(t[f],t[v],t[_],t[k])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(L_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):AS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||v==null)throw new Ph;let _=s<<2|c>>4;if(r.push(_),d!==64){let k=c<<4&240|d>>2;if(r.push(k),v!==64){let M=d<<6&192|v;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ph=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xS=function(n){let e=L_(n);return qc.encodeByteArray(e,!0)},Fo=function(n){return xS(n).replace(/\./g,"")},zc=function(n){try{return qc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Nh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kS=()=>Nh().__FIREBASE_DEFAULTS__,RS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&zc(n[1]);return e&&JSON.parse(e)},Hc=()=>{try{return N_()||kS()||RS()||DS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Oh=n=>{var e,t;return(t=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},F_=n=>{let e=Oh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vh=()=>{var n;return(n=Hc())===null||n===void 0?void 0:n.config},Lh=n=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${n}`]};var ii=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function yr(n){return n.endsWith(".cloudworkstations.dev")}function Gc(n){return w(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function U_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fo(JSON.stringify(t)),Fo(JSON.stringify(o)),""].join(".")}var Lo={};function PS(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lo))Lo[e]?n.emulator.push(e):n.prod.push(e);return n}function MS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var O_=!1;function Wc(n,e){if(typeof window>"u"||typeof document>"u"||!yr(window.location.host)||Lo[n]===e||Lo[n]||O_)return;Lo[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",s=PS().prod.length>0;function o(){let _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,k){_.setAttribute("width","24"),_.setAttribute("id",k),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{O_=!0,o()},_}function f(_,k){_.setAttribute("id",k),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){let _=MS(r),k=t("text"),M=document.getElementById(k)||document.createElement("span"),$=t("learnmore"),L=document.getElementById($)||document.createElement("a"),oe=t("preprendIcon"),re=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let se=_.element;c(se),f(L,$);let Ce=d();l(re,oe),se.append(re,M,L,Ce),document.body.appendChild(se)}s?(M.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function NS(){var n;let e=(n=Hc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z_(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function H_(){return!NS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uo(){try{return typeof indexedDB=="object"}catch{return!1}}function G_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var OS="FirebaseError",Rt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}},Zt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Rt(i,c,r)}};function VS(n,e){return n.replace(LS,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var LS=/\{\$([^}]+)}/g;function W_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ut(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(V_(s)&&V_(o)){if(!Ut(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function V_(n){return n!==null&&typeof n=="object"}function Zi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function K_(n,e){let t=new Mh(n,e);return t.subscribe.bind(t)}var Mh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FS(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Dh),i.error===void 0&&(i.error=Dh),i.complete===void 0&&(i.complete=Dh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FS(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dh(){}var bN=4*60*60*1e3;function $e(n){return n&&n._delegate?n._delegate:n}var vt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var si="[DEFAULT]";var Fh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ii;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:si})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=si){return this.instances.has(e)}getOptions(e=si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:US(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=si){return this.component?this.component.multipleInstances?e:si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function US(n){return n===si?void 0:n}function jS(n){return n.instantiationMode==="EAGER"}var Kc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Fh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var BS=[],fe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(fe||{}),$S={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},qS=fe.INFO,zS={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},HS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vn=class{constructor(e){this.name=e,this._logLevel=qS,this._logHandler=HS,this._userLogHandler=null,BS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var GS=(n,e)=>e.some(t=>n instanceof t),Q_,Y_;function WS(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KS(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var J_=new WeakMap,jh=new WeakMap,X_=new WeakMap,Uh=new WeakMap,$h=new WeakMap;function QS(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(_n(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&J_.set(t,n)}).catch(()=>{}),$h.set(e,n),e}function YS(n){if(jh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});jh.set(n,e)}var Bh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||X_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _n(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Z_(n){Bh=n(Bh)}function JS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Qc(this),e,...t);return X_.set(r,e.sort?e.sort():[e]),_n(r)}:KS().includes(n)?function(...e){return n.apply(Qc(this),e),_n(J_.get(this))}:function(...e){return _n(n.apply(Qc(this),e))}}function XS(n){return typeof n=="function"?JS(n):(n instanceof IDBTransaction&&YS(n),GS(n,WS())?new Proxy(n,Bh):n)}function _n(n){if(n instanceof IDBRequest)return QS(n);if(Uh.has(n))return Uh.get(n);let e=XS(n);return e!==n&&(Uh.set(n,e),$h.set(e,n)),e}var Qc=n=>$h.get(n);function ty(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=_n(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_n(o.result),l.oldVersion,l.newVersion,_n(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var ZS=["get","getKey","getAll","getAllKeys","count"],eC=["put","add","delete","clear"],qh=new Map;function ey(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qh.get(e))return qh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=eC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZS.includes(t)))return;let s=function(o,...c){return w(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return qh.set(e,s),s}Z_(n=>pe(B({},n),{get:(e,t,r)=>ey(e,t)||n.get(e,t,r),has:(e,t)=>!!ey(e,t)||n.has(e,t)}));var Hh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tC(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function tC(n){let e=n.getComponent();return e?.type==="VERSION"}var Gh="@firebase/app",ny="0.13.1";var qn=new vn("@firebase/app"),nC="@firebase/app-compat",rC="@firebase/analytics-compat",iC="@firebase/analytics",sC="@firebase/app-check-compat",oC="@firebase/app-check",aC="@firebase/auth",cC="@firebase/auth-compat",lC="@firebase/database",uC="@firebase/data-connect",dC="@firebase/database-compat",hC="@firebase/functions",fC="@firebase/functions-compat",pC="@firebase/installations",mC="@firebase/installations-compat",gC="@firebase/messaging",vC="@firebase/messaging-compat",_C="@firebase/performance",yC="@firebase/performance-compat",wC="@firebase/remote-config",EC="@firebase/remote-config-compat",IC="@firebase/storage",bC="@firebase/storage-compat",TC="@firebase/firestore",SC="@firebase/ai",CC="@firebase/firestore-compat",AC="firebase",xC="11.9.0";var Wh="[DEFAULT]",kC={[Gh]:"fire-core",[nC]:"fire-core-compat",[iC]:"fire-analytics",[rC]:"fire-analytics-compat",[oC]:"fire-app-check",[sC]:"fire-app-check-compat",[aC]:"fire-auth",[cC]:"fire-auth-compat",[lC]:"fire-rtdb",[uC]:"fire-data-connect",[dC]:"fire-rtdb-compat",[hC]:"fire-fn",[fC]:"fire-fn-compat",[pC]:"fire-iid",[mC]:"fire-iid-compat",[gC]:"fire-fcm",[vC]:"fire-fcm-compat",[_C]:"fire-perf",[yC]:"fire-perf-compat",[wC]:"fire-rc",[EC]:"fire-rc-compat",[IC]:"fire-gcs",[bC]:"fire-gcs-compat",[TC]:"fire-fst",[CC]:"fire-fst-compat",[SC]:"fire-vertex","fire-js":"fire-js",[AC]:"fire-js-all"};var jo=new Map,RC=new Map,Kh=new Map;function ry(n,e){try{n.container.addComponent(e)}catch(t){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function en(n){let e=n.name;if(Kh.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,n);for(let t of jo.values())ry(t,n);for(let t of RC.values())ry(t,n);return!0}function es(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dt(n){return n==null?!1:n.settings!==void 0}var DC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Zt("app","Firebase",DC);var Qh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}};var Er=xC;function Xh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Wh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw wr.create("bad-app-name",{appName:String(i)});if(t||(t=Vh()),!t)throw wr.create("no-options");let s=jo.get(i);if(s){if(Ut(t,s.options)&&Ut(r,s.config))return s;throw wr.create("duplicate-app",{appName:i})}let o=new Kc(i);for(let l of Kh.values())o.addComponent(l);let c=new Qh(t,r,o);return jo.set(i,c),c}function oi(n=Wh){let e=jo.get(n);if(!e&&n===Wh&&Vh())return Xh();if(!e)throw wr.create("no-app",{appName:n});return e}function Yc(){return Array.from(jo.values())}function qe(n,e,t){var r;let i=(r=kC[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(c.join(" "));return}en(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var PC="firebase-heartbeat-database",MC=1,Bo="firebase-heartbeat-store",zh=null;function ay(){return zh||(zh=ty(PC,MC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bo)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),zh}function NC(n){return w(this,null,function*(){try{let t=(yield ay()).transaction(Bo),r=yield t.objectStore(Bo).get(cy(n));return yield t.done,r}catch(e){if(e instanceof Rt)qn.warn(e.message);else{let t=wr.create("idb-get",{originalErrorMessage:e?.message});qn.warn(t.message)}}})}function iy(n,e){return w(this,null,function*(){try{let r=(yield ay()).transaction(Bo,"readwrite");yield r.objectStore(Bo).put(e,cy(n)),yield r.done}catch(t){if(t instanceof Rt)qn.warn(t.message);else{let r=wr.create("idb-set",{originalErrorMessage:t?.message});qn.warn(r.message)}}})}function cy(n){return`${n.name}!${n.options.appId}`}var OC=1024,VC=30,Yh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Jh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>VC){let o=FC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=sy(),{heartbeatsToSend:r,unsentEntries:i}=LC(this._heartbeatsCache.heartbeats),s=Fo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return qn.warn(t),""}})}};function sy(){return new Date().toISOString().substring(0,10)}function LC(n,e=OC){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oy(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),oy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Jh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Uo()?G_().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield NC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function oy(n){return Fo(JSON.stringify({version:2,heartbeats:n})).length}function FC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function UC(n){en(new vt("platform-logger",e=>new Hh(e),"PRIVATE")),en(new vt("heartbeat",e=>new Yh(e),"PRIVATE")),qe(Gh,ny,n),qe(Gh,ny,"esm2017"),qe("fire-js","")}UC("");var jC="firebase",BC="11.9.1";qe(jC,BC,"app");function ly(n){n===void 0&&(n=K(Ct));let e=n.get(sc);return t=>new St(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),o()},complete:()=>{r.complete(),o()},error:l=>{r.error(l),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var Ir=new Hd("ANGULARFIRE2_VERSION");function $o(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ns=(n,e)=>{let t=e?[e]:Yc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ts=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ts||{}),uy=Gd()&&typeof Zone<"u"?ts.WARN:ts.SILENT;var Jc=class{zone;delegate;constructor(e,t=P0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},br=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=K(lt);this.outsideAngular=t.runOutsideAngular(()=>new Jc(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Jc(typeof Zone>"u"?void 0:Zone.current,D0))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dy=!1;function $C(n,e){!dy&&(uy>ts.SILENT||Gd())&&(dy=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),uy>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function qC(n){let e=K(lt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ai(n){let e=K(lt,{optional:!0});return e?e.run(()=>n()):n()}var zC=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Et(t,()=>ai(()=>n.apply(void 0,r)))),Ue=(n,e,t)=>(t||=e?ts.WARN:ts.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=K(br),o=K(sc),c=K(On)}catch{return $C(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=ai(()=>o.add())),i[d]=zC(i[d],r,c));let l=qC(()=>n.apply(this,i));return e?l instanceof St?l.pipe(Dd(s.outsideAngular),Rd(s.insideAngular),ly(c)):l instanceof Promise?ai(()=>{let d=o.add();return new Promise((f,v)=>{l.then(_=>Et(c,()=>ai(()=>f(_))),_=>Et(c,()=>ai(()=>v(_)))).finally(d)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ai(()=>l):l instanceof St?l.pipe(Dd(s.outsideAngular),Rd(s.insideAngular)):ai(()=>l)});var zn=class{constructor(e){return e}},ci=class{constructor(){return Yc()}};function HC(n){return n&&n.length===1?n[0]:new zn(oi())}var Zh=new we("angularfire2._apps"),GC={provide:zn,useFactory:HC,deps:[[new Vt,Zh]]},WC={provide:ci,deps:[[new Vt,Zh]]};function KC(n){return(e,t)=>{let r=t.get(Wr);qe("angularfire",Ir.full,"core"),qe("angularfire",Ir.full,"app"),qe("angular",dv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new zn(i)}}function hy(n,...e){return lr([GC,WC,{provide:Zh,useFactory:KC(n),multi:!0,deps:[lt,Ct,br,...e]}])}var fy=Ue(Xh,!0);var QC=new Map,YC={activated:!1,tokenObservers:[]},JC={initialized:!1,enabled:!1};function tn(n){return QC.get(n)||Object.assign({},YC)}function vy(){return JC}var XC="https://content-firebaseappcheck.googleapis.com/v1";var ZC="exchangeDebugToken",py={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},CO=24*60*60*1e3;var nf=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new ii,this.pending.promise.catch(t=>{}),yield eA(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ii,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function eA(n){return new Promise(e=>{setTimeout(e,n)})}var tA={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Tr=new Zt("appCheck","AppCheck",tA);function _y(n){if(!tn(n).activated)throw Tr.create("use-before-activation",{appName:n.name})}function yy(r,i){return w(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let k=yield o.getHeartbeatsHeader();k&&(s["X-Firebase-Client"]=k)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(k){throw Tr.create("fetch-network-error",{originalErrorMessage:k?.message})}if(l.status!==200)throw Tr.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(k){throw Tr.create("fetch-parse-error",{originalErrorMessage:k?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Tr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let v=Number(f[1])*1e3,_=Date.now();return{token:d.token,expireTimeMillis:_+v,issuedAtTimeMillis:_}})}function wy(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${XC}/projects/${t}/apps/${r}:${ZC}?key=${i}`,body:{debug_token:e}}}var nA="firebase-app-check-database",rA=1,rf="firebase-app-check-store";var Xc=null;function iA(){return Xc||(Xc=new Promise((n,e)=>{try{let t=indexedDB.open(nA,rA);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Tr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rf,{keyPath:"compositeKey"})}}}catch(t){e(Tr.create("storage-open",{originalErrorMessage:t?.message}))}}),Xc)}function sA(n,e){return oA(aA(n),e)}function oA(n,e){return w(this,null,function*(){let r=(yield iA()).transaction(rf,"readwrite"),s=r.objectStore(rf).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var d;c(Tr.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function aA(n){return`${n.options.appId}-${n.name}`}var qo=new vn("@firebase/app-check");function ef(n,e){return Uo()?sA(n,e).catch(t=>{qo.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ey(){return vy().enabled}function Iy(){return w(this,null,function*(){let n=vy();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var cA={error:"UNKNOWN_ERROR"};function lA(n){return qc.encodeString(JSON.stringify(n),!1)}function sf(n,e=!1,t=!1){return w(this,null,function*(){let r=n.app;_y(r);let i=tn(r),s=i.token,o;if(s&&!zo(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(zo(d)?s=d:yield ef(r,void 0))}if(!e&&s&&zo(s))return{token:s.token};let c=!1;if(Ey())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=yy(wy(r,yield Iy()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield ef(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?qo.warn(d.message):t&&qo.error(d),tf(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield tn(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?qo.warn(d.message):t&&qo.error(d),o=d}let l;return s?o?zo(s)?l={token:s.token,internalError:o}:l=tf(o):(l={token:s.token},i.token=s,yield ef(r,s)):l=tf(o),c&&fA(r,l),l})}function uA(n){return w(this,null,function*(){let e=n.app;_y(e);let{provider:t}=tn(e);if(Ey()){let r=yield Iy(),{token:i}=yield yy(wy(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function dA(n,e,t,r){let{app:i}=n,s=tn(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&zo(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),my(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>my(n))}function by(n,e){let t=tn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function my(n){let{app:e}=n,t=tn(e),r=t.tokenRefresher;r||(r=hA(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hA(n){let{app:e}=n;return new nf(()=>w(null,null,function*(){let t=tn(e),r;if(t.token?r=yield sf(n,!0):r=yield sf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},py.RETRIAL_MIN_WAIT,py.RETRIAL_MAX_WAIT)}function fA(n,e){let t=tn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function zo(n){return n.expireTimeMillis-Date.now()>0}function tf(n){return{token:lA(cA),error:n}}var of=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tn(this.app);for(let t of e)by(this.app,t.next);return Promise.resolve()}};function pA(n,e){return new of(n,e)}function mA(n){return{getToken:e=>sf(n,e),getLimitedUseToken:()=>uA(n),addTokenListener:e=>dA(n,"INTERNAL",e),removeTokenListener:e=>by(n.app,e)}}var gA="@firebase/app-check",vA="0.10.0";var _A="app-check",gy="app-check-internal";function yA(){en(new vt(_A,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return pA(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gy).initialize()})),en(new vt(gy,n=>{let e=n.getProvider("app-check").getImmediate();return mA(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qe(gA,vA)}yA();var wA="app-check";var rs=class{constructor(){return ns(wA)}};var EA=["localhost","0.0.0.0","127.0.0.1"],UO=typeof window<"u"&&EA.includes(window.location.hostname);function Fy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Uy=Fy,jy=new Zt("auth","Firebase",Fy());var il=new vn("@firebase/auth");function IA(n,...e){il.logLevel<=fe.WARN&&il.warn(`Auth (${Er}): ${n}`,...e)}function el(n,...e){il.logLevel<=fe.ERROR&&il.error(`Auth (${Er}): ${n}`,...e)}function wn(n,...e){throw Tf(n,...e)}function nn(n,...e){return Tf(n,...e)}function bf(n,e,t){let r=Object.assign(Object.assign({},Uy()),{[e]:t});return new Zt("auth","Firebase",r).create(e,{appName:n.name})}function li(n){return bf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bA(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wn(n,"argument-error"),bf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tf(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jy.create(n,...e)}function ne(n,e,...t){if(!n)throw Tf(e,...t)}function Hn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw el(e),new Error(e)}function Wn(n,e){n||Hn(e)}function lf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function TA(){return Ty()==="http:"||Ty()==="https:"}function Ty(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function SA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TA()||$_()||"connection"in navigator)?navigator.onLine:!0}function CA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ui=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wn(t>e,"Short delay should be less than long delay!"),this.isMobile=j_()||q_()}get(){return SA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Sf(n,e){Wn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var sl=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kA=new ui(3e4,6e4);function Cf(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ss(s,o,c,l){return w(this,arguments,function*(n,e,t,r,i={}){return By(n,i,()=>w(null,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let v=Zi(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let k=Object.assign({method:e,headers:_},d);return B_()||(k.referrerPolicy="no-referrer"),n.emulatorConfig&&yr(n.emulatorConfig.host)&&(k.credentials="include"),sl.fetch()(yield $y(n,n.config.apiHost,t,v),k)}))})}function By(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AA),e);try{let i=new uf(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zc(n,"user-disabled",o);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bf(n,f,d);wn(n,f)}}catch(i){if(i instanceof Rt)throw i;wn(n,"network-request-failed",{message:String(i)})}})}function RA(s,o,c,l){return w(this,arguments,function*(n,e,t,r,i={}){let d=yield ss(n,e,t,r,i);return"mfaPendingCredential"in d&&wn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function $y(n,e,t,r){return w(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Sf(n.config,i):`${n.config.apiScheme}://${i}`;return xA.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var uf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nn(this.auth,"network-request-failed")),kA.get())})}};function Zc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=nn(n,e,r);return i.customData._tokenResponse=t,i}function DA(n,e){return w(this,null,function*(){return ss(n,"POST","/v1/accounts:delete",e)})}function ol(n,e){return w(this,null,function*(){return ss(n,"POST","/v1/accounts:lookup",e)})}function Ho(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Af(n,e=!1){return w(this,null,function*(){let t=$e(n),r=yield t.getIdToken(e),i=xf(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ho(af(i.auth_time)),issuedAtTime:Ho(af(i.iat)),expirationTime:Ho(af(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function af(n){return Number(n)*1e3}function xf(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{let i=zc(t);return i?JSON.parse(i):(el("Failed to decode base64 JWT payload"),null)}catch(i){return el("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Sy(n){let e=xf(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Wo(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Rt&&PA(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function PA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var df=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ko=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function al(n){return w(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Wo(n,ol(t,{idToken:r}));ne(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qy(s.providerUserInfo):[],c=MA(n.providerData,o),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=l?d:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ko(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,v)})}function kf(n){return w(this,null,function*(){let e=$e(n);yield al(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function MA(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qy(n){return n.map(e=>{var{providerId:t}=e,r=ec(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function NA(n,e){return w(this,null,function*(){let t=yield By(n,{},()=>w(null,null,function*(){let r=Zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield $y(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&yr(n.emulatorConfig.host)&&(l.credentials="include"),sl.fetch()(o,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function OA(n,e){return w(this,null,function*(){return ss(n,"POST","/v2/accounts:revokeToken",Cf(n,e))})}var Go=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let t=Sy(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield NA(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Hn("not implemented")}};function Sr(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ec(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new df(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ko(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield Wo(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Af(this,e)}reload(){return kf(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield al(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Dt(this.auth.app))return Promise.reject(li(this.auth));let e=yield this.getIdToken();return yield Wo(this,DA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,d,f;let v=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,k=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,M=(o=t.photoURL)!==null&&o!==void 0?o:void 0,$=(c=t.tenantId)!==null&&c!==void 0?c:void 0,L=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,oe=(d=t.createdAt)!==null&&d!==void 0?d:void 0,re=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:se,emailVerified:Ce,isAnonymous:ht,providerData:be,stsTokenManager:S}=t;ne(se&&S,e,"internal-error");let y=Go.fromJSON(this.name,S);ne(typeof se=="string",e,"internal-error"),Sr(v,e.name),Sr(_,e.name),ne(typeof Ce=="boolean",e,"internal-error"),ne(typeof ht=="boolean",e,"internal-error"),Sr(k,e.name),Sr(M,e.name),Sr($,e.name),Sr(L,e.name),Sr(oe,e.name),Sr(re,e.name);let I=new n({uid:se,auth:e,email:_,emailVerified:Ce,displayName:v,isAnonymous:ht,photoURL:M,phoneNumber:k,tenantId:$,stsTokenManager:y,createdAt:oe,lastLoginAt:re});return be&&Array.isArray(be)&&(I.providerData=be.map(T=>Object.assign({},T))),L&&(I._redirectEventId=L),I}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new Go;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield al(s),s})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?qy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Go;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ko(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var Cy=new Map;function Gn(n){Wn(n instanceof Function,"Expected a class definition");let e=Cy.get(n);return e?(Wn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Cy.set(n,e),e)}var VA=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),hf=VA;function tl(n,e,t){return`firebase:${n}:${e}:${t}`}var cl=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=tl(this.userKey,i.apiKey,s),this.fullPersistenceKey=tl("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ol(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n(Gn(hf),e,r);let i=(yield Promise.all(t.map(d=>w(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Gn(hf),o=tl(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let v;if(typeof f=="string"){let _=yield ol(e,{idToken:f}).catch(()=>{});if(!_)break;v=yield Cr._fromGetAccountInfoResponse(e,_,f)}else v=Cr._fromJSON(e,f);d!==s&&(c=v),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>w(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function Ay(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qy(e))return"Blackberry";if(Yy(e))return"Webos";if(Hy(e))return"Safari";if((e.includes("chrome/")||Gy(e))&&!e.includes("edge/"))return"Chrome";if(Ky(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function zy(n=Ze()){return/firefox\//i.test(n)}function Hy(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gy(n=Ze()){return/crios\//i.test(n)}function Wy(n=Ze()){return/iemobile/i.test(n)}function Ky(n=Ze()){return/android/i.test(n)}function Qy(n=Ze()){return/blackberry/i.test(n)}function Yy(n=Ze()){return/webos/i.test(n)}function Rf(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LA(n=Ze()){var e;return Rf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FA(){return z_()&&document.documentMode===10}function Jy(n=Ze()){return Rf(n)||Ky(n)||Yy(n)||Qy(n)||/windows phone/i.test(n)||Wy(n)}function Xy(n,e=[]){let t;switch(n){case"Browser":t=Ay(Ze());break;case"Worker":t=`${Ay(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Er}/${r}`}var ff=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function UA(t){return w(this,arguments,function*(n,e={}){return ss(n,"GET","/v2/passwordPolicy",Cf(n,e))})}var jA=6,pf=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:jA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mf=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ll(this),this.idTokenSubscription=new ll(this),this.beforeStateQueue=new ff(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gn(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield cl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield ol(this,{idToken:e}),r=yield Cr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var t;if(Dt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield al(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=CA()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Dt(this.app))return Promise.reject(li(this));let t=e?$e(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Dt(this.app)?Promise.reject(li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dt(this.app)?Promise.reject(li(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Gn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield UA(this),t=new pf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield OA(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Gn(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=yield cl.create(this,[Gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return w(this,null,function*(){var e;if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&IA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vl(n){return $e(n)}var ll=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=K_(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Df={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BA(n){Df=n}function $A(n){return Df.loadJS(n)}function qA(){return Df.gapiScript}function Zy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Pf(n,e){let t=es(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Ut(s,e??{}))return i;wn(i,"already-initialized")}return t.initialize({options:e})}function zA(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Mf(n,e,t){let r=vl(n);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=ew(e),{host:o,port:c}=HA(e),l=c===null?"":`:${c}`,d={url:`${s}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Ut(d,r.config.emulator)&&Ut(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,yr(o)?(Gc(`${s}//${o}${l}`),Wc("Auth",!0)):i||GA()}function ew(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function HA(n){let e=ew(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:xy(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:xy(o)}}}function xy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function GA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,t){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}};function is(n,e){return w(this,null,function*(){return RA(n,"POST","/v1/accounts:signInWithIdp",Cf(n,e))})}var WA="http://localhost",ul=class n extends Qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ec(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return is(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,is(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,is(e,t)}buildRequest(){let e={requestUri:WA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zi(t)}return e}};var Yo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var dl=class extends Yo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Nf=(()=>{class n extends dl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ul._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Jo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return w(this,null,function*(){let s=yield Cr._fromIdTokenResponse(e,r,i),o=ky(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ky(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function ky(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var gf=class n extends Rt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function tw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,s,e,r):s})}function KA(n,e,t=!1){return w(this,null,function*(){let r=yield Wo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Jo._forOperation(n,"link",r)})}function QA(n,e,t=!1){return w(this,null,function*(){let{auth:r}=n;if(Dt(r.app))return Promise.reject(li(r));let i="reauthenticate";try{let s=yield Wo(n,tw(r,i,e,n),t);ne(s.idToken,r,"internal-error");let o=xf(s.idToken);ne(o,r,"internal-error");let{sub:c}=o;return ne(n.uid===c,r,"user-mismatch"),Jo._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&wn(r,"user-mismatch"),s}})}function YA(n,e,t=!1){return w(this,null,function*(){if(Dt(n.app))return Promise.reject(li(n));let r="signIn",i=yield tw(n,r,e),s=yield Jo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Zo(n,e,t,r){return $e(n).onIdTokenChanged(e,t,r)}function Of(n,e,t){return $e(n).beforeAuthStateChanged(e,t)}function Vf(n){return $e(n).signOut()}var hl="__sak";var fl=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hl,"1"),this.storage.removeItem(hl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var JA=1e3,XA=10,ZA=(()=>{class n extends fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jy(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);FA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,XA):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return w(this,null,function*(){yield or(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return w(this,null,function*(){let r=yield or(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return w(this,null,function*(){yield or(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),nw=ZA;var ex=(()=>{class n extends fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Lf=ex;function tx(n){return Promise.all(n.map(e=>w(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var nx=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return w(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(f=>w(this,null,function*(){return f(r.origin,o)})),d=yield tx(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Ff(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var vf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=Ff("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){let _=v;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function yn(){return window}function rx(n){yn().location.href=n}function rw(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}function ix(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function sx(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ox(){return rw()?self:null}var iw="firebaseLocalStorageDb",ax=1,pl="firebaseLocalStorage",sw="fbase_key",di=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function _l(n,e){return n.transaction([pl],e?"readwrite":"readonly").objectStore(pl)}function cx(){let n=indexedDB.deleteDatabase(iw);return new di(n).toPromise()}function _f(){let n=indexedDB.open(iw,ax);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(pl,{keyPath:sw})}catch(i){t(i)}}),n.addEventListener("success",()=>w(null,null,function*(){let r=n.result;r.objectStoreNames.contains(pl)?e(r):(r.close(),yield cx(),e(yield _f()))}))})}function Ry(n,e,t){return w(this,null,function*(){let r=_l(n,!0).put({[sw]:e,value:t});return new di(r).toPromise()})}function lx(n,e){return w(this,null,function*(){let t=_l(n,!1).get(e),r=yield new di(t).toPromise();return r===void 0?null:r.value})}function Dy(n,e){let t=_l(n,!0).delete(e);return new di(t).toPromise()}var ux=800,dx=3,hx=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield _f(),this.db)})}_withRetries(t){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>dx)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return rw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=nx._getInstance(ox()),this.receiver._subscribe("keyChanged",(t,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var t,r;if(this.activeServiceWorker=yield ix(),!this.activeServiceWorker)return;this.sender=new vf(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||sx()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let t=yield _f();return yield Ry(t,hl,"1"),yield Dy(t,hl),!0}catch{}return!1})}_withPendingWrite(t){return w(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Ry(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return w(this,null,function*(){let r=yield this._withRetries(i=>lx(i,t));return this.localCache[t]=r,r})}_remove(t){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>Dy(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return w(this,null,function*(){let t=yield this._withRetries(s=>{let o=_l(s,!1).getAll();return new di(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),ux)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ow=hx;var QO=Zy("rcb"),YO=new ui(3e4,6e4);function aw(n,e){return e?Gn(e):(ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xo=class extends Qo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return is(e,this._buildIdpRequest())}_linkToIdToken(e,t){return is(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return is(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function fx(n){return YA(n.auth,new Xo(n),n.bypassAuthState)}function px(n){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),QA(t,new Xo(n),n.bypassAuthState)}function mx(n){return w(this,null,function*(){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),KA(t,new Xo(n),n.bypassAuthState)})}var ml=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fx;case"linkViaPopup":case"linkViaRedirect":return mx;case"reauthViaPopup":case"reauthViaRedirect":return px;default:wn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var gx=new ui(2e3,1e4);function Uf(n,e,t){return w(this,null,function*(){if(Dt(n.app))return Promise.reject(nn(n,"operation-not-supported-in-this-environment"));let r=vl(n);bA(n,e,Yo);let i=aw(r,t);return new vx(r,"signInViaPopup",e,i).executeNotNull()})}var vx=(()=>{class n extends ml{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let t=yield this.execute();return ne(t,this.auth,"internal-error"),t})}onExecution(){return w(this,null,function*(){Wn(this.filter.length===1,"Popup operations only handle one event");let t=Ff();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gx.get())};t()}}n.currentPopupAction=null;return n})(),_x="pendingRedirect",nl=new Map,yf=class n extends ml{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=nl.get(this.auth._key());if(!e){try{let r=(yield yx(this.resolver,this.auth))?yield or(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return or(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,or(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function yx(n,e){return w(this,null,function*(){let t=Ix(e),r=Ex(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function wx(n,e){nl.set(n._key(),e)}function Ex(n){return Gn(n._redirectPersistence)}function Ix(n){return tl(_x,n.config.apiKey,n.name)}function bx(n,e,t=!1){return w(this,null,function*(){if(Dt(n.app))return Promise.reject(li(n));let r=vl(n),i=aw(r,e),o=yield new yf(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Tx=10*60*1e3,wf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!cw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(nn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}};function Py(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Sx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cw(n);default:return!1}}function Cx(t){return w(this,arguments,function*(n,e={}){return ss(n,"GET","/v1/projects",e)})}var Ax=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xx=/^https?/;function kx(n){return w(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Cx(n);for(let t of e)try{if(Rx(t))return}catch{}wn(n,"unauthorized-domain")})}function Rx(n){let e=lf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!xx.test(t))return!1;if(Ax.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Dx=new ui(3e4,6e4);function My(){let n=yn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Px(n){return new Promise((e,t)=>{var r,i,s;function o(){My(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{My(),t(nn(n,"network-request-failed"))},timeout:Dx.get()})}if(!((i=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=yn().gapi)===null||s===void 0)&&s.load)o();else{let c=Zy("iframefcb");return yn()[c]=()=>{gapi.load?o():t(nn(n,"network-request-failed"))},$A(`${qA()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw rl=null,e})}var rl=null;function Mx(n){return rl=rl||Px(n),rl}var Nx=new ui(5e3,15e3),Ox="__/auth/iframe",Vx="emulator/auth/iframe",Lx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ux(n){let e=n.config;ne(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Sf(e,Vx):`https://${n.config.authDomain}/${Ox}`,r={apiKey:e.apiKey,appName:n.name,v:Er},i=Fx.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Zi(r).slice(1)}`}function jx(n){return w(this,null,function*(){let e=yield Mx(n),t=yn().gapi;return ne(t,n,"internal-error"),e.open({where:document.body,url:Ux(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lx,dontclear:!0},r=>new Promise((i,s)=>w(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=nn(n,"network-request-failed"),c=yn().setTimeout(()=>{s(o)},Nx.get());function l(){yn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var Bx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$x=500,qx=600,zx="_blank",Hx="http://localhost",gl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Gx(n,e,t,r=$x,i=qx){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},Bx),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Ze().toLowerCase();t&&(c=Gy(d)?zx:t),zy(d)&&(e=e||Hx,l.scrollbars="yes");let f=Object.entries(l).reduce((_,[k,M])=>`${_}${k}=${M},`,"");if(LA(d)&&c!=="_self")return Wx(e||"",c),new gl(null);let v=window.open(e||"",c,f);ne(v,n,"popup-blocked");try{v.focus()}catch{}return new gl(v)}function Wx(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Kx="__/auth/handler",Qx="emulator/auth/handler",Yx=encodeURIComponent("fac");function Ny(n,e,t,r,i,s){return w(this,null,function*(){ne(n.config.authDomain,n,"auth-domain-config-required"),ne(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Er,eventId:i};if(e instanceof Yo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",W_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,v]of Object.entries(s||{}))o[f]=v}if(e instanceof dl){let f=e.getScopes().filter(v=>v!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?`#${Yx}=${encodeURIComponent(l)}`:"";return`${Jx(n)}?${Zi(c).slice(1)}${d}`})}function Jx({config:n}){return n.emulator?Sf(n,Qx):`https://${n.authDomain}/${Kx}`}var cf="webStorageSupport",Ef=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lf,this._completeRedirectFn=bx,this._overrideRedirectResult=wx}_openPopup(e,t,r,i){return w(this,null,function*(){var s;Wn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Ny(e,t,r,lf(),i);return Gx(e,o,Ff())})}_openRedirect(e,t,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield Ny(e,t,r,lf(),i);return rx(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Wn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return w(this,null,function*(){let t=yield jx(e),r=new wf(e);return t.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cf,{type:cf},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[cf];o!==void 0&&t(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jy()||Hy()||Rf()}},lw=Ef;var Oy="@firebase/auth",Vy="1.10.7";var If=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Xx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zx(n){en(new vt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xy(n)},d=new mf(r,i,s,l);return zA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),en(new vt("auth-internal",e=>{let t=vl(e.getProvider("auth").getImmediate());return(r=>new If(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qe(Oy,Vy,Xx(n)),qe(Oy,Vy,"esm2017")}var ek=5*60,tk=Lh("authIdTokenMaxAge")||ek,Ly=null,nk=n=>e=>w(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tk)return;let i=t?.token;Ly!==i&&(Ly=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jf(n=oi()){let e=es(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Pf(n,{popupRedirectResolver:lw,persistence:[ow,nw,Lf]}),r=Lh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=nk(s.toString());Of(t,o,()=>o(t.currentUser)),Zo(t,c=>o(c))}}let i=Oh("auth");return i&&Mf(t,`http://${i}`),t}function rk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}BA({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=nn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",rk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zx("Browser");function hw(n){return new St(function(e){var t=Zo(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var fw="auth",hi=class{constructor(e){return e}},ea=class{constructor(){return ns(fw)}};var Bf=new we("angularfire2.auth-instances");function Gk(n,e){let t=$o(fw,n,e);return t&&new hi(t)}function Wk(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hi(r)}}var Kk={provide:ea,deps:[[new Vt,Bf]]},Qk={provide:hi,useFactory:Gk,deps:[[new Vt,Bf],zn]};function pw(n,...e){return qe("angularfire",Ir.full,"auth"),lr([Qk,Kk,{provide:Bf,useFactory:Wk(n),multi:!0,deps:[lt,Ct,br,ci,[new Vt,rs],...e]}])}var mw=Ue(hw,!0);var gw=Ue(jf,!0);var vw=Ue(Uf,!0,2);var _w=Ue(Vf,!0,2);var yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ww={};var Kn,$f;(function(){var n;function e(S,y){function I(){}I.prototype=y.prototype,S.D=y.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(T,C,x){for(var E=Array(arguments.length-2),Rn=2;Rn<arguments.length;Rn++)E[Rn-2]=arguments[Rn];return y.prototype[C].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)T[C]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(C=0;16>C;++C)T[C]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=S.g[0],I=S.g[1],C=S.g[2];var x=S.g[3],E=y+(x^I&(C^x))+T[0]+3614090360&4294967295;y=I+(E<<7&4294967295|E>>>25),E=x+(C^y&(I^C))+T[1]+3905402710&4294967295,x=y+(E<<12&4294967295|E>>>20),E=C+(I^x&(y^I))+T[2]+606105819&4294967295,C=x+(E<<17&4294967295|E>>>15),E=I+(y^C&(x^y))+T[3]+3250441966&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(x^I&(C^x))+T[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(C^y&(I^C))+T[5]+1200080426&4294967295,x=y+(E<<12&4294967295|E>>>20),E=C+(I^x&(y^I))+T[6]+2821735955&4294967295,C=x+(E<<17&4294967295|E>>>15),E=I+(y^C&(x^y))+T[7]+4249261313&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(x^I&(C^x))+T[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(C^y&(I^C))+T[9]+2336552879&4294967295,x=y+(E<<12&4294967295|E>>>20),E=C+(I^x&(y^I))+T[10]+4294925233&4294967295,C=x+(E<<17&4294967295|E>>>15),E=I+(y^C&(x^y))+T[11]+2304563134&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(x^I&(C^x))+T[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(C^y&(I^C))+T[13]+4254626195&4294967295,x=y+(E<<12&4294967295|E>>>20),E=C+(I^x&(y^I))+T[14]+2792965006&4294967295,C=x+(E<<17&4294967295|E>>>15),E=I+(y^C&(x^y))+T[15]+1236535329&4294967295,I=C+(E<<22&4294967295|E>>>10),E=y+(C^x&(I^C))+T[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^C&(y^I))+T[6]+3225465664&4294967295,x=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(x^y))+T[11]+643717713&4294967295,C=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(C^x))+T[0]+3921069994&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^x&(I^C))+T[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^C&(y^I))+T[10]+38016083&4294967295,x=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(x^y))+T[15]+3634488961&4294967295,C=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(C^x))+T[4]+3889429448&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^x&(I^C))+T[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^C&(y^I))+T[14]+3275163606&4294967295,x=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(x^y))+T[3]+4107603335&4294967295,C=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(C^x))+T[8]+1163531501&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(C^x&(I^C))+T[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^C&(y^I))+T[2]+4243563512&4294967295,x=y+(E<<9&4294967295|E>>>23),E=C+(y^I&(x^y))+T[7]+1735328473&4294967295,C=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(C^x))+T[12]+2368359562&4294967295,I=C+(E<<20&4294967295|E>>>12),E=y+(I^C^x)+T[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^C)+T[8]+2272392833&4294967295,x=y+(E<<11&4294967295|E>>>21),E=C+(x^y^I)+T[11]+1839030562&4294967295,C=x+(E<<16&4294967295|E>>>16),E=I+(C^x^y)+T[14]+4259657740&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^x)+T[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^C)+T[4]+1272893353&4294967295,x=y+(E<<11&4294967295|E>>>21),E=C+(x^y^I)+T[7]+4139469664&4294967295,C=x+(E<<16&4294967295|E>>>16),E=I+(C^x^y)+T[10]+3200236656&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^x)+T[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^C)+T[0]+3936430074&4294967295,x=y+(E<<11&4294967295|E>>>21),E=C+(x^y^I)+T[3]+3572445317&4294967295,C=x+(E<<16&4294967295|E>>>16),E=I+(C^x^y)+T[6]+76029189&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(I^C^x)+T[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^C)+T[12]+3873151461&4294967295,x=y+(E<<11&4294967295|E>>>21),E=C+(x^y^I)+T[15]+530742520&4294967295,C=x+(E<<16&4294967295|E>>>16),E=I+(C^x^y)+T[2]+3299628645&4294967295,I=C+(E<<23&4294967295|E>>>9),E=y+(C^(I|~x))+T[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~C))+T[7]+1126891415&4294967295,x=y+(E<<10&4294967295|E>>>22),E=C+(y^(x|~I))+T[14]+2878612391&4294967295,C=x+(E<<15&4294967295|E>>>17),E=I+(x^(C|~y))+T[5]+4237533241&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~x))+T[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~C))+T[3]+2399980690&4294967295,x=y+(E<<10&4294967295|E>>>22),E=C+(y^(x|~I))+T[10]+4293915773&4294967295,C=x+(E<<15&4294967295|E>>>17),E=I+(x^(C|~y))+T[1]+2240044497&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~x))+T[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~C))+T[15]+4264355552&4294967295,x=y+(E<<10&4294967295|E>>>22),E=C+(y^(x|~I))+T[6]+2734768916&4294967295,C=x+(E<<15&4294967295|E>>>17),E=I+(x^(C|~y))+T[13]+1309151649&4294967295,I=C+(E<<21&4294967295|E>>>11),E=y+(C^(I|~x))+T[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~C))+T[11]+3174756917&4294967295,x=y+(E<<10&4294967295|E>>>22),E=C+(y^(x|~I))+T[2]+718787259&4294967295,C=x+(E<<15&4294967295|E>>>17),E=I+(x^(C|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var I=y-this.blockSize,T=this.B,C=this.h,x=0;x<y;){if(C==0)for(;x<=I;)i(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<y;)if(T[C++]=S.charCodeAt(x++),C==this.blockSize){i(this,T),C=0;break}}else for(;x<y;)if(T[C++]=S[x++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var I=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=I&255,I/=256;for(this.u(S),S=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)S[I++]=this.g[y]>>>T&255;return S};function s(S,y){var I=c;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=y(S)}function o(S,y){this.h=y;for(var I=[],T=!0,C=S.length-1;0<=C;C--){var x=S[C]|0;T&&x==y||(I[C]=x,T=!1)}this.g=I}var c={};function l(S){return-128<=S&&128>S?s(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return L(d(-S));for(var y=[],I=1,T=0;S>=I;T++)y[T]=S/I|0,I*=4294967296;return new o(y,0)}function f(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return L(f(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),T=v,C=0;C<S.length;C+=8){var x=Math.min(8,S.length-C),E=parseInt(S.substring(C,C+x),y);8>x?(x=d(Math.pow(y,x)),T=T.j(x).add(d(E))):(T=T.j(I),T=T.add(d(E)))}return T}var v=l(0),_=l(1),k=l(16777216);n=o.prototype,n.m=function(){if($(this))return-L(this).m();for(var S=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if($(this))return"-"+L(this).toString(S);for(var y=d(Math.pow(S,6)),I=this,T="";;){var C=Ce(I,y).g;I=oe(I,C.j(y));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=C,M(I))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function $(S){return S.h==-1}n.l=function(S){return S=oe(this,S),$(S)?-1:M(S)?0:1};function L(S){for(var y=S.g.length,I=[],T=0;T<y;T++)I[T]=~S.g[T];return new o(I,~S.h).add(_)}n.abs=function(){return $(this)?L(this):this},n.add=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],T=0,C=0;C<=y;C++){var x=T+(this.i(C)&65535)+(S.i(C)&65535),E=(x>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);T=E>>>16,x&=65535,E&=65535,I[C]=E<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function oe(S,y){return S.add(L(y))}n.j=function(S){if(M(this)||M(S))return v;if($(this))return $(S)?L(this).j(L(S)):L(L(this).j(S));if($(S))return L(this.j(L(S)));if(0>this.l(k)&&0>S.l(k))return d(this.m()*S.m());for(var y=this.g.length+S.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<S.g.length;C++){var x=this.i(T)>>>16,E=this.i(T)&65535,Rn=S.i(C)>>>16,$s=S.i(C)&65535;I[2*T+2*C]+=E*$s,re(I,2*T+2*C),I[2*T+2*C+1]+=x*$s,re(I,2*T+2*C+1),I[2*T+2*C+1]+=E*Rn,re(I,2*T+2*C+1),I[2*T+2*C+2]+=x*Rn,re(I,2*T+2*C+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function re(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function se(S,y){this.g=S,this.h=y}function Ce(S,y){if(M(y))throw Error("division by zero");if(M(S))return new se(v,v);if($(S))return y=Ce(L(S),y),new se(L(y.g),L(y.h));if($(y))return y=Ce(S,L(y)),new se(L(y.g),y.h);if(30<S.g.length){if($(S)||$(y))throw Error("slowDivide_ only works with positive integers.");for(var I=_,T=y;0>=T.l(S);)I=ht(I),T=ht(T);var C=be(I,1),x=be(T,1);for(T=be(T,2),I=be(I,2);!M(T);){var E=x.add(T);0>=E.l(S)&&(C=C.add(I),x=E),T=be(T,1),I=be(I,1)}return y=oe(S,C.j(y)),new se(C,y)}for(C=v;0<=S.l(y);){for(I=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=d(I),E=x.j(y);$(E)||0<E.l(S);)I-=T,x=d(I),E=x.j(y);M(x)&&(x=_),C=C.add(x),S=oe(S,E)}return new se(C,S)}n.A=function(S){return Ce(this,S).h},n.and=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&S.i(T);return new o(I,this.h&S.h)},n.or=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|S.i(T);return new o(I,this.h|S.h)},n.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^S.i(T);return new o(I,this.h^S.h)};function ht(S){for(var y=S.g.length+1,I=[],T=0;T<y;T++)I[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(I,S.h)}function be(S,y){var I=y>>5;y%=32;for(var T=S.g.length-I,C=[],x=0;x<T;x++)C[x]=0<y?S.i(x+I)>>>y|S.i(x+I+1)<<32-y:S.i(x+I);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$f=ww.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Kn=ww.Integer=o}).apply(typeof yw<"u"?yw:typeof self<"u"?self:typeof window<"u"?window:{});var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={};var qf,Jk,os,zf,ta,wl,Hf,Gf,Wf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof yl=="object"&&yl];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var A=a[m];if(!(A in h))break e;h=h[A]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,m=!1,A={next:function(){if(!m&&h<a.length){var D=h++;return{value:u(D,a[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function v(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function _(a,u,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:v,_.apply(null,arguments)}function k(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function M(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,A,D){for(var j=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)j[Ae-2]=arguments[Ae];return u.prototype[A].apply(m,j)}}function $(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function L(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let A=a.length||0,D=m.length||0;a.length=A+D;for(let j=0;j<D;j++)a[A+j]=m[j]}else a.push(m)}}class oe{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function re(a){return/^[\s\xa0]*$/.test(a)}function se(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ce(a){return Ce[" "](a),a}Ce[" "]=function(){};var ht=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function be(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function S(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function y(a){let u={};for(let h in a)u[h]=a[h];return u}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,u){let h,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(h in m)a[h]=m[h];for(let D=0;D<I.length;D++)h=I[D],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function C(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function x(a){c.setTimeout(()=>{throw a},0)}function E(){var a=nd;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Rn{constructor(){this.h=this.g=null}add(u,h){let m=$s.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var $s=new oe(()=>new Wb,a=>a.reset());class Wb{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let qs,zs=!1,nd=new Rn,kg=()=>{let a=c.Promise.resolve(void 0);qs=()=>{a.then(Kb)}};var Kb=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(h){x(h)}var u=$s;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}zs=!1};function nr(){this.s=this.s,this.C=this.C}nr.prototype.s=!1,nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var Qb=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Hs(a,u){if(it.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(ht){e:{try{Ce(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Yb[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Hs.aa.h.call(this)}}M(Hs,it);var Yb={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Gs="closure_listenable_"+(1e6*Math.random()|0),Jb=0;function Xb(a,u,h,m,A){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=A,this.key=++Jb,this.da=this.fa=!1}function Va(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function La(a){this.src=a,this.g={},this.h=0}La.prototype.add=function(a,u,h,m,A){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var j=id(a,u,m,A);return-1<j?(u=a[j],h||(u.fa=!1)):(u=new Xb(u,this.src,D,!!m,A),u.fa=h,a.push(u)),u};function rd(a,u){var h=u.type;if(h in a.g){var m=a.g[h],A=Array.prototype.indexOf.call(m,u,void 0),D;(D=0<=A)&&Array.prototype.splice.call(m,A,1),D&&(Va(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function id(a,u,h,m){for(var A=0;A<a.length;++A){var D=a[A];if(!D.da&&D.listener==u&&D.capture==!!h&&D.ha==m)return A}return-1}var sd="closure_lm_"+(1e6*Math.random()|0),od={};function Rg(a,u,h,m,A){if(m&&m.once)return Pg(a,u,h,m,A);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Rg(a,u[D],h,m,A);return null}return h=ud(h),a&&a[Gs]?a.K(u,h,d(m)?!!m.capture:!!m,A):Dg(a,u,h,!1,m,A)}function Dg(a,u,h,m,A,D){if(!u)throw Error("Invalid event type");var j=d(A)?!!A.capture:!!A,Ae=cd(a);if(Ae||(a[sd]=Ae=new La(a)),h=Ae.add(u,h,m,j,D),h.proxy)return h;if(m=Zb(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)Qb||(A=j),A===void 0&&(A=!1),a.addEventListener(u.toString(),m,A);else if(a.attachEvent)a.attachEvent(Ng(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Zb(){function a(h){return u.call(a.src,a.listener,h)}let u=eT;return a}function Pg(a,u,h,m,A){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Pg(a,u[D],h,m,A);return null}return h=ud(h),a&&a[Gs]?a.L(u,h,d(m)?!!m.capture:!!m,A):Dg(a,u,h,!0,m,A)}function Mg(a,u,h,m,A){if(Array.isArray(u))for(var D=0;D<u.length;D++)Mg(a,u[D],h,m,A);else m=d(m)?!!m.capture:!!m,h=ud(h),a&&a[Gs]?(a=a.i,u=String(u).toString(),u in a.g&&(D=a.g[u],h=id(D,h,m,A),-1<h&&(Va(D[h]),Array.prototype.splice.call(D,h,1),D.length==0&&(delete a.g[u],a.h--)))):a&&(a=cd(a))&&(u=a.g[u.toString()],a=-1,u&&(a=id(u,h,m,A)),(h=-1<a?u[a]:null)&&ad(h))}function ad(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Gs])rd(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(Ng(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=cd(u))?(rd(h,a),h.h==0&&(h.src=null,u[sd]=null)):Va(a)}}}function Ng(a){return a in od?od[a]:od[a]="on"+a}function eT(a,u){if(a.da)a=!0;else{u=new Hs(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&ad(a),a=h.call(m,u)}return a}function cd(a){return a=a[sd],a instanceof La?a:null}var ld="__closure_events_fn_"+(1e9*Math.random()>>>0);function ud(a){return typeof a=="function"?a:(a[ld]||(a[ld]=function(u){return a.handleEvent(u)}),a[ld])}function st(){nr.call(this),this.i=new La(this),this.M=this,this.F=null}M(st,nr),st.prototype[Gs]=!0,st.prototype.removeEventListener=function(a,u,h,m){Mg(this,a,u,h,m)};function ft(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new it(u,a);else if(u instanceof it)u.target=u.target||a;else{var A=u;u=new it(m,a),T(u,A)}if(A=!0,h)for(var D=h.length-1;0<=D;D--){var j=u.g=h[D];A=Fa(j,m,!0,u)&&A}if(j=u.g=a,A=Fa(j,m,!0,u)&&A,A=Fa(j,m,!1,u)&&A,h)for(D=0;D<h.length;D++)j=u.g=h[D],A=Fa(j,m,!1,u)&&A}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)Va(h[m]);delete a.g[u],a.h--}}this.F=null},st.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},st.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function Fa(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,D=0;D<u.length;++D){var j=u[D];if(j&&!j.da&&j.capture==h){var Ae=j.listener,nt=j.ha||j.src;j.fa&&rd(a.i,j),A=Ae.call(nt,m)!==!1&&A}}return A&&!m.defaultPrevented}function Og(a,u,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Vg(a){a.g=Og(()=>{a.g=null,a.i&&(a.i=!1,Vg(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class tT extends nr{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Vg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(a){nr.call(this),this.h=a,this.g={}}M(Ws,nr);var Lg=[];function Fg(a){be(a.g,function(u,h){this.g.hasOwnProperty(h)&&ad(u)},a),a.g={}}Ws.prototype.N=function(){Ws.aa.N.call(this),Fg(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dd=c.JSON.stringify,nT=c.JSON.parse,rT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function hd(){}hd.prototype.h=null;function Ug(a){return a.h||(a.h=a.i())}function jg(){}var Ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fd(){it.call(this,"d")}M(fd,it);function pd(){it.call(this,"c")}M(pd,it);var Br={},Bg=null;function Ua(){return Bg=Bg||new st}Br.La="serverreachability";function $g(a){it.call(this,Br.La,a)}M($g,it);function Qs(a){let u=Ua();ft(u,new $g(u))}Br.STAT_EVENT="statevent";function qg(a,u){it.call(this,Br.STAT_EVENT,a),this.stat=u}M(qg,it);function pt(a){let u=Ua();ft(u,new qg(u,a))}Br.Ma="timingevent";function zg(a,u){it.call(this,Br.Ma,a),this.size=u}M(zg,it);function Ys(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Js(){this.g=!0}Js.prototype.xa=function(){this.g=!1};function iT(a,u,h,m,A,D){a.info(function(){if(a.g)if(D)for(var j="",Ae=D.split("&"),nt=0;nt<Ae.length;nt++){var ye=Ae[nt].split("=");if(1<ye.length){var ot=ye[0];ye=ye[1];var at=ot.split("_");j=2<=at.length&&at[1]=="type"?j+(ot+"="+ye+"&"):j+(ot+"=redacted&")}}else j=null;else j=D;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+u+`
`+h+`
`+j})}function sT(a,u,h,m,A,D,j){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+u+`
`+h+`
`+D+" "+j})}function Ri(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+aT(a,h)+(m?" "+m:"")})}function oT(a,u){a.info(function(){return"TIMEOUT: "+u})}Js.prototype.info=function(){};function aT(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(var j=1;j<A.length;j++)A[j]=""}}}}return dd(h)}catch{return u}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},md;function Ba(){}M(Ba,hd),Ba.prototype.g=function(){return new XMLHttpRequest},Ba.prototype.i=function(){return{}},md=new Ba;function rr(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new Ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}var Wg={},gd={};function vd(a,u,h){a.L=1,a.v=Ha(Dn(u)),a.m=h,a.P=!0,Kg(a,null)}function Kg(a,u){a.F=Date.now(),$a(a),a.A=Dn(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),c0(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Gg,a.g=C0(a.j,h?u:null,!a.m),0<a.O&&(a.M=new tT(_(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(Lg[0]=A.toString()),A=Lg);for(var D=0;D<A.length;D++){var j=Rg(h,A[D],m||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Qs(),iT(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;let u=this.M;u&&Pn(a)==3?u.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{let at=Pn(this.g);var u=this.g.Ba();let Mi=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||m0(this.g)))){this.J||at!=4||u==7||(u==8||0>=Mi?Qs(3):Qs(2)),_d(this);var h=this.g.Z();this.X=h;t:if(Qg(this)){var m=m0(this.g);a="";var A=m.length,D=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Xs(this);var j="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(D&&u==A-1)});m.length=0,this.h.g+=a,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,sT(this.i,this.u,this.A,this.l,this.R,at,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,nt=this.g;if((Ae=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Ae)){var ye=Ae;break t}}ye=null}if(h=ye)Ri(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yd(this,h);else{this.o=!1,this.s=3,pt(12),$r(this),Xs(this);break e}}if(this.P){h=!0;let Wt;for(;!this.J&&this.C<j.length;)if(Wt=cT(this,j),Wt==gd){at==4&&(this.s=4,pt(14),h=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Wg){this.s=4,pt(15),Ri(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else Ri(this.i,this.l,Wt,null),yd(this,Wt);if(Qg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||j.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)Ri(this.i,this.l,j,"[Invalid Chunked Response]"),$r(this),Xs(this);else if(0<j.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Sd(ot),ot.M=!0,pt(11))}}else Ri(this.i,this.l,j,null),yd(this,j);at==4&&$r(this),this.o&&!this.J&&(at==4?I0(this.j,this):(this.o=!1,$a(this)))}else ST(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),$r(this),Xs(this)}}}catch{}finally{}};function Qg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function cT(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?gd:(h=Number(u.substring(h,m)),isNaN(h)?Wg:(m+=1,m+h>u.length?gd:(u=u.slice(m,m+h),a.C=m+h,u)))}rr.prototype.cancel=function(){this.J=!0,$r(this)};function $a(a){a.S=Date.now()+a.I,Yg(a,a.I)}function Yg(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ys(_(a.ba,a),u)}function _d(a){a.B&&(c.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(oT(this.i,this.A),this.L!=2&&(Qs(),pt(17)),$r(this),this.s=2,Xs(this)):Yg(this,this.S-a)};function Xs(a){a.j.G==0||a.J||I0(a.j,a)}function $r(a){_d(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Fg(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function yd(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||wd(h.h,a))){if(!a.K&&wd(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ya(h),Ka(h);else break e;Td(h),pt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Ys(_(h.Za,h),6e3));if(1>=Zg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else zr(h,11)}else if((a.K||h.g==a)&&Ya(h),!re(u))for(A=h.Da.g.parse(u),u=0;u<A.length;u++){let ye=A[u];if(h.T=ye[0],ye=ye[1],h.G==2)if(ye[0]=="c"){h.K=ye[1],h.ia=ye[2];let ot=ye[3];ot!=null&&(h.la=ot,h.j.info("VER="+h.la));let at=ye[4];at!=null&&(h.Aa=at,h.j.info("SVER="+h.Aa));let Mi=ye[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(m=1.5*Mi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Wt=a.g;if(Wt){let Xa=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var D=m.h;D.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Ed(D,D.h),D.h=null))}if(m.D){let Cd=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Cd&&(m.ya=Cd,Me(m.I,m.D,Cd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var j=a;if(m.qa=S0(m,m.J?m.ia:null,m.W),j.K){e0(m.h,j);var Ae=j,nt=m.L;nt&&(Ae.I=nt),Ae.B&&(_d(Ae),$a(Ae)),m.g=j}else w0(m);0<h.i.length&&Qa(h)}else ye[0]!="stop"&&ye[0]!="close"||zr(h,7);else h.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?zr(h,7):bd(h):ye[0]!="noop"&&h.l&&h.l.ta(ye),h.v=0)}}Qs(4)}catch{}}var lT=class{constructor(a,u){this.g=a,this.map=u}};function Jg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Zg(a){return a.h?1:a.g?a.g.size:0}function wd(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Ed(a,u){a.g?a.g.add(u):a.h=u}function e0(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Jg.prototype.cancel=function(){if(this.i=t0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function t0(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return $(a.i)}function uT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function dT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function n0(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=dT(a),m=uT(a),A=m.length,D=0;D<A;D++)u.call(void 0,m[D],h&&h[D],a)}var r0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hT(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),A=null;if(0<=m){var D=a[h].substring(0,m);A=a[h].substring(m+1)}else D=a[h];u(D,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qr){this.h=a.h,qa(this,a.j),this.o=a.o,this.g=a.g,za(this,a.s),this.l=a.l;var u=a.i,h=new to;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),i0(this,h),this.m=a.m}else a&&(u=String(a).match(r0))?(this.h=!1,qa(this,u[1]||"",!0),this.o=Zs(u[2]||""),this.g=Zs(u[3]||"",!0),za(this,u[4]),this.l=Zs(u[5]||"",!0),i0(this,u[6]||"",!0),this.m=Zs(u[7]||"")):(this.h=!1,this.i=new to(null,this.h))}qr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(eo(u,s0,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(eo(u,s0,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(eo(h,h.charAt(0)=="/"?mT:pT,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",eo(h,vT)),a.join("")};function Dn(a){return new qr(a)}function qa(a,u,h){a.j=h?Zs(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function za(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function i0(a,u,h){u instanceof to?(a.i=u,_T(a.i,a.h)):(h||(u=eo(u,gT)),a.i=new to(u,a.h))}function Me(a,u,h){a.i.set(u,h)}function Ha(a){return Me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Zs(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function eo(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,fT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var s0=/[#\/\?@]/g,pT=/[#\?:]/g,mT=/[#\?]/g,gT=/[#\?@]/g,vT=/#/g;function to(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function ir(a){a.g||(a.g=new Map,a.h=0,a.i&&hT(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=to.prototype,n.add=function(a,u){ir(this),this.i=null,a=Di(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function o0(a,u){ir(a),u=Di(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function a0(a,u){return ir(a),u=Di(a,u),a.g.has(u)}n.forEach=function(a,u){ir(this),this.g.forEach(function(h,m){h.forEach(function(A){a.call(u,A,m,this)},this)},this)},n.na=function(){ir(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let A=a[m];for(let D=0;D<A.length;D++)h.push(u[m])}return h},n.V=function(a){ir(this);let u=[];if(typeof a=="string")a0(this,a)&&(u=u.concat(this.g.get(Di(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return ir(this),this.i=null,a=Di(this,a),a0(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function c0(a,u,h){o0(a,u),0<h.length&&(a.i=null,a.g.set(Di(a,u),$(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let D=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var A=D;j[m]!==""&&(A+="="+encodeURIComponent(String(j[m]))),a.push(A)}}return this.i=a.join("&")};function Di(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function _T(a,u){u&&!a.j&&(ir(a),a.i=null,a.g.forEach(function(h,m){var A=m.toLowerCase();m!=A&&(o0(this,m),c0(this,A,h))},a)),a.j=u}function yT(a,u){let h=new Js;if(c.Image){let m=new Image;m.onload=k(sr,h,"TestLoadImage: loaded",!0,u,m),m.onerror=k(sr,h,"TestLoadImage: error",!1,u,m),m.onabort=k(sr,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=k(sr,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function wT(a,u){let h=new Js,m=new AbortController,A=setTimeout(()=>{m.abort(),sr(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(A),D.ok?sr(h,"TestPingServer: ok",!0,u):sr(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),sr(h,"TestPingServer: error",!1,u)})}function sr(a,u,h,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(h)}catch{}}function ET(){this.g=new rT}function IT(a,u,h){let m=h||"";try{n0(a,function(A,D){let j=A;d(A)&&(j=dd(A)),u.push(m+D+"="+encodeURIComponent(j))})}catch(A){throw u.push(m+"type="+encodeURIComponent("_badmap")),A}}function no(a){this.l=a.Ub||null,this.j=a.eb||!1}M(no,hd),no.prototype.g=function(){return new Ga(this.l,this.j)},no.prototype.i=function(a){return function(){return a}}({});function Ga(a,u){st.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ga,st),n=Ga.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,io(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;l0(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function l0(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ro(this):io(this),this.readyState==3&&l0(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ro(this))},n.Qa=function(a){this.g&&(this.response=a,ro(this))},n.ga=function(){this.g&&ro(this)};function ro(a){a.readyState=4,a.l=null,a.j=null,a.v=null,io(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function io(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function u0(a){let u="";return be(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function Id(a,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=u0(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Me(a,u,h))}function Be(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Be,st);var bT=/^https?$/i,TT=["POST","PUT"];n=Be.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():md.g(),this.v=this.o?Ug(this.o):Ug(md),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){d0(this,D);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)h.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let D of m.keys())h.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(D=>D.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(TT,u,void 0))||m||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,j]of h)this.g.setRequestHeader(D,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{p0(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){d0(this,D)}};function d0(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,h0(a),Wa(a)}function h0(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),Wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wa(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?f0(this):this.bb())},n.bb=function(){f0(this)};function f0(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Pn(a)!=4||a.Z()!=2)){if(a.u&&Pn(a)==4)Og(a.Ea,0,a);else if(ft(a,"readystatechange"),Pn(a)==4){a.h=!1;try{let j=a.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=j===0){var A=String(a.D).match(r0)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),m=!bT.test(A?A.toLowerCase():"")}h=m}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var D=2<Pn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",h0(a)}}finally{Wa(a)}}}}function Wa(a,u){if(a.g){p0(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ft(a,"ready");try{h.onreadystatechange=m}catch{}}}function p0(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Pn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),nT(u)}};function m0(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ST(a){let u={};a=(a.g&&2<=Pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(re(a[m]))continue;var h=C(a[m]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let D=u[A]||[];u[A]=D,D.push(h)}S(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function g0(a){this.Aa=0,this.i=[],this.j=new Js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,a),this.cb=so("retryDelaySeedMs",1e4,a),this.Wa=so("forwardChannelMaxRetries",2,a),this.wa=so("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Jg(a&&a.concurrentRequestLimit),this.Da=new ET,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=g0.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,m){pt(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=S0(this,null,this.W),Qa(this)};function bd(a){if(v0(a),a.G==3){var u=a.U++,h=Dn(a.I);if(Me(h,"SID",a.K),Me(h,"RID",u),Me(h,"TYPE","terminate"),oo(a,h),u=new rr(a,a.j,u),u.L=2,u.v=Ha(Dn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=C0(u.j,null),u.g.ea(u.v)),u.F=Date.now(),$a(u)}T0(a)}function Ka(a){a.g&&(Sd(a),a.g.cancel(),a.g=null)}function v0(a){Ka(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Qa(a){if(!Xg(a.h)&&!a.s){a.s=!0;var u=a.Ga;qs||kg(),zs||(qs(),zs=!0),nd.add(u,a),a.B=0}}function CT(a,u){return Zg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ys(_(a.Ga,a,u),b0(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new rr(this,this.j,a),D=this.o;if(this.S&&(D?(D=y(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(A.H=D,D=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=y0(this,A,u),h=Dn(this.I),Me(h,"RID",a),Me(h,"CVER",22),this.D&&Me(h,"X-HTTP-Session-Id",this.D),oo(this,h),D&&(this.O?u="headers="+encodeURIComponent(String(u0(D)))+"&"+u:this.m&&Id(h,this.m,D)),Ed(this.h,A),this.Ua&&Me(h,"TYPE","init"),this.P?(Me(h,"$req",u),Me(h,"SID","null"),A.T=!0,vd(A,h,null)):vd(A,h,u),this.G=2}}else this.G==3&&(a?_0(this,a):this.i.length==0||Xg(this.h)||_0(this))};function _0(a,u){var h;u?h=u.l:h=a.U++;let m=Dn(a.I);Me(m,"SID",a.K),Me(m,"RID",h),Me(m,"AID",a.T),oo(a,m),a.m&&a.o&&Id(m,a.m,a.o),h=new rr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=y0(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ed(a.h,h),vd(h,m,u)}function oo(a,u){a.H&&be(a.H,function(h,m){Me(u,m,h)}),a.l&&n0({},function(h,m){Me(u,m,h)})}function y0(a,u,h){h=Math.min(a.i.length,h);var m=a.l?_(a.l.Na,a.l,a):null;e:{var A=a.i;let D=-1;for(;;){let j=["count="+h];D==-1?0<h?(D=A[0].g,j.push("ofs="+D)):D=0:j.push("ofs="+D);let Ae=!0;for(let nt=0;nt<h;nt++){let ye=A[nt].g,ot=A[nt].map;if(ye-=D,0>ye)D=Math.max(0,A[nt].g-100),Ae=!1;else try{IT(ot,j,"req"+ye+"_")}catch{m&&m(ot)}}if(Ae){m=j.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,m}function w0(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;qs||kg(),zs||(qs(),zs=!0),nd.add(u,a),a.v=0}}function Td(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ys(_(a.Fa,a),b0(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,E0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ys(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ka(this),E0(this))};function Sd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function E0(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Dn(a.qa);Me(u,"RID","rpc"),Me(u,"SID",a.K),Me(u,"AID",a.T),Me(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Me(u,"TO",a.ja),Me(u,"TYPE","xmlhttp"),oo(a,u),a.m&&a.o&&Id(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ha(Dn(u)),h.m=null,h.P=!0,Kg(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Ka(this),Td(this),pt(19))};function Ya(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function I0(a,u){var h=null;if(a.g==u){Ya(a),Sd(a),a.g=null;var m=2}else if(wd(a.h,u))h=u.D,e0(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;m=Ua(),ft(m,new zg(m,h)),Qa(a)}else w0(a);else if(A=u.s,A==3||A==0&&0<u.X||!(m==1&&CT(a,u)||m==2&&Td(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),A){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function b0(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function zr(a,u){if(a.j.info("Error code "+u),u==2){var h=_(a.fb,a),m=a.Xa;let A=!m;m=new qr(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qa(m,"https"),Ha(m),A?yT(m.toString(),h):wT(m.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(u),T0(a),v0(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function T0(a){if(a.G=0,a.ka=[],a.l){let u=t0(a.h);(u.length!=0||a.i.length!=0)&&(L(a.ka,u),L(a.ka,a.i),a.h.i.length=0,$(a.i),a.i.length=0),a.l.ra()}}function S0(a,u,h){var m=h instanceof qr?Dn(h):new qr(h);if(m.g!="")u&&(m.g=u+"."+m.g),za(m,m.s);else{var A=c.location;m=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var D=new qr(null);m&&qa(D,m),u&&(D.g=u),A&&za(D,A),h&&(D.l=h),m=D}return h=a.D,u=a.ya,h&&u&&Me(m,h,u),Me(m,"VER",a.la),oo(a,m),m}function C0(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Be(new no({eb:h})):new Be(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function A0(){}n=A0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ja(){}Ja.prototype.g=function(a,u){return new Tt(a,u)};function Tt(a,u){st.call(this),this.g=new g0(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!re(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!re(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Pi(this)}M(Tt,st),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){bd(this.g)},Tt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=dd(a),a=h);u.i.push(new lT(u.Ya++,a)),u.G==3&&Qa(u)},Tt.prototype.N=function(){this.g.l=null,delete this.j,bd(this.g),delete this.g,Tt.aa.N.call(this)};function x0(a){fd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}M(x0,fd);function k0(){pd.call(this),this.status=1}M(k0,pd);function Pi(a){this.g=a}M(Pi,A0),Pi.prototype.ua=function(){ft(this.g,"a")},Pi.prototype.ta=function(a){ft(this.g,new x0(a))},Pi.prototype.sa=function(a){ft(this.g,new k0)},Pi.prototype.ra=function(){ft(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Wf=Qn.createWebChannelTransport=function(){return new Ja},Gf=Qn.getStatEventTarget=function(){return Ua()},Hf=Qn.Event=Br,wl=Qn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,ta=Qn.ErrorCode=ja,Hg.COMPLETE="complete",zf=Qn.EventType=Hg,jg.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",st.prototype.listen=st.prototype.K,os=Qn.WebChannel=jg,Jk=Qn.FetchXmlHttpFactory=no,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,qf=Qn.XhrIo=Be}).apply(typeof yl<"u"?yl:typeof self<"u"?self:typeof window<"u"?window:{});var Ew="@firebase/firestore",Iw="4.7.17";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Cs="11.9.0";var gi=new vn("@firebase/firestore");function as(){return gi.logLevel}function W(n,...e){if(gi.logLevel<=fe.DEBUG){let t=e.map(Um);gi.debug(`Firestore (${Cs}): ${n}`,...t)}}function Yn(n,...e){if(gi.logLevel<=fe.ERROR){let t=e.map(Um);gi.error(`Firestore (${Cs}): ${n}`,...t)}}function ps(n,...e){if(gi.logLevel<=fe.WARN){let t=e.map(Um);gi.warn(`Firestore (${Cs}): ${n}`,...t)}}function Um(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pE(n,r,t)}function pE(n,e,t){let r=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Yn(r),new Error(r)}function Ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pE(e,i,r)}function ce(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Al=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Zf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},ep=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},tp=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>w(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Al(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new et(e)}},np=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},rp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new np(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ip=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);let r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Xk(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function mE(){return new TextEncoder}var kl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Xk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function sp(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return he(r,i);{let s=mE(),o=Zk(s.encode(bw(n,t)),s.encode(bw(e,t)));return o!==0?o:he(r,i)}}t+=r>65535?2:1}return he(n.length,e.length)}function bw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Zk(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return he(n[t],e[t]);return he(n.length,e.length)}function ms(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tw=-62135596800,Sw=1e6,rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Sw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tw)throw new z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sw}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Tw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cw="__name__",Rl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return he(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):sp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}},je=class n extends Rl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class n extends Rl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cw}static keyField(){return new n([Cw])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new z(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new z(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var aa=-1,op=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};op.UNKNOWN_ID=-1;function tR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new vi(i,X.empty(),e)}function nR(n){return new vi(n.readTime,n.key,aa)}var vi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),X.empty(),aa)}static max(){return new n(le.max(),X.empty(),aa)}};function rR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var iR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ap=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function As(n){return w(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==iR)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function sR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xs(n){return n.name==="IndexedDbTransactionError"}var jm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Bm=-1;function du(n){return n==null}function ca(n){return n===0&&1/n==-1/0}function oR(n){return typeof n=="number"&&Number.isInteger(n)&&!ca(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var gE="";function aR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Aw(e)),e=cR(n.get(t),e);return Aw(e)}function cR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case gE:t+="";break;default:t+=s}}return t}function Aw(n){return n+gE+""}var lR="remoteDocuments",vE="owner";var _E="mutationQueues";var yE="mutations";var wE="documentMutations",uR="remoteDocumentsV14";var EE="remoteDocumentGlobal";var IE="targets";var bE="targetDocuments";var TE="targetGlobal",SE="collectionParents";var CE="clientMetadata";var AE="bundles";var xE="namedQueries";var dR="indexConfiguration";var hR="indexState";var fR="indexEntries";var kE="documentOverlays";var pR="globals";var mR=[_E,yE,wE,lR,IE,vE,TE,bE,CE,EE,SE,AE,xE],nL=[...mR,kE],gR=[_E,yE,wE,uR,IE,vE,TE,bE,CE,EE,SE,AE,xE,kE],vR=gR,_R=[...vR,dR,hR,fR];var rL=[..._R,pR];function xw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ze=class n{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ds(this.root,e,this.comparator,!0)}},ds=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dl(this.data.getIterator())}getIteratorFrom(e){return new Dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Dl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bt=class n{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(Mt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ms(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(n){if(Ie(!!n,39018),typeof n=="string"){let e=0,t=yR.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(n.seconds),nanos:Ve(n.nanos)}}function Ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xn(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}var DE="server_timestamp",PE="__type__",ME="__previous_value__",NE="__local_write_time__";function $m(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PE])===null||t===void 0?void 0:t.stringValue)===DE}function hu(n){let e=n.mapValue.fields[ME];return $m(e)?hu(e):e}function la(n){let e=Jn(n.mapValue.fields[NE].timestampValue);return new rt(e.seconds,e.nanos)}var cp=class{constructor(e,t,r,i,s,o,c,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=f}},Ml="(default)",Nl=class n{constructor(e,t){this.projectId=e,this.database=t||Ml}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ml}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var qm="__type__",OE="__max__",El={mapValue:{fields:{__type__:{stringValue:OE}}}},zm="__vector__",gs="value";function xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$m(n)?4:LE(n)?9007199254740991:VE(n)?10:11:Z(28295,{value:n})}function Tn(n,e){if(n===e)return!0;let t=xr(n);if(t!==xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return la(n).isEqual(la(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Jn(i.timestampValue),c=Jn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Xn(i.bytesValue).isEqual(Xn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ve(i.doubleValue),c=Ve(s.doubleValue);return o===c?ca(o)===ca(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return ms(n.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(xw(o)!==xw(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Tn(o[l],c[l])))return!1;return!0}(n,e);default:return Z(52216,{left:n})}}function ua(n,e){return(n.values||[]).find(t=>Tn(t,e))!==void 0}function vs(n,e){if(n===e)return 0;let t=xr(n),r=xr(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return kw(n.timestampValue,e.timestampValue);case 4:return kw(la(n),la(e));case 5:return sp(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Xn(s),l=Xn(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=he(c[d],l[d]);if(f!==0)return f}return he(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=he(Ve(s.latitude),Ve(o.latitude));return c!==0?c:he(Ve(s.longitude),Ve(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Rw(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,f;let v=s.fields||{},_=o.fields||{},k=(c=v[gs])===null||c===void 0?void 0:c.arrayValue,M=(l=_[gs])===null||l===void 0?void 0:l.arrayValue,$=he(((d=k?.values)===null||d===void 0?void 0:d.length)||0,((f=M?.values)===null||f===void 0?void 0:f.length)||0);return $!==0?$:Rw(k,M)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===El.mapValue&&o===El.mapValue)return 0;if(s===El.mapValue)return 1;if(o===El.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let v=0;v<l.length&&v<f.length;++v){let _=sp(l[v],f[v]);if(_!==0)return _;let k=vs(c[l[v]],d[f[v]]);if(k!==0)return k}return he(l.length,f.length)}(n.mapValue,e.mapValue);default:throw Z(23264,{Pe:t})}}function kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=Jn(n),r=Jn(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function Rw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=vs(t[i],r[i]);if(s)return s}return he(t.length,r.length)}function _s(n){return lp(n)}function lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Jn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=lp(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${lp(t.fields[o])}`;return i+"}"}(n.mapValue):Z(61005,{value:n})}function Tl(n){switch(xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=hu(n);return e?16+Tl(e):16;case 5:return 2*n.stringValue.length;case 6:return Xn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Tl(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Vr(r.fields,(s,o)=>{i+=s.length+Tl(o)}),i}(n.mapValue);default:throw Z(13486,{value:n})}}function Dw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function up(n){return!!n&&"integerValue"in n}function Hm(n){return!!n&&"arrayValue"in n}function Pw(n){return!!n&&"nullValue"in n}function Mw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sl(n){return!!n&&"mapValue"in n}function VE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[qm])===null||t===void 0?void 0:t.stringValue)===zm}function ra(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Vr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ra(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ra(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OE}var sL={mapValue:{fields:{[qm]:{stringValue:zm},[gs]:{arrayValue:{}}}}};var Pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(t)}setAll(e){let t=Mt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=ra(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Sl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ra(this.value))}};function FE(n){let e=[];return Vr(n.fields,(t,r)=>{let i=new Mt([t]);if(Sl(r)){let s=FE(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Bt(e)}var sn=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Pt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ys=class{constructor(e,t){this.position=e,this.inclusive=t}};function Nw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),t.key):r=vs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ow(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tn(n.position[t],e.position[t]))return!1;return!0}var _i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ol=class{},Ke=class n extends Ol{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hp(e,t,r):t==="array-contains"?new mp(e,r):t==="in"?new gp(e,r):t==="not-in"?new vp(e,r):t==="array-contains-any"?new _p(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fp(e,r):new pp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vs(t,this.value)):t!==null&&xr(this.value)===xr(t)&&this.matchesComparison(vs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},on=class n extends Ol{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return UE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function UE(n){return n.op==="and"}function jE(n){return ER(n)&&UE(n)}function ER(n){for(let e of n.filters)if(e instanceof on)return!1;return!0}function dp(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+_s(n.value);if(jE(n))return n.filters.map(e=>dp(e)).join(",");{let e=n.filters.map(t=>dp(t)).join(",");return`${n.op}(${e})`}}function BE(n,e){return n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)}(n,e):n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&BE(o,i.filters[c]),!0):!1}(n,e):void Z(19439)}function $E(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${_s(t.value)}`}(n):n instanceof on?function(t){return t.op.toString()+" {"+t.getFilters().map($E).join(" ,")+"}"}(n):"Filter"}var hp=class extends Ke{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},fp=class extends Ke{constructor(e,t){super(e,"in",t),this.keys=qE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pp=class extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=qE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var mp=class extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Hm(t)&&ua(t.arrayValue,this.value)}},gp=class extends Ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ua(this.value.arrayValue,t)}},vp=class extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ua(this.value.arrayValue,t)}},_p=class extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Hm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ua(this.value.arrayValue,r))}};var yp=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Ie=null}};function Vw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new yp(n,e,t,r,i,s,o)}function Gm(n){let e=ce(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_s(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_s(r)).join(",")),e.Ie=t}return e.Ie}function Wm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ow(n.startAt,e.startAt)&&Ow(n.endAt,e.endAt)}function wp(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var kr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function IR(n,e,t,r,i,s,o,c){return new kr(n,e,t,r,i,s,o,c)}function fu(n){return new kr(n)}function Lw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zE(n){return n.collectionGroup!==null}function ia(n){let e=ce(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(Mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new _i(s,r))}),t.has(Mt.keyField().canonicalString())||e.Ee.push(new _i(Mt.keyField(),r))}return e.Ee}function In(n){let e=ce(n);return e.de||(e.de=bR(e,ia(n))),e.de}function bR(n,e){if(n.limitType==="F")return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new _i(i.field,s)});let t=n.endAt?new ys(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ys(n.startAt.position,n.startAt.inclusive):null;return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ep(n,e){let t=n.filters.concat([e]);return new kr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ip(n,e,t){return new kr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pu(n,e){return Wm(In(n),In(e))&&n.limitType===e.limitType}function HE(n){return`${Gm(In(n))}|lt:${n.limitType}`}function cs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$E(i)).join(", ")}]`),du(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_s(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_s(i)).join(",")),`Target(${r})`}(In(n))}; limitType=${n.limitType})`}function mu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ia(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let d=Nw(o,c,l);return o.inclusive?d<=0:d<0}(r.startAt,ia(r),i)||r.endAt&&!function(o,c,l){let d=Nw(o,c,l);return o.inclusive?d>=0:d>0}(r.endAt,ia(r),i))}(n,e)}function TR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GE(n){return(e,t)=>{let r=!1;for(let i of ia(n)){let s=SR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function SR(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?vs(l,d):Z(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:n.dir})}}var Zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return RE(this.inner)}size(){return this.innerSize}};var CR=new ze(X.comparator);function er(){return CR}var WE=new ze(X.comparator);function na(...n){let e=WE;for(let t of n)e=e.insert(t.key,t);return e}function KE(n){let e=WE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fi(){return sa()}function QE(){return sa()}function sa(){return new Zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var AR=new ze(X.comparator),xR=new tt(X.comparator);function me(...n){let e=xR;for(let t of n)e=e.add(t);return e}var kR=new tt(he);function RR(){return kR}function Km(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ca(e)?"-0":e}}function YE(n){return{integerValue:""+n}}function DR(n,e){return oR(e)?YE(e):Km(n,e)}var ws=class{constructor(){this._=void 0}};function PR(n,e,t){return n instanceof yi?function(i,s){let o={fields:{[PE]:{stringValue:DE},[NE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$m(s)&&(s=hu(s)),s&&(o.fields[ME]=s),{mapValue:o}}(t,e):n instanceof Rr?XE(n,e):n instanceof Dr?ZE(n,e):function(i,s){let o=JE(i,s),c=Fw(o)+Fw(i.Re);return up(o)&&up(i.Re)?YE(c):Km(i.serializer,c)}(n,e)}function MR(n,e,t){return n instanceof Rr?XE(n,e):n instanceof Dr?ZE(n,e):t}function JE(n,e){return n instanceof Es?function(r){return up(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var yi=class extends ws{},Rr=class extends ws{constructor(e){super(),this.elements=e}};function XE(n,e){let t=eI(e);for(let r of n.elements)t.some(i=>Tn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Dr=class extends ws{constructor(e){super(),this.elements=e}};function ZE(n,e){let t=eI(e);for(let r of n.elements)t=t.filter(i=>!Tn(i,r));return{arrayValue:{values:t}}}var Es=class extends ws{constructor(e,t){super(),this.serializer=e,this.Re=t}};function Fw(n){return Ve(n.integerValue||n.doubleValue)}function eI(n){return Hm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var da=class{constructor(e,t){this.field=e,this.transform=t}};function NR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rr&&i instanceof Rr||r instanceof Dr&&i instanceof Dr?ms(r.elements,i.elements,Tn):r instanceof Es&&i instanceof Es?Tn(r.Re,i.Re):r instanceof yi&&i instanceof yi}(n.transform,e.transform)}var bp=class{constructor(e,t){this.version=e,this.transformResults=t}},$t=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Is=class{};function tI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bs(n.key,$t.none()):new wi(n.key,n.data,$t.none());{let t=n.data,r=Pt.empty(),i=new tt(Mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Sn(n.key,r,new Bt(i.toArray()),$t.none())}}function OR(n,e,t){n instanceof wi?function(i,s,o){let c=i.value.clone(),l=jw(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Sn?function(i,s,o){if(!Cl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=jw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(nI(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function oa(n,e,t,r){return n instanceof wi?function(s,o,c,l){if(!Cl(s.precondition,o))return c;let d=s.value.clone(),f=Bw(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sn?function(s,o,c,l){if(!Cl(s.precondition,o))return c;let d=Bw(s.fieldTransforms,l,o),f=o.data;return f.setAll(nI(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(s,o,c){return Cl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function VR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=JE(r.transform,i||null);s!=null&&(t===null&&(t=Pt.empty()),t.set(r.field,s))}return t||null}function Uw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ms(r,i,(s,o)=>NR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wi=class extends Is{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Sn=class extends Is{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function nI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jw(n,e,t){let r=new Map;Ie(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,MR(o,c,t[i]))}return r}function Bw(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,PR(s,o,e))}return r}var bs=class extends Is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tp=class extends Is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&OR(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=oa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=oa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=QE();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=tI(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&ms(this.mutations,e.mutations,(t,r)=>Uw(t,r))&&ms(this.baseMutations,e.baseMutations,(t,r)=>Uw(t,r))}},Cp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return AR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Ap=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ge,ve;function LR(n){switch(n){case P.OK:return Z(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return Z(15467,{code:n})}}function rI(n){if(n===void 0)return Yn("GRPC error has no .code"),P.UNKNOWN;switch(n){case Ge.OK:return P.OK;case Ge.CANCELLED:return P.CANCELLED;case Ge.UNKNOWN:return P.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return P.INTERNAL;case Ge.UNAVAILABLE:return P.UNAVAILABLE;case Ge.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ge.NOT_FOUND:return P.NOT_FOUND;case Ge.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ge.ABORTED:return P.ABORTED;case Ge.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ge.DATA_LOSS:return P.DATA_LOSS;default:return Z(39323,{code:n})}}(ve=Ge||(Ge={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var $w=null;var FR=new Kn([4294967295,4294967295],0);function qw(n){let e=mE().encode(n),t=new $f;return t.update(e),new Uint8Array(t.digest())}function zw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kn([t,r],0),new Kn([i,s],0)]}var kp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pi(`Invalid padding: ${t}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pi(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Kn.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Kn.fromNumber(r)));return i.compare(FR)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=qw(e),[r,i]=zw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;let t=qw(e),[r,i]=zw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new ze(he),er(),me())}},ha=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var hs=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},Ll=class{constructor(e,t){this.targetId=e,this.Ce=t}},Fl=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ul=class{constructor(){this.Fe=0,this.Me=Hw(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=me(),t=me(),r=me();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new ha(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Hw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ie(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Rp=class{constructor(e){this.ze=e,this.je=new Map,this.He=er(),this.Je=Il(),this.Ye=Il(),this.Ze=new ze(he)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(wp(s))if(r===0){let o=new X(s.path);this.tt(t,o,sn.newNoDocument(o,le.min()))}else Ie(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let c=this.ct(e),l=c?this.lt(c,e,o):1;if(l!==0){this.st(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}$w?.ht(function(f,v,_,k,M){var $,L,oe,re,se,Ce;let ht={localCacheCount:f,existenceFilterCount:v.count,databaseId:_.database,projectId:_.projectId},be=v.unchangedNames;return be&&(ht.bloomFilter={applied:M===0,hashCount:($=be?.hashCount)!==null&&$!==void 0?$:0,bitmapLength:(re=(oe=(L=be?.bits)===null||L===void 0?void 0:L.bitmap)===null||oe===void 0?void 0:oe.length)!==null&&re!==void 0?re:0,padding:(Ce=(se=be?.bits)===null||se===void 0?void 0:se.padding)!==null&&Ce!==void 0?Ce:0,mightContain:S=>{var y;return(y=k?.mightContain(S))!==null&&y!==void 0&&y}}),ht}(o,e.Ce,this.ze.Pt(),c,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Xn(r).toUint8Array()}catch(l){if(l instanceof Pl)return ps("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new kp(o,i,s)}catch(l){return ps(l instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let c=this._t(o);if(c){if(s.current&&wp(c.target)){let l=new X(c.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,sn.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=me();this.Ye.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this._t(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new Vl(e,t,this.Ze,this.He,r);return this.He=er(),this.Je=Il(),this.Ye=Il(),this.Ze=new ze(he),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ul,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new tt(he),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new tt(he),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ul),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Il(){return new ze(X.comparator)}function Hw(){return new ze(X.comparator)}var UR={asc:"ASCENDING",desc:"DESCENDING"},jR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BR={and:"AND",or:"OR"},Dp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Pp(n,e){return n.useProto3Json||du(e)?e:{value:e}}function jl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $R(n,e){return jl(n,e.toTimestamp())}function bn(n){return Ie(!!n,49232),le.fromTimestamp(function(t){let r=Jn(t);return new rt(r.seconds,r.nanos)}(n))}function Qm(n,e){return Mp(n,e).canonicalString()}function Mp(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function sI(n){let e=je.fromString(n);return Ie(uI(e),10190,{key:e.toString()}),e}function Np(n,e){return Qm(n.databaseId,e.path)}function Kf(n,e){let t=sI(e);if(t.get(1)!==n.databaseId.projectId)throw new z(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(aI(t))}function oI(n,e){return Qm(n.databaseId,e)}function qR(n){let e=sI(n);return e.length===4?je.emptyPath():aI(e)}function Op(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aI(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gw(n,e,t){return{name:Np(n,e),fields:t.value.mapValue.fields}}function zR(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?P.UNKNOWN:rI(d.code);return new z(f,d.message||"")}(o);t=new Fl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Kf(n,r.document.name),s=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):le.min(),c=new Pt({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new hs(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Kf(n,r.document),s=r.readTime?bn(r.readTime):le.min(),o=sn.newNoDocument(i,s),c=r.removedTargetIds||[];t=new hs([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Kf(n,r.document),s=r.removedTargetIds||[];t=new hs([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new xp(i,s),c=r.targetId;t=new Ll(c,o)}}return t}function HR(n,e){let t;if(e instanceof wi)t={update:Gw(n,e.key,e.value)};else if(e instanceof bs)t={delete:Np(n,e.key)};else if(e instanceof Sn)t={update:Gw(n,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof Tp))return Z(16599,{ft:e.type});t={verify:Np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof yi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Es)return{fieldPath:o.field.canonicalString(),increment:c.Re};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$R(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(n,e.precondition)),t}function GR(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?bn(i.updateTime):bn(s);return o.isEqual(le.min())&&(o=bn(s)),new bp(o,i.transformResults||[])}(t,e))):[]}function WR(n,e){return{documents:[oI(n,e.path)]}}function KR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oI(n,i);let s=function(d){if(d.length!==0)return lI(on.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:ls(_.field),direction:JR(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Pp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function QR(n){let e=qR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ie(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(v){let _=cI(v);return _ instanceof on&&jE(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(v){return v.map(_=>function(M){return new _i(us(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(v){let _;return _=typeof v=="object"?v.value:v,du(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(v){let _=!!v.before,k=v.values||[];return new ys(k,_)}(t.startAt));let d=null;return t.endAt&&(d=function(v){let _=!v.before,k=v.values||[];return new ys(k,_)}(t.endAt)),IR(e,i,o,s,c,"F",l,d)}function YR(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=us(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=us(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=us(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=us(t.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(us(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return on.create(t.compositeFilter.filters.map(r=>cI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(t.compositeFilter.op))}(n):Z(30097,{filter:n})}function JR(n){return UR[n]}function XR(n){return jR[n]}function ZR(n){return BR[n]}function ls(n){return{fieldPath:n.canonicalString()}}function us(n){return Mt.fromServerFormat(n.fieldPath)}function lI(n){return n instanceof Ke?function(t){if(t.op==="=="){if(Mw(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NAN"}};if(Pw(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mw(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NOT_NAN"}};if(Pw(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(t.field),op:XR(t.op),value:t.value}}}(n):n instanceof on?function(t){let r=t.getFilters().map(i=>lI(i));return r.length===1?r[0]:{compositeFilter:{op:ZR(t.op),filters:r}}}(n):Z(54877,{filter:n})}function eD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var fa=class n{constructor(e,t,r,i,s=le.min(),o=le.min(),c=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vp=class{constructor(e){this.wt=e}};function tD(n){let e=QR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ip(e,e.limit,"L"):e}var Bl=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),ca(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Jn(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Xn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?LE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):VE(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Z(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=gs,c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Ve(c)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),X.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Bl.Wt=new Bl;var Lp=class{constructor(){this.Cn=new Fp}addToCollectionParentIndex(e,t){return this.Cn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(vi.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Fp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(je.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(je.comparator)).toArray()}};var oL=new Uint8Array(0);var Ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dI=41943040,jt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(dI,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);var pa=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var Kw="LruGarbageCollector",nD=1048576;function Qw([n,e],[t,r]){let i=he(n,t);return i===0?he(e,r):i}var Up=class{constructor(e){this.Er=e,this.buffer=new tt(Qw),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Qw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},jp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){W(Kw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xs(t)?W(Kw,"Ignoring IndexedDB error during garbage collection: ",t):yield As(t)}yield this.mr(3e5)}))}},Bp=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(jm.le);let r=new Up(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Ww)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ww):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,c,l,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(s=v,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),as()<=fe.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${v} documents in `+(d-l)+`ms
Total Duration: ${d-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}};function rD(n,e){return new Bp(n,e)}var $p=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&oa(r.mutation,i,Bt.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=fi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=na();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=fi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=er(),o=sa(),c=function(){return sa()}();return t.forEach((l,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Sn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),oa(f.mutation,d,f.mutation.getFieldMask(),rt.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var v;return c.set(d,new qp(f,(v=o.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){let r=sa(),i=new ze((o,c)=>o-c),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let f=r.get(l)||Bt.empty();f=c.applyToLocalView(d,f),r.set(l,f);let v=(i.get(c.batchId)||me()).add(l);i=i.insert(c.batchId,v)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,v=QE();f.forEach(_=>{if(!s.has(_)){let k=tI(t.get(_),r.get(_));k!==null&&v.set(_,k),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(fi()),c=aa,l=s;return o.next(d=>O.forEach(d,(f,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{l=l.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,me())).next(f=>({batchId:c,changes:KE(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=na();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=na();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,l=>{let d=function(v,_){return new kr(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((v,_)=>{o=o.insert(v,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,sn.newInvalidDocument(f)))});let c=na();return o.forEach((l,d)=>{let f=s.get(l);f!==void 0&&oa(f.mutation,d,Bt.empty(),rt.now()),mu(t,d)&&(c=c.insert(l,d))}),c})}};var Hp=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return O.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:tD(i.bundledQuery),readTime:bn(i.readTime)}}(t)),O.resolve()}};var Gp=class{constructor(){this.overlays=new ze(X.comparator),this.Qr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fi();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=fi(),s=t.length+1,o=new X(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ze((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=fi(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=fi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return O.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ap(t,r));let s=this.Qr.get(t);s===void 0&&(s=me(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}};var Wp=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var ma=class{constructor(){this.$r=new tt(We.Ur),this.Kr=new tt(We.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new We(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new We(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new X(new je([])),r=new We(t,e),i=new We(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new X(new je([])),r=new We(t,e),i=new We(t,e+1),s=me();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new We(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return X.comparator(e.key,t.key)||he(e.Zr,t.Zr)}static Wr(e,t){return he(e.Zr,t.Zr)||X.comparator(e.key,t.key)}};var Kp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new tt(We.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sp(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.Xr=this.Xr.add(new We(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Bm:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new We(t,0),i=new We(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{let c=this.ei(o.Zr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(he);return t.forEach(i=>{let s=new We(i,0),o=new We(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],c=>{r=r.add(c.Zr)})}),O.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;X.isDocumentKey(s)||(s=s.child(""));let o=new We(new X(s),0),c=new tt(he);return this.Xr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Zr)),!0)},o),O.resolve(this.ni(c))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return O.forEach(t.mutations,i=>{let s=new We(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new We(t,0),i=this.Xr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Qp=class{constructor(e){this.ii=e,this.docs=function(){return new ze(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=er(),o=t.path,c=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||rR(nR(f),r)<=0||(i.has(f.key)||mu(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Z(9500)}si(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Yp(this)}getSize(e){return O.resolve(this.size)}},Yp=class extends $p{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var Jp=class{constructor(e){this.persistence=e,this.oi=new Zn(t=>Gm(t),Wm),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this._i=0,this.ai=new ma,this.targetCount=0,this.ui=pa.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),O.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new pa(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Tr(t),O.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.ai.containsKey(t))}};var $l=class{constructor(e,t){this.ci={},this.overlays={},this.li=new jm(0),this.hi=!1,this.hi=!0,this.Pi=new Wp,this.referenceDelegate=e(this),this.Ti=new Jp(this),this.indexManager=new Lp,this.remoteDocumentCache=function(i){return new Qp(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Vp(t),this.Ei=new Hp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Kp(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new Xp(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return O.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},Xp=class extends ap{constructor(e){super(),this.currentSequenceNumber=e}},Zp=class n{constructor(e){this.persistence=e,this.Vi=new ma,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw Z(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,r=>{let i=X.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,le.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return O.or([()=>O.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},ql=class n{constructor(e,t){this.persistence=e,this.yi=new Zn(r=>aR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rD(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return O.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(c=>{c||(r++,s.removeEntry(o,le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tl(e.data.value)),t}Dr(e,t,r){return O.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var em=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=me(),i=me();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var tm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nm=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return H_()?8:sR(Ze())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tm;return this.Ss(e,t,o).next(c=>{if(s.result=c,this.fs)return this.Ds(e,t,o,c.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(as()<=fe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",cs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(as()<=fe.DEBUG&&W("QueryEngine","Query:",cs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(as()<=fe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",cs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(t))):O.resolve())}ws(e,t){if(Lw(t))return O.resolve(null);let r=In(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ip(t,null,"F"),r=In(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=me(...s);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.vs(t,c);return this.Cs(t,d,o,l.readTime)?this.ws(e,Ip(t,null,"F")):this.Fs(e,d,t,l)}))})))}bs(e,t,r,i){return Lw(t)||i.isEqual(le.min())?O.resolve(null):this.ys.getDocuments(e,r).next(s=>{let o=this.vs(t,s);return this.Cs(t,o,r,i)?O.resolve(null):(as()<=fe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(t)),this.Fs(e,o,t,tR(i,aa)).next(c=>c))})}vs(e,t){let r=new tt(GE(e));return t.forEach((i,s)=>{mu(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return as()<=fe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",cs(t)),this.ys.getDocumentsMatchingQuery(e,t,vi.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Ym="LocalStore",iD=3e8,rm=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new ze(he),this.Os=new Zn(s=>Gm(s),Wm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zp(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function sD(n,e,t,r){return new rm(n,e,t,r)}function hI(n,e){return w(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=me();for(let d of i){o.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})})}function oD(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let v=d.batch,_=v.keys(),k=O.resolve();return _.forEach(M=>{k=k.next(()=>f.getEntry(l,M)).next($=>{let L=d.docVersions.get(M);Ie(L!==null,48541),$.version.compareTo(L)<0&&(v.applyToRemoteDocument($,d),$.isValidDocument()&&($.setReadTime(d.commitVersion),f.addEntry($)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(l,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=me();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fI(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function aD(n,e){let t=ce(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let c=[];e.targetChanges.forEach((f,v)=>{let _=i.get(v);if(!_)return;c.push(t.Ti.removeMatchingKeys(s,f.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(s,f.addedDocuments,v)));let k=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(dt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(f.resumeToken,r)),i=i.insert(v,k),function($,L,oe){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=iD?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0}(_,k,f)&&c.push(t.Ti.updateTargetData(s,k))});let l=er(),d=me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(cD(s,o,e.documentUpdates).next(f=>{l=f.qs,d=f.Qs})),!r.isEqual(le.min())){let f=t.Ti.getLastRemoteSnapshotVersion(s).next(v=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.xs=i,s))}function cD(n,e,t){let r=me(),i=me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=er();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):W(Ym,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function lD(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uD(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new fa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function im(n,e,t){return w(this,null,function*(){let r=ce(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!xs(o))throw o;W(Ym,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function Yw(n,e,t){let r=ce(n),i=le.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,f){let v=ce(l),_=v.Os.get(f);return _!==void 0?O.resolve(v.xs.get(_)):v.Ti.getTargetData(d,f)}(r,o,In(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:le.min(),t?s:me())).next(c=>(dD(r,TR(e),c),{documents:c,$s:s})))}function dD(n,e,t){let r=n.Ns.get(e)||le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}var zl=class{constructor(){this.activeTargetIds=RR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sm=class{constructor(){this.xo=new zl,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new zl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var om=class{No(e){}shutdown(){}};var Jw="ConnectivityMonitor",Hl=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){W(Jw,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){W(Jw,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bl=null;function am(){return bl===null?bl=function(){return 268435456+Math.round(2147483648*Math.random())}():bl++,"0x"+bl.toString(16)}var Qf="RestConnection",hD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cm=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Ml?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){let o=am(),c=this.jo(e,t.toUriEncodedString());W(Qf,`Sending RPC '${e}' ${o}:`,c,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);let{host:d}=new URL(c),f=yr(d);return this.Jo(e,c,l,r,f).then(v=>(W(Qf,`Received RPC '${e}' ${o}: `,v),v),v=>{throw ps(Qf,`RPC '${e}' ${o} failed with error: `,v,"url: ",c,"request:",r),v})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){let r=hD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var lm=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ut="WebChannelConnection",um=class extends cm{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=am();return new Promise((c,l)=>{let d=new qf;d.setWithCredentials(!0),d.listenOnce(zf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ta.NO_ERROR:let v=d.getResponseJson();W(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case ta.TIMEOUT:W(ut,`RPC '${e}' ${o} timed out`),l(new z(P.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:let _=d.getStatus();if(W(ut,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);let M=k?.error;if(M&&M.status&&M.message){let $=function(oe){let re=oe.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(re)>=0?re:P.UNKNOWN}(M.status);l(new z($,M.message))}else l(new z(P.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new z(P.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{W(ut,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);W(ut,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",f,r,15)})}I_(e,t,r){let i=am(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wf(),c=Gf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=s.join("");W(ut,`Creating RPC '${e}' stream ${i}: ${f}`,l);let v=o.createWebChannel(f,l);this.E_(v);let _=!1,k=!1,M=new lm({Zo:L=>{k?W(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(W(ut,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),W(ut,`RPC '${e}' stream ${i} sending:`,L),v.send(L))},Xo:()=>v.close()}),$=(L,oe,re)=>{L.listen(oe,se=>{try{re(se)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return $(v,os.EventType.OPEN,()=>{k||(W(ut,`RPC '${e}' stream ${i} transport opened.`),M.__())}),$(v,os.EventType.CLOSE,()=>{k||(k=!0,W(ut,`RPC '${e}' stream ${i} transport closed`),M.u_(),this.d_(v))}),$(v,os.EventType.ERROR,L=>{k||(k=!0,ps(ut,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),M.u_(new z(P.UNAVAILABLE,"The operation could not be completed")))}),$(v,os.EventType.MESSAGE,L=>{var oe;if(!k){let re=L.data[0];Ie(!!re,16349);let se=re,Ce=se?.error||((oe=se[0])===null||oe===void 0?void 0:oe.error);if(Ce){W(ut,`RPC '${e}' stream ${i} received error:`,Ce);let ht=Ce.status,be=function(I){let T=Ge[I];if(T!==void 0)return rI(T)}(ht),S=Ce.message;be===void 0&&(be=P.INTERNAL,S="Unknown error status: "+ht+" with message "+Ce.message),k=!0,M.u_(new z(be,S)),v.close()}else W(ut,`RPC '${e}' stream ${i} received:`,re),M.c_(re)}}),$(c,Hf.STAT_EVENT,L=>{L.stat===wl.PROXY?W(ut,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===wl.NOPROXY&&W(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function Yf(){return typeof document<"u"?document:null}function gu(n){return new Dp(n,!0)}var Gl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var Xw="PersistentStream",Wl=class{constructor(e,t,r,i,s,o,c,l){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Gl(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return w(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return w(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return w(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new z(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>w(this,null,function*(){this.state=0,this.start()}))}j_(e){return W(Xw,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(W(Xw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dm=class extends Wl{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=zR(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?bn(o.readTime):le.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=Op(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=wp(l)?{documents:WR(s,l)}:{query:KR(s,l).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iI(s,o.resumeToken);let d=Pp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=jl(s,o.snapshotVersion.toTimestamp());let d=Pp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=YR(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=Op(this.serializer),t.removeTarget=e,this.Q_(t)}},hm=class extends Wl{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=GR(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=Op(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>HR(this.serializer,r))};this.Q_(t)}};var fm=class{},pm=class extends fm{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new z(P.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,Mp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(P.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,Mp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(P.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},mm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Yn(t),this.ua=!1):W("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Ei="RemoteStore",gm=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{r.enqueueAndForget(()=>w(this,null,function*(){bi(this)&&(W(Ei,"Restarting streams for network reachability change."),yield function(l){return w(this,null,function*(){let d=ce(l);d.da.add(4),yield ba(d),d.Va.set("Unknown"),d.da.delete(4),yield vu(d)})}(this))}))}),this.Va=new mm(r,i)}};function vu(n){return w(this,null,function*(){if(bi(n))for(let e of n.Aa)yield e(!0)})}function ba(n){return w(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function pI(n,e){let t=ce(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),eg(t)?Zm(t):ks(t).N_()&&Xm(t,e))}function Jm(n,e){let t=ce(n),r=ks(t);t.Ea.delete(e),r.N_()&&mI(t,e),t.Ea.size===0&&(r.N_()?r.k_():bi(t)&&t.Va.set("Unknown"))}function Xm(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ks(n).Z_(e)}function mI(n,e){n.ma.Ke(e),ks(n).X_(e)}function Zm(n){n.ma=new Rp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ks(n).start(),n.Va.ca()}function eg(n){return bi(n)&&!ks(n).O_()&&n.Ea.size>0}function bi(n){return ce(n).da.size===0}function gI(n){n.ma=void 0}function fD(n){return w(this,null,function*(){n.Va.set("Online")})}function pD(n){return w(this,null,function*(){n.Ea.forEach((e,t)=>{Xm(n,e)})})}function mD(n,e){return w(this,null,function*(){gI(n),eg(n)?(n.Va.Pa(e),Zm(n)):n.Va.set("Unknown")})}function gD(n,e,t){return w(this,null,function*(){if(n.Va.set("Online"),e instanceof Fl&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.Ea.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Ea.delete(c),i.ma.removeTarget(c))})}(n,e)}catch(r){W(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kl(n,r)}else if(e instanceof hs?n.ma.Xe(e):e instanceof Ll?n.ma.ot(e):n.ma.nt(e),!t.isEqual(le.min()))try{let r=yield fI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.ma.It(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.Ea.get(d);f&&s.Ea.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let f=s.Ea.get(l);if(!f)return;s.Ea.set(l,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),mI(s,l);let v=new fa(f.target,l,d,f.sequenceNumber);Xm(s,v)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){W(Ei,"Failed to raise snapshot:",r),yield Kl(n,r)}})}function Kl(n,e,t){return w(this,null,function*(){if(!xs(e))throw e;n.da.add(1),yield ba(n),n.Va.set("Offline"),t||(t=()=>fI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){W(Ei,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield vu(n)}))})}function vI(n,e){return e().catch(t=>Kl(n,t,e))}function _u(n){return w(this,null,function*(){let e=ce(n),t=Pr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Bm;for(;vD(e);)try{let i=yield lD(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,_D(e,i)}catch(i){yield Kl(e,i)}_I(e)&&yI(e)})}function vD(n){return bi(n)&&n.Ia.length<10}function _D(n,e){n.Ia.push(e);let t=Pr(n);t.N_()&&t.ea&&t.ta(e.mutations)}function _I(n){return bi(n)&&!Pr(n).O_()&&n.Ia.length>0}function yI(n){Pr(n).start()}function yD(n){return w(this,null,function*(){Pr(n).ia()})}function wD(n){return w(this,null,function*(){let e=Pr(n);for(let t of n.Ia)e.ta(t.mutations)})}function ED(n,e,t){return w(this,null,function*(){let r=n.Ia.shift(),i=Cp.from(r,e,t);yield vI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _u(n)})}function ID(n,e){return w(this,null,function*(){e&&Pr(n).ea&&(yield function(r,i){return w(this,null,function*(){if(function(o){return LR(o)&&o!==P.ABORTED}(i.code)){let s=r.Ia.shift();Pr(r).L_(),yield vI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield _u(r)}})}(n,e)),_I(n)&&yI(n)})}function Zw(n,e){return w(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),W(Ei,"RemoteStore received new credentials");let r=bi(t);t.da.add(3),yield ba(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield vu(t)})}function bD(n,e){return w(this,null,function*(){let t=ce(n);e?(t.da.delete(2),yield vu(t)):e||(t.da.add(2),yield ba(t),t.Va.set("Unknown"))})}function ks(n){return n.fa||(n.fa=function(t,r,i){let s=ce(t);return s.oa(),new dm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:fD.bind(null,n),n_:pD.bind(null,n),i_:mD.bind(null,n),Y_:gD.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.fa.L_(),eg(n)?Zm(n):n.Va.set("Unknown")):(yield n.fa.stop(),gI(n))}))),n.fa}function Pr(n){return n.ga||(n.ga=function(t,r,i){let s=ce(t);return s.oa(),new hm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:yD.bind(null,n),i_:ID.bind(null,n),na:wD.bind(null,n),ra:ED.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.ga.L_(),yield _u(n)):(yield n.ga.stop(),n.Ia.length>0&&(W(Ei,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var vm=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tg(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),xs(n))return new z(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ql=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=na(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Yl=class{constructor(){this.pa=new ze(X.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Z(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ts=class n{constructor(e,t,r,i,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Ql.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _m=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},ym=class{constructor(){this.queries=eE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ce(t),s=i.queries;i.queries=eE(),s.forEach((o,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new z(P.ABORTED,"Firestore shutting down"))}};function eE(){return new Zn(n=>HE(n),pu)}function ng(n,e){return w(this,null,function*(){let t=ce(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new _m,r=e.va()?0:1);try{switch(r){case 0:s.ba=yield t.onListen(i,!0);break;case 1:s.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=tg(o,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&ig(t)})}function rg(n,e){return w(this,null,function*(){let t=ce(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function TD(n,e){let t=ce(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.Sa)c.Ma(i)&&(r=!0);o.ba=i}}r&&ig(t)}function SD(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function ig(n){n.Ca.forEach(e=>{e.next()})}var wm,tE;(tE=wm||(wm={})).xa="default",tE.Cache="cache";var ga=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wm.Cache}};var Jl=class{constructor(e){this.key=e}},Xl=class{constructor(e){this.key=e}},Em=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=me(),this.mutatedKeys=me(),this.Za=GE(e),this.Xa=new Ql(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Yl,i=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,v)=>{let _=i.get(f),k=mu(this.query,v)?v:null,M=!!_&&this.mutatedKeys.has(_.key),$=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations),L=!1;_&&k?_.data.isEqual(k.data)?M!==$&&(r.track({type:3,doc:k}),L=!0):this.ru(_,k)||(r.track({type:2,doc:k}),L=!0,(l&&this.Za(k,l)>0||d&&this.Za(k,d)<0)&&(c=!0)):!_&&k?(r.track({type:0,doc:k}),L=!0):_&&!k&&(r.track({type:1,doc:_}),L=!0,(l||d)&&(c=!0)),L&&(k?(o=o.add(k),s=$?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:c,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let o=e.nu.wa();o.sort((f,v)=>function(k,M){let $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Vt:L})}};return $(k)-$(M)}(f.type,v.type)||this.Za(f.doc,v.doc)),this.iu(r),i=i!=null&&i;let c=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Ja;return this.Ja=l,o.length!==0||d?{snapshot:new Ts(this.query,e.Xa,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Yl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=me(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Xl(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Jl(r))}),t}au(e){this.Ha=e.$s,this.Ya=me();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ts.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},sg="SyncEngine",Im=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bm=class{constructor(e){this.key=e,this.cu=!1}},Tm=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Zn(c=>HE(c),pu),this.Pu=new Map,this.Tu=new Set,this.Iu=new ze(X.comparator),this.Eu=new Map,this.du=new ma,this.Au={},this.Ru=new Map,this.Vu=pa.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function CD(n,e,t=!0){return w(this,null,function*(){let r=SI(n),i,s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=yield wI(r,e,t,!0),i})}function AD(n,e){return w(this,null,function*(){let t=SI(n);yield wI(t,e,!0,!1)})}function wI(n,e,t,r){return w(this,null,function*(){let i=yield uD(n.localStore,In(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield xD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&pI(n.remoteStore,i),c})}function xD(n,e,t,r,i){return w(this,null,function*(){n.fu=(v,_,k)=>function($,L,oe,re){return w(this,null,function*(){let se=L.view.tu(oe);se.Cs&&(se=yield Yw($.localStore,L.query,!1).then(({documents:S})=>L.view.tu(S,se)));let Ce=re&&re.targetChanges.get(L.targetId),ht=re&&re.targetMismatches.get(L.targetId)!=null,be=L.view.applyChanges(se,$.isPrimaryClient,Ce,ht);return rE($,L.targetId,be.ou),be.snapshot})}(n,v,_,k);let s=yield Yw(n.localStore,e,!0),o=new Em(e,s.$s),c=o.tu(s.documents),l=ha.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,l);rE(n,t,d.ou);let f=new Im(e,t,o);return n.hu.set(e,f),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),d.snapshot})}function kD(n,e,t){return w(this,null,function*(){let r=ce(n),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(o=>!pu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield im(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Jm(r.remoteStore,i.targetId),Sm(r,i.targetId)}).catch(As))):(Sm(r,i.targetId),yield im(r.localStore,i.targetId,!0))})}function RD(n,e){return w(this,null,function*(){let t=ce(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(t.remoteStore,r.targetId))})}function DD(n,e,t){return w(this,null,function*(){let r=FD(n);try{let i=yield function(o,c){let l=ce(o),d=rt.now(),f=c.reduce((k,M)=>k.add(M.key),me()),v,_;return l.persistence.runTransaction("Locally write mutations","readwrite",k=>{let M=er(),$=me();return l.Bs.getEntries(k,f).next(L=>{M=L,M.forEach((oe,re)=>{re.isValidDocument()||($=$.add(oe))})}).next(()=>l.localDocuments.getOverlayedDocuments(k,M)).next(L=>{v=L;let oe=[];for(let re of c){let se=VR(re,v.get(re.key).overlayedDocument);se!=null&&oe.push(new Sn(re.key,se,FE(se.value.mapValue),$t.exists(!0)))}return l.mutationQueue.addMutationBatch(k,d,oe,c)}).next(L=>{_=L;let oe=L.applyToLocalDocumentSet(v,$);return l.documentOverlayCache.saveOverlays(k,L.batchId,oe)})}).then(()=>({batchId:_.batchId,changes:KE(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let d=o.Au[o.currentUser.toKey()];d||(d=new ze(he)),d=d.insert(c,l),o.Au[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Ta(r,i.changes),yield _u(r.remoteStore)}catch(i){let s=tg(i,"Failed to persist write");t.reject(s)}})}function EI(n,e){return w(this,null,function*(){let t=ce(n);try{let r=yield aD(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Ie(o.cu,14607):i.removedDocuments.size>0&&(Ie(o.cu,42227),o.cu=!1))}),yield Ta(t,r,e)}catch(r){yield As(r)}})}function nE(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((s,o)=>{let c=o.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=ce(o);l.onlineState=c;let d=!1;l.queries.forEach((f,v)=>{for(let _ of v.Sa)_.Fa(c)&&(d=!0)}),d&&ig(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PD(n,e,t){return w(this,null,function*(){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ze(X.comparator);o=o.insert(s,sn.newNoDocument(s,le.min()));let c=me().add(s),l=new Vl(le.min(),new Map,new ze(he),o,c);yield EI(r,l),r.Iu=r.Iu.remove(s),r.Eu.delete(e),og(r)}else yield im(r.localStore,e,!1).then(()=>Sm(r,e,t)).catch(As)})}function MD(n,e){return w(this,null,function*(){let t=ce(n),r=e.batch.batchId;try{let i=yield oD(t.localStore,e);bI(t,r,null),II(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ta(t,i)}catch(i){yield As(i)}})}function ND(n,e,t){return w(this,null,function*(){let r=ce(n);try{let i=yield function(o,c){let l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(v=>(Ie(v!==null,37113),f=v.keys(),l.mutationQueue.removeMutationBatch(d,v))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(r.localStore,e);bI(r,e,t),II(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ta(r,i)}catch(i){yield As(i)}})}function II(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function bI(n,e,t){let r=ce(n),i=r.Au[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Sm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||TI(n,r)})}function TI(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(Jm(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),og(n))}function rE(n,e,t){for(let r of t)r instanceof Jl?(n.du.addReference(r.key,e),OD(n,r)):r instanceof Xl?(W(sg,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||TI(n,r.key)):Z(19791,{pu:r})}function OD(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(W(sg,"New document in limbo: "+t),n.Tu.add(r),og(n))}function og(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new X(je.fromString(e)),r=n.Vu.next();n.Eu.set(r,new bm(t)),n.Iu=n.Iu.insert(t,r),pI(n.remoteStore,new fa(In(fu(t.path)),r,"TargetPurposeLimboResolution",jm.le))}}function Ta(n,e,t){return w(this,null,function*(){let r=ce(n),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach((c,l)=>{o.push(r.fu(l,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let v=d?!d.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,v?"current":"not-current")}if(d){i.push(d);let v=em.Rs(l.targetId,d);s.push(v)}}))}),yield Promise.all(o),r.lu.Y_(i),yield function(l,d){return w(this,null,function*(){let f=ce(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>O.forEach(d,_=>O.forEach(_.ds,k=>f.persistence.referenceDelegate.addReference(v,_.targetId,k)).next(()=>O.forEach(_.As,k=>f.persistence.referenceDelegate.removeReference(v,_.targetId,k)))))}catch(v){if(!xs(v))throw v;W(Ym,"Failed to update sequence numbers: "+v)}for(let v of d){let _=v.targetId;if(!v.fromCache){let k=f.xs.get(_),M=k.snapshotVersion,$=k.withLastLimboFreeSnapshotVersion(M);f.xs=f.xs.insert(_,$)}}})}(r.localStore,s))})}function VD(n,e){return w(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){W(sg,"User change. New user:",e.toKey());let r=yield hI(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(c=>{c.forEach(l=>{l.reject(new z(P.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ta(t,r.ks)}})}function LD(n,e){let t=ce(n),r=t.Eu.get(e);if(r&&r.cu)return me().add(r.key);{let i=me(),s=t.Pu.get(e);if(!s)return i;for(let o of s){let c=t.hu.get(o);i=i.unionWith(c.view.eu)}return i}}function SI(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PD.bind(null,e),e.lu.Y_=TD.bind(null,e.eventManager),e.lu.gu=SD.bind(null,e.eventManager),e}function FD(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ND.bind(null,e),e}var CI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=gu(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return sD(this.persistence,new nm,t.initialUser,this.serializer)}Su(t){return new $l(Zp.fi,this.serializer)}bu(t){return new sm}terminate(){return w(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Cm=class extends CI{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ie(this.persistence.referenceDelegate instanceof ql,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jp(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new $l(r=>ql.fi(r,t),this.serializer)}};var UD=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VD.bind(null,this.syncEngine),yield bD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ym}()}createDatastore(t){let r=gu(t.databaseInfo.databaseId),i=function(o){return new um(o)}(t.databaseInfo);return function(o,c,l,d){return new pm(o,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,l){return new gm(i,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>nE(this.syncEngine,r,0),function(){return Hl.C()?new Hl:new om}())}createSyncEngine(t,r){return function(s,o,c,l,d,f,v){let _=new Tm(s,o,c,l,d,f);return v&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var t,r;yield function(s){return w(this,null,function*(){let o=ce(s);W(Ei,"RemoteStore shutting down."),o.da.add(5),yield ba(o),o.Ra.shutdown(),o.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var va=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Mr="FirestoreClient",Am=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=kl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>w(this,null,function*(){W(Mr,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=tg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jf(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W(Mr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield hI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function iE(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jD(n);W(Mr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Zw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Zw(e.remoteStore,i)),n._onlineComponents=e})}function jD(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Mr,"Using user provided OfflineComponentProvider");try{yield Jf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),yield Jf(n,new CI)}}else W(Mr,"Using default OfflineComponentProvider"),yield Jf(n,new Cm(void 0));return n._offlineComponents})}function AI(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Mr,"Using user provided OnlineComponentProvider"),yield iE(n,n._uninitializedComponentsProvider._online)):(W(Mr,"Using default OnlineComponentProvider"),yield iE(n,new UD))),n._onlineComponents})}function BD(n){return AI(n).then(e=>e.syncEngine)}function Zl(n){return w(this,null,function*(){let e=yield AI(n),t=e.eventManager;return t.onListen=CD.bind(null,e.syncEngine),t.onUnlisten=kD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RD.bind(null,e.syncEngine),t})}function $D(n,e,t={}){let r=new rn;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(s,o,c,l,d){let f=new va({next:_=>{f.xu(),o.enqueueAndForget(()=>rg(s,v));let k=_.docs.has(c);!k&&_.fromCache?d.reject(new z(P.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&_.fromCache&&l&&l.source==="server"?d.reject(new z(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new ga(fu(c.path),f,{includeMetadataChanges:!0,Qa:!0});return ng(s,v)}(yield Zl(n),n.asyncQueue,e,t,r)})),r.promise}function qD(n,e,t={}){let r=new rn;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(s,o,c,l,d){let f=new va({next:_=>{f.xu(),o.enqueueAndForget(()=>rg(s,v)),_.fromCache&&l.source==="server"?d.reject(new z(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new ga(c,f,{includeMetadataChanges:!0,Qa:!0});return ng(s,v)}(yield Zl(n),n.asyncQueue,e,t,r)})),r.promise}function xI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sE=new Map;function kI(n,e,t){if(!t)throw new z(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zD(n,e,t,r){if(e===!0&&r===!0)throw new z(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oE(n){if(!X.isDocumentKey(n))throw new z(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aE(n){if(X.isDocumentKey(n))throw new z(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z(12329,{type:typeof n})}function Nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yu(n);throw new z(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var RI="firestore.googleapis.com",cE=!0,eu=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RI,this.ssl=cE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nD)throw new z(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ss=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zf;switch(r.type){case"firstParty":return new rp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sE.get(t);r&&(W("ComponentProvider","Removing Datastore"),sE.delete(t),r.terminate())}(this),Promise.resolve()}};function DI(n,e,t,r={}){var i;n=Nt(n,Ss);let s=yr(e),o=n._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Gc(`https://${l}`),Wc("Firestore",!0)),o.host!==RI&&o.host!==l&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Ut(d,c)&&(n._setSettings(d),r.mockUserToken)){let f,v;if(typeof r.mockUserToken=="string")f=r.mockUserToken,v=et.MOCK_USER;else{f=U_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new z(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new et(_)}n._authCredentials=new ep(new Al(f,v))}}var Nr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ar=class n extends Nr{constructor(e,t,r){super(e,t,fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function PI(n,e,...t){if(n=$e(n),kI("collection","path",e),n instanceof Ss){let r=je.fromString(e,...t);return aE(r),new Ar(n,null,r)}{if(!(n instanceof _t||n instanceof Ar))throw new z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return aE(r),new Ar(n.firestore,null,r)}}function ag(n,e,...t){if(n=$e(n),arguments.length===1&&(e=kl.newId()),kI("doc","path",e),n instanceof Ss){let r=je.fromString(e,...t);return oE(r),new _t(n,null,new X(r))}{if(!(n instanceof _t||n instanceof Ar))throw new z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return oE(r),new _t(n.firestore,n instanceof Ar?n.converter:null,new X(r))}}var lE="AsyncQueue",tu=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Gl(this,"async_queue_retry"),this.rc=()=>{let r=Yf();r&&W(lE,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=Yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=Yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new rn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return w(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!xs(e))throw e;W(lE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Yn("INTERNAL UNHANDLED ERROR: ",uE(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=vm.createAndSchedule(this,e,t,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&Z(47125,{cc:uE(this.Xu)})}verifyOperationInProgress(){}lc(){return w(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function uE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var an=class extends Ss{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tu(e),this._firestoreClient=void 0,yield e}})}};function MI(n,e){let t=typeof n=="object"?n:oi(),r=typeof n=="string"?n:e||Ml,i=es(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=F_("firestore");s&&DI(i,...s)}return i}function Sa(n){if(n._terminated)throw new z(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HD(n),n._firestoreClient}function HD(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,f){return new cp(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,xI(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Am(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var _a=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new z(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ii=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Or=class{constructor(e){this._methodName=e}};var ya=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var wa=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var GD=/^__.*__$/,xm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Sn(e,this.data,this.fieldMask,t,this.fieldTransforms):new wi(e,this.data,t,this.fieldTransforms)}},nu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function NI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ic:n})}}var ru=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return su(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(NI(this.Ic)&&GD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},km=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gu(e)}bc(e,t,r,i=!1){return new ru({Ic:e,methodName:t,wc:r,path:Mt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wu(n){let e=n._freezeSettings(),t=gu(n._databaseId);return new km(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OI(n,e,t,r,i,s={}){let o=n.bc(s.merge||s.mergeFields?2:0,e,t,i);cg("Data must be an object, but it was:",o,r);let c=UI(r,o),l,d;if(s.merge)l=new Bt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let v of s.mergeFields){let _=Mm(e,v,t);if(!o.contains(_))throw new z(P.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);BI(f,_)||f.push(_)}l=new Bt(f),d=o.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,d=o.fieldTransforms;return new xm(new Pt(c),l,d)}var iu=class n extends Or{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function VI(n,e,t){return new ru({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Rm=class n extends Or{_toFieldTransform(e){return new da(e.path,new yi)}isEqual(e){return e instanceof n}},Dm=class n extends Or{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=VI(this,e,!0),r=this.Sc.map(s=>Ti(s,t)),i=new Rr(r);return new da(e.path,i)}isEqual(e){return e instanceof n&&Ut(this.Sc,e.Sc)}},Pm=class n extends Or{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=VI(this,e,!0),r=this.Sc.map(s=>Ti(s,t)),i=new Dr(r);return new da(e.path,i)}isEqual(e){return e instanceof n&&Ut(this.Sc,e.Sc)}};function LI(n,e,t,r){let i=n.bc(1,e,t);cg("Data must be an object, but it was:",i,r);let s=[],o=Pt.empty();Vr(r,(l,d)=>{let f=lg(e,l,t);d=$e(d);let v=i.mc(f);if(d instanceof iu)s.push(f);else{let _=Ti(d,v);_!=null&&(s.push(f),o.set(f,_))}});let c=new Bt(s);return new nu(o,c,i.fieldTransforms)}function FI(n,e,t,r,i,s){let o=n.bc(1,e,t),c=[Mm(e,r,t)],l=[i];if(s.length%2!=0)throw new z(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(Mm(e,s[_])),l.push(s[_+1]);let d=[],f=Pt.empty();for(let _=c.length-1;_>=0;--_)if(!BI(d,c[_])){let k=c[_],M=l[_];M=$e(M);let $=o.mc(k);if(M instanceof iu)d.push(k);else{let L=Ti(M,$);L!=null&&(d.push(k),f.set(k,L))}}let v=new Bt(d);return new nu(f,v,o.fieldTransforms)}function WD(n,e,t,r=!1){return Ti(t,n.bc(r?4:3,e))}function Ti(n,e){if(jI(n=$e(n)))return cg("Unsupported field value:",e,n),UI(n,e);if(n instanceof Or)return function(r,i){if(!NI(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=Ti(c,i.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:jl(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jl(i.serializer,s)}}if(r instanceof ya)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _a)return{bytesValue:iI(i.serializer,r._byteString)};if(r instanceof _t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Qm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wa)return function(o,c){return{mapValue:{fields:{[qm]:{stringValue:zm},[gs]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.gc("VectorValues must only contain numeric values.");return Km(c.serializer,d)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${yu(r)}`)}(n,e)}function UI(n,e){let t={};return RE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(n,(r,i)=>{let s=Ti(i,e.Ac(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function jI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof ya||n instanceof _a||n instanceof _t||n instanceof Or||n instanceof wa)}function cg(n,e,t){if(!jI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yu(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function Mm(n,e,t){if((e=$e(e))instanceof Ii)return e._internalPath;if(typeof e=="string")return lg(n,e);throw su("Field path arguments must be of type string or ",n,!1,void 0,t)}var KD=new RegExp("[~\\*/\\[\\]]");function lg(n,e,t){if(e.search(KD)>=0)throw su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ii(...e.split("."))._internalPath}catch{throw su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function su(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(P.INVALID_ARGUMENT,c+n+l)}function BI(n,e){return n.some(t=>t.isEqual(e))}var ou=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Nm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Eu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Nm=class extends ou{data(){return super.data()}};function Eu(n,e){return typeof e=="string"?lg(n,e):e instanceof Ii?e._internalPath:e._delegate._internalPath}function $I(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ea=class{},au=class extends Ea{};function qI(n,e,...t){let r=[];e instanceof Ea&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof Om).length,c=s.filter(l=>l instanceof cu).length;if(o>1||o>0&&c>0)throw new z(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var cu=class n extends au{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return GI(e._query,t),new Nr(e.firestore,e.converter,Ep(e._query,t))}_parse(e){let t=wu(e.firestore);return function(s,o,c,l,d,f,v){let _;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fE(v,f);let M=[];for(let $ of v)M.push(hE(l,s,$));_={arrayValue:{values:M}}}else _=hE(l,s,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fE(v,f),_=WD(c,o,v,f==="in"||f==="not-in");return Ke.create(d,f,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function zI(n,e,t){let r=e,i=Eu("where",n);return cu._create(i,r,t)}var Om=class n extends Ea{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:on.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)GI(o,l),o=Ep(o,l)}(e._query,t),new Nr(e.firestore,e.converter,Ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Vm=class n extends au{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new z(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _i(s,o)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new kr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function HI(n,e="asc"){let t=e,r=Eu("orderBy",n);return Vm._create(r,t)}function hE(n,e,t){if(typeof(t=$e(t))=="string"){if(t==="")throw new z(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zE(e)&&t.indexOf("/")!==-1)throw new z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!X.isDocumentKey(r))throw new z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dw(n,new X(r))}if(t instanceof _t)return Dw(n,t._key);throw new z(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yu(t)}.`)}function fE(n,e){if(!Array.isArray(n)||n.length===0)throw new z(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GI(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Lm=class{convertValue(e,t="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Vr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[gs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new wa(s)}convertGeoPoint(e){return new ya(Ve(e.latitude),Ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=hu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){let t=Jn(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);Ie(uI(r),9688,{name:e});let i=new Nl(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(t)||Yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function WI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},lu=class extends ou{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Eu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},fs=class extends lu{data(e={}){return super.data(e)}},uu=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fs(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new fs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new fs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:QD(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function QD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:n})}}function KI(n){n=Nt(n,_t);let e=Nt(n.firestore,an);return $D(Sa(e),n._key).then(t=>ZI(e,n,t))}var Ia=class extends Lm{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}};function QI(n){n=Nt(n,Nr);let e=Nt(n.firestore,an),t=Sa(e),r=new Ia(e);return $I(n._query),qD(t,n._query).then(i=>new uu(e,r,n,i))}function YI(n,e,t,...r){n=Nt(n,_t);let i=Nt(n.firestore,an),s=wu(i),o;return o=typeof(e=$e(e))=="string"||e instanceof Ii?FI(s,"updateDoc",n._key,e,t,r):LI(s,"updateDoc",n._key,e),Iu(i,[o.toMutation(n._key,$t.exists(!0))])}function JI(n){return Iu(Nt(n.firestore,an),[new bs(n._key,$t.none())])}function XI(n,e){let t=Nt(n.firestore,an),r=ag(n),i=WI(n.converter,e);return Iu(t,[OI(wu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,$t.exists(!1))]).then(()=>r)}function ug(n,...e){var t,r,i;n=$e(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||dE(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dE(e[o])){let v=e[o];e[o]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let l,d,f;if(n instanceof _t)d=Nt(n.firestore,an),f=fu(n._key.path),l={next:v=>{e[o]&&e[o](ZI(d,n,v))},error:e[o+1],complete:e[o+2]};else{let v=Nt(n,Nr);d=Nt(v.firestore,an),f=v._query;let _=new Ia(d);l={next:k=>{e[o]&&e[o](new uu(d,_,v,k))},error:e[o+1],complete:e[o+2]},$I(n._query)}return function(_,k,M,$){let L=new va($),oe=new ga(k,L,M);return _.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return ng(yield Zl(_),oe)})),()=>{L.xu(),_.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return rg(yield Zl(_),oe)}))}}(Sa(d),f,c,l)}function Iu(n,e){return function(r,i){let s=new rn;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return DD(yield BD(r),i,s)})),s.promise}(Sa(n),e)}function ZI(n,e,t){let r=t.docs.get(e._key),i=new Ia(n);return new lu(n,i,e._key,r,new mi(t.hasPendingWrites,t.fromCache),e.converter)}var Fm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wu(e)}set(e,t,r){this._verifyNotCommitted();let i=Xf(e,this._firestore),s=WI(i.converter,t,r),o=OI(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,$t.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Xf(e,this._firestore),o;return o=typeof(t=$e(t))=="string"||t instanceof Ii?FI(this._dataReader,"WriteBatch.update",s._key,t,r,i):LI(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,$t.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Xf(e,this._firestore);return this._mutations=this._mutations.concat(new bs(t._key,$t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xf(n,e){if((n=$e(n)).firestore!==e)throw new z(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function eb(){return new Rm("serverTimestamp")}function tb(...n){return new Dm("arrayUnion",n)}function nb(...n){return new Pm("arrayRemove",n)}function rb(n){return Sa(n=Nt(n,an)),new Fm(n,e=>Iu(n,e))}(function(e,t=!0){(function(i){Cs=i})(Er),en(new vt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new an(new tp(r.getProvider("auth-internal")),new ip(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),qe(Ew,Iw,e),qe(Ew,Iw,"esm2017")})();var bu=function(){return bu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},bu.apply(this,arguments)};var XD={includeMetadataChanges:!1};function dg(n,e){return e===void 0&&(e=XD),new St(function(t){var r=ug(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ib(n){return dg(n,{includeMetadataChanges:!0})}function sb(n,e){return e===void 0&&(e={}),ib(n).pipe(ae(function(t){return hg(t,e)}))}function hg(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:bu(bu({},r),(t={},t[e.idField]=n.id,t))}function ob(n){return dg(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function ab(n,e){return e===void 0&&(e={}),ob(n).pipe(ae(function(t){return t.map(function(r){return hg(r,e)})}))}var cn=class{constructor(e){return e}},cb="firestore",fg=class{constructor(){return ns(cb)}};var pg=new we("angularfire2.firestore-instances");function ZD(n,e){let t=$o(cb,n,e);return t&&new cn(t)}function eP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new cn(r)}}var tP={provide:fg,deps:[[new Vt,pg]]},nP={provide:cn,useFactory:ZD,deps:[[new Vt,pg],zn]};function lb(n,...e){return qe("angularfire",Ir.full,"fst"),lr([nP,tP,{provide:pg,useFactory:eP(n),multi:!0,deps:[lt,Ct,br,ci,[new Vt,ea],[new Vt,rs],...e]}])}var Ca=Ue(ab,!0);var ub=Ue(sb,!0);var Rs=Ue(XI,!0,2);var Lr=Ue(PI,!0,2);var Tu=Ue(JI,!0,2);var yt=Ue(ag,!0,2);var Su=Ue(KI,!0);var Ds=Ue(QI,!0);var db=Ue(MI,!0);var mg=Ue(HI,!0,2),Cn=Ue(qI,!0,2);var An=Ue(YI,!0,2);var xn=Ue(zI,!0,2),gg=Ue(rb,!0,2);var Le=class n{constructor(e){this.auth=e;this.user$=mw(this.auth)}user$;signInWithGoogle(){let e=new Nf;return vw(this.auth,e)}signOut(){return _w(this.auth)}static \u0275fac=function(t){return new(t||n)(te(hi))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function rP(n,e){if(n&1&&(Qt(0),b(1),Yt()),n&2){let t=e.ngIf;R(),Fe(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function iP(n,e){n&1&&b(0," Welcome! ")}function sP(n,e){n&1&&(p(0,"div",45),U(1,"div",46),p(2,"span",47),b(3,"Loading quote..."),g()())}function oP(n,e){if(n&1&&(p(0,"div",48)(1,"blockquote",49),b(2),g(),p(3,"p",50),b(4),g()()),n&2){let t=V();R(2),Fe(' "',t.homeQuote.q,'" '),R(2),Fe(" \u2014 ",t.homeQuote.a," ")}}function aP(n,e){if(n&1){let t=de();p(0,"div",51)(1,"p",52),b(2),g(),p(3,"button",53),F("click",function(){H(t);let i=V();return G(i.refreshQuote())}),b(4," Try again "),g()()}if(n&2){let t=V();R(2),ge(t.quoteError)}}var Cu=class n{constructor(e,t,r){this.authService=e;this.router=t;this.quotesService=r}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}navigateToFamilyTree(){this.router.navigate(["/family-tree"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)(q(Le),q(Ne),q(Sv))};static \u0275cmp=Se({type:n,selectors:[["app-home"]],decls:80,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-yellow-100","dark:bg-yellow-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-yellow-200","dark:group-hover:bg-yellow-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4s-3.5 3-3.5 6c0 1.5 1 4 3.5 4s3.5-2.5 3.5-4c0-3-3.5-6-3.5-6zM12 14v4m-4-4h8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4a4 4 0 100-8 4 4 0 000 8zM3 20h18"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-yellow-600","dark:group-hover:text-yellow-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,r){if(t&1){let i=de();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),J(4,rP,2,1,"ng-container",5),_e(5,"async"),J(6,iP,1,0,"ng-template",null,0,Bn),b(8," Explore some of my utilities, tools and research items. "),g()(),p(9,"div",6)(10,"div",7),F("click",function(){return H(i),G(r.navigateToLists())}),p(11,"div",8)(12,"div",9)(13,"div",10),Q(),p(14,"svg",11),U(15,"path",12),g()()(),ie(),p(16,"div",13)(17,"h3",14),b(18," Todo Lists "),g(),p(19,"p",15),b(20," Create and manage your todo lists "),g()()()(),p(21,"div",7),F("click",function(){return H(i),G(r.navigateToIpLookup())}),p(22,"div",8)(23,"div",9)(24,"div",16),Q(),p(25,"svg",17),U(26,"path",18)(27,"path",19),g()()(),ie(),p(28,"div",13)(29,"h3",20),b(30," IP Lookup "),g(),p(31,"p",15),b(32," Check your IP address and location "),g()()()(),p(33,"div",7),F("click",function(){return H(i),G(r.navigateToQuotes())}),p(34,"div",8)(35,"div",9)(36,"div",21),Q(),p(37,"svg",22),U(38,"path",23),g()()(),ie(),p(39,"div",13)(40,"h3",24),b(41," Quotes "),g(),p(42,"p",15),b(43," Get inspired with random quotes "),g()()()(),p(44,"div",7),F("click",function(){return H(i),G(r.showProfile())}),p(45,"div",8)(46,"div",9)(47,"div",25),Q(),p(48,"svg",26),U(49,"path",27),g()()(),ie(),p(50,"div",13)(51,"h3",28),b(52," Profile "),g(),p(53,"p",15),b(54," View your account information "),g()()()(),p(55,"div",7),F("click",function(){return H(i),G(r.navigateToFamilyTree())}),p(56,"div",8)(57,"div",9)(58,"div",29),Q(),p(59,"svg",30),U(60,"path",31)(61,"path",32),g()()(),ie(),p(62,"div",13)(63,"h3",33),b(64," Family Tree "),g(),p(65,"p",15),b(66," Manage your family tree "),g()()()()(),p(67,"div",34)(68,"div",35)(69,"div",36)(70,"h2",37),Q(),p(71,"svg",38),U(72,"path",23),g(),b(73," Daily Inspiration "),g(),ie(),p(74,"button",39),F("click",function(){return H(i),G(r.refreshQuote())}),Q(),p(75,"svg",40),U(76,"path",41),g()()(),J(77,sP,4,0,"div",42)(78,oP,5,2,"div",43)(79,aP,5,1,"div",44),g()()()()}if(t&2){let i=Ln(7);R(4),N("ngIf",ke(5,6,r.user$))("ngIfElse",i),R(70),N("disabled",r.quoteLoading),R(3),N("ngIf",r.quoteLoading),R(),N("ngIf",!r.quoteLoading&&r.homeQuote),R(),N("ngIf",!r.quoteLoading&&!r.homeQuote&&r.quoteError)}},dependencies:[Re,He,Ft],encapsulation:2})};var Au=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(te(uc))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function uP(n,e){n&1&&(p(0,"div",8)(1,"div",9),U(2,"div",10),p(3,"span",11),b(4,"Loading IP information..."),g()()())}function dP(n,e){if(n&1&&(p(0,"div",12)(1,"div",13),Q(),p(2,"svg",14),U(3,"path",15),g(),ie(),p(4,"div")(5,"h3",16),b(6,"Error"),g(),p(7,"p",17),b(8),g()()()()),n&2){let t=V();R(8),ge(t.error)}}function hP(n,e){n&1&&(Q(),p(0,"svg",49),U(1,"path",50),g())}function fP(n,e){n&1&&(Q(),p(0,"svg",51),U(1,"path",50),g())}function pP(n,e){if(n&1){let t=de();p(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),Q(),p(4,"svg",22),U(5,"path",23),g()(),ie(),p(6,"div")(7,"h2",24),b(8,"Your IP Address"),g(),p(9,"p",11),b(10,"Current network information"),g()()(),p(11,"div",25)(12,"div",26)(13,"div")(14,"label",27),b(15,"IP Address"),g(),p(16,"div",28)(17,"code",29),b(18),g(),p(19,"button",30),F("click",function(){H(t);let i=V();return G(i.copyToClipboard(i.ipInfo.ip))}),Q(),p(20,"svg",31),U(21,"path",32),g()()()(),ie(),p(22,"div")(23,"label",27),b(24,"Type"),g(),p(25,"span",33),b(26),g()()(),p(27,"div",26)(28,"div")(29,"label",27),b(30,"Continent"),g(),p(31,"p",34),b(32),g()(),p(33,"div")(34,"label",27),b(35,"Country"),g(),p(36,"p",34),b(37),g()()()()(),p(38,"div",35)(39,"div",19)(40,"h3",36),Q(),p(41,"svg",37),U(42,"path",38)(43,"path",39),g(),b(44," Location Details "),g(),ie(),p(45,"div",40)(46,"div",41)(47,"span",42),b(48,"Region:"),g(),p(49,"span",43),b(50),g()(),p(51,"div",41)(52,"span",42),b(53,"City:"),g(),p(54,"span",43),b(55),g()(),p(56,"div",41)(57,"span",42),b(58,"ZIP Code:"),g(),p(59,"span",43),b(60),g()(),p(61,"div",41)(62,"span",42),b(63,"Latitude:"),g(),p(64,"span",43),b(65),g()(),p(66,"div",41)(67,"span",42),b(68,"Longitude:"),g(),p(69,"span",43),b(70),g()()()(),p(71,"div",19)(72,"h3",36),Q(),p(73,"svg",37),U(74,"path",44),g(),b(75," Network Information "),g(),ie(),p(76,"div",40)(77,"div",41)(78,"span",42),b(79,"ISP:"),g(),p(80,"span",43),b(81),g()(),p(82,"div",41)(83,"span",42),b(84,"Organization:"),g(),p(85,"span",43),b(86),g()(),p(87,"div",41)(88,"span",42),b(89,"ASN:"),g(),p(90,"span",43),b(91),g()()()()(),p(92,"div",45)(93,"button",46),F("click",function(){H(t);let i=V();return G(i.refreshIpInfo())}),J(94,hP,2,0,"svg",47)(95,fP,2,0,"svg",48),b(96),g()()()}if(n&2){let t=V();R(18),ge(t.ipInfo.ip),R(8),Fe(" ",t.ipInfo.type||"Unknown"," "),R(6),ge(t.ipInfo.continent_name||"Unknown"),R(5),ge(t.ipInfo.country_name||"Unknown"),R(13),ge(t.ipInfo.region_name||"Unknown"),R(5),ge(t.ipInfo.city||"Unknown"),R(5),ge(t.ipInfo.zip||"Unknown"),R(5),ge(t.ipInfo.latitude||"Unknown"),R(5),ge(t.ipInfo.longitude||"Unknown"),R(11),ge((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),R(5),ge((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),R(5),ge((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown"),R(2),N("disabled",t.isLoading),R(),N("ngIf",!t.isLoading),R(),N("ngIf",t.isLoading),R(),Fe(" ",t.isLoading?"Refreshing...":"Refresh IP Info"," ")}}var xu=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)(q(Au))};static \u0275cmp=Se({type:n,selectors:[["app-ip-lookup"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2","sm:mb-4"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center"],[1,"btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-1.5 sm:mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-1.5 sm:mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2","animate-spin"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(4," IP Address Lookup "),g(),p(5,"p",4),b(6," Get detailed information about your current IP address and location "),g()(),J(7,uP,5,0,"div",5)(8,dP,9,1,"div",6)(9,pP,97,16,"div",7),g()()),t&2&&(R(7),N("ngIf",r.isLoading),R(),N("ngIf",r.error),R(),N("ngIf",r.ipInfo&&!r.isLoading))},dependencies:[Re,He,Vo],encapsulation:2})};var Eb=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(q(Vi),q(ur))};static \u0275dir=Xe({type:n})}return n})(),mP=(()=>{class n extends Eb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275dir=Xe({type:n,features:[un]})}return n})(),wg=new we("");var gP={provide:wg,useExisting:Gr(()=>bt),multi:!0};function vP(){let n=hr()?hr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var _P=new we(""),bt=(()=>{class n extends Eb{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!vP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(q(Vi),q(ur),q(_P,8))};static \u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&F("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Kr([gP]),un]})}return n})();function Eg(n){return n==null||Ig(n)===0}function Ig(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ma=new we(""),ju=new we(""),yP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ln=class{static min(e){return wP(e)}static max(e){return EP(e)}static required(e){return Ib(e)}static requiredTrue(e){return IP(e)}static email(e){return bP(e)}static minLength(e){return TP(e)}static maxLength(e){return SP(e)}static pattern(e){return CP(e)}static nullValidator(e){return Ru()}static compose(e){return xb(e)}static composeAsync(e){return kb(e)}};function wP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function EP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Ib(n){return Eg(n.value)?{required:!0}:null}function IP(n){return n.value===!0?null:{required:!0}}function bP(n){return Eg(n.value)||yP.test(n.value)?null:{email:!0}}function TP(n){return e=>{let t=e.value?.length??Ig(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function SP(n){return e=>{let t=e.value?.length??Ig(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function CP(n){if(!n)return Ru;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Eg(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ru(n){return null}function bb(n){return n!=null}function Tb(n){return ac(n)?Te(n):n}function Sb(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function Cb(n,e){return e.map(t=>t(n))}function AP(n){return!n.validate}function Ab(n){return n.map(e=>AP(e)?e:t=>e.validate(t))}function xb(n){if(!n)return null;let e=n.filter(bb);return e.length==0?null:function(t){return Sb(Cb(t,e))}}function bg(n){return n!=null?xb(Ab(n)):null}function kb(n){if(!n)return null;let e=n.filter(bb);return e.length==0?null:function(t){let r=Cb(t,e).map(Tb);return V0(r).pipe(ae(Sb))}}function Tg(n){return n!=null?kb(Ab(n)):null}function fb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Rb(n){return n._rawValidators}function Db(n){return n._rawAsyncValidators}function vg(n){return n?Array.isArray(n)?n:[n]:[]}function Du(n,e){return Array.isArray(n)?n.includes(e):n===e}function pb(n,e){let t=vg(e);return vg(n).forEach(i=>{Du(t,i)||t.push(i)}),t}function mb(n,e){return vg(e).filter(t=>!Du(n,t))}var Pu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tr=class extends Pu{name;get formDirective(){return null}get path(){return null}},Si=class extends Pu{_parent=null;name=null;valueAccessor=null},Mu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},xP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},z4=pe(B({},xP),{"[class.ng-submitted]":"isSubmitted"}),zt=(()=>{class n extends Mu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(Si,2))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&uo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[un]})}return n})(),Ht=(()=>{class n extends Mu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(tr,10))};static \u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&uo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[un]})}return n})();var Aa="VALID",ku="INVALID",Ps="PENDING",xa="DISABLED",Fr=class{},Nu=class extends Fr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ra=class extends Fr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Da=class extends Fr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ms=class extends Fr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Ou=class extends Fr{source;constructor(e){super(),this.source=e}},Vu=class extends Fr{source;constructor(e){super(),this.source=e}};function Sg(n){return(Bu(n)?n.validators:n)||null}function kP(n){return Array.isArray(n)?bg(n):n||null}function Cg(n,e){return(Bu(e)?e.asyncValidators:n)||null}function RP(n){return Array.isArray(n)?Tg(n):n||null}function Bu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Pb(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Pe(1e3,"");if(!r[t])throw new Pe(1001,"")}function Mb(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Pe(1002,"")})}var Ns=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Jt(this.statusReactive)}set status(e){Jt(()=>this.statusReactive.set(e))}_status=Li(()=>this.statusReactive());statusReactive=Vn(void 0);get valid(){return this.status===Aa}get invalid(){return this.status===ku}get pending(){return this.status==Ps}get disabled(){return this.status===xa}get enabled(){return this.status!==xa}errors;get pristine(){return Jt(this.pristineReactive)}set pristine(e){Jt(()=>this.pristineReactive.set(e))}_pristine=Li(()=>this.pristineReactive());pristineReactive=Vn(!0);get dirty(){return!this.pristine}get touched(){return Jt(this.touchedReactive)}set touched(e){Jt(()=>this.touchedReactive.set(e))}_touched=Li(()=>this.touchedReactive());touchedReactive=Vn(!1);get untouched(){return!this.touched}_events=new Kt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mb(e,this._rawAsyncValidators))}hasValidator(e){return Du(this._rawValidators,e)}hasAsyncValidator(e){return Du(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Da(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Da(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ra(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ra(!0,r))}markAsPending(e={}){this.status=Ps;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ms(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xa,this.errors=null,this._forEachChild(i=>{i.disable(pe(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nu(this.value,r)),this._events.next(new Ms(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Aa,this._forEachChild(r=>{r.enable(pe(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Aa||this.status===Ps)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nu(this.value,t)),this._events.next(new Ms(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xa:Aa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ps,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Tb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ms(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Oe,this.statusChanges=new Oe}_calculateStatus(){return this._allControlsDisabled()?xa:this.errors?ku:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ps)?Ps:this._anyControlsHaveStatus(ku)?ku:Aa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ra(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Da(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=kP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=RP(this._rawAsyncValidators)}},Os=class extends Ns{constructor(e,t,r){super(Sg(t),Cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Mb(this,!0,e),Object.keys(e).forEach(r=>{Pb(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _g=class extends Os{};var Na=new we("",{providedIn:"root",factory:()=>$u}),$u="always";function Nb(n,e){return[...e.path,n]}function Lu(n,e,t=$u){Ag(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),PP(n,e),NP(n,e),MP(n,e),DP(n,e)}function gb(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Fu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DP(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ag(n,e){let t=Rb(n);e.validator!==null?n.setValidators(fb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Db(n);e.asyncValidator!==null?n.setAsyncValidators(fb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Fu(e._rawValidators,i),Fu(e._rawAsyncValidators,i)}function Uu(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Rb(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Db(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Fu(e._rawValidators,r),Fu(e._rawAsyncValidators,r),t}function PP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ob(n,e)})}function MP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ob(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Ob(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NP(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Vb(n,e){n==null,Ag(n,e)}function OP(n,e){return Uu(n,e)}function Lb(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function VP(n){return Object.getPrototypeOf(n.constructor)===mP}function Fb(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ub(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===bt?t=s:VP(s)?r=s:i=s}),i||r||t||null}function LP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var FP={provide:tr,useExisting:Gr(()=>Ci)},ka=Promise.resolve(),Ci=(()=>{class n extends tr{callSetDisabledState;get submitted(){return Jt(this.submittedReactive)}_submitted=Li(()=>this.submittedReactive());submittedReactive=Vn(!1);_directives=new Set;form;ngSubmit=new Oe;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Os({},bg(t),Tg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ka.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Lu(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ka.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ka.then(()=>{let r=this._findContainer(t.path),i=new Os({});Vb(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ka.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ka.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Fb(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Ou(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Vu(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(q(Ma,10),q(ju,10),q(Na,8))};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kr([FP]),un]})}return n})();function vb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _b(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Pa=class extends Ns{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Sg(t),Cg(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_b(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_b(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var UP=n=>n instanceof Pa;var jP={provide:Si,useExisting:Gr(()=>Ai)},yb=Promise.resolve(),Ai=(()=>{class n extends Si{_changeDetectorRef;callSetDisabledState;control=new Pa;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Oe;constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ub(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Lb(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Yr(r);yb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Nb(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(q(tr,9),q(Ma,10),q(ju,10),q(wg,10),q(Fi,8),q(Na,8))};static \u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Kr([jP]),un,Lt]})}return n})();var Gt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var jb=new we("");var BP={provide:tr,useExisting:Gr(()=>xi)},xi=(()=>{class n extends tr{callSetDisabledState;get submitted(){return Jt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Li(()=>this._submittedReactive());_submittedReactive=Vn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Oe;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Lu(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gb(t.control||null,t,!1),LP(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Fb(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Ou(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Vu(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(gb(r||null,t),UP(i)&&(Lu(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Vb(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&OP(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ag(this.form,this),this._oldForm&&Uu(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(q(Ma,10),q(ju,10),q(Na,8))};static \u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kr([BP]),un,Lt]})}return n})();var $P={provide:Si,useExisting:Gr(()=>ki)},ki=(()=>{class n extends Si{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Oe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ub(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Lb(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Nb(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(q(tr,13),q(Ma,10),q(ju,10),q(wg,10),q(jb,8))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Kr([$P]),un,Lt]})}return n})();var qP=(()=>{class n{_validator=Ru;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ru,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,features:[Lt]})}return n})();var zP={provide:Ma,useExisting:Gr(()=>Oa),multi:!0};var Oa=(()=>{class n extends qP{required;inputName="required";normalizeInput=Yr;createValidator=t=>Ib;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275dir=Xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&cc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Kr([zP]),un]})}return n})();var Bb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=cr({})}return n})(),yg=class extends Ns{constructor(e,t,r){super(Sg(t),Cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Mb(this,!1,e),e.forEach((r,i)=>{Pb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function wb(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Vs=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return wb(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Os(i,s)}record(t,r=null){let i=this._reduceControls(t);return new _g(i,r)}control(t,r,i){let s={};return this.useNonNullable?(wb(r)?s=r:(s.validators=r,s.asyncValidators=i),new Pa(t,pe(B({},s),{nonNullable:!0}))):new Pa(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new yg(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Pa)return t;if(t instanceof Ns)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ls=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Na,useValue:t.callSetDisabledState??$u}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=cr({imports:[Bb]})}return n})(),Fs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jb,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Na,useValue:t.callSetDisabledState??$u}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=cr({imports:[Bb]})}return n})();function HP(n,e){if(n&1&&(p(0,"span",26),b(1),g()),n&2){let t=V(3);R(),lc(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function GP(n,e){if(n&1){let t=de();p(0,"form",9),F("ngSubmit",function(){H(t);let i=V(2);return G(i.saveEditList())}),p(1,"div")(2,"label",10),b(3," Title * "),g(),p(4,"input",11),jn("ngModelChange",function(i){H(t);let s=V(2);return Un(s.editListTitle,i)||(s.editListTitle=i),G(i)}),g()(),p(5,"div")(6,"label",12),b(7," Description (optional) "),g(),p(8,"textarea",13),jn("ngModelChange",function(i){H(t);let s=V(2);return Un(s.editListDescription,i)||(s.editListDescription=i),G(i)}),g()(),p(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),b(13,"Sharing"),g(),p(14,"p",17),b(15," Share this list with others "),J(16,HP,2,2,"span",18),g()(),p(17,"button",19),F("click",function(){H(t);let i=V(2);return G(i.switchToShare())}),Q(),p(18,"svg",20),U(19,"path",21),g(),ie(),p(20,"span"),b(21,"Share"),g()()()(),p(22,"div",22)(23,"button",23),F("click",function(){H(t);let i=V(2);return G(i.onClose())}),b(24,"Cancel"),g(),p(25,"button",24),Q(),p(26,"svg",20),U(27,"path",25),g(),ie(),p(28,"span"),b(29,"Save Changes"),g()()()()}if(n&2){let t=V(2);R(4),Fn("ngModel",t.editListTitle),R(4),Fn("ngModel",t.editListDescription),R(8),N("ngIf",t.getSharedCount(t.list)>0),R(9),N("disabled",!t.editListTitle.trim())}}function WP(n,e){if(n&1){let t=de();p(0,"form",9),F("ngSubmit",function(){H(t);let i=V(2);return G(i.confirmShare())}),p(1,"div")(2,"label",27),b(3," Email Address "),g(),p(4,"input",28),jn("ngModelChange",function(i){H(t);let s=V(2);return Un(s.shareEmail,i)||(s.shareEmail=i),G(i)}),g()(),p(5,"div",22)(6,"button",23),F("click",function(){H(t);let i=V(2);return G(i.switchToEdit())}),b(7,"Back"),g(),p(8,"button",24),Q(),p(9,"svg",20),U(10,"path",21),g(),ie(),p(11,"span"),b(12,"Share"),g()()()()}if(n&2){let t=V(2);R(4),Fn("ngModel",t.shareEmail),R(4),N("disabled",!t.shareEmail.trim())}}function KP(n,e){if(n&1){let t=de();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),b(4),g(),p(5,"button",5),F("click",function(){H(t);let i=V();return G(i.onClose())}),Q(),p(6,"svg",6),U(7,"path",7),g()()(),J(8,GP,30,4,"form",8)(9,WP,13,2,"form",8),g()()}if(n&2){let t=V();R(4),ge(t.mode==="edit"?"Edit List":"Share List"),R(4),N("ngIf",t.mode==="edit"),R(),N("ngIf",t.mode==="share")}}var js=class n{open=!1;list=null;mode="edit";save=new Oe;share=new Oe;close=new Oe;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Se({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[Lt],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&J(0,KP,10,3,"div",0),t&2&&N("ngIf",r.open)},dependencies:[Re,He,Ls,Gt,bt,zt,Ht,Oa,Ai,Ci],encapsulation:2})};var Ur=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=Lr(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(xe(e=>{if(!e)return Y([]);let t=Cn(this.listsCollection,xn("owner","==",e.uid),mg("updatedAt","desc")),r=Cn(this.listsCollection,xn("sharedWith","array-contains",e.email),mg("updatedAt","desc"));return Te(Promise.all([Ds(t),Ds(r)])).pipe(ae(([i,s])=>{let o=i.docs.map(f=>pe(B({},f.data()),{id:f.id})),c=s.docs.map(f=>pe(B({},f.data()),{id:f.id}));return[...o,...c].filter((f,v,_)=>v===_.findIndex(k=>k.id===f.id)).sort((f,v)=>new Date(v.updatedAt).getTime()-new Date(f.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(Je(1),xe(r=>{if(!r)return Y(Promise.reject("User not logged in"));let i=new Date,s={title:e,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),Te(Rs(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=yt(this.firestore,`todoLists/${e.id}`),s=e,{id:r}=s,i=Za(s,["id"]);return i.updatedAt=new Date,Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),console.log("Updating list with data:",i),An(t,i)}deleteList(e){let t=yt(this.firestore,`todoLists/${e}`);return Tu(t)}shareList(e,t){return w(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let r=yt(this.firestore,`todoLists/${e}`);try{let i=yield Su(r);if(!i.exists())throw new Error("List not found");let s=i.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let o=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",o);let c={sharedWith:o,updatedAt:new Date};console.log("TodoListService: Updating list with data:",c),yield An(r,c),console.log("TodoListService: List shared successfully")}catch(i){throw console.error("TodoListService: Error sharing list:",i),i}})}unshareList(e,t){return w(this,null,function*(){let r=yt(this.firestore,`todoLists/${e}`),i=yield Su(r);if(!i.exists())throw new Error("List not found");let o=(i.data().sharedWith||[]).filter(c=>c!==t);yield An(r,{sharedWith:o,updatedAt:new Date})})}hasAccess(e){return w(this,null,function*(){return tc(this.authService.user$.pipe(Je(1),xe(t=>t?Te(Su(yt(this.firestore,`todoLists/${e}`))).pipe(ae(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):Y(!1))))})}static \u0275fac=function(t){return new(t||n)(te(cn),te(Le))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var qu=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=Lr(this.firestore,"todos")}firestore=K(cn);todosCollection;getTodosForList(e){return this.authService.user$.pipe(xe(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),Y([]);console.log("TodoService: Creating query for todos in list:",e);let r=Cn(this.todosCollection,xn("listId","==",e));return console.log("TodoService: Executing todos query"),Ca(r,{idField:"id"}).pipe(ae(i=>i),Nn(i=>(console.error("TodoService: Error loading todos:",i),Y([]))))}))}addTodo(e,t){return this.authService.user$.pipe(Je(1),xe(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),Te(Ds(Cn(this.todosCollection,xn("listId","==",e)))).pipe(xe(i=>{let s=i.size,o=new Date,c={title:t,completed:!1,listId:e,position:s,createdBy:r.uid,createdAt:o,updatedAt:o};return console.log("Creating todo with data:",c),Te(Rs(this.todosCollection,c))}))):(console.error("User not logged in"),Y(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=yt(this.firestore,`todos/${e.id}`),s=e,{id:r}=s,i=Za(s,["id"]);return i.updatedAt=new Date,An(t,i)}deleteTodo(e){let t=yt(this.firestore,`todos/${e}`);return Tu(t)}updateTodoPosition(e){let t=gg(this.firestore);return e.forEach((r,i)=>{if(r.id){let s=yt(this.firestore,`todos/${r.id}`);t.update(s,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return Te(Ds(Cn(this.todosCollection,xn("listId","==",e)))).pipe(xe(t=>{let r=gg(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),Te(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(te(Le),te(Ur))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function YP(n,e){n&1&&(p(0,"div",20)(1,"div",21),U(2,"div",22),p(3,"span",9),b(4,"Loading todo list..."),g()()())}function JP(n,e){if(n&1&&(p(0,"div",23)(1,"div",24),Q(),p(2,"svg",25),U(3,"path",26),g(),ie(),p(4,"div")(5,"h3",27),b(6,"Error"),g(),p(7,"p",28),b(8),g()()()()),n&2){let t=V();R(8),ge(t.error)}}function XP(n,e){n&1&&(Q(),p(0,"svg",48),U(1,"path",49),g())}function ZP(n,e){n&1&&(Q(),p(0,"svg",50),U(1,"path",51),g())}function e2(n,e){n&1&&(p(0,"div",52),Q(),p(1,"svg",53),U(2,"path",54),g(),ie(),p(3,"h3",55),b(4,"No todos yet"),g(),p(5,"p",56),b(6,"Add your first todo item above to get started."),g()())}function t2(n,e){if(n&1){let t=de();p(0,"div",59)(1,"input",60),F("change",function(){let i=H(t).$implicit,s=V(3);return G(s.toggleTodo(i))}),g(),p(2,"div",3)(3,"input",61),F("blur",function(i){let s=H(t).$implicit,o=V(3);return G(o.updateTodoText(s,i))}),g()(),p(4,"button",62),F("click",function(){let i=H(t).$implicit,s=V(3);return G(s.deleteTodo(i))}),Q(),p(5,"svg",12),U(6,"path",63),g()()()}if(n&2){let t=e.$implicit;R(),N("checked",t.completed),R(2),uo("line-through",t.completed)("text-gray-500",t.completed),N("value",t.title)}}function n2(n,e){if(n&1&&(p(0,"div",57),J(1,t2,7,6,"div",58),g()),n&2){let t=V(2);R(),N("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function r2(n,e){if(n&1){let t=de();p(0,"div",29)(1,"div",30)(2,"form",31),F("ngSubmit",function(){H(t);let i=V();return G(i.addTodo())}),p(3,"input",32),jn("ngModelChange",function(i){H(t);let s=V();return Un(s.newTodoText,i)||(s.newTodoText=i),G(i)}),g(),p(4,"button",33),J(5,XP,2,0,"svg",34)(6,ZP,2,0,"svg",35),p(7,"span"),b(8),g()()()(),p(9,"div",30)(10,"div",36)(11,"h2",37),b(12,"Todo Items"),g(),p(13,"div",38)(14,"span"),b(15),g(),p(16,"div",39),U(17,"div",40),g()()(),J(18,e2,7,0,"div",41)(19,n2,2,2,"div",42),g(),p(20,"div",30)(21,"h3",43),b(22,"List Information"),g(),p(23,"div",44)(24,"div",45)(25,"span",46),b(26,"Created:"),g(),p(27,"span",47),b(28),_e(29,"date"),g()(),p(30,"div",45)(31,"span",46),b(32,"Last Updated:"),g(),p(33,"span",47),b(34),_e(35,"date"),g()(),p(36,"div",45)(37,"span",46),b(38,"Owner:"),g(),p(39,"span",47),b(40),g()(),p(41,"div",45)(42,"span",46),b(43,"Shared With:"),g(),p(44,"span",47),b(45),g()()()()()}if(n&2){let t=V();R(3),Fn("ngModel",t.newTodoText),N("disabled",t.isAdding),R(),N("disabled",!t.newTodoText.trim()||t.isAdding),R(),N("ngIf",!t.isAdding),R(),N("ngIf",t.isAdding),R(2),ge(t.isAdding?"Adding...":"Add"),R(7),lc("",t.completedCount," of ",t.todos.length||0," completed"),R(2),sv("width",t.completionPercentage,"%"),R(),N("ngIf",!t.todos.length),R(),N("ngIf",t.todos.length>0),R(9),ge(Qr(29,16,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),R(6),ge(Qr(35,19,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),R(6),ge(t.ownerName||"Loading..."),R(5),Fe("",t.todoList.sharedWith.length||0," users")}}var zu=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.todoListService=r;this.todoService=i;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(Je(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:r=>{if(console.log("All lists loaded:",r),this.todoList=r.find(i=>i.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(i=>{if(console.log("User has access to list:",i),!i){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let o="Failed to load todos. ";s.code==="permission-denied"?o+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?o+="Please log in to view todos.":o+="Please try again later.",this.error=o,this.isLoading=!1}})}).catch(i=>{console.error("Error checking access:",i),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:r=>{console.error("Error loading todo list:",r),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(pe(B({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let r=t.target.value.trim();!e.id||!r||r===e.title||this.todoService.updateTodo(pe(B({},e),{title:r})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let r=pe(B({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.todoList=r,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(Je(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)(q(It),q(Ne),q(Ur),q(qu),q(Le))};static \u0275cmp=Se({type:n,selectors:[["app-todo"]],decls:27,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","sm:space-x-4","mb-1","sm:mb-2"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","mt-3","sm:mt-0"],[1,"btn-secondary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-1.5","sm:space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),F("click",function(){return r.goBack()}),Q(),p(6,"svg",6),U(7,"path",7),g()(),ie(),p(8,"h1",8),b(9),g()(),p(10,"p",9),b(11),g()(),p(12,"div",10)(13,"button",11),F("click",function(){return r.editList()}),Q(),p(14,"svg",12),U(15,"path",13),g(),ie(),p(16,"span"),b(17,"Edit List"),g()(),p(18,"button",14),F("click",function(){return r.shareList()}),Q(),p(19,"svg",12),U(20,"path",15),g(),ie(),p(21,"span"),b(22,"Share"),g()()()(),J(23,YP,5,0,"div",16)(24,JP,9,1,"div",17)(25,r2,46,22,"div",18),p(26,"app-list-edit-share-modal",19),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),g()()()),t&2&&(R(9),ge((r.todoList==null?null:r.todoList.title)||"Loading..."),R(2),ge((r.todoList==null?null:r.todoList.description)||"No description"),R(12),N("ngIf",r.isLoading),R(),N("ngIf",r.error),R(),N("ngIf",r.todoList&&!r.isLoading),R(),N("open",r.showEditShareModal)("list",r.todoList)("mode",r.modalMode))},dependencies:[Re,fr,He,ji,Ls,Gt,bt,zt,Ht,Ai,Ci,js],encapsulation:2})};var Hu=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(q(Le),q(Ne))};static \u0275cmp=Se({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"h2"),b(2,"Sign in to Todo List"),g(),p(3,"p"),b(4,"Please sign in to access your personal todo list"),g(),p(5,"button",1),F("click",function(){return r.login()}),U(6,"img",2),b(7," Sign in with Google "),g()())},dependencies:[Re],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function i2(n,e){n&1&&(p(0,"div",12)(1,"div",13),U(2,"div",14),p(3,"span",15),b(4,"Loading your lists..."),g()()())}function s2(n,e){if(n&1){let t=de();p(0,"div",12)(1,"div",16),Q(),p(2,"svg",17),U(3,"path",18),g(),ie(),p(4,"h3",19),b(5,"No lists yet"),g(),p(6,"p",4),b(7,"Get started by creating your first todo list."),g(),p(8,"button",20),F("click",function(){H(t);let i=V();return G(i.openCreateModal())}),Q(),p(9,"svg",6),U(10,"path",7),g(),ie(),p(11,"span"),b(12,"Create First List"),g()()()()}}function o2(n,e){if(n&1&&(p(0,"span",44),Q(),p(1,"svg",39),U(2,"path",31),g(),b(3),g()),n&2){let t=V().$implicit;R(3),Fe(" ",t.sharedWith.length," shared ")}}function a2(n,e){if(n&1){let t=de();p(0,"div",23),F("click",function(){let i=H(t).$implicit,s=V(2);return G(s.openList(i))}),p(1,"div",24)(2,"div",25)(3,"h3",26),b(4),g(),p(5,"p",27),b(6),g()(),p(7,"div",28)(8,"button",29),F("click",function(i){let s=H(t).$implicit;return V(2).openShareModal(s),G(i.stopPropagation())}),Q(),p(9,"svg",30),U(10,"path",31),g()(),ie(),p(11,"button",32),F("click",function(){let i=H(t).$implicit,s=V(2);return G(s.openEditModal(i))}),Q(),p(12,"svg",30),U(13,"path",33),g()(),ie(),p(14,"button",34),F("click",function(i){let s=H(t).$implicit,o=V(2);return G(o.deleteList(s,i))}),Q(),p(15,"svg",30),U(16,"path",35),g()()()(),ie(),p(17,"div",36)(18,"div",37)(19,"span",38),Q(),p(20,"svg",39),U(21,"path",18),g(),b(22," View items "),g(),ie(),p(23,"span",38),Q(),p(24,"svg",39),U(25,"path",40),g(),b(26),_e(27,"date"),g(),J(28,o2,4,1,"span",41),g(),p(29,"svg",42),U(30,"path",43),g()()()}if(n&2){let t=e.$implicit,r=V(2);R(4),Fe(" ",t.title," "),R(2),Fe(" ",t.description||"No description"," "),R(20),Fe(" ",Qr(27,4,r.getDateFromTimestamp(t.updatedAt),"short")," "),R(2),N("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function c2(n,e){if(n&1&&(p(0,"div",21),J(1,a2,31,7,"div",22),g()),n&2){let t=V();R(),N("ngForOf",t.todoLists)}}function l2(n,e){if(n&1){let t=de();p(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),b(4,"Create New List"),g(),p(5,"button",49),F("click",function(){H(t);let i=V();return G(i.closeCreateModal())}),Q(),p(6,"svg",50),U(7,"path",51),g()()(),ie(),p(8,"form",52),F("ngSubmit",function(){H(t);let i=V();return G(i.createNewList())}),p(9,"div")(10,"label",53),b(11," Title * "),g(),p(12,"input",54),jn("ngModelChange",function(i){H(t);let s=V();return Un(s.newListTitle,i)||(s.newListTitle=i),G(i)}),g()(),p(13,"div")(14,"label",55),b(15," Description (optional) "),g(),p(16,"textarea",56),jn("ngModelChange",function(i){H(t);let s=V();return Un(s.newListDescription,i)||(s.newListDescription=i),G(i)}),g()(),p(17,"div",57)(18,"button",58),F("click",function(){H(t);let i=V();return G(i.closeCreateModal())}),b(19," Cancel "),g(),p(20,"button",59),Q(),p(21,"svg",6),U(22,"path",7),g(),ie(),p(23,"span"),b(24,"Create List"),g()()()()()()}if(n&2){let t=V();R(12),Fn("ngModel",t.newListTitle),R(4),Fn("ngModel",t.newListDescription),R(4),N("disabled",!t.newListTitle.trim())}}var Gu=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(Je(1)).subscribe(r=>{if(console.log("Current user:",r),!r){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:r=>{console.log("List created successfully:",r),this.todoLists.unshift(r),this.closeCreateModal()},error:r=>{console.error("Error creating list:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details});let i="Failed to create list. ";r.code==="permission-denied"?i+="You may not have permission to create lists. Please try logging out and back in.":r.code==="unauthenticated"?i+="Please log in to create lists.":i+="Please try again later.",alert(i)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let r=pe(B({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(r=>r.id!==e.id)}).catch(r=>{console.error("Error deleting list:",r)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)(q(Ur),q(Le),q(Ne))};static \u0275cmp=Se({type:n,selectors:[["app-lists"]],decls:18,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),b(5,"Todo Lists"),g(),p(6,"p",4),b(7,"Create and manage your todo lists"),g()(),p(8,"button",5),F("click",function(){return r.openCreateModal()}),Q(),p(9,"svg",6),U(10,"path",7),g(),ie(),p(11,"span"),b(12,"New List"),g()()(),J(13,i2,5,0,"div",8)(14,s2,13,0,"div",8)(15,c2,2,1,"div",9),g(),J(16,l2,25,3,"div",10),p(17,"app-list-edit-share-modal",11),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),g()()),t&2&&(R(13),N("ngIf",r.isLoading),R(),N("ngIf",!r.isLoading&&r.todoLists.length===0),R(),N("ngIf",!r.isLoading&&r.todoLists.length>0),R(),N("ngIf",r.showCreateModal),R(),N("open",r.showEditShareModal)("list",r.modalList)("mode",r.modalMode))},dependencies:[Re,fr,He,ji,Ls,Gt,bt,zt,Ht,Oa,Ai,Ci,Vo,js],encapsulation:2})};function u2(n,e){if(n&1&&(Qt(0),p(1,"div",14)(2,"div")(3,"label",15),b(4,"Display Name"),g(),p(5,"div",16),b(6),g()(),p(7,"div")(8,"label",15),b(9,"Email"),g(),p(10,"div",16),b(11),g()(),p(12,"div")(13,"label",15),b(14,"User ID"),g(),p(15,"div",17),b(16),g()(),p(17,"div")(18,"label",15),b(19,"Account Created"),g(),p(20,"div",16),b(21),_e(22,"date"),g()()(),Yt()),n&2){let t=e.ngIf;R(6),Fe(" ",(t==null?null:t.displayName)||"Not provided"," "),R(5),Fe(" ",(t==null?null:t.email)||"Not provided"," "),R(5),Fe(" ",(t==null?null:t.uid)||"Not available"," "),R(5),Fe(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Qr(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}var Wu=class n{authService=K(Le);router=K(Ne);user$=this.authService.user$;logout(){this.authService.signOut(),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Se({type:n,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6","sm:mb-8"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-secondary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(4,"Profile"),g(),p(5,"p",4),b(6,"Manage your account information"),g()(),p(7,"div",5)(8,"div",6)(9,"div",2)(10,"h2",7),b(11,"Account Information"),g(),J(12,u2,23,7,"ng-container",8),_e(13,"async"),g(),p(14,"div",9)(15,"h3",10),b(16,"Account Actions"),g(),p(17,"div",11)(18,"button",12),F("click",function(){return r.logout()}),b(19," Sign Out "),g(),p(20,"button",13),F("click",function(){return r.goBack()}),b(21," Back to Home "),g()()()()()()()),t&2&&(R(12),N("ngIf",ke(13,1,r.user$)))},dependencies:[Re,He,Ft,ji],encapsulation:2})};var jr=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Je(1),ae(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(te(Le),te(Ne))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ku=class n{constructor(e){this.fb=e;this.shareForm=this.fb.group({email:["",[ln.required,ln.email]]})}family=null;close=new Oe;share=new Oe;shareForm;onShare(){this.shareForm.valid&&(this.share.emit(this.shareForm.value.email),this.shareForm.reset())}static \u0275fac=function(t){return new(t||n)(q(Vs))};static \u0275cmp=Se({type:n,selectors:[["app-family-share-modal"]],inputs:{family:"family"},outputs:{close:"close",share:"share"},decls:14,vars:3,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","you@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"h2",2),b(3),g(),p(4,"form",3),F("ngSubmit",function(){return r.onShare()}),p(5,"div",4)(6,"label",5),b(7,"Email address"),g(),U(8,"input",6),g(),p(9,"div",7)(10,"button",8),F("click",function(){return r.close.emit()}),b(11," Cancel "),g(),p(12,"button",9),b(13," Share "),g()()()()()),t&2&&(R(3),Fe('Share "',r.family==null?null:r.family.name,'"'),R(),N("formGroup",r.shareForm),R(8),N("disabled",!r.shareForm.valid))},dependencies:[Re,Fs,Gt,bt,zt,Ht,xi,ki],encapsulation:2})};var Qu=class n{constructor(e){this.fb=e;this.createForm=this.fb.group({name:["",ln.required],description:[""]})}close=new Oe;create=new Oe;createForm;onCreate(){this.createForm.valid&&this.create.emit(this.createForm.value)}static \u0275fac=function(t){return new(t||n)(q(Vs))};static \u0275cmp=Se({type:n,selectors:[["app-create-family-modal"]],outputs:{close:"close",create:"create"},decls:18,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"h2",2),b(3,"Create a New Family"),g(),p(4,"form",3),F("ngSubmit",function(){return r.onCreate()}),p(5,"div",4)(6,"label",5),b(7,"Family Name"),g(),U(8,"input",6),g(),p(9,"div",4)(10,"label",7),b(11,"Description"),g(),U(12,"textarea",8),g(),p(13,"div",9)(14,"button",10),F("click",function(){return r.close.emit()}),b(15," Cancel "),g(),p(16,"button",11),b(17," Create Family "),g()()()()()),t&2&&(R(4),N("formGroup",r.createForm),R(12),N("disabled",!r.createForm.valid))},dependencies:[Re,Fs,Gt,bt,zt,Ht,xi,ki],encapsulation:2})};var Bs=class n{constructor(e,t){this.firestore=e;this.auth=t;this.familyCollection=Lr(this.firestore,"families"),this.memberCollection=Lr(this.firestore,"members"),this.familiesCollection=Lr(this.firestore,"families")}familyCollection;memberCollection;familiesCollection;addFamily(e){return w(this,null,function*(){let t=yield tc(this.auth.user$);if(!t)throw new Error("User not logged in");let r={name:e.name,description:e.description||"",owner:t.uid,sharedWith:[],createdAt:eb(),status:"approved"};yield Rs(this.familyCollection,r)})}updateFamily(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield An(r,t)})}removeSharedUser(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield An(r,{sharedWith:nb(t)})})}getFamilies(){return this.auth.user$.pipe(xe(e=>{if(!e||!e.email)return Y([]);let t=Cn(this.familyCollection,xn("owner","==",e.uid)),r=Cn(this.familyCollection,xn("sharedWith","array-contains",e.email)),i=Ca(t,{idField:"id"}),s=Ca(r,{idField:"id"});return Ni([i,s]).pipe(ae(([o,c])=>[...o,...c].filter((f,v,_)=>v===_.findIndex(k=>k.id===f.id)).sort((f,v)=>f.name.localeCompare(v.name))))}))}shareFamily(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield An(r,{sharedWith:tb(t)})})}getFamilyById(e){let t=yt(this.firestore,"families",e);return ub(t,{idField:"id"})}addMember(e){return w(this,null,function*(){})}static \u0275fac=function(t){return new(t||n)(te(cn),te(Le))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var d2=n=>["/family-tree",n];function h2(n,e){if(n&1){let t=de();p(0,"a",13)(1,"div")(2,"h3",14),b(3),g(),p(4,"p",15),b(5),g()(),p(6,"div")(7,"button",16),F("click",function(){let i=H(t).$implicit,s=V(3);return G(s.openShareModal(i))}),b(8,"Share "),g()()()}if(n&2){let t=e.$implicit;N("routerLink",ov(3,d2,t.id)),R(3),ge(t.name),R(2),ge(t.description)}}function f2(n,e){if(n&1&&(p(0,"div",11),J(1,h2,9,5,"a",12),g()),n&2){let t=V().ngIf;R(),N("ngForOf",t)}}function p2(n,e){n&1&&(p(0,"p",17),b(1,"You are not a part of any family yet. Create one to get started."),g())}function m2(n,e){if(n&1&&(p(0,"div"),J(1,f2,2,1,"div",10)(2,p2,2,0,"ng-template",null,1,Bn),g()),n&2){let t=e.ngIf,r=Ln(3);R(),N("ngIf",t.length>0)("ngIfElse",r)}}function g2(n,e){n&1&&(p(0,"p",17),b(1,"Loading families..."),g())}function v2(n,e){if(n&1){let t=de();p(0,"app-create-family-modal",18),F("close",function(){H(t);let i=V();return G(i.closeCreateModal())})("create",function(i){H(t);let s=V();return G(s.handleCreateFamily(i))}),g()}}function _2(n,e){if(n&1){let t=de();p(0,"app-family-share-modal",19),F("close",function(){H(t);let i=V();return G(i.closeShareModal())})("share",function(i){H(t);let s=V();return G(s.handleShare(i))}),g()}if(n&2){let t=V();N("family",t.selectedFamily)}}var Yu=class n{constructor(e){this.familyTreeService=e;this.families$=this.familyTreeService.getFamilies()}families$;isShareModalOpen=!1;selectedFamily=null;isCreateModalOpen=!1;openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}handleCreateFamily(e){return w(this,null,function*(){yield this.familyTreeService.addFamily(e),this.closeCreateModal()})}openShareModal(e){this.selectedFamily=e,this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1,this.selectedFamily=null}handleShare(e){this.selectedFamily&&this.familyTreeService.shareFamily(this.selectedFamily.id,e),this.closeShareModal()}static \u0275fac=function(t){return new(t||n)(q(Bs))};static \u0275cmp=Se({type:n,selectors:[["app-family-tree"]],decls:13,vars:6,consts:[["loading",""],["noFamilies",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[3,"close","create",4,"ngIf"],[3,"family","close","share",4,"ngIf"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],["class","bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow","p-4","flex","justify-between","items-center","hover:bg-gray-50","dark:hover:bg-gray-700","cursor-pointer",3,"routerLink"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-sm","text-primary-600","dark:text-primary-400","hover:underline",3,"click"],[1,"text-gray-600","dark:text-gray-400"],[3,"close","create"],[3,"close","share","family"]],template:function(t,r){if(t&1){let i=de();p(0,"div",2)(1,"div",3)(2,"h1",4),b(3,"Family Trees"),g(),p(4,"button",5),F("click",function(){return H(i),G(r.openCreateModal())}),b(5," Create Family "),g()(),p(6,"div",6),J(7,m2,4,2,"div",7),_e(8,"async"),J(9,g2,2,0,"ng-template",null,0,Bn),g()(),J(11,v2,1,0,"app-create-family-modal",8)(12,_2,1,1,"app-family-share-modal",9)}if(t&2){let i=Ln(10);R(7),N("ngIf",ke(8,4,r.families$))("ngIfElse",i),R(4),N("ngIf",r.isCreateModalOpen),R(),N("ngIf",r.isShareModalOpen)}},dependencies:[Re,fr,He,Ft,Ku,Qu,mn],encapsulation:2})};function y2(n,e){if(n&1&&(p(0,"p",21),b(1),g()),n&2){let t=V(3).ngIf;R(),ge(t.description)}}function w2(n,e){if(n&1&&(Qt(0),p(1,"h1",19),b(2),g(),J(3,y2,2,1,"p",20),Yt()),n&2){let t=V(2).ngIf;R(2),ge(t.name),R(),N("ngIf",t.description)}}function E2(n,e){if(n&1){let t=de();Qt(0),p(1,"form",22),F("ngSubmit",function(){H(t);let i=V(3);return G(i.saveChanges())}),p(2,"div",23)(3,"label",24),b(4,"Family Name"),g(),U(5,"input",25),g(),p(6,"div")(7,"label",26),b(8,"Description"),g(),U(9,"textarea",27),g()(),Yt()}if(n&2){let t=V(3);R(),N("formGroup",t.editForm)}}function I2(n,e){if(n&1){let t=de();Qt(0),p(1,"button",28),F("click",function(){H(t);let i=V(3);return G(i.startEditing())}),b(2," Edit "),g(),Yt()}}function b2(n,e){if(n&1){let t=de();Qt(0),p(1,"div",29)(2,"button",30),b(3," Save "),g(),p(4,"button",31),F("click",function(){H(t);let i=V(3);return G(i.cancelEditing())}),b(5," Cancel "),g()(),Yt()}if(n&2){let t=V(3);R(2),N("disabled",!t.editForm.valid||!t.editForm.dirty)}}function T2(n,e){if(n&1&&(p(0,"span",34),b(1),g()),n&2){let t=e.$implicit;R(),Fe(" ",t," ")}}function S2(n,e){if(n&1&&(p(0,"div"),J(1,T2,2,1,"span",33),g()),n&2){let t=V(3).ngIf;R(),N("ngForOf",t.sharedWith)}}function C2(n,e){n&1&&(p(0,"p",35),b(1,"This family isn't shared with anyone."),g())}function A2(n,e){if(n&1&&(p(0,"div",32),J(1,S2,2,1,"div",8)(2,C2,2,0,"ng-template",null,2,Bn),g()),n&2){let t=Ln(3),r=V(2).ngIf;R(),N("ngIf",r.sharedWith&&r.sharedWith.length>0)("ngIfElse",t)}}function x2(n,e){if(n&1){let t=de();p(0,"div",42)(1,"span",43),b(2),g(),p(3,"button",44),F("click",function(){let i=H(t).$implicit,s=V(5);return G(s.removeSharedUser(i))}),b(4," Remove "),g()()}if(n&2){let t=e.$implicit;R(2),ge(t)}}function k2(n,e){if(n&1&&(p(0,"div"),J(1,x2,5,1,"div",41),g()),n&2){let t=V(3).ngIf;R(),N("ngForOf",t.sharedWith)}}function R2(n,e){if(n&1){let t=de();p(0,"div",36),J(1,k2,2,1,"div",11),p(2,"form",37),F("ngSubmit",function(){H(t);let i=V(3);return G(i.addSharedUser())}),p(3,"div",10)(4,"label",38),b(5,"Add user by email"),g(),U(6,"input",39),g(),p(7,"button",40),b(8," Add "),g()()()}if(n&2){let t=V(2).ngIf,r=V();R(),N("ngIf",t.sharedWith&&t.sharedWith.length>0),R(),N("formGroup",r.addShareUserForm),R(5),N("disabled",!r.addShareUserForm.valid)}}function D2(n,e){if(n&1&&(p(0,"div")(1,"div",9)(2,"div",10),J(3,w2,4,2,"ng-container",11)(4,E2,10,1,"ng-container",11),g(),p(5,"div",12),J(6,I2,3,0,"ng-container",11),_e(7,"async"),J(8,b2,6,1,"ng-container",11),g()(),p(9,"div",13)(10,"h2",14),b(11,"Shared With"),g(),J(12,A2,4,2,"div",15)(13,R2,9,3,"div",16),g(),p(14,"div",13)(15,"h2",17),b(16,"Family Members"),g(),p(17,"p",18),b(18,"Member list and tree visualization will be here."),g()()()),n&2){let t,r=V().ngIf,i=V();R(3),N("ngIf",!i.isEditing),R(),N("ngIf",i.isEditing),R(2),N("ngIf",!i.isEditing&&r.owner===((t=ke(7,6,i.auth.user$))==null?null:t.uid)),R(2),N("ngIf",i.isEditing),R(4),N("ngIf",!i.isEditing),R(),N("ngIf",i.isEditing)}}function P2(n,e){n&1&&(p(0,"p",45),b(1,"Family not found."),g())}function M2(n,e){if(n&1&&(p(0,"div"),J(1,D2,19,8,"div",8)(2,P2,2,0,"ng-template",null,1,Bn),g()),n&2){let t=e.ngIf,r=Ln(3);R(),N("ngIf",t)("ngIfElse",r)}}function N2(n,e){n&1&&(p(0,"p",45),b(1,"Loading family details..."),g())}var Ju=class n{constructor(e,t,r,i){this.route=e;this.familyTreeService=t;this.fb=r;this.auth=i;this.editForm=this.fb.group({name:["",ln.required],description:[""]}),this.addShareUserForm=this.fb.group({email:["",[ln.required,ln.email]]})}family$;familyId=null;isEditing=!1;editForm;addShareUserForm;currentFamily;ngOnInit(){this.family$=this.route.paramMap.pipe(xe(e=>{let t=e.get("familyId");return this.familyId=t,t?this.familyTreeService.getFamilyById(t):Y(void 0)}),Qe(e=>{this.currentFamily=e,e&&this.editForm.patchValue({name:e.name,description:e.description})}))}startEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.currentFamily&&this.editForm.patchValue({name:this.currentFamily.name,description:this.currentFamily.description})}saveChanges(){return w(this,null,function*(){this.editForm.valid&&this.familyId&&(yield this.familyTreeService.updateFamily(this.familyId,this.editForm.value),this.isEditing=!1)})}addSharedUser(){return w(this,null,function*(){if(this.addShareUserForm.valid&&this.familyId){let{email:e}=this.addShareUserForm.value;yield this.familyTreeService.shareFamily(this.familyId,e),this.addShareUserForm.reset()}})}removeSharedUser(e){return w(this,null,function*(){this.familyId&&(yield this.familyTreeService.removeSharedUser(this.familyId,e))})}static \u0275fac=function(t){return new(t||n)(q(It),q(Bs),q(Vs),q(Le))};static \u0275cmp=Se({type:n,selectors:[["app-family-detail"]],decls:10,vars:4,consts:[["loading",""],["notFound",""],["noSharedUsers",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],["routerLink","/family-tree",1,"inline-flex","items-center","text-sm","font-semibold","text-primary-600","hover:text-primary-800","dark:text-primary-400","dark:hover:text-primary-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","items-start","mb-8"],[1,"flex-grow"],[4,"ngIf"],[1,"ml-4","flex-shrink-0"],[1,"mt-8"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white","mb-4"],["class","space-y-2",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white"],[1,"mt-4","text-gray-500"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],["class","mt-2 text-lg text-gray-600 dark:text-gray-400",4,"ngIf"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-400"],["id","editFamilyForm",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"flex","space-x-2"],["type","submit","form","editFamilyForm",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],[1,"space-y-2"],["class","inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-200 mr-2 mb-2",4,"ngFor","ngForOf"],[1,"inline-block","bg-gray-200","dark:bg-gray-700","rounded-full","px-3","py-1","text-sm","font-semibold","text-gray-700","dark:text-gray-200","mr-2","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],[1,"flex","items-end","space-x-2",3,"ngSubmit","formGroup"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","user@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex items-center justify-between bg-gray-100 dark:bg-gray-700 p-2 rounded-md",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","bg-gray-100","dark:bg-gray-700","p-2","rounded-md"],[1,"text-sm","text-gray-900","dark:text-gray-200"],[1,"text-sm","text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","font-semibold",3,"click"],[1,"text-center","text-gray-500"]],template:function(t,r){if(t&1&&(p(0,"div",3)(1,"div",4)(2,"a",5),Q(),p(3,"svg",6),U(4,"path",7),g(),b(5," Back to Family List "),g()(),J(6,M2,4,2,"div",8),_e(7,"async"),J(8,N2,2,0,"ng-template",null,0,Bn),g()),t&2){let i=Ln(9);R(6),N("ngIf",ke(7,2,r.family$))("ngIfElse",i)}},dependencies:[Re,fr,He,Ft,Fs,Gt,bt,zt,Ht,xi,ki,mn],encapsulation:2})};var qb=[{path:"",component:Cu},{path:"ip-lookup",component:xu},{path:"login",component:Hu},{path:"profile",component:Wu,canActivate:[jr]},{path:"lists",component:Gu,canActivate:[jr]},{path:"todo/:id",component:zu,canActivate:[jr]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-AJVGBE4C.js").then(n=>n.QuotesComponent)},{path:"family-tree",component:Yu,canActivate:[jr]},{path:"family-tree/:familyId",component:Ju,canActivate:[jr]}];var zb={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var Hb={providers:[cv({eventCoalescing:!0}),kh(qb),Tv(),hy(()=>fy(zb.firebaseConfig)),lb(()=>db()),pw(()=>gw())]};var Xu=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new ct(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){L0(this.checkInterval).pipe(xe(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new St(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(te(uc))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function V2(n,e){if(n&1){let t=de();p(0,"div",1)(1,"div",2)(2,"div",3),b(3,"\u{1F504}"),g(),p(4,"div",4)(5,"h4"),b(6,"New version available!"),g(),p(7,"p"),b(8,"A new version of the app is ready. Refresh to get the latest features."),g()(),p(9,"div",5)(10,"button",6),F("click",function(){H(t);let i=V();return G(i.update())}),b(11,"Update Now"),g(),p(12,"button",7),F("click",function(){H(t);let i=V();return G(i.dismiss())}),b(13,"Later"),g()()()()}}var Zu=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)(q(Xu))};static \u0275cmp=Se({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(J(0,V2,14,0,"div",0),_e(1,"async")),t&2&&N("ngIf",ke(1,1,r.updateAvailable$))},dependencies:[Re,He,Ft],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var ed=class n{themeSubject=new ct("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");this.setTheme(r)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gb=()=>({exact:!0});function F2(n,e){n&1&&(p(0,"a",25),Q(),p(1,"svg",26),U(2,"path",27),g(),ie(),p(3,"span"),b(4,"Family Tree"),g()())}function U2(n,e){if(n&1){let t=de();p(0,"a",33),F("click",function(){H(t);let i=V(3);return G(i.closeMoreMenu())}),b(1,"Profile"),g()}}function j2(n,e){if(n&1){let t=de();p(0,"div",28)(1,"a",29),F("click",function(){H(t);let i=V(2);return G(i.closeMoreMenu())}),b(2,"Lists"),g(),p(3,"a",30),F("click",function(){H(t);let i=V(2);return G(i.closeMoreMenu())}),b(4,"IP Lookup"),g(),p(5,"a",31),F("click",function(){H(t);let i=V(2);return G(i.closeMoreMenu())}),b(6,"Quotes"),g(),J(7,U2,2,0,"a",32),_e(8,"async"),g()}if(n&2){let t=V(2);R(7),N("ngIf",ke(8,1,t.user$))}}function B2(n,e){if(n&1){let t=de();Qt(0),p(1,"a",16),Q(),p(2,"svg",17),U(3,"path",18),g(),ie(),p(4,"span"),b(5,"Home"),g()(),J(6,F2,5,0,"a",19),_e(7,"async"),p(8,"div",20)(9,"button",21),F("click",function(i){H(t);let s=V();return G(s.toggleMoreMenu(i))}),p(10,"span"),b(11,"More"),g(),Q(),p(12,"svg",22),U(13,"path",23),g()(),J(14,j2,9,3,"div",24),g(),Yt()}if(n&2){let t=V();R(),N("routerLinkActiveOptions",zd(5,Gb)),R(5),N("ngIf",ke(7,3,t.user$)),R(8),N("ngIf",t.moreMenuOpen)}}function $2(n,e){n&1&&(Q(),p(0,"svg",34),U(1,"path",35),g())}function q2(n,e){n&1&&(Q(),p(0,"svg",34),U(1,"path",36),g())}function z2(n,e){if(n&1){let t=de();p(0,"button",37),F("click",function(){H(t);let i=V();return G(i.login())}),Q(),p(1,"svg",17),U(2,"path",38),g(),ie(),p(3,"span"),b(4,"Login"),g()()}}function H2(n,e){if(n&1){let t=de();p(0,"button",39),F("click",function(){H(t);let i=V();return G(i.logout())}),Q(),p(1,"svg",17),U(2,"path",40),g(),ie(),p(3,"span"),b(4,"Sign Out"),g()()}}function G2(n,e){n&1&&(Q(),p(0,"svg",41),U(1,"path",42),g())}function W2(n,e){n&1&&(Q(),p(0,"svg",41),U(1,"path",43),g())}function K2(n,e){if(n&1){let t=de();p(0,"a",59),F("click",function(){H(t);let i=V(2);return G(i.closeMobileMenu())}),Q(),p(1,"svg",26),U(2,"path",27),g(),ie(),p(3,"span"),b(4,"Family Tree"),g()()}}function Q2(n,e){if(n&1){let t=de();p(0,"a",60),F("click",function(){H(t);let i=V(2);return G(i.closeMobileMenu())}),Q(),p(1,"svg",17),U(2,"path",61),g(),ie(),p(3,"span"),b(4,"Profile"),g()()}}function Y2(n,e){n&1&&(Q(),p(0,"svg",22),U(1,"path",35),g())}function J2(n,e){n&1&&(Q(),p(0,"svg",22),U(1,"path",36),g())}function X2(n,e){if(n&1){let t=de();p(0,"button",62),F("click",function(){H(t);let i=V(2);return i.login(),G(i.closeMobileMenu())}),Q(),p(1,"svg",17),U(2,"path",38),g(),ie(),p(3,"span"),b(4,"Login"),g()()}}function Z2(n,e){if(n&1){let t=de();p(0,"button",63),F("click",function(){H(t);let i=V(2);return i.logout(),G(i.closeMobileMenu())}),Q(),p(1,"svg",17),U(2,"path",40),g(),ie(),p(3,"span"),b(4,"Sign Out"),g()()}}function eM(n,e){if(n&1){let t=de();p(0,"div",44)(1,"nav",45)(2,"a",46),F("click",function(){H(t);let i=V();return G(i.closeMobileMenu())}),Q(),p(3,"svg",17),U(4,"path",18),g(),ie(),p(5,"span"),b(6,"Home"),g()(),p(7,"a",47),F("click",function(){H(t);let i=V();return G(i.closeMobileMenu())}),Q(),p(8,"svg",17),U(9,"path",48),g(),ie(),p(10,"span"),b(11,"Lists"),g()(),p(12,"a",49),F("click",function(){H(t);let i=V();return G(i.closeMobileMenu())}),Q(),p(13,"svg",17),U(14,"path",50),g(),ie(),p(15,"span"),b(16,"IP Lookup"),g()(),p(17,"a",51),F("click",function(){H(t);let i=V();return G(i.closeMobileMenu())}),Q(),p(18,"svg",17),U(19,"path",52),g(),ie(),p(20,"span"),b(21,"Quotes"),g()(),J(22,K2,5,0,"a",53),_e(23,"async"),J(24,Q2,5,0,"a",54),_e(25,"async"),p(26,"button",55),F("click",function(){H(t);let i=V();return G(i.toggleTheme())}),J(27,Y2,2,0,"svg",56),_e(28,"async"),J(29,J2,2,0,"svg",56),_e(30,"async"),p(31,"span"),b(32),_e(33,"async"),g()(),J(34,X2,5,0,"button",57),_e(35,"async"),J(36,Z2,5,0,"button",58),_e(37,"async"),g()()}if(n&2){let t=V();R(2),N("routerLinkActiveOptions",zd(22,Gb)),R(20),N("ngIf",ke(23,8,t.user$)),R(2),N("ngIf",ke(25,10,t.user$)),R(3),N("ngIf",ke(28,12,t.theme$)==="light"),R(2),N("ngIf",ke(30,14,t.theme$)==="dark"),R(3),ge(ke(33,16,t.theme$)==="light"?"Dark Mode":"Light Mode"),R(2),N("ngIf",!ke(35,18,t.user$)),R(2),N("ngIf",ke(37,20,t.user$))}}var td=class n{constructor(e,t,r,i){this.authService=e;this.themeService=t;this.router=r;this.elementRef=i;this.user$=this.authService.user$,this.theme$=this.themeService.theme$,this.isDetailPage$=this.router.events.pipe(Ot(s=>s instanceof gt),ae(s=>s.urlAfterRedirects!=="/"))}user$;theme$;isMobileMenuOpen=!1;isDetailPage$;moreMenuOpen=!1;onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.moreMenuOpen=!1)}login(){this.authService.signInWithGoogle()}logout(){this.authService.signOut()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleMoreMenu(e){e.stopPropagation(),this.moreMenuOpen=!this.moreMenuOpen}closeMoreMenu(){this.moreMenuOpen=!1}static \u0275fac=function(t){return new(t||n)(q(Le),q(ed),q(Ne),q(ur))};static \u0275cmp=Se({type:n,selectors:[["app-root"]],hostBindings:function(t,r){t&1&&F("click",function(s){return r.onDocumentClick(s)},G0)},decls:28,vars:21,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],[4,"ngIf"],[1,"flex","items-center","space-x-1.5","p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"text-xs","sm:text-sm","font-medium"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"relative"],[1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","dark:bg-gray-800","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["routerLink","/lists",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/ip-lookup",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/quotes",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile","class","block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",3,"click",4,"ngIf"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,r){t&1&&(p(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),b(5," Manu's Playground "),g()(),p(6,"nav",5),J(7,B2,15,6,"ng-container",6),_e(8,"async"),p(9,"button",7),F("click",function(){return r.toggleTheme()}),J(10,$2,2,0,"svg",8),_e(11,"async"),J(12,q2,2,0,"svg",8),_e(13,"async"),p(14,"span",9),b(15),_e(16,"async"),g()(),J(17,z2,5,0,"button",10),_e(18,"async"),J(19,H2,5,0,"button",11),_e(20,"async"),g(),p(21,"button",12),F("click",function(){return r.toggleMobileMenu()}),J(22,G2,2,0,"svg",13)(23,W2,2,0,"svg",13),g()(),J(24,eM,38,23,"div",14),g()(),p(25,"main",15),U(26,"router-outlet"),g(),U(27,"app-update-notification")),t&2&&(R(7),N("ngIf",ke(8,9,r.isDetailPage$)),R(3),N("ngIf",ke(11,11,r.theme$)==="light"),R(2),N("ngIf",ke(13,13,r.theme$)==="dark"),R(3),ge(ke(16,15,r.theme$)==="light"?"Dark":"Light"),R(2),N("ngIf",!ke(18,17,r.user$)),R(2),N("ngIf",ke(20,19,r.user$)),R(3),N("ngIf",!r.isMobileMenuOpen),R(),N("ngIf",r.isMobileMenuOpen),R(),N("ngIf",r.isMobileMenuOpen))},dependencies:[Re,He,Ft,Do,mn,xh,Zu],encapsulation:2})};eh(td,Hb).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
