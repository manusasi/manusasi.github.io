import{$ as Q,$a as sv,$b as It,A as wt,Aa as zd,Ab as ge,B as uo,Ba as K0,Bb as be,C as F0,Ca as Q0,Cb as Qr,D as sc,Da as Y0,Db as Rt,E as U0,Ea as x,Eb as dv,F as j0,Fa as ho,Fb as hv,G as Ut,Ga as J0,Gb as tn,H as Xt,Ha as Vi,Hb as Li,I as Gr,Ia as $,Ib as fv,J as Od,Ja as X0,Jb as pv,K as Je,Ka as Z0,Kb as Kd,L as oc,La as ev,Lb as mv,M as lr,Ma as tv,Mb as Qd,N as Vd,Na as lc,Nb as Fi,O as B0,Oa as Ie,Ob as gv,P as Ld,Pa as fr,Pb as Yr,Q as Fd,Qa as Xe,Qb as vv,R as De,Ra as mn,Rb as pr,S as Ud,Sa as K,Sb as _v,T as Qe,Ta as nv,Tb as yv,U as Pe,Ua as Ve,Ub as wv,V as Wr,Va as lt,Vb as po,W as Z,Wa as rv,Wb as Ev,X as ur,Xa as iv,Xb as Ui,Y as $0,Ya as uc,Yb as Iv,Z as we,Za as Hd,Zb as gn,_ as te,_a as Gd,_b as $e,a as B,aa as dr,ab as dc,ac as ji,b as me,ba as q0,bb as M,bc as bv,c as nc,ca as Fn,cb as f,cc as Ce,d as cr,da as Et,db as g,dc as Tv,e as w,ea as z,eb as U,ec as Sv,f as M0,fa as H,fb as Zt,fc as Cv,g as Rd,ga as Y,gb as en,gc as Av,h as Ct,ha as ne,hb as he,hc as xv,i as Dd,ia as At,ib as F,ic as kv,j as Pd,ja as xt,jb as O,jc as Bi,k as Jt,ka as jd,kb as ov,kc as Rv,l as ct,la as Bd,lb as av,lc as Dv,m as N0,ma as ac,mb as cv,mc as Pv,n as O0,na as Un,nb as kt,o as Ln,oa as z0,ob as lv,p as rc,pa as cc,pb as fo,q as Md,qa as jt,qb as E,r as Nd,ra as Bt,rb as le,s as xe,sa as Oi,sb as Ne,t as J,ta as H0,tb as hc,u as lo,ua as hr,ub as jn,v as V0,va as G0,vb as Bn,w as L0,wa as $d,wb as $n,x as ic,xa as W0,xb as qn,y as ae,ya as Kr,yb as Wd,z as Ni,za as qd,zb as uv}from"./chunk-T3PA34DP.js";var mc=new we(""),Zd=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Pe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(mc),te(lt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),mo=class{_doc;constructor(e){this._doc=e}manager},fc="ng-app-id";function Mv(n){for(let e of n)e.remove()}function Nv(n,e){let t=e.createElement("style");return t.textContent=n,t}function NT(n,e,t,r){let i=n.head?.querySelectorAll(`style[${fc}="${e}"],link[${fc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(fc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Jd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var eh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Av(s),NT(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Nv);r?.forEach(i=>this.addUsage(i,this.external,Jd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Mv(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Mv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Nv(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Jd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(fc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(xt),te($d),te(qd,8),te(Kr))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Yd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},th=/%COMP%/g;var Vv="%COMP%",OT=`_nghost-${Vv}`,VT=`_ngcontent-${Vv}`,LT=!0,FT=new we("",{providedIn:"root",factory:()=>LT});function UT(n){return VT.replace(th,n)}function jT(n){return OT.replace(th,n)}function Lv(n,e){return e.map(t=>t.replace(th,n))}var nh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,c,l,d=null,p=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new go(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof pc?i.applyToHost(t):i instanceof vo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case zd.Emulated:s=new pc(l,d,r,this.appId,p,o,c,v,_);break;case zd.ShadowDom:return new Xd(l,d,t,r,o,c,this.nonce,v,_);default:s=new vo(l,d,r,p,o,c,v,_);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(Zd),te(eh),te($d),te(FT),te(xt),te(Kr),te(lt),te(qd),te(nv,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),go=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Yd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ov(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ov(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Pe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Yd[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Yd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ho.DashCase|ho.Important)?e.style.setProperty(t,r,i&ho.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ho.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=pr().getGlobalEventTarget(this.doc,e),!e))throw new Pe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Ov(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xd=class extends go{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,l,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=Lv(i.id,p);for(let _ of p){let R=document.createElement("style");c&&R.setAttribute("nonce",c),R.textContent=_,this.shadowRoot.appendChild(R)}let v=i.getExternalStyles?.();if(v)for(let _ of v){let R=Jd(_,s);c&&R.setAttribute("nonce",c),this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vo=class extends go{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,c,l,d){super(e,s,o,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=d?Lv(d,p):p,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},pc=class extends vo{contentAttr;hostAttr;constructor(e,t,r,i,s,o,c,l,d){let p=i+"-"+r.id;super(e,t,r,s,o,c,l,d,p),this.contentAttr=UT(p),this.hostAttr=jT(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var gc=class n extends yv{supportsDOMEvents=!0;static makeCurrent(){_v(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BT();return t==null?null:$T(t)}resetBaseElement(){_o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tv(document.cookie,e)}},_o=null;function BT(){return _o=_o||document.head.querySelector("base"),_o?_o.getAttribute("href"):null}function $T(n){return new URL(n,document.baseURI).pathname}var qT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Uv=(()=>{class n extends mo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(te(xt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Fv=["alt","control","meta","shift"],zT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jv=(()=>{class n extends mo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pr().onAndCancel(t,o.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Fv.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=zT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Fv.forEach(o=>{if(o!==i){let c=HT[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(xt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function rh(n,e){return gv(B({rootComponent:n},GT(e)))}function GT(n){return{appProviders:[...JT,...n?.providers??[]],platformProviders:YT}}function WT(){gc.makeCurrent()}function KT(){return new Bd}function QT(){return G0(document),document}var YT=[{provide:Kr,useValue:Cv},{provide:W0,useValue:WT,multi:!0},{provide:xt,useFactory:QT}];var JT=[{provide:q0,useValue:"root"},{provide:Bd,useFactory:KT},{provide:mc,useClass:Uv,multi:!0,deps:[xt]},{provide:mc,useClass:jv,multi:!0,deps:[xt]},nh,eh,Zd,{provide:J0,useExisting:nh},{provide:Sv,useClass:qT},[]];var Bv=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(xt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var de="primary",Do=Symbol("RouteTitle"),ch=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Zr(n){return new ch(n)}function Qv(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ZT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vn(n[t],e[t]))return!1;return!0}function vn(n,e){let t=n?lh(n):void 0,r=e?lh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Yv(n[i],e[i]))return!1;return!0}function lh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Yv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Jv(n){return n.length>0?n[n.length-1]:null}function zn(n){return V0(n)?n:uc(n)?xe(Promise.resolve(n)):J(n)}var e1={exact:Zv,subset:e_},Xv={exact:t1,subset:n1,ignored:()=>!0};function $v(n,e,t){return e1[t.paths](n.root,e.root,t.matrixParams)&&Xv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function t1(n,e){return vn(n,e)}function Zv(n,e,t){if(!Jr(n.segments,e.segments)||!yc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Zv(n.children[r],e.children[r],t))return!1;return!0}function n1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yv(n[t],e[t]))}function e_(n,e,t){return t_(n,e,e.segments,t)}function t_(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Jr(i,t)||e.hasChildren()||!yc(i,t,r))}else if(n.segments.length===t.length){if(!Jr(n.segments,t)||!yc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!e_(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Jr(n.segments,i)||!yc(n.segments,i,r)||!n.children[de]?!1:t_(n.children[de],e,s,r)}}function yc(n,e,t){return e.every((r,i)=>Xv[t](n[i].parameters,r.parameters))}var yn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){return s1.serialize(this)}},Ee=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wc(this)}},mr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Zr(this.parameters),this._parameterMap}toString(){return r_(this)}};function r1(n,e){return Jr(n,e)&&n.every((t,r)=>vn(t.parameters,e[r].parameters))}function Jr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function i1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===de&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==de&&(t=t.concat(e(i,r)))}),t}var ei=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new gr,providedIn:"root"})}return n})(),gr=class{parse(e){let t=new dh(e);return new yn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${yo(e.root,!0)}`,r=c1(e.queryParams),i=typeof e.fragment=="string"?`#${o1(e.fragment)}`:"";return`${t}${r}${i}`}},s1=new gr;function wc(n){return n.segments.map(e=>r_(e)).join("/")}function yo(n,e){if(!n.hasChildren())return wc(n);if(e){let t=n.children[de]?yo(n.children[de],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==de&&r.push(`${i}:${yo(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=i1(n,(r,i)=>i===de?[yo(n.children[de],!1)]:[`${i}:${yo(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${wc(n)}/${t[0]}`:`${wc(n)}/(${t.join("//")})`}}function n_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vc(n){return n_(n).replace(/%3B/gi,";")}function o1(n){return encodeURI(n)}function uh(n){return n_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ec(n){return decodeURIComponent(n)}function qv(n){return Ec(n.replace(/\+/g,"%20"))}function r_(n){return`${uh(n.path)}${a1(n.parameters)}`}function a1(n){return Object.entries(n).map(([e,t])=>`;${uh(e)}=${uh(t)}`).join("")}function c1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${vc(t)}=${vc(i)}`).join("&"):`${vc(t)}=${vc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var l1=/^[^\/()?;#]+/;function ih(n){let e=n.match(l1);return e?e[0]:""}var u1=/^[^\/()?;=#]+/;function d1(n){let e=n.match(u1);return e?e[0]:""}var h1=/^[^=?&#]+/;function f1(n){let e=n.match(h1);return e?e[0]:""}var p1=/^[^&#]+/;function m1(n){let e=n.match(p1);return e?e[0]:""}var dh=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[de]=new Ee(e,t)),r}parseSegment(){let e=ih(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(e),new mr(Ec(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=d1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ih(this.remaining);i&&(r=i,this.capture(r))}e[Ec(t)]=Ec(r)}parseQueryParam(e){let t=f1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=m1(this.remaining);o&&(r=o,this.capture(r))}let i=qv(t),s=qv(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ih(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Pe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=de);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[de]:new Ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pe(4011,!1)}};function i_(n){return n.segments.length>0?new Ee([],{[de]:n}):n}function s_(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=s_(i);if(r===de&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ee(n.segments,e);return g1(t)}function g1(n){if(n.numberOfChildren===1&&n.children[de]){let e=n.children[de];return new Ee(n.segments.concat(e.segments),e.children)}return n}function vr(n){return n instanceof yn}function o_(n,e,t=null,r=null){let i=a_(n);return c_(i,e,t,r)}function a_(n){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new Ee(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=i_(r);return e??i}function c_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return sh(i,i,i,t,r);let s=v1(e);if(s.toRoot())return sh(i,i,new Ee([],{}),t,r);let o=_1(s,i,n),c=o.processChildren?Eo(o.segmentGroup,o.index,s.commands):u_(o.segmentGroup,o.index,s.commands);return sh(i,o.segmentGroup,c,t,r)}function Ic(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function bo(n){return typeof n=="object"&&n!=null&&n.outlets}function sh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let o;n===e?o=t:o=l_(n,e,t);let c=i_(s_(o));return new yn(c,s,i)}function l_(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=l_(s,e,t)}),new Ee(n.segments,r)}var bc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ic(r[0]))throw new Pe(4003,!1);let i=r.find(bo);if(i&&i!==Jv(r))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function v1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new bc(t,e,r)}var zi=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _1(n,e,t){if(n.isAbsolute)return new zi(e,!0,0);if(!t)return new zi(e,!1,NaN);if(t.parent===null)return new zi(t,!0,0);let r=Ic(n.commands[0])?0:1,i=t.segments.length-1+r;return y1(t,i,n.numberOfDoubleDots)}function y1(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Pe(4005,!1);i=r.segments.length}return new zi(r,!1,i-s)}function w1(n){return bo(n[0])?n[0].outlets:{[de]:n}}function u_(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Eo(n,e,t);let r=E1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ee(n.segments.slice(0,r.pathIndex),{});return s.children[de]=new Ee(n.segments.slice(r.pathIndex),n.children),Eo(s,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?hh(n,e,t):r.match?Eo(n,0,i):hh(n,e,t)}function Eo(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=w1(t),i={};if(Object.keys(r).some(s=>s!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let s=Eo(n.children[de],e,t);return new Ee(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=u_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(n.segments,i)}}function E1(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(bo(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Hv(l,d,o))return s;r+=2}else{if(!Hv(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(bo(s)){let l=I1(s.outlets);return new Ee(r,l)}if(i===0&&Ic(t[0])){let l=n.segments[e];r.push(new mr(l.path,zv(t[0]))),i++;continue}let o=bo(s)?s.outlets[de]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Ic(c)?(r.push(new mr(o,zv(c))),i+=2):(r.push(new mr(o,{})),i++)}return new Ee(r,{})}function I1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=hh(new Ee([],{}),0,r))}),e}function zv(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Hv(n,e,t){return n==t.path&&vn(e,t.parameters)}var Hi="imperative",Ye=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ye||{}),Pt=class{id;url;constructor(e,t){this.id=e,this.url=t}},_r=class extends Pt{type=Ye.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gt=class extends Pt{urlAfterRedirects;type=Ye.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(mt||{}),Wi=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wi||{}),_n=class extends Pt{reason;code;type=Ye.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wn=class extends Pt{reason;code;type=Ye.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ki=class extends Pt{error;target;type=Ye.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},To=class extends Pt{urlAfterRedirects;state;type=Ye.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tc=class extends Pt{urlAfterRedirects;state;type=Ye.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sc=class extends Pt{urlAfterRedirects;state;shouldActivate;type=Ye.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cc=class extends Pt{urlAfterRedirects;state;type=Ye.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class extends Pt{urlAfterRedirects;state;type=Ye.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xc=class{route;type=Ye.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},kc=class{route;type=Ye.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rc=class{snapshot;type=Ye.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dc=class{snapshot;type=Ye.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pc=class{snapshot;type=Ye.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mc=class{snapshot;type=Ye.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qi=class{routerEvent;position;anchor;type=Ye.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},So=class{},Yi=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function b1(n){return!(n instanceof So)&&!(n instanceof Yi)}function T1(n,e){return n.providers&&!n._injector&&(n._injector=lc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function nn(n){return n.outlet||de}function S1(n,e){let t=n.filter(r=>nn(r)===e);return t.push(...n.filter(r=>nn(r)!==e)),t}function Po(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Nc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Po(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ti(this.rootInjector)}},ti=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Nc(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(Fn))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=fh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=fh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ph(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ph(e,this._root).map(t=>t.value)}};function fh(n,e){if(n===e.value)return e;for(let t of e.children){let r=fh(n,t);if(r)return r}return null}function ph(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ph(n,t);if(r.length)return r.unshift(e),r}return[]}var Dt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function qi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Co=class extends Oc{snapshot;constructor(e,t){super(e),this.snapshot=t,Ih(this,e)}toString(){return this.snapshot.toString()}};function d_(n){let e=C1(n),t=new ct([new mr("",{})]),r=new ct({}),i=new ct({}),s=new ct({}),o=new ct(""),c=new bt(t,r,s,o,i,de,n,e.root);return c.snapshot=e.root,new Co(new Dt(c,[]),e)}function C1(n){let e={},t={},r={},i="",s=new Xr([],e,r,i,t,de,n,null,{});return new Ao("",new Dt(s,[]))}var bt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(d=>d[Do]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Zr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Zr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&f_(i)&&(r.resolve[Do]=i.title),r}var Xr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Do]}constructor(e,t,r,i,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ao=class extends Oc{url;constructor(e,t){super(t),this.url=e,Ih(this,t)}toString(){return h_(this._root)}};function Ih(n,e){e.value._routerState=n,e.children.forEach(t=>Ih(n,t))}function h_(n){let e=n.children.length>0?` { ${n.children.map(h_).join(", ")} } `:"";return`${n.value}${e}`}function oh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),vn(e.params,t.params)||n.paramsSubject.next(t.params),ZT(e.url,t.url)||n.urlSubject.next(t.url),vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mh(n,e){let t=vn(n.params,e.params)&&r1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||mh(n.parent,e.parent))}function f_(n){return typeof n.title=="string"||n.title===null}var p_=new we(""),Mo=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=de;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=pv(void 0);parentContexts=Q(ti);location=Q(Z0);changeDetector=Q(Fi);inputBinder=Q(No,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new gh(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Bt]})}return n})(),gh=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===bt?this.route:e===ti?this.childContexts:e===p_?this.outletData:this.parent.get(e,t)}},No=new we(""),bh=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ni([r.queryParams,r.params,r.data]).pipe(De(([s,o,c],l)=>(c=B(B(B({},s),o),c),l===0?J(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=vv(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Th=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ie({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&U(0,"router-outlet")},dependencies:[Mo],encapsulation:2})}return n})();function Sh(n){let e=n.children&&n.children.map(Sh),t=e?me(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==de&&(t.component=Th),t}function A1(n,e,t){let r=xo(n,e._root,t?t._root:void 0);return new Co(r,e)}function xo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=x1(n,e,t);return new Dt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>xo(n,c)),o}}let r=k1(e.value),i=e.children.map(s=>xo(n,s));return new Dt(r,i)}}function x1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xo(n,r,i);return xo(n,r)})}function k1(n){return new bt(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Ji=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},m_="ngNavigationCancelingError";function Lc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=vr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=g_(!1,mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function g_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[m_]=!0,t.cancellationCode=e,t}function R1(n){return v_(n)&&vr(n.url)}function v_(n){return!!n&&n[m_]}var D1=(n,e,t,r)=>ae(i=>(new vh(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),vh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=qi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=qi(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Mc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(oh(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),oh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Fc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gi=class{component;route;constructor(e,t){this.component=e,this.route=t}};function P1(n,e,t){let r=n._root,i=e?e._root:null;return wo(r,i,t,[r.value])}function M1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!$0(n)?n:e.get(n):r}function wo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=qi(e);return n.children.forEach(o=>{N1(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Io(c,t.getContext(o),i)),i}function N1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=O1(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Fc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?wo(n,e,c?c.children:null,r,i):wo(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Gi(c.outlet.component,o))}else o&&Io(e,c,i),i.canActivateChecks.push(new Fc(r)),s.component?wo(n,null,c?c.children:null,r,i):wo(n,null,t,r,i);return i}function O1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Jr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jr(n.url,e.url)||!vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mh(n,e)||!vn(n.queryParams,e.queryParams);case"paramsChange":default:return!mh(n,e)}}function Io(n,e,t){let r=qi(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Io(o,e.children.getContext(s),t):Io(o,null,t):Io(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Gi(e.outlet.component,i)):t.canDeactivateChecks.push(new Gi(null,i)):t.canDeactivateChecks.push(new Gi(null,i))}function Oo(n){return typeof n=="function"}function V1(n){return typeof n=="boolean"}function L1(n){return n&&Oo(n.canLoad)}function F1(n){return n&&Oo(n.canActivate)}function U1(n){return n&&Oo(n.canActivateChild)}function j1(n){return n&&Oo(n.canDeactivate)}function B1(n){return n&&Oo(n.canMatch)}function __(n){return n instanceof L0||n?.name==="EmptyError"}var _c=Symbol("INITIAL_VALUE");function Xi(){return De(n=>Ni(n.map(e=>e.pipe(Je(1),Fd(_c)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===_c)return _c;if(t===!1||$1(t))return t}return!0}),Ut(e=>e!==_c),Je(1)))}function $1(n){return vr(n)||n instanceof Ji}function q1(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?J(me(B({},t),{guardsResult:!0})):z1(o,r,i,n).pipe(wt(c=>c&&V1(c)?H1(r,s,n,e):J(c)),ae(c=>me(B({},t),{guardsResult:c})))})}function z1(n,e,t,r){return xe(n).pipe(wt(i=>Y1(i.component,i.route,t,e,r)),lr(i=>i!==!0,!0))}function H1(n,e,t,r){return xe(e).pipe(Gr(i=>F0(W1(i.route.parent,r),G1(i.route,r),Q1(n,i.path,t),K1(n,i.route,t))),lr(i=>i!==!0,!0))}function G1(n,e){return n!==null&&e&&e(new Pc(n)),J(!0)}function W1(n,e){return n!==null&&e&&e(new Rc(n)),J(!0)}function K1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>sc(()=>{let o=Po(e)??t,c=Zi(s,o),l=F1(c)?c.canActivate(e,n):Et(o,()=>c(e,n));return zn(l).pipe(lr())}));return J(i).pipe(Xi())}function Q1(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>M1(o)).filter(o=>o!==null).map(o=>sc(()=>{let c=o.guards.map(l=>{let d=Po(o.node)??t,p=Zi(l,d),v=U1(p)?p.canActivateChild(r,n):Et(d,()=>p(r,n));return zn(v).pipe(lr())});return J(c).pipe(Xi())}));return J(s).pipe(Xi())}function Y1(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(c=>{let l=Po(e)??i,d=Zi(c,l),p=j1(d)?d.canDeactivate(n,e,t,r):Et(l,()=>d(n,e,t,r));return zn(p).pipe(lr())});return J(o).pipe(Xi())}function J1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let c=Zi(o,n),l=L1(c)?c.canLoad(e,t):Et(n,()=>c(e,t));return zn(l)});return J(s).pipe(Xi(),y_(r))}function y_(n){return Rd(Qe(e=>{if(typeof e!="boolean")throw Lc(n,e)}),ae(e=>e===!0))}function X1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let c=Zi(o,n),l=B1(c)?c.canMatch(e,t):Et(n,()=>c(e,t));return zn(l)});return J(s).pipe(Xi(),y_(r))}var ko=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ro=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function $i(n){return lo(new ko(n))}function Z1(n){return lo(new Pe(4e3,!1))}function eS(n){return lo(g_(!1,mt.GuardRejected))}var _h=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[de])return Z1(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,t,r,i,s){return tS(t,i,s).pipe(ae(o=>{if(o instanceof yn)throw new Ro(o);let c=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Ro(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new yn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new Ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Pe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function tS(n,e,t){if(typeof n=="string")return J(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,params:d,data:p,title:v}=e;return zn(Et(t,()=>r({params:d,data:p,queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,title:v})))}var yh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nS(n,e,t,r,i){let s=w_(n,e,t);return s.matched?(r=T1(e,r),X1(r,e,t,i).pipe(ae(o=>o===!0?s:B({},yh)))):J(s)}function w_(n,e,t){if(e.path==="**")return rS(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},yh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Qv)(t,n,e);if(!i)return B({},yh);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function rS(n){return{matched:!0,parameters:n.length>0?Jv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Gv(n,e,t,r){return t.length>0&&oS(n,t,r)?{segmentGroup:new Ee(e,sS(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&aS(n,t,r)?{segmentGroup:new Ee(n.segments,iS(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function iS(n,e,t,r){let i={};for(let s of t)if(jc(n,e,s)&&!r[nn(s)]){let o=new Ee([],{});i[nn(s)]=o}return B(B({},r),i)}function sS(n,e){let t={};t[de]=e;for(let r of n)if(r.path===""&&nn(r)!==de){let i=new Ee([],{});t[nn(r)]=i}return t}function oS(n,e,t){return t.some(r=>jc(n,e,r)&&nn(r)!==de)}function aS(n,e,t){return t.some(r=>jc(n,e,r))}function jc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cS(n,e,t){return e.length===0&&!n.children[t]}var wh=class{};function lS(n,e,t,r,i,s,o="emptyOnly"){return new Eh(n,e,t,r,i,o,s).recognize()}var uS=31,Eh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new _h(this.urlSerializer,this.urlTree)}noMatchError(e){return new Pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Gv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Dt(r,t),s=new Ao("",i),o=o_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Xr([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,t).pipe(ae(r=>({children:r,rootSnapshot:t})),Xt(r=>{if(r instanceof Ro)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ko?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof Dt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return xe(s).pipe(Gr(o=>{let c=r.children[o],l=S1(t,o);return this.processSegmentGroup(e,l,c,o,i)}),Ld((o,c)=>(o.push(...c),o)),Od(null),B0(),wt(o=>{if(o===null)return $i(r);let c=E_(o);return dS(c),J(c)}))}processSegment(e,t,r,i,s,o,c){return xe(t).pipe(Gr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,c).pipe(Xt(d=>{if(d instanceof ko)return J(null);throw d}))),lr(l=>!!l),Xt(l=>{if(__(l))return cS(r,i,s)?J(new wh):$i(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,l){return nn(r)!==o&&(o===de||!jc(i,s,r))?$i(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):$i(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:v,remainingSegments:_}=w_(t,i,s);if(!l)return $i(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uS&&(this.allowRedirects=!1));let R=new Xr(s,d,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Wv(i),nn(i),i.component??i._loadedComponent??null,i,Kv(i)),N=Vc(R,c,this.paramsInheritanceStrategy);return R.params=Object.freeze(N.params),R.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(p,i.redirectTo,v,R,e).pipe(De(L=>this.applyRedirects.lineralizeSegments(i,L)),wt(L=>this.processSegment(e,r,t,L.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=nS(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(De(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(De(({routes:d})=>{let p=r._loadedInjector??e,{parameters:v,consumedSegments:_,remainingSegments:R}=l,N=new Xr(_,v,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Wv(r),nn(r),r.component??r._loadedComponent??null,r,Kv(r)),q=Vc(N,o,this.paramsInheritanceStrategy);N.params=Object.freeze(q.params),N.data=Object.freeze(q.data);let{segmentGroup:L,slicedSegments:oe}=Gv(t,_,R,d);if(oe.length===0&&L.hasChildren())return this.processChildren(p,d,L,N).pipe(ae(se=>new Dt(N,se)));if(d.length===0&&oe.length===0)return J(new Dt(N,[]));let ie=nn(r)===s;return this.processSegment(p,d,L,oe,ie?de:s,!0,N).pipe(ae(se=>new Dt(N,se instanceof Dt?[se]:[])))}))):$i(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):J1(e,t,r,this.urlSerializer).pipe(wt(i=>i?this.configLoader.loadChildren(e,t).pipe(Qe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):eS(t))):J({routes:[],injector:e})}};function dS(n){n.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet))}function hS(n){let e=n.value.routeConfig;return e&&e.path===""}function E_(n){let e=[],t=new Set;for(let r of n){if(!hS(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=E_(r.children);e.push(new Dt(r.value,i))}return e.filter(r=>!t.has(r))}function Wv(n){return n.data||{}}function Kv(n){return n.resolve||{}}function fS(n,e,t,r,i,s){return wt(o=>lS(n,e,t,r,o.extractedUrl,i,s).pipe(ae(({state:c,tree:l})=>me(B({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function pS(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of I_(l))o.add(d);let c=0;return xe(o).pipe(Gr(l=>s.has(l)?mS(l,r,n,e):(l.data=Vc(l,l.parent,n).resolve,J(void 0))),Qe(()=>c++),Vd(1),wt(l=>c===o.size?J(t):Ln))})}function I_(n){let e=n.children.map(t=>I_(t)).flat();return[n,...e]}function mS(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!f_(i)&&(s[Do]=i.title),sc(()=>(n.data=Vc(n,n.parent,t).resolve,gS(s,n,e,r).pipe(ae(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function gS(n,e,t,r){let i=lh(n);if(i.length===0)return J({});let s={};return xe(i).pipe(wt(o=>vS(n[o],e,t,r).pipe(lr(),Qe(c=>{if(c instanceof Ji)throw Lc(new gr,c);s[o]=c}))),Vd(1),ae(()=>s),Xt(o=>__(o)?Ln:lo(o)))}function vS(n,e,t,r){let i=Po(e)??r,s=Zi(n,i),o=s.resolve?s.resolve(e,t):Et(i,()=>s(e,t));return zn(o)}function ah(n){return De(e=>{let t=n(e);return t?xe(t).pipe(ae(()=>e)):J(e)})}var Ch=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===de);return r}getResolvedTitleForRoute(t){return t.data[Do]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>Q(b_),providedIn:"root"})}return n})(),b_=(()=>{class n extends Ch{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(Bv))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yr=new we("",{providedIn:"root",factory:()=>({})}),ni=new we(""),Bc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Q(dv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=zn(t.loadComponent()).pipe(ae(S_),Qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),oc(()=>{this.componentLoaders.delete(t)})),i=new Pd(r,()=>new Jt).pipe(Dd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=T_(r,this.compiler,t,this.onLoadEndListener).pipe(oc(()=>{this.childrenLoaders.delete(r)})),o=new Pd(s,()=>new Jt).pipe(Dd());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T_(n,e,t,r){return zn(n.loadChildren()).pipe(ae(S_),wt(i=>i instanceof tv||Array.isArray(i)?J(i):xe(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(ni,[],{optional:!0,self:!0}).flat()),{routes:o.map(Sh),injector:s}}))}function _S(n){return n&&typeof n=="object"&&"default"in n}function S_(n){return _S(n)?n.default:n}var $c=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>Q(yS),providedIn:"root"})}return n})(),yS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ah=new we(""),xh=new we("");function C_(n,e,t){let r=n.get(xh),i=n.get(xt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),wS(n))),{onViewTransitionCreated:l}=r;return l&&Et(n,()=>l({transition:c,from:e,to:t})),o}function wS(n){return new Promise(e=>{rv({read:()=>setTimeout(e)},{injector:n})})}var kh=new we(""),qc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Jt;transitionAbortWithErrorSubject=new Jt;configLoader=Q(Bc);environmentInjector=Q(Fn);destroyRef=Q(jd);urlSerializer=Q(ei);rootContexts=Q(ti);location=Q(Ui);inputBindingEnabled=Q(No,{optional:!0})!==null;titleStrategy=Q(Ch);options=Q(yr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Q($c);createViewTransition=Q(Ah,{optional:!0});navigationErrorHandler=Q(kh,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new xc(i)),r=i=>this.events.next(new kc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new ct(null),this.transitions.pipe(Ut(r=>r!==null),De(r=>{let i=!1;return J(r).pipe(De(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),Ln;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?me(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&c!=="reload"){let l="";return this.events.next(new wn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Wi.IgnoredSameUrlNavigation)),s.resolve(!1),Ln}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return J(s).pipe(De(l=>(this.events.next(new _r(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ln:Promise.resolve(l))),fS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=me(B({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let d=new To(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:p,restoredState:v,extras:_}=s,R=new _r(l,this.urlSerializer.serialize(d),p,v);this.events.next(R);let N=d_(this.rootComponentType).snapshot;return this.currentTransition=r=me(B({},s),{targetSnapshot:N,urlAfterRedirects:d,extras:me(B({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,J(r)}else{let l="";return this.events.next(new wn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Wi.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ln}}),Qe(s=>{let o=new Tc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),ae(s=>(this.currentTransition=r=me(B({},s),{guards:P1(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),q1(this.environmentInjector,s=>this.events.next(s)),Qe(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Lc(this.urlSerializer,s.guardsResult);let o=new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Ut(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",mt.GuardRejected),!1)),ah(s=>{if(s.guards.canActivateChecks.length!==0)return J(s).pipe(Qe(o=>{let c=new Cc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),De(o=>{let c=!1;return J(o).pipe(pS(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(o,"",mt.NoDataFromResolver)}}))}),Qe(o=>{let c=new Ac(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}))}),ah(s=>{let o=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Qe(d=>{c.component=d}),ae(()=>{})));for(let d of c.children)l.push(...o(d));return l};return Ni(o(s.targetSnapshot.root)).pipe(Od(null),Je(1))}),ah(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return c?xe(c).pipe(ae(()=>r)):J(r)}),ae(s=>{let o=A1(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=me(B({},s),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),Qe(()=>{this.events.next(new So)}),D1(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Je(1),Ud(new Ct(s=>{let o=r.abortController.signal,c=()=>s.next();return o.addEventListener("abort",c),()=>o.removeEventListener("abort",c)}).pipe(Ut(()=>!i&&!r.targetRouterState),Qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",mt.Aborted)}))),Qe({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ud(this.transitionAbortWithErrorSubject.pipe(Qe(s=>{throw s}))),oc(()=>{i||this.cancelNavigationTransition(r,"",mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xt(s=>{if(this.destroyed)return r.resolve(!1),Ln;if(i=!0,v_(s))this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),R1(s)?this.events.next(new Yi(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Ki(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(c instanceof Ji){let{message:l,cancellationCode:d}=Lc(this.urlSerializer,c);this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Yi(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Ln}))}))}cancelNavigationTransition(t,r,i){let s=new _n(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ES(n){return n!==Hi}var A_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>Q(IS),providedIn:"root"})}return n})(),Uc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IS=(()=>{class n extends Uc{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x_=(()=>{class n{urlSerializer=Q(ei);options=Q(yr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Q(Ui);urlHandlingStrategy=Q($c);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof yn?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=d_(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>Q(bS),providedIn:"root"})}return n})(),bS=(()=>{class n extends x_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof _r?this.updateStateMemento():t instanceof wn?this.commitTransition(r):t instanceof To?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof So?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof _n&&t.code!==mt.SupersededByNewNavigation&&t.code!==mt.Redirect?this.restoreHistory(r):t instanceof Ki?this.restoreHistory(r,!0):t instanceof gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=B(B({},o),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zc(n,e){n.events.pipe(Ut(t=>t instanceof gt||t instanceof _n||t instanceof Ki||t instanceof wn),ae(t=>t instanceof gt||t instanceof wn?0:(t instanceof _n?t.code===mt.Redirect||t.code===mt.SupersededByNewNavigation:!1)?2:1),Ut(t=>t!==2),Je(1)).subscribe(()=>{e()})}var TS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Q(iv);stateManager=Q(x_);options=Q(yr,{optional:!0})||{};pendingTasks=Q(z0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Q(qc);urlSerializer=Q(ei);location=Q(Ui);urlHandlingStrategy=Q($c);injector=Q(Fn);_events=new Jt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Q(A_);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Q(ni,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Q(No,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new M0;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof _n&&r.code!==mt.Redirect&&r.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gt)this.navigated=!0;else if(r instanceof Yi){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ES(i.source)},o);this.scheduleNavigation(c,Hi,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}b1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=B({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s).catch(l=>{this.injector.get(ac)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Sh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:o,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let v;try{let _=i?i.snapshot:this.routerState.snapshot.root;v=a_(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return c_(v,t,p,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=vr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Hi,null,r)}navigate(t,r={skipLocationChange:!1}){return CS(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},TS):r===!1?i=B({},SS):i=r,vr(t))return $v(this.currentUrlTree,t,i);let s=this.parseUrl(t);return $v(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((v,_)=>{c=v,l=_});let p=this.pendingTasks.add();return zc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(v=>Promise.reject(v))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Pe(4008,!1)}var $t=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Un(null);get href(){return tn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Jt;applicationErrorHandler=Q(ac);options=Q(yr,{optional:!0});constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.reactiveHref.set(Q(new fv("href"),{optional:!0}));let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof gt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(vr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:vr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)($(Oe),$(bt),H0("tabindex"),$(Vi),$(hr),$(po))};static \u0275dir=Xe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&F("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&dc("href",i.reactiveHref(),Q0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Yr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Yr],replaceUrl:[2,"replaceUrl","replaceUrl",Yr],routerLink:"routerLink"},features:[Bt]})}return n})(),Dh=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ve;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof gt&&this.update()})}ngAfterContentInit(){J(this.links.changes,J(null)).pipe(uo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=xe(t).pipe(uo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=AS(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)($(Oe),$(hr),$(Vi),$(Fi),$($t,8))};static \u0275dir=Xe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&ov(s,$t,5),r&2){let o;av(o=cv())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Bt]})}return n})();function AS(n){return!!n.paths}var Vo=class{};var k_=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ut(t=>t instanceof gt),Gr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=lc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return xe(i).pipe(uo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let s=i.pipe(wt(o=>o===null?J(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return xe([s,o]).pipe(uo())}else return s})}static \u0275fac=function(r){return new(r||n)(te(Oe),te(Fn),te(Vo),te(Bc))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R_=new we(""),xS=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Hi;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _r?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wn&&t.code===Wi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qi&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>w(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Qi(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){X0()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function Ph(n,...e){return dr([{provide:ni,multi:!0,useValue:n},[],{provide:bt,useFactory:D_,deps:[Oe]},{provide:Gd,multi:!0,useFactory:P_},e.map(t=>t.\u0275providers)])}function D_(n){return n.routerState.root}function Lo(n,e){return{\u0275kind:n,\u0275providers:e}}function P_(){let n=Q(At);return e=>{let t=n.get(sv);if(e!==t.components[0])return;let r=n.get(Oe),i=n.get(M_);n.get(Mh)===1&&r.initialNavigation(),n.get(V_,null,{optional:!0})?.setUpPreloading(),n.get(R_,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var M_=new we("",{factory:()=>new Jt}),Mh=new we("",{providedIn:"root",factory:()=>1});function N_(){let n=[{provide:Mh,useValue:0},Hd(()=>{let e=Q(At);return e.get(wv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Oe),s=e.get(M_);zc(i,()=>{r(!0)}),e.get(qc).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))})];return Lo(2,n)}function O_(){let n=[Hd(()=>{Q(Oe).setUpLocationChangeListener()}),{provide:Mh,useValue:2}];return Lo(3,n)}var V_=new we("");function L_(n){return Lo(0,[{provide:V_,useExisting:k_},{provide:Vo,useExisting:n}])}function F_(){return Lo(8,[bh,{provide:No,useExisting:bh}])}function U_(n){ev("NgRouterViewTransitions");let e=[{provide:Ah,useValue:C_},{provide:xh,useValue:B({skipNextTransition:!!n?.skipInitialTransition},n)}];return Lo(9,e)}var j_=[Ui,{provide:ei,useClass:gr},Oe,ti,{provide:bt,useFactory:D_,deps:[Oe]},Bc,[]],Fo=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[j_,[],{provide:ni,multi:!0,useValue:t},[],r?.errorHandler?{provide:kh,useValue:r.errorHandler}:[],{provide:yr,useValue:r||{}},r?.useHash?RS():DS(),kS(),r?.preloadingStrategy?L_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?PS(r):[],r?.bindToComponentInputs?F_().\u0275providers:[],r?.enableViewTransitions?U_().\u0275providers:[],MS()]}}static forChild(t){return{ngModule:n,providers:[{provide:ni,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=fr({type:n});static \u0275inj=ur({})}return n})();function kS(){return{provide:R_,useFactory:()=>{let n=Q(xv),e=Q(lt),t=Q(yr),r=Q(qc),i=Q(ei);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xS(i,r,n,e,t)}}}function RS(){return{provide:po,useClass:Iv}}function DS(){return{provide:po,useClass:Ev}}function PS(n){return[n.initialNavigation==="disabled"?O_().\u0275providers:[],n.initialNavigation==="enabledBlocking"?N_().\u0275providers:[]]}var Rh=new we("");function MS(){return[{provide:Rh,useFactory:P_},{provide:Gd,multi:!0,useExisting:Rh}]}var B_=()=>{};var z_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,p=s>>2,v=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,R=d&63;l||(R=64,o||(_=64)),r.push(t[p],t[v],t[_],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(z_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||v==null)throw new Oh;let _=s<<2|c>>4;if(r.push(_),d!==64){let R=c<<4&240|d>>2;if(r.push(R),v!==64){let N=d<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Oh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OS=function(n){let e=z_(n);return Hc.encodeByteArray(e,!0)},jo=function(n){return OS(n).replace(/\./g,"")},Gc=function(n){try{return Hc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Lh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VS=()=>Lh().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Gc(n[1]);return e&&JSON.parse(e)},Wc=()=>{try{return B_()||VS()||LS()||FS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Fh=n=>{var e,t;return(t=(e=Wc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},H_=n=>{let e=Fh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Uh=()=>{var n;return(n=Wc())===null||n===void 0?void 0:n.config},jh=n=>{var e;return(e=Wc())===null||e===void 0?void 0:e[`_${n}`]};var ii=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function wr(n){return n.endsWith(".cloudworkstations.dev")}function Kc(n){return w(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function G_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jo(JSON.stringify(t)),jo(JSON.stringify(o)),""].join(".")}var Uo={};function US(){let n={prod:[],emulator:[]};for(let e of Object.keys(Uo))Uo[e]?n.emulator.push(e):n.prod.push(e);return n}function jS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var $_=!1;function Qc(n,e){if(typeof window>"u"||typeof document>"u"||!wr(window.location.host)||Uo[n]===e||Uo[n]||$_)return;Uo[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",s=US().prod.length>0;function o(){let _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{$_=!0,o()},_}function p(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){let _=jS(r),R=t("text"),N=document.getElementById(R)||document.createElement("span"),q=t("learnmore"),L=document.getElementById(q)||document.createElement("a"),oe=t("preprendIcon"),ie=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let se=_.element;c(se),p(L,q);let ke=d();l(ie,oe),se.append(ie,N,L,ke),document.body.appendChild(se)}s?(N.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function BS(){var n;let e=(n=Wc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Y_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J_(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function X_(){return!BS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bo(){try{return typeof indexedDB=="object"}catch{return!1}}function Z_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var $S="FirebaseError",Mt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$S,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Mt(i,c,r)}};function qS(n,e){return n.replace(zS,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zS=/\{\$([^}]+)}/g;function ey(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(q_(s)&&q_(o)){if(!qt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function q_(n){return n!==null&&typeof n=="object"}function es(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ty(n,e){let t=new Vh(n,e);return t.subscribe.bind(t)}var Vh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");HS(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nh),i.error===void 0&&(i.error=Nh),i.complete===void 0&&(i.complete=Nh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HS(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nh(){}var LN=4*60*60*1e3;function qe(n){return n&&n._delegate?n._delegate:n}var vt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var si="[DEFAULT]";var Bh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ii;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WS(e))try{this.getOrInitializeService({instanceIdentifier:si})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=si){return this.instances.has(e)}getOptions(e=si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GS(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=si){return this.component?this.component.multipleInstances?e:si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GS(n){return n===si?void 0:n}function WS(n){return n.instantiationMode==="EAGER"}var Yc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Bh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KS=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),QS={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},YS=pe.INFO,JS={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},XS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},En=class{constructor(e){this.name=e,this._logLevel=YS,this._logHandler=XS,this._userLogHandler=null,KS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var ZS=(n,e)=>e.some(t=>n instanceof t),ny,ry;function eC(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tC(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var iy=new WeakMap,qh=new WeakMap,sy=new WeakMap,$h=new WeakMap,Hh=new WeakMap;function nC(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(In(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&iy.set(t,n)}).catch(()=>{}),Hh.set(e,n),e}function rC(n){if(qh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});qh.set(n,e)}var zh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return In(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oy(n){zh=n(zh)}function iC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Jc(this),e,...t);return sy.set(r,e.sort?e.sort():[e]),In(r)}:tC().includes(n)?function(...e){return n.apply(Jc(this),e),In(iy.get(this))}:function(...e){return In(n.apply(Jc(this),e))}}function sC(n){return typeof n=="function"?iC(n):(n instanceof IDBTransaction&&rC(n),ZS(n,eC())?new Proxy(n,zh):n)}function In(n){if(n instanceof IDBRequest)return nC(n);if($h.has(n))return $h.get(n);let e=sC(n);return e!==n&&($h.set(n,e),Hh.set(e,n)),e}var Jc=n=>Hh.get(n);function cy(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=In(o);return r&&o.addEventListener("upgradeneeded",l=>{r(In(o.result),l.oldVersion,l.newVersion,In(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var oC=["get","getKey","getAll","getAllKeys","count"],aC=["put","add","delete","clear"],Gh=new Map;function ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gh.get(e))return Gh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=aC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oC.includes(t)))return;let s=function(o,...c){return w(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Gh.set(e,s),s}oy(n=>me(B({},n),{get:(e,t,r)=>ay(e,t)||n.get(e,t,r),has:(e,t)=>!!ay(e,t)||n.has(e,t)}));var Kh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cC(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cC(n){let e=n.getComponent();return e?.type==="VERSION"}var Qh="@firebase/app",ly="0.13.1";var Hn=new En("@firebase/app"),lC="@firebase/app-compat",uC="@firebase/analytics-compat",dC="@firebase/analytics",hC="@firebase/app-check-compat",fC="@firebase/app-check",pC="@firebase/auth",mC="@firebase/auth-compat",gC="@firebase/database",vC="@firebase/data-connect",_C="@firebase/database-compat",yC="@firebase/functions",wC="@firebase/functions-compat",EC="@firebase/installations",IC="@firebase/installations-compat",bC="@firebase/messaging",TC="@firebase/messaging-compat",SC="@firebase/performance",CC="@firebase/performance-compat",AC="@firebase/remote-config",xC="@firebase/remote-config-compat",kC="@firebase/storage",RC="@firebase/storage-compat",DC="@firebase/firestore",PC="@firebase/ai",MC="@firebase/firestore-compat",NC="firebase",OC="11.9.0";var Yh="[DEFAULT]",VC={[Qh]:"fire-core",[lC]:"fire-core-compat",[dC]:"fire-analytics",[uC]:"fire-analytics-compat",[fC]:"fire-app-check",[hC]:"fire-app-check-compat",[pC]:"fire-auth",[mC]:"fire-auth-compat",[gC]:"fire-rtdb",[vC]:"fire-data-connect",[_C]:"fire-rtdb-compat",[yC]:"fire-fn",[wC]:"fire-fn-compat",[EC]:"fire-iid",[IC]:"fire-iid-compat",[bC]:"fire-fcm",[TC]:"fire-fcm-compat",[SC]:"fire-perf",[CC]:"fire-perf-compat",[AC]:"fire-rc",[xC]:"fire-rc-compat",[kC]:"fire-gcs",[RC]:"fire-gcs-compat",[DC]:"fire-fst",[MC]:"fire-fst-compat",[PC]:"fire-vertex","fire-js":"fire-js",[NC]:"fire-js-all"};var $o=new Map,LC=new Map,Jh=new Map;function uy(n,e){try{n.container.addComponent(e)}catch(t){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function on(n){let e=n.name;if(Jh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,n);for(let t of $o.values())uy(t,n);for(let t of LC.values())uy(t,n);return!0}function ts(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nt(n){return n==null?!1:n.settings!==void 0}var FC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new sn("app","Firebase",FC);var Xh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}};var Ir=OC;function tf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Er.create("bad-app-name",{appName:String(i)});if(t||(t=Uh()),!t)throw Er.create("no-options");let s=$o.get(i);if(s){if(qt(t,s.options)&&qt(r,s.config))return s;throw Er.create("duplicate-app",{appName:i})}let o=new Yc(i);for(let l of Jh.values())o.addComponent(l);let c=new Xh(t,r,o);return $o.set(i,c),c}function oi(n=Yh){let e=$o.get(n);if(!e&&n===Yh&&Uh())return tf();if(!e)throw Er.create("no-app",{appName:n});return e}function Xc(){return Array.from($o.values())}function ze(n,e,t){var r;let i=(r=VC[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(c.join(" "));return}on(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UC="firebase-heartbeat-database",jC=1,qo="firebase-heartbeat-store",Wh=null;function py(){return Wh||(Wh=cy(UC,jC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Er.create("idb-open",{originalErrorMessage:n.message})})),Wh}function BC(n){return w(this,null,function*(){try{let t=(yield py()).transaction(qo),r=yield t.objectStore(qo).get(my(n));return yield t.done,r}catch(e){if(e instanceof Mt)Hn.warn(e.message);else{let t=Er.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(t.message)}}})}function dy(n,e){return w(this,null,function*(){try{let r=(yield py()).transaction(qo,"readwrite");yield r.objectStore(qo).put(e,my(n)),yield r.done}catch(t){if(t instanceof Mt)Hn.warn(t.message);else{let r=Er.create("idb-set",{originalErrorMessage:t?.message});Hn.warn(r.message)}}})}function my(n){return`${n.name}!${n.options.appId}`}var $C=1024,qC=30,Zh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ef(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qC){let o=HC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=hy(),{heartbeatsToSend:r,unsentEntries:i}=zC(this._heartbeatsCache.heartbeats),s=jo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Hn.warn(t),""}})}};function hy(){return new Date().toISOString().substring(0,10)}function zC(n,e=$C){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fy(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ef=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Bo()?Z_().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield BC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function fy(n){return jo(JSON.stringify({version:2,heartbeats:n})).length}function HC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GC(n){on(new vt("platform-logger",e=>new Kh(e),"PRIVATE")),on(new vt("heartbeat",e=>new Zh(e),"PRIVATE")),ze(Qh,ly,n),ze(Qh,ly,"esm2017"),ze("fire-js","")}GC("");var WC="firebase",KC="11.9.1";ze(WC,KC,"app");function gy(n){n===void 0&&(n=Q(At));let e=n.get(cc);return t=>new Ct(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),o()},complete:()=>{r.complete(),o()},error:l=>{r.error(l),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var br=new Kd("ANGULARFIRE2_VERSION");function zo(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var rs=(n,e)=>{let t=e?[e]:Xc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ns=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ns||{}),vy=Qd()&&typeof Zone<"u"?ns.WARN:ns.SILENT;var Zc=class{zone;delegate;constructor(e,t=O0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Tr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Q(lt);this.outsideAngular=t.runOutsideAngular(()=>new Zc(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Zc(typeof Zone>"u"?void 0:Zone.current,N0))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_y=!1;function QC(n,e){!_y&&(vy>ns.SILENT||Qd())&&(_y=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),vy>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function YC(n){let e=Q(lt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ai(n){let e=Q(lt,{optional:!0});return e?e.run(()=>n()):n()}var JC=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Et(t,()=>ai(()=>n.apply(void 0,r)))),Ue=(n,e,t)=>(t||=e?ns.WARN:ns.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=Q(Tr),o=Q(cc),c=Q(Fn)}catch{return QC(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=ai(()=>o.add())),i[d]=JC(i[d],r,c));let l=YC(()=>n.apply(this,i));return e?l instanceof Ct?l.pipe(Nd(s.outsideAngular),Md(s.insideAngular),gy(c)):l instanceof Promise?ai(()=>{let d=o.add();return new Promise((p,v)=>{l.then(_=>Et(c,()=>ai(()=>p(_))),_=>Et(c,()=>ai(()=>v(_)))).finally(d)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ai(()=>l):l instanceof Ct?l.pipe(Nd(s.outsideAngular),Md(s.insideAngular)):ai(()=>l)});var Gn=class{constructor(e){return e}},ci=class{constructor(){return Xc()}};function XC(n){return n&&n.length===1?n[0]:new Gn(oi())}var nf=new we("angularfire2._apps"),ZC={provide:Gn,useFactory:XC,deps:[[new jt,nf]]},eA={provide:ci,deps:[[new jt,nf]]};function tA(n){return(e,t)=>{let r=t.get(Kr);ze("angularfire",br.full,"core"),ze("angularfire",br.full,"app"),ze("angular",mv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Gn(i)}}function yy(n,...e){return dr([ZC,eA,{provide:nf,useFactory:tA(n),multi:!0,deps:[lt,At,Tr,...e]}])}var wy=Ue(tf,!0);var nA=new Map,rA={activated:!1,tokenObservers:[]},iA={initialized:!1,enabled:!1};function an(n){return nA.get(n)||Object.assign({},rA)}function Ty(){return iA}var sA="https://content-firebaseappcheck.googleapis.com/v1";var oA="exchangeDebugToken",Ey={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},jO=24*60*60*1e3;var of=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new ii,this.pending.promise.catch(t=>{}),yield aA(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ii,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aA(n){return new Promise(e=>{setTimeout(e,n)})}var cA={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Sr=new sn("appCheck","AppCheck",cA);function Sy(n){if(!an(n).activated)throw Sr.create("use-before-activation",{appName:n.name})}function Cy(r,i){return w(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let R=yield o.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(R){throw Sr.create("fetch-network-error",{originalErrorMessage:R?.message})}if(l.status!==200)throw Sr.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(R){throw Sr.create("fetch-parse-error",{originalErrorMessage:R?.message})}let p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Sr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let v=Number(p[1])*1e3,_=Date.now();return{token:d.token,expireTimeMillis:_+v,issuedAtTimeMillis:_}})}function Ay(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sA}/projects/${t}/apps/${r}:${oA}?key=${i}`,body:{debug_token:e}}}var lA="firebase-app-check-database",uA=1,af="firebase-app-check-store";var el=null;function dA(){return el||(el=new Promise((n,e)=>{try{let t=indexedDB.open(lA,uA);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Sr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(af,{keyPath:"compositeKey"})}}}catch(t){e(Sr.create("storage-open",{originalErrorMessage:t?.message}))}}),el)}function hA(n,e){return fA(pA(n),e)}function fA(n,e){return w(this,null,function*(){let r=(yield dA()).transaction(af,"readwrite"),s=r.objectStore(af).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var d;c(Sr.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function pA(n){return`${n.options.appId}-${n.name}`}var Ho=new En("@firebase/app-check");function rf(n,e){return Bo()?hA(n,e).catch(t=>{Ho.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xy(){return Ty().enabled}function ky(){return w(this,null,function*(){let n=Ty();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var mA={error:"UNKNOWN_ERROR"};function gA(n){return Hc.encodeString(JSON.stringify(n),!1)}function cf(n,e=!1,t=!1){return w(this,null,function*(){let r=n.app;Sy(r);let i=an(r),s=i.token,o;if(s&&!Go(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(Go(d)?s=d:yield rf(r,void 0))}if(!e&&s&&Go(s))return{token:s.token};let c=!1;if(xy())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Cy(Ay(r,yield ky()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield rf(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ho.warn(d.message):t&&Ho.error(d),sf(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield an(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ho.warn(d.message):t&&Ho.error(d),o=d}let l;return s?o?Go(s)?l={token:s.token,internalError:o}:l=sf(o):(l={token:s.token},i.token=s,yield rf(r,s)):l=sf(o),c&&wA(r,l),l})}function vA(n){return w(this,null,function*(){let e=n.app;Sy(e);let{provider:t}=an(e);if(xy()){let r=yield ky(),{token:i}=yield Cy(Ay(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function _A(n,e,t,r){let{app:i}=n,s=an(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Go(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),Iy(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Iy(n))}function Ry(n,e){let t=an(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Iy(n){let{app:e}=n,t=an(e),r=t.tokenRefresher;r||(r=yA(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yA(n){let{app:e}=n;return new of(()=>w(null,null,function*(){let t=an(e),r;if(t.token?r=yield cf(n,!0):r=yield cf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=an(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ey.RETRIAL_MIN_WAIT,Ey.RETRIAL_MAX_WAIT)}function wA(n,e){let t=an(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Go(n){return n.expireTimeMillis-Date.now()>0}function sf(n){return{token:gA(mA),error:n}}var lf=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=an(this.app);for(let t of e)Ry(this.app,t.next);return Promise.resolve()}};function EA(n,e){return new lf(n,e)}function IA(n){return{getToken:e=>cf(n,e),getLimitedUseToken:()=>vA(n),addTokenListener:e=>_A(n,"INTERNAL",e),removeTokenListener:e=>Ry(n.app,e)}}var bA="@firebase/app-check",TA="0.10.0";var SA="app-check",by="app-check-internal";function CA(){on(new vt(SA,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return EA(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(by).initialize()})),on(new vt(by,n=>{let e=n.getProvider("app-check").getImmediate();return IA(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ze(bA,TA)}CA();var AA="app-check";var is=class{constructor(){return rs(AA)}};var xA=["localhost","0.0.0.0","127.0.0.1"],ZO=typeof window<"u"&&xA.includes(window.location.hostname);function Hy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Gy=Hy,Wy=new sn("auth","Firebase",Hy());var ol=new En("@firebase/auth");function kA(n,...e){ol.logLevel<=pe.WARN&&ol.warn(`Auth (${Ir}): ${n}`,...e)}function nl(n,...e){ol.logLevel<=pe.ERROR&&ol.error(`Auth (${Ir}): ${n}`,...e)}function Tn(n,...e){throw Af(n,...e)}function cn(n,...e){return Af(n,...e)}function Cf(n,e,t){let r=Object.assign(Object.assign({},Gy()),{[e]:t});return new sn("auth","Firebase",r).create(e,{appName:n.name})}function li(n){return Cf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RA(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tn(n,"argument-error"),Cf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Af(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Wy.create(n,...e)}function re(n,e,...t){if(!n)throw Af(e,...t)}function Wn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw nl(e),new Error(e)}function Qn(n,e){n||Wn(e)}function hf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DA(){return Dy()==="http:"||Dy()==="https:"}function Dy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function PA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DA()||Q_()||"connection"in navigator)?navigator.onLine:!0}function MA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ui=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qn(t>e,"Short delay should be less than long delay!"),this.isMobile=W_()||Y_()}get(){return PA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xf(n,e){Qn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var al=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var NA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var OA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VA=new ui(3e4,6e4);function kf(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function os(s,o,c,l){return w(this,arguments,function*(n,e,t,r,i={}){return Ky(n,i,()=>w(null,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let v=es(Object.assign({key:n.config.apiKey},p)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:_},d);return K_()||(R.referrerPolicy="no-referrer"),n.emulatorConfig&&wr(n.emulatorConfig.host)&&(R.credentials="include"),al.fetch()(yield Qy(n,n.config.apiHost,t,v),R)}))})}function Ky(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},NA),e);try{let i=new ff(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw tl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw tl(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw tl(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw tl(n,"user-disabled",o);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Cf(n,p,d);Tn(n,p)}}catch(i){if(i instanceof Mt)throw i;Tn(n,"network-request-failed",{message:String(i)})}})}function LA(s,o,c,l){return w(this,arguments,function*(n,e,t,r,i={}){let d=yield os(n,e,t,r,i);return"mfaPendingCredential"in d&&Tn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Qy(n,e,t,r){return w(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?xf(n.config,i):`${n.config.apiScheme}://${i}`;return OA.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var ff=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),VA.get())})}};function tl(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=cn(n,e,r);return i.customData._tokenResponse=t,i}function FA(n,e){return w(this,null,function*(){return os(n,"POST","/v1/accounts:delete",e)})}function cl(n,e){return w(this,null,function*(){return os(n,"POST","/v1/accounts:lookup",e)})}function Wo(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Rf(n,e=!1){return w(this,null,function*(){let t=qe(n),r=yield t.getIdToken(e),i=Df(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wo(uf(i.auth_time)),issuedAtTime:Wo(uf(i.iat)),expirationTime:Wo(uf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function uf(n){return Number(n)*1e3}function Df(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Gc(t);return i?JSON.parse(i):(nl("Failed to decode base64 JWT payload"),null)}catch(i){return nl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Py(n){let e=Df(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qo(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Mt&&UA(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function UA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var pf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ll(n){return w(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Qo(n,cl(t,{idToken:r}));re(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Yy(s.providerUserInfo):[],c=jA(n.providerData,o),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=l?d:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Yo(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,v)})}function Pf(n){return w(this,null,function*(){let e=qe(n);yield ll(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function jA(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Yy(n){return n.map(e=>{var{providerId:t}=e,r=rc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function BA(n,e){return w(this,null,function*(){let t=yield Ky(n,{},()=>w(null,null,function*(){let r=es({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Qy(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&wr(n.emulatorConfig.host)&&(l.credentials="include"),al.fetch()(o,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function $A(n,e){return w(this,null,function*(){return os(n,"POST","/v2/accounts:revokeToken",kf(n,e))})}var Ko=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=Py(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield BA(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Wn("not implemented")}};function Cr(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ar=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=rc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield Qo(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Rf(this,e)}reload(){return Pf(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ll(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Nt(this.auth.app))return Promise.reject(li(this.auth));let e=yield this.getIdToken();return yield Qo(this,FA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,d,p;let v=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,q=(c=t.tenantId)!==null&&c!==void 0?c:void 0,L=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,oe=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ie=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:se,emailVerified:ke,isAnonymous:ht,providerData:Se,stsTokenManager:S}=t;re(se&&S,e,"internal-error");let y=Ko.fromJSON(this.name,S);re(typeof se=="string",e,"internal-error"),Cr(v,e.name),Cr(_,e.name),re(typeof ke=="boolean",e,"internal-error"),re(typeof ht=="boolean",e,"internal-error"),Cr(R,e.name),Cr(N,e.name),Cr(q,e.name),Cr(L,e.name),Cr(oe,e.name),Cr(ie,e.name);let b=new n({uid:se,auth:e,email:_,emailVerified:ke,displayName:v,isAnonymous:ht,photoURL:N,phoneNumber:R,tenantId:q,stsTokenManager:y,createdAt:oe,lastLoginAt:ie});return Se&&Array.isArray(Se)&&(b.providerData=Se.map(T=>Object.assign({},T))),L&&(b._redirectEventId=L),b}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new Ko;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ll(s),s})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];re(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Yy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ko;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var My=new Map;function Kn(n){Qn(n instanceof Function,"Expected a class definition");let e=My.get(n);return e?(Qn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,My.set(n,e),e)}var qA=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),mf=qA;function rl(n,e,t){return`firebase:${n}:${e}:${t}`}var ul=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=rl(this.userKey,i.apiKey,s),this.fullPersistenceKey=rl("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield cl(this.auth,{idToken:e}).catch(()=>{});return t?Ar._fromGetAccountInfoResponse(this.auth,t,e):null}return Ar._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n(Kn(mf),e,r);let i=(yield Promise.all(t.map(d=>w(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Kn(mf),o=rl(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(o);if(p){let v;if(typeof p=="string"){let _=yield cl(e,{idToken:p}).catch(()=>{});if(!_)break;v=yield Ar._fromGetAccountInfoResponse(e,_,p)}else v=Ar._fromJSON(e,p);d!==s&&(c=v),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>w(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function Ny(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nw(e))return"Blackberry";if(rw(e))return"Webos";if(Xy(e))return"Safari";if((e.includes("chrome/")||Zy(e))&&!e.includes("edge/"))return"Chrome";if(tw(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Jy(n=Ze()){return/firefox\//i.test(n)}function Xy(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zy(n=Ze()){return/crios\//i.test(n)}function ew(n=Ze()){return/iemobile/i.test(n)}function tw(n=Ze()){return/android/i.test(n)}function nw(n=Ze()){return/blackberry/i.test(n)}function rw(n=Ze()){return/webos/i.test(n)}function Mf(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zA(n=Ze()){var e;return Mf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return J_()&&document.documentMode===10}function iw(n=Ze()){return Mf(n)||tw(n)||rw(n)||nw(n)||/windows phone/i.test(n)||ew(n)}function sw(n,e=[]){let t;switch(n){case"Browser":t=Ny(Ze());break;case"Worker":t=`${Ny(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ir}/${r}`}var gf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function GA(t){return w(this,arguments,function*(n,e={}){return os(n,"GET","/v2/passwordPolicy",kf(n,e))})}var WA=6,vf=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:WA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var _f=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dl(this),this.idTokenSubscription=new dl(this),this.beforeStateQueue=new gf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield ul.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield cl(this,{idToken:e}),r=yield Ar._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var t;if(Nt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield ll(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MA()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Nt(this.app))return Promise.reject(li(this));let t=e?qe(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Nt(this.app)?Promise.reject(li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nt(this.app)?Promise.reject(li(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Kn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield GA(this),t=new vf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield $A(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Kn(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield ul.create(this,[Kn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return w(this,null,function*(){var e;if(Nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&kA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function yl(n){return qe(n)}var dl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ty(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Nf={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KA(n){Nf=n}function QA(n){return Nf.loadJS(n)}function YA(){return Nf.gapiScript}function ow(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Of(n,e){let t=ts(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(qt(s,e??{}))return i;Tn(i,"already-initialized")}return t.initialize({options:e})}function JA(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Kn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vf(n,e,t){let r=yl(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=aw(e),{host:o,port:c}=XA(e),l=c===null?"":`:${c}`,d={url:`${s}//${o}${l}/`},p=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(qt(d,r.config.emulator)&&qt(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,wr(o)?(Kc(`${s}//${o}${l}`),Qc("Auth",!0)):i||ZA()}function aw(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XA(n){let e=aw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Oy(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Oy(o)}}}function Oy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ZA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Jo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,t){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}};function ss(n,e){return w(this,null,function*(){return LA(n,"POST","/v1/accounts:signInWithIdp",kf(n,e))})}var ex="http://localhost",hl=class n extends Jo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=rc(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return ss(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ss(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ss(e,t)}buildRequest(){let e={requestUri:ex,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=es(t)}return e}};var Xo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var fl=class extends Xo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Lf=(()=>{class n extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return hl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Zo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return w(this,null,function*(){let s=yield Ar._fromIdTokenResponse(e,r,i),o=Vy(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Vy(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Vy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var yf=class n extends Mt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function cw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(n,s,e,r):s})}function tx(n,e,t=!1){return w(this,null,function*(){let r=yield Qo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Zo._forOperation(n,"link",r)})}function nx(n,e,t=!1){return w(this,null,function*(){let{auth:r}=n;if(Nt(r.app))return Promise.reject(li(r));let i="reauthenticate";try{let s=yield Qo(n,cw(r,i,e,n),t);re(s.idToken,r,"internal-error");let o=Df(s.idToken);re(o,r,"internal-error");let{sub:c}=o;return re(n.uid===c,r,"user-mismatch"),Zo._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Tn(r,"user-mismatch"),s}})}function rx(n,e,t=!1){return w(this,null,function*(){if(Nt(n.app))return Promise.reject(li(n));let r="signIn",i=yield cw(n,r,e),s=yield Zo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function ta(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function Ff(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}function Uf(n){return qe(n).signOut()}var pl="__sak";var ml=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pl,"1"),this.storage.removeItem(pl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ix=1e3,sx=10,ox=(()=>{class n extends ml{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);HA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,sx):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},ix)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return w(this,null,function*(){yield cr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return w(this,null,function*(){let r=yield cr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return w(this,null,function*(){yield cr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),lw=ox;var ax=(()=>{class n extends ml{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jf=ax;function cx(n){return Promise.all(n.map(e=>w(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var lx=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return w(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(p=>w(this,null,function*(){return p(r.origin,o)})),d=yield cx(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Bf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var wf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=Bf("",20);i.port1.start();let p=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){let _=v;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(p),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function bn(){return window}function ux(n){bn().location.href=n}function uw(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function dx(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function hx(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function fx(){return uw()?self:null}var dw="firebaseLocalStorageDb",px=1,gl="firebaseLocalStorage",hw="fbase_key",di=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wl(n,e){return n.transaction([gl],e?"readwrite":"readonly").objectStore(gl)}function mx(){let n=indexedDB.deleteDatabase(dw);return new di(n).toPromise()}function Ef(){let n=indexedDB.open(dw,px);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(gl,{keyPath:hw})}catch(i){t(i)}}),n.addEventListener("success",()=>w(null,null,function*(){let r=n.result;r.objectStoreNames.contains(gl)?e(r):(r.close(),yield mx(),e(yield Ef()))}))})}function Ly(n,e,t){return w(this,null,function*(){let r=wl(n,!0).put({[hw]:e,value:t});return new di(r).toPromise()})}function gx(n,e){return w(this,null,function*(){let t=wl(n,!1).get(e),r=yield new di(t).toPromise();return r===void 0?null:r.value})}function Fy(n,e){let t=wl(n,!0).delete(e);return new di(t).toPromise()}var vx=800,_x=3,yx=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Ef(),this.db)})}_withRetries(t){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>_x)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return uw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=lx._getInstance(fx()),this.receiver._subscribe("keyChanged",(t,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var t,r;if(this.activeServiceWorker=yield dx(),!this.activeServiceWorker)return;this.sender=new wf(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||hx()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ef();return yield Ly(t,pl,"1"),yield Fy(t,pl),!0}catch{}return!1})}_withPendingWrite(t){return w(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Ly(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return w(this,null,function*(){let r=yield this._withRetries(i=>gx(i,t));return this.localCache[t]=r,r})}_remove(t){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>Fy(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return w(this,null,function*(){let t=yield this._withRetries(s=>{let o=wl(s,!1).getAll();return new di(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),vx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),fw=yx;var lV=ow("rcb"),uV=new ui(3e4,6e4);function pw(n,e){return e?Kn(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ea=class extends Jo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ss(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function wx(n){return rx(n.auth,new ea(n),n.bypassAuthState)}function Ex(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),nx(t,new ea(n),n.bypassAuthState)}function Ix(n){return w(this,null,function*(){let{auth:e,user:t}=n;return re(t,e,"internal-error"),tx(t,new ea(n),n.bypassAuthState)})}var vl=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wx;case"linkViaPopup":case"linkViaRedirect":return Ix;case"reauthViaPopup":case"reauthViaRedirect":return Ex;default:Tn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bx=new ui(2e3,1e4);function $f(n,e,t){return w(this,null,function*(){if(Nt(n.app))return Promise.reject(cn(n,"operation-not-supported-in-this-environment"));let r=yl(n);RA(n,e,Xo);let i=pw(r,t);return new Tx(r,"signInViaPopup",e,i).executeNotNull()})}var Tx=(()=>{class n extends vl{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let t=yield this.execute();return re(t,this.auth,"internal-error"),t})}onExecution(){return w(this,null,function*(){Qn(this.filter.length===1,"Popup operations only handle one event");let t=Bf();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bx.get())};t()}}n.currentPopupAction=null;return n})(),Sx="pendingRedirect",il=new Map,If=class n extends vl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=il.get(this.auth._key());if(!e){try{let r=(yield Cx(this.resolver,this.auth))?yield cr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return cr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,cr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function Cx(n,e){return w(this,null,function*(){let t=kx(e),r=xx(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Ax(n,e){il.set(n._key(),e)}function xx(n){return Kn(n._redirectPersistence)}function kx(n){return rl(Sx,n.config.apiKey,n.name)}function Rx(n,e,t=!1){return w(this,null,function*(){if(Nt(n.app))return Promise.reject(li(n));let r=yl(n),i=pw(r,e),o=yield new If(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Dx=10*60*1e3,bf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Px(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(cn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uy(e))}saveEventToCache(e){this.cachedEventUids.add(Uy(e)),this.lastProcessedEventTime=Date.now()}};function Uy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Px(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mw(n);default:return!1}}function Mx(t){return w(this,arguments,function*(n,e={}){return os(n,"GET","/v1/projects",e)})}var Nx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ox=/^https?/;function Vx(n){return w(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Mx(n);for(let t of e)try{if(Lx(t))return}catch{}Tn(n,"unauthorized-domain")})}function Lx(n){let e=hf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Ox.test(t))return!1;if(Nx.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Fx=new ui(3e4,6e4);function jy(){let n=bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ux(n){return new Promise((e,t)=>{var r,i,s;function o(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),t(cn(n,"network-request-failed"))},timeout:Fx.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{let c=ow("iframefcb");return bn()[c]=()=>{gapi.load?o():t(cn(n,"network-request-failed"))},QA(`${YA()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw sl=null,e})}var sl=null;function jx(n){return sl=sl||Ux(n),sl}var Bx=new ui(5e3,15e3),$x="__/auth/iframe",qx="emulator/auth/iframe",zx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gx(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?xf(e,qx):`https://${n.config.authDomain}/${$x}`,r={apiKey:e.apiKey,appName:n.name,v:Ir},i=Hx.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${es(r).slice(1)}`}function Wx(n){return w(this,null,function*(){let e=yield jx(n),t=bn().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:Gx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zx,dontclear:!0},r=>new Promise((i,s)=>w(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=cn(n,"network-request-failed"),c=bn().setTimeout(()=>{s(o)},Bx.get());function l(){bn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var Kx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qx=500,Yx=600,Jx="_blank",Xx="http://localhost",_l=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Zx(n,e,t,r=Qx,i=Yx){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},Kx),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Ze().toLowerCase();t&&(c=Zy(d)?Jx:t),Jy(d)&&(e=e||Xx,l.scrollbars="yes");let p=Object.entries(l).reduce((_,[R,N])=>`${_}${R}=${N},`,"");if(zA(d)&&c!=="_self")return ek(e||"",c),new _l(null);let v=window.open(e||"",c,p);re(v,n,"popup-blocked");try{v.focus()}catch{}return new _l(v)}function ek(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var tk="__/auth/handler",nk="emulator/auth/handler",rk=encodeURIComponent("fac");function By(n,e,t,r,i,s){return w(this,null,function*(){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ir,eventId:i};if(e instanceof Xo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ey(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,v]of Object.entries(s||{}))o[p]=v}if(e instanceof fl){let p=e.getScopes().filter(v=>v!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let l=yield n._getAppCheckToken(),d=l?`#${rk}=${encodeURIComponent(l)}`:"";return`${ik(n)}?${es(c).slice(1)}${d}`})}function ik({config:n}){return n.emulator?xf(n,nk):`https://${n.authDomain}/${tk}`}var df="webStorageSupport",Tf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jf,this._completeRedirectFn=Rx,this._overrideRedirectResult=Ax}_openPopup(e,t,r,i){return w(this,null,function*(){var s;Qn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield By(e,t,r,hf(),i);return Zx(e,o,Bf())})}_openRedirect(e,t,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield By(e,t,r,hf(),i);return ux(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Qn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return w(this,null,function*(){let t=yield Wx(e),r=new bf(e);return t.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(df,{type:df},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[df];o!==void 0&&t(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Vx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iw()||Xy()||Mf()}},gw=Tf;var $y="@firebase/auth",qy="1.10.7";var Sf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function sk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ok(n){on(new vt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(n)},d=new _f(r,i,s,l);return JA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),on(new vt("auth-internal",e=>{let t=yl(e.getProvider("auth").getImmediate());return(r=>new Sf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze($y,qy,sk(n)),ze($y,qy,"esm2017")}var ak=5*60,ck=jh("authIdTokenMaxAge")||ak,zy=null,lk=n=>e=>w(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ck)return;let i=t?.token;zy!==i&&(zy=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qf(n=oi()){let e=ts(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Of(n,{popupRedirectResolver:gw,persistence:[fw,lw,jf]}),r=jh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=lk(s.toString());Ff(t,o,()=>o(t.currentUser)),ta(t,c=>o(c))}}let i=Fh("auth");return i&&Vf(t,`http://${i}`),t}function uk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KA({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=cn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ok("Browser");function yw(n){return new Ct(function(e){var t=ta(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ww="auth",hi=class{constructor(e){return e}},na=class{constructor(){return rs(ww)}};var zf=new we("angularfire2.auth-instances");function Zk(n,e){let t=zo(ww,n,e);return t&&new hi(t)}function eR(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hi(r)}}var tR={provide:na,deps:[[new jt,zf]]},nR={provide:hi,useFactory:Zk,deps:[[new jt,zf],Gn]};function Ew(n,...e){return ze("angularfire",br.full,"auth"),dr([nR,tR,{provide:zf,useFactory:eR(n),multi:!0,deps:[lt,At,Tr,ci,[new jt,is],...e]}])}var Iw=Ue(yw,!0);var bw=Ue(qf,!0);var Tw=Ue($f,!0,2);var Sw=Ue(Uf,!0,2);var Cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Aw={};var Yn,Hf;(function(){var n;function e(S,y){function b(){}b.prototype=y.prototype,S.D=y.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(T,C,k){for(var I=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)I[Nn-2]=arguments[Nn];return y.prototype[C].apply(T,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,y,b){b||(b=0);var T=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)T[C]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(C=0;16>C;++C)T[C]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=S.g[0],b=S.g[1],C=S.g[2];var k=S.g[3],I=y+(k^b&(C^k))+T[0]+3614090360&4294967295;y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+T[1]+3905402710&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+T[2]+606105819&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+T[3]+3250441966&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+T[4]+4118548399&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+T[5]+1200080426&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+T[6]+2821735955&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+T[7]+4249261313&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+T[8]+1770035416&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+T[9]+2336552879&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+T[10]+4294925233&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+T[11]+2304563134&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(k^b&(C^k))+T[12]+1804603682&4294967295,y=b+(I<<7&4294967295|I>>>25),I=k+(C^y&(b^C))+T[13]+4254626195&4294967295,k=y+(I<<12&4294967295|I>>>20),I=C+(b^k&(y^b))+T[14]+2792965006&4294967295,C=k+(I<<17&4294967295|I>>>15),I=b+(y^C&(k^y))+T[15]+1236535329&4294967295,b=C+(I<<22&4294967295|I>>>10),I=y+(C^k&(b^C))+T[1]+4129170786&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+T[6]+3225465664&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+T[11]+643717713&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+T[0]+3921069994&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+T[5]+3593408605&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+T[10]+38016083&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+T[15]+3634488961&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+T[4]+3889429448&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+T[9]+568446438&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+T[14]+3275163606&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+T[3]+4107603335&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+T[8]+1163531501&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(C^k&(b^C))+T[13]+2850285829&4294967295,y=b+(I<<5&4294967295|I>>>27),I=k+(b^C&(y^b))+T[2]+4243563512&4294967295,k=y+(I<<9&4294967295|I>>>23),I=C+(y^b&(k^y))+T[7]+1735328473&4294967295,C=k+(I<<14&4294967295|I>>>18),I=b+(k^y&(C^k))+T[12]+2368359562&4294967295,b=C+(I<<20&4294967295|I>>>12),I=y+(b^C^k)+T[5]+4294588738&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+T[8]+2272392833&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+T[11]+1839030562&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+T[14]+4259657740&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+T[1]+2763975236&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+T[4]+1272893353&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+T[7]+4139469664&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+T[10]+3200236656&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+T[13]+681279174&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+T[0]+3936430074&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+T[3]+3572445317&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+T[6]+76029189&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(b^C^k)+T[9]+3654602809&4294967295,y=b+(I<<4&4294967295|I>>>28),I=k+(y^b^C)+T[12]+3873151461&4294967295,k=y+(I<<11&4294967295|I>>>21),I=C+(k^y^b)+T[15]+530742520&4294967295,C=k+(I<<16&4294967295|I>>>16),I=b+(C^k^y)+T[2]+3299628645&4294967295,b=C+(I<<23&4294967295|I>>>9),I=y+(C^(b|~k))+T[0]+4096336452&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+T[7]+1126891415&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+T[14]+2878612391&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+T[5]+4237533241&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+T[12]+1700485571&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+T[3]+2399980690&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+T[10]+4293915773&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+T[1]+2240044497&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+T[8]+1873313359&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+T[15]+4264355552&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+T[6]+2734768916&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+T[13]+1309151649&4294967295,b=C+(I<<21&4294967295|I>>>11),I=y+(C^(b|~k))+T[4]+4149444226&4294967295,y=b+(I<<6&4294967295|I>>>26),I=k+(b^(y|~C))+T[11]+3174756917&4294967295,k=y+(I<<10&4294967295|I>>>22),I=C+(y^(k|~b))+T[2]+718787259&4294967295,C=k+(I<<15&4294967295|I>>>17),I=b+(k^(C|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+k&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var b=y-this.blockSize,T=this.B,C=this.h,k=0;k<y;){if(C==0)for(;k<=b;)i(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<y;)if(T[C++]=S.charCodeAt(k++),C==this.blockSize){i(this,T),C=0;break}}else for(;k<y;)if(T[C++]=S[k++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var b=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=b&255,b/=256;for(this.u(S),S=Array(16),y=b=0;4>y;++y)for(var T=0;32>T;T+=8)S[b++]=this.g[y]>>>T&255;return S};function s(S,y){var b=c;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=y(S)}function o(S,y){this.h=y;for(var b=[],T=!0,C=S.length-1;0<=C;C--){var k=S[C]|0;T&&k==y||(b[C]=k,T=!1)}this.g=b}var c={};function l(S){return-128<=S&&128>S?s(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return L(d(-S));for(var y=[],b=1,T=0;S>=b;T++)y[T]=S/b|0,b*=4294967296;return new o(y,0)}function p(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return L(p(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(y,8)),T=v,C=0;C<S.length;C+=8){var k=Math.min(8,S.length-C),I=parseInt(S.substring(C,C+k),y);8>k?(k=d(Math.pow(y,k)),T=T.j(k).add(d(I))):(T=T.j(b),T=T.add(d(I)))}return T}var v=l(0),_=l(1),R=l(16777216);n=o.prototype,n.m=function(){if(q(this))return-L(this).m();for(var S=0,y=1,b=0;b<this.g.length;b++){var T=this.i(b);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(q(this))return"-"+L(this).toString(S);for(var y=d(Math.pow(S,6)),b=this,T="";;){var C=ke(b,y).g;b=oe(b,C.j(y));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=C,N(b))return k+T;for(;6>k.length;)k="0"+k;T=k+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function q(S){return S.h==-1}n.l=function(S){return S=oe(this,S),q(S)?-1:N(S)?0:1};function L(S){for(var y=S.g.length,b=[],T=0;T<y;T++)b[T]=~S.g[T];return new o(b,~S.h).add(_)}n.abs=function(){return q(this)?L(this):this},n.add=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],T=0,C=0;C<=y;C++){var k=T+(this.i(C)&65535)+(S.i(C)&65535),I=(k>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);T=I>>>16,k&=65535,I&=65535,b[C]=I<<16|k}return new o(b,b[b.length-1]&-2147483648?-1:0)};function oe(S,y){return S.add(L(y))}n.j=function(S){if(N(this)||N(S))return v;if(q(this))return q(S)?L(this).j(L(S)):L(L(this).j(S));if(q(S))return L(this.j(L(S)));if(0>this.l(R)&&0>S.l(R))return d(this.m()*S.m());for(var y=this.g.length+S.g.length,b=[],T=0;T<2*y;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<S.g.length;C++){var k=this.i(T)>>>16,I=this.i(T)&65535,Nn=S.i(C)>>>16,zs=S.i(C)&65535;b[2*T+2*C]+=I*zs,ie(b,2*T+2*C),b[2*T+2*C+1]+=k*zs,ie(b,2*T+2*C+1),b[2*T+2*C+1]+=I*Nn,ie(b,2*T+2*C+1),b[2*T+2*C+2]+=k*Nn,ie(b,2*T+2*C+2)}for(T=0;T<y;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=y;T<2*y;T++)b[T]=0;return new o(b,0)};function ie(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function se(S,y){this.g=S,this.h=y}function ke(S,y){if(N(y))throw Error("division by zero");if(N(S))return new se(v,v);if(q(S))return y=ke(L(S),y),new se(L(y.g),L(y.h));if(q(y))return y=ke(S,L(y)),new se(L(y.g),y.h);if(30<S.g.length){if(q(S)||q(y))throw Error("slowDivide_ only works with positive integers.");for(var b=_,T=y;0>=T.l(S);)b=ht(b),T=ht(T);var C=Se(b,1),k=Se(T,1);for(T=Se(T,2),b=Se(b,2);!N(T);){var I=k.add(T);0>=I.l(S)&&(C=C.add(b),k=I),T=Se(T,1),b=Se(b,1)}return y=oe(S,C.j(y)),new se(C,y)}for(C=v;0<=S.l(y);){for(b=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),k=d(b),I=k.j(y);q(I)||0<I.l(S);)b-=T,k=d(b),I=k.j(y);N(k)&&(k=_),C=C.add(k),S=oe(S,I)}return new se(C,S)}n.A=function(S){return ke(this,S).h},n.and=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)&S.i(T);return new o(b,this.h&S.h)},n.or=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)|S.i(T);return new o(b,this.h|S.h)},n.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)^S.i(T);return new o(b,this.h^S.h)};function ht(S){for(var y=S.g.length+1,b=[],T=0;T<y;T++)b[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(b,S.h)}function Se(S,y){var b=y>>5;y%=32;for(var T=S.g.length-b,C=[],k=0;k<T;k++)C[k]=0<y?S.i(k+b)>>>y|S.i(k+b+1)<<32-y:S.i(k+b);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hf=Aw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Yn=Aw.Integer=o}).apply(typeof Cw<"u"?Cw:typeof self<"u"?self:typeof window<"u"?window:{});var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={};var Gf,iR,as,Wf,ra,Il,Kf,Qf,Yf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof El=="object"&&El];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var A=a[m];if(!(A in h))break e;h=h[A]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,m=!1,A={next:function(){if(!m&&h<a.length){var D=h++;return{value:u(D,a[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function p(a,u,h){return a.call.apply(a.bind,arguments)}function v(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function _(a,u,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,_.apply(null,arguments)}function R(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function N(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,A,D){for(var j=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)j[Re-2]=arguments[Re];return u.prototype[A].apply(m,j)}}function q(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function L(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let A=a.length||0,D=m.length||0;a.length=A+D;for(let j=0;j<D;j++)a[A+j]=m[j]}else a.push(m)}}class oe{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ie(a){return/^[\s\xa0]*$/.test(a)}function se(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ke(a){return ke[" "](a),a}ke[" "]=function(){};var ht=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Se(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function S(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function y(a){let u={};for(let h in a)u[h]=a[h];return u}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,u){let h,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(h in m)a[h]=m[h];for(let D=0;D<b.length;D++)h=b[D],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function C(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function k(a){c.setTimeout(()=>{throw a},0)}function I(){var a=sd;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Nn{constructor(){this.h=this.g=null}add(u,h){let m=zs.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var zs=new oe(()=>new eT,a=>a.reset());class eT{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Hs,Gs=!1,sd=new Nn,Pg=()=>{let a=c.Promise.resolve(void 0);Hs=()=>{a.then(tT)}};var tT=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){k(h)}var u=zs;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Gs=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var nT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Ws(a,u){if(it.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(ht){e:{try{ke(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:rT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ws.aa.h.call(this)}}N(Ws,it);var rT={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),iT=0;function sT(a,u,h,m,A){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=A,this.key=++iT,this.da=this.fa=!1}function Ua(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ja(a){this.src=a,this.g={},this.h=0}ja.prototype.add=function(a,u,h,m,A){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var j=ad(a,u,m,A);return-1<j?(u=a[j],h||(u.fa=!1)):(u=new sT(u,this.src,D,!!m,A),u.fa=h,a.push(u)),u};function od(a,u){var h=u.type;if(h in a.g){var m=a.g[h],A=Array.prototype.indexOf.call(m,u,void 0),D;(D=0<=A)&&Array.prototype.splice.call(m,A,1),D&&(Ua(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ad(a,u,h,m){for(var A=0;A<a.length;++A){var D=a[A];if(!D.da&&D.listener==u&&D.capture==!!h&&D.ha==m)return A}return-1}var cd="closure_lm_"+(1e6*Math.random()|0),ld={};function Mg(a,u,h,m,A){if(m&&m.once)return Og(a,u,h,m,A);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Mg(a,u[D],h,m,A);return null}return h=fd(h),a&&a[Ks]?a.K(u,h,d(m)?!!m.capture:!!m,A):Ng(a,u,h,!1,m,A)}function Ng(a,u,h,m,A,D){if(!u)throw Error("Invalid event type");var j=d(A)?!!A.capture:!!A,Re=dd(a);if(Re||(a[cd]=Re=new ja(a)),h=Re.add(u,h,m,j,D),h.proxy)return h;if(m=oT(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)nT||(A=j),A===void 0&&(A=!1),a.addEventListener(u.toString(),m,A);else if(a.attachEvent)a.attachEvent(Lg(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function oT(){function a(h){return u.call(a.src,a.listener,h)}let u=aT;return a}function Og(a,u,h,m,A){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Og(a,u[D],h,m,A);return null}return h=fd(h),a&&a[Ks]?a.L(u,h,d(m)?!!m.capture:!!m,A):Ng(a,u,h,!0,m,A)}function Vg(a,u,h,m,A){if(Array.isArray(u))for(var D=0;D<u.length;D++)Vg(a,u[D],h,m,A);else m=d(m)?!!m.capture:!!m,h=fd(h),a&&a[Ks]?(a=a.i,u=String(u).toString(),u in a.g&&(D=a.g[u],h=ad(D,h,m,A),-1<h&&(Ua(D[h]),Array.prototype.splice.call(D,h,1),D.length==0&&(delete a.g[u],a.h--)))):a&&(a=dd(a))&&(u=a.g[u.toString()],a=-1,u&&(a=ad(u,h,m,A)),(h=-1<a?u[a]:null)&&ud(h))}function ud(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Ks])od(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(Lg(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=dd(u))?(od(h,a),h.h==0&&(h.src=null,u[cd]=null)):Ua(a)}}}function Lg(a){return a in ld?ld[a]:ld[a]="on"+a}function aT(a,u){if(a.da)a=!0;else{u=new Ws(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&ud(a),a=h.call(m,u)}return a}function dd(a){return a=a[cd],a instanceof ja?a:null}var hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function fd(a){return typeof a=="function"?a:(a[hd]||(a[hd]=function(u){return a.handleEvent(u)}),a[hd])}function st(){ir.call(this),this.i=new ja(this),this.M=this,this.F=null}N(st,ir),st.prototype[Ks]=!0,st.prototype.removeEventListener=function(a,u,h,m){Vg(this,a,u,h,m)};function ft(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new it(u,a);else if(u instanceof it)u.target=u.target||a;else{var A=u;u=new it(m,a),T(u,A)}if(A=!0,h)for(var D=h.length-1;0<=D;D--){var j=u.g=h[D];A=Ba(j,m,!0,u)&&A}if(j=u.g=a,A=Ba(j,m,!0,u)&&A,A=Ba(j,m,!1,u)&&A,h)for(D=0;D<h.length;D++)j=u.g=h[D],A=Ba(j,m,!1,u)&&A}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)Ua(h[m]);delete a.g[u],a.h--}}this.F=null},st.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},st.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function Ba(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,D=0;D<u.length;++D){var j=u[D];if(j&&!j.da&&j.capture==h){var Re=j.listener,nt=j.ha||j.src;j.fa&&od(a.i,j),A=Re.call(nt,m)!==!1&&A}}return A&&!m.defaultPrevented}function Fg(a,u,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Ug(a){a.g=Fg(()=>{a.g=null,a.i&&(a.i=!1,Ug(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class cT extends ir{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ug(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(a){ir.call(this),this.h=a,this.g={}}N(Qs,ir);var jg=[];function Bg(a){Se(a.g,function(u,h){this.g.hasOwnProperty(h)&&ud(u)},a),a.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),Bg(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pd=c.JSON.stringify,lT=c.JSON.parse,uT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function md(){}md.prototype.h=null;function $g(a){return a.h||(a.h=a.i())}function qg(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gd(){it.call(this,"d")}N(gd,it);function vd(){it.call(this,"c")}N(vd,it);var $r={},zg=null;function $a(){return zg=zg||new st}$r.La="serverreachability";function Hg(a){it.call(this,$r.La,a)}N(Hg,it);function Js(a){let u=$a();ft(u,new Hg(u))}$r.STAT_EVENT="statevent";function Gg(a,u){it.call(this,$r.STAT_EVENT,a),this.stat=u}N(Gg,it);function pt(a){let u=$a();ft(u,new Gg(u,a))}$r.Ma="timingevent";function Wg(a,u){it.call(this,$r.Ma,a),this.size=u}N(Wg,it);function Xs(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Zs(){this.g=!0}Zs.prototype.xa=function(){this.g=!1};function dT(a,u,h,m,A,D){a.info(function(){if(a.g)if(D)for(var j="",Re=D.split("&"),nt=0;nt<Re.length;nt++){var ye=Re[nt].split("=");if(1<ye.length){var ot=ye[0];ye=ye[1];var at=ot.split("_");j=2<=at.length&&at[1]=="type"?j+(ot+"="+ye+"&"):j+(ot+"=redacted&")}}else j=null;else j=D;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+u+`
`+h+`
`+j})}function hT(a,u,h,m,A,D,j){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+u+`
`+h+`
`+D+" "+j})}function Ri(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+pT(a,h)+(m?" "+m:"")})}function fT(a,u){a.info(function(){return"TIMEOUT: "+u})}Zs.prototype.info=function(){};function pT(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var D=A[0];if(D!="noop"&&D!="stop"&&D!="close")for(var j=1;j<A.length;j++)A[j]=""}}}}return pd(h)}catch{return u}}var qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function za(){}N(za,md),za.prototype.g=function(){return new XMLHttpRequest},za.prototype.i=function(){return{}},_d=new za;function sr(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qg}function Qg(){this.i=null,this.g="",this.h=!1}var Yg={},yd={};function wd(a,u,h){a.L=1,a.v=Ka(On(u)),a.m=h,a.P=!0,Jg(a,null)}function Jg(a,u){a.F=Date.now(),Ha(a),a.A=On(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),d0(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Qg,a.g=k0(a.j,h?u:null,!a.m),0<a.O&&(a.M=new cT(_(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(jg[0]=A.toString()),A=jg);for(var D=0;D<A.length;D++){var j=Mg(h,A[D],m||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Js(),dT(a.i,a.u,a.A,a.l,a.R,a.m)}sr.prototype.ca=function(a){a=a.target;let u=this.M;u&&Vn(a)==3?u.j():this.Y(a)},sr.prototype.Y=function(a){try{if(a==this.g)e:{let at=Vn(this.g);var u=this.g.Ba();let Mi=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||_0(this.g)))){this.J||at!=4||u==7||(u==8||0>=Mi?Js(3):Js(2)),Ed(this);var h=this.g.Z();this.X=h;t:if(Xg(this)){var m=_0(this.g);a="";var A=m.length,D=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),eo(this);var j="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(D&&u==A-1)});m.length=0,this.h.g+=a,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,hT(this.i,this.u,this.A,this.l,this.R,at,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,nt=this.g;if((Re=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Re)){var ye=Re;break t}}ye=null}if(h=ye)Ri(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Id(this,h);else{this.o=!1,this.s=3,pt(12),qr(this),eo(this);break e}}if(this.P){h=!0;let Yt;for(;!this.J&&this.C<j.length;)if(Yt=mT(this,j),Yt==yd){at==4&&(this.s=4,pt(14),h=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Yg){this.s=4,pt(15),Ri(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else Ri(this.i,this.l,Yt,null),Id(this,Yt);if(Xg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||j.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)Ri(this.i,this.l,j,"[Invalid Chunked Response]"),qr(this),eo(this);else if(0<j.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),xd(ot),ot.M=!0,pt(11))}}else Ri(this.i,this.l,j,null),Id(this,j);at==4&&qr(this),this.o&&!this.J&&(at==4?S0(this.j,this):(this.o=!1,Ha(this)))}else PT(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),qr(this),eo(this)}}}catch{}finally{}};function Xg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function mT(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?yd:(h=Number(u.substring(h,m)),isNaN(h)?Yg:(m+=1,m+h>u.length?yd:(u=u.slice(m,m+h),a.C=m+h,u)))}sr.prototype.cancel=function(){this.J=!0,qr(this)};function Ha(a){a.S=Date.now()+a.I,Zg(a,a.I)}function Zg(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Xs(_(a.ba,a),u)}function Ed(a){a.B&&(c.clearTimeout(a.B),a.B=null)}sr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(fT(this.i,this.A),this.L!=2&&(Js(),pt(17)),qr(this),this.s=2,eo(this)):Zg(this,this.S-a)};function eo(a){a.j.G==0||a.J||S0(a.j,a)}function qr(a){Ed(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Bg(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Id(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||bd(h.h,a))){if(!a.K&&bd(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Za(h),Ja(h);else break e;Ad(h),pt(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Xs(_(h.Za,h),6e3));if(1>=n0(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Hr(h,11)}else if((a.K||h.g==a)&&Za(h),!ie(u))for(A=h.Da.g.parse(u),u=0;u<A.length;u++){let ye=A[u];if(h.T=ye[0],ye=ye[1],h.G==2)if(ye[0]=="c"){h.K=ye[1],h.ia=ye[2];let ot=ye[3];ot!=null&&(h.la=ot,h.j.info("VER="+h.la));let at=ye[4];at!=null&&(h.Aa=at,h.j.info("SVER="+h.Aa));let Mi=ye[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(m=1.5*Mi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Yt=a.g;if(Yt){let tc=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tc){var D=m.h;D.g||tc.indexOf("spdy")==-1&&tc.indexOf("quic")==-1&&tc.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Td(D,D.h),D.h=null))}if(m.D){let kd=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;kd&&(m.ya=kd,Me(m.I,m.D,kd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var j=a;if(m.qa=x0(m,m.J?m.ia:null,m.W),j.K){r0(m.h,j);var Re=j,nt=m.L;nt&&(Re.I=nt),Re.B&&(Ed(Re),Ha(Re)),m.g=j}else b0(m);0<h.i.length&&Xa(h)}else ye[0]!="stop"&&ye[0]!="close"||Hr(h,7);else h.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Hr(h,7):Cd(h):ye[0]!="noop"&&h.l&&h.l.ta(ye),h.v=0)}}Js(4)}catch{}}var gT=class{constructor(a,u){this.g=a,this.map=u}};function e0(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function t0(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function n0(a){return a.h?1:a.g?a.g.size:0}function bd(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Td(a,u){a.g?a.g.add(u):a.h=u}function r0(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}e0.prototype.cancel=function(){if(this.i=i0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function i0(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return q(a.i)}function vT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function _T(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function s0(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=_T(a),m=vT(a),A=m.length,D=0;D<A;D++)u.call(void 0,m[D],h&&h[D],a)}var o0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),A=null;if(0<=m){var D=a[h].substring(0,m);A=a[h].substring(m+1)}else D=a[h];u(D,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,Ga(this,a.j),this.o=a.o,this.g=a.g,Wa(this,a.s),this.l=a.l;var u=a.i,h=new ro;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),a0(this,h),this.m=a.m}else a&&(u=String(a).match(o0))?(this.h=!1,Ga(this,u[1]||"",!0),this.o=to(u[2]||""),this.g=to(u[3]||"",!0),Wa(this,u[4]),this.l=to(u[5]||"",!0),a0(this,u[6]||"",!0),this.m=to(u[7]||"")):(this.h=!1,this.i=new ro(null,this.h))}zr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(no(u,c0,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(no(u,c0,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(no(h,h.charAt(0)=="/"?IT:ET,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",no(h,TT)),a.join("")};function On(a){return new zr(a)}function Ga(a,u,h){a.j=h?to(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Wa(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function a0(a,u,h){u instanceof ro?(a.i=u,ST(a.i,a.h)):(h||(u=no(u,bT)),a.i=new ro(u,a.h))}function Me(a,u,h){a.i.set(u,h)}function Ka(a){return Me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function to(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function no(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,wT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var c0=/[#\/\?@]/g,ET=/[#\?:]/g,IT=/[#\?]/g,bT=/[#\?@]/g,TT=/#/g;function ro(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function or(a){a.g||(a.g=new Map,a.h=0,a.i&&yT(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=ro.prototype,n.add=function(a,u){or(this),this.i=null,a=Di(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function l0(a,u){or(a),u=Di(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function u0(a,u){return or(a),u=Di(a,u),a.g.has(u)}n.forEach=function(a,u){or(this),this.g.forEach(function(h,m){h.forEach(function(A){a.call(u,A,m,this)},this)},this)},n.na=function(){or(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let A=a[m];for(let D=0;D<A.length;D++)h.push(u[m])}return h},n.V=function(a){or(this);let u=[];if(typeof a=="string")u0(this,a)&&(u=u.concat(this.g.get(Di(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return or(this),this.i=null,a=Di(this,a),u0(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function d0(a,u,h){l0(a,u),0<h.length&&(a.i=null,a.g.set(Di(a,u),q(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let D=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var A=D;j[m]!==""&&(A+="="+encodeURIComponent(String(j[m]))),a.push(A)}}return this.i=a.join("&")};function Di(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function ST(a,u){u&&!a.j&&(or(a),a.i=null,a.g.forEach(function(h,m){var A=m.toLowerCase();m!=A&&(l0(this,m),d0(this,A,h))},a)),a.j=u}function CT(a,u){let h=new Zs;if(c.Image){let m=new Image;m.onload=R(ar,h,"TestLoadImage: loaded",!0,u,m),m.onerror=R(ar,h,"TestLoadImage: error",!1,u,m),m.onabort=R(ar,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=R(ar,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function AT(a,u){let h=new Zs,m=new AbortController,A=setTimeout(()=>{m.abort(),ar(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(A),D.ok?ar(h,"TestPingServer: ok",!0,u):ar(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),ar(h,"TestPingServer: error",!1,u)})}function ar(a,u,h,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(h)}catch{}}function xT(){this.g=new uT}function kT(a,u,h){let m=h||"";try{s0(a,function(A,D){let j=A;d(A)&&(j=pd(A)),u.push(m+D+"="+encodeURIComponent(j))})}catch(A){throw u.push(m+"type="+encodeURIComponent("_badmap")),A}}function io(a){this.l=a.Ub||null,this.j=a.eb||!1}N(io,md),io.prototype.g=function(){return new Qa(this.l,this.j)},io.prototype.i=function(a){return function(){return a}}({});function Qa(a,u){st.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Qa,st),n=Qa.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,oo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h0(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function h0(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?so(this):oo(this),this.readyState==3&&h0(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,so(this))},n.Qa=function(a){this.g&&(this.response=a,so(this))},n.ga=function(){this.g&&so(this)};function so(a){a.readyState=4,a.l=null,a.j=null,a.v=null,oo(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function oo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function f0(a){let u="";return Se(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function Sd(a,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=f0(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Me(a,u,h))}function Be(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Be,st);var RT=/^https?$/i,DT=["POST","PUT"];n=Be.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?$g(this.o):$g(_d),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){p0(this,D);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)h.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let D of m.keys())h.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(D=>D.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(DT,u,void 0))||m||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,j]of h)this.g.setRequestHeader(D,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v0(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){p0(this,D)}};function p0(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,m0(a),Ya(a)}function m0(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),Ya(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?g0(this):this.bb())},n.bb=function(){g0(this)};function g0(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Vn(a)!=4||a.Z()!=2)){if(a.u&&Vn(a)==4)Fg(a.Ea,0,a);else if(ft(a,"readystatechange"),Vn(a)==4){a.h=!1;try{let j=a.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=j===0){var A=String(a.D).match(o0)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),m=!RT.test(A?A.toLowerCase():"")}h=m}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var D=2<Vn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",m0(a)}}finally{Ya(a)}}}}function Ya(a,u){if(a.g){v0(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ft(a,"ready");try{h.onreadystatechange=m}catch{}}}function v0(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Vn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),lT(u)}};function _0(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function PT(a){let u={};a=(a.g&&2<=Vn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(ie(a[m]))continue;var h=C(a[m]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let D=u[A]||[];u[A]=D,D.push(h)}S(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ao(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function y0(a){this.Aa=0,this.i=[],this.j=new Zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ao("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ao("baseRetryDelayMs",5e3,a),this.cb=ao("retryDelaySeedMs",1e4,a),this.Wa=ao("forwardChannelMaxRetries",2,a),this.wa=ao("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new e0(a&&a.concurrentRequestLimit),this.Da=new xT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=y0.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,m){pt(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=x0(this,null,this.W),Xa(this)};function Cd(a){if(w0(a),a.G==3){var u=a.U++,h=On(a.I);if(Me(h,"SID",a.K),Me(h,"RID",u),Me(h,"TYPE","terminate"),co(a,h),u=new sr(a,a.j,u),u.L=2,u.v=Ka(On(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=k0(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ha(u)}A0(a)}function Ja(a){a.g&&(xd(a),a.g.cancel(),a.g=null)}function w0(a){Ja(a),a.u&&(c.clearTimeout(a.u),a.u=null),Za(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Xa(a){if(!t0(a.h)&&!a.s){a.s=!0;var u=a.Ga;Hs||Pg(),Gs||(Hs(),Gs=!0),sd.add(u,a),a.B=0}}function MT(a,u){return n0(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Xs(_(a.Ga,a,u),C0(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new sr(this,this.j,a),D=this.o;if(this.S&&(D?(D=y(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(A.H=D,D=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=I0(this,A,u),h=On(this.I),Me(h,"RID",a),Me(h,"CVER",22),this.D&&Me(h,"X-HTTP-Session-Id",this.D),co(this,h),D&&(this.O?u="headers="+encodeURIComponent(String(f0(D)))+"&"+u:this.m&&Sd(h,this.m,D)),Td(this.h,A),this.Ua&&Me(h,"TYPE","init"),this.P?(Me(h,"$req",u),Me(h,"SID","null"),A.T=!0,wd(A,h,null)):wd(A,h,u),this.G=2}}else this.G==3&&(a?E0(this,a):this.i.length==0||t0(this.h)||E0(this))};function E0(a,u){var h;u?h=u.l:h=a.U++;let m=On(a.I);Me(m,"SID",a.K),Me(m,"RID",h),Me(m,"AID",a.T),co(a,m),a.m&&a.o&&Sd(m,a.m,a.o),h=new sr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=I0(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Td(a.h,h),wd(h,m,u)}function co(a,u){a.H&&Se(a.H,function(h,m){Me(u,m,h)}),a.l&&s0({},function(h,m){Me(u,m,h)})}function I0(a,u,h){h=Math.min(a.i.length,h);var m=a.l?_(a.l.Na,a.l,a):null;e:{var A=a.i;let D=-1;for(;;){let j=["count="+h];D==-1?0<h?(D=A[0].g,j.push("ofs="+D)):D=0:j.push("ofs="+D);let Re=!0;for(let nt=0;nt<h;nt++){let ye=A[nt].g,ot=A[nt].map;if(ye-=D,0>ye)D=Math.max(0,A[nt].g-100),Re=!1;else try{kT(ot,j,"req"+ye+"_")}catch{m&&m(ot)}}if(Re){m=j.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,m}function b0(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Hs||Pg(),Gs||(Hs(),Gs=!0),sd.add(u,a),a.v=0}}function Ad(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Xs(_(a.Fa,a),C0(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,T0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Xs(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ja(this),T0(this))};function xd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function T0(a){a.g=new sr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=On(a.qa);Me(u,"RID","rpc"),Me(u,"SID",a.K),Me(u,"AID",a.T),Me(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Me(u,"TO",a.ja),Me(u,"TYPE","xmlhttp"),co(a,u),a.m&&a.o&&Sd(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ka(On(u)),h.m=null,h.P=!0,Jg(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Ja(this),Ad(this),pt(19))};function Za(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function S0(a,u){var h=null;if(a.g==u){Za(a),xd(a),a.g=null;var m=2}else if(bd(a.h,u))h=u.D,r0(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;m=$a(),ft(m,new Wg(m,h)),Xa(a)}else b0(a);else if(A=u.s,A==3||A==0&&0<u.X||!(m==1&&MT(a,u)||m==2&&Ad(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),A){case 1:Hr(a,5);break;case 4:Hr(a,10);break;case 3:Hr(a,6);break;default:Hr(a,2)}}}function C0(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Hr(a,u){if(a.j.info("Error code "+u),u==2){var h=_(a.fb,a),m=a.Xa;let A=!m;m=new zr(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ga(m,"https"),Ka(m),A?CT(m.toString(),h):AT(m.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(u),A0(a),w0(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function A0(a){if(a.G=0,a.ka=[],a.l){let u=i0(a.h);(u.length!=0||a.i.length!=0)&&(L(a.ka,u),L(a.ka,a.i),a.h.i.length=0,q(a.i),a.i.length=0),a.l.ra()}}function x0(a,u,h){var m=h instanceof zr?On(h):new zr(h);if(m.g!="")u&&(m.g=u+"."+m.g),Wa(m,m.s);else{var A=c.location;m=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var D=new zr(null);m&&Ga(D,m),u&&(D.g=u),A&&Wa(D,A),h&&(D.l=h),m=D}return h=a.D,u=a.ya,h&&u&&Me(m,h,u),Me(m,"VER",a.la),co(a,m),m}function k0(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Be(new io({eb:h})):new Be(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function R0(){}n=R0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ec(){}ec.prototype.g=function(a,u){return new St(a,u)};function St(a,u){st.call(this),this.g=new y0(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!ie(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ie(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Pi(this)}N(St,st),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Cd(this.g)},St.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=pd(a),a=h);u.i.push(new gT(u.Ya++,a)),u.G==3&&Xa(u)},St.prototype.N=function(){this.g.l=null,delete this.j,Cd(this.g),delete this.g,St.aa.N.call(this)};function D0(a){gd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}N(D0,gd);function P0(){vd.call(this),this.status=1}N(P0,vd);function Pi(a){this.g=a}N(Pi,R0),Pi.prototype.ua=function(){ft(this.g,"a")},Pi.prototype.ta=function(a){ft(this.g,new D0(a))},Pi.prototype.sa=function(a){ft(this.g,new P0)},Pi.prototype.ra=function(){ft(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Yf=Jn.createWebChannelTransport=function(){return new ec},Qf=Jn.getStatEventTarget=function(){return $a()},Kf=Jn.Event=$r,Il=Jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,ra=Jn.ErrorCode=qa,Kg.COMPLETE="complete",Wf=Jn.EventType=Kg,qg.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",st.prototype.listen=st.prototype.K,as=Jn.WebChannel=qg,iR=Jn.FetchXmlHttpFactory=io,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Gf=Jn.XhrIo=Be}).apply(typeof El<"u"?El:typeof self<"u"?self:typeof window<"u"?window:{});var xw="@firebase/firestore",kw="4.7.17";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var As="11.9.0";var gi=new En("@firebase/firestore");function cs(){return gi.logLevel}function W(n,...e){if(gi.logLevel<=pe.DEBUG){let t=e.map($m);gi.debug(`Firestore (${As}): ${n}`,...t)}}function Xn(n,...e){if(gi.logLevel<=pe.ERROR){let t=e.map($m);gi.error(`Firestore (${As}): ${n}`,...t)}}function ms(n,...e){if(gi.logLevel<=pe.WARN){let t=e.map($m);gi.warn(`Firestore (${As}): ${n}`,...t)}}function $m(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,EE(n,r,t)}function EE(n,e,t){let r=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xn(r),new Error(r)}function Te(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||EE(e,i,r)}function ce(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ln=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},np=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},rp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ip=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ln,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>w(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ln)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new kl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new et(e)}},sp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},op=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ap=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);let r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function IE(){return new TextEncoder}var Dl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=sR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function fe(n,e){return n<e?-1:n>e?1:0}function cp(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fe(r,i);{let s=IE(),o=oR(s.encode(Rw(n,t)),s.encode(Rw(e,t)));return o!==0?o:fe(r,i)}}t+=r>65535?2:1}return fe(n.length,e.length)}function Rw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function oR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fe(n[t],e[t]);return fe(n.length,e.length)}function gs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Dw=-62135596800,Pw=1e6,rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Pw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Dw)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pw}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Dw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mw="__name__",Pl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return fe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):cp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}},je=class n extends Pl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},aR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vt=class n extends Pl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return aR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mw}static keyField(){return new n([Mw])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new G(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new G(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var la=-1,lp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};lp.UNKNOWN_ID=-1;function cR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new vi(i,X.empty(),e)}function lR(n){return new vi(n.readTime,n.key,la)}var vi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ue.min(),X.empty(),la)}static max(){return new n(ue.max(),X.empty(),la)}};function uR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:fe(n.largestBatchId,e.largestBatchId))}var dR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",up=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xs(n){return w(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==dR)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(p=>{o[d]=p,++c,c===s&&r(o)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function hR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ks(n){return n.name==="IndexedDbTransactionError"}var qm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),zm=-1;function fu(n){return n==null}function ua(n){return n===0&&1/n==-1/0}function fR(n){return typeof n=="number"&&Number.isInteger(n)&&!ua(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var bE="";function pR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Nw(e)),e=mR(n.get(t),e);return Nw(e)}function mR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case bE:t+="";break;default:t+=s}}return t}function Nw(n){return n+bE+""}var gR="remoteDocuments",TE="owner";var SE="mutationQueues";var CE="mutations";var AE="documentMutations",vR="remoteDocumentsV14";var xE="remoteDocumentGlobal";var kE="targets";var RE="targetDocuments";var DE="targetGlobal",PE="collectionParents";var ME="clientMetadata";var NE="bundles";var OE="namedQueries";var _R="indexConfiguration";var yR="indexState";var wR="indexEntries";var VE="documentOverlays";var ER="globals";var IR=[SE,CE,AE,gR,kE,TE,DE,RE,ME,xE,PE,NE,OE],gL=[...IR,VE],bR=[SE,CE,AE,vR,kE,TE,DE,RE,ME,xE,PE,NE,OE,VE],TR=bR,SR=[...TR,_R,yR,wR];var vL=[...SR,ER];function Ow(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hs(this.root,e,this.comparator,!0)}},hs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ml(this.data.getIterator())}getIteratorFrom(e){return new Ml(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ml=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ht=class n{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(Vt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Nl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var CR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(n){if(Te(!!n,39018),typeof n=="string"){let e=0,t=CR.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function er(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}var FE="server_timestamp",UE="__type__",jE="__previous_value__",BE="__local_write_time__";function Hm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UE])===null||t===void 0?void 0:t.stringValue)===FE}function pu(n){let e=n.mapValue.fields[jE];return Hm(e)?pu(e):e}function da(n){let e=Zn(n.mapValue.fields[BE].timestampValue);return new rt(e.seconds,e.nanos)}var dp=class{constructor(e,t,r,i,s,o,c,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=p}},Ol="(default)",Vl=class n{constructor(e,t){this.projectId=e,this.database=t||Ol}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ol}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gm="__type__",$E="__max__",bl={mapValue:{fields:{__type__:{stringValue:$E}}}},Wm="__vector__",vs="value";function kr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hm(n)?4:zE(n)?9007199254740991:qE(n)?10:11:ee(28295,{value:n})}function xn(n,e){if(n===e)return!0;let t=kr(n);if(t!==kr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return da(n).isEqual(da(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Zn(i.timestampValue),c=Zn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return er(i.bytesValue).isEqual(er(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Le(i.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Le(i.integerValue)===Le(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Le(i.doubleValue),c=Le(s.doubleValue);return o===c?ua(o)===ua(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return gs(n.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Ow(o)!==Ow(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!xn(o[l],c[l])))return!1;return!0}(n,e);default:return ee(52216,{left:n})}}function ha(n,e){return(n.values||[]).find(t=>xn(t,e))!==void 0}function _s(n,e){if(n===e)return 0;let t=kr(n),r=kr(e);if(t!==r)return fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Vw(n.timestampValue,e.timestampValue);case 4:return Vw(da(n),da(e));case 5:return cp(n.stringValue,e.stringValue);case 6:return function(s,o){let c=er(s),l=er(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let p=fe(c[d],l[d]);if(p!==0)return p}return fe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=fe(Le(s.latitude),Le(o.latitude));return c!==0?c:fe(Le(s.longitude),Le(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Lw(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,p;let v=s.fields||{},_=o.fields||{},R=(c=v[vs])===null||c===void 0?void 0:c.arrayValue,N=(l=_[vs])===null||l===void 0?void 0:l.arrayValue,q=fe(((d=R?.values)===null||d===void 0?void 0:d.length)||0,((p=N?.values)===null||p===void 0?void 0:p.length)||0);return q!==0?q:Lw(R,N)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===bl.mapValue&&o===bl.mapValue)return 0;if(s===bl.mapValue)return 1;if(o===bl.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let v=0;v<l.length&&v<p.length;++v){let _=cp(l[v],p[v]);if(_!==0)return _;let R=_s(c[l[v]],d[p[v]]);if(R!==0)return R}return fe(l.length,p.length)}(n.mapValue,e.mapValue);default:throw ee(23264,{Pe:t})}}function Vw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fe(n,e);let t=Zn(n),r=Zn(e),i=fe(t.seconds,r.seconds);return i!==0?i:fe(t.nanos,r.nanos)}function Lw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=_s(t[i],r[i]);if(s)return s}return fe(t.length,r.length)}function ys(n){return hp(n)}function hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Zn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return er(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=hp(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${hp(t.fields[o])}`;return i+"}"}(n.mapValue):ee(61005,{value:n})}function Cl(n){switch(kr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pu(n);return e?16+Cl(e):16;case 5:return 2*n.stringValue.length;case 6:return er(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Cl(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Lr(r.fields,(s,o)=>{i+=s.length+Cl(o)}),i}(n.mapValue);default:throw ee(13486,{value:n})}}function Fw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fp(n){return!!n&&"integerValue"in n}function Km(n){return!!n&&"arrayValue"in n}function Uw(n){return!!n&&"nullValue"in n}function jw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Al(n){return!!n&&"mapValue"in n}function qE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gm])===null||t===void 0?void 0:t.stringValue)===Wm}function sa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sa(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$E}var yL={mapValue:{fields:{[Gm]:{stringValue:Wm},[vs]:{arrayValue:{}}}}};var Ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Al(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(t)}setAll(e){let t=Vt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=sa(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Al(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Al(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(sa(this.value))}};function HE(n){let e=[];return Lr(n.fields,(t,r)=>{let i=new Vt([t]);if(Al(r)){let s=HE(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ht(e)}var un=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ue.min(),ue.min(),ue.min(),Ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ue.min(),ue.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ue.min(),ue.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ws=class{constructor(e,t){this.position=e,this.inclusive=t}};function Bw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),t.key):r=_s(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $w(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xn(n.position[t],e.position[t]))return!1;return!0}var _i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function AR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ll=class{},Ke=class n extends Ll{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mp(e,t,r):t==="array-contains"?new _p(e,r):t==="in"?new yp(e,r):t==="not-in"?new wp(e,r):t==="array-contains-any"?new Ep(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gp(e,r):new vp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_s(t,this.value)):t!==null&&kr(this.value)===kr(t)&&this.matchesComparison(_s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class n extends Ll{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return GE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function GE(n){return n.op==="and"}function WE(n){return xR(n)&&GE(n)}function xR(n){for(let e of n.filters)if(e instanceof dn)return!1;return!0}function pp(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+ys(n.value);if(WE(n))return n.filters.map(e=>pp(e)).join(",");{let e=n.filters.map(t=>pp(t)).join(",");return`${n.op}(${e})`}}function KE(n,e){return n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(n,e):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&KE(o,i.filters[c]),!0):!1}(n,e):void ee(19439)}function QE(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${ys(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(QE).join(" ,")+"}"}(n):"Filter"}var mp=class extends Ke{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},gp=class extends Ke{constructor(e,t){super(e,"in",t),this.keys=YE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vp=class extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=YE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function YE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var _p=class extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Km(t)&&ha(t.arrayValue,this.value)}},yp=class extends Ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ha(this.value.arrayValue,t)}},wp=class extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ha(this.value.arrayValue,t)}},Ep=class extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Km(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}};var Ip=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Ie=null}};function qw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Ip(n,e,t,r,i,s,o)}function Qm(n){let e=ce(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ys(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ys(r)).join(",")),e.Ie=t}return e.Ie}function Ym(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$w(n.startAt,e.startAt)&&$w(n.endAt,e.endAt)}function bp(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Rr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function kR(n,e,t,r,i,s,o,c){return new Rr(n,e,t,r,i,s,o,c)}function mu(n){return new Rr(n)}function zw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JE(n){return n.collectionGroup!==null}function oa(n){let e=ce(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(Vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new _i(s,r))}),t.has(Vt.keyField().canonicalString())||e.Ee.push(new _i(Vt.keyField(),r))}return e.Ee}function Cn(n){let e=ce(n);return e.de||(e.de=RR(e,oa(n))),e.de}function RR(n,e){if(n.limitType==="F")return qw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new _i(i.field,s)});let t=n.endAt?new ws(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ws(n.startAt.position,n.startAt.inclusive):null;return qw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tp(n,e){let t=n.filters.concat([e]);return new Rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sp(n,e,t){return new Rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gu(n,e){return Ym(Cn(n),Cn(e))&&n.limitType===e.limitType}function XE(n){return`${Qm(Cn(n))}|lt:${n.limitType}`}function ls(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>QE(i)).join(", ")}]`),fu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ys(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ys(i)).join(",")),`Target(${r})`}(Cn(n))}; limitType=${n.limitType})`}function vu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of oa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let d=Bw(o,c,l);return o.inclusive?d<=0:d<0}(r.startAt,oa(r),i)||r.endAt&&!function(o,c,l){let d=Bw(o,c,l);return o.inclusive?d>=0:d>0}(r.endAt,oa(r),i))}(n,e)}function DR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZE(n){return(e,t)=>{let r=!1;for(let i of oa(n)){let s=PR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PR(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?_s(l,d):ee(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var tr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return LE(this.inner)}size(){return this.innerSize}};var MR=new He(X.comparator);function nr(){return MR}var eI=new He(X.comparator);function ia(...n){let e=eI;for(let t of n)e=e.insert(t.key,t);return e}function tI(n){let e=eI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fi(){return aa()}function nI(){return aa()}function aa(){return new tr(n=>n.toString(),(n,e)=>n.isEqual(e))}var NR=new He(X.comparator),OR=new tt(X.comparator);function ve(...n){let e=OR;for(let t of n)e=e.add(t);return e}var VR=new tt(fe);function LR(){return VR}function Jm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ua(e)?"-0":e}}function rI(n){return{integerValue:""+n}}function FR(n,e){return fR(e)?rI(e):Jm(n,e)}var Es=class{constructor(){this._=void 0}};function UR(n,e,t){return n instanceof yi?function(i,s){let o={fields:{[UE]:{stringValue:FE},[BE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hm(s)&&(s=pu(s)),s&&(o.fields[jE]=s),{mapValue:o}}(t,e):n instanceof Dr?sI(n,e):n instanceof Pr?oI(n,e):function(i,s){let o=iI(i,s),c=Hw(o)+Hw(i.Re);return fp(o)&&fp(i.Re)?rI(c):Jm(i.serializer,c)}(n,e)}function jR(n,e,t){return n instanceof Dr?sI(n,e):n instanceof Pr?oI(n,e):t}function iI(n,e){return n instanceof Is?function(r){return fp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var yi=class extends Es{},Dr=class extends Es{constructor(e){super(),this.elements=e}};function sI(n,e){let t=aI(e);for(let r of n.elements)t.some(i=>xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pr=class extends Es{constructor(e){super(),this.elements=e}};function oI(n,e){let t=aI(e);for(let r of n.elements)t=t.filter(i=>!xn(i,r));return{arrayValue:{values:t}}}var Is=class extends Es{constructor(e,t){super(),this.serializer=e,this.Re=t}};function Hw(n){return Le(n.integerValue||n.doubleValue)}function aI(n){return Km(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var fa=class{constructor(e,t){this.field=e,this.transform=t}};function BR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Dr&&i instanceof Dr||r instanceof Pr&&i instanceof Pr?gs(r.elements,i.elements,xn):r instanceof Is&&i instanceof Is?xn(r.Re,i.Re):r instanceof yi&&i instanceof yi}(n.transform,e.transform)}var Cp=class{constructor(e,t){this.version=e,this.transformResults=t}},Gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var bs=class{};function cI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ts(n.key,Gt.none()):new wi(n.key,n.data,Gt.none());{let t=n.data,r=Ot.empty(),i=new tt(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new kn(n.key,r,new Ht(i.toArray()),Gt.none())}}function $R(n,e,t){n instanceof wi?function(i,s,o){let c=i.value.clone(),l=Ww(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(i,s,o){if(!xl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Ww(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(lI(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ca(n,e,t,r){return n instanceof wi?function(s,o,c,l){if(!xl(s.precondition,o))return c;let d=s.value.clone(),p=Kw(s.fieldTransforms,l,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof kn?function(s,o,c,l){if(!xl(s.precondition,o))return c;let d=Kw(s.fieldTransforms,l,o),p=o.data;return p.setAll(lI(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(s,o,c){return xl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function qR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=iI(r.transform,i||null);s!=null&&(t===null&&(t=Ot.empty()),t.set(r.field,s))}return t||null}function Gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gs(r,i,(s,o)=>BR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wi=class extends bs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends bs{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function lI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ww(n,e,t){let r=new Map;Te(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,jR(o,c,t[i]))}return r}function Kw(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,UR(s,o,e))}return r}var Ts=class extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ap=class extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&$R(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ca(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ca(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nI();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=cI(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&gs(this.mutations,e.mutations,(t,r)=>Gw(t,r))&&gs(this.baseMutations,e.baseMutations,(t,r)=>Gw(t,r))}},kp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return NR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Rp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ge,_e;function zR(n){switch(n){case P.OK:return ee(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function uI(n){if(n===void 0)return Xn("GRPC error has no .code"),P.UNKNOWN;switch(n){case Ge.OK:return P.OK;case Ge.CANCELLED:return P.CANCELLED;case Ge.UNKNOWN:return P.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return P.INTERNAL;case Ge.UNAVAILABLE:return P.UNAVAILABLE;case Ge.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ge.NOT_FOUND:return P.NOT_FOUND;case Ge.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ge.ABORTED:return P.ABORTED;case Ge.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ge.DATA_LOSS:return P.DATA_LOSS;default:return ee(39323,{code:n})}}(_e=Ge||(Ge={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var Qw=null;var HR=new Yn([4294967295,4294967295],0);function Yw(n){let e=IE().encode(n),t=new Hf;return t.update(e),new Uint8Array(t.digest())}function Jw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yn([t,r],0),new Yn([i,s],0)]}var Pp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pi(`Invalid padding: ${t}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pi(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Yn.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Yn.fromNumber(r)));return i.compare(HR)===1&&(i=new Yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=Yw(e),[r,i]=Jw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;let t=Yw(e),[r,i]=Jw(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ue.min(),i,new He(fe),nr(),ve())}},pa=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var fs=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},Ul=class{constructor(e,t){this.targetId=e,this.Ce=t}},jl=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Bl=class{constructor(){this.Fe=0,this.Me=Xw(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ve(),t=ve(),r=ve();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new pa(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Xw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Te(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Mp=class{constructor(e){this.ze=e,this.je=new Map,this.He=nr(),this.Je=Tl(),this.Ye=Tl(),this.Ze=new He(fe)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(bp(s))if(r===0){let o=new X(s.path);this.tt(t,o,un.newNoDocument(o,ue.min()))}else Te(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let c=this.ct(e),l=c?this.lt(c,e,o):1;if(l!==0){this.st(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}Qw?.ht(function(p,v,_,R,N){var q,L,oe,ie,se,ke;let ht={localCacheCount:p,existenceFilterCount:v.count,databaseId:_.database,projectId:_.projectId},Se=v.unchangedNames;return Se&&(ht.bloomFilter={applied:N===0,hashCount:(q=Se?.hashCount)!==null&&q!==void 0?q:0,bitmapLength:(ie=(oe=(L=Se?.bits)===null||L===void 0?void 0:L.bitmap)===null||oe===void 0?void 0:oe.length)!==null&&ie!==void 0?ie:0,padding:(ke=(se=Se?.bits)===null||se===void 0?void 0:se.padding)!==null&&ke!==void 0?ke:0,mightContain:S=>{var y;return(y=R?.mightContain(S))!==null&&y!==void 0&&y}}),ht}(o,e.Ce,this.ze.Pt(),c,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=er(r).toUint8Array()}catch(l){if(l instanceof Nl)return ms("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Pp(o,i,s)}catch(l){return ms(l instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let c=this._t(o);if(c){if(s.current&&bp(c.target)){let l=new X(c.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,un.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=ve();this.Ye.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this._t(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new Fl(e,t,this.Ze,this.He,r);return this.He=nr(),this.Je=Tl(),this.Ye=Tl(),this.Ze=new He(fe),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Bl,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new tt(fe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new tt(fe),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Bl),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Tl(){return new He(X.comparator)}function Xw(){return new He(X.comparator)}var GR={asc:"ASCENDING",desc:"DESCENDING"},WR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KR={and:"AND",or:"OR"},Np=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Op(n,e){return n.useProto3Json||fu(e)?e:{value:e}}function $l(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QR(n,e){return $l(n,e.toTimestamp())}function An(n){return Te(!!n,49232),ue.fromTimestamp(function(t){let r=Zn(t);return new rt(r.seconds,r.nanos)}(n))}function Xm(n,e){return Vp(n,e).canonicalString()}function Vp(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hI(n){let e=je.fromString(n);return Te(vI(e),10190,{key:e.toString()}),e}function Lp(n,e){return Xm(n.databaseId,e.path)}function Jf(n,e){let t=hI(e);if(t.get(1)!==n.databaseId.projectId)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(pI(t))}function fI(n,e){return Xm(n.databaseId,e)}function YR(n){let e=hI(n);return e.length===4?je.emptyPath():pI(e)}function Fp(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pI(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zw(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function JR(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Te(p===void 0||typeof p=="string",58123),dt.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),dt.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let p=d.code===void 0?P.UNKNOWN:uI(d.code);return new G(p,d.message||"")}(o);t=new jl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jf(n,r.document.name),s=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):ue.min(),c=new Ot({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(i,s,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new fs(d,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jf(n,r.document),s=r.readTime?An(r.readTime):ue.min(),o=un.newNoDocument(i,s),c=r.removedTargetIds||[];t=new fs([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jf(n,r.document),s=r.removedTargetIds||[];t=new fs([],s,i,null)}else{if(!("filter"in e))return ee(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Dp(i,s),c=r.targetId;t=new Ul(c,o)}}return t}function XR(n,e){let t;if(e instanceof wi)t={update:Zw(n,e.key,e.value)};else if(e instanceof Ts)t={delete:Lp(n,e.key)};else if(e instanceof kn)t={update:Zw(n,e.key,e.data),updateMask:aD(e.fieldMask)};else{if(!(e instanceof Ap))return ee(16599,{ft:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof yi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Is)return{fieldPath:o.field.canonicalString(),increment:c.Re};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(n,e.precondition)),t}function ZR(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?An(i.updateTime):An(s);return o.isEqual(ue.min())&&(o=An(s)),new Cp(o,i.transformResults||[])}(t,e))):[]}function eD(n,e){return{documents:[fI(n,e.path)]}}function tD(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fI(n,i);let s=function(d){if(d.length!==0)return gI(dn.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(p=>function(_){return{field:us(_.field),direction:iD(_.dir)}}(p))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Op(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function nD(n){let e=YR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(v){let _=mI(v);return _ instanceof dn&&WE(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(v){return v.map(_=>function(N){return new _i(ds(N.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(v){let _;return _=typeof v=="object"?v.value:v,fu(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(v){let _=!!v.before,R=v.values||[];return new ws(R,_)}(t.startAt));let d=null;return t.endAt&&(d=function(v){let _=!v.before,R=v.values||[];return new ws(R,_)}(t.endAt)),kR(e,i,o,s,c,"F",l,d)}function rD(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ds(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ds(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ds(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ds(t.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(ds(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(r=>mI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(t.compositeFilter.op))}(n):ee(30097,{filter:n})}function iD(n){return GR[n]}function sD(n){return WR[n]}function oD(n){return KR[n]}function us(n){return{fieldPath:n.canonicalString()}}function ds(n){return Vt.fromServerFormat(n.fieldPath)}function gI(n){return n instanceof Ke?function(t){if(t.op==="=="){if(jw(t.value))return{unaryFilter:{field:us(t.field),op:"IS_NAN"}};if(Uw(t.value))return{unaryFilter:{field:us(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jw(t.value))return{unaryFilter:{field:us(t.field),op:"IS_NOT_NAN"}};if(Uw(t.value))return{unaryFilter:{field:us(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(t.field),op:sD(t.op),value:t.value}}}(n):n instanceof dn?function(t){let r=t.getFilters().map(i=>gI(i));return r.length===1?r[0]:{compositeFilter:{op:oD(t.op),filters:r}}}(n):ee(54877,{filter:n})}function aD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ma=class n{constructor(e,t,r,i,s=ue.min(),o=ue.min(),c=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Up=class{constructor(e){this.wt=e}};function cD(n){let e=nD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sp(e,e.limit,"L"):e}var ql=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),ua(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Zn(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(er(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?zE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):qE(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ee(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=vs,c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Le(c)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),X.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};ql.Wt=new ql;var jp=class{constructor(){this.Cn=new Bp}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(vi.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},Bp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(je.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(je.comparator)).toArray()}};var wL=new Uint8Array(0);var eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_I=41943040,zt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};zt.DEFAULT_COLLECTION_PERCENTILE=10,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zt.DEFAULT=new zt(_I,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zt.DISABLED=new zt(-1,0,0);var ga=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var tE="LruGarbageCollector",lD=1048576;function nE([n,e],[t,r]){let i=fe(n,t);return i===0?fe(e,r):i}var $p=class{constructor(e){this.Er=e,this.buffer=new tt(nE),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();nE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},qp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){W(tE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ks(t)?W(tE,"Ignoring IndexedDB error during garbage collection: ",t):yield xs(t)}yield this.mr(3e5)}))}},zp=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(qm.le);let r=new $p(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(eE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,c,l,d,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(s=v,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),cs()<=pe.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${v} documents in `+(d-l)+`ms
Total Duration: ${d-p}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}};function uD(n,e){return new zp(n,e)}var Hp=class{constructor(){this.changes=new tr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Wp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ca(r.mutation,i,Ht.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=fi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ia();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=fi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=nr(),o=aa(),c=function(){return aa()}();return t.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof kn)?s=s.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),ca(p.mutation,d,p.mutation.getFieldMask(),rt.now())):o.set(d.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,p)=>o.set(d,p)),t.forEach((d,p)=>{var v;return c.set(d,new Gp(p,(v=o.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){let r=aa(),i=new He((o,c)=>o-c),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let p=r.get(l)||Ht.empty();p=c.applyToLocalView(d,p),r.set(l,p);let v=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,v)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,p=l.value,v=nI();p.forEach(_=>{if(!s.has(_)){let R=cI(t.get(_),r.get(_));R!==null&&v.set(_,R),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(fi()),c=la,l=s;return o.next(d=>V.forEach(d,(p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{l=l.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,ve())).next(p=>({batchId:c,changes:tI(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=ia();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ia();return this.indexManager.getCollectionParents(e,s).next(c=>V.forEach(c,l=>{let d=function(v,_){return new Rr(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((v,_)=>{o=o.insert(v,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,d)=>{let p=d.getKey();o.get(p)===null&&(o=o.insert(p,un.newInvalidDocument(p)))});let c=ia();return o.forEach((l,d)=>{let p=s.get(l);p!==void 0&&ca(p.mutation,d,Ht.empty(),rt.now()),vu(t,d)&&(c=c.insert(l,d))}),c})}};var Kp=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return V.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:An(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:cD(i.bundledQuery),readTime:An(i.readTime)}}(t)),V.resolve()}};var Qp=class{constructor(){this.overlays=new He(X.comparator),this.Qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fi();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=fi(),s=t.length+1,o=new X(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new He((d,p)=>d-p),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=fi(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=fi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return V.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rp(t,r));let s=this.Qr.get(t);s===void 0&&(s=ve(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}};var Yp=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var va=class{constructor(){this.$r=new tt(We.Ur),this.Kr=new tt(We.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new We(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new We(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new X(new je([])),r=new We(t,e),i=new We(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new X(new je([])),r=new We(t,e),i=new We(t,e+1),s=ve();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new We(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return X.comparator(e.key,t.key)||fe(e.Zr,t.Zr)}static Wr(e,t){return fe(e.Zr,t.Zr)||X.comparator(e.key,t.key)}};var Jp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new tt(We.Ur)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new xp(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.Xr=this.Xr.add(new We(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?zm:this.nr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new We(t,0),i=new We(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{let c=this.ei(o.Zr);s.push(c)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(fe);return t.forEach(i=>{let s=new We(i,0),o=new We(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],c=>{r=r.add(c.Zr)})}),V.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;X.isDocumentKey(s)||(s=s.child(""));let o=new We(new X(s),0),c=new tt(fe);return this.Xr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Zr)),!0)},o),V.resolve(this.ni(c))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return V.forEach(t.mutations,i=>{let s=new We(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new We(t,0),i=this.Xr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Xp=class{constructor(e){this.ii=e,this.docs=function(){return new He(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=nr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():un.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=nr(),o=t.path,c=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||uR(lR(p),r)<=0||(i.has(p.key)||vu(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}si(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Zp(this)}getSize(e){return V.resolve(this.size)}},Zp=class extends Hp{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var em=class{constructor(e){this.persistence=e,this.oi=new tr(t=>Qm(t),Ym),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this._i=0,this.ai=new va,this.targetCount=0,this.ui=ga.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),V.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new ga(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Tr(t),V.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.ai.containsKey(t))}};var zl=class{constructor(e,t){this.ci={},this.overlays={},this.li=new qm(0),this.hi=!1,this.hi=!0,this.Pi=new Yp,this.referenceDelegate=e(this),this.Ti=new em(this),this.indexManager=new jp,this.remoteDocumentCache=function(i){return new Xp(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Up(t),this.Ei=new Kp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Jp(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new tm(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return V.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},tm=class extends up{constructor(e){super(),this.currentSequenceNumber=e}},nm=class n{constructor(e){this.persistence=e,this.Vi=new va,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw ee(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.gi,r=>{let i=X.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return V.or([()=>V.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Hl=class n{constructor(e,t){this.persistence=e,this.yi=new tr(r=>pR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uD(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return V.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(c=>{c||(r++,s.removeEntry(o,ue.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),V.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cl(e.data.value)),t}Dr(e,t,r){return V.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var rm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=ve(),i=ve();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var im=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sm=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return X_()?8:hR(Ze())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new im;return this.Ss(e,t,o).next(c=>{if(s.result=c,this.fs)return this.Ds(e,t,o,c.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(cs()<=pe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),V.resolve()):(cs()<=pe.DEBUG&&W("QueryEngine","Query:",ls(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(cs()<=pe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):V.resolve())}ws(e,t){if(zw(t))return V.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Sp(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.vs(t,c);return this.Cs(t,d,o,l.readTime)?this.ws(e,Sp(t,null,"F")):this.Fs(e,d,t,l)}))})))}bs(e,t,r,i){return zw(t)||i.isEqual(ue.min())?V.resolve(null):this.ys.getDocuments(e,r).next(s=>{let o=this.vs(t,s);return this.Cs(t,o,r,i)?V.resolve(null):(cs()<=pe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(t)),this.Fs(e,o,t,cR(i,la)).next(c=>c))})}vs(e,t){let r=new tt(ZE(e));return t.forEach((i,s)=>{vu(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return cs()<=pe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ls(t)),this.ys.getDocumentsMatchingQuery(e,t,vi.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Zm="LocalStore",dD=3e8,om=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new He(fe),this.Os=new tr(s=>Qm(s),Ym),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wp(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function hD(n,e,t,r){return new om(n,e,t,r)}function yI(n,e){return w(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=ve();for(let d of i){o.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})})}function fD(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,p){let v=d.batch,_=v.keys(),R=V.resolve();return _.forEach(N=>{R=R.next(()=>p.getEntry(l,N)).next(q=>{let L=d.docVersions.get(N);Te(L!==null,48541),q.version.compareTo(L)<0&&(v.applyToRemoteDocument(q,d),q.isValidDocument()&&(q.setReadTime(d.commitVersion),p.addEntry(q)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(l,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wI(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function pD(n,e){let t=ce(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let c=[];e.targetChanges.forEach((p,v)=>{let _=i.get(v);if(!_)return;c.push(t.Ti.removeMatchingKeys(s,p.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(s,p.addedDocuments,v)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(dt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(v,R),function(q,L,oe){return q.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=dD?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0}(_,R,p)&&c.push(t.Ti.updateTargetData(s,R))});let l=nr(),d=ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(mD(s,o,e.documentUpdates).next(p=>{l=p.qs,d=p.Qs})),!r.isEqual(ue.min())){let p=t.Ti.getLastRemoteSnapshotVersion(s).next(v=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return V.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.xs=i,s))}function mD(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=nr();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):W(Zm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function gD(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vD(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new ma(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function am(n,e,t){return w(this,null,function*(){let r=ce(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ks(o))throw o;W(Zm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function rE(n,e,t){let r=ce(n),i=ue.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,p){let v=ce(l),_=v.Os.get(p);return _!==void 0?V.resolve(v.xs.get(_)):v.Ti.getTargetData(d,p)}(r,o,Cn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:ue.min(),t?s:ve())).next(c=>(_D(r,DR(e),c),{documents:c,$s:s})))}function _D(n,e,t){let r=n.Ns.get(e)||ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}var Gl=class{constructor(){this.activeTargetIds=LR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var cm=class{constructor(){this.xo=new Gl,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Gl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lm=class{No(e){}shutdown(){}};var iE="ConnectivityMonitor",Wl=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){W(iE,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){W(iE,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sl=null;function um(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}var Xf="RestConnection",yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},dm=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Ol?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){let o=um(),c=this.jo(e,t.toUriEncodedString());W(Xf,`Sending RPC '${e}' ${o}:`,c,r);let l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);let{host:d}=new URL(c),p=wr(d);return this.Jo(e,c,l,r,p).then(v=>(W(Xf,`Received RPC '${e}' ${o}: `,v),v),v=>{throw ms(Xf,`RPC '${e}' ${o} failed with error: `,v,"url: ",c,"request:",r),v})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){let r=yD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var hm=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ut="WebChannelConnection",fm=class extends dm{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=um();return new Promise((c,l)=>{let d=new Gf;d.setWithCredentials(!0),d.listenOnce(Wf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ra.NO_ERROR:let v=d.getResponseJson();W(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case ra.TIMEOUT:W(ut,`RPC '${e}' ${o} timed out`),l(new G(P.DEADLINE_EXCEEDED,"Request time out"));break;case ra.HTTP_ERROR:let _=d.getStatus();if(W(ut,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);let N=R?.error;if(N&&N.status&&N.message){let q=function(oe){let ie=oe.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(ie)>=0?ie:P.UNKNOWN}(N.status);l(new G(q,N.message))}else l(new G(P.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new G(P.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{W(ut,`RPC '${e}' ${o} completed.`)}});let p=JSON.stringify(i);W(ut,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",p,r,15)})}I_(e,t,r){let i=um(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yf(),c=Qf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");W(ut,`Creating RPC '${e}' stream ${i}: ${p}`,l);let v=o.createWebChannel(p,l);this.E_(v);let _=!1,R=!1,N=new hm({Zo:L=>{R?W(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(W(ut,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),W(ut,`RPC '${e}' stream ${i} sending:`,L),v.send(L))},Xo:()=>v.close()}),q=(L,oe,ie)=>{L.listen(oe,se=>{try{ie(se)}catch(ke){setTimeout(()=>{throw ke},0)}})};return q(v,as.EventType.OPEN,()=>{R||(W(ut,`RPC '${e}' stream ${i} transport opened.`),N.__())}),q(v,as.EventType.CLOSE,()=>{R||(R=!0,W(ut,`RPC '${e}' stream ${i} transport closed`),N.u_(),this.d_(v))}),q(v,as.EventType.ERROR,L=>{R||(R=!0,ms(ut,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),N.u_(new G(P.UNAVAILABLE,"The operation could not be completed")))}),q(v,as.EventType.MESSAGE,L=>{var oe;if(!R){let ie=L.data[0];Te(!!ie,16349);let se=ie,ke=se?.error||((oe=se[0])===null||oe===void 0?void 0:oe.error);if(ke){W(ut,`RPC '${e}' stream ${i} received error:`,ke);let ht=ke.status,Se=function(b){let T=Ge[b];if(T!==void 0)return uI(T)}(ht),S=ke.message;Se===void 0&&(Se=P.INTERNAL,S="Unknown error status: "+ht+" with message "+ke.message),R=!0,N.u_(new G(Se,S)),v.close()}else W(ut,`RPC '${e}' stream ${i} received:`,ie),N.c_(ie)}}),q(c,Kf.STAT_EVENT,L=>{L.stat===Il.PROXY?W(ut,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Il.NOPROXY&&W(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function Zf(){return typeof document<"u"?document:null}function _u(n){return new Np(n,!0)}var Kl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var sE="PersistentStream",Ql=class{constructor(e,t,r,i,s,o,c,l){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Kl(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return w(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return w(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return w(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new G(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>w(this,null,function*(){this.state=0,this.start()}))}j_(e){return W(sE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(W(sE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pm=class extends Ql{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=JR(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?An(o.readTime):ue.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=Fp(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=bp(l)?{documents:eD(s,l)}:{query:tD(s,l).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=dI(s,o.resumeToken);let d=Op(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ue.min())>0){c.readTime=$l(s,o.snapshotVersion.toTimestamp());let d=Op(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=rD(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=Fp(this.serializer),t.removeTarget=e,this.Q_(t)}},mm=class extends Ql{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=ZR(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=Fp(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>XR(this.serializer,r))};this.Q_(t)}};var gm=class{},vm=class extends gm{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,Vp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(P.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,Vp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(P.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},_m=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Xn(t),this.ua=!1):W("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Ei="RemoteStore",ym=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{r.enqueueAndForget(()=>w(this,null,function*(){bi(this)&&(W(Ei,"Restarting streams for network reachability change."),yield function(l){return w(this,null,function*(){let d=ce(l);d.da.add(4),yield Sa(d),d.Va.set("Unknown"),d.da.delete(4),yield yu(d)})}(this))}))}),this.Va=new _m(r,i)}};function yu(n){return w(this,null,function*(){if(bi(n))for(let e of n.Aa)yield e(!0)})}function Sa(n){return w(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function EI(n,e){let t=ce(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),rg(t)?ng(t):Rs(t).N_()&&tg(t,e))}function eg(n,e){let t=ce(n),r=Rs(t);t.Ea.delete(e),r.N_()&&II(t,e),t.Ea.size===0&&(r.N_()?r.k_():bi(t)&&t.Va.set("Unknown"))}function tg(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rs(n).Z_(e)}function II(n,e){n.ma.Ke(e),Rs(n).X_(e)}function ng(n){n.ma=new Mp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Rs(n).start(),n.Va.ca()}function rg(n){return bi(n)&&!Rs(n).O_()&&n.Ea.size>0}function bi(n){return ce(n).da.size===0}function bI(n){n.ma=void 0}function wD(n){return w(this,null,function*(){n.Va.set("Online")})}function ED(n){return w(this,null,function*(){n.Ea.forEach((e,t)=>{tg(n,e)})})}function ID(n,e){return w(this,null,function*(){bI(n),rg(n)?(n.Va.Pa(e),ng(n)):n.Va.set("Unknown")})}function bD(n,e,t){return w(this,null,function*(){if(n.Va.set("Online"),e instanceof jl&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.Ea.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.Ea.delete(c),i.ma.removeTarget(c))})}(n,e)}catch(r){W(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yl(n,r)}else if(e instanceof fs?n.ma.Xe(e):e instanceof Ul?n.ma.ot(e):n.ma.nt(e),!t.isEqual(ue.min()))try{let r=yield wI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.ma.It(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.Ea.get(d);p&&s.Ea.set(d,p.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let p=s.Ea.get(l);if(!p)return;s.Ea.set(l,p.withResumeToken(dt.EMPTY_BYTE_STRING,p.snapshotVersion)),II(s,l);let v=new ma(p.target,l,d,p.sequenceNumber);tg(s,v)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){W(Ei,"Failed to raise snapshot:",r),yield Yl(n,r)}})}function Yl(n,e,t){return w(this,null,function*(){if(!ks(e))throw e;n.da.add(1),yield Sa(n),n.Va.set("Offline"),t||(t=()=>wI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){W(Ei,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield yu(n)}))})}function TI(n,e){return e().catch(t=>Yl(n,t,e))}function wu(n){return w(this,null,function*(){let e=ce(n),t=Mr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:zm;for(;TD(e);)try{let i=yield gD(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,SD(e,i)}catch(i){yield Yl(e,i)}SI(e)&&CI(e)})}function TD(n){return bi(n)&&n.Ia.length<10}function SD(n,e){n.Ia.push(e);let t=Mr(n);t.N_()&&t.ea&&t.ta(e.mutations)}function SI(n){return bi(n)&&!Mr(n).O_()&&n.Ia.length>0}function CI(n){Mr(n).start()}function CD(n){return w(this,null,function*(){Mr(n).ia()})}function AD(n){return w(this,null,function*(){let e=Mr(n);for(let t of n.Ia)e.ta(t.mutations)})}function xD(n,e,t){return w(this,null,function*(){let r=n.Ia.shift(),i=kp.from(r,e,t);yield TI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wu(n)})}function kD(n,e){return w(this,null,function*(){e&&Mr(n).ea&&(yield function(r,i){return w(this,null,function*(){if(function(o){return zR(o)&&o!==P.ABORTED}(i.code)){let s=r.Ia.shift();Mr(r).L_(),yield TI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield wu(r)}})}(n,e)),SI(n)&&CI(n)})}function oE(n,e){return w(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),W(Ei,"RemoteStore received new credentials");let r=bi(t);t.da.add(3),yield Sa(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield yu(t)})}function RD(n,e){return w(this,null,function*(){let t=ce(n);e?(t.da.delete(2),yield yu(t)):e||(t.da.add(2),yield Sa(t),t.Va.set("Unknown"))})}function Rs(n){return n.fa||(n.fa=function(t,r,i){let s=ce(t);return s.oa(),new pm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:wD.bind(null,n),n_:ED.bind(null,n),i_:ID.bind(null,n),Y_:bD.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.fa.L_(),rg(n)?ng(n):n.Va.set("Unknown")):(yield n.fa.stop(),bI(n))}))),n.fa}function Mr(n){return n.ga||(n.ga=function(t,r,i){let s=ce(t);return s.oa(),new mm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:CD.bind(null,n),i_:kD.bind(null,n),na:AD.bind(null,n),ra:xD.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.ga.L_(),yield wu(n)):(yield n.ga.stop(),n.Ia.length>0&&(W(Ei,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var wm=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ig(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),ks(n))return new G(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Jl=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=ia(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xl=class{constructor(){this.pa=new He(X.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ee(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ss=class n{constructor(e,t,r,i,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Jl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Em=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},Im=class{constructor(){this.queries=aE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ce(t),s=i.queries;i.queries=aE(),s.forEach((o,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new G(P.ABORTED,"Firestore shutting down"))}};function aE(){return new tr(n=>XE(n),gu)}function sg(n,e){return w(this,null,function*(){let t=ce(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new Em,r=e.va()?0:1);try{switch(r){case 0:s.ba=yield t.onListen(i,!0);break;case 1:s.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=ig(o,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&ag(t)})}function og(n,e){return w(this,null,function*(){let t=ce(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function DD(n,e){let t=ce(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.Sa)c.Ma(i)&&(r=!0);o.ba=i}}r&&ag(t)}function PD(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function ag(n){n.Ca.forEach(e=>{e.next()})}var bm,cE;(cE=bm||(bm={})).xa="default",cE.Cache="cache";var _a=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==bm.Cache}};var Zl=class{constructor(e){this.key=e}},eu=class{constructor(e){this.key=e}},Tm=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.Za=ZE(e),this.Xa=new Jl(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new Xl,i=t?t.Xa:this.Xa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{let _=i.get(p),R=vu(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),L=!1;_&&R?_.data.isEqual(R.data)?N!==q&&(r.track({type:3,doc:R}),L=!0):this.ru(_,R)||(r.track({type:2,doc:R}),L=!0,(l&&this.Za(R,l)>0||d&&this.Za(R,d)<0)&&(c=!0)):!_&&R?(r.track({type:0,doc:R}),L=!0):_&&!R&&(r.track({type:1,doc:_}),L=!0,(l||d)&&(c=!0)),L&&(R?(o=o.add(R),s=q?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Xa:o,nu:r,Cs:c,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let o=e.nu.wa();o.sort((p,v)=>function(R,N){let q=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Vt:L})}};return q(R)-q(N)}(p.type,v.type)||this.Za(p.doc,v.doc)),this.iu(r),i=i!=null&&i;let c=t&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Ja;return this.Ja=l,o.length!==0||d?{snapshot:new Ss(this.query,e.Xa,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Xl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=ve(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new eu(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Zl(r))}),t}au(e){this.Ha=e.$s,this.Ya=ve();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ss.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},cg="SyncEngine",Sm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Cm=class{constructor(e){this.key=e,this.cu=!1}},Am=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new tr(c=>XE(c),gu),this.Pu=new Map,this.Tu=new Set,this.Iu=new He(X.comparator),this.Eu=new Map,this.du=new va,this.Au={},this.Ru=new Map,this.Vu=ga.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function MD(n,e,t=!0){return w(this,null,function*(){let r=PI(n),i,s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=yield AI(r,e,t,!0),i})}function ND(n,e){return w(this,null,function*(){let t=PI(n);yield AI(t,e,!0,!1)})}function AI(n,e,t,r){return w(this,null,function*(){let i=yield vD(n.localStore,Cn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield OD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&EI(n.remoteStore,i),c})}function OD(n,e,t,r,i){return w(this,null,function*(){n.fu=(v,_,R)=>function(q,L,oe,ie){return w(this,null,function*(){let se=L.view.tu(oe);se.Cs&&(se=yield rE(q.localStore,L.query,!1).then(({documents:S})=>L.view.tu(S,se)));let ke=ie&&ie.targetChanges.get(L.targetId),ht=ie&&ie.targetMismatches.get(L.targetId)!=null,Se=L.view.applyChanges(se,q.isPrimaryClient,ke,ht);return uE(q,L.targetId,Se.ou),Se.snapshot})}(n,v,_,R);let s=yield rE(n.localStore,e,!0),o=new Tm(e,s.$s),c=o.tu(s.documents),l=pa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,l);uE(n,t,d.ou);let p=new Sm(e,t,o);return n.hu.set(e,p),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),d.snapshot})}function VD(n,e,t){return w(this,null,function*(){let r=ce(n),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(o=>!gu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield am(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eg(r.remoteStore,i.targetId),xm(r,i.targetId)}).catch(xs))):(xm(r,i.targetId),yield am(r.localStore,i.targetId,!0))})}function LD(n,e){return w(this,null,function*(){let t=ce(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eg(t.remoteStore,r.targetId))})}function FD(n,e,t){return w(this,null,function*(){let r=HD(n);try{let i=yield function(o,c){let l=ce(o),d=rt.now(),p=c.reduce((R,N)=>R.add(N.key),ve()),v,_;return l.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=nr(),q=ve();return l.Bs.getEntries(R,p).next(L=>{N=L,N.forEach((oe,ie)=>{ie.isValidDocument()||(q=q.add(oe))})}).next(()=>l.localDocuments.getOverlayedDocuments(R,N)).next(L=>{v=L;let oe=[];for(let ie of c){let se=qR(ie,v.get(ie.key).overlayedDocument);se!=null&&oe.push(new kn(ie.key,se,HE(se.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(R,d,oe,c)}).next(L=>{_=L;let oe=L.applyToLocalDocumentSet(v,q);return l.documentOverlayCache.saveOverlays(R,L.batchId,oe)})}).then(()=>({batchId:_.batchId,changes:tI(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let d=o.Au[o.currentUser.toKey()];d||(d=new He(fe)),d=d.insert(c,l),o.Au[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Ca(r,i.changes),yield wu(r.remoteStore)}catch(i){let s=ig(i,"Failed to persist write");t.reject(s)}})}function xI(n,e){return w(this,null,function*(){let t=ce(n);try{let r=yield pD(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Te(o.cu,14607):i.removedDocuments.size>0&&(Te(o.cu,42227),o.cu=!1))}),yield Ca(t,r,e)}catch(r){yield xs(r)}})}function lE(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((s,o)=>{let c=o.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=ce(o);l.onlineState=c;let d=!1;l.queries.forEach((p,v)=>{for(let _ of v.Sa)_.Fa(c)&&(d=!0)}),d&&ag(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UD(n,e,t){return w(this,null,function*(){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new He(X.comparator);o=o.insert(s,un.newNoDocument(s,ue.min()));let c=ve().add(s),l=new Fl(ue.min(),new Map,new He(fe),o,c);yield xI(r,l),r.Iu=r.Iu.remove(s),r.Eu.delete(e),lg(r)}else yield am(r.localStore,e,!1).then(()=>xm(r,e,t)).catch(xs)})}function jD(n,e){return w(this,null,function*(){let t=ce(n),r=e.batch.batchId;try{let i=yield fD(t.localStore,e);RI(t,r,null),kI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ca(t,i)}catch(i){yield xs(i)}})}function BD(n,e,t){return w(this,null,function*(){let r=ce(n);try{let i=yield function(o,c){let l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return l.mutationQueue.lookupMutationBatch(d,c).next(v=>(Te(v!==null,37113),p=v.keys(),l.mutationQueue.removeMutationBatch(d,v))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>l.localDocuments.getDocuments(d,p))})}(r.localStore,e);RI(r,e,t),kI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ca(r,i)}catch(i){yield xs(i)}})}function kI(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function RI(n,e,t){let r=ce(n),i=r.Au[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||DI(n,r)})}function DI(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(eg(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),lg(n))}function uE(n,e,t){for(let r of t)r instanceof Zl?(n.du.addReference(r.key,e),$D(n,r)):r instanceof eu?(W(cg,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||DI(n,r.key)):ee(19791,{pu:r})}function $D(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(W(cg,"New document in limbo: "+t),n.Tu.add(r),lg(n))}function lg(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new X(je.fromString(e)),r=n.Vu.next();n.Eu.set(r,new Cm(t)),n.Iu=n.Iu.insert(t,r),EI(n.remoteStore,new ma(Cn(mu(t.path)),r,"TargetPurposeLimboResolution",qm.le))}}function Ca(n,e,t){return w(this,null,function*(){let r=ce(n),i=[],s=[],o=[];r.hu.isEmpty()||(r.hu.forEach((c,l)=>{o.push(r.fu(l,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let v=d?!d.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,v?"current":"not-current")}if(d){i.push(d);let v=rm.Rs(l.targetId,d);s.push(v)}}))}),yield Promise.all(o),r.lu.Y_(i),yield function(l,d){return w(this,null,function*(){let p=ce(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>V.forEach(d,_=>V.forEach(_.ds,R=>p.persistence.referenceDelegate.addReference(v,_.targetId,R)).next(()=>V.forEach(_.As,R=>p.persistence.referenceDelegate.removeReference(v,_.targetId,R)))))}catch(v){if(!ks(v))throw v;W(Zm,"Failed to update sequence numbers: "+v)}for(let v of d){let _=v.targetId;if(!v.fromCache){let R=p.xs.get(_),N=R.snapshotVersion,q=R.withLastLimboFreeSnapshotVersion(N);p.xs=p.xs.insert(_,q)}}})}(r.localStore,s))})}function qD(n,e){return w(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){W(cg,"User change. New user:",e.toKey());let r=yield yI(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(c=>{c.forEach(l=>{l.reject(new G(P.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ca(t,r.ks)}})}function zD(n,e){let t=ce(n),r=t.Eu.get(e);if(r&&r.cu)return ve().add(r.key);{let i=ve(),s=t.Pu.get(e);if(!s)return i;for(let o of s){let c=t.hu.get(o);i=i.unionWith(c.view.eu)}return i}}function PI(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UD.bind(null,e),e.lu.Y_=DD.bind(null,e.eventManager),e.lu.gu=PD.bind(null,e.eventManager),e}function HD(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BD.bind(null,e),e}var MI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=_u(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return hD(this.persistence,new sm,t.initialUser,this.serializer)}Su(t){return new zl(nm.fi,this.serializer)}bu(t){return new cm}terminate(){return w(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),km=class extends MI{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Te(this.persistence.referenceDelegate instanceof Hl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new qp(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new zl(r=>Hl.fi(r,t),this.serializer)}};var GD=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qD.bind(null,this.syncEngine),yield RD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Im}()}createDatastore(t){let r=_u(t.databaseInfo.databaseId),i=function(o){return new fm(o)}(t.databaseInfo);return function(o,c,l,d){return new vm(o,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,l){return new ym(i,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>lE(this.syncEngine,r,0),function(){return Wl.C()?new Wl:new lm}())}createSyncEngine(t,r){return function(s,o,c,l,d,p,v){let _=new Am(s,o,c,l,d,p);return v&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var t,r;yield function(s){return w(this,null,function*(){let o=ce(s);W(Ei,"RemoteStore shutting down."),o.da.add(5),yield Sa(o),o.Ra.shutdown(),o.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ya=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Nr="FirestoreClient",Rm=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Dl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>w(this,null,function*(){W(Nr,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W(Nr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ig(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ep(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W(Nr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield yI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function dE(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield WD(n);W(Nr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>oE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>oE(e.remoteStore,i)),n._onlineComponents=e})}function WD(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Nr,"Using user provided OfflineComponentProvider");try{yield ep(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ms("Error using user provided cache. Falling back to memory cache: "+t),yield ep(n,new MI)}}else W(Nr,"Using default OfflineComponentProvider"),yield ep(n,new km(void 0));return n._offlineComponents})}function NI(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Nr,"Using user provided OnlineComponentProvider"),yield dE(n,n._uninitializedComponentsProvider._online)):(W(Nr,"Using default OnlineComponentProvider"),yield dE(n,new GD))),n._onlineComponents})}function KD(n){return NI(n).then(e=>e.syncEngine)}function tu(n){return w(this,null,function*(){let e=yield NI(n),t=e.eventManager;return t.onListen=MD.bind(null,e.syncEngine),t.onUnlisten=VD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ND.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LD.bind(null,e.syncEngine),t})}function QD(n,e,t={}){let r=new ln;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(s,o,c,l,d){let p=new ya({next:_=>{p.xu(),o.enqueueAndForget(()=>og(s,v));let R=_.docs.has(c);!R&&_.fromCache?d.reject(new G(P.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&l&&l.source==="server"?d.reject(new G(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new _a(mu(c.path),p,{includeMetadataChanges:!0,Qa:!0});return sg(s,v)}(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function YD(n,e,t={}){let r=new ln;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(s,o,c,l,d){let p=new ya({next:_=>{p.xu(),o.enqueueAndForget(()=>og(s,v)),_.fromCache&&l.source==="server"?d.reject(new G(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),v=new _a(c,p,{includeMetadataChanges:!0,Qa:!0});return sg(s,v)}(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function OI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hE=new Map;function VI(n,e,t){if(!t)throw new G(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JD(n,e,t,r){if(e===!0&&r===!0)throw new G(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fE(n){if(!X.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pE(n){if(X.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Eu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function Lt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Eu(n);throw new G(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var LI="firestore.googleapis.com",mE=!0,nu=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LI,this.ssl=mE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_I;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lD)throw new G(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new np;switch(r.type){case"firstParty":return new op(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=hE.get(t);r&&(W("ComponentProvider","Removing Datastore"),hE.delete(t),r.terminate())}(this),Promise.resolve()}};function FI(n,e,t,r={}){var i;n=Lt(n,Cs);let s=wr(e),o=n._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Kc(`https://${l}`),Qc("Firestore",!0)),o.host!==LI&&o.host!==l&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!qt(d,c)&&(n._setSettings(d),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=et.MOCK_USER;else{p=G_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new G(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new et(_)}n._authCredentials=new rp(new kl(p,v))}}var Or=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},xr=class n extends Or{constructor(e,t,r){super(e,t,mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function UI(n,e,...t){if(n=qe(n),VI("collection","path",e),n instanceof Cs){let r=je.fromString(e,...t);return pE(r),new xr(n,null,r)}{if(!(n instanceof _t||n instanceof xr))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return pE(r),new xr(n.firestore,null,r)}}function ug(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Dl.newId()),VI("doc","path",e),n instanceof Cs){let r=je.fromString(e,...t);return fE(r),new _t(n,null,new X(r))}{if(!(n instanceof _t||n instanceof xr))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return fE(r),new _t(n.firestore,n instanceof xr?n.converter:null,new X(r))}}var gE="AsyncQueue",ru=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Kl(this,"async_queue_retry"),this.rc=()=>{let r=Zf();r&&W(gE,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=Zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=Zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new ln;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return w(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!ks(e))throw e;W(gE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Xn("INTERNAL UNHANDLED ERROR: ",vE(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=wm.createAndSchedule(this,e,t,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&ee(47125,{cc:vE(this.Xu)})}verifyOperationInProgress(){}lc(){return w(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function vE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function _E(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var hn=class extends Cs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ru,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ru(e),this._firestoreClient=void 0,yield e}})}};function jI(n,e){let t=typeof n=="object"?n:oi(),r=typeof n=="string"?n:e||Ol,i=ts(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=H_("firestore");s&&FI(i,...s)}return i}function Aa(n){if(n._terminated)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XD(n),n._firestoreClient}function XD(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,p){return new dp(c,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,OI(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Rm(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var wa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new G(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ii=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vr=class{constructor(e){this._methodName=e}};var Ea=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}};var Ia=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var ZD=/^__.*__$/,Dm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new wi(e,this.data,t,this.fieldTransforms)}},iu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function BI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ic:n})}}var su=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return au(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(BI(this.Ic)&&ZD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},Pm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_u(e)}bc(e,t,r,i=!1){return new su({Ic:e,methodName:t,wc:r,path:Vt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Iu(n){let e=n._freezeSettings(),t=_u(n._databaseId);return new Pm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $I(n,e,t,r,i,s={}){let o=n.bc(s.merge||s.mergeFields?2:0,e,t,i);dg("Data must be an object, but it was:",o,r);let c=GI(r,o),l,d;if(s.merge)l=new Ht(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let p=[];for(let v of s.mergeFields){let _=Vm(e,v,t);if(!o.contains(_))throw new G(P.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);KI(p,_)||p.push(_)}l=new Ht(p),d=o.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,d=o.fieldTransforms;return new Dm(new Ot(c),l,d)}var ou=class n extends Vr{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function qI(n,e,t){return new su({Ic:3,wc:e.settings.wc,methodName:n._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Mm=class n extends Vr{_toFieldTransform(e){return new fa(e.path,new yi)}isEqual(e){return e instanceof n}},Nm=class n extends Vr{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=qI(this,e,!0),r=this.Sc.map(s=>Ti(s,t)),i=new Dr(r);return new fa(e.path,i)}isEqual(e){return e instanceof n&&qt(this.Sc,e.Sc)}},Om=class n extends Vr{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){let t=qI(this,e,!0),r=this.Sc.map(s=>Ti(s,t)),i=new Pr(r);return new fa(e.path,i)}isEqual(e){return e instanceof n&&qt(this.Sc,e.Sc)}};function zI(n,e,t,r){let i=n.bc(1,e,t);dg("Data must be an object, but it was:",i,r);let s=[],o=Ot.empty();Lr(r,(l,d)=>{let p=hg(e,l,t);d=qe(d);let v=i.mc(p);if(d instanceof ou)s.push(p);else{let _=Ti(d,v);_!=null&&(s.push(p),o.set(p,_))}});let c=new Ht(s);return new iu(o,c,i.fieldTransforms)}function HI(n,e,t,r,i,s){let o=n.bc(1,e,t),c=[Vm(e,r,t)],l=[i];if(s.length%2!=0)throw new G(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(Vm(e,s[_])),l.push(s[_+1]);let d=[],p=Ot.empty();for(let _=c.length-1;_>=0;--_)if(!KI(d,c[_])){let R=c[_],N=l[_];N=qe(N);let q=o.mc(R);if(N instanceof ou)d.push(R);else{let L=Ti(N,q);L!=null&&(d.push(R),p.set(R,L))}}let v=new Ht(d);return new iu(p,v,o.fieldTransforms)}function eP(n,e,t,r=!1){return Ti(t,n.bc(r?4:3,e))}function Ti(n,e){if(WI(n=qe(n)))return dg("Unsupported field value:",e,n),GI(n,e);if(n instanceof Vr)return function(r,i){if(!BI(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=Ti(c,i.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:$l(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$l(i.serializer,s)}}if(r instanceof Ea)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:dI(i.serializer,r._byteString)};if(r instanceof _t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ia)return function(o,c){return{mapValue:{fields:{[Gm]:{stringValue:Wm},[vs]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.gc("VectorValues must only contain numeric values.");return Jm(c.serializer,d)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Eu(r)}`)}(n,e)}function GI(n,e){let t={};return LE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,(r,i)=>{let s=Ti(i,e.Ac(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function WI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof Ea||n instanceof wa||n instanceof _t||n instanceof Vr||n instanceof Ia)}function dg(n,e,t){if(!WI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Eu(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function Vm(n,e,t){if((e=qe(e))instanceof Ii)return e._internalPath;if(typeof e=="string")return hg(n,e);throw au("Field path arguments must be of type string or ",n,!1,void 0,t)}var tP=new RegExp("[~\\*/\\[\\]]");function hg(n,e,t){if(e.search(tP)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ii(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function au(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(P.INVALID_ARGUMENT,c+n+l)}function KI(n,e){return n.some(t=>t.isEqual(e))}var cu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Lm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Lm=class extends cu{data(){return super.data()}};function bu(n,e){return typeof e=="string"?hg(n,e):e instanceof Ii?e._internalPath:e._delegate._internalPath}function QI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ba=class{},lu=class extends ba{};function YI(n,e,...t){let r=[];e instanceof ba&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof Fm).length,c=s.filter(l=>l instanceof uu).length;if(o>1||o>0&&c>0)throw new G(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var uu=class n extends lu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ZI(e._query,t),new Or(e.firestore,e.converter,Tp(e._query,t))}_parse(e){let t=Iu(e.firestore);return function(s,o,c,l,d,p,v){let _;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){wE(v,p);let N=[];for(let q of v)N.push(yE(l,s,q));_={arrayValue:{values:N}}}else _=yE(l,s,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||wE(v,p),_=eP(c,o,v,p==="in"||p==="not-in");return Ke.create(d,p,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function JI(n,e,t){let r=e,i=bu("where",n);return uu._create(i,r,t)}var Fm=class n extends ba{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)ZI(o,l),o=Tp(o,l)}(e._query,t),new Or(e.firestore,e.converter,Tp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Um=class n extends lu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new G(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _i(s,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Rr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function XI(n,e="asc"){let t=e,r=bu("orderBy",n);return Um._create(r,t)}function yE(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new G(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&t.indexOf("/")!==-1)throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!X.isDocumentKey(r))throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fw(n,new X(r))}if(t instanceof _t)return Fw(n,t._key);throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eu(t)}.`)}function wE(n,e){if(!Array.isArray(n)||n.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZI(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var jm=class{convertValue(e,t="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Lr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[vs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Le(o.doubleValue));return new Ia(s)}convertGeoPoint(e){return new Ea(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=pu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){let t=Zn(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);Te(vI(r),9688,{name:e});let i=new Vl(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(t)||Xn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function eb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},du=class extends cu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ps=class extends du{data(e={}){return super.data(e)}},hu=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ps(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new ps(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new ps(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:nP(c.type),doc:l,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function nP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}function tb(n){n=Lt(n,_t);let e=Lt(n.firestore,hn);return QD(Aa(e),n._key).then(t=>ob(e,n,t))}var Ta=class extends jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}};function nb(n){n=Lt(n,Or);let e=Lt(n.firestore,hn),t=Aa(e),r=new Ta(e);return QI(n._query),YD(t,n._query).then(i=>new hu(e,r,n,i))}function rb(n,e,t,...r){n=Lt(n,_t);let i=Lt(n.firestore,hn),s=Iu(i),o;return o=typeof(e=qe(e))=="string"||e instanceof Ii?HI(s,"updateDoc",n._key,e,t,r):zI(s,"updateDoc",n._key,e),Tu(i,[o.toMutation(n._key,Gt.exists(!0))])}function ib(n){return Tu(Lt(n.firestore,hn),[new Ts(n._key,Gt.none())])}function sb(n,e){let t=Lt(n.firestore,hn),r=ug(n),i=eb(n.converter,e);return Tu(t,[$I(Iu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function fg(n,...e){var t,r,i;n=qe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_E(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(_E(e[o])){let v=e[o];e[o]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[o+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[o+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let l,d,p;if(n instanceof _t)d=Lt(n.firestore,hn),p=mu(n._key.path),l={next:v=>{e[o]&&e[o](ob(d,n,v))},error:e[o+1],complete:e[o+2]};else{let v=Lt(n,Or);d=Lt(v.firestore,hn),p=v._query;let _=new Ta(d);l={next:R=>{e[o]&&e[o](new hu(d,_,v,R))},error:e[o+1],complete:e[o+2]},QI(n._query)}return function(_,R,N,q){let L=new ya(q),oe=new _a(R,L,N);return _.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return sg(yield tu(_),oe)})),()=>{L.xu(),_.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return og(yield tu(_),oe)}))}}(Aa(d),p,c,l)}function Tu(n,e){return function(r,i){let s=new ln;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return FD(yield KD(r),i,s)})),s.promise}(Aa(n),e)}function ob(n,e,t){let r=t.docs.get(e._key),i=new Ta(n);return new du(n,i,e._key,r,new mi(t.hasPendingWrites,t.fromCache),e.converter)}var Bm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,t,r){this._verifyNotCommitted();let i=tp(e,this._firestore),s=eb(i.converter,t,r),o=$I(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=tp(e,this._firestore),o;return o=typeof(t=qe(t))=="string"||t instanceof Ii?HI(this._dataReader,"WriteBatch.update",s._key,t,r,i):zI(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=tp(e,this._firestore);return this._mutations=this._mutations.concat(new Ts(t._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function tp(n,e){if((n=qe(n)).firestore!==e)throw new G(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function ab(){return new Mm("serverTimestamp")}function cb(...n){return new Nm("arrayUnion",n)}function lb(...n){return new Om("arrayRemove",n)}function ub(n){return Aa(n=Lt(n,hn)),new Bm(n,e=>Tu(n,e))}(function(e,t=!0){(function(i){As=i})(Ir),on(new vt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new hn(new ip(r.getProvider("auth-internal")),new ap(o,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),ze(xw,kw,e),ze(xw,kw,"esm2017")})();var Su=function(){return Su=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Su.apply(this,arguments)};var sP={includeMetadataChanges:!1};function pg(n,e){return e===void 0&&(e=sP),new Ct(function(t){var r=fg(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function db(n){return pg(n,{includeMetadataChanges:!0})}function hb(n,e){return e===void 0&&(e={}),db(n).pipe(ae(function(t){return mg(t,e)}))}function mg(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Su(Su({},r),(t={},t[e.idField]=n.id,t))}function fb(n){return pg(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function pb(n,e){return e===void 0&&(e={}),fb(n).pipe(ae(function(t){return t.map(function(r){return mg(r,e)})}))}var fn=class{constructor(e){return e}},mb="firestore",gg=class{constructor(){return rs(mb)}};var vg=new we("angularfire2.firestore-instances");function oP(n,e){let t=zo(mb,n,e);return t&&new fn(t)}function aP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new fn(r)}}var cP={provide:gg,deps:[[new jt,vg]]},lP={provide:fn,useFactory:oP,deps:[[new jt,vg],Gn]};function gb(n,...e){return ze("angularfire",br.full,"fst"),dr([lP,cP,{provide:vg,useFactory:aP(n),multi:!0,deps:[lt,At,Tr,ci,[new jt,na],[new jt,is],...e]}])}var xa=Ue(pb,!0);var vb=Ue(hb,!0);var Ds=Ue(sb,!0,2);var Fr=Ue(UI,!0,2);var Cu=Ue(ib,!0,2);var yt=Ue(ug,!0,2);var Au=Ue(tb,!0);var Ps=Ue(nb,!0);var _b=Ue(jI,!0);var _g=Ue(XI,!0,2),Rn=Ue(YI,!0,2);var Dn=Ue(rb,!0,2);var Pn=Ue(JI,!0,2),yg=Ue(ub,!0,2);var Fe=class n{constructor(e){this.auth=e;this.user$=Iw(this.auth)}user$;signInWithGoogle(){let e=new Lf;return Tw(this.auth,e)}signOut(){return Sw(this.auth)}static \u0275fac=function(t){return new(t||n)(te(hi))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function uP(n,e){if(n&1&&(Zt(0),E(1),en()),n&2){let t=e.ngIf;x(),Ne(" Welcome, ",t&&t.displayName?t.displayName.split(" ")[0]||t.displayName:"User","! ")}}function dP(n,e){n&1&&E(0," Welcome! ")}function hP(n,e){n&1&&(f(0,"div",50),U(1,"div",51),f(2,"span",52),E(3,"Loading quote..."),g()())}function fP(n,e){if(n&1&&(f(0,"div",53)(1,"blockquote",54),E(2),g(),f(3,"p",55),E(4),g()()),n&2){let t=O();x(2),Ne(' "',t.homeQuote.q,'" '),x(2),Ne(" \u2014 ",t.homeQuote.a," ")}}function pP(n,e){if(n&1){let t=he();f(0,"div",56)(1,"p",57),E(2),g(),f(3,"button",58),F("click",function(){z(t);let i=O();return H(i.refreshQuote())}),E(4," Try again "),g()()}if(n&2){let t=O();x(2),le(t.quoteError)}}var xu=class n{constructor(e,t,r){this.authService=e;this.router=t;this.quotesService=r}homeQuote=null;quoteLoading=!1;quoteError=null;ngOnInit(){this.refreshQuote()}get user$(){return this.authService.user$}navigateToLists(){this.router.navigate(["/lists"])}navigateToIpLookup(){this.router.navigate(["/ip-lookup"])}navigateToQuotes(){this.router.navigate(["/quotes"])}navigateToFamilyTree(){this.router.navigate(["/family-tree"])}showProfile(){this.router.navigate(["/profile"])}refreshQuote(){this.quoteLoading=!0,this.quoteError=null,this.quotesService.getRandomQuote().subscribe({next:e=>{this.homeQuote=e,this.quoteLoading=!1},error:e=>{this.quoteError="Failed to load quote.",this.quoteLoading=!1}})}static \u0275fac=function(t){return new(t||n)($(Fe),$(Oe),$(Pv))};static \u0275cmp=Ie({type:n,selectors:[["app-home"]],decls:91,vars:8,consts:[["welcomeGuest",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-6","sm:mb-8"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","max-w-2xl","mx-auto"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],[1,"card","group","cursor-pointer",3,"click"],[1,"flex","items-center","space-x-3","sm:space-x-4"],[1,"flex-shrink-0"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-primary-200","dark:group-hover:bg-primary-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-green-100","dark:bg-green-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-green-200","dark:group-hover:bg-green-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-green-600","dark:group-hover:text-green-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-blue-100","dark:bg-blue-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","dark:group-hover:bg-blue-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-blue-600","dark:group-hover:text-blue-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-purple-100","dark:bg-purple-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-purple-200","dark:group-hover:bg-purple-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-purple-600","dark:text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-purple-600","dark:group-hover:text-purple-400","transition-colors","duration-200"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-yellow-100","dark:bg-yellow-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-yellow-200","dark:group-hover:bg-yellow-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4s-3.5 3-3.5 6c0 1.5 1 4 3.5 4s3.5-2.5 3.5-4c0-3-3.5-6-3.5-6zM12 14v4m-4-4h8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4a4 4 0 100-8 4 4 0 000 8zM3 20h18"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-yellow-600","dark:group-hover:text-yellow-400","transition-colors","duration-200"],["routerLink","/premier-league",1,"card","group"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-red-100","dark:bg-red-900","rounded-lg","flex","items-center","justify-center","group-hover:bg-red-200","dark:group-hover:bg-red-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","sm:w-6","sm:h-6","text-red-600","dark:text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","group-hover:text-red-600","dark:group-hover:text-red-400","transition-colors","duration-200"],[1,"mt-8","sm:mt-12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","mr-2","text-blue-600","dark:text-blue-400"],[1,"p-2","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center py-8",4,"ngIf"],[1,"flex","items-center","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"ml-3","text-gray-600","dark:text-gray-300"],[1,"text-center"],[1,"text-lg","sm:text-xl","text-gray-800","dark:text-gray-200","italic","mb-3"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-400"],[1,"text-center","py-8"],[1,"text-red-600","dark:text-red-400"],[1,"mt-3","text-blue-600","dark:text-blue-400","hover:underline",3,"click"]],template:function(t,r){if(t&1){let i=he();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),K(4,uP,2,1,"ng-container",5),ge(5,"async"),K(6,dP,1,0,"ng-template",null,0,Rt),E(8," Explore some of my utilities, tools and research items. "),g()(),f(9,"div",6)(10,"div",7),F("click",function(){return z(i),H(r.navigateToLists())}),f(11,"div",8)(12,"div",9)(13,"div",10),Y(),f(14,"svg",11),U(15,"path",12),g()()(),ne(),f(16,"div",13)(17,"h3",14),E(18," Todo Lists "),g(),f(19,"p",15),E(20," Create and manage your todo lists "),g()()()(),f(21,"div",7),F("click",function(){return z(i),H(r.navigateToIpLookup())}),f(22,"div",8)(23,"div",9)(24,"div",16),Y(),f(25,"svg",17),U(26,"path",18)(27,"path",19),g()()(),ne(),f(28,"div",13)(29,"h3",20),E(30," IP Lookup "),g(),f(31,"p",15),E(32," Check your IP address and location "),g()()()(),f(33,"div",7),F("click",function(){return z(i),H(r.navigateToQuotes())}),f(34,"div",8)(35,"div",9)(36,"div",21),Y(),f(37,"svg",22),U(38,"path",23),g()()(),ne(),f(39,"div",13)(40,"h3",24),E(41," Quotes "),g(),f(42,"p",15),E(43," Get inspired with random quotes "),g()()()(),f(44,"div",7),F("click",function(){return z(i),H(r.showProfile())}),f(45,"div",8)(46,"div",9)(47,"div",25),Y(),f(48,"svg",26),U(49,"path",27),g()()(),ne(),f(50,"div",13)(51,"h3",28),E(52," Profile "),g(),f(53,"p",15),E(54," View your account information "),g()()()(),f(55,"div",7),F("click",function(){return z(i),H(r.navigateToFamilyTree())}),f(56,"div",8)(57,"div",9)(58,"div",29),Y(),f(59,"svg",30),U(60,"path",31)(61,"path",32),g()()(),ne(),f(62,"div",13)(63,"h3",33),E(64," Family Tree "),g(),f(65,"p",15),E(66," Manage your family tree "),g()()()(),f(67,"a",34)(68,"div",8)(69,"div",9)(70,"div",35),Y(),f(71,"svg",36),U(72,"path",37),g()()(),ne(),f(73,"div",13)(74,"h3",38),E(75," Premier League Standings "),g(),f(76,"p",15),E(77," View the current Premier League standings. "),g()()()()(),f(78,"div",39)(79,"div",40)(80,"div",41)(81,"h2",42),Y(),f(82,"svg",43),U(83,"path",23),g(),E(84," Daily Inspiration "),g(),ne(),f(85,"button",44),F("click",function(){return z(i),H(r.refreshQuote())}),Y(),f(86,"svg",45),U(87,"path",46),g()()(),K(88,hP,4,0,"div",47)(89,fP,5,2,"div",48)(90,pP,5,1,"div",49),g()()()()}if(t&2){let i=kt(7);x(4),M("ngIf",be(5,6,r.user$))("ngIfElse",i),x(81),M("disabled",r.quoteLoading),x(3),M("ngIf",r.quoteLoading),x(),M("ngIf",!r.quoteLoading&&r.homeQuote),x(),M("ngIf",!r.quoteLoading&&!r.homeQuote&&r.quoteError)}},dependencies:[Ce,$e,It,$t],encapsulation:2})};var ku=class n{constructor(e){this.http=e}apiUrl="https://api.ipstack.com/check?access_key=c30488184006475d64ed23dfcf4dc153";getLocation(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||n)(te(Bi))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function gP(n,e){n&1&&(f(0,"div",8)(1,"div",9),U(2,"div",10),f(3,"span",11),E(4,"Loading IP information..."),g()()())}function vP(n,e){if(n&1&&(f(0,"div",12)(1,"div",13),Y(),f(2,"svg",14),U(3,"path",15),g(),ne(),f(4,"div")(5,"h3",16),E(6,"Error"),g(),f(7,"p",17),E(8),g()()()()),n&2){let t=O();x(8),le(t.error)}}function _P(n,e){n&1&&(Y(),f(0,"svg",49),U(1,"path",50),g())}function yP(n,e){n&1&&(Y(),f(0,"svg",51),U(1,"path",50),g())}function wP(n,e){if(n&1){let t=he();f(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),Y(),f(4,"svg",22),U(5,"path",23),g()(),ne(),f(6,"div")(7,"h2",24),E(8,"Your IP Address"),g(),f(9,"p",11),E(10,"Current network information"),g()()(),f(11,"div",25)(12,"div",26)(13,"div")(14,"label",27),E(15,"IP Address"),g(),f(16,"div",28)(17,"code",29),E(18),g(),f(19,"button",30),F("click",function(){z(t);let i=O();return H(i.copyToClipboard(i.ipInfo.ip))}),Y(),f(20,"svg",31),U(21,"path",32),g()()()(),ne(),f(22,"div")(23,"label",27),E(24,"Type"),g(),f(25,"span",33),E(26),g()()(),f(27,"div",26)(28,"div")(29,"label",27),E(30,"Continent"),g(),f(31,"p",34),E(32),g()(),f(33,"div")(34,"label",27),E(35,"Country"),g(),f(36,"p",34),E(37),g()()()()(),f(38,"div",35)(39,"div",19)(40,"h3",36),Y(),f(41,"svg",37),U(42,"path",38)(43,"path",39),g(),E(44," Location Details "),g(),ne(),f(45,"div",40)(46,"div",41)(47,"span",42),E(48,"Region:"),g(),f(49,"span",43),E(50),g()(),f(51,"div",41)(52,"span",42),E(53,"City:"),g(),f(54,"span",43),E(55),g()(),f(56,"div",41)(57,"span",42),E(58,"ZIP Code:"),g(),f(59,"span",43),E(60),g()(),f(61,"div",41)(62,"span",42),E(63,"Latitude:"),g(),f(64,"span",43),E(65),g()(),f(66,"div",41)(67,"span",42),E(68,"Longitude:"),g(),f(69,"span",43),E(70),g()()()(),f(71,"div",19)(72,"h3",36),Y(),f(73,"svg",37),U(74,"path",44),g(),E(75," Network Information "),g(),ne(),f(76,"div",40)(77,"div",41)(78,"span",42),E(79,"ISP:"),g(),f(80,"span",43),E(81),g()(),f(82,"div",41)(83,"span",42),E(84,"Organization:"),g(),f(85,"span",43),E(86),g()(),f(87,"div",41)(88,"span",42),E(89,"ASN:"),g(),f(90,"span",43),E(91),g()()()()(),f(92,"div",45)(93,"button",46),F("click",function(){z(t);let i=O();return H(i.refreshIpInfo())}),K(94,_P,2,0,"svg",47)(95,yP,2,0,"svg",48),E(96),g()()()}if(n&2){let t=O();x(18),le(t.ipInfo.ip),x(8),Ne(" ",t.ipInfo.type||"Unknown"," "),x(6),le(t.ipInfo.continent_name||"Unknown"),x(5),le(t.ipInfo.country_name||"Unknown"),x(13),le(t.ipInfo.region_name||"Unknown"),x(5),le(t.ipInfo.city||"Unknown"),x(5),le(t.ipInfo.zip||"Unknown"),x(5),le(t.ipInfo.latitude||"Unknown"),x(5),le(t.ipInfo.longitude||"Unknown"),x(11),le((t.ipInfo.connection==null?null:t.ipInfo.connection.isp)||"Unknown"),x(5),le((t.ipInfo.connection==null?null:t.ipInfo.connection.organization)||"Unknown"),x(5),le((t.ipInfo.connection==null?null:t.ipInfo.connection.asn)||"Unknown"),x(2),M("disabled",t.isLoading),x(),M("ngIf",!t.isLoading),x(),M("ngIf",t.isLoading),x(),Ne(" ",t.isLoading?"Refreshing...":"Refresh IP Info"," ")}}var Ru=class n{constructor(e){this.locationService=e}ipInfo=null;isLoading=!1;error=null;ngOnInit(){this.refreshIpInfo()}refreshIpInfo(){this.isLoading=!0,this.error=null,this.locationService.getLocation().subscribe({next:e=>{this.ipInfo=e,this.isLoading=!1},error:e=>{this.error="Failed to load IP information. Please try again.",this.isLoading=!1,console.error("IP lookup error:",e)}})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("IP address copied to clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)})}static \u0275fac=function(t){return new(t||n)($(ku))};static \u0275cmp=Ie({type:n,selectors:[["app-ip-lookup"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2","sm:mb-4"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","items-center","space-x-3","sm:space-x-4","mb-4","sm:mb-6"],[1,"w-10","h-10","sm:w-12","sm:h-12","bg-primary-100","dark:bg-primary-900","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","sm:gap-6"],[1,"space-y-3","sm:space-y-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"flex","items-center","space-x-2"],[1,"px-2","sm:px-3","py-1.5","sm:py-2","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-200","rounded-lg","font-mono","text-sm","sm:text-lg"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","sm:px-3","py-1","rounded-full","text-xs","sm:text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],[1,"text-sm","sm:text-lg","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","sm:gap-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","mr-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center"],[1,"btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-1.5 sm:mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-1.5 sm:mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1.5","sm:mr-2","animate-spin"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),E(4," IP Address Lookup "),g(),f(5,"p",4),E(6," Get detailed information about your current IP address and location "),g()(),K(7,gP,5,0,"div",5)(8,vP,9,1,"div",6)(9,wP,97,16,"div",7),g()()),t&2&&(x(7),M("ngIf",r.isLoading),x(),M("ngIf",r.error),x(),M("ngIf",r.ipInfo&&!r.isLoading))},dependencies:[Ce,$e,Fo],encapsulation:2})};var kb=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)($(Vi),$(hr))};static \u0275dir=Xe({type:n})}return n})(),EP=(()=>{class n extends kb{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275dir=Xe({type:n,features:[mn]})}return n})(),bg=new we("");var IP={provide:bg,useExisting:Wr(()=>Tt),multi:!0};function bP(){let n=pr()?pr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TP=new we(""),Tt=(()=>{class n extends kb{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!bP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)($(Vi),$(hr),$(TP,8))};static \u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&F("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[qn([IP]),mn]})}return n})();function Tg(n){return n==null||Sg(n)===0}function Sg(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Oa=new we(""),$u=new we(""),SP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pn=class{static min(e){return CP(e)}static max(e){return AP(e)}static required(e){return Rb(e)}static requiredTrue(e){return xP(e)}static email(e){return kP(e)}static minLength(e){return RP(e)}static maxLength(e){return DP(e)}static pattern(e){return PP(e)}static nullValidator(e){return Pu()}static compose(e){return Vb(e)}static composeAsync(e){return Lb(e)}};function CP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function AP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Rb(n){return Tg(n.value)?{required:!0}:null}function xP(n){return n.value===!0?null:{required:!0}}function kP(n){return Tg(n.value)||SP.test(n.value)?null:{email:!0}}function RP(n){return e=>{let t=e.value?.length??Sg(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function DP(n){return e=>{let t=e.value?.length??Sg(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function PP(n){if(!n)return Pu;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Tg(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Pu(n){return null}function Db(n){return n!=null}function Pb(n){return uc(n)?xe(n):n}function Mb(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function Nb(n,e){return e.map(t=>t(n))}function MP(n){return!n.validate}function Ob(n){return n.map(e=>MP(e)?e:t=>e.validate(t))}function Vb(n){if(!n)return null;let e=n.filter(Db);return e.length==0?null:function(t){return Mb(Nb(t,e))}}function Cg(n){return n!=null?Vb(Ob(n)):null}function Lb(n){if(!n)return null;let e=n.filter(Db);return e.length==0?null:function(t){let r=Nb(t,e).map(Pb);return U0(r).pipe(ae(Mb))}}function Ag(n){return n!=null?Lb(Ob(n)):null}function Eb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Fb(n){return n._rawValidators}function Ub(n){return n._rawAsyncValidators}function wg(n){return n?Array.isArray(n)?n:[n]:[]}function Mu(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ib(n,e){let t=wg(e);return wg(n).forEach(i=>{Mu(t,i)||t.push(i)}),t}function bb(n,e){return wg(e).filter(t=>!Mu(n,t))}var Nu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ag(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},rr=class extends Nu{name;get formDirective(){return null}get path(){return null}},Si=class extends Nu{_parent=null;name=null;valueAccessor=null},Ou=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},NP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oF=me(B({},NP),{"[class.ng-submitted]":"isSubmitted"}),Wt=(()=>{class n extends Ou{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(Si,2))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[mn]})}return n})(),Kt=(()=>{class n extends Ou{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(rr,10))};static \u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[mn]})}return n})();var ka="VALID",Du="INVALID",Ms="PENDING",Ra="DISABLED",Ur=class{},Vu=class extends Ur{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pa=class extends Ur{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ma=class extends Ur{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ns=class extends Ur{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Lu=class extends Ur{source;constructor(e){super(),this.source=e}},Fu=class extends Ur{source;constructor(e){super(),this.source=e}};function xg(n){return(qu(n)?n.validators:n)||null}function OP(n){return Array.isArray(n)?Cg(n):n||null}function kg(n,e){return(qu(e)?e.asyncValidators:n)||null}function VP(n){return Array.isArray(n)?Ag(n):n||null}function qu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function jb(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Pe(1e3,"");if(!r[t])throw new Pe(1001,"")}function Bb(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Pe(1002,"")})}var Os=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(e){tn(()=>this.statusReactive.set(e))}_status=Li(()=>this.statusReactive());statusReactive=Un(void 0);get valid(){return this.status===ka}get invalid(){return this.status===Du}get pending(){return this.status==Ms}get disabled(){return this.status===Ra}get enabled(){return this.status!==Ra}errors;get pristine(){return tn(this.pristineReactive)}set pristine(e){tn(()=>this.pristineReactive.set(e))}_pristine=Li(()=>this.pristineReactive());pristineReactive=Un(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(e){tn(()=>this.touchedReactive.set(e))}_touched=Li(()=>this.touchedReactive());touchedReactive=Un(!1);get untouched(){return!this.touched}_events=new Jt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ib(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ib(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bb(e,this._rawAsyncValidators))}hasValidator(e){return Mu(this._rawValidators,e)}hasAsyncValidator(e){return Mu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ma(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ma(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pa(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pa(!0,r))}markAsPending(e={}){this.status=Ms;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ns(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ra,this.errors=null,this._forEachChild(i=>{i.disable(me(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vu(this.value,r)),this._events.next(new Ns(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ka,this._forEachChild(r=>{r.enable(me(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ka||this.status===Ms)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vu(this.value,t)),this._events.next(new Ns(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ra:ka}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ms,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Pb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ns(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?Ra:this.errors?Du:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ms)?Ms:this._anyControlsHaveStatus(Du)?Du:ka}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pa(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ma(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=VP(this._rawAsyncValidators)}},Vs=class extends Os{constructor(e,t,r){super(xg(t),kg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bb(this,!0,e),Object.keys(e).forEach(r=>{jb(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Eg=class extends Vs{};var Va=new we("",{providedIn:"root",factory:()=>zu}),zu="always";function $b(n,e){return[...e.path,n]}function Uu(n,e,t=zu){Rg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FP(n,e),jP(n,e),UP(n,e),LP(n,e)}function Tb(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ju(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LP(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Rg(n,e){let t=Fb(n);e.validator!==null?n.setValidators(Eb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ub(n);e.asyncValidator!==null?n.setAsyncValidators(Eb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ju(e._rawValidators,i),ju(e._rawAsyncValidators,i)}function Bu(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Fb(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Ub(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return ju(e._rawValidators,r),ju(e._rawAsyncValidators,r),t}function FP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&qb(n,e)})}function UP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&qb(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function qb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jP(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function zb(n,e){n==null,Rg(n,e)}function BP(n,e){return Bu(n,e)}function Hb(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $P(n){return Object.getPrototypeOf(n.constructor)===EP}function Gb(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Wb(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Tt?t=s:$P(s)?r=s:i=s}),i||r||t||null}function qP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var zP={provide:rr,useExisting:Wr(()=>Ci)},Da=Promise.resolve(),Ci=(()=>{class n extends rr{callSetDisabledState;get submitted(){return tn(this.submittedReactive)}_submitted=Li(()=>this.submittedReactive());submittedReactive=Un(!1);_directives=new Set;form;ngSubmit=new Ve;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Vs({},Cg(t),Ag(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Da.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Uu(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Da.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Da.then(()=>{let r=this._findContainer(t.path),i=new Vs({});zb(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Da.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Da.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Gb(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Lu(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Fu(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)($(Oa,10),$($u,10),$(Va,8))};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qn([zP]),mn]})}return n})();function Sb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Cb(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Na=class extends Os{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(xg(t),kg(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Cb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Sb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Sb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Cb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HP=n=>n instanceof Na;var GP={provide:Si,useExisting:Wr(()=>Ai)},Ab=Promise.resolve(),Ai=(()=>{class n extends Si{_changeDetectorRef;callSetDisabledState;control=new Na;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Wb(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Hb(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Uu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Ab.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Yr(r);Ab.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$b(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)($(rr,9),$(Oa,10),$($u,10),$(bg,10),$(Fi,8),$(Va,8))};static \u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[qn([GP]),mn,Bt]})}return n})();var Qt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Kb=new we("");var WP={provide:rr,useExisting:Wr(()=>xi)},xi=(()=>{class n extends rr{callSetDisabledState;get submitted(){return tn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Li(()=>this._submittedReactive());_submittedReactive=Un(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ve;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Uu(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Tb(t.control||null,t,!1),qP(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Gb(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Lu(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Fu(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Tb(r||null,t),HP(i)&&(Uu(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);zb(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&BP(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rg(this.form,this),this._oldForm&&Bu(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)($(Oa,10),$($u,10),$(Va,8))};static \u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&F("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qn([WP]),mn,Bt]})}return n})();var KP={provide:Si,useExisting:Wr(()=>ki)},ki=(()=>{class n extends Si{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Wb(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Hb(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return $b(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)($(rr,13),$(Oa,10),$($u,10),$(bg,10),$(Kb,8))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[qn([KP]),mn,Bt]})}return n})();var QP=(()=>{class n{_validator=Pu;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xe({type:n,features:[Bt]})}return n})();var YP={provide:Oa,useExisting:Wr(()=>La),multi:!0};var La=(()=>{class n extends QP{required;inputName="required";normalizeInput=Yr;createValidator=t=>Rb;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Oi(n)))(i||n)}})();static \u0275dir=Xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&dc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[qn([YP]),mn]})}return n})();var Qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=fr({type:n});static \u0275inj=ur({})}return n})(),Ig=class extends Os{constructor(e,t,r){super(xg(t),kg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Bb(this,!1,e),e.forEach((r,i)=>{jb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function xb(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ls=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return xb(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Vs(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Eg(i,r)}control(t,r,i){let s={};return this.useNonNullable?(xb(r)?s=r:(s.validators=r,s.asyncValidators=i),new Na(t,me(B({},s),{nonNullable:!0}))):new Na(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new Ig(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Na)return t;if(t instanceof Os)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Va,useValue:t.callSetDisabledState??zu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=fr({type:n});static \u0275inj=ur({imports:[Qb]})}return n})(),Us=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kb,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Va,useValue:t.callSetDisabledState??zu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=fr({type:n});static \u0275inj=ur({imports:[Qb]})}return n})();function JP(n,e){if(n&1&&(f(0,"span",26),E(1),g()),n&2){let t=O(3);x(),hc(" \u2022 Currently shared with ",t.getSharedCount(t.list)," user",t.getSharedCount(t.list)>1?"s":""," ")}}function XP(n,e){if(n&1){let t=he();f(0,"form",9),F("ngSubmit",function(){z(t);let i=O(2);return H(i.saveEditList())}),f(1,"div")(2,"label",10),E(3," Title * "),g(),f(4,"input",11),$n("ngModelChange",function(i){z(t);let s=O(2);return Bn(s.editListTitle,i)||(s.editListTitle=i),H(i)}),g()(),f(5,"div")(6,"label",12),E(7," Description (optional) "),g(),f(8,"textarea",13),$n("ngModelChange",function(i){z(t);let s=O(2);return Bn(s.editListDescription,i)||(s.editListDescription=i),H(i)}),g()(),f(9,"div",14)(10,"div",15)(11,"div")(12,"h4",16),E(13,"Sharing"),g(),f(14,"p",17),E(15," Share this list with others "),K(16,JP,2,2,"span",18),g()(),f(17,"button",19),F("click",function(){z(t);let i=O(2);return H(i.switchToShare())}),Y(),f(18,"svg",20),U(19,"path",21),g(),ne(),f(20,"span"),E(21,"Share"),g()()()(),f(22,"div",22)(23,"button",23),F("click",function(){z(t);let i=O(2);return H(i.onClose())}),E(24,"Cancel"),g(),f(25,"button",24),Y(),f(26,"svg",20),U(27,"path",25),g(),ne(),f(28,"span"),E(29,"Save Changes"),g()()()()}if(n&2){let t=O(2);x(4),jn("ngModel",t.editListTitle),x(4),jn("ngModel",t.editListDescription),x(8),M("ngIf",t.getSharedCount(t.list)>0),x(9),M("disabled",!t.editListTitle.trim())}}function ZP(n,e){if(n&1){let t=he();f(0,"form",9),F("ngSubmit",function(){z(t);let i=O(2);return H(i.confirmShare())}),f(1,"div")(2,"label",27),E(3," Email Address "),g(),f(4,"input",28),$n("ngModelChange",function(i){z(t);let s=O(2);return Bn(s.shareEmail,i)||(s.shareEmail=i),H(i)}),g()(),f(5,"div",22)(6,"button",23),F("click",function(){z(t);let i=O(2);return H(i.switchToEdit())}),E(7,"Back"),g(),f(8,"button",24),Y(),f(9,"svg",20),U(10,"path",21),g(),ne(),f(11,"span"),E(12,"Share"),g()()()()}if(n&2){let t=O(2);x(4),jn("ngModel",t.shareEmail),x(4),M("disabled",!t.shareEmail.trim())}}function e2(n,e){if(n&1){let t=he();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),E(4),g(),f(5,"button",5),F("click",function(){z(t);let i=O();return H(i.onClose())}),Y(),f(6,"svg",6),U(7,"path",7),g()()(),K(8,XP,30,4,"form",8)(9,ZP,13,2,"form",8),g()()}if(n&2){let t=O();x(4),le(t.mode==="edit"?"Edit List":"Share List"),x(4),M("ngIf",t.mode==="edit"),x(),M("ngIf",t.mode==="share")}}var Bs=class n{open=!1;list=null;mode="edit";save=new Ve;share=new Ve;close=new Ve;editListTitle="";editListDescription="";shareEmail="";ngOnChanges(){this.list&&(this.editListTitle=this.list.title,this.editListDescription=this.list.description||"")}saveEditList(){this.editListTitle.trim()&&this.save.emit({title:this.editListTitle.trim(),description:this.editListDescription.trim()})}confirmShare(){this.shareEmail.trim()&&this.share.emit(this.shareEmail.trim())}onClose(){this.close.emit()}switchToShare(){this.mode="share"}switchToEdit(){this.mode="edit"}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ie({type:n,selectors:[["app-list-edit-share-modal"]],inputs:{open:"open",list:"list",mode:"mode"},outputs:{save:"save",share:"share",close:"close"},features:[Bt],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","editListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","editListTitle","name","editListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","editListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","editListDescription","name","editListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["class","text-blue-600 dark:text-blue-400",4,"ngIf"],["type","button",1,"btn-secondary","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-blue-600","dark:text-blue-400"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","email","id","shareEmail","name","shareEmail","required","","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&K(0,e2,10,3,"div",0),t&2&&M("ngIf",r.open)},dependencies:[Ce,$e,Fs,Qt,Tt,Wt,Kt,La,Ai,Ci],encapsulation:2})};var jr=class n{constructor(e,t){this.firestore=e;this.authService=t;this.listsCollection=Fr(this.firestore,"todoLists")}listsCollection;getLists(){return this.authService.user$.pipe(De(e=>{if(!e)return J([]);let t=Rn(this.listsCollection,Pn("owner","==",e.uid),_g("updatedAt","desc")),r=Rn(this.listsCollection,Pn("sharedWith","array-contains",e.email),_g("updatedAt","desc"));return xe(Promise.all([Ps(t),Ps(r)])).pipe(ae(([i,s])=>{let o=i.docs.map(p=>me(B({},p.data()),{id:p.id})),c=s.docs.map(p=>me(B({},p.data()),{id:p.id}));return[...o,...c].filter((p,v,_)=>v===_.findIndex(R=>R.id===p.id)).sort((p,v)=>new Date(v.updatedAt).getTime()-new Date(p.updatedAt).getTime())}))}))}createList(e,t){return this.authService.user$.pipe(Je(1),De(r=>{if(!r)return J(Promise.reject("User not logged in"));let i=new Date,s={title:e,owner:r.uid,sharedWith:[],createdAt:i,updatedAt:i,isPublic:!1};return t&&t.trim()&&(s.description=t.trim()),console.log("Creating list with data:",s),xe(Ds(this.listsCollection,s))}))}updateList(e){if(!e.id)return Promise.reject("List ID is missing");let t=yt(this.firestore,`todoLists/${e.id}`),s=e,{id:r}=s,i=nc(s,["id"]);return i.updatedAt=new Date,Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),console.log("Updating list with data:",i),Dn(t,i)}deleteList(e){let t=yt(this.firestore,`todoLists/${e}`);return Cu(t)}shareList(e,t){return w(this,null,function*(){console.log("TodoListService: Sharing list",e,"with email:",t);let r=yt(this.firestore,`todoLists/${e}`);try{let i=yield Au(r);if(!i.exists())throw new Error("List not found");let s=i.data();if(console.log("TodoListService: Current list data:",s),s.sharedWith&&s.sharedWith.includes(t))throw console.log("TodoListService: Email already shared"),new Error("List is already shared with this email");let o=[...s.sharedWith||[],t];console.log("TodoListService: Updated sharedWith array:",o);let c={sharedWith:o,updatedAt:new Date};console.log("TodoListService: Updating list with data:",c),yield Dn(r,c),console.log("TodoListService: List shared successfully")}catch(i){throw console.error("TodoListService: Error sharing list:",i),i}})}unshareList(e,t){return w(this,null,function*(){let r=yt(this.firestore,`todoLists/${e}`),i=yield Au(r);if(!i.exists())throw new Error("List not found");let o=(i.data().sharedWith||[]).filter(c=>c!==t);yield Dn(r,{sharedWith:o,updatedAt:new Date})})}hasAccess(e){return w(this,null,function*(){return ic(this.authService.user$.pipe(Je(1),De(t=>t?xe(Au(yt(this.firestore,`todoLists/${e}`))).pipe(ae(r=>{if(!r.exists())return!1;let i=r.data();return i.owner===t.uid||(i.sharedWith||[]).includes(t.email||"")||i.isPublic||!1})):J(!1))))})}static \u0275fac=function(t){return new(t||n)(te(fn),te(Fe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hu=class n{constructor(e,t){this.authService=e;this.todoListService=t;this.todosCollection=Fr(this.firestore,"todos")}firestore=Q(fn);todosCollection;getTodosForList(e){return this.authService.user$.pipe(De(t=>{if(console.log("TodoService: Current user:",t),!t)return console.log("TodoService: No authenticated user"),J([]);console.log("TodoService: Creating query for todos in list:",e);let r=Rn(this.todosCollection,Pn("listId","==",e));return console.log("TodoService: Executing todos query"),xa(r,{idField:"id"}).pipe(ae(i=>i),Xt(i=>(console.error("TodoService: Error loading todos:",i),J([]))))}))}addTodo(e,t){return this.authService.user$.pipe(Je(1),De(r=>r?(console.log("Adding todo for user:",r.uid,"to list:",e),xe(Ps(Rn(this.todosCollection,Pn("listId","==",e)))).pipe(De(i=>{let s=i.size,o=new Date,c={title:t,completed:!1,listId:e,position:s,createdBy:r.uid,createdAt:o,updatedAt:o};return console.log("Creating todo with data:",c),xe(Ds(this.todosCollection,c))}))):(console.error("User not logged in"),J(Promise.reject("User not logged in")))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=yt(this.firestore,`todos/${e.id}`),s=e,{id:r}=s,i=nc(s,["id"]);return i.updatedAt=new Date,Dn(t,i)}deleteTodo(e){let t=yt(this.firestore,`todos/${e}`);return Cu(t)}updateTodoPosition(e){let t=yg(this.firestore);return e.forEach((r,i)=>{if(r.id){let s=yt(this.firestore,`todos/${r.id}`);t.update(s,{position:i,updatedAt:new Date})}}),t.commit()}deleteTodosInList(e){return xe(Ps(Rn(this.todosCollection,Pn("listId","==",e)))).pipe(De(t=>{let r=yg(this.firestore);return t.docs.forEach(i=>{r.delete(i.ref)}),xe(r.commit())})).toPromise()}static \u0275fac=function(t){return new(t||n)(te(Fe),te(jr))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function n2(n,e){n&1&&(f(0,"div",20)(1,"div",21),U(2,"div",22),f(3,"span",9),E(4,"Loading todo list..."),g()()())}function r2(n,e){if(n&1&&(f(0,"div",23)(1,"div",24),Y(),f(2,"svg",25),U(3,"path",26),g(),ne(),f(4,"div")(5,"h3",27),E(6,"Error"),g(),f(7,"p",28),E(8),g()()()()),n&2){let t=O();x(8),le(t.error)}}function i2(n,e){n&1&&(Y(),f(0,"svg",48),U(1,"path",49),g())}function s2(n,e){n&1&&(Y(),f(0,"svg",50),U(1,"path",51),g())}function o2(n,e){n&1&&(f(0,"div",52),Y(),f(1,"svg",53),U(2,"path",54),g(),ne(),f(3,"h3",55),E(4,"No todos yet"),g(),f(5,"p",56),E(6,"Add your first todo item above to get started."),g()())}function a2(n,e){if(n&1){let t=he();f(0,"div",59)(1,"input",60),F("change",function(){let i=z(t).$implicit,s=O(3);return H(s.toggleTodo(i))}),g(),f(2,"div",3)(3,"input",61),F("blur",function(i){let s=z(t).$implicit,o=O(3);return H(o.updateTodoText(s,i))}),g()(),f(4,"button",62),F("click",function(){let i=z(t).$implicit,s=O(3);return H(s.deleteTodo(i))}),Y(),f(5,"svg",12),U(6,"path",63),g()()()}if(n&2){let t=e.$implicit;x(),M("checked",t.completed),x(2),fo("line-through",t.completed)("text-gray-500",t.completed),M("value",t.title)}}function c2(n,e){if(n&1&&(f(0,"div",57),K(1,a2,7,6,"div",58),g()),n&2){let t=O(2);x(),M("ngForOf",t.todos)("ngForTrackBy",t.trackByTodo)}}function l2(n,e){if(n&1){let t=he();f(0,"div",29)(1,"div",30)(2,"form",31),F("ngSubmit",function(){z(t);let i=O();return H(i.addTodo())}),f(3,"input",32),$n("ngModelChange",function(i){z(t);let s=O();return Bn(s.newTodoText,i)||(s.newTodoText=i),H(i)}),g(),f(4,"button",33),K(5,i2,2,0,"svg",34)(6,s2,2,0,"svg",35),f(7,"span"),E(8),g()()()(),f(9,"div",30)(10,"div",36)(11,"h2",37),E(12,"Todo Items"),g(),f(13,"div",38)(14,"span"),E(15),g(),f(16,"div",39),U(17,"div",40),g()()(),K(18,o2,7,0,"div",41)(19,c2,2,2,"div",42),g(),f(20,"div",30)(21,"h3",43),E(22,"List Information"),g(),f(23,"div",44)(24,"div",45)(25,"span",46),E(26,"Created:"),g(),f(27,"span",47),E(28),ge(29,"date"),g()(),f(30,"div",45)(31,"span",46),E(32,"Last Updated:"),g(),f(33,"span",47),E(34),ge(35,"date"),g()(),f(36,"div",45)(37,"span",46),E(38,"Owner:"),g(),f(39,"span",47),E(40),g()(),f(41,"div",45)(42,"span",46),E(43,"Shared With:"),g(),f(44,"span",47),E(45),g()()()()()}if(n&2){let t=O();x(3),jn("ngModel",t.newTodoText),M("disabled",t.isAdding),x(),M("disabled",!t.newTodoText.trim()||t.isAdding),x(),M("ngIf",!t.isAdding),x(),M("ngIf",t.isAdding),x(2),le(t.isAdding?"Adding...":"Add"),x(7),hc("",t.completedCount," of ",t.todos.length||0," completed"),x(2),lv("width",t.completionPercentage,"%"),x(),M("ngIf",!t.todos.length),x(),M("ngIf",t.todos.length>0),x(9),le(Qr(29,16,t.getDateFromTimestamp(t.todoList.createdAt),"medium")),x(6),le(Qr(35,19,t.getDateFromTimestamp(t.todoList.updatedAt),"medium")),x(6),le(t.ownerName||"Loading..."),x(5),Ne("",t.todoList.sharedWith.length||0," users")}}var Gu=class n{constructor(e,t,r,i,s){this.route=e;this.router=t;this.todoListService=r;this.todoService=i;this.authService=s}todoList=null;todos=[];isLoading=!0;error=null;newTodoText="";isAdding=!1;showEditShareModal=!1;modalMode="edit";ownerName="";ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isLoading=!0,this.error=null,console.log("Loading todos for list ID:",e),this.todoListService.authService.user$.pipe(Je(1)).subscribe(t=>{if(console.log("Current user when loading todos:",t),!t){this.error="Please log in to view todos.",this.isLoading=!1;return}this.todoListService.getLists().subscribe({next:r=>{if(console.log("All lists loaded:",r),this.todoList=r.find(i=>i.id===e)||null,!this.todoList){this.error="Todo list not found or you do not have access to it.",this.isLoading=!1;return}console.log("Found todo list:",this.todoList),this.getOwnerName(this.todoList.owner),this.todoListService.hasAccess(e).then(i=>{if(console.log("User has access to list:",i),!i){this.error="You do not have permission to view this list.",this.isLoading=!1;return}this.todoService.getTodosForList(e).subscribe({next:s=>{console.log("Todos loaded successfully:",s),this.todos=s,this.isLoading=!1},error:s=>{console.error("Error loading todos:",s),console.error("Error details:",{code:s.code,message:s.message,details:s.details});let o="Failed to load todos. ";s.code==="permission-denied"?o+="You may not have permission to view todos in this list.":s.code==="unauthenticated"?o+="Please log in to view todos.":o+="Please try again later.",this.error=o,this.isLoading=!1}})}).catch(i=>{console.error("Error checking access:",i),this.error="Failed to verify access to this list.",this.isLoading=!1})},error:r=>{console.error("Error loading todo list:",r),this.error="Failed to load todo list.",this.isLoading=!1}})})):(this.error="No list ID provided.",this.isLoading=!1)}get completedCount(){return this.todos.filter(e=>e.completed).length}get completionPercentage(){return this.todos.length?Math.round(this.completedCount/this.todos.length*100):0}trackByTodo(e,t){return t.id}addTodo(){!this.newTodoText.trim()||!this.todoList||(this.isAdding=!0,this.todoService.addTodo(this.todoList.id,this.newTodoText.trim()).subscribe({next:()=>{this.newTodoText="",this.isAdding=!1},error:()=>{this.error="Failed to add todo.",this.isAdding=!1}}))}toggleTodo(e){e.id&&this.todoService.updateTodo(me(B({},e),{completed:!e.completed})).catch(()=>{this.error="Failed to update todo."})}updateTodoText(e,t){let r=t.target.value.trim();!e.id||!r||r===e.title||this.todoService.updateTodo(me(B({},e),{title:r})).catch(()=>{this.error="Failed to update todo text."})}deleteTodo(e){e.id&&this.todoService.deleteTodo(e.id).catch(()=>{this.error="Failed to delete todo."})}goBack(){this.router.navigate(["/lists"])}editList(){this.modalMode="edit",this.showEditShareModal=!0}shareList(){this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1}handleSaveEdit({title:e,description:t}){if(!this.todoList)return;let r=me(B({},this.todoList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.todoList=r,this.closeModal()})}handleShare(e){this.todoList&&this.todoListService.shareList(this.todoList.id,e).then(()=>{this.closeModal()})}copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard:",e)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getOwnerName(e){this.authService.user$.pipe(Je(1)).subscribe(t=>{if(t&&t.uid===e){this.ownerName=t.displayName||t.email||"Unknown User";return}this.ownerName="Unknown User"})}static \u0275fac=function(t){return new(t||n)($(bt),$(Oe),$(jr),$(Hu),$(Fe))};static \u0275cmp=Ie({type:n,selectors:[["app-todo"]],decls:27,vars:8,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-4xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-2","sm:space-x-4","mb-1","sm:mb-2"],[1,"p-1.5","sm:p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","mt-3","sm:mt-0"],[1,"btn-secondary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"btn-primary","text-sm","flex","items-center","space-x-1.5","sm:space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["class","card text-center",4,"ngIf"],["class","card border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20",4,"ngIf"],["class","space-y-4 sm:space-y-6",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"card","border-red-200","dark:border-red-700","bg-red-50","dark:bg-red-900/20"],[1,"flex","items-center","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","font-medium","text-red-800","dark:text-red-200"],[1,"text-sm","text-red-600","dark:text-red-300"],[1,"space-y-4","sm:space-y-6"],[1,"card"],[1,"flex","space-x-2","sm:space-x-4",3,"ngSubmit"],["type","text","name","newTodoText","placeholder","Add a new todo item...",1,"input-field","flex-1",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary","flex","items-center","space-x-1.5","sm:space-x-2",3,"disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4","sm:mb-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","sm:space-x-4","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"w-16","sm:w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-1.5","sm:h-2"],[1,"bg-primary-600","h-1.5","sm:h-2","rounded-full","transition-all","duration-300"],["class","text-center py-6 sm:py-8",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4","text-xs","sm:text-sm"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-6","sm:py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"space-y-2","sm:space-y-3"],["class","flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","space-x-2","sm:space-x-3","p-2","sm:p-3","bg-gray-50","dark:bg-gray-700","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors","duration-200"],["type","checkbox",1,"w-4","h-4","sm:w-5","sm:h-5","text-primary-600","bg-gray-100","border-gray-300","rounded","focus:ring-primary-500","dark:focus:ring-primary-600","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"change","checked"],["type","text",1,"w-full","bg-transparent","border-none","focus:outline-none","focus:ring-0","text-sm","sm:text-base","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"blur","value"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),F("click",function(){return r.goBack()}),Y(),f(6,"svg",6),U(7,"path",7),g()(),ne(),f(8,"h1",8),E(9),g()(),f(10,"p",9),E(11),g()(),f(12,"div",10)(13,"button",11),F("click",function(){return r.editList()}),Y(),f(14,"svg",12),U(15,"path",13),g(),ne(),f(16,"span"),E(17,"Edit List"),g()(),f(18,"button",14),F("click",function(){return r.shareList()}),Y(),f(19,"svg",12),U(20,"path",15),g(),ne(),f(21,"span"),E(22,"Share"),g()()()(),K(23,n2,5,0,"div",16)(24,r2,9,1,"div",17)(25,l2,46,22,"div",18),f(26,"app-list-edit-share-modal",19),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),g()()()),t&2&&(x(9),le((r.todoList==null?null:r.todoList.title)||"Loading..."),x(2),le((r.todoList==null?null:r.todoList.description)||"No description"),x(12),M("ngIf",r.isLoading),x(),M("ngIf",r.error),x(),M("ngIf",r.todoList&&!r.isLoading),x(),M("open",r.showEditShareModal)("list",r.todoList)("mode",r.modalMode))},dependencies:[Ce,gn,$e,ji,Fs,Qt,Tt,Wt,Kt,Ai,Ci,Bs],encapsulation:2})};var Wu=class n{constructor(e,t){this.authService=e;this.router=t}login(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/lists"])}).catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)($(Fe),$(Oe))};static \u0275cmp=Ie({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h2"),E(2,"Sign in to Todo List"),g(),f(3,"p"),E(4,"Please sign in to access your personal todo list"),g(),f(5,"button",1),F("click",function(){return r.login()}),U(6,"img",2),E(7," Sign in with Google "),g()())},dependencies:[Ce],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem;max-width:400px;margin-left:auto;margin-right:auto;padding:2rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function u2(n,e){n&1&&(f(0,"div",12)(1,"div",13),U(2,"div",14),f(3,"span",15),E(4,"Loading your lists..."),g()()())}function d2(n,e){if(n&1){let t=he();f(0,"div",12)(1,"div",16),Y(),f(2,"svg",17),U(3,"path",18),g(),ne(),f(4,"h3",19),E(5,"No lists yet"),g(),f(6,"p",4),E(7,"Get started by creating your first todo list."),g(),f(8,"button",20),F("click",function(){z(t);let i=O();return H(i.openCreateModal())}),Y(),f(9,"svg",6),U(10,"path",7),g(),ne(),f(11,"span"),E(12,"Create First List"),g()()()()}}function h2(n,e){if(n&1&&(f(0,"span",44),Y(),f(1,"svg",39),U(2,"path",31),g(),E(3),g()),n&2){let t=O().$implicit;x(3),Ne(" ",t.sharedWith.length," shared ")}}function f2(n,e){if(n&1){let t=he();f(0,"div",23),F("click",function(){let i=z(t).$implicit,s=O(2);return H(s.openList(i))}),f(1,"div",24)(2,"div",25)(3,"h3",26),E(4),g(),f(5,"p",27),E(6),g()(),f(7,"div",28)(8,"button",29),F("click",function(i){let s=z(t).$implicit;return O(2).openShareModal(s),H(i.stopPropagation())}),Y(),f(9,"svg",30),U(10,"path",31),g()(),ne(),f(11,"button",32),F("click",function(){let i=z(t).$implicit,s=O(2);return H(s.openEditModal(i))}),Y(),f(12,"svg",30),U(13,"path",33),g()(),ne(),f(14,"button",34),F("click",function(i){let s=z(t).$implicit,o=O(2);return H(o.deleteList(s,i))}),Y(),f(15,"svg",30),U(16,"path",35),g()()()(),ne(),f(17,"div",36)(18,"div",37)(19,"span",38),Y(),f(20,"svg",39),U(21,"path",18),g(),E(22," View items "),g(),ne(),f(23,"span",38),Y(),f(24,"svg",39),U(25,"path",40),g(),E(26),ge(27,"date"),g(),K(28,h2,4,1,"span",41),g(),f(29,"svg",42),U(30,"path",43),g()()()}if(n&2){let t=e.$implicit,r=O(2);x(4),Ne(" ",t.title," "),x(2),Ne(" ",t.description||"No description"," "),x(20),Ne(" ",Qr(27,4,r.getDateFromTimestamp(t.updatedAt),"short")," "),x(2),M("ngIf",t.sharedWith&&t.sharedWith.length>0)}}function p2(n,e){if(n&1&&(f(0,"div",21),K(1,f2,31,7,"div",22),g()),n&2){let t=O();x(),M("ngForOf",t.todoLists)}}function m2(n,e){if(n&1){let t=he();f(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),E(4,"Create New List"),g(),f(5,"button",49),F("click",function(){z(t);let i=O();return H(i.closeCreateModal())}),Y(),f(6,"svg",50),U(7,"path",51),g()()(),ne(),f(8,"form",52),F("ngSubmit",function(){z(t);let i=O();return H(i.createNewList())}),f(9,"div")(10,"label",53),E(11," Title * "),g(),f(12,"input",54),$n("ngModelChange",function(i){z(t);let s=O();return Bn(s.newListTitle,i)||(s.newListTitle=i),H(i)}),g()(),f(13,"div")(14,"label",55),E(15," Description (optional) "),g(),f(16,"textarea",56),$n("ngModelChange",function(i){z(t);let s=O();return Bn(s.newListDescription,i)||(s.newListDescription=i),H(i)}),g()(),f(17,"div",57)(18,"button",58),F("click",function(){z(t);let i=O();return H(i.closeCreateModal())}),E(19," Cancel "),g(),f(20,"button",59),Y(),f(21,"svg",6),U(22,"path",7),g(),ne(),f(23,"span"),E(24,"Create List"),g()()()()()()}if(n&2){let t=O();x(12),jn("ngModel",t.newListTitle),x(4),jn("ngModel",t.newListDescription),x(4),M("disabled",!t.newListTitle.trim())}}var Ku=class n{constructor(e,t,r){this.todoListService=e;this.authService=t;this.router=r}todoLists=[];isLoading=!1;newListTitle="";newListDescription="";sharingList=null;shareEmail="";showShareModal=!1;showCreateModal=!1;showEditModal=!1;editingList=null;editListTitle="";editListDescription="";showEditShareModal=!1;modalMode="edit";modalList=null;ngOnInit(){this.loadLists()}loadLists(){this.isLoading=!0,this.todoListService.getLists().subscribe({next:e=>{this.todoLists=e,this.isLoading=!1},error:e=>{console.error("Error loading lists:",e),this.isLoading=!1}})}openCreateModal(){this.newListTitle="",this.newListDescription="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1,this.newListTitle="",this.newListDescription=""}createNewList(){if(!this.newListTitle.trim())return;let e=this.newListTitle.trim(),t=this.newListDescription.trim()||void 0;this.authService.user$.pipe(Je(1)).subscribe(r=>{if(console.log("Current user:",r),!r){console.error("No authenticated user found"),alert("Please log in to create a list");return}}),this.todoListService.createList(e,t).subscribe({next:r=>{console.log("List created successfully:",r),this.todoLists.unshift(r),this.closeCreateModal()},error:r=>{console.error("Error creating list:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details});let i="Failed to create list. ";r.code==="permission-denied"?i+="You may not have permission to create lists. Please try logging out and back in.":r.code==="unauthenticated"?i+="Please log in to create lists.":i+="Please try again later.",alert(i)}})}openEditModal(e){this.modalList=e,this.modalMode="edit",this.showEditShareModal=!0}openShareModal(e){this.modalList=e,this.modalMode="share",this.showEditShareModal=!0}closeModal(){this.showEditShareModal=!1,this.modalList=null}handleSaveEdit({title:e,description:t}){if(!this.modalList)return;let r=me(B({},this.modalList),{title:e,description:t||void 0});this.todoListService.updateList(r).then(()=>{this.loadLists(),this.closeModal()})}handleShare(e){this.modalList&&this.todoListService.shareList(this.modalList.id,e).then(()=>{this.loadLists(),this.closeModal()})}openList(e){this.router.navigate(["/todo",e.id])}editList(e,t){t.stopPropagation(),this.openEditModal(e)}deleteList(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title}"?`)&&this.todoListService.deleteList(e.id).then(()=>{this.todoLists=this.todoLists.filter(r=>r.id!==e.id)}).catch(r=>{console.error("Error deleting list:",r)})}getDateFromTimestamp(e){return e?e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():typeof e=="number"?new Date(e):typeof e=="string"?new Date(e):null:null}getSharedCount(e){return!e||!e.sharedWith?0:e.sharedWith.length}static \u0275fac=function(t){return new(t||n)($(jr),$(Fe),$(Oe))};static \u0275cmp=Ie({type:n,selectors:[["app-lists"]],decls:18,vars:7,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-4","sm:mb-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","sm:mt-2","text-sm","text-gray-600","dark:text-gray-300"],[1,"btn-primary","mt-3","sm:mt-0","text-sm","flex","items-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","card text-center",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"save","share","close","open","list","mode"],[1,"card","text-center"],[1,"flex","items-center","justify-center","space-x-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-primary-600"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"py-8","sm:py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-10","w-10","sm:h-12","sm:w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"mt-3","sm:mt-4","text-base","sm:text-lg","font-medium","text-gray-900","dark:text-white"],[1,"btn-primary","mt-3","sm:mt-4","text-sm","flex","items-center","space-x-2",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3","sm:gap-4"],["class","card group cursor-pointer hover:shadow-lg transition-all duration-200",3,"click",4,"ngFor","ngForOf"],[1,"card","group","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"flex","items-start","justify-between","mb-3","sm:mb-4"],[1,"flex-1","min-w-0"],[1,"text-base","sm:text-lg","font-semibold","text-gray-900","dark:text-white","truncate","group-hover:text-primary-600","dark:group-hover:text-primary-400","transition-colors","duration-200"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"flex","items-center","space-x-1","sm:space-x-2","ml-3","sm:ml-4"],[1,"p-1","text-gray-400","hover:text-blue-600","dark:hover:text-blue-400","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"p-1","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-1","text-gray-400","hover:text-red-600","dark:hover:text-red-400","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","space-x-2","sm:space-x-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-center text-blue-600 dark:text-blue-400",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","sm:w-4","sm:h-4","text-gray-400","group-hover:text-gray-600","dark:group-hover:text-gray-200","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","items-center","text-blue-600","dark:text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],["for","newListTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","newListTitle","name","newListTitle","required","","placeholder","Enter list title",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","newListDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","newListDescription","name","newListDescription","rows","3","placeholder","Enter list description",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],["type","submit",1,"btn-primary","text-sm","flex","items-center","space-x-2",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),E(5,"Todo Lists"),g(),f(6,"p",4),E(7,"Create and manage your todo lists"),g()(),f(8,"button",5),F("click",function(){return r.openCreateModal()}),Y(),f(9,"svg",6),U(10,"path",7),g(),ne(),f(11,"span"),E(12,"New List"),g()()(),K(13,u2,5,0,"div",8)(14,d2,13,0,"div",8)(15,p2,2,1,"div",9),g(),K(16,m2,25,3,"div",10),f(17,"app-list-edit-share-modal",11),F("save",function(s){return r.handleSaveEdit(s)})("share",function(s){return r.handleShare(s)})("close",function(){return r.closeModal()}),g()()),t&2&&(x(13),M("ngIf",r.isLoading),x(),M("ngIf",!r.isLoading&&r.todoLists.length===0),x(),M("ngIf",!r.isLoading&&r.todoLists.length>0),x(),M("ngIf",r.showCreateModal),x(),M("open",r.showEditShareModal)("list",r.modalList)("mode",r.modalMode))},dependencies:[Ce,gn,$e,ji,Fs,Qt,Tt,Wt,Kt,La,Ai,Ci,Fo,Bs],encapsulation:2})};function g2(n,e){if(n&1&&(Zt(0),f(1,"div",14)(2,"div")(3,"label",15),E(4,"Display Name"),g(),f(5,"div",16),E(6),g()(),f(7,"div")(8,"label",15),E(9,"Email"),g(),f(10,"div",16),E(11),g()(),f(12,"div")(13,"label",15),E(14,"User ID"),g(),f(15,"div",17),E(16),g()(),f(17,"div")(18,"label",15),E(19,"Account Created"),g(),f(20,"div",16),E(21),ge(22,"date"),g()()(),en()),n&2){let t=e.ngIf;x(6),Ne(" ",(t==null?null:t.displayName)||"Not provided"," "),x(5),Ne(" ",(t==null?null:t.email)||"Not provided"," "),x(5),Ne(" ",(t==null?null:t.uid)||"Not available"," "),x(5),Ne(" ",!(t==null||t.metadata==null)&&t.metadata.creationTime?Qr(22,4,t.metadata.creationTime,"medium"):"Not available"," ")}}var Qu=class n{authService=Q(Fe);router=Q(Oe);user$=this.authService.user$;logout(){this.authService.signOut(),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ie({type:n,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-gray-900","py-6","sm:py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6","sm:mb-8"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","sm:text-base","text-gray-600","dark:text-gray-300","mt-2"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700"],[1,"p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],[4,"ngIf"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],[1,"btn-secondary","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"btn-outline","px-4","py-2","text-sm","sm:text-base",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","sm:gap-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-sm","sm:text-base","text-gray-900","dark:text-white","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","bg-gray-50","dark:bg-gray-700","px-3","py-2","rounded-md","font-mono","break-all"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),E(4,"Profile"),g(),f(5,"p",4),E(6,"Manage your account information"),g()(),f(7,"div",5)(8,"div",6)(9,"div",2)(10,"h2",7),E(11,"Account Information"),g(),K(12,g2,23,7,"ng-container",8),ge(13,"async"),g(),f(14,"div",9)(15,"h3",10),E(16,"Account Actions"),g(),f(17,"div",11)(18,"button",12),F("click",function(){return r.logout()}),E(19," Sign Out "),g(),f(20,"button",13),F("click",function(){return r.goBack()}),E(21," Back to Home "),g()()()()()()()),t&2&&(x(12),M("ngIf",be(13,1,r.user$)))},dependencies:[Ce,$e,It,ji],encapsulation:2})};var Br=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Je(1),ae(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(te(Fe),te(Oe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yu=class n{constructor(e){this.fb=e;this.shareForm=this.fb.group({email:["",[pn.required,pn.email]]})}family=null;close=new Ve;share=new Ve;shareForm;onShare(){this.shareForm.valid&&(this.share.emit(this.shareForm.value.email),this.shareForm.reset())}static \u0275fac=function(t){return new(t||n)($(Ls))};static \u0275cmp=Ie({type:n,selectors:[["app-family-share-modal"]],inputs:{family:"family"},outputs:{close:"close",share:"share"},decls:14,vars:3,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","you@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h2",2),E(3),g(),f(4,"form",3),F("ngSubmit",function(){return r.onShare()}),f(5,"div",4)(6,"label",5),E(7,"Email address"),g(),U(8,"input",6),g(),f(9,"div",7)(10,"button",8),F("click",function(){return r.close.emit()}),E(11," Cancel "),g(),f(12,"button",9),E(13," Share "),g()()()()()),t&2&&(x(3),Ne('Share "',r.family==null?null:r.family.name,'"'),x(),M("formGroup",r.shareForm),x(8),M("disabled",!r.shareForm.valid))},dependencies:[Ce,Us,Qt,Tt,Wt,Kt,xi,ki],encapsulation:2})};var Ju=class n{constructor(e){this.fb=e;this.createForm=this.fb.group({name:["",pn.required],description:[""]})}close=new Ve;create=new Ve;createForm;onCreate(){this.createForm.valid&&this.create.emit(this.createForm.value)}static \u0275fac=function(t){return new(t||n)($(Ls))};static \u0275cmp=Ie({type:n,selectors:[["app-create-family-modal"]],outputs:{close:"close",create:"create"},decls:18,vars:2,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","mb-4","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h2",2),E(3,"Create a New Family"),g(),f(4,"form",3),F("ngSubmit",function(){return r.onCreate()}),f(5,"div",4)(6,"label",5),E(7,"Family Name"),g(),U(8,"input",6),g(),f(9,"div",4)(10,"label",7),E(11,"Description"),g(),U(12,"textarea",8),g(),f(13,"div",9)(14,"button",10),F("click",function(){return r.close.emit()}),E(15," Cancel "),g(),f(16,"button",11),E(17," Create Family "),g()()()()()),t&2&&(x(4),M("formGroup",r.createForm),x(12),M("disabled",!r.createForm.valid))},dependencies:[Ce,Us,Qt,Tt,Wt,Kt,xi,ki],encapsulation:2})};var $s=class n{constructor(e,t){this.firestore=e;this.auth=t;this.familyCollection=Fr(this.firestore,"families"),this.memberCollection=Fr(this.firestore,"members"),this.familiesCollection=Fr(this.firestore,"families")}familyCollection;memberCollection;familiesCollection;addFamily(e){return w(this,null,function*(){let t=yield ic(this.auth.user$);if(!t)throw new Error("User not logged in");let r={name:e.name,description:e.description||"",owner:t.uid,sharedWith:[],createdAt:ab(),status:"approved"};yield Ds(this.familyCollection,r)})}updateFamily(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield Dn(r,t)})}removeSharedUser(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield Dn(r,{sharedWith:lb(t)})})}getFamilies(){return this.auth.user$.pipe(De(e=>{if(!e||!e.email)return J([]);let t=Rn(this.familyCollection,Pn("owner","==",e.uid)),r=Rn(this.familyCollection,Pn("sharedWith","array-contains",e.email)),i=xa(t,{idField:"id"}),s=xa(r,{idField:"id"});return Ni([i,s]).pipe(ae(([o,c])=>[...o,...c].filter((p,v,_)=>v===_.findIndex(R=>R.id===p.id)).sort((p,v)=>p.name.localeCompare(v.name))))}))}shareFamily(e,t){return w(this,null,function*(){let r=yt(this.firestore,"families",e);yield Dn(r,{sharedWith:cb(t)})})}getFamilyById(e){let t=yt(this.firestore,"families",e);return vb(t,{idField:"id"})}addMember(e){return w(this,null,function*(){})}static \u0275fac=function(t){return new(t||n)(te(fn),te(Fe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var v2=n=>["/family-tree",n];function _2(n,e){if(n&1){let t=he();f(0,"a",13)(1,"div")(2,"h3",14),E(3),g(),f(4,"p",15),E(5),g()(),f(6,"div")(7,"button",16),F("click",function(){let i=z(t).$implicit,s=O(3);return H(s.openShareModal(i))}),E(8,"Share "),g()()()}if(n&2){let t=e.$implicit;M("routerLink",uv(3,v2,t.id)),x(3),le(t.name),x(2),le(t.description)}}function y2(n,e){if(n&1&&(f(0,"div",11),K(1,_2,9,5,"a",12),g()),n&2){let t=O().ngIf;x(),M("ngForOf",t)}}function w2(n,e){n&1&&(f(0,"p",17),E(1,"You are not a part of any family yet. Create one to get started."),g())}function E2(n,e){if(n&1&&(f(0,"div"),K(1,y2,2,1,"div",10)(2,w2,2,0,"ng-template",null,1,Rt),g()),n&2){let t=e.ngIf,r=kt(3);x(),M("ngIf",t.length>0)("ngIfElse",r)}}function I2(n,e){n&1&&(f(0,"p",17),E(1,"Loading families..."),g())}function b2(n,e){if(n&1){let t=he();f(0,"app-create-family-modal",18),F("close",function(){z(t);let i=O();return H(i.closeCreateModal())})("create",function(i){z(t);let s=O();return H(s.handleCreateFamily(i))}),g()}}function T2(n,e){if(n&1){let t=he();f(0,"app-family-share-modal",19),F("close",function(){z(t);let i=O();return H(i.closeShareModal())})("share",function(i){z(t);let s=O();return H(s.handleShare(i))}),g()}if(n&2){let t=O();M("family",t.selectedFamily)}}var Xu=class n{constructor(e){this.familyTreeService=e;this.families$=this.familyTreeService.getFamilies()}families$;isShareModalOpen=!1;selectedFamily=null;isCreateModalOpen=!1;openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}handleCreateFamily(e){return w(this,null,function*(){yield this.familyTreeService.addFamily(e),this.closeCreateModal()})}openShareModal(e){this.selectedFamily=e,this.isShareModalOpen=!0}closeShareModal(){this.isShareModalOpen=!1,this.selectedFamily=null}handleShare(e){this.selectedFamily&&this.familyTreeService.shareFamily(this.selectedFamily.id,e),this.closeShareModal()}static \u0275fac=function(t){return new(t||n)($($s))};static \u0275cmp=Ie({type:n,selectors:[["app-family-tree"]],decls:13,vars:6,consts:[["loading",""],["noFamilies",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[3,"close","create",4,"ngIf"],[3,"family","close","share",4,"ngIf"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],["class","bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow","p-4","flex","justify-between","items-center","hover:bg-gray-50","dark:hover:bg-gray-700","cursor-pointer",3,"routerLink"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-sm","text-primary-600","dark:text-primary-400","hover:underline",3,"click"],[1,"text-gray-600","dark:text-gray-400"],[3,"close","create"],[3,"close","share","family"]],template:function(t,r){if(t&1){let i=he();f(0,"div",2)(1,"div",3)(2,"h1",4),E(3,"Family Trees"),g(),f(4,"button",5),F("click",function(){return z(i),H(r.openCreateModal())}),E(5," Create Family "),g()(),f(6,"div",6),K(7,E2,4,2,"div",7),ge(8,"async"),K(9,I2,2,0,"ng-template",null,0,Rt),g()(),K(11,b2,1,0,"app-create-family-modal",8)(12,T2,1,1,"app-family-share-modal",9)}if(t&2){let i=kt(10);x(7),M("ngIf",be(8,4,r.families$))("ngIfElse",i),x(4),M("ngIf",r.isCreateModalOpen),x(),M("ngIf",r.isShareModalOpen)}},dependencies:[Ce,gn,$e,It,Yu,Ju,$t],encapsulation:2})};function S2(n,e){if(n&1&&(f(0,"p",21),E(1),g()),n&2){let t=O(3).ngIf;x(),le(t.description)}}function C2(n,e){if(n&1&&(Zt(0),f(1,"h1",19),E(2),g(),K(3,S2,2,1,"p",20),en()),n&2){let t=O(2).ngIf;x(2),le(t.name),x(),M("ngIf",t.description)}}function A2(n,e){if(n&1){let t=he();Zt(0),f(1,"form",22),F("ngSubmit",function(){z(t);let i=O(3);return H(i.saveChanges())}),f(2,"div",23)(3,"label",24),E(4,"Family Name"),g(),U(5,"input",25),g(),f(6,"div")(7,"label",26),E(8,"Description"),g(),U(9,"textarea",27),g()(),en()}if(n&2){let t=O(3);x(),M("formGroup",t.editForm)}}function x2(n,e){if(n&1){let t=he();Zt(0),f(1,"button",28),F("click",function(){z(t);let i=O(3);return H(i.startEditing())}),E(2," Edit "),g(),en()}}function k2(n,e){if(n&1){let t=he();Zt(0),f(1,"div",29)(2,"button",30),E(3," Save "),g(),f(4,"button",31),F("click",function(){z(t);let i=O(3);return H(i.cancelEditing())}),E(5," Cancel "),g()(),en()}if(n&2){let t=O(3);x(2),M("disabled",!t.editForm.valid||!t.editForm.dirty)}}function R2(n,e){if(n&1&&(f(0,"span",34),E(1),g()),n&2){let t=e.$implicit;x(),Ne(" ",t," ")}}function D2(n,e){if(n&1&&(f(0,"div"),K(1,R2,2,1,"span",33),g()),n&2){let t=O(3).ngIf;x(),M("ngForOf",t.sharedWith)}}function P2(n,e){n&1&&(f(0,"p",35),E(1,"This family isn't shared with anyone."),g())}function M2(n,e){if(n&1&&(f(0,"div",32),K(1,D2,2,1,"div",8)(2,P2,2,0,"ng-template",null,2,Rt),g()),n&2){let t=kt(3),r=O(2).ngIf;x(),M("ngIf",r.sharedWith&&r.sharedWith.length>0)("ngIfElse",t)}}function N2(n,e){if(n&1){let t=he();f(0,"div",42)(1,"span",43),E(2),g(),f(3,"button",44),F("click",function(){let i=z(t).$implicit,s=O(5);return H(s.removeSharedUser(i))}),E(4," Remove "),g()()}if(n&2){let t=e.$implicit;x(2),le(t)}}function O2(n,e){if(n&1&&(f(0,"div"),K(1,N2,5,1,"div",41),g()),n&2){let t=O(3).ngIf;x(),M("ngForOf",t.sharedWith)}}function V2(n,e){if(n&1){let t=he();f(0,"div",36),K(1,O2,2,1,"div",11),f(2,"form",37),F("ngSubmit",function(){z(t);let i=O(3);return H(i.addSharedUser())}),f(3,"div",10)(4,"label",38),E(5,"Add user by email"),g(),U(6,"input",39),g(),f(7,"button",40),E(8," Add "),g()()()}if(n&2){let t=O(2).ngIf,r=O();x(),M("ngIf",t.sharedWith&&t.sharedWith.length>0),x(),M("formGroup",r.addShareUserForm),x(5),M("disabled",!r.addShareUserForm.valid)}}function L2(n,e){if(n&1&&(f(0,"div")(1,"div",9)(2,"div",10),K(3,C2,4,2,"ng-container",11)(4,A2,10,1,"ng-container",11),g(),f(5,"div",12),K(6,x2,3,0,"ng-container",11),ge(7,"async"),K(8,k2,6,1,"ng-container",11),g()(),f(9,"div",13)(10,"h2",14),E(11,"Shared With"),g(),K(12,M2,4,2,"div",15)(13,V2,9,3,"div",16),g(),f(14,"div",13)(15,"h2",17),E(16,"Family Members"),g(),f(17,"p",18),E(18,"Member list and tree visualization will be here."),g()()()),n&2){let t,r=O().ngIf,i=O();x(3),M("ngIf",!i.isEditing),x(),M("ngIf",i.isEditing),x(2),M("ngIf",!i.isEditing&&r.owner===((t=be(7,6,i.auth.user$))==null?null:t.uid)),x(2),M("ngIf",i.isEditing),x(4),M("ngIf",!i.isEditing),x(),M("ngIf",i.isEditing)}}function F2(n,e){n&1&&(f(0,"p",45),E(1,"Family not found."),g())}function U2(n,e){if(n&1&&(f(0,"div"),K(1,L2,19,8,"div",8)(2,F2,2,0,"ng-template",null,1,Rt),g()),n&2){let t=e.ngIf,r=kt(3);x(),M("ngIf",t)("ngIfElse",r)}}function j2(n,e){n&1&&(f(0,"p",45),E(1,"Loading family details..."),g())}var Zu=class n{constructor(e,t,r,i){this.route=e;this.familyTreeService=t;this.fb=r;this.auth=i;this.editForm=this.fb.group({name:["",pn.required],description:[""]}),this.addShareUserForm=this.fb.group({email:["",[pn.required,pn.email]]})}family$;familyId=null;isEditing=!1;editForm;addShareUserForm;currentFamily;ngOnInit(){this.family$=this.route.paramMap.pipe(De(e=>{let t=e.get("familyId");return this.familyId=t,t?this.familyTreeService.getFamilyById(t):J(void 0)}),Qe(e=>{this.currentFamily=e,e&&this.editForm.patchValue({name:e.name,description:e.description})}))}startEditing(){this.isEditing=!0}cancelEditing(){this.isEditing=!1,this.currentFamily&&this.editForm.patchValue({name:this.currentFamily.name,description:this.currentFamily.description})}saveChanges(){return w(this,null,function*(){this.editForm.valid&&this.familyId&&(yield this.familyTreeService.updateFamily(this.familyId,this.editForm.value),this.isEditing=!1)})}addSharedUser(){return w(this,null,function*(){if(this.addShareUserForm.valid&&this.familyId){let{email:e}=this.addShareUserForm.value;yield this.familyTreeService.shareFamily(this.familyId,e),this.addShareUserForm.reset()}})}removeSharedUser(e){return w(this,null,function*(){this.familyId&&(yield this.familyTreeService.removeSharedUser(this.familyId,e))})}static \u0275fac=function(t){return new(t||n)($(bt),$($s),$(Ls),$(Fe))};static \u0275cmp=Ie({type:n,selectors:[["app-family-detail"]],decls:10,vars:4,consts:[["loading",""],["notFound",""],["noSharedUsers",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],["routerLink","/family-tree",1,"inline-flex","items-center","text-sm","font-semibold","text-primary-600","hover:text-primary-800","dark:text-primary-400","dark:hover:text-primary-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","items-start","mb-8"],[1,"flex-grow"],[4,"ngIf"],[1,"ml-4","flex-shrink-0"],[1,"mt-8"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white","mb-4"],["class","space-y-2",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white"],[1,"mt-4","text-gray-500"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],["class","mt-2 text-lg text-gray-600 dark:text-gray-400",4,"ngIf"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-400"],["id","editFamilyForm",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","familyName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","familyName","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["for","familyDescription",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","familyDescription","formControlName","description","rows","3",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none",3,"click"],[1,"flex","space-x-2"],["type","submit","form","editFamilyForm",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none",3,"click"],[1,"space-y-2"],["class","inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-200 mr-2 mb-2",4,"ngFor","ngForOf"],[1,"inline-block","bg-gray-200","dark:bg-gray-700","rounded-full","px-3","py-1","text-sm","font-semibold","text-gray-700","dark:text-gray-200","mr-2","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],[1,"flex","items-end","space-x-2",3,"ngSubmit","formGroup"],["for","shareEmail",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","shareEmail","formControlName","email","placeholder","user@example.com",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm","text-gray-900","dark:text-white"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex items-center justify-between bg-gray-100 dark:bg-gray-700 p-2 rounded-md",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","bg-gray-100","dark:bg-gray-700","p-2","rounded-md"],[1,"text-sm","text-gray-900","dark:text-gray-200"],[1,"text-sm","text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","font-semibold",3,"click"],[1,"text-center","text-gray-500"]],template:function(t,r){if(t&1&&(f(0,"div",3)(1,"div",4)(2,"a",5),Y(),f(3,"svg",6),U(4,"path",7),g(),E(5," Back to Family List "),g()(),K(6,U2,4,2,"div",8),ge(7,"async"),K(8,j2,2,0,"ng-template",null,0,Rt),g()),t&2){let i=kt(9);x(6),M("ngIf",be(7,2,r.family$))("ngIfElse",i)}},dependencies:[Ce,gn,$e,It,Us,Qt,Tt,Wt,Kt,xi,ki,$t],encapsulation:2})};var Fa={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"},premierLeague:{apiKey:"37bddc9782msh83111e8c0e4211ap1438fejsnd95d2f8667ef",apiHost:"premier-league-standings1.p.rapidapi.com"}};var qs=class n{constructor(e){this.http=e}apiUrl="https://premier-league-standings1.p.rapidapi.com/";getStandings(){let e=new kv().set("X-RapidAPI-Key",Fa.premierLeague.apiKey).set("X-RapidAPI-Host",Fa.premierLeague.apiHost);return this.http.get(this.apiUrl,{headers:e})}static \u0275fac=function(t){return new(t||n)(te(Bi))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function $2(n,e){if(n&1&&(f(0,"tr",11)(1,"td",12),E(2),g(),f(3,"th",13),U(4,"img",14),E(5),g(),f(6,"td",12),E(7),g(),f(8,"td",12),E(9),g(),f(10,"td",12),E(11),g(),f(12,"td",12),E(13),g(),f(14,"td",15),E(15),g()()),n&2){let t=e.$implicit;x(2),le(t.stats.rank),x(2),M("src",t.team.logo,K0)("alt",t.team.name),x(),Ne(" ",t.team.name," "),x(2),le(t.stats.gamesPlayed),x(2),le(t.stats.wins),x(2),le(t.stats.ties),x(2),le(t.stats.losses),x(2),le(t.stats.points)}}function q2(n,e){if(n&1&&(f(0,"div")(1,"div",6)(2,"table",7)(3,"thead",8)(4,"tr")(5,"th",9),E(6,"Rank"),g(),f(7,"th",9),E(8,"Club"),g(),f(9,"th",9),E(10,"Played"),g(),f(11,"th",9),E(12,"Won"),g(),f(13,"th",9),E(14,"Drawn"),g(),f(15,"th",9),E(16,"Lost"),g(),f(17,"th",9),E(18,"Points"),g()()(),f(19,"tbody"),K(20,$2,16,9,"tr",10),g()()()()),n&2){let t=O().ngIf;x(20),M("ngForOf",t)}}function z2(n,e){n&1&&(f(0,"p"),E(1,"No standings data to display."),g())}function H2(n,e){if(n&1&&(f(0,"div"),K(1,q2,21,1,"div",5)(2,z2,2,0,"ng-template",null,1,Rt),g()),n&2){let t=e.ngIf,r=kt(3);x(),M("ngIf",t&&t.length>0)("ngIfElse",r)}}function G2(n,e){if(n&1&&(f(0,"div",17)(1,"p"),E(2,"Error loading standings. Please try again later."),g(),f(3,"pre"),E(4),ge(5,"json"),g()()),n&2){let t=O(2);x(4),le(be(5,1,t.error))}}function W2(n,e){n&1&&(f(0,"p"),E(1,"Loading standings..."),g())}function K2(n,e){if(n&1&&K(0,G2,6,3,"div",16)(1,W2,2,0,"ng-template",null,2,Rt),n&2){let t=kt(2),r=O();M("ngIf",r.error)("ngIfElse",t)}}var ed=class n{constructor(e){this.premierLeagueService=e}standings$;error;ngOnInit(){this.standings$=this.premierLeagueService.getStandings().pipe(Xt(e=>(this.error=e,console.error(e),J(null))))}static \u0275fac=function(t){return new(t||n)($(qs))};static \u0275cmp=Ie({type:n,selectors:[["app-premier-league"]],features:[qn([qs])],decls:7,vars:4,consts:[["loadingOrError",""],["noData",""],["loading",""],[1,"page-container"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-6"],[4,"ngIf","ngIfElse"],[1,"overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"px-6","py-4"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","dark:text-white","whitespace-nowrap","flex","items-center"],[1,"w-6","h-6","mr-2","rounded-full",3,"src","alt"],[1,"px-6","py-4","font-semibold"],["class","text-red-500",4,"ngIf","ngIfElse"],[1,"text-red-500"]],template:function(t,r){if(t&1&&(f(0,"div",3)(1,"h1",4),E(2,"Premier League Standings"),g(),K(3,H2,4,2,"div",5),ge(4,"async"),K(5,K2,3,2,"ng-template",null,0,Rt),g()),t&2){let i=kt(6);x(3),M("ngIf",be(4,2,r.standings$))("ngIfElse",i)}},dependencies:[Ce,gn,$e,It,bv,Dv],encapsulation:2})};var Jb=[{path:"",component:xu},{path:"ip-lookup",component:Ru},{path:"login",component:Wu},{path:"profile",component:Qu,canActivate:[Br]},{path:"lists",component:Ku,canActivate:[Br]},{path:"todo/:id",component:Gu,canActivate:[Br]},{path:"todo",redirectTo:"/lists",pathMatch:"full"},{path:"quotes",loadComponent:()=>import("./chunk-SK6DCOTM.js").then(n=>n.QuotesComponent)},{path:"family-tree",component:Xu,canActivate:[Br]},{path:"family-tree/:familyId",component:Zu,canActivate:[Br]},{path:"premier-league",component:ed}];var Xb={providers:[hv({eventCoalescing:!0}),Ph(Jb),Rv(),yy(()=>wy(Fa.firebaseConfig)),gb(()=>_b()),Ew(()=>bw())]};var td=class n{constructor(e){this.http=e;this.startVersionChecking()}updateAvailable$=new ct(!1);currentVersion="1.0.0";checkInterval=5*60*1e3;get updateAvailable(){return this.updateAvailable$.asObservable()}startVersionChecking(){j0(this.checkInterval).pipe(De(()=>this.checkForUpdates())).subscribe()}checkForUpdates(){return new Ct(e=>{let t=document.querySelector('script[src*="main"]');if(t){let r=this.extractTimestampFromUrl(t.src),i=localStorage.getItem("app-version-timestamp");i&&i!==r&&this.updateAvailable$.next(!0),localStorage.setItem("app-version-timestamp",r)}e.next(),e.complete()})}extractTimestampFromUrl(e){let t=e.match(/main-([^.]+)\.js/);return t?t[1]:Date.now().toString()}forceUpdate(){"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t)})}),localStorage.clear(),window.location.reload()}dismissUpdate(){this.updateAvailable$.next(!1)}static \u0275fac=function(t){return new(t||n)(te(Bi))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Y2(n,e){if(n&1){let t=he();f(0,"div",1)(1,"div",2)(2,"div",3),E(3,"\u{1F504}"),g(),f(4,"div",4)(5,"h4"),E(6,"New version available!"),g(),f(7,"p"),E(8,"A new version of the app is ready. Refresh to get the latest features."),g()(),f(9,"div",5)(10,"button",6),F("click",function(){z(t);let i=O();return H(i.update())}),E(11,"Update Now"),g(),f(12,"button",7),F("click",function(){z(t);let i=O();return H(i.dismiss())}),E(13,"Later"),g()()()()}}var nd=class n{constructor(e){this.updateService=e;this.updateAvailable$=this.updateService.updateAvailable}updateAvailable$;update(){this.updateService.forceUpdate()}dismiss(){this.updateService.dismissUpdate()}static \u0275fac=function(t){return new(t||n)($(td))};static \u0275cmp=Ie({type:n,selectors:[["app-update-notification"]],decls:2,vars:3,consts:[["class","update-notification",4,"ngIf"],[1,"update-notification"],[1,"update-content"],[1,"update-icon"],[1,"update-text"],[1,"update-actions"],[1,"update-btn",3,"click"],[1,"dismiss-btn",3,"click"]],template:function(t,r){t&1&&(K(0,Y2,14,0,"div",0),ge(1,"async")),t&2&&M("ngIf",be(1,1,r.updateAvailable$))},dependencies:[Ce,$e,It],styles:[".update-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #e0e0e0;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.update-content[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:12px}.update-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.update-text[_ngcontent-%COMP%]{flex:1}.update-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:14px;font-weight:600}.update-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:12px;line-height:1.4}.update-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.update-btn[_ngcontent-%COMP%], .dismiss-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background-color .2s}.update-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.update-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.dismiss-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid #dee2e6}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}@media (max-width: 480px){.update-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.update-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.update-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var rd=class n{themeSubject=new ct("light");theme$=this.themeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");this.setTheme(r)}setTheme(e){this.themeSubject.next(e),localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}toggleTheme(){let e=this.themeSubject.value;this.setTheme(e==="light"?"dark":"light")}getCurrentTheme(){return this.themeSubject.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zb=()=>({exact:!0});function X2(n,e){n&1&&(f(0,"a",25),Y(),f(1,"svg",26),U(2,"path",27),g(),ne(),f(3,"span"),E(4,"Family Tree"),g()())}function Z2(n,e){if(n&1){let t=he();f(0,"a",34),F("click",function(){z(t);let i=O(3);return H(i.closeMoreMenu())}),E(1,"Profile"),g()}}function eM(n,e){if(n&1){let t=he();f(0,"div",28)(1,"a",29),F("click",function(){z(t);let i=O(2);return H(i.closeMoreMenu())}),E(2,"Lists"),g(),f(3,"a",30),F("click",function(){z(t);let i=O(2);return H(i.closeMoreMenu())}),E(4,"IP Lookup"),g(),f(5,"a",31),F("click",function(){z(t);let i=O(2);return H(i.closeMoreMenu())}),E(6,"Quotes"),g(),K(7,Z2,2,0,"a",32),ge(8,"async"),f(9,"a",33),F("click",function(){z(t);let i=O(2);return H(i.closeMoreMenu())}),E(10,"Premier League"),g()()}if(n&2){let t=O(2);x(7),M("ngIf",be(8,1,t.user$))}}function tM(n,e){if(n&1){let t=he();Zt(0),f(1,"a",16),Y(),f(2,"svg",17),U(3,"path",18),g(),ne(),f(4,"span"),E(5,"Home"),g()(),K(6,X2,5,0,"a",19),ge(7,"async"),f(8,"div",20)(9,"button",21),F("click",function(i){z(t);let s=O();return H(s.toggleMoreMenu(i))}),f(10,"span"),E(11,"More"),g(),Y(),f(12,"svg",22),U(13,"path",23),g()(),K(14,eM,11,3,"div",24),g(),en()}if(n&2){let t=O();x(),M("routerLinkActiveOptions",Wd(5,Zb)),x(5),M("ngIf",be(7,3,t.user$)),x(8),M("ngIf",t.moreMenuOpen)}}function nM(n,e){n&1&&(Y(),f(0,"svg",35),U(1,"path",36),g())}function rM(n,e){n&1&&(Y(),f(0,"svg",35),U(1,"path",37),g())}function iM(n,e){if(n&1){let t=he();f(0,"button",38),F("click",function(){z(t);let i=O();return H(i.login())}),Y(),f(1,"svg",17),U(2,"path",39),g(),ne(),f(3,"span"),E(4,"Login"),g()()}}function sM(n,e){if(n&1){let t=he();f(0,"button",40),F("click",function(){z(t);let i=O();return H(i.logout())}),Y(),f(1,"svg",17),U(2,"path",41),g(),ne(),f(3,"span"),E(4,"Sign Out"),g()()}}function oM(n,e){n&1&&(Y(),f(0,"svg",42),U(1,"path",43),g())}function aM(n,e){n&1&&(Y(),f(0,"svg",42),U(1,"path",44),g())}function cM(n,e){if(n&1){let t=he();f(0,"a",60),F("click",function(){z(t);let i=O(2);return H(i.closeMobileMenu())}),Y(),f(1,"svg",26),U(2,"path",27),g(),ne(),f(3,"span"),E(4,"Family Tree"),g()()}}function lM(n,e){if(n&1){let t=he();f(0,"a",61),F("click",function(){z(t);let i=O(2);return H(i.closeMobileMenu())}),Y(),f(1,"svg",17),U(2,"path",62),g(),ne(),f(3,"span"),E(4,"Profile"),g()()}}function uM(n,e){n&1&&(Y(),f(0,"svg",22),U(1,"path",36),g())}function dM(n,e){n&1&&(Y(),f(0,"svg",22),U(1,"path",37),g())}function hM(n,e){if(n&1){let t=he();f(0,"button",63),F("click",function(){z(t);let i=O(2);return i.login(),H(i.closeMobileMenu())}),Y(),f(1,"svg",17),U(2,"path",39),g(),ne(),f(3,"span"),E(4,"Login"),g()()}}function fM(n,e){if(n&1){let t=he();f(0,"button",64),F("click",function(){z(t);let i=O(2);return i.logout(),H(i.closeMobileMenu())}),Y(),f(1,"svg",17),U(2,"path",41),g(),ne(),f(3,"span"),E(4,"Sign Out"),g()()}}function pM(n,e){if(n&1){let t=he();f(0,"div",45)(1,"nav",46)(2,"a",47),F("click",function(){z(t);let i=O();return H(i.closeMobileMenu())}),Y(),f(3,"svg",17),U(4,"path",18),g(),ne(),f(5,"span"),E(6,"Home"),g()(),f(7,"a",48),F("click",function(){z(t);let i=O();return H(i.closeMobileMenu())}),Y(),f(8,"svg",17),U(9,"path",49),g(),ne(),f(10,"span"),E(11,"Lists"),g()(),f(12,"a",50),F("click",function(){z(t);let i=O();return H(i.closeMobileMenu())}),Y(),f(13,"svg",17),U(14,"path",51),g(),ne(),f(15,"span"),E(16,"IP Lookup"),g()(),f(17,"a",52),F("click",function(){z(t);let i=O();return H(i.closeMobileMenu())}),Y(),f(18,"svg",17),U(19,"path",53),g(),ne(),f(20,"span"),E(21,"Quotes"),g()(),K(22,cM,5,0,"a",54),ge(23,"async"),K(24,lM,5,0,"a",55),ge(25,"async"),f(26,"button",56),F("click",function(){z(t);let i=O();return H(i.toggleTheme())}),K(27,uM,2,0,"svg",57),ge(28,"async"),K(29,dM,2,0,"svg",57),ge(30,"async"),f(31,"span"),E(32),ge(33,"async"),g()(),K(34,hM,5,0,"button",58),ge(35,"async"),K(36,fM,5,0,"button",59),ge(37,"async"),g()()}if(n&2){let t=O();x(2),M("routerLinkActiveOptions",Wd(22,Zb)),x(20),M("ngIf",be(23,8,t.user$)),x(2),M("ngIf",be(25,10,t.user$)),x(3),M("ngIf",be(28,12,t.theme$)==="light"),x(2),M("ngIf",be(30,14,t.theme$)==="dark"),x(3),le(be(33,16,t.theme$)==="light"?"Dark Mode":"Light Mode"),x(2),M("ngIf",!be(35,18,t.user$)),x(2),M("ngIf",be(37,20,t.user$))}}var id=class n{constructor(e,t,r,i){this.authService=e;this.themeService=t;this.router=r;this.elementRef=i;this.user$=this.authService.user$,this.theme$=this.themeService.theme$,this.isDetailPage$=this.router.events.pipe(Ut(s=>s instanceof gt),ae(s=>s.urlAfterRedirects!=="/"))}user$;theme$;isMobileMenuOpen=!1;isDetailPage$;moreMenuOpen=!1;onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.moreMenuOpen=!1)}login(){this.authService.signInWithGoogle()}logout(){this.authService.signOut()}toggleTheme(){this.themeService.toggleTheme()}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleMoreMenu(e){e.stopPropagation(),this.moreMenuOpen=!this.moreMenuOpen}closeMoreMenu(){this.moreMenuOpen=!1}static \u0275fac=function(t){return new(t||n)($(Fe),$(rd),$(Oe),$(hr))};static \u0275cmp=Ie({type:n,selectors:[["app-root"]],hostBindings:function(t,r){t&1&&F("click",function(s){return r.onDocumentClick(s)},Y0)},decls:28,vars:21,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700","shadow-sm","sticky","top-0","z-50"],[1,"max-w-7xl","mx-auto","px-3","sm:px-4","lg:px-6"],[1,"flex","justify-between","items-center","h-12","sm:h-14"],[1,"flex","items-center","space-x-2","sm:space-x-3"],[1,"text-sm","sm:text-base","font-semibold","text-gray-900","dark:text-white","truncate"],[1,"hidden","sm:flex","items-center","space-x-1","sm:space-x-2"],[4,"ngIf"],[1,"flex","items-center","space-x-1.5","p-1.5","sm:p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-4 h-4 sm:w-5 sm:h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"text-xs","sm:text-sm","font-medium"],["class","flex items-center space-x-1.5 btn-primary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],["class","flex items-center space-x-1.5 btn-secondary text-xs px-2 sm:px-3 py-1 sm:py-2",3,"click",4,"ngIf"],[1,"sm:hidden","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","duration-200",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",4,"ngIf"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],["routerLink","/","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400","class","flex items-center space-x-1.5 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors duration-200",4,"ngIf"],[1,"relative"],[1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-1.5","text-gray-700","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400","px-2","sm:px-3","py-1","sm:py-2","rounded","text-xs","sm:text-sm","font-medium","transition-colors","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1.5a2.5 2.5 0 00-5 0V21"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","dark:bg-gray-800","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["routerLink","/lists",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/ip-lookup",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/quotes",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile","class","block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",3,"click",4,"ngIf"],["routerLink","/premier-league",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["routerLink","/profile",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","sm:w-5","sm:h-5"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule","evenodd"],[1,"flex","items-center","space-x-1.5","btn-primary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"flex","items-center","space-x-1.5","btn-secondary","text-xs","px-2","sm:px-3","py-1","sm:py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden","border-t","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"py-2","space-y-1"],["routerLink","/","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click","routerLinkActiveOptions"],["routerLink","/lists","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/ip-lookup","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"],["routerLink","/quotes","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 17a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4m-4 4v-4m0 0H7m4 0h6"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400","class","flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["class","w-4 h-4","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md transition-colors duration-200",3,"click",4,"ngIf"],["routerLink","/family-tree","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["routerLink","/profile","routerLinkActive","bg-primary-50 dark:bg-primary-900 text-primary-600 dark:text-primary-400",1,"flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900","rounded-md","transition-colors","duration-200",3,"click"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-sm","font-medium","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900","rounded-md","transition-colors","duration-200",3,"click"]],template:function(t,r){t&1&&(f(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),E(5," Manu's Playground "),g()(),f(6,"nav",5),K(7,tM,15,6,"ng-container",6),ge(8,"async"),f(9,"button",7),F("click",function(){return r.toggleTheme()}),K(10,nM,2,0,"svg",8),ge(11,"async"),K(12,rM,2,0,"svg",8),ge(13,"async"),f(14,"span",9),E(15),ge(16,"async"),g()(),K(17,iM,5,0,"button",10),ge(18,"async"),K(19,sM,5,0,"button",11),ge(20,"async"),g(),f(21,"button",12),F("click",function(){return r.toggleMobileMenu()}),K(22,oM,2,0,"svg",13)(23,aM,2,0,"svg",13),g()(),K(24,pM,38,23,"div",14),g()(),f(25,"main",15),U(26,"router-outlet"),g(),U(27,"app-update-notification")),t&2&&(x(7),M("ngIf",be(8,9,r.isDetailPage$)),x(3),M("ngIf",be(11,11,r.theme$)==="light"),x(2),M("ngIf",be(13,13,r.theme$)==="dark"),x(3),le(be(16,15,r.theme$)==="light"?"Dark":"Light"),x(2),M("ngIf",!be(18,17,r.user$)),x(2),M("ngIf",be(20,19,r.user$)),x(3),M("ngIf",!r.isMobileMenuOpen),x(),M("ngIf",r.isMobileMenuOpen),x(),M("ngIf",r.isMobileMenuOpen))},dependencies:[Ce,$e,It,Mo,$t,Dh,nd],encapsulation:2})};rh(id,Xb).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
