var nO=Object.defineProperty,rO=Object.defineProperties;var iO=Object.getOwnPropertyDescriptors;var wl=Object.getOwnPropertySymbols,oO=Object.getPrototypeOf,DT=Object.prototype.hasOwnProperty,TT=Object.prototype.propertyIsEnumerable,sO=Reflect.get;var IT=(n,e,t)=>e in n?nO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})DT.call(e,t)&&IT(n,t,e[t]);if(wl)for(var t of wl(e))TT.call(e,t)&&IT(n,t,e[t]);return n},ne=(n,e)=>rO(n,iO(e));var Lg=(n,e)=>{var t={};for(var r in n)DT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&wl)for(var r of wl(n))e.indexOf(r)<0&&TT.call(n,r)&&(t[r]=n[r]);return t};var zr=(n,e,t)=>sO(oO(n),t,e);var w=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Vg;function jg(){return Vg}function dr(n){let e=Vg;return Vg=n,e}var aO=Symbol("NotFound"),Il=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function qo(n){return n===aO||n?.name==="\u0275NotFound"}function Sl(n,e){return Object.is(n,e)}var Ye=null,Dl=!1,Ug=1,cO=null,yt=Symbol("SIGNAL");function ie(n){let e=Ye;return Ye=n,e}function Al(){return Ye}var Li={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Go(n){if(Dl)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(n);let e=Ye.nextProducerIndex++;if(Ml(Ye),e<Ye.producerNode.length&&Ye.producerNode[e]!==n&&za(Ye)){let t=Ye.producerNode[e];Pl(t,Ye.producerIndexOfThis[e])}Ye.producerNode[e]!==n&&(Ye.producerNode[e]=n,Ye.producerIndexOfThis[e]=za(Ye)?CT(n,Ye,e):0),Ye.producerLastReadVersion[e]=n.version}function bT(){Ug++}function Rl(n){if(!(za(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ug)){if(!n.producerMustRecompute(n)&&!qa(n)){Cl(n);return}n.producerRecomputeValue(n),Cl(n)}}function Bg(n){if(n.liveConsumerNode===void 0)return;let e=Dl;Dl=!0;try{for(let t of n.liveConsumerNode)t.dirty||uO(t)}finally{Dl=e}}function $g(){return Ye?.consumerAllowSignalWrites!==!1}function uO(n){n.dirty=!0,Bg(n),n.consumerMarkedDirty?.(n)}function Cl(n){n.dirty=!1,n.lastCleanEpoch=Ug}function Vi(n){return n&&(n.nextProducerIndex=0),ie(n)}function Wo(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(za(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Pl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qa(n){Ml(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Rl(t),r!==t.version))return!0}return!1}function Nl(n){if(Ml(n),za(n))for(let e=0;e<n.producerNode.length;e++)Pl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function CT(n,e,t){if(ST(n),n.liveConsumerNode.length===0&&AT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=CT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Pl(n,e){if(ST(n),n.liveConsumerNode.length===1&&AT(n))for(let r=0;r<n.producerNode.length;r++)Pl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ml(i),i.producerIndexOfThis[r]=e}}function za(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ml(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ST(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AT(n){return n.producerNode!==void 0}function xl(n){cO?.(n)}function kl(n,e){let t=Object.create(lO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Rl(t),Go(t),t.value===Ha)throw t.error;return t.value};return r[yt]=t,xl(t),r}var Tl=Symbol("UNSET"),bl=Symbol("COMPUTING"),Ha=Symbol("ERRORED"),lO=ne(O({},Li),{value:Tl,dirty:!0,error:null,equal:Sl,kind:"computed",producerMustRecompute(n){return n.value===Tl||n.value===bl},producerRecomputeValue(n){if(n.value===bl)throw new Error("");let e=n.value;n.value=bl;let t=Vi(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==Tl&&e!==Ha&&r!==Ha&&n.equal(e,r)}catch(o){r=Ha,n.error=o}finally{Wo(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function dO(){throw new Error}var RT=dO;function NT(n){RT(n)}function Hg(n){RT=n}var hO=null;function zg(n,e){let t=Object.create(Ol);t.value=n,e!==void 0&&(t.equal=e);let r=()=>PT(t);return r[yt]=t,xl(t),[r,s=>Ko(t,s),s=>qg(t,s)]}function PT(n){return Go(n),n.value}function Ko(n,e){$g()||NT(n),n.equal(n.value,e)||(n.value=e,fO(n))}function qg(n,e){$g()||NT(n),Ko(n,e(n.value))}var Ol=ne(O({},Li),{equal:Sl,value:void 0,kind:"signal"});function fO(n){n.version++,bT(),Bg(n),hO?.(n)}function ee(n){return typeof n=="function"}function Qo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Fl=Qo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ji(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var _e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof Fl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{MT(o)}catch(s){e=e??[],s instanceof Fl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ji(t,e)}remove(e){let{_finalizers:t}=this;t&&ji(t,e),e instanceof n&&e._removeParent(this)}};_e.EMPTY=(()=>{let n=new _e;return n.closed=!0,n})();var Gg=_e.EMPTY;function Ll(n){return n instanceof _e||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function MT(n){ee(n)?n():n.unsubscribe()}var yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yo={setTimeout(n,e,...t){let{delegate:r}=Yo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Yo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vl(n){Yo.setTimeout(()=>{let{onUnhandledError:e}=yn;if(e)e(n);else throw n})}function Ga(){}var xT=Wg("C",void 0,void 0);function kT(n){return Wg("E",void 0,n)}function OT(n){return Wg("N",n,void 0)}function Wg(n,e,t){return{kind:n,value:e,error:t}}var Ui=null;function Zo(n){if(yn.useDeprecatedSynchronousErrorHandling){let e=!Ui;if(e&&(Ui={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ui;if(Ui=null,t)throw r}}else n()}function FT(n){yn.useDeprecatedSynchronousErrorHandling&&Ui&&(Ui.errorThrown=!0,Ui.error=n)}var Bi=class extends _e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ll(e)&&e.add(this)):this.destination=mO}static create(e,t,r){return new Jo(e,t,r)}next(e){this.isStopped?Qg(OT(e),this):this._next(e)}error(e){this.isStopped?Qg(kT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qg(xT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pO=Function.prototype.bind;function Kg(n,e){return pO.call(n,e)}var Yg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){jl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){jl(r)}else jl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){jl(t)}}},Jo=class extends Bi{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&yn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kg(e.next,o),error:e.error&&Kg(e.error,o),complete:e.complete&&Kg(e.complete,o)}):i=e}this.destination=new Yg(i)}};function jl(n){yn.useDeprecatedSynchronousErrorHandling?FT(n):Vl(n)}function gO(n){throw n}function Qg(n,e){let{onStoppedNotification:t}=yn;t&&Yo.setTimeout(()=>t(n,e))}var mO={closed:!0,next:Ga,error:gO,complete:Ga};var Xo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bt(n){return n}function Ul(...n){return Zg(n)}function Zg(n){return n.length===0?Bt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var H=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=vO(t)?t:new Jo(t,r,i);return Zo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=LT(r),new r((i,o)=>{let s=new Jo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xo](){return this}pipe(...t){return Zg(t)(this)}toPromise(t){return t=LT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function LT(n){var e;return(e=n??yn.Promise)!==null&&e!==void 0?e:Promise}function yO(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function vO(n){return n&&n instanceof Bi||yO(n)&&Ll(n)}function Jg(n){return ee(n?.lift)}function de(n){return e=>{if(Jg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new Xg(n,e,t,r,i)}var Xg=class extends Bi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function es(){return de((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ts=class extends H{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _e;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_e.EMPTY)}return e}refCount(){return es()(this)}};var ns={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=ns;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new _e(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=ns;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=ns;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var VT=Qo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Z=(()=>{class n extends H{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Bl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new VT}next(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gg:(this.currentObservers=null,o.push(t),new _e(()=>{this.currentObservers=null,ji(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new H;return t.source=this,t}}return n.create=(e,t)=>new Bl(e,t),n})(),Bl=class extends Z{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Gg}};var Ze=class extends Z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var em={now(){return(em.delegate||Date).now()},delegate:void 0};var $l=class extends _e{constructor(e,t){super()}schedule(e,t=0){return this}};var Wa={setInterval(n,e,...t){let{delegate:r}=Wa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var qr=class extends $l{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Wa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ji(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var rs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};rs.now=em.now;var Gr=class extends rs{constructor(e,t=rs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Wr=new Gr(qr),tm=Wr;var Hl=class extends qr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var zl=class extends Gr{};var nm=new zl(Hl);var ql=class extends qr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ns.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(ns.cancelAnimationFrame(t),e._scheduled=void 0)}};var Gl=class extends Gr{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var Wl=new Gl(ql);var vt=new H(n=>n.complete());function Kl(n){return n&&ee(n.schedule)}function rm(n){return n[n.length-1]}function Ql(n){return ee(rm(n))?n.pop():void 0}function xn(n){return Kl(rm(n))?n.pop():void 0}function jT(n,e){return typeof rm(n)=="number"?n.pop():e}function Yl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function BT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function UT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(n){return this instanceof $i?(this.v=n,this):new $i(n)}function $T(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(P){return new Promise(function(R,k){o.push([y,P,R,k])>1||u(y,P)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(P){g(o[0][3],P)}}function l(y){y.value instanceof $i?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function HT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof UT=="function"?UT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Zl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Jl(n){return ee(n?.then)}function Xl(n){return ee(n[Xo])}function ed(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function td(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _O(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nd=_O();function rd(n){return ee(n?.[nd])}function id(n){return $T(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield $i(t.read());if(i)return yield $i(void 0);yield yield $i(r)}}finally{t.releaseLock()}})}function od(n){return ee(n?.getReader)}function Ne(n){if(n instanceof H)return n;if(n!=null){if(Xl(n))return EO(n);if(Zl(n))return wO(n);if(Jl(n))return IO(n);if(ed(n))return zT(n);if(rd(n))return DO(n);if(od(n))return TO(n)}throw td(n)}function EO(n){return new H(e=>{let t=n[Xo]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wO(n){return new H(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function IO(n){return new H(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vl)})}function DO(n){return new H(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zT(n){return new H(e=>{bO(n,e).catch(t=>e.error(t))})}function TO(n){return zT(id(n))}function bO(n,e){var t,r,i,o;return BT(this,void 0,void 0,function*(){try{for(t=HT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Kr(n,e=0){return de((t,r)=>{t.subscribe(oe(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function Qr(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function qT(n,e){return Ne(n).pipe(Qr(e),Kr(e))}function GT(n,e){return Ne(n).pipe(Qr(e),Kr(e))}function WT(n,e){return new H(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function KT(n,e){return new H(t=>{let r;return xt(t,e,()=>{r=n[nd](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function sd(n,e){if(!n)throw new Error("Iterable cannot be null");return new H(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function QT(n,e){return sd(id(n),e)}function YT(n,e){if(n!=null){if(Xl(n))return qT(n,e);if(Zl(n))return WT(n,e);if(Jl(n))return GT(n,e);if(ed(n))return sd(n,e);if(rd(n))return KT(n,e);if(od(n))return QT(n,e)}throw td(n)}function Ee(n,e){return e?YT(n,e):Ne(n)}function z(...n){let e=xn(n);return Ee(n,e)}function is(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new H(e?i=>e.schedule(r,0,i):r)}function ad(n){return!!n&&(n instanceof H||ee(n.lift)&&ee(n.subscribe))}var hr=Qo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ZT(n){return n instanceof Date&&!isNaN(n)}function Y(n,e){return de((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:CO}=Array;function SO(n,e){return CO(e)?n(...e):n(e)}function cd(n){return Y(e=>SO(n,e))}var{isArray:AO}=Array,{getPrototypeOf:RO,prototype:NO,keys:PO}=Object;function ud(n){if(n.length===1){let e=n[0];if(AO(e))return{args:e,keys:null};if(MO(e)){let t=PO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function MO(n){return n&&typeof n=="object"&&RO(n)===NO}function ld(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function dd(...n){let e=xn(n),t=Ql(n),{args:r,keys:i}=ud(n);if(r.length===0)return Ee([],e);let o=new H(xO(r,e,i?s=>ld(i,s):Bt));return t?o.pipe(cd(t)):o}function xO(n,e,t=Bt){return r=>{JT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)JT(e,()=>{let l=Ee(n[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function JT(n,e,t){n?xt(t,n,e):e()}function XT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?C(P):u.push(P),C=P=>{o&&e.next(P),l++;let R=!1;Ne(t(P,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?xt(e,s,()=>C(k)):C(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(oe(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Je(n,e,t=1/0){return ee(e)?Je((r,i)=>Y((o,s)=>e(r,o,i,s))(Ne(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>XT(r,i,n,t)))}function hd(n=1/0){return Je(Bt,n)}function eb(){return hd(1)}function os(...n){return eb()(Ee(n,xn(n)))}function Ka(n){return new H(e=>{Ne(n()).subscribe(e)})}function im(...n){let e=Ql(n),{args:t,keys:r}=ud(n),i=new H(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ne(t[h]).subscribe(oe(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ld(r,a):a),o.complete())}))}});return e?i.pipe(cd(e)):i}function fd(n=0,e,t=tm){let r=-1;return e!=null&&(Kl(e)?t=e:r=e),new H(i=>{let o=ZT(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function om(n=0,e=Wr){return n<0&&(n=0),fd(n,n,e)}function Qa(...n){let e=xn(n),t=jT(n,1/0),r=n;return r.length?r.length===1?Ne(r[0]):hd(t)(Ee(r,e)):vt}function st(n,e){return de((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function tb(n){return de((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let l=i;i=null,t.next(l)}s&&t.complete()},u=()=>{o=null,s&&t.complete()};e.subscribe(oe(t,l=>{r=!0,i=l,o||Ne(n(l)).subscribe(o=oe(t,a,u))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function pd(n,e=Wr){return tb(()=>fd(n,e))}function Yr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Ne(n(s,Yr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function nb(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Zr(n,e){return ee(e)?Je(n,e,1):Je(n,1)}function Jr(n){return de((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $t(n){return n<=0?()=>vt:de((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gd(n=kO){return de((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kO(){return new hr}function Hi(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):Bt,$t(1),t?Jr(e):gd(()=>new hr))}function ss(n){return n<=0?()=>vt:de((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):Bt,ss(1),t?Jr(e):gd(()=>new hr))}function md(n,e){return de(nb(n,e,arguments.length>=2,!0))}function Xr(...n){let e=xn(n);return de((t,r)=>{(e?os(n,t,e):os(n,t)).subscribe(r)})}function Ue(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ne(n(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function kn(n){return de((e,t)=>{Ne(n).subscribe(oe(t,()=>t.complete(),Ga)),!t.closed&&e.subscribe(t)})}function qe(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Bt}function rb(n){let e=ie(null);try{return n()}finally{ie(e)}}var _m="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(wd(e,t)),this.code=e}};function OO(n){return`NG0${Math.abs(n)}`}function wd(n,e){return`${OO(n)}${e?": "+e:""}`}function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("")}function ab(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(kt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Em(n,e){return n?e?`${n} ${e}`:n:e||""}var FO=Pe({__forward_ref__:Pe});function On(n){return n.__forward_ref__=On,n.toString=function(){return kt(this())},n}function at(n){return wm(n)?n():n}function wm(n){return typeof n=="function"&&n.hasOwnProperty(FO)&&n.__forward_ref__===On}function cb(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xa(n){return LO(n,Id)}function Im(n){return Xa(n)!==null}function LO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function VO(n){let e=n?.[Id]??null;return e||null}function cm(n){return n&&n.hasOwnProperty(vd)?n[vd]:null}var Id=Pe({\u0275prov:Pe}),vd=Pe({\u0275inj:Pe}),L=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Dm(n){return n&&!!n.\u0275providers}var Tm=Pe({\u0275cmp:Pe}),bm=Pe({\u0275dir:Pe}),Cm=Pe({\u0275pipe:Pe}),Sm=Pe({\u0275mod:Pe}),Za=Pe({\u0275fac:Pe}),Ki=Pe({__NG_ELEMENT_ID__:Pe}),ib=Pe({__NG_ENV_ID__:Pe});function Dd(n){return typeof n=="string"?n:n==null?"":String(n)}function ub(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Dd(n)}function Am(n,e){throw new j(-200,n)}function Td(n,e){throw new j(-201,!1)}var um;function lb(){return um}function bt(n){let e=um;return um=n,e}function Rm(n,e,t){let r=Xa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Td(n,"Injector")}var jO={},zi=jO,lm="__NG_DI_FLAG__",dm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=qi(t)||0;try{return this.injector.get(e,r&8?null:zi,r)}catch(i){if(qo(i))return i;throw i}}},_d="ngTempTokenPath",UO="ngTokenPath",BO=/\n/gm,$O="\u0275",ob="__source";function HO(n,e=0){let t=jg();if(t===void 0)throw new j(-203,!1);if(t===null)return Rm(n,void 0,e);{let r=zO(e),i=t.retrieve(n,r);if(qo(i)){if(r.optional)return null;throw i}return i}}function q(n,e=0){return(lb()||HO)(at(n),e)}function A(n,e){return q(n,qi(e))}function qi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function hm(n){let e=[];for(let t=0;t<n.length;t++){let r=at(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=qO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function Nm(n,e){return n[lm]=e,n.prototype[lm]=e,n}function qO(n){return n[lm]}function GO(n,e,t,r){let i=n[_d];throw e[ob]&&i.unshift(e[ob]),n.message=WO(`
`+n.message,i,t,r),n[UO]=i,n[_d]=null,n}function WO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==$O?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(BO,`
  `)}`}function ei(n,e){let t=n.hasOwnProperty(Za);return t?n[Za]:null}function bd(n,e){n.forEach(t=>Array.isArray(t)?bd(t,e):e(t))}function Pm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ec(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function db(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function hb(n,e,t){let r=cs(n,e);return r>=0?n[r|1]=t:(r=~r,db(n,r,e,t)),r}function Cd(n,e){let t=cs(n,e);if(t>=0)return n[t|1]}function cs(n,e){return KO(n,e,1)}function KO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ni={},Ht=[],ri=new L(""),Mm=new L("",-1),xm=new L(""),Ja=class{get(e,t=zi){if(t===zi)throw new Il(`NullInjectorError: No provider for ${kt(e)}!`);return t}};function km(n){return n[Sm]||null}function mr(n){return n[Tm]||null}function Om(n){return n[bm]||null}function fb(n){return n[Cm]||null}function zt(n){return{\u0275providers:n}}function pb(...n){return{\u0275providers:Fm(!0,n),\u0275fromNgModule:!0}}function Fm(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return bd(e,s=>{let a=s;Ed(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gb(i,o),t}function gb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Lm(i,o=>{e(o,r)})}}function Ed(n,e,t,r){if(n=at(n),!n)return!1;let i=null,o=cm(n),s=!o&&mr(n);if(!o&&!s){let u=n.ngModule;if(o=cm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ed(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{bd(o.imports,h=>{Ed(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gb(l,e)}if(!a){let l=ei(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ht},i),e({provide:xm,useValue:i,multi:!0},i),e({provide:ri,useValue:()=>q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Lm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Lm(n,e){for(let t of n)Dm(t)&&(t=t.\u0275providers),Array.isArray(t)?Lm(t,e):e(t)}var QO=Pe({provide:String,useValue:Pe});function mb(n){return n!==null&&typeof n=="object"&&QO in n}function YO(n){return!!(n&&n.useExisting)}function ZO(n){return!!(n&&n.useFactory)}function Gi(n){return typeof n=="function"}function yb(n){return!!n.useClass}var tc=new L(""),yd={},sb={},am;function us(){return am===void 0&&(am=new Ja),am}var ke=class{},Wi=class extends ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,pm(e,s=>this.processProvider(s)),this.records.set(Mm,as(void 0,this)),i.has("environment")&&this.records.set(ke,as(void 0,this));let o=this.records.get(tc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xm,Ht,{self:!0}))}retrieve(e,t){let r=qi(t)||0;try{return this.get(e,zi,r)}catch(i){if(qo(i))return i;throw i}}destroy(){Ya(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return Ya(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ya(this);let t=dr(this),r=bt(void 0),i;try{return e()}finally{dr(t),bt(r)}}get(e,t=zi,r){if(Ya(this),e.hasOwnProperty(ib))return e[ib](this);let i=qi(r),o,s=dr(this),a=bt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=n1(e)&&Xa(e);h&&this.injectableDefInScope(h)?l=as(fm(e),yd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?us():this.parent;return t=i&8&&t===zi?null:t,u.get(e,t)}catch(u){if(qo(u)){if((u[_d]=u[_d]||[]).unshift(kt(e)),s)throw u;return GO(u,e,"R3InjectorError",this.source)}else throw u}finally{bt(a),dr(s)}}resolveInjectorInitializers(){let e=ie(null),t=dr(this),r=bt(void 0),i;try{let o=this.get(ri,Ht,{self:!0});for(let s of o)s()}finally{dr(t),bt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=at(e);let t=Gi(e)?e:at(e&&e.provide),r=XO(e);if(!Gi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=as(void 0,yd,!0),i.factory=()=>hm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ie(null);try{return t.value===sb?Am(kt(e)):t.value===yd&&(t.value=sb,t.value=t.factory()),typeof t.value=="object"&&t.value&&t1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=at(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function fm(n){let e=Xa(n),t=e!==null?e.factory:ei(n);if(t!==null)return t;if(n instanceof L)throw new j(204,!1);if(n instanceof Function)return JO(n);throw new j(204,!1)}function JO(n){if(n.length>0)throw new j(204,!1);let t=VO(n);return t!==null?()=>t.factory(n):()=>new n}function XO(n){if(mb(n))return as(void 0,n.useValue);{let e=Vm(n);return as(e,yd)}}function Vm(n,e,t){let r;if(Gi(n)){let i=at(n);return ei(i)||fm(i)}else if(mb(n))r=()=>at(n.useValue);else if(ZO(n))r=()=>n.useFactory(...hm(n.deps||[]));else if(YO(n))r=()=>q(at(n.useExisting));else{let i=at(n&&(n.useClass||n.provide));if(e1(n))r=()=>new i(...hm(n.deps));else return ei(i)||fm(i)}return r}function Ya(n){if(n.destroyed)throw new j(205,!1)}function as(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function e1(n){return!!n.deps}function t1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function n1(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function pm(n,e){for(let t of n)Array.isArray(t)?pm(t,e):t&&Dm(t)?pm(t.\u0275providers,e):e(t)}function Xe(n,e){let t;n instanceof Wi?(Ya(n),t=n):t=new dm(n);let r,i=dr(t),o=bt(void 0);try{return e()}finally{dr(i),bt(o)}}function jm(){return lb()!==void 0||jg()!=null}function Um(n){if(!jm())throw new j(-203,!1)}var _n=0,ce=1,J=2,ct=3,tn=4,nn=5,nc=6,ls=7,_t=8,Qi=9,yr=10,Be=11,ds=12,Bm=13,Yi=14,rn=15,Zi=16,Ji=17,Xi=18,rc=19,$m=20,pr=21,Sd=22,ic=23,qt=24,eo=25,Ft=26,vb=1;var ii=7,oc=8,sc=9,Lt=10;function Fn(n){return Array.isArray(n)&&typeof n[vb]=="object"}function En(n){return Array.isArray(n)&&n[vb]===!0}function Hm(n){return(n.flags&4)!==0}function oi(n){return n.componentOffset>-1}function Ad(n){return(n.flags&1)===1}function Ln(n){return!!n.template}function hs(n){return(n[J]&512)!==0}function to(n){return(n[J]&256)===256}var _b="svg",Eb="math";function on(n){for(;Array.isArray(n);)n=n[_n];return n}function zm(n,e){return on(e[n])}function wn(n,e){return on(e[n.index])}function Rd(n,e){return n.data[e]}function qm(n,e){return n[e]}function Gm(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sn(n,e){let t=e[n];return Fn(t)?t:t[_n]}function Nd(n){return(n[J]&128)===128}function wb(n){return En(n[ct])}function ac(n,e){return e==null?null:n[e]}function Wm(n){n[Ji]=0}function Km(n){n[J]&1024||(n[J]|=1024,Nd(n)&&fs(n))}function Ib(n,e){for(;n>0;)e=e[Yi],n--;return e}function cc(n){return!!(n[J]&9216||n[qt]?.dirty)}function Pd(n){n[yr].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),cc(n)&&fs(n)}function fs(n){n[yr].changeDetectionScheduler?.notify(0);let e=ti(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Nd(e)));)e=ti(e)}function Qm(n,e){if(to(n))throw new j(911,!1);n[pr]===null&&(n[pr]=[]),n[pr].push(e)}function Db(n,e){if(n[pr]===null)return;let t=n[pr].indexOf(e);t!==-1&&n[pr].splice(t,1)}function ti(n){let e=n[ct];return En(e)?e[ct]:e}function Tb(n){return n[ls]??=[]}function bb(n){return n.cleanup??=[]}var ae={lFrame:Hb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},uc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(uc||{}),r1=0,gm=!1;function Cb(){return ae.lFrame.elementDepthCount}function Sb(){ae.lFrame.elementDepthCount++}function Ab(){ae.lFrame.elementDepthCount--}function Ym(){return ae.bindingsEnabled}function Rb(){return ae.skipHydrationRootTNode!==null}function Nb(n){return ae.skipHydrationRootTNode===n}function Pb(){ae.skipHydrationRootTNode=null}function Te(){return ae.lFrame.lView}function Ct(){return ae.lFrame.tView}function ut(n){return ae.lFrame.contextLView=n,n[_t]}function lt(n){return ae.lFrame.contextLView=null,n}function St(){let n=Zm();for(;n!==null&&n.type===64;)n=n.parent;return n}function Zm(){return ae.lFrame.currentTNode}function Mb(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ps(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function Jm(){return ae.lFrame.isParent}function xb(){ae.lFrame.isParent=!1}function kb(){return ae.lFrame.contextLView}function Xm(n){cb("Must never be called in production mode"),r1=n}function ey(){return gm}function ty(n){let e=gm;return gm=n,e}function Ob(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Fb(n){return ae.lFrame.bindingIndex=n}function lc(){return ae.lFrame.bindingIndex++}function Lb(n){let e=ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Vb(){return ae.lFrame.inI18n}function jb(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,Md(e)}function Ub(){return ae.lFrame.currentDirectiveIndex}function Md(n){ae.lFrame.currentDirectiveIndex=n}function Bb(n){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ny(n){ae.lFrame.currentQueryIndex=n}function i1(n){let e=n[ce];return e.type===2?e.declTNode:e.type===1?n[nn]:null}function ry(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=i1(o),i===null||(o=o[Yi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=$b();return r.currentTNode=e,r.lView=n,!0}function xd(n){let e=$b(),t=n[ce];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $b(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?Hb(n):e}function Hb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function zb(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var iy=zb;function kd(){let n=zb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qb(n){return(ae.lFrame.contextLView=Ib(n,ae.lFrame.contextLView))[_t]}function no(){return ae.lFrame.selectedIndex}function si(n){ae.lFrame.selectedIndex=n}function Od(){let n=ae.lFrame;return Rd(n.tView,n.selectedIndex)}function Gb(){return ae.lFrame.currentNamespace}var Wb=!0;function Fd(){return Wb}function Ld(n){Wb=n}function mm(n,e=null,t=null,r){let i=oy(n,e,t,r);return i.resolveInjectorInitializers(),i}function oy(n,e=null,t=null,r,i=new Set){let o=[t||Ht,pb(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new Wi(o,e||us(),r||null,i)}var Ae=class n{static THROW_IF_NOT_FOUND=zi;static NULL=new Ja;static create(e,t){if(Array.isArray(e))return mm({name:""},t,e,"");{let r=e.name??"";return mm({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>q(Mm)});static __NG_ELEMENT_ID__=-1},Ce=new L(""),vr=(()=>{class n{static __NG_ELEMENT_ID__=o1;static __NG_ENV_ID__=t=>t}return n})(),ym=class extends vr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return to(this._lView)}onDestroy(e){let t=this._lView;return Qm(t,e),()=>Db(t,e)}};function o1(){return new ym(Te())}var vn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Vt=new L("",{providedIn:"root",factory:()=>{let n=A(ke),e;return t=>{e??=n.get(vn),e.handleError(t)}}}),Kb={provide:ri,useValue:()=>void A(vn),multi:!0};function sy(n){return typeof n=="function"&&n[yt]!==void 0}function At(n,e){let[t,r,i]=zg(n,e?.equal),o=t,s=o[yt];return o.set=r,o.update=i,o.asReadonly=Qb.bind(o),o}function Qb(){let n=this[yt];if(n.readonlyFn===void 0){let e=()=>this();e[yt]=n,n.readonlyFn=e}return n.readonlyFn}function ay(n){return sy(n)&&typeof n.set=="function"}var gr=class{},dc=new L("",{providedIn:"root",factory:()=>!1});var cy=new L(""),uy=new L("");var Vd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=s1}return n})();function s1(){return new Vd(Te(),St())}var _r=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ze(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new H(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),ai=(()=>{class n{internalPendingTasks=A(_r);scheduler=A(gr);errorHandler=A(Vt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})();function hc(...n){}var ly=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new vm})}return n})(),vm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function vs(n){return{toString:n}.toString()}var jd="__parameters__";function p1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CC(n,e,t){return vs(()=>{let r=p1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(jd)?u[jd]:Object.defineProperty(u,jd,{value:[]})[jd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rt=Nm(CC("Optional"),8);var SC=Nm(CC("SkipSelf"),4);function g1(n){return typeof n=="function"}var zd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function AC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Un=(()=>{let n=()=>RC;return n.ngInherit=!0,n})();function RC(n){return n.type.prototype.ngOnChanges&&(n.setInput=y1),m1}function m1(){let n=PC(this),e=n?.current;if(e){let t=n.previous;if(t===ni)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function y1(n,e,t,r,i){let o=this.declaredInputs[r],s=PC(n)||v1(n,{previous:ni,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new zd(l&&l.currentValue,t,u===ni),AC(n,e,i,t)}var NC="__ngSimpleChanges__";function PC(n){return n[NC]||null}function v1(n,e){return n[NC]=e}var Yb=[];var De=function(n,e=null,t){for(let r=0;r<Yb.length;r++){let i=Yb[r];i(n,e,t)}};function _1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function MC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Bd(n,e,t){xC(n,e,3,t)}function $d(n,e,t,r){(n[J]&3)===t&&xC(n,e,t,r)}function dy(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function xC(n,e,t,r){let i=r!==void 0?n[Ji]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ji]+=65536),(a<o||o==-1)&&(E1(n,t,e,u),n[Ji]=(n[Ji]&4294901760)+u+2),u++}function Zb(n,e){De(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),De(5,n,e)}}function E1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[Ji]>>16&&(n[J]&3)===e&&(n[J]+=16384,Zb(a,o)):Zb(a,o)}var ms=-1,io=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function w1(n){return(n.flags&8)!==0}function I1(n){return(n.flags&16)!==0}function D1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];b1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function T1(n){return n===3||n===4||n===6}function b1(n){return n.charCodeAt(0)===64}function gc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Jb(n,t,i,null,e[++r]):Jb(n,t,i,null,null))}}return n}function Jb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function kC(n){return n!==ms}function qd(n){return n&32767}function C1(n){return n>>16}function Gd(n,e){let t=C1(n),r=e;for(;t>0;)r=r[Yi],t--;return r}var wy=!0;function Wd(n){let e=wy;return wy=n,e}var S1=256,OC=S1-1,FC=5,A1=0,Vn={};function R1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ki)&&(r=t[Ki]),r==null&&(r=t[Ki]=A1++);let i=r&OC,o=1<<i;e.data[n+(i>>FC)]|=o}function Kd(n,e){let t=LC(n,e);if(t!==-1)return t;let r=e[ce];r.firstCreatePass&&(n.injectorIndex=e.length,hy(r.data,n),hy(e,null),hy(r.blueprint,null));let i=By(n,e),o=n.injectorIndex;if(kC(i)){let s=qd(i),a=Gd(i,e),u=a[ce].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function hy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function LC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function By(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$C(i),r===null)return ms;if(t++,i=i[Yi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ms}function Iy(n,e,t){R1(n,e,t)}function VC(n,e,t){if(t&8||n!==void 0)return n;Td(e,"NodeInjector")}function jC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Qi],o=bt(void 0);try{return i?i.get(e,r,t&8):Rm(e,r,t&8)}finally{bt(o)}}return VC(r,e,t)}function UC(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=k1(n,e,t,r,Vn);if(s!==Vn)return s}let o=BC(n,e,t,r,Vn);if(o!==Vn)return o}return jC(e,t,r,i)}function BC(n,e,t,r,i){let o=M1(t);if(typeof o=="function"){if(!ry(e,n,r))return r&1?VC(i,t,r):jC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Td(t);else return s}finally{iy()}}else if(typeof o=="number"){let s=null,a=LC(n,e),u=ms,l=r&1?e[rn][nn]:null;for((a===-1||r&4)&&(u=a===-1?By(n,e):e[a+8],u===ms||!eC(r,!1)?a=-1:(s=e[ce],a=qd(u),e=Gd(u,e)));a!==-1;){let h=e[ce];if(Xb(o,a,h.data)){let p=N1(a,e,t,s,r,l);if(p!==Vn)return p}u=e[a+8],u!==ms&&eC(r,e[ce].data[a+8]===l)&&Xb(o,a,e)?(s=h,a=qd(u),e=Gd(u,e)):a=-1}}return i}function N1(n,e,t,r,i,o){let s=e[ce],a=s.data[n+8],u=r==null?oi(a)&&wy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=P1(a,s,t,u,l);return h!==null?Qd(e,s,h,a):Vn}function P1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&Ln(y)&&y.type===t)return u}return null}function Qd(n,e,t,r){let i=n[t],o=e.data;if(i instanceof io){let s=i;s.resolving&&Am(ub(o[t]));let a=Wd(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?bt(s.injectImpl):null,p=ry(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&_1(t,o[t],e)}finally{h!==null&&bt(h),Wd(a),s.resolving=!1,iy()}}return i}function M1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ki)?n[Ki]:void 0;return typeof e=="number"?e>=0?e&OC:x1:e}function Xb(n,e,t){let r=1<<n;return!!(t[e+(n>>FC)]&r)}function eC(n,e){return!(n&2)&&!(n&1&&e)}var ro=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return UC(this._tNode,this._lView,e,qi(r),t)}};function x1(){return new ro(St(),Te())}function co(n){return vs(()=>{let e=n.prototype.constructor,t=e[Za]||Dy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Za]||Dy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Dy(n){return wm(n)?()=>{let e=Dy(at(n));return e&&e()}:ei(n)}function k1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!hs(s);){let a=BC(o,s,t,r|2,Vn);if(a!==Vn)return a;let u=o.parent;if(!u){let l=s[$m];if(l){let h=l.get(t,Vn,r);if(h!==Vn)return h}u=$C(s),s=s[Yi]}o=u}return i}function $C(n){let e=n[ce],t=e.type;return t===2?e.declTNode:t===1?n[nn]:null}function O1(){return sh(St(),Te())}function sh(n,e){return new an(wn(n,e))}var an=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=O1}return n})();function HC(n){return(n.flags&128)===128}var $y=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($y||{}),zC=new Map,F1=0;function L1(){return F1++}function V1(n){zC.set(n[rc],n)}function Ty(n){zC.delete(n[rc])}var tC="__ngContext__";function _c(n,e){Fn(e)?(n[tC]=e[rc],V1(e)):n[tC]=e}function qC(n){return WC(n[ds])}function GC(n){return WC(n[tn])}function WC(n){for(;n!==null&&!En(n);)n=n[tn];return n}var by;function Hy(n){by=n}function KC(){if(by!==void 0)return by;if(typeof document<"u")return document;throw new j(210,!1)}var _s=new L("",{providedIn:"root",factory:()=>j1}),j1="ng",ah=new L(""),Bn=new L("",{providedIn:"platform",factory:()=>"unknown"});var ch=new L("",{providedIn:"root",factory:()=>KC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var U1="h",B1="b";var QC=!1,YC=new L("",{providedIn:"root",factory:()=>QC});var $1=(n,e,t,r)=>{};function H1(n,e,t,r){$1(n,e,t,r)}var z1=()=>null;function ZC(n,e,t=!1){return z1(n,e,t)}function JC(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ny(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Cy(n,e,t){ny(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function XC(n,e,t){if(Hm(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ie(r)}}}var Er=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Er||{});var Sy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_m})`}};function eS(n){return n instanceof Sy?n.changingThisBreaksApplicationSecurity:n}function tS(n){return n instanceof Function?n():n}function q1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var nS="ng-template";function G1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&q1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(zy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function zy(n){return n.type===4&&n.value!==nS}function W1(n,e,t){let r=n.type===4&&!t?nS:n.value;return e===r}function K1(n,e,t){let r=4,i=n.attrs,o=i!==null?Z1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!In(r)&&!In(u))return!1;if(s&&In(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!W1(n,u,t)||u===""&&e.length===1){if(In(r))return!1;s=!0}}else if(r&8){if(i===null||!G1(n,i,u,t)){if(In(r))return!1;s=!0}}else{let l=e[++a],h=Q1(u,i,zy(n),t);if(h===-1){if(In(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(In(r))return!1;s=!0}}}}return In(r)||s}function In(n){return(n&1)===0}function Q1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return J1(e,n)}function Y1(n,e,t=!1){for(let r=0;r<e.length;r++)if(K1(n,e[r],t))return!0;return!1}function Z1(n){for(let e=0;e<n.length;e++){let t=n[e];if(T1(t))return e}return n.length}function J1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function nC(n,e){return n?":not("+e.trim()+")":e}function X1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!In(s)&&(e+=nC(o,i),i=""),r=s,o=o||!In(r);t++}return i!==""&&(e+=nC(o,i)),e}function eF(n){return n.map(X1).join(",")}function tF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!In(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wr={};function nF(n,e){return n.createText(e)}function rF(n,e,t){n.setValue(e,t)}function rS(n,e,t){return n.createElement(e,t)}function Yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function iS(n,e,t){n.appendChild(e,t)}function rC(n,e,t,r,i){r!==null?Yd(n,e,t,r,i):iS(n,e,t)}function iF(n,e,t){n.removeChild(null,e,t)}function oF(n,e,t){n.setAttribute(e,"style",t)}function sF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function oS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&D1(n,e,r),i!==null&&sF(n,e,i),o!==null&&oF(n,e,o)}function qy(n,e,t,r,i,o,s,a,u,l,h){let p=Ft+r,g=p+i,y=aF(p,g),C=typeof l=="function"?l():l;return y[ce]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function aF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function cF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=qy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Gy(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[_n]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),Wm(p),p[ct]=p[Yi]=n,p[_t]=t,p[yr]=s||n&&n[yr],p[Be]=a||n&&n[Be],p[Qi]=u||n&&n[Qi]||null,p[nn]=o,p[rc]=L1(),p[nc]=h,p[$m]=l,p[rn]=e.type==2?n[rn]:p,p}function uF(n,e,t){let r=wn(e,n),i=cF(t),o=n[yr].rendererFactory,s=Wy(n,Gy(n,i,null,sS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function sS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function aS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Wy(n,e){return n[ds]?n[Bm][tn]=e:n[ds]=e,n[Bm]=e,e}function cn(n=1){cS(Ct(),Te(),no()+n,!1)}function cS(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&$d(e,o,0,t)}si(t)}var uh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(uh||{});function Ay(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],u=null;(s&uh.SignalBased)!==0&&(u=e[o][yt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):AC(e,u,o,r)}finally{ie(i)}}function uS(n,e,t,r,i){let o=no(),s=r&2;try{si(-1),s&&e.length>Ft&&cS(n,e,Ft,!1),De(s?2:0,i,t),t(r,i)}finally{si(o),De(s?3:1,i,t)}}function Ky(n,e,t){mF(n,e,t),(t.flags&64)===64&&yF(n,e,t)}function lS(n,e,t=wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function lF(n,e,t,r){let o=r.get(YC,QC)||t===Er.ShadowDom,s=n.selectRootElement(e,o);return dF(s),s}function dF(n){hF(n)}var hF=()=>null;function fF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dS(n,e,t,r,i,o){let s=e[ce];if(Qy(n,s,e,t,r)){oi(n)&&gF(e,n.index);return}pF(n,e,t,r,i,o)}function pF(n,e,t,r,i,o){if(n.type&3){let s=wn(n,e);t=fF(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function gF(n,e){let t=sn(e,n);t[J]&16||(t[J]|=64)}function mF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;oi(t)&&uF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Kd(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Qd(e,n,s,t);if(_c(u,e),o!==null&&wF(e,s-r,u,a,t,o),Ln(a)){let l=sn(t.index,e);l[_t]=Qd(e,n,s,t)}}}function yF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Ub();try{si(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Md(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&vF(u,l)}}finally{si(-1),Md(s)}}function vF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Y1(e,o.selectors,!1)&&(r??=[],Ln(o)?r.unshift(o):r.push(o))}return r}function _F(n,e,t,r,i,o){let s=wn(n,e);EF(e[Be],s,o,n.value,t,r,i)}function EF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Dd(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function wF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Ay(r,t,u,l)}}function IF(n,e){let t=n[Qi];if(!t)return;t.get(Vt,null)?.(e)}function Qy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Ay(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Ay(h,l,r,i),a=!0}return a}function DF(n,e){let t=sn(e,n),r=t[ce];TF(r,t);let i=t[_n];i!==null&&t[nc]===null&&(t[nc]=ZC(i,t[Qi])),De(18),Yy(r,t,t[_t]),De(19,t[_t])}function TF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Yy(n,e,t){xd(e);try{let r=n.viewQuery;r!==null&&Cy(1,r,t);let i=n.template;i!==null&&uS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xi]?.finishViewCreation(n),n.staticContentQueries&&JC(n,e),n.staticViewQueries&&Cy(2,n.viewQuery,t);let o=n.components;o!==null&&bF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,kd()}}function bF(n,e){for(let t=0;t<e.length;t++)DF(n,e[t])}function CF(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[J]&4096?4096:16,u=Gy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Zi]=l;let h=n[Xi];return h!==null&&(u[Xi]=h.createEmbeddedView(o)),Yy(o,u,t),u}finally{ie(i)}}function iC(n,e){return!e||e.firstChild===null||HC(n)}var oC=!1,SF=new L(""),AF;function Zy(n,e){return AF(n,e)}var jn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(jn||{});function Jy(n){return(n.flags&32)===32}function gs(n,e,t,r,i){if(r!=null){let o,s=!1;En(r)?o=r:Fn(r)&&(s=!0,r=r[_n]);let a=on(r);n===0&&t!==null?i==null?iS(e,t,a):Yd(e,t,a,i||null,!0):n===1&&t!==null?Yd(e,t,a,i||null,!0):n===2?iF(e,a,s):n===3&&e.destroyNode(a),o!=null&&UF(e,n,o,t,i)}}function RF(n,e){fS(n,e),e[_n]=null,e[nn]=null}function NF(n,e,t,r,i,o){r[_n]=i,r[nn]=e,lh(n,r,t,1,i,o)}function fS(n,e){e[yr].changeDetectionScheduler?.notify(9),lh(n,e,e[Be],2,null,null)}function PF(n){let e=n[ds];if(!e)return fy(n[ce],n);for(;e;){let t=null;if(Fn(e))t=e[ds];else{let r=e[Lt];r&&(t=r)}if(!t){for(;e&&!e[tn]&&e!==n;)Fn(e)&&fy(e[ce],e),e=e[ct];e===null&&(e=n),Fn(e)&&fy(e[ce],e),t=e&&e[tn]}e=t}}function Xy(n,e){let t=n[sc],r=t.indexOf(e);t.splice(r,1)}function pS(n,e){if(to(e))return;let t=e[Be];t.destroyNode&&lh(n,e,t,3,null,null),PF(e)}function fy(n,e){if(to(e))return;let t=ie(null);try{e[J]&=-129,e[J]|=256,e[qt]&&Nl(e[qt]),xF(n,e),MF(n,e),e[ce].type===1&&e[Be].destroy();let r=e[Zi];if(r!==null&&En(e[ct])){r!==e[ct]&&Xy(r,e);let i=e[Xi];i!==null&&i.detachView(n)}Ty(e)}finally{ie(t)}}function MF(n,e){let t=n.cleanup,r=e[ls];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ls]=null);let i=e[pr];if(i!==null){e[pr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ic];if(o!==null){e[ic]=null;for(let s of o)s.destroy()}}function xF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof io)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];De(4,a,u);try{u.call(a)}finally{De(5,a,u)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function kF(n,e,t){return OF(n,e.parent,t)}function OF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[_n];if(oi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Er.None||i===Er.Emulated)return null}return wn(r,t)}function FF(n,e,t){return VF(n,e,t)}function LF(n,e,t){return n.type&40?wn(n,t):null}var VF=LF,sC;function ev(n,e,t,r){let i=kF(n,r,e),o=e[Be],s=r.parent||e[nn],a=FF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)rC(o,i,t[u],a,!1);else rC(o,i,t,a,!1);sC!==void 0&&sC(o,r,e,t,i)}function fc(n,e){if(e!==null){let t=e.type;if(t&3)return wn(e,n);if(t&4)return Ry(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fc(n,r);{let i=n[e.index];return En(i)?Ry(-1,i):on(i)}}else{if(t&128)return fc(n,e.next);if(t&32)return Zy(e,n)()||on(n[e.index]);{let r=gS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ti(n[rn]);return fc(i,r)}else return fc(n,e.next)}}}return null}function gS(n,e){if(e!==null){let r=n[rn][nn],i=e.projection;return r.projection[i]}return null}function Ry(n,e){let t=Lt+n+1;if(t<e.length){let r=e[t],i=r[ce].firstChild;if(i!==null)return fc(r,i)}return e[ii]}function tv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&_c(on(a),r),t.flags|=2),!Jy(t))if(u&8)tv(n,e,t.child,r,i,o,!1),gs(e,n,i,a,o);else if(u&32){let l=Zy(t,r),h;for(;h=l();)gs(e,n,i,h,o);gs(e,n,i,a,o)}else u&16?jF(n,e,r,t,i,o):gs(e,n,i,a,o);t=s?t.projectionNext:t.next}}function lh(n,e,t,r,i,o){tv(t,r,n.firstChild,e,i,o,!1)}function jF(n,e,t,r,i,o){let s=t[rn],u=s[nn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];gs(e,n,i,h,o)}else{let l=u,h=s[ct];HC(r)&&(l.flags|=128),tv(n,e,l,h,i,o,!0)}}function UF(n,e,t,r,i){let o=t[ii],s=on(t);o!==s&&gs(e,n,r,o,i);for(let a=Lt;a<t.length;a++){let u=t[a];lh(u[ce],u,n,e,r,o)}}function BF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:jn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=jn.Important),n.setStyle(t,r,i,o))}}function mc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(on(o)),En(o)&&mS(o,r);let s=t.type;if(s&8)mc(n,e,t.child,r);else if(s&32){let a=Zy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=gS(e,t);if(Array.isArray(a))r.push(...a);else{let u=ti(e[rn]);mc(u[ce],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function mS(n,e){for(let t=Lt;t<n.length;t++){let r=n[t],i=r[ce].firstChild;i!==null&&mc(r[ce],r,i,e)}n[ii]!==n[_n]&&e.push(n[ii])}function yS(n){if(n[eo]!==null){for(let e of n[eo])e.impl.addSequence(e);n[eo].length=0}}var vS=[];function $F(n){return n[qt]??HF(n)}function HF(n){let e=vS.pop()??Object.create(qF);return e.lView=n,e}function zF(n){n.lView[qt]!==n&&(n.lView=null,vS.push(n))}var qF=ne(O({},Li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{fs(n.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function GF(n){let e=n[qt]??Object.create(WF);return e.lView=n,e}var WF=ne(O({},Li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ti(n.lView);for(;e&&!_S(e[ce]);)e=ti(e);e&&Km(e)},consumerOnSignalRead(){this.lView[qt]=this}});function _S(n){return n.type!==2}function ES(n){if(n[ic]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ic])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var KF=100;function nv(n,e=0){let r=n[yr].rendererFactory,i=!1;i||r.begin?.();try{QF(n,e)}finally{i||r.end?.()}}function QF(n,e){let t=ey();try{ty(!0),Ny(n,e);let r=0;for(;cc(n);){if(r===KF)throw new j(103,!1);r++,Ny(n,1)}}finally{ty(t)}}function wS(n,e){Xm(e?uc.Exhaustive:uc.OnlyDirtyViews);try{nv(n)}finally{Xm(uc.Off)}}function YF(n,e,t,r){if(to(e))return;let i=e[J],o=!1,s=!1;xd(e);let a=!0,u=null,l=null;o||(_S(n)?(l=$F(e),u=Vi(l)):Al()===null?(a=!1,l=GF(e),u=Vi(l)):e[qt]&&(Nl(e[qt]),e[qt]=null));try{Wm(e),Fb(n.bindingStartIndex),t!==null&&uS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Bd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&$d(e,y,0,null),dy(e,0)}if(s||ZF(e),ES(e),IS(e,0),n.contentQueries!==null&&JC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Bd(e,y)}else{let y=n.contentHooks;y!==null&&$d(e,y,1),dy(e,1)}XF(n,e);let p=n.components;p!==null&&TS(e,p,0);let g=n.viewQuery;if(g!==null&&Cy(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Bd(e,y)}else{let y=n.viewHooks;y!==null&&$d(e,y,2),dy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sd]){for(let y of e[Sd])y();e[Sd]=null}o||(yS(e),e[J]&=-73)}catch(h){throw o||fs(e),h}finally{l!==null&&(Wo(l,u),a&&zF(l)),kd()}}function IS(n,e){for(let t=qC(n);t!==null;t=GC(t))for(let r=Lt;r<t.length;r++){let i=t[r];DS(i,e)}}function ZF(n){for(let e=qC(n);e!==null;e=GC(e)){if(!(e[J]&2))continue;let t=e[sc];for(let r=0;r<t.length;r++){let i=t[r];Km(i)}}}function JF(n,e,t){De(18);let r=sn(e,n);DS(r,t),De(19,r[_t])}function DS(n,e){Nd(n)&&Ny(n,e)}function Ny(n,e){let r=n[ce],i=n[J],o=n[qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qa(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)YF(r,n,r.template,n[_t]);else if(i&8192){let a=ie(null);try{ES(n),IS(n,1);let u=r.components;u!==null&&TS(n,u,1),yS(n)}finally{ie(a)}}}function TS(n,e,t){for(let r=0;r<e.length;r++)JF(n,e[r],t)}function XF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)si(~i);else{let o=i,s=t[++r],a=t[++r];jb(s,o);let u=e[o];De(24,u),a(2,u),De(25,u)}}}finally{si(-1)}}function rv(n,e){let t=ey()?64:1088;for(n[yr].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=ti(n);if(hs(n)&&!r)return n;n=r}return null}function bS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function eL(n,e,t,r=!0){let i=e[ce];if(tL(i,e,n,t),r){let s=Ry(t,n),a=e[Be],u=a.parentNode(n[ii]);u!==null&&NF(i,n[nn],a,e,u,s)}let o=e[nc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Py(n,e){if(n.length<=Lt)return;let t=Lt+e,r=n[t];if(r){let i=r[Zi];i!==null&&i!==n&&Xy(i,r),e>0&&(n[t-1][tn]=r[tn]);let o=ec(n,Lt+e);RF(r[ce],r);let s=o[Xi];s!==null&&s.detachView(o[ce]),r[ct]=null,r[tn]=null,r[J]&=-129}return r}function tL(n,e,t,r){let i=Lt+r,o=t.length;r>0&&(t[i-1][tn]=e),r<o-Lt?(e[tn]=t[i],Pm(t,Lt+r,e)):(t.push(e),e[tn]=null),e[ct]=t;let s=e[Zi];s!==null&&t!==s&&CS(s,e);let a=e[Xi];a!==null&&a.insertView(n),Pd(e),e[J]|=128}function CS(n,e){let t=n[sc],r=e[ct];if(Fn(r))n[J]|=2;else{let i=r[ct][rn];e[rn]!==i&&(n[J]|=2)}t===null?n[sc]=[e]:t.push(e)}var ci=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ce];return mc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[_t]}set context(e){this._lView[_t]=e}get destroyed(){return to(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(En(e)){let t=e[oc],r=t?t.indexOf(this):-1;r>-1&&(Py(e,r),ec(t,r))}this._attachedToViewContainer=!1}pS(this._lView[ce],this._lView)}onDestroy(e){Qm(this._lView,e)}markForCheck(){rv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Pd(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,nv(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Qi].get(SF,oC)}catch{this.exhaustive=oC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=hs(this._lView),t=this._lView[Zi];t!==null&&!e&&Xy(t,this._lView),fS(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=hs(this._lView),r=this._lView[Zi];r!==null&&!t&&CS(r,this._lView),Pd(this._lView)}};var uo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nL;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=CF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ci(o)}}return n})();function nL(){return SS(St(),Te())}function SS(n,e){return n.type&4?new uo(e,n,sh(n,e)):null}function iv(n,e,t,r,i){let o=n.data[e];if(o===null)o=rL(n,e,t,r,i),Vb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Mb();o.injectorIndex=s===null?-1:s.injectorIndex}return ps(o,!0),o}function rL(n,e,t,r,i){let o=Zm(),s=Jm(),a=s?o:o&&o.parent,u=n.data[e]=oL(n,a,t,e,r,i);return iL(n,u,o,s),u}function iL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function oL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Rb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var nY=new RegExp(`^(\\d+)*(${B1}|${U1})*(.*)`);var sL=()=>null;function aC(n,e){return sL(n,e)}var AS=class{},dh=class{},My=class{resolveComponentFactory(e){throw new j(917,!1)}},Ec=class{static NULL=new My},Gt=class{},Es=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>aL()}return n})();function aL(){let n=Te(),e=St(),t=sn(e.index,n);return(Fn(t)?t:n)[Be]}var RS=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var Hd={},xy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Hd,r);return i!==Hd||t===Hd?i:this.parentInjector.get(e,t,r)}};function cC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Em(i,a);else if(o==2){let u=a,l=e[++s];r=Em(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function fe(n,e=0){let t=Te();if(t===null)return q(n,e);let r=St();return UC(r,t,at(n),e)}function NS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}lL(n,e,t,a,o,u,l)}o!==null&&r!==null&&cL(t,r,o)}function cL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function uL(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Ln(y)&&(u=!0,uL(n,t,g)),Iy(Kd(t,e),n,y.type)}mL(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=aS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=gc(t.mergedAttrs,y.hostAttrs),hL(n,t,e,p,y),gL(p,y,i),s!==null&&s.has(y)){let[P,R]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}dL(n,t,o)}function dL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))uC(0,e,i,r),uC(1,e,i,r),dC(e,r,!1);else{let o=t.get(i);lC(0,e,o,r),lC(1,e,o,r),dC(e,r,!0)}}}function uC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),PS(e,o)}}function lC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),PS(e,s)}}function PS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function dC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||zy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function hL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ei(i.type,!0)),s=new io(o,Ln(i),fe);n.blueprint[r]=s,t[r]=s,fL(n,e,r,aS(n,t,i.hostVars,wr),i)}function fL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;pL(s)!=a&&s.push(a),s.push(t,r,o)}}function pL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function gL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ln(e)&&(t[""]=n)}}function mL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function MS(n,e,t,r,i,o,s,a){let u=e.consts,l=ac(u,s),h=iv(e,n,2,r,l);return o&&NS(e,t,h,ac(u,a),i),h.mergedAttrs=gc(h.mergedAttrs,h.attrs),h.attrs!==null&&cC(h,h.attrs,!1),h.mergedAttrs!==null&&cC(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function xS(n,e){MC(n,e),Hm(e)&&n.queries.elementEnd(e)}function ov(n){return OS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function kS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function OS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yL(n,e,t){return n[e]=t}function ws(n,e,t){if(t===wr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function py(n,e,t){return function r(i){let o=oi(n)?sn(n.index,e):e;rv(o,5);let s=e[_t],a=hC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=hC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function hC(n,e,t,r){let i=ie(null);try{return De(6,e,t),t(r)!==!1}catch(o){return IF(n,o),!1}finally{De(7,e,t),ie(i)}}function vL(n,e,t,r,i,o,s,a){let u=Ad(n),l=!1,h=null;if(!r&&u&&(h=_L(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=wn(n,t),g=r?r(p):p;H1(t,g,o,a);let y=i.listen(g,o,a),C=r?P=>r(on(P[n.index])):n.index;FS(C,e,t,o,a,y,!1)}return l}function _L(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ls],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function FS(n,e,t,r,i,o,s){let a=e.firstCreatePass?bb(e):null,u=Tb(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function fC(n,e,t,r,i,o){let s=e[t],a=e[ce],l=a.data[t].outputs[r],p=s[l].subscribe(o);FS(n.index,a,e,i,o,p,!0)}var ky=Symbol("BINDING");var Zd=class extends Ec{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=mr(e);return new oo(t,this.ngModule)}};function EL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&uh.SignalBased)!==0};return i&&(o.transform=i),o})}function wL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function IL(n,e,t){let r=e instanceof ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new xy(t,r):t}function DL(n){let e=n.get(Gt,null);if(e===null)throw new j(407,!1);let t=n.get(RS,null),r=n.get(gr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function TL(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return rS(e,t,t==="svg"?_b:t==="math"?Eb:null)}var oo=class extends dh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=EL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=eF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){De(22);let a=ie(null);try{let u=this.componentDef,l=bL(r,u,s,o),h=IL(u,i||this.ngModule,e),p=DL(h),g=p.rendererFactory.createRenderer(null,u),y=r?lF(g,r,u.encapsulation,h):TL(u,g),C=s?.some(pC)||o?.some(k=>typeof k!="function"&&k.bindings.some(pC)),P=Gy(null,l,null,512|sS(u),null,null,p,g,h,null,ZC(y,h,!0));P[Ft]=y,xd(P);let R=null;try{let k=MS(Ft,l,P,"#host",()=>l.directiveRegistry,!0,0);y&&(oS(g,y,k),_c(y,P)),Ky(l,P,k),XC(l,k,P),xS(l,k),t!==void 0&&SL(k,this.ngContentSelectors,t),R=sn(k.index,P),P[_t]=R[_t],Yy(l,P,null)}catch(k){throw R!==null&&Ty(R),Ty(P),k}finally{De(23),kd()}return new Jd(this.componentType,P,!!C)}finally{ie(a)}}};function bL(n,e,t,r){let i=n?["ng-version","20.0.4"]:tF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[ky].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[ky].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Om(p);u.push(g)}return qy(0,null,CL(o,s),1,a,u,null,null,null,[i],null)}function CL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function pC(n){let e=n[ky].kind;return e==="input"||e==="twoWay"}var Jd=class extends AS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Rd(t[ce],Ft),this.location=sh(this._tNode,t),this.instance=sn(this._tNode.index,t)[_t],this.hostView=this.changeDetectorRef=new ci(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Qy(r,i[ce],i,e,t);this.previousInputValues.set(e,t);let s=sn(r.index,i);rv(s,1)}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function SL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $n=(()=>{class n{static __NG_ELEMENT_ID__=AL}return n})();function AL(){let n=St();return NL(n,Te())}var RL=$n,LS=class extends RL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sh(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=By(this._hostTNode,this._hostLView);if(kC(e)){let t=Gd(e,this._hostLView),r=qd(e),i=t[ce].data[r+8];return new ro(i,t)}else return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Lt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,iC(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!g1(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new oo(mr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(ke,null);k&&(o=k)}let g=mr(h.componentType??{}),y=aC(this._lContainer,g?.id??null),C=y?.firstChild??null,P=h.create(p,i,C,o,s,a);return this.insertImpl(P.hostView,l,iC(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(wb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ct],l=new LS(u,u[nn],u[ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return eL(s,i,o,r),e.attachToViewContainerRef(),Pm(gy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Py(this._lContainer,t);r&&(ec(gy(this._lContainer),t),pS(r[ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=Py(this._lContainer,t);return r&&ec(gy(this._lContainer),t)!=null?new ci(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gC(n){return n[oc]}function gy(n){return n[oc]||(n[oc]=[])}function NL(n,e){let t,r=e[n.index];return En(r)?t=r:(t=bS(r,e,null,n),e[n.index]=t,Wy(e,t)),ML(t,e,n,r),new LS(t,n,e)}function PL(n,e){let t=n[Be],r=t.createComment(""),i=wn(e,n),o=t.parentNode(i);return Yd(t,o,r,t.nextSibling(i),!1),r}var ML=OL,xL=()=>!1;function kL(n,e,t){return xL(n,e,t)}function OL(n,e,t,r){if(n[ii])return;let i;t.type&8?i=on(r):i=PL(e,t),n[ii]=i}var mC=new Set;function wc(n){mC.has(n)||(mC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var so=class{},hh=class{};var Xd=class extends so{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=km(e);this._bootstrapComponents=tS(o.bootstrap),this._r3Injector=oy(e,t,[{provide:so,useValue:this},{provide:Ec,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},eh=class extends hh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xd(this.moduleType,e,[])}};var yc=class extends so{injector;componentFactoryResolver=new Zd(this);instance=null;constructor(e){super();let t=new Wi([...e.providers,{provide:so,useValue:this},{provide:Ec,useValue:this.componentFactoryResolver}],e.parent||us(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ic(n,e,t=null){return new yc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var FL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Fm(!1,t.type),i=r.length>0?Ic([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(q(ke))})}return n})();function un(n){return vs(()=>{let e=VS(n),t=ne(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$y.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Er.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&wc("NgStandalone"),jS(t);let r=n.dependencies;return t.directiveDefs=yC(r,!1),t.pipeDefs=yC(r,!0),t.id=BL(t),t})}function LL(n){return mr(n)||Om(n)}function VL(n){return n!==null}function Wt(n){return vs(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jL(n,e){if(n==null)return ni;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=uh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function UL(n){if(n==null)return ni;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function $e(n){return vs(()=>{let e=VS(n);return jS(e),e})}function sv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function VS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ni,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jL(n.inputs,e),outputs:UL(n.outputs),debugInfo:null}}function jS(n){n.features?.forEach(e=>e(n))}function yC(n,e){if(!n)return null;let t=e?fb:LL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(VL)}function BL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $L(n){return Object.getPrototypeOf(n.prototype).constructor}function Dn(n){let e=$L(n.type),t=!0,r=[n];for(;e;){let i;if(Ln(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=my(n.inputs),s.declaredInputs=my(n.declaredInputs),s.outputs=my(n.outputs);let a=i.hostBindings;a&&WL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&qL(n,u),l&&GL(n,l),HL(n,i),ab(n.outputs,i.outputs),Ln(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Dn&&(t=!1)}}e=Object.getPrototypeOf(e)}zL(r)}function HL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function zL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gc(i.hostAttrs,t=gc(t,i.hostAttrs))}}function my(n){return n===ni?{}:n===Ht?[]:n}function qL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function GL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function WL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function KL(n,e,t,r,i,o,s,a,u){let l=e.consts,h=iv(e,n,4,s||null,a||null);Ym()&&NS(e,t,h,ac(l,u),hS),h.mergedAttrs=gc(h.mergedAttrs,h.attrs),MC(e,h);let p=h.tView=qy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function QL(n,e,t,r,i,o,s,a,u,l,h){let p=t+Ft,g=e.firstCreatePass?KL(p,e,n,r,i,o,s,a,l):e.data[p];u&&(g.flags|=u),ps(g,!1);let y=YL(e,n,g,t);Fd()&&ev(e,n,y,g),_c(y,n);let C=bS(y,n,y,g);return n[p]=C,Wy(n,C),kL(C,g,n),Ad(g)&&Ky(e,n,g),l!=null&&lS(n,g,h),g}function Ir(n,e,t,r,i,o,s,a){let u=Te(),l=Ct(),h=ac(l.consts,o);return QL(u,l,n,e,t,r,i,h,void 0,s,a),Ir}var YL=ZL;function ZL(n,e,t,r){return Ld(!0),e[Be].createComment("")}var fh=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(fh||{}),lo=new L(""),US=!1,Oy=class extends Z{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,jm()&&(this.destroyRef=A(vr,{optional:!0})??void 0,this.pendingTasks=A(_r,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof _e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},me=Oy;function BS(n){let e,t;function r(){n=hc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function vC(n){return queueMicrotask(()=>n()),()=>{n=hc}}var av="isAngularZone",th=av+"_ID",JL=0,ue=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new me(!1);onMicrotaskEmpty=new me(!1);onStable=new me(!1);onError=new me(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=US}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(av)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XL,hc,hc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},XL={};function cv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){BS(()=>{n.callbackScheduled=!1,Fy(n),n.isCheckStableRunning=!0,cv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Fy(n)}function tV(n){let e=()=>{eV(n)},t=JL++;n._inner=n._inner.fork({name:"angular",properties:{[av]:!0,[th]:t,[th+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nV(u))return r.invokeTask(o,s,a,u);try{return _C(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),EC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return _C(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rV(u)&&e(),EC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Fy(n),cv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Fy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function _C(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EC(n){n._nesting--,cv(n)}var nh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new me;onMicrotaskEmpty=new me;onStable=new me;onError=new me;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nV(n){return $S(n,"__ignore_ng_zone__")}function rV(n){return $S(n,"__scheduler_tick__")}function $S(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var uv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),HS=[0,1,2,3],zS=(()=>{class n{ngZone=A(ue);scheduler=A(gr);errorHandler=A(vn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){A(lo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&De(16),this.executing=!0;for(let r of HS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&De(17)}register(t){let{view:r}=t;r!==void 0?((r[eo]??=[]).push(t),fs(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(fh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),rh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[eo];e&&(this.view[eo]=e.filter(t=>t!==this))}};function Is(n,e){!e?.injector&&Um(Is);let t=e?.injector??A(Ae);return wc("NgAfterNextRender"),oV(n,t,e,!0)}function iV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oV(n,e,t,r){let i=e.get(uv);i.impl??=e.get(zS);let o=e.get(lo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(vr):null,a=e.get(Vd,null,{optional:!0}),u=new rh(i.impl,iV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var lv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var dv=new L("");function Dr(n){return!!n&&typeof n.then=="function"}function ph(n){return!!n&&typeof n.subscribe=="function"}var qS=new L("");var hv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=A(qS,{optional:!0})??[];injector=A(Ae);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Xe(this.injector,i);if(Dr(o))t.push(o);else if(ph(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gh=new L("");function GS(){Hg(()=>{let n="";throw new j(600,n)})}function WS(n){return n.isBoundToModule}var sV=10;var Tr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(Vt);afterRenderManager=A(uv);zonelessEnabled=A(dc);rootEffectScheduler=A(ly);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Z;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(_r);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Y(t=>!t))}constructor(){A(lo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=A(ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ae.NULL){return this._injector.get(ue).run(()=>{De(10);let s=t instanceof dh;if(!this._injector.get(hv).done){let C="";throw new j(405,C)}let u;s?u=t:u=this._injector.get(Ec).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=WS(u)?void 0:this._injector.get(so),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(dv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),pc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),De(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Gt,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sV;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!cc(i))continue;let o=r&&!this.zonelessEnabled?0:1;nv(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;pc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(gh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ds(n,e,t,r){let i=Te(),o=lc();if(ws(i,o,e)){let s=Ct(),a=Od();_F(a,i,n,e,t,r)}return Ds}function ui(n,e,t){let r=Te(),i=lc();if(ws(r,i,e)){let o=Ct(),s=Od();dS(s,r,n,e,r[Be],t)}return ui}function wC(n,e,t,r,i){Qy(e,n,t,i?"class":"style",r)}function Me(n,e,t,r){let i=Te(),o=Ct(),s=Ft+n,a=i[Be],u=o.firstCreatePass?MS(s,o,i,e,hS,Ym(),t,r):o.data[s],l=aV(o,i,u,a,e,n);i[s]=l;let h=Ad(u);return ps(u,!0),oS(a,l,u),!Jy(u)&&Fd()&&ev(o,i,l,u),(Cb()===0||h)&&_c(l,i),Sb(),h&&(Ky(o,i,u),XC(o,u,i)),r!==null&&lS(i,u),Me}function Re(){let n=St();Jm()?xb():(n=n.parent,ps(n,!1));let e=n;Nb(e)&&Pb(),Ab();let t=Ct();return t.firstCreatePass&&xS(t,e),e.classesWithoutHost!=null&&w1(e)&&wC(t,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&I1(e)&&wC(t,e,Te(),e.stylesWithoutHost,!1),Re}function ln(n,e,t,r){return Me(n,e,t,r),Re(),ln}var aV=(n,e,t,r,i,o)=>(Ld(!0),rS(r,i,Gb()));function li(){return Te()}var Dc="en-US";var cV=Dc;function KS(n){typeof n=="string"&&(cV=n.toLowerCase().replace(/_/g,"-"))}function et(n,e,t){let r=Te(),i=Ct(),o=St();return QS(i,r,r[Be],o,n,e,t),et}function QS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=py(r,e,o),vL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=py(r,e,o),fC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=py(r,e,o),fC(r,e,p,i,i,u)}}function dt(n=1){return qb(n)}function Tc(n){let e=kb();return qm(e,Ft+n)}function Ud(n,e){return n<<17|e<<2}function ao(n){return n>>17&32767}function uV(n){return(n&2)==2}function lV(n,e){return n&131071|e<<17}function Ly(n){return n|2}function ys(n){return(n&131068)>>2}function yy(n,e){return n&-131069|e<<2}function dV(n){return(n&1)===1}function Vy(n){return n|1}function hV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ao(s),u=ys(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||cs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=ao(n[a+1]);n[r+1]=Ud(g,a),g!==0&&(n[g+1]=yy(n[g+1],r)),n[a+1]=lV(n[a+1],r)}else n[r+1]=Ud(a,0),a!==0&&(n[a+1]=yy(n[a+1],r)),a=r;else n[r+1]=Ud(u,0),a===0?a=r:n[u+1]=yy(n[u+1],r),u=r;l&&(n[r+1]=Ly(n[r+1])),IC(n,h,r,!0),IC(n,h,r,!1),fV(e,h,n,r,o),s=Ud(a,u),o?e.classBindings=s:e.styleBindings=s}function fV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&cs(o,e)>=0&&(t[r+1]=Vy(t[r+1]))}function IC(n,e,t,r){let i=n[t+1],o=e===null,s=r?ao(i):ys(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];pV(u,e)&&(a=!0,n[s+1]=r?Vy(l):Ly(l)),s=r?ao(l):ys(l)}a&&(n[t+1]=r?Ly(i):Vy(i))}function pV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?cs(n,e)>=0:!1}function Tn(n,e){return gV(n,e,null,!0),Tn}function gV(n,e,t,r){let i=Te(),o=Ct(),s=Lb(2);if(o.firstUpdatePass&&yV(o,n,s,r),e!==wr&&ws(i,s,e)){let a=o.data[no()];IV(o,a,i,i[Be],n,i[s+1]=DV(e,t),r,s)}}function mV(n,e){return e>=n.expandoStartIndex}function yV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[no()],s=mV(n,t);TV(o,r)&&e===null&&!s&&(e=!1),e=vV(i,o,e,r),hV(i,o,e,t,s,r)}}function vV(n,e,t,r){let i=Bb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vy(null,n,e,t,r),t=vc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=vy(i,n,e,t,r),o===null){let u=_V(n,e,r);u!==void 0&&Array.isArray(u)&&(u=vy(null,n,e,u[1],r),u=vc(u,e.attrs,r),EV(n,e,r,u))}else o=wV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function _V(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ys(r)!==0)return n[ao(r)]}function EV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ao(i)]=r}function wV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=vc(r,s,t)}return vc(r,e.attrs,t)}function vy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=vc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function vc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),hb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function IV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=dV(l)?DC(u,e,t,i,ys(l),s):void 0;if(!ih(h)){ih(o)||uV(l)&&(o=DC(u,null,t,i,a,s));let p=zm(no(),t);BF(r,s,p,i,o)}}function DC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===wr&&(g=p?Ht:void 0);let y=p?Cd(g,r):h===r?g:void 0;if(l&&!ih(y)&&(y=Cd(u,r)),ih(y)&&(a=y,s))return a;let C=n[i+1];i=s?ao(C):ys(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Cd(u,r))}return a}function ih(n){return n!==void 0}function DV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(eS(n)))),n}function TV(n,e){return(n.flags&(e?8:16))!==0}function Et(n,e=""){let t=Te(),r=Ct(),i=n+Ft,o=r.firstCreatePass?iv(r,i,1,e,null):r.data[i],s=bV(r,t,o,e,n);t[i]=s,Fd()&&ev(r,t,s,o),ps(o,!1)}var bV=(n,e,t,r,i)=>(Ld(!0),nF(e[Be],r));function CV(n,e,t,r=""){return ws(n,lc(),t)?e+Dd(t)+r:wr}function Ts(n,e,t){let r=Te(),i=CV(r,n,e,t);return i!==wr&&SV(r,no(),i),Ts}function SV(n,e,t){let r=zm(e,n);rF(n[Be],r,t)}function bc(n,e,t){ay(e)&&(e=e());let r=Te(),i=lc();if(ws(r,i,e)){let o=Ct(),s=Od();dS(s,r,n,e,r[Be],t)}return bc}function mh(n,e){let t=ay(n);return t&&n.set(e),t}function Cc(n,e){let t=Te(),r=Ct(),i=St();return QS(r,t,t[Be],i,n,e),Cc}function AV(n,e,t){let r=Ct();if(r.firstCreatePass){let i=Ln(n);jy(t,r.data,r.blueprint,i,!0),jy(e,r.data,r.blueprint,i,!1)}}function jy(n,e,t,r,i){if(n=at(n),Array.isArray(n))for(let o=0;o<n.length;o++)jy(n[o],e,t,r,i);else{let o=Ct(),s=Te(),a=St(),u=Gi(n)?n:at(n.provide),l=Vm(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Gi(n)||!n.multi){let y=new io(l,i,fe),C=Ey(u,e,i?h:h+g,p);C===-1?(Iy(Kd(a,s),o,u),_y(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=Ey(u,e,h+g,p),C=Ey(u,e,h,h+g),P=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!P){Iy(Kd(a,s),o,u);let k=PV(i?NV:RV,t.length,i,r,l);!i&&R&&(t[C].providerFactory=k),_y(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=YS(t[i?C:y],l,!i&&r);_y(o,n,y>-1?y:C,k)}!i&&r&&R&&t[C].componentProviders++}}}function _y(n,e,t,r){let i=Gi(e),o=yb(e);if(i||o){let u=(o?at(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function YS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ey(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RV(n,e,t,r){return Uy(this.multi,[])}function NV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Qd(t,t[ce],this.providerFactory.index,r);o=a.slice(0,s),Uy(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Uy(i,o);return o}function Uy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function PV(n,e,t,r,i){let o=new io(n,t,fe);return o.multi=[],o.index=e,o.componentProviders=0,YS(o,i,r&&!t),o}function Hn(n,e=[]){return t=>{t.providersResolver=(r,i)=>AV(r,i?i(n):n,e)}}function MV(n,e){let t=n[e];return t===wr?void 0:t}function xV(n,e,t,r,i,o){let s=e+t;return ws(n,s,i)?yL(n,s+1,o?r.call(o,i):r(i)):MV(n,s+1)}function fv(n,e){let t=Ct(),r,i=n+Ft;t.firstCreatePass?(r=kV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ei(r.type,!0)),s,a=bt(fe);try{let u=Wd(!1),l=o();return Wd(u),Gm(t,Te(),i,l),l}finally{bt(a)}}function kV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function pv(n,e,t){let r=n+Ft,i=Te(),o=qm(i,r);return OV(i,r)?xV(i,Ob(),e,o.transform,t,o):o.transform(t)}function OV(n,e){return n[ce].data[e].pure}function Sc(n,e){return SS(n,e)}var oh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gv=(()=>{class n{compileModuleSync(t){return new eh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=km(t),o=tS(i.declarations).reduce((s,a)=>{let u=mr(a);return u&&s.push(new oo(u)),s},[]);return new oh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FV=(()=>{class n{zone=A(ue);changeDetectionScheduler=A(gr);applicationRef=A(Tr);applicationErrorHandler=A(Vt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZS=new L("",{factory:()=>!1});function mv({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ue(ne(O({},vv()),{scheduleInRootZone:t})),[{provide:ue,useFactory:n},{provide:ri,multi:!0,useFactory:()=>{let r=A(FV,{optional:!0});return()=>r.initialize()}},{provide:ri,multi:!0,useFactory:()=>{let r=A(LV);return()=>{r.initialize()}}},e===!0?{provide:cy,useValue:!0}:[],{provide:uy,useValue:t??US},{provide:Vt,useFactory:()=>{let r=A(ue),i=A(ke),o;return s=>{o??=i.get(vn),r.runOutsideAngular(()=>o.handleError(s))}}}]}function yv(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=mv({ngZoneFactory:()=>{let i=vv(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&wc("NgZone_CoalesceEvent"),new ue(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return zt([{provide:ZS,useValue:!0},{provide:dc,useValue:!1},r])}function vv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var LV=(()=>{class n{subscription=new _e;initialized=!1;zone=A(ue);pendingTasks=A(_r);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JS=(()=>{class n{applicationErrorHandler=A(Vt);appRef=A(Tr);taskService=A(_r);ngZone=A(ue);zonelessEnabled=A(dc);tracing=A(lo,{optional:!0});disableScheduling=A(cy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new _e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(th):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(uy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?vC:BS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VV(){return typeof $localize<"u"&&$localize.locale||Dc}var yh=new L("",{providedIn:"root",factory:()=>A(yh,{optional:!0,skipSelf:!0})||VV()});function Kt(n){return rb(n)}function bs(n,e){return kl(n,e?.equal)}var XS=class{[yt];constructor(e){this[yt]=e}destroy(){this[yt].destroy()}};var r0=Symbol("InputSignalNode#UNSET"),sj=ne(O({},Ol),{transformFn:void 0,applyValueToInputSignal(n,e){Ko(n,e)}});function i0(n,e){let t=Object.create(sj);t.value=n,t.transformFn=e?.transform;function r(){if(Go(t),t.value===r0){let i=null;throw new j(-950,i)}return t.value}return r[yt]=t,r}var aj=new L("");aj.__NG_ELEMENT_ID__=n=>{let e=St();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function e0(n,e){return i0(n,e)}function cj(n){return i0(r0,n)}var o0=(e0.required=cj,e0);var Cs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},s0=new Cs("20.0.4");var _v=new L(""),uj=new L("");function Ac(n){return!n.moduleRef}function lj(n){let e=Ac(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ue);return t.run(()=>{Ac(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Vt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ac(n)){let o=()=>e.destroy(),s=n.platformInjector.get(_v);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(_v);s.add(o),n.moduleRef.onDestroy(()=>{pc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return hj(r,t,()=>{let o=e.get(hv);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(yh,Dc);if(KS(s||Dc),!e.get(uj,!0))return Ac(n)?e.get(Tr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ac(n)){let u=e.get(Tr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return dj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var dj;function hj(n,e,t){try{let r=t();return Dr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var vh=null;function fj(n=[],e){return Ae.create({name:e,providers:[{provide:tc,useValue:"platform"},{provide:_v,useValue:new Set([()=>vh=null])},...n]})}function pj(n=[]){if(vh)return vh;let e=fj(n);return vh=e,GS(),gj(e),e}function gj(n){let e=n.get(ah,null);Xe(n,()=>{e?.forEach(t=>t())})}function bv(){return!1}var zn=(()=>{class n{static __NG_ELEMENT_ID__=mj}return n})();function mj(n){return yj(St(),Te(),(n&16)===16)}function yj(n,e,t){if(oi(n)&&!t){let r=sn(n.index,e);return new ci(r,r)}else if(n.type&175){let r=e[rn];return new ci(r,e)}return null}var Ev=class{constructor(){}supports(e){return ov(e)}create(e){return new wv(e)}},vj=(n,e)=>e,wv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||vj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<t0(r,i,o)?t:r,a=t0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;h<=C&&C<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ov(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,kS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Iv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _h),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _h),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Iv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Dv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_h=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Dv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function t0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function n0(){return new Eh([new Ev])}var Eh=(()=>{class n{factories;static \u0275prov=V({token:n,providedIn:"root",factory:n0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||n0()),deps:[[n,new SC,new Rt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function a0(n){De(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=pj(r),o=[mv({}),{provide:gr,useExisting:JS},Kb,...t||[]],s=new yc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return lj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{De(9)}}function qn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function c0(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function u0(n,e){let t=mr(n),r=e.elementInjector||us();return new oo(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var h0=null;function dn(){return h0}function Cv(n){h0??=n}var Rc=class{},Sv=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(f0),providedIn:"platform"})}return n})();var f0=(()=>{class n extends Sv{_location;_history;_doc=A(Ce);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dn().getBaseHref(this._doc)}onPopState(t){let r=dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function p0(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function l0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function di(n){return n&&n[0]!=="?"?`?${n}`:n}var wh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(m0),providedIn:"root"})}return n})(),g0=new L(""),m0=(()=>{class n extends wh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+di(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+di(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+di(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(Sv),q(g0,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ss=(()=>{class n{_subject=new Z;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=wj(l0(d0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+di(r))}normalize(t){return n.stripTrailingSlash(Ej(this._basePath,d0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+di(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+di(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=di;static joinWithSlash=p0;static stripTrailingSlash=l0;static \u0275fac=function(r){return new(r||n)(q(wh))};static \u0275prov=V({token:n,factory:()=>_j(),providedIn:"root"})}return n})();function _j(){return new Ss(q(wh))}function Ej(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function d0(n){return n.replace(/\/index.html$/,"")}function wj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ih=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Th=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ih(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),y0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);y0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(fe($n),fe(uo),fe(Eh))};static \u0275dir=$e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function y0(n,e){n.context.$implicit=e.item}var Nc=(()=>{class n{_viewContainer;_context=new Dh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){v0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){v0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(fe($n),fe(uo))};static \u0275dir=$e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Dh=class{$implicit=null;ngIf=null};function v0(n,e){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}function Ij(n,e){return new j(2100,!1)}var Av=class{createSubscription(e,t,r){return Kt(()=>e.subscribe({next:t,error:r}))}dispose(e){Kt(()=>e.unsubscribe())}},Rv=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Dj=new Rv,Tj=new Av,Nv=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=A(Vt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Dr(t))return Dj;if(ph(t))return Tj;throw Ij(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(fe(zn,16))};static \u0275pipe=sv({name:"async",type:n,pure:!1})}return n})();var hi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wt({type:n});static \u0275inj=Ot({})}return n})();function Pc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ho=class{};var Pv="browser",bj="server";function _0(n){return n===Pv}function E0(n){return n===bj}var Sh=new L(""),Ov=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(q(Sh),q(ue))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Mc=class{_doc;constructor(e){this._doc=e}manager},bh="ng-app-id";function I0(n){for(let e of n)e.remove()}function D0(n,e){let t=e.createElement("style");return t.textContent=n,t}function Cj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${bh}="${e}"],link[${bh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(bh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function xv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Fv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=E0(o),Cj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,D0);r?.forEach(i=>this.addUsage(i,this.external,xv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(I0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])I0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,D0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,xv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(bh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(q(Ce),q(_s),q(ch,8),q(Bn))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Mv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lv=/%COMP%/g;var b0="%COMP%",Sj=`_nghost-${b0}`,Aj=`_ngcontent-${b0}`,Rj=!0,Nj=new L("",{providedIn:"root",factory:()=>Rj});function Pj(n){return Aj.replace(Lv,n)}function Mj(n){return Sj.replace(Lv,n)}function C0(n,e){return e.map(t=>t.replace(Lv,n))}var Vv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new xc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ch?i.applyToHost(t):i instanceof kc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Er.Emulated:o=new Ch(u,l,r,this.appId,h,s,a,p,g);break;case Er.ShadowDom:return new kv(u,l,t,r,s,a,this.nonce,p,g);default:o=new kc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(q(Ov),q(Fv),q(_s),q(Nj),q(Ce),q(Bn),q(ue),q(ch),q(lo,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),xc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Mv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(T0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(T0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Mv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Mv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(jn.DashCase|jn.Important)?e.style.setProperty(t,r,i&jn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&jn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=dn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function T0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kv=class extends xc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=C0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=xv(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kc=class extends xc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?C0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ch=class extends kc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=Pj(h),this.hostAttr=Mj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ah=class n extends Rc{supportsDOMEvents=!0;static makeCurrent(){Cv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=xj();return t==null?null:kj(t)}resetBaseElement(){Oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pc(document.cookie,e)}},Oc=null;function xj(){return Oc=Oc||document.head.querySelector("base"),Oc?Oc.getAttribute("href"):null}function kj(n){return new URL(n,document.baseURI).pathname}var Oj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),A0=(()=>{class n extends Mc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(q(Ce))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),S0=["alt","control","meta","shift"],Fj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},R0=(()=>{class n extends Mc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),S0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Fj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),S0.forEach(s=>{if(s!==i){let a=Lj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(q(Ce))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function jv(n,e){return a0(O({rootComponent:n},Vj(e)))}function Vj(n){return{appProviders:[...Hj,...n?.providers??[]],platformProviders:$j}}function jj(){Ah.makeCurrent()}function Uj(){return new vn}function Bj(){return Hy(document),document}var $j=[{provide:Bn,useValue:Pv},{provide:ah,useValue:jj,multi:!0},{provide:Ce,useFactory:Bj}];var Hj=[{provide:tc,useValue:"root"},{provide:vn,useFactory:Uj},{provide:Sh,useClass:A0,multi:!0,deps:[Ce]},{provide:Sh,useClass:R0,multi:!0,deps:[Ce]},Vv,Fv,Ov,{provide:Gt,useExisting:Vv},{provide:ho,useClass:Oj},[]];var Rs=class{},Lc=class{},fo=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Nh=class{encodeKey(e){return N0(e)}encodeValue(e){return N0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function zj(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var qj=/%(\d[a-f0-9])/gi,Gj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function N0(n){return encodeURIComponent(n).replace(qj,(e,t)=>Gj[t]??e)}function Rh(n){return`${n}`}var fi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Nh,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=zj(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Rh):[Rh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Rh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Rh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ph=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Wj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function P0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function M0(n){return typeof Blob<"u"&&n instanceof Blob}function x0(n){return typeof FormData<"u"&&n instanceof FormData}function Kj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var k0="Content-Type",O0="Accept",F0="X-Request-URL",L0="text/plain",V0="application/json",Qj=`${V0}, ${L0}, */*`,Fc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(Wj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new fo,this.context??=new Ph,!this.params)this.params=new fi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||P0(this.body)||M0(this.body)||x0(this.body)||Kj(this.body)?this.body:this.body instanceof fi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||x0(this.body)?null:M0(this.body)?this.body.type||null:P0(this.body)?null:typeof this.body=="string"?L0:this.body instanceof fi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?V0:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:g,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},As=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(As||{}),Ns=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new fo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Mh=class n extends Ns{constructor(e={}){super(e)}type=As.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},xh=class n extends Ns{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=As.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},kh=class extends Ns{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Yj=200,Zj=204;function Uv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Jj=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Fc)o=t;else{let u;i.headers instanceof fo?u=i.headers:u=new fo(i.headers);let l;i.params&&(i.params instanceof fi?l=i.params:l=new fi({fromObject:i.params})),o=new Fc(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=z(o).pipe(Zr(u=>this.handler.handle(u)));if(t instanceof Fc||i.observe==="events")return s;let a=s.pipe(st(u=>u instanceof xh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new j(2806,!1);return u.body}));case"blob":return a.pipe(Y(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new j(2807,!1);return u.body}));case"text":return a.pipe(Y(u=>{if(u.body!==null&&typeof u.body!="string")throw new j(2808,!1);return u.body}));case"json":default:return a.pipe(Y(u=>u.body))}case"response":return a;default:throw new j(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new fi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Uv(i,r))}post(t,r,i={}){return this.request("POST",t,Uv(i,r))}put(t,r,i={}){return this.request("PUT",t,Uv(i,r))}static \u0275fac=function(r){return new(r||n)(q(Rs))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var Xj=new L("");function e2(n,e){return e(n)}function t2(n,e,t){return(r,i)=>Xe(t,()=>e(r,o=>n(o,i)))}var j0=new L(""),n2=new L(""),U0=new L("",{providedIn:"root",factory:()=>!0});var Oh=(()=>{class n extends Rs{backend;injector;chain=null;pendingTasks=A(ai);contributeToStability=A(U0);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(j0),...this.injector.get(n2,[])]));this.chain=r.reduceRight((i,o)=>t2(i,o,this.injector),e2)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Hi(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(q(Lc),q(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var r2=/^\)\]\}',?\n/,i2=RegExp(`^${F0}:`,"m");function o2(n){return"responseURL"in n&&n.responseURL?n.responseURL:i2.test(n.getAllResponseHeaders())?n.getResponseHeader(F0):null}var Bv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new j(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?Ee(r.\u0275loadImpl()):z(null)).pipe(Ue(()=>new H(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((P,R)=>s.setRequestHeader(P,R.join(","))),t.headers.has(O0)||s.setRequestHeader(O0,Qj),!t.headers.has(k0)){let P=t.detectContentTypeHeader();P!==null&&s.setRequestHeader(k0,P)}if(t.responseType){let P=t.responseType.toLowerCase();s.responseType=P!=="json"?P:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let P=s.statusText||"OK",R=new fo(s.getAllResponseHeaders()),k=o2(s)||t.url;return u=new Mh({headers:R,status:s.status,statusText:P,url:k}),u},h=()=>{let{headers:P,status:R,statusText:k,url:G}=l(),$=null;R!==Zj&&($=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=$?Yj:0);let pe=R>=200&&R<300;if(t.responseType==="json"&&typeof $=="string"){let ze=$;$=$.replace(r2,"");try{$=$!==""?JSON.parse($):null}catch(ve){$=ze,pe&&(pe=!1,$={error:ve,text:$})}}pe?(o.next(new xh({body:$,headers:P,status:R,statusText:k,url:G||void 0})),o.complete()):o.error(new kh({error:$,headers:P,status:R,statusText:k,url:G||void 0}))},p=P=>{let{url:R}=l(),k=new kh({error:P,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(k)},g=!1,y=P=>{g||(o.next(l()),g=!0);let R={type:As.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=P=>{let R={type:As.UploadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:As.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(q(ho))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),B0=new L(""),s2="XSRF-TOKEN",a2=new L("",{providedIn:"root",factory:()=>s2}),c2="X-XSRF-TOKEN",u2=new L("",{providedIn:"root",factory:()=>c2}),Vc=class{},l2=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(q(Ce),q(a2))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function d2(n,e){let t=n.url.toLowerCase();if(!A(B0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=A(Vc).getToken(),i=A(u2);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function $v(...n){let e=[Jj,Bv,Oh,{provide:Rs,useExisting:Oh},{provide:Lc,useFactory:()=>A(Xj,{optional:!0})??A(Bv)},{provide:j0,useValue:d2,multi:!0},{provide:B0,useValue:!0},{provide:Vc,useClass:l2}];for(let t of n)e.push(...t.\u0275providers);return zt(e)}var $0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(q(Ce))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Xc=Symbol("RouteTitle"),Wv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function mo(n){return new Wv(n)}function Y0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function f2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gn(n[t],e[t]))return!1;return!0}function Gn(n,e){let t=n?Kv(n):void 0,r=e?Kv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Z0(n[i],e[i]))return!1;return!0}function Kv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Z0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function J0(n){return n.length>0?n[n.length-1]:null}function Sr(n){return ad(n)?n:Dr(n)?Ee(Promise.resolve(n)):z(n)}var p2={exact:eA,subset:tA},X0={exact:g2,subset:m2,ignored:()=>!0};function H0(n,e,t){return p2[t.paths](n.root,e.root,t.matrixParams)&&X0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function g2(n,e){return Gn(n,e)}function eA(n,e,t){if(!po(n.segments,e.segments)||!Vh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!eA(n.children[r],e.children[r],t))return!1;return!0}function m2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Z0(n[t],e[t]))}function tA(n,e,t){return nA(n,e,e.segments,t)}function nA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!po(i,t)||e.hasChildren()||!Vh(i,t,r))}else if(n.segments.length===t.length){if(!po(n.segments,t)||!Vh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!tA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!po(n.segments,i)||!Vh(n.segments,i,r)||!n.children[re]?!1:nA(n.children[re],e,o,r)}}function Vh(n,e,t){return e.every((r,i)=>X0[t](n[i].parameters,r.parameters))}var Kn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){return _2.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jh(this)}},pi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=mo(this.parameters),this._parameterMap}toString(){return iA(this)}};function y2(n,e){return po(n,e)&&n.every((t,r)=>Gn(t.parameters,e[r].parameters))}function po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function v2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var eu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new yo,providedIn:"root"})}return n})(),yo=class{parse(e){let t=new Yv(e);return new Kn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jc(e.root,!0)}`,r=I2(e.queryParams),i=typeof e.fragment=="string"?`#${E2(e.fragment)}`:"";return`${t}${r}${i}`}},_2=new yo;function jh(n){return n.segments.map(e=>iA(e)).join("/")}function jc(n,e){if(!n.hasChildren())return jh(n);if(e){let t=n.children[re]?jc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${jc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=v2(n,(r,i)=>i===re?[jc(n.children[re],!1)]:[`${i}:${jc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${jh(n)}/${t[0]}`:`${jh(n)}/(${t.join("//")})`}}function rA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fh(n){return rA(n).replace(/%3B/gi,";")}function E2(n){return encodeURI(n)}function Qv(n){return rA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uh(n){return decodeURIComponent(n)}function z0(n){return Uh(n.replace(/\+/g,"%20"))}function iA(n){return`${Qv(n.path)}${w2(n.parameters)}`}function w2(n){return Object.entries(n).map(([e,t])=>`;${Qv(e)}=${Qv(t)}`).join("")}function I2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Fh(t)}=${Fh(i)}`).join("&"):`${Fh(t)}=${Fh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var D2=/^[^\/()?;#]+/;function Hv(n){let e=n.match(D2);return e?e[0]:""}var T2=/^[^\/()?;=#]+/;function b2(n){let e=n.match(T2);return e?e[0]:""}var C2=/^[^=?&#]+/;function S2(n){let e=n.match(C2);return e?e[0]:""}var A2=/^[^&#]+/;function R2(n){let e=n.match(A2);return e?e[0]:""}var Yv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new we(e,t)),r}parseSegment(){let e=Hv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new pi(Uh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=b2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Hv(this.remaining);i&&(r=i,this.capture(r))}e[Uh(t)]=Uh(r)}parseQueryParam(e){let t=S2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=R2(this.remaining);s&&(r=s,this.capture(r))}let i=z0(t),o=z0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function oA(n){return n.segments.length>0?new we([],{[re]:n}):n}function sA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=sA(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new we(n.segments,e);return N2(t)}function N2(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new we(n.segments.concat(e.segments),e.children)}return n}function Os(n){return n instanceof Kn}function aA(n,e,t=null,r=null){let i=cA(n);return uA(i,e,t,r)}function cA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new we(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=oA(r);return e??i}function uA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zv(i,i,i,t,r);let o=P2(e);if(o.toRoot())return zv(i,i,new we([],{}),t,r);let s=M2(o,i,n),a=s.processChildren?Bc(s.segmentGroup,s.index,o.commands):dA(s.segmentGroup,s.index,o.commands);return zv(i,s.segmentGroup,a,t,r)}function Bh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zc(n){return typeof n=="object"&&n!=null&&n.outlets}function zv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=lA(n,e,t);let a=oA(sA(s));return new Kn(a,o,i)}function lA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=lA(o,e,t)}),new we(n.segments,r)}var $h=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bh(r[0]))throw new j(4003,!1);let i=r.find(zc);if(i&&i!==J0(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function P2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new $h(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new $h(t,e,r)}var xs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function M2(n,e,t){if(n.isAbsolute)return new xs(e,!0,0);if(!t)return new xs(e,!1,NaN);if(t.parent===null)return new xs(t,!0,0);let r=Bh(n.commands[0])?0:1,i=t.segments.length-1+r;return x2(t,i,n.numberOfDoubleDots)}function x2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function k2(n){return zc(n[0])?n[0].outlets:{[re]:n}}function dA(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Bc(n,e,t);let r=O2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new we(n.segments.slice(r.pathIndex),n.children),Bc(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?Zv(n,e,t):r.match?Bc(n,0,i):Zv(n,e,t)}function Bc(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=k2(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Bc(n.children[re],e,t);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function O2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(zc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!G0(u,l,s))return o;r+=2}else{if(!G0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(zc(o)){let u=F2(o.outlets);return new we(r,u)}if(i===0&&Bh(t[0])){let u=n.segments[e];r.push(new pi(u.path,q0(t[0]))),i++;continue}let s=zc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Bh(a)?(r.push(new pi(s,q0(a))),i+=2):(r.push(new pi(s,{})),i++)}return new we(r,{})}function F2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Zv(new we([],{}),0,r))}),e}function q0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function G0(n,e,t){return n==t.path&&Gn(e,t.parameters)}var $c="imperative",tt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(tt||{}),Yt=class{id;url;constructor(e,t){this.id=e,this.url=t}},vo=class extends Yt{type=tt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends Yt{urlAfterRedirects;type=tt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Nt||{}),qc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qc||{}),Wn=class extends Yt{reason;code;type=tt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends Yt{reason;code;type=tt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Fs=class extends Yt{error;target;type=tt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gc=class extends Yt{urlAfterRedirects;state;type=tt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class extends Yt{urlAfterRedirects;state;type=tt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zh=class extends Yt{urlAfterRedirects;state;shouldActivate;type=tt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qh=class extends Yt{urlAfterRedirects;state;type=tt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gh=class extends Yt{urlAfterRedirects;state;type=tt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wh=class{route;type=tt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kh=class{route;type=tt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qh=class{snapshot;type=tt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yh=class{snapshot;type=tt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zh=class{snapshot;type=tt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jh=class{snapshot;type=tt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wc=class{},Ls=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function L2(n){return!(n instanceof Wc)&&!(n instanceof Ls)}function V2(n,e){return n.providers&&!n._injector&&(n._injector=Ic(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bn(n){return n.outlet||re}function j2(n,e){let t=n.filter(r=>bn(r)===e);return t.push(...n.filter(r=>bn(r)!==e)),t}function tu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Xh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Us(this.rootInjector)}},Us=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Xh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(q(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ef=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Jv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Jv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Xv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xv(e,this._root).map(t=>t.value)}};function Jv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Jv(n,t);if(r)return r}return null}function Xv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Xv(n,t);if(r.length)return r.unshift(e),r}return[]}var Qt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ms(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kc=class extends ef{snapshot;constructor(e,t){super(e),this.snapshot=t,a_(this,e)}toString(){return this.snapshot.toString()}};function hA(n){let e=U2(n),t=new Ze([new pi("",{})]),r=new Ze({}),i=new Ze({}),o=new Ze({}),s=new Ze(""),a=new gi(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Kc(new Qt(a,[]),e)}function U2(n){let e={},t={},r={},i="",o=new go([],e,r,i,t,re,n,null,{});return new Qc("",new Qt(o,[]))}var gi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Y(l=>l[Xc]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>mo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>mo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&pA(i)&&(r.resolve[Xc]=i.title),r}var go=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qc=class extends ef{url;constructor(e,t){super(t),this.url=e,a_(this,t)}toString(){return fA(this._root)}};function a_(n,e){e.value._routerState=n,e.children.forEach(t=>a_(n,t))}function fA(n){let e=n.children.length>0?` { ${n.children.map(fA).join(", ")} } `:"";return`${n.value}${e}`}function qv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gn(e.params,t.params)||n.paramsSubject.next(t.params),f2(e.url,t.url)||n.urlSubject.next(t.url),Gn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function e_(n,e){let t=Gn(n.params,e.params)&&y2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||e_(n.parent,e.parent))}function pA(n){return typeof n.title=="string"||n.title===null}var gA=new L(""),nu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new me;deactivateEvents=new me;attachEvents=new me;detachEvents=new me;routerOutletData=o0(void 0);parentContexts=A(Us);location=A($n);changeDetector=A(zn);inputBinder=A(sf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new t_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Un]})}return n})(),t_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===gi?this.route:e===Us?this.childContexts:e===gA?this.outletData:this.parent.get(e,t)}},sf=new L("");var c_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=un({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ln(0,"router-outlet")},dependencies:[nu],encapsulation:2})}return n})();function u_(n){let e=n.children&&n.children.map(u_),t=e?ne(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=c_),t}function B2(n,e,t){let r=Yc(n,e._root,t?t._root:void 0);return new Kc(r,e)}function Yc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$2(n,e,t);return new Qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Yc(n,a)),s}}let r=H2(e.value),i=e.children.map(o=>Yc(n,o));return new Qt(r,i)}}function $2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yc(n,r,i);return Yc(n,r)})}function H2(n){return new gi(new Ze(n.url),new Ze(n.params),new Ze(n.queryParams),new Ze(n.fragment),new Ze(n.data),n.outlet,n.component,n)}var Vs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},mA="ngNavigationCancelingError";function nf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Os(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yA(!1,Nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function yA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[mA]=!0,t.cancellationCode=e,t}function z2(n){return vA(n)&&Os(n.url)}function vA(n){return!!n&&n[mA]}var q2=(n,e,t,r)=>Y(i=>(new n_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),n_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Yh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(qv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),qv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},rf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{component;route;constructor(e,t){this.component=e,this.route=t}};function G2(n,e,t){let r=n._root,i=e?e._root:null;return Uc(r,i,t,[r.value])}function W2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Im(n)?n:e.get(n):r}function Uc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ms(e);return n.children.forEach(s=>{K2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hc(a,t.getContext(s),i)),i}function K2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Q2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Uc(n,e,a?a.children:null,r,i):Uc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&Hc(e,a,i),i.canActivateChecks.push(new rf(r)),o.component?Uc(n,null,a?a.children:null,r,i):Uc(n,null,t,r,i);return i}function Q2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!po(n.url,e.url)||!Gn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e_(n,e)||!Gn(n.queryParams,e.queryParams);case"paramsChange":default:return!e_(n,e)}}function Hc(n,e,t){let r=Ms(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Hc(s,e.children.getContext(o),t):Hc(s,null,t):Hc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ks(e.outlet.component,i)):t.canDeactivateChecks.push(new ks(null,i)):t.canDeactivateChecks.push(new ks(null,i))}function ru(n){return typeof n=="function"}function Y2(n){return typeof n=="boolean"}function Z2(n){return n&&ru(n.canLoad)}function J2(n){return n&&ru(n.canActivate)}function X2(n){return n&&ru(n.canActivateChild)}function eU(n){return n&&ru(n.canDeactivate)}function tU(n){return n&&ru(n.canMatch)}function _A(n){return n instanceof hr||n?.name==="EmptyError"}var Lh=Symbol("INITIAL_VALUE");function js(){return Ue(n=>dd(n.map(e=>e.pipe($t(1),Xr(Lh)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===Lh)return Lh;if(t===!1||nU(t))return t}return!0}),st(e=>e!==Lh),$t(1)))}function nU(n){return Os(n)||n instanceof Vs}function rU(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?z(ne(O({},t),{guardsResult:!0})):iU(s,r,i,n).pipe(Je(a=>a&&Y2(a)?oU(r,o,n,e):z(a)),Y(a=>ne(O({},t),{guardsResult:a})))})}function iU(n,e,t,r){return Ee(n).pipe(Je(i=>lU(i.component,i.route,t,e,r)),fr(i=>i!==!0,!0))}function oU(n,e,t,r){return Ee(e).pipe(Zr(i=>os(aU(i.route.parent,r),sU(i.route,r),uU(n,i.path,t),cU(n,i.route,t))),fr(i=>i!==!0,!0))}function sU(n,e){return n!==null&&e&&e(new Zh(n)),z(!0)}function aU(n,e){return n!==null&&e&&e(new Qh(n)),z(!0)}function cU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>Ka(()=>{let s=tu(e)??t,a=Bs(o,s),u=J2(a)?a.canActivate(e,n):Xe(s,()=>a(e,n));return Sr(u).pipe(fr())}));return z(i).pipe(js())}function uU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>W2(s)).filter(s=>s!==null).map(s=>Ka(()=>{let a=s.guards.map(u=>{let l=tu(s.node)??t,h=Bs(u,l),p=X2(h)?h.canActivateChild(r,n):Xe(l,()=>h(r,n));return Sr(p).pipe(fr())});return z(a).pipe(js())}));return z(o).pipe(js())}function lU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let u=tu(e)??i,l=Bs(a,u),h=eU(l)?l.canDeactivate(n,e,t,r):Xe(u,()=>l(n,e,t,r));return Sr(h).pipe(fr())});return z(s).pipe(js())}function dU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=Bs(s,n),u=Z2(a)?a.canLoad(e,t):Xe(n,()=>a(e,t));return Sr(u)});return z(o).pipe(js(),EA(r))}function EA(n){return Ul(qe(e=>{if(typeof e!="boolean")throw nf(n,e)}),Y(e=>e===!0))}function hU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=Bs(s,n),u=tU(a)?a.canMatch(e,t):Xe(n,()=>a(e,t));return Sr(u)});return z(o).pipe(js(),EA(r))}var Zc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ps(n){return is(new Zc(n))}function fU(n){return is(new j(4e3,!1))}function pU(n){return is(yA(!1,Nt.GuardRejected))}var r_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[re])return fU(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return gU(t,i,o).pipe(Y(s=>{if(s instanceof Kn)throw new Jc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Jc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Kn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function gU(n,e,t){if(typeof n=="string")return z(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Sr(Xe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var i_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mU(n,e,t,r,i){let o=wA(n,e,t);return o.matched?(r=V2(e,r),hU(r,e,t,i).pipe(Y(s=>s===!0?o:O({},i_)))):z(o)}function wA(n,e,t){if(e.path==="**")return yU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},i_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Y0)(t,n,e);if(!i)return O({},i_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function yU(n){return{matched:!0,parameters:n.length>0?J0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function W0(n,e,t,r){return t.length>0&&EU(n,t,r)?{segmentGroup:new we(e,_U(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&wU(n,t,r)?{segmentGroup:new we(n.segments,vU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function vU(n,e,t,r){let i={};for(let o of t)if(af(n,e,o)&&!r[bn(o)]){let s=new we([],{});i[bn(o)]=s}return O(O({},r),i)}function _U(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&bn(r)!==re){let i=new we([],{});t[bn(r)]=i}return t}function EU(n,e,t){return t.some(r=>af(n,e,r)&&bn(r)!==re)}function wU(n,e,t){return t.some(r=>af(n,e,r))}function af(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function IU(n,e,t){return e.length===0&&!n.children[t]}var o_=class{};function DU(n,e,t,r,i,o,s="emptyOnly"){return new s_(n,e,t,r,i,s,o).recognize()}var TU=31,s_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new r_(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=W0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new Qt(r,t),o=new Qc("",i),s=aA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new go([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Yr(r=>{if(r instanceof Jc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Zc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof Qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(Zr(s=>{let a=r.children[s],u=j2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),md((s,a)=>(s.push(...a),s)),Jr(null),sm(),Je(s=>{if(s===null)return Ps(r);let a=IA(s);return bU(a),z(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(Zr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Yr(l=>{if(l instanceof Zc)return z(null);throw l}))),fr(u=>!!u),Yr(u=>{if(_A(u))return IU(r,i,o)?z(new o_):Ps(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return bn(r)!==s&&(s===re||!af(i,o,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=wA(t,i,o);if(!u)return Ps(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TU&&(this.allowRedirects=!1));let y=new go(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,K0(i),bn(i),i.component??i._loadedComponent??null,i,Q0(i)),C=tf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ue(R=>this.applyRedirects.lineralizeSegments(i,R)),Je(R=>this.processSegment(e,r,t,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=mU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ue(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ue(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,C=new go(g,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,K0(r),bn(r),r.component??r._loadedComponent??null,r,Q0(r)),P=tf(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(P.params),C.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:k}=W0(t,g,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Y($=>new Qt(C,$)));if(l.length===0&&k.length===0)return z(new Qt(C,[]));let G=bn(r)===o;return this.processSegment(h,l,R,k,G?re:o,!0,C).pipe(Y($=>new Qt(C,$ instanceof Qt?[$]:[])))}))):Ps(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):dU(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(qe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):pU(t))):z({routes:[],injector:e})}};function bU(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function CU(n){let e=n.value.routeConfig;return e&&e.path===""}function IA(n){let e=[],t=new Set;for(let r of n){if(!CU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=IA(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!t.has(r))}function K0(n){return n.data||{}}function Q0(n){return n.resolve||{}}function SU(n,e,t,r,i,o){return Je(s=>DU(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:u})=>ne(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function AU(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of DA(u))s.add(l);let a=0;return Ee(s).pipe(Zr(u=>o.has(u)?RU(u,r,n,e):(u.data=tf(u,u.parent,n).resolve,z(void 0))),qe(()=>a++),ss(1),Je(u=>a===s.size?z(t):vt))})}function DA(n){let e=n.children.map(t=>DA(t)).flat();return[n,...e]}function RU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!pA(i)&&(o[Xc]=i.title),Ka(()=>(n.data=tf(n,n.parent,t).resolve,NU(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function NU(n,e,t,r){let i=Kv(n);if(i.length===0)return z({});let o={};return Ee(i).pipe(Je(s=>PU(n[s],e,t,r).pipe(fr(),qe(a=>{if(a instanceof Vs)throw nf(new yo,a);o[s]=a}))),ss(1),Y(()=>o),Yr(s=>_A(s)?vt:is(s)))}function PU(n,e,t,r){let i=tu(e)??r,o=Bs(n,i),s=o.resolve?o.resolve(e,t):Xe(i,()=>o(e,t));return Sr(s)}function Gv(n){return Ue(e=>{let t=n(e);return t?Ee(t).pipe(Y(()=>e)):z(e)})}var l_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Xc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(TA),providedIn:"root"})}return n})(),TA=(()=>{class n extends l_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(q($0))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iu=new L("",{providedIn:"root",factory:()=>({})}),ou=new L(""),bA=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(gv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Sr(t.loadComponent()).pipe(Y(SA),qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Hi(()=>{this.componentLoaders.delete(t)})),i=new ts(r,()=>new Z).pipe(es());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=CA(r,this.compiler,t,this.onLoadEndListener).pipe(Hi(()=>{this.childrenLoaders.delete(r)})),s=new ts(o,()=>new Z).pipe(es());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CA(n,e,t,r){return Sr(n.loadChildren()).pipe(Y(SA),Je(i=>i instanceof hh||Array.isArray(i)?z(i):Ee(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ou,[],{optional:!0,self:!0}).flat()),{routes:s.map(u_),injector:o}}))}function MU(n){return n&&typeof n=="object"&&"default"in n}function SA(n){return MU(n)?n.default:n}var cf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(xU),providedIn:"root"})}return n})(),xU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AA=new L("");var RA=new L(""),NA=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Z;transitionAbortWithErrorSubject=new Z;configLoader=A(bA);environmentInjector=A(ke);destroyRef=A(vr);urlSerializer=A(eu);rootContexts=A(Us);location=A(Ss);inputBindingEnabled=A(sf,{optional:!0})!==null;titleStrategy=A(l_);options=A(iu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(cf);createViewTransition=A(AA,{optional:!0});navigationErrorHandler=A(RA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Wh(i)),r=i=>this.events.next(new Kh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ne(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Ze(null),this.transitions.pipe(st(r=>r!==null),Ue(r=>{let i=!1;return z(r).pipe(Ue(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),vt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ne(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.rawUrl),u,qc.IgnoredSameUrlNavigation)),o.resolve(!1),vt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return z(o).pipe(Ue(u=>(this.events.next(new vo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?vt:Promise.resolve(u))),SU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ne(O({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Gc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new vo(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=hA(this.rootComponentType).snapshot;return this.currentTransition=r=ne(O({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:ne(O({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,z(r)}else{let u="";return this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,qc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),vt}}),qe(o=>{let s=new Hh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Y(o=>(this.currentTransition=r=ne(O({},o),{guards:G2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),rU(this.environmentInjector,o=>this.events.next(o)),qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw nf(this.urlSerializer,o.guardsResult);let s=new zh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),st(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Nt.GuardRejected),!1)),Gv(o=>{if(o.guards.canActivateChecks.length!==0)return z(o).pipe(qe(s=>{let a=new qh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ue(s=>{let a=!1;return z(s).pipe(AU(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Nt.NoDataFromResolver)}}))}),qe(s=>{let a=new Gh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Gv(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(qe(l=>{a.component=l}),Y(()=>{})));for(let l of a.children)u.push(...s(l));return u};return dd(s(o.targetSnapshot.root)).pipe(Jr(null),$t(1))}),Gv(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ee(a).pipe(Y(()=>r)):z(r)}),Y(o=>{let s=B2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ne(O({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),qe(()=>{this.events.next(new Wc)}),q2(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),$t(1),kn(new H(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(st(()=>!i&&!r.targetRouterState),qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Nt.Aborted)}))),qe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),kn(this.transitionAbortWithErrorSubject.pipe(qe(o=>{throw o}))),Hi(()=>{i||this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yr(o=>{if(this.destroyed)return r.resolve(!1),vt;if(i=!0,vA(o))this.events.next(new Wn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),z2(o)?this.events.next(new Ls(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Fs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Xe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Vs){let{message:u,cancellationCode:l}=nf(this.urlSerializer,a);this.events.next(new Wn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ls(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return vt}))}))}cancelNavigationTransition(t,r,i){let o=new Wn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kU(n){return n!==$c}var PA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(OU),providedIn:"root"})}return n})(),of=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},OU=(()=>{class n extends of{static \u0275fac=(()=>{let t;return function(i){return(t||(t=co(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MA=(()=>{class n{urlSerializer=A(eu);options=A(iu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(Ss);urlHandlingStrategy=A(cf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Kn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Kn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=hA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>A(FU),providedIn:"root"})}return n})(),FU=(()=>{class n extends MA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof vo?this.updateStateMemento():t instanceof Cr?this.commitTransition(r):t instanceof Gc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wn&&t.code!==Nt.SupersededByNewNavigation&&t.code!==Nt.Redirect?this.restoreHistory(r):t instanceof Fs?this.restoreHistory(r,!0):t instanceof br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=co(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d_(n,e){n.events.pipe(st(t=>t instanceof br||t instanceof Wn||t instanceof Fs||t instanceof Cr),Y(t=>t instanceof br||t instanceof Cr?0:(t instanceof Wn?t.code===Nt.Redirect||t.code===Nt.SupersededByNewNavigation:!1)?2:1),st(t=>t!==2),$t(1)).subscribe(()=>{e()})}var LU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},uf=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(lv);stateManager=A(MA);options=A(iu,{optional:!0})||{};pendingTasks=A(_r);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(NA);urlSerializer=A(eu);location=A(Ss);urlHandlingStrategy=A(cf);injector=A(ke);_events=new Z;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(PA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(ou,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(sf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _e;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Wn&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof br)this.navigated=!0;else if(r instanceof Ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kU(i.source)},s);this.scheduleNavigation(a,$c,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}L2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$c,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(Vt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(u_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=cA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return uA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Os(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$c,null,r)}navigate(t,r={skipLocationChange:!1}){return jU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},LU):r===!1?i=O({},VU):i=r,Os(t))return H0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return H0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return d_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var BU=new L("");function h_(n,...e){return zt([{provide:ou,multi:!0,useValue:n},[],{provide:gi,useFactory:$U,deps:[uf]},{provide:gh,multi:!0,useFactory:HU},e.map(t=>t.\u0275providers)])}function $U(n){return n.routerState.root}function HU(){let n=A(Ae);return e=>{let t=n.get(Tr);if(e!==t.components[0])return;let r=n.get(uf),i=n.get(zU);n.get(qU)===1&&r.initialNavigation(),n.get(GU,null,{optional:!0})?.setUpPreloading(),n.get(BU,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zU=new L("",{factory:()=>new Z}),qU=new L("",{providedIn:"root",factory:()=>1});var GU=new L("");var xA=()=>{};var FA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},KU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new p_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},p_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},QU=function(n){let e=FA(n);return lf.encodeByteArray(e,!0)},au=function(n){return QU(n).replace(/\./g,"")},df=function(n){try{return lf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YU=()=>m_().__FIREBASE_DEFAULTS__,ZU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&df(n[1]);return e&&JSON.parse(e)},hf=()=>{try{return xA()||YU()||ZU()||JU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},y_=n=>{var e,t;return(t=(e=hf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},LA=n=>{let e=y_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},v_=()=>{var n;return(n=hf())===null||n===void 0?void 0:n.config},__=n=>{var e;return(e=hf())===null||e===void 0?void 0:e[`_${n}`]};var _o=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function mi(n){return n.endsWith(".cloudworkstations.dev")}function ff(n){return w(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function VA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[au(JSON.stringify(t)),au(JSON.stringify(s)),""].join(".")}var su={};function XU(){let n={prod:[],emulator:[]};for(let e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function eB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var kA=!1;function pf(n,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||su[n]===e||su[n]||kA)return;su[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=XU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{kA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=eB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),R=document.getElementById(P)||document.createElement("a"),k=t("preprendIcon"),G=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let $=g.element;a($),h(R,P);let pe=l();u(G,k),$.append(G,C,R,pe),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function tB(){var n;let e=(n=hf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HA(){let n=nt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zA(){return!tB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cu(){try{return typeof indexedDB=="object"}catch{return!1}}function qA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var nB="FirebaseError",Zt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}},Cn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?rB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zt(i,a,r)}};function rB(n,e){return n.replace(iB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var iB=/\{\$([^}]+)}/g;function GA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(OA(o)&&OA(s)){if(!Qn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function OA(n){return n!==null&&typeof n=="object"}function $s(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function WA(n,e){let t=new g_(n,e);return t.subscribe.bind(t)}var g_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");oB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=f_),i.error===void 0&&(i.error=f_),i.complete===void 0&&(i.complete=f_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function oB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function f_(){}var ise=4*60*60*1e3;function Le(n){return n&&n._delegate?n._delegate:n}var Pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Eo="[DEFAULT]";var E_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new _o;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aB(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function sB(n){return n===Eo?void 0:n}function aB(n){return n.instantiationMode==="EAGER"}var gf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new E_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var cB=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),uB={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},lB=le.INFO,dB={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},hB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=dB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=lB,this._logHandler=hB,this._userLogHandler=null,cB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var fB=(n,e)=>e.some(t=>n instanceof t),KA,QA;function pB(){return KA||(KA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gB(){return QA||(QA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var YA=new WeakMap,I_=new WeakMap,ZA=new WeakMap,w_=new WeakMap,T_=new WeakMap;function mB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Zn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&YA.set(t,n)}).catch(()=>{}),T_.set(e,n),e}function yB(n){if(I_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});I_.set(n,e)}var D_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return I_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JA(n){D_=n(D_)}function vB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(mf(this),e,...t);return ZA.set(r,e.sort?e.sort():[e]),Zn(r)}:gB().includes(n)?function(...e){return n.apply(mf(this),e),Zn(YA.get(this))}:function(...e){return Zn(n.apply(mf(this),e))}}function _B(n){return typeof n=="function"?vB(n):(n instanceof IDBTransaction&&yB(n),fB(n,pB())?new Proxy(n,D_):n)}function Zn(n){if(n instanceof IDBRequest)return mB(n);if(w_.has(n))return w_.get(n);let e=_B(n);return e!==n&&(w_.set(n,e),T_.set(e,n)),e}var mf=n=>T_.get(n);function eR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Zn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Zn(s.result),u.oldVersion,u.newVersion,Zn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var EB=["get","getKey","getAll","getAllKeys","count"],wB=["put","add","delete","clear"],b_=new Map;function XA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(b_.get(e))return b_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=wB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EB.includes(t)))return;let o=function(s,...a){return w(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return b_.set(e,o),o}JA(n=>ne(O({},n),{get:(e,t,r)=>XA(e,t)||n.get(e,t,r),has:(e,t)=>!!XA(e,t)||n.has(e,t)}));var S_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function IB(n){let e=n.getComponent();return e?.type==="VERSION"}var A_="@firebase/app",tR="0.13.1";var Ar=new Yn("@firebase/app"),DB="@firebase/app-compat",TB="@firebase/analytics-compat",bB="@firebase/analytics",CB="@firebase/app-check-compat",SB="@firebase/app-check",AB="@firebase/auth",RB="@firebase/auth-compat",NB="@firebase/database",PB="@firebase/data-connect",MB="@firebase/database-compat",xB="@firebase/functions",kB="@firebase/functions-compat",OB="@firebase/installations",FB="@firebase/installations-compat",LB="@firebase/messaging",VB="@firebase/messaging-compat",jB="@firebase/performance",UB="@firebase/performance-compat",BB="@firebase/remote-config",$B="@firebase/remote-config-compat",HB="@firebase/storage",zB="@firebase/storage-compat",qB="@firebase/firestore",GB="@firebase/ai",WB="@firebase/firestore-compat",KB="firebase",QB="11.9.0";var R_="[DEFAULT]",YB={[A_]:"fire-core",[DB]:"fire-core-compat",[bB]:"fire-analytics",[TB]:"fire-analytics-compat",[SB]:"fire-app-check",[CB]:"fire-app-check-compat",[AB]:"fire-auth",[RB]:"fire-auth-compat",[NB]:"fire-rtdb",[PB]:"fire-data-connect",[MB]:"fire-rtdb-compat",[xB]:"fire-fn",[kB]:"fire-fn-compat",[OB]:"fire-iid",[FB]:"fire-iid-compat",[LB]:"fire-fcm",[VB]:"fire-fcm-compat",[jB]:"fire-perf",[UB]:"fire-perf-compat",[BB]:"fire-rc",[$B]:"fire-rc-compat",[HB]:"fire-gcs",[zB]:"fire-gcs-compat",[qB]:"fire-fst",[WB]:"fire-fst-compat",[GB]:"fire-vertex","fire-js":"fire-js",[KB]:"fire-js-all"};var uu=new Map,ZB=new Map,N_=new Map;function nR(n,e){try{n.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sn(n){let e=n.name;if(N_.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;N_.set(e,n);for(let t of uu.values())nR(t,n);for(let t of ZB.values())nR(t,n);return!0}function Hs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jt(n){return n==null?!1:n.settings!==void 0}var JB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Cn("app","Firebase",JB);var P_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var vi=QB;function k_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:R_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(t||(t=v_()),!t)throw yi.create("no-options");let o=uu.get(i);if(o){if(Qn(t,o.options)&&Qn(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new gf(i);for(let u of N_.values())s.addComponent(u);let a=new P_(t,r,s);return uu.set(i,a),a}function wo(n=R_){let e=uu.get(n);if(!e&&n===R_&&v_())return k_();if(!e)throw yi.create("no-app",{appName:n});return e}function yf(){return Array.from(uu.values())}function Ve(n,e,t){var r;let i=(r=YB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(a.join(" "));return}Sn(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var XB="firebase-heartbeat-database",e$=1,lu="firebase-heartbeat-store",C_=null;function sR(){return C_||(C_=eR(XB,e$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lu)}catch(t){console.warn(t)}}}}).catch(n=>{throw yi.create("idb-open",{originalErrorMessage:n.message})})),C_}function t$(n){return w(this,null,function*(){try{let t=(yield sR()).transaction(lu),r=yield t.objectStore(lu).get(aR(n));return yield t.done,r}catch(e){if(e instanceof Zt)Ar.warn(e.message);else{let t=yi.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(t.message)}}})}function rR(n,e){return w(this,null,function*(){try{let r=(yield sR()).transaction(lu,"readwrite");yield r.objectStore(lu).put(e,aR(n)),yield r.done}catch(t){if(t instanceof Zt)Ar.warn(t.message);else{let r=yi.create("idb-set",{originalErrorMessage:t?.message});Ar.warn(r.message)}}})}function aR(n){return`${n.name}!${n.options.appId}`}var n$=1024,r$=30,M_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new x_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>r$){let s=o$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ar.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=iR(),{heartbeatsToSend:r,unsentEntries:i}=i$(this._heartbeatsCache.heartbeats),o=au(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ar.warn(t),""}})}};function iR(){return new Date().toISOString().substring(0,10)}function i$(n,e=n$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),oR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),oR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var x_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return cu()?qA().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield t$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function oR(n){return au(JSON.stringify({version:2,heartbeats:n})).length}function o$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function s$(n){Sn(new Pt("platform-logger",e=>new S_(e),"PRIVATE")),Sn(new Pt("heartbeat",e=>new M_(e),"PRIVATE")),Ve(A_,tR,n),Ve(A_,tR,"esm2017"),Ve("fire-js","")}s$("");var a$="firebase",c$="11.9.1";Ve(a$,c$,"app");function cR(n){n===void 0&&(n=A(Ae));let e=n.get(ai);return t=>new H(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var _i=new Cs("ANGULARFIRE2_VERSION");function du(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var qs=(n,e)=>{let t=e?[e]:yf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zs=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(zs||{}),uR=bv()&&typeof Zone<"u"?zs.WARN:zs.SILENT;var vf=class{zone;delegate;constructor(e,t=nm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ei=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=A(ue);this.outsideAngular=t.runOutsideAngular(()=>new vf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new vf(typeof Zone>"u"?void 0:Zone.current,Wr))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lR=!1;function u$(n,e){!lR&&(uR>zs.SILENT||bv())&&(lR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),uR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function l$(n){let e=A(ue,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Io(n){let e=A(ue,{optional:!0});return e?e.run(()=>n()):n()}var d$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Xe(t,()=>Io(()=>n.apply(void 0,r)))),He=(n,e,t)=>(t||=e?zs.WARN:zs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=A(Ei),s=A(ai),a=A(ke)}catch{return u$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Io(()=>s.add())),i[l]=d$(i[l],r,a));let u=l$(()=>n.apply(this,i));return e?u instanceof H?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular),cR(a)):u instanceof Promise?Io(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>Xe(a,()=>Io(()=>h(g))),g=>Xe(a,()=>Io(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Io(()=>u):u instanceof H?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular)):Io(()=>u)});var Rr=class{constructor(e){return e}},Do=class{constructor(){return yf()}};function h$(n){return n&&n.length===1?n[0]:new Rr(wo())}var O_=new L("angularfire2._apps"),f$={provide:Rr,useFactory:h$,deps:[[new Rt,O_]]},p$={provide:Do,deps:[[new Rt,O_]]};function g$(n){return(e,t)=>{let r=t.get(Bn);Ve("angularfire",_i.full,"core"),Ve("angularfire",_i.full,"app"),Ve("angular",s0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Rr(i)}}function dR(n,...e){return zt([f$,p$,{provide:O_,useFactory:g$(n),multi:!0,deps:[ue,Ae,Ei,...e]}])}var hR=He(k_,!0);var m$=new Map,y$={activated:!1,tokenObservers:[]},v$={initialized:!1,enabled:!1};function An(n){return m$.get(n)||Object.assign({},y$)}function mR(){return v$}var _$="https://content-firebaseappcheck.googleapis.com/v1";var E$="exchangeDebugToken",fR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},aae=24*60*60*1e3;var V_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new _o,this.pending.promise.catch(t=>{}),yield w$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new _o,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function w$(n){return new Promise(e=>{setTimeout(e,n)})}var I$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},wi=new Cn("appCheck","AppCheck",I$);function yR(n){if(!An(n).activated)throw wi.create("use-before-activation",{appName:n.name})}function vR(r,i){return w(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw wi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw wi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw wi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function _R(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_$}/projects/${t}/apps/${r}:${E$}?key=${i}`,body:{debug_token:e}}}var D$="firebase-app-check-database",T$=1,j_="firebase-app-check-store";var _f=null;function b$(){return _f||(_f=new Promise((n,e)=>{try{let t=indexedDB.open(D$,T$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(wi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(j_,{keyPath:"compositeKey"})}}}catch(t){e(wi.create("storage-open",{originalErrorMessage:t?.message}))}}),_f)}function C$(n,e){return S$(A$(n),e)}function S$(n,e){return w(this,null,function*(){let r=(yield b$()).transaction(j_,"readwrite"),o=r.objectStore(j_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(wi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function A$(n){return`${n.options.appId}-${n.name}`}var hu=new Yn("@firebase/app-check");function F_(n,e){return cu()?C$(n,e).catch(t=>{hu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ER(){return mR().enabled}function wR(){return w(this,null,function*(){let n=mR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var R$={error:"UNKNOWN_ERROR"};function N$(n){return lf.encodeString(JSON.stringify(n),!1)}function U_(n,e=!1,t=!1){return w(this,null,function*(){let r=n.app;yR(r);let i=An(r),o=i.token,s;if(o&&!fu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(fu(l)?o=l:yield F_(r,void 0))}if(!e&&o&&fu(o))return{token:o.token};let a=!1;if(ER())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=vR(_R(r,yield wR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield F_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?hu.warn(l.message):t&&hu.error(l),L_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield An(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?hu.warn(l.message):t&&hu.error(l),s=l}let u;return o?s?fu(o)?u={token:o.token,internalError:s}:u=L_(s):(u={token:o.token},i.token=o,yield F_(r,o)):u=L_(s),a&&k$(r,u),u})}function P$(n){return w(this,null,function*(){let e=n.app;yR(e);let{provider:t}=An(e);if(ER()){let r=yield wR(),{token:i}=yield vR(_R(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function M$(n,e,t,r){let{app:i}=n,o=An(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&fu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),pR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pR(n))}function IR(n,e){let t=An(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pR(n){let{app:e}=n,t=An(e),r=t.tokenRefresher;r||(r=x$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function x$(n){let{app:e}=n;return new V_(()=>w(null,null,function*(){let t=An(e),r;if(t.token?r=yield U_(n,!0):r=yield U_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=An(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fR.RETRIAL_MIN_WAIT,fR.RETRIAL_MAX_WAIT)}function k$(n,e){let t=An(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function fu(n){return n.expireTimeMillis-Date.now()>0}function L_(n){return{token:N$(R$),error:n}}var B_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=An(this.app);for(let t of e)IR(this.app,t.next);return Promise.resolve()}};function O$(n,e){return new B_(n,e)}function F$(n){return{getToken:e=>U_(n,e),getLimitedUseToken:()=>P$(n),addTokenListener:e=>M$(n,"INTERNAL",e),removeTokenListener:e=>IR(n.app,e)}}var L$="@firebase/app-check",V$="0.10.0";var j$="app-check",gR="app-check-internal";function U$(){Sn(new Pt(j$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return O$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gR).initialize()})),Sn(new Pt(gR,n=>{let e=n.getProvider("app-check").getImmediate();return F$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(L$,V$)}U$();var B$="app-check";var Gs=class{constructor(){return qs(B$)}};var $$=["localhost","0.0.0.0","127.0.0.1"],Eae=typeof window<"u"&&$$.includes(window.location.hostname);function LR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var VR=LR,jR=new Cn("auth","Firebase",LR());var bf=new Yn("@firebase/auth");function H$(n,...e){bf.logLevel<=le.WARN&&bf.warn(`Auth (${vi}): ${n}`,...e)}function wf(n,...e){bf.logLevel<=le.ERROR&&bf.error(`Auth (${vi}): ${n}`,...e)}function Xn(n,...e){throw oE(n,...e)}function Rn(n,...e){return oE(n,...e)}function iE(n,e,t){let r=Object.assign(Object.assign({},VR()),{[e]:t});return new Cn("auth","Firebase",r).create(e,{appName:n.name})}function To(n){return iE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z$(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(n,"argument-error"),iE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jR.create(n,...e)}function Q(n,e,...t){if(!n)throw oE(e,...t)}function Nr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw wf(e),new Error(e)}function Mr(n,e){n||Nr(e)}function z_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function q$(){return DR()==="http:"||DR()==="https:"}function DR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function G$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q$()||BA()||"connection"in navigator)?navigator.onLine:!0}function W$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var bo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=jA()||$A()}get(){return G$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sE(n,e){Mr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Cf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var K$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Q$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y$=new bo(3e4,6e4);function aE(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ks(o,s,a,u){return w(this,arguments,function*(n,e,t,r,i={}){return UR(n,i,()=>w(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=$s(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return UA()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&mi(n.emulatorConfig.host)&&(y.credentials="include"),Cf.fetch()(yield BR(n,n.config.apiHost,t,p),y)}))})}function UR(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},K$),e);try{let i=new q_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ef(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Ef(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Ef(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iE(n,h,l);Xn(n,h)}}catch(i){if(i instanceof Zt)throw i;Xn(n,"network-request-failed",{message:String(i)})}})}function Z$(o,s,a,u){return w(this,arguments,function*(n,e,t,r,i={}){let l=yield Ks(n,e,t,r,i);return"mfaPendingCredential"in l&&Xn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function BR(n,e,t,r){return w(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?sE(n.config,i):`${n.config.apiScheme}://${i}`;return Q$.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var q_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rn(this.auth,"network-request-failed")),Y$.get())})}};function Ef(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Rn(n,e,r);return i.customData._tokenResponse=t,i}function J$(n,e){return w(this,null,function*(){return Ks(n,"POST","/v1/accounts:delete",e)})}function Sf(n,e){return w(this,null,function*(){return Ks(n,"POST","/v1/accounts:lookup",e)})}function pu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cE(n,e=!1){return w(this,null,function*(){let t=Le(n),r=yield t.getIdToken(e),i=uE(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:pu($_(i.auth_time)),issuedAtTime:pu($_(i.iat)),expirationTime:pu($_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $_(n){return Number(n)*1e3}function uE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{let i=df(t);return i?JSON.parse(i):(wf("Failed to decode base64 JWT payload"),null)}catch(i){return wf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TR(n){let e=uE(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function mu(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Zt&&X$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function X$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var G_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Af(n){return w(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield mu(n,Sf(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$R(o.providerUserInfo):[],a=eH(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new yu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function lE(n){return w(this,null,function*(){let e=Le(n);yield Af(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function eH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $R(n){return n.map(e=>{var{providerId:t}=e,r=Yl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function tH(n,e){return w(this,null,function*(){let t=yield UR(n,{},()=>w(null,null,function*(){let r=$s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield BR(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&mi(n.emulatorConfig.host)&&(u.credentials="include"),Cf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function nH(n,e){return w(this,null,function*(){return Ks(n,"POST","/v2/accounts:revokeToken",aE(n,e))})}var gu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=TR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield tH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Nr("not implemented")}};function Ii(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Di=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Yl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield mu(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cE(this,e)}reload(){return lE(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Af(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Jt(this.auth.app))return Promise.reject(To(this.auth));let e=yield this.getIdToken();return yield mu(this,J$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:pe,isAnonymous:ze,providerData:ve,stsTokenManager:D}=t;Q($&&D,e,"internal-error");let v=gu.fromJSON(this.name,D);Q(typeof $=="string",e,"internal-error"),Ii(p,e.name),Ii(g,e.name),Q(typeof pe=="boolean",e,"internal-error"),Q(typeof ze=="boolean",e,"internal-error"),Ii(y,e.name),Ii(C,e.name),Ii(P,e.name),Ii(R,e.name),Ii(k,e.name),Ii(G,e.name);let E=new n({uid:$,auth:e,email:g,emailVerified:pe,displayName:p,isAnonymous:ze,photoURL:C,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:k,lastLoginAt:G});return ve&&Array.isArray(ve)&&(E.providerData=ve.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new gu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Af(o),o})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?$R(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new gu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var bR=new Map;function Pr(n){Mr(n instanceof Function,"Expected a class definition");let e=bR.get(n);return e?(Mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bR.set(n,e),e)}var rH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),W_=rH;function If(n,e,t){return`firebase:${n}:${e}:${t}`}var Rf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=If(this.userKey,i.apiKey,o),this.fullPersistenceKey=If("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Sf(this.auth,{idToken:e}).catch(()=>{});return t?Di._fromGetAccountInfoResponse(this.auth,t,e):null}return Di._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n(Pr(W_),e,r);let i=(yield Promise.all(t.map(l=>w(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Pr(W_),s=If(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Sf(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Di._fromGetAccountInfoResponse(e,g,h)}else p=Di._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>w(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function CR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KR(e))return"Blackberry";if(QR(e))return"Webos";if(zR(e))return"Safari";if((e.includes("chrome/")||qR(e))&&!e.includes("edge/"))return"Chrome";if(WR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HR(n=nt()){return/firefox\//i.test(n)}function zR(n=nt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qR(n=nt()){return/crios\//i.test(n)}function GR(n=nt()){return/iemobile/i.test(n)}function WR(n=nt()){return/android/i.test(n)}function KR(n=nt()){return/blackberry/i.test(n)}function QR(n=nt()){return/webos/i.test(n)}function dE(n=nt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iH(n=nt()){var e;return dE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oH(){return HA()&&document.documentMode===10}function YR(n=nt()){return dE(n)||WR(n)||QR(n)||KR(n)||/windows phone/i.test(n)||GR(n)}function ZR(n,e=[]){let t;switch(n){case"Browser":t=CR(nt());break;case"Worker":t=`${CR(nt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${r}`}var K_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function sH(t){return w(this,arguments,function*(n,e={}){return Ks(n,"GET","/v2/passwordPolicy",aE(n,e))})}var aH=6,Q_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:aH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Y_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nf(this),this.idTokenSubscription=new Nf(this),this.beforeStateQueue=new K_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Rf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield Sf(this,{idToken:e}),r=yield Di._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var t;if(Jt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Af(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=W$()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Jt(this.app))return Promise.reject(To(this));let t=e?Le(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Jt(this.app)?Promise.reject(To(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Jt(this.app)?Promise.reject(To(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Pr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield sH(this),t=new Q_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield nH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Pr(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=yield Rf.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return w(this,null,function*(){var e;if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&H$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Vf(n){return Le(n)}var Nf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=WA(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hE={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cH(n){hE=n}function uH(n){return hE.loadJS(n)}function lH(){return hE.gapiScript}function JR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function fE(n,e){let t=Hs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qn(o,e??{}))return i;Xn(i,"already-initialized")}return t.initialize({options:e})}function dH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function pE(n,e,t){let r=Vf(n);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=XR(e),{host:s,port:a}=hH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Qn(l,r.config.emulator)&&Qn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(s)?(ff(`${o}//${s}${u}`),pf("Auth",!0)):i||fH()}function XR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hH(n){let e=XR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:SR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:SR(s)}}}function SR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function fH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var vu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,t){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}};function Ws(n,e){return w(this,null,function*(){return Z$(n,"POST","/v1/accounts:signInWithIdp",aE(n,e))})}var pH="http://localhost",Pf=class n extends vu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Yl(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ws(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ws(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ws(e,t)}buildRequest(){let e={requestUri:pH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$s(t)}return e}};var _u=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Mf=class extends _u{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gE=(()=>{class n extends Mf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Pf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Eu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return w(this,null,function*(){let o=yield Di._fromIdTokenResponse(e,r,i),s=AR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function AR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Z_=class n extends Zt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function eN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Z_._fromErrorAndOperation(n,o,e,r):o})}function gH(n,e,t=!1){return w(this,null,function*(){let r=yield mu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Eu._forOperation(n,"link",r)})}function mH(n,e,t=!1){return w(this,null,function*(){let{auth:r}=n;if(Jt(r.app))return Promise.reject(To(r));let i="reauthenticate";try{let o=yield mu(n,eN(r,i,e,n),t);Q(o.idToken,r,"internal-error");let s=uE(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(n.uid===a,r,"user-mismatch"),Eu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Xn(r,"user-mismatch"),o}})}function yH(n,e,t=!1){return w(this,null,function*(){if(Jt(n.app))return Promise.reject(To(n));let r="signIn",i=yield eN(n,r,e),o=yield Eu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Iu(n,e,t,r){return Le(n).onIdTokenChanged(e,t,r)}function mE(n,e,t){return Le(n).beforeAuthStateChanged(e,t)}function yE(n){return Le(n).signOut()}var xf="__sak";var kf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var vH=1e3,_H=10,EH=(()=>{class n extends kf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);oH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,_H):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},vH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return w(this,null,function*(){yield zr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return w(this,null,function*(){let r=yield zr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return w(this,null,function*(){yield zr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),tN=EH;var wH=(()=>{class n extends kf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),vE=wH;function IH(n){return Promise.all(n.map(e=>w(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var DH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return w(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,s)})),l=yield IH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function _E(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var J_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=_E("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Jn(){return window}function TH(n){Jn().location.href=n}function nN(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}function bH(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function CH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function SH(){return nN()?self:null}var rN="firebaseLocalStorageDb",AH=1,Of="firebaseLocalStorage",iN="fbase_key",Co=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function jf(n,e){return n.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function RH(){let n=indexedDB.deleteDatabase(rN);return new Co(n).toPromise()}function X_(){let n=indexedDB.open(rN,AH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Of,{keyPath:iN})}catch(i){t(i)}}),n.addEventListener("success",()=>w(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Of)?e(r):(r.close(),yield RH(),e(yield X_()))}))})}function RR(n,e,t){return w(this,null,function*(){let r=jf(n,!0).put({[iN]:e,value:t});return new Co(r).toPromise()})}function NH(n,e){return w(this,null,function*(){let t=jf(n,!1).get(e),r=yield new Co(t).toPromise();return r===void 0?null:r.value})}function NR(n,e){let t=jf(n,!0).delete(e);return new Co(t).toPromise()}var PH=800,MH=3,xH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield X_(),this.db)})}_withRetries(t){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>MH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return nN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=DH._getInstance(SH()),this.receiver._subscribe("keyChanged",(t,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var t,r;if(this.activeServiceWorker=yield bH(),!this.activeServiceWorker)return;this.sender=new J_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||CH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let t=yield X_();return yield RR(t,xf,"1"),yield NR(t,xf),!0}catch{}return!1})}_withPendingWrite(t){return w(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>RR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return w(this,null,function*(){let r=yield this._withRetries(i=>NH(i,t));return this.localCache[t]=r,r})}_remove(t){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>NR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return w(this,null,function*(){let t=yield this._withRetries(o=>{let s=jf(o,!1).getAll();return new Co(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),PH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),oN=xH;var Nae=JR("rcb"),Pae=new bo(3e4,6e4);function sN(n,e){return e?Pr(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var wu=class extends vu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ws(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function kH(n){return yH(n.auth,new wu(n),n.bypassAuthState)}function OH(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),mH(t,new wu(n),n.bypassAuthState)}function FH(n){return w(this,null,function*(){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),gH(t,new wu(n),n.bypassAuthState)})}var Ff=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kH;case"linkViaPopup":case"linkViaRedirect":return FH;case"reauthViaPopup":case"reauthViaRedirect":return OH;default:Xn(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var LH=new bo(2e3,1e4);function EE(n,e,t){return w(this,null,function*(){if(Jt(n.app))return Promise.reject(Rn(n,"operation-not-supported-in-this-environment"));let r=Vf(n);z$(n,e,_u);let i=sN(r,t);return new VH(r,"signInViaPopup",e,i).executeNotNull()})}var VH=(()=>{class n extends Ff{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let t=yield this.execute();return Q(t,this.auth,"internal-error"),t})}onExecution(){return w(this,null,function*(){Mr(this.filter.length===1,"Popup operations only handle one event");let t=_E();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,LH.get())};t()}}n.currentPopupAction=null;return n})(),jH="pendingRedirect",Df=new Map,eE=class n extends Ff{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Df.get(this.auth._key());if(!e){try{let r=(yield UH(this.resolver,this.auth))?yield zr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Df.set(this.auth._key(),e)}return this.bypassAuthState||Df.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return zr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,zr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function UH(n,e){return w(this,null,function*(){let t=HH(e),r=$H(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function BH(n,e){Df.set(n._key(),e)}function $H(n){return Pr(n._redirectPersistence)}function HH(n){return If(jH,n.config.apiKey,n.name)}function zH(n,e,t=!1){return w(this,null,function*(){if(Jt(n.app))return Promise.reject(To(n));let r=Vf(n),i=sN(r,e),s=yield new eE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var qH=10*60*1e3,tE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!aN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Rn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qH&&this.cachedEventUids.clear(),this.cachedEventUids.has(PR(e))}saveEventToCache(e){this.cachedEventUids.add(PR(e)),this.lastProcessedEventTime=Date.now()}};function PR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function GH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aN(n);default:return!1}}function WH(t){return w(this,arguments,function*(n,e={}){return Ks(n,"GET","/v1/projects",e)})}var KH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QH=/^https?/;function YH(n){return w(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield WH(n);for(let t of e)try{if(ZH(t))return}catch{}Xn(n,"unauthorized-domain")})}function ZH(n){let e=z_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!QH.test(t))return!1;if(KH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var JH=new bo(3e4,6e4);function MR(){let n=Jn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XH(n){return new Promise((e,t)=>{var r,i,o;function s(){MR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MR(),t(Rn(n,"network-request-failed"))},timeout:JH.get()})}if(!((i=(r=Jn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)s();else{let a=JR("iframefcb");return Jn()[a]=()=>{gapi.load?s():t(Rn(n,"network-request-failed"))},uH(`${lH()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Tf=null,e})}var Tf=null;function ez(n){return Tf=Tf||XH(n),Tf}var tz=new bo(5e3,15e3),nz="__/auth/iframe",rz="emulator/auth/iframe",iz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sz(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?sE(e,rz):`https://${n.config.authDomain}/${nz}`,r={apiKey:e.apiKey,appName:n.name,v:vi},i=oz.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${$s(r).slice(1)}`}function az(n){return w(this,null,function*(){let e=yield ez(n),t=Jn().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:sz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iz,dontclear:!0},r=>new Promise((i,o)=>w(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Rn(n,"network-request-failed"),a=Jn().setTimeout(()=>{o(s)},tz.get());function u(){Jn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var cz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uz=500,lz=600,dz="_blank",hz="http://localhost",Lf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function fz(n,e,t,r=uz,i=lz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},cz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=nt().toLowerCase();t&&(a=qR(l)?dz:t),HR(l)&&(e=e||hz,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(iH(l)&&a!=="_self")return pz(e||"",a),new Lf(null);let p=window.open(e||"",a,h);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new Lf(p)}function pz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var gz="__/auth/handler",mz="emulator/auth/handler",yz=encodeURIComponent("fac");function xR(n,e,t,r,i,o){return w(this,null,function*(){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vi,eventId:i};if(e instanceof _u){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",GA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Mf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${yz}=${encodeURIComponent(u)}`:"";return`${vz(n)}?${$s(a).slice(1)}${l}`})}function vz({config:n}){return n.emulator?sE(n,mz):`https://${n.authDomain}/${gz}`}var H_="webStorageSupport",nE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=zH,this._overrideRedirectResult=BH}_openPopup(e,t,r,i){return w(this,null,function*(){var o;Mr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield xR(e,t,r,z_(),i);return fz(e,s,_E())})}_openRedirect(e,t,r,i){return w(this,null,function*(){yield this._originValidation(e);let o=yield xR(e,t,r,z_(),i);return TH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Mr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return w(this,null,function*(){let t=yield az(e),r=new tE(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(H_,{type:H_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[H_];s!==void 0&&t(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YR()||zR()||dE()}},cN=nE;var kR="@firebase/auth",OR="1.10.7";var rE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _z(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ez(n){Sn(new Pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZR(n)},l=new Y_(r,i,o,u);return dH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Sn(new Pt("auth-internal",e=>{let t=Vf(e.getProvider("auth").getImmediate());return(r=>new rE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(kR,OR,_z(n)),Ve(kR,OR,"esm2017")}var wz=5*60,Iz=__("authIdTokenMaxAge")||wz,FR=null,Dz=n=>e=>w(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Iz)return;let i=t?.token;FR!==i&&(FR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function wE(n=wo()){let e=Hs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=fE(n,{popupRedirectResolver:cN,persistence:[oN,tN,vE]}),r=__("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Dz(o.toString());mE(t,s,()=>s(t.currentUser)),Iu(t,a=>s(a))}}let i=y_("auth");return i&&pE(t,`http://${i}`),t}function Tz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Rn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Tz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ez("Browser");function dN(n){return new H(function(e){var t=Iu(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var hN="auth",So=class{constructor(e){return e}},Du=class{constructor(){return qs(hN)}};var IE=new L("angularfire2.auth-instances");function f4(n,e){let t=du(hN,n,e);return t&&new So(t)}function p4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new So(r)}}var g4={provide:Du,deps:[[new Rt,IE]]},m4={provide:So,useFactory:f4,deps:[[new Rt,IE],Rr]};function fN(n,...e){return Ve("angularfire",_i.full,"auth"),zt([m4,g4,{provide:IE,useFactory:p4(n),multi:!0,deps:[ue,Ae,Ei,Do,[new Rt,Gs],...e]}])}var pN=He(dN,!0);var gN=He(wE,!0);var mN=He(EE,!0,2);var yN=He(yE,!0,2);var vN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_N={};var xr,DE;(function(){var n;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(I,T,S){for(var _=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)_[cr-2]=arguments[cr];return v.prototype[T].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)I[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],T=D.g[2];var S=D.g[3],_=v+(S^E&(T^S))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=S+(T^v&(E^T))+I[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=T+(E^S&(v^E))+I[2]+606105819&4294967295,T=S+(_<<17&4294967295|_>>>15),_=E+(v^T&(S^v))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(S^E&(T^S))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(T^v&(E^T))+I[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=T+(E^S&(v^E))+I[6]+2821735955&4294967295,T=S+(_<<17&4294967295|_>>>15),_=E+(v^T&(S^v))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(S^E&(T^S))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(T^v&(E^T))+I[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=T+(E^S&(v^E))+I[10]+4294925233&4294967295,T=S+(_<<17&4294967295|_>>>15),_=E+(v^T&(S^v))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(S^E&(T^S))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(T^v&(E^T))+I[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=T+(E^S&(v^E))+I[14]+2792965006&4294967295,T=S+(_<<17&4294967295|_>>>15),_=E+(v^T&(S^v))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^S&(E^T))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^T&(v^E))+I[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(S^v))+I[11]+643717713&4294967295,T=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(T^S))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^S&(E^T))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^T&(v^E))+I[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(S^v))+I[15]+3634488961&4294967295,T=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(T^S))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^S&(E^T))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^T&(v^E))+I[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(S^v))+I[3]+4107603335&4294967295,T=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(T^S))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^S&(E^T))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^T&(v^E))+I[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(S^v))+I[7]+1735328473&4294967295,T=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(T^S))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^S)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^T)+I[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=T+(S^v^E)+I[11]+1839030562&4294967295,T=S+(_<<16&4294967295|_>>>16),_=E+(T^S^v)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^S)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^T)+I[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=T+(S^v^E)+I[7]+4139469664&4294967295,T=S+(_<<16&4294967295|_>>>16),_=E+(T^S^v)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^S)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^T)+I[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=T+(S^v^E)+I[3]+3572445317&4294967295,T=S+(_<<16&4294967295|_>>>16),_=E+(T^S^v)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^S)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^T)+I[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=T+(S^v^E)+I[15]+530742520&4294967295,T=S+(_<<16&4294967295|_>>>16),_=E+(T^S^v)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~S))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~T))+I[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=T+(v^(S|~E))+I[14]+2878612391&4294967295,T=S+(_<<15&4294967295|_>>>17),_=E+(S^(T|~v))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~S))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~T))+I[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=T+(v^(S|~E))+I[10]+4293915773&4294967295,T=S+(_<<15&4294967295|_>>>17),_=E+(S^(T|~v))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~S))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~T))+I[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=T+(v^(S|~E))+I[6]+2734768916&4294967295,T=S+(_<<15&4294967295|_>>>17),_=E+(S^(T|~v))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~S))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~T))+I[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=T+(v^(S|~E))+I[2]+718787259&4294967295,T=S+(_<<15&4294967295|_>>>17),_=E+(S^(T|~v))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,I=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=E;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(I[T++]=D.charCodeAt(S++),T==this.blockSize){i(this,I),T=0;break}}else for(;S<v;)if(I[T++]=D[S++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)D[E++]=this.g[v]>>>I&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],I=!0,T=D.length-1;0<=T;T--){var S=D[T]|0;I&&S==v||(E[T]=S,I=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],E=1,I=0;D>=E;I++)v[I]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,T=0;T<D.length;T+=8){var S=Math.min(8,D.length-T),_=parseInt(D.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);D+=(0<=I?I:4294967296+I)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,I="";;){var T=pe(E,v).g;E=k(E,T.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=T,C(E))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=k(this,D),P(D)?-1:C(D)?0:1};function R(D){for(var v=D.g.length,E=[],I=0;I<v;I++)E[I]=~D.g[I];return new s(E,~D.h).add(g)}n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0,T=0;T<=v;T++){var S=I+(this.i(T)&65535)+(D.i(T)&65535),_=(S>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);I=_>>>16,S&=65535,_&=65535,E[T]=_<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(R(v))}n.j=function(D){if(C(this)||C(D))return p;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<D.g.length;T++){var S=this.i(I)>>>16,_=this.i(I)&65535,cr=D.i(T)>>>16,Ta=D.i(T)&65535;E[2*I+2*T]+=_*Ta,G(E,2*I+2*T),E[2*I+2*T+1]+=S*Ta,G(E,2*I+2*T+1),E[2*I+2*T+1]+=_*cr,G(E,2*I+2*T+1),E[2*I+2*T+2]+=S*cr,G(E,2*I+2*T+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function G(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function $(D,v){this.g=D,this.h=v}function pe(D,v){if(C(v))throw Error("division by zero");if(C(D))return new $(p,p);if(P(D))return v=pe(R(D),v),new $(R(v.g),R(v.h));if(P(v))return v=pe(D,R(v)),new $(R(v.g),v.h);if(30<D.g.length){if(P(D)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(D);)E=ze(E),I=ze(I);var T=ve(E,1),S=ve(I,1);for(I=ve(I,2),E=ve(E,2);!C(I);){var _=S.add(I);0>=_.l(D)&&(T=T.add(E),S=_),I=ve(I,1),E=ve(E,1)}return v=k(D,T.j(v)),new $(T,v)}for(T=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(E),_=S.j(v);P(_)||0<_.l(D);)E-=I,S=l(E),_=S.j(v);C(S)&&(S=g),T=T.add(S),D=k(D,_)}return new $(T,D)}n.A=function(D){return pe(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&D.i(I);return new s(E,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|D.i(I);return new s(E,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^D.i(I);return new s(E,this.h^D.h)};function ze(D){for(var v=D.g.length+1,E=[],I=0;I<v;I++)E[I]=D.i(I)<<1|D.i(I-1)>>>31;return new s(E,D.h)}function ve(D,v){var E=v>>5;v%=32;for(var I=D.g.length-E,T=[],S=0;S<I;S++)T[S]=0<v?D.i(S+E)>>>v|D.i(S+E+1)<<32-v:D.i(S+E);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DE=_N.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,xr=_N.Integer=s}).apply(typeof vN<"u"?vN:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var TE,v4,Qs,bE,Tu,Bf,CE,SE,AE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,N){for(var F=Array(arguments.length-2),be=2;be<arguments.length;be++)F[be-2]=arguments[be];return d.prototype[b].apply(m,F)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,N=m.length||0;c.length=b+N;for(let F=0;F<N;F++)c[b+F]=m[F]}else c.push(m)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var ze=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ve(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let N=0;N<E.length;N++)f=E[N],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=hg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class cr{constructor(){this.h=this.g=null}add(d,f){let m=Ta.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ta=new k(()=>new Ik,c=>c.reset());class Ik{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ba,Ca=!1,hg=new cr,wD=()=>{let c=a.Promise.resolve(void 0);ba=()=>{c.then(Dk)}};var Dk=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ta;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ca=!1};function Ur(){this.s=this.s,this.C=this.C}Ur.prototype.s=!1,Ur.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ur.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Tk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Sa(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ze){e:{try{pe(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Sa.aa.h.call(this)}}C(Sa,ft);var bk={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),Ck=0;function Sk(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++Ck,this.da=this.fa=!1}function il(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ol(c){this.src=c,this.g={},this.h=0}ol.prototype.add=function(c,d,f,m,b){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var F=pg(c,d,m,b);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new Sk(d,this.src,N,!!m,b),d.fa=f,c.push(d)),d};function fg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=b)&&Array.prototype.splice.call(m,b,1),N&&(il(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function pg(c,d,f,m){for(var b=0;b<c.length;++b){var N=c[b];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return b}return-1}var gg="closure_lm_"+(1e6*Math.random()|0),mg={};function ID(c,d,f,m,b){if(m&&m.once)return TD(c,d,f,m,b);if(Array.isArray(d)){for(var N=0;N<d.length;N++)ID(c,d[N],f,m,b);return null}return f=Eg(f),c&&c[Aa]?c.K(d,f,l(m)?!!m.capture:!!m,b):DD(c,d,f,!1,m,b)}function DD(c,d,f,m,b,N){if(!d)throw Error("Invalid event type");var F=l(b)?!!b.capture:!!b,be=vg(c);if(be||(c[gg]=be=new ol(c)),f=be.add(d,f,m,F,N),f.proxy)return f;if(m=Ak(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)Tk||(b=F),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(CD(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ak(){function c(f){return d.call(c.src,c.listener,f)}let d=Rk;return c}function TD(c,d,f,m,b){if(Array.isArray(d)){for(var N=0;N<d.length;N++)TD(c,d[N],f,m,b);return null}return f=Eg(f),c&&c[Aa]?c.L(d,f,l(m)?!!m.capture:!!m,b):DD(c,d,f,!0,m,b)}function bD(c,d,f,m,b){if(Array.isArray(d))for(var N=0;N<d.length;N++)bD(c,d[N],f,m,b);else m=l(m)?!!m.capture:!!m,f=Eg(f),c&&c[Aa]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=pg(N,f,m,b),-1<f&&(il(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=vg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pg(d,f,m,b)),(f=-1<c?d[c]:null)&&yg(f))}function yg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Aa])fg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(CD(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=vg(d))?(fg(f,c),f.h==0&&(f.src=null,d[gg]=null)):il(c)}}}function CD(c){return c in mg?mg[c]:mg[c]="on"+c}function Rk(c,d){if(c.da)c=!0;else{d=new Sa(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&yg(c),c=f.call(m,d)}return c}function vg(c){return c=c[gg],c instanceof ol?c:null}var _g="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eg(c){return typeof c=="function"?c:(c[_g]||(c[_g]=function(d){return c.handleEvent(d)}),c[_g])}function pt(){Ur.call(this),this.i=new ol(this),this.M=this,this.F=null}C(pt,Ur),pt.prototype[Aa]=!0,pt.prototype.removeEventListener=function(c,d,f,m){bD(this,c,d,f,m)};function Dt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var b=d;d=new ft(m,c),I(d,b)}if(b=!0,f)for(var N=f.length-1;0<=N;N--){var F=d.g=f[N];b=sl(F,m,!0,d)&&b}if(F=d.g=c,b=sl(F,m,!0,d)&&b,b=sl(F,m,!1,d)&&b,f)for(N=0;N<f.length;N++)F=d.g=f[N],b=sl(F,m,!1,d)&&b}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)il(f[m]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},pt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function sl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,N=0;N<d.length;++N){var F=d[N];if(F&&!F.da&&F.capture==f){var be=F.listener,ot=F.ha||F.src;F.fa&&fg(c.i,F),b=be.call(ot,m)!==!1&&b}}return b&&!m.defaultPrevented}function SD(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function AD(c){c.g=SD(()=>{c.g=null,c.i&&(c.i=!1,AD(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Nk extends Ur{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:AD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(c){Ur.call(this),this.h=c,this.g={}}C(Ra,Ur);var RD=[];function ND(c){ve(c.g,function(d,f){this.g.hasOwnProperty(f)&&yg(d)},c),c.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),ND(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wg=a.JSON.stringify,Pk=a.JSON.parse,Mk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ig(){}Ig.prototype.h=null;function PD(c){return c.h||(c.h=c.i())}function MD(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dg(){ft.call(this,"d")}C(Dg,ft);function Tg(){ft.call(this,"c")}C(Tg,ft);var xi={},xD=null;function al(){return xD=xD||new pt}xi.La="serverreachability";function kD(c){ft.call(this,xi.La,c)}C(kD,ft);function Pa(c){let d=al();Dt(d,new kD(d))}xi.STAT_EVENT="statevent";function OD(c,d){ft.call(this,xi.STAT_EVENT,c),this.stat=d}C(OD,ft);function Tt(c){let d=al();Dt(d,new OD(d,c))}xi.Ma="timingevent";function FD(c,d){ft.call(this,xi.Ma,c),this.size=d}C(FD,ft);function Ma(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function xk(c,d,f,m,b,N){c.info(function(){if(c.g)if(N)for(var F="",be=N.split("&"),ot=0;ot<be.length;ot++){var ye=be[ot].split("=");if(1<ye.length){var gt=ye[0];ye=ye[1];var mt=gt.split("_");F=2<=mt.length&&mt[1]=="type"?F+(gt+"="+ye+"&"):F+(gt+"=redacted&")}}else F=null;else F=N;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+F})}function kk(c,d,f,m,b,N,F){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+N+" "+F})}function Bo(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Fk(c,f)+(m?" "+m:"")})}function Ok(c,d){c.info(function(){return"TIMEOUT: "+d})}xa.prototype.info=function(){};function Fk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var N=b[0];if(N!="noop"&&N!="stop"&&N!="close")for(var F=1;F<b.length;F++)b[F]=""}}}}return wg(f)}catch{return d}}var cl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},LD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bg;function ul(){}C(ul,Ig),ul.prototype.g=function(){return new XMLHttpRequest},ul.prototype.i=function(){return{}},bg=new ul;function Br(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new VD}function VD(){this.i=null,this.g="",this.h=!1}var jD={},Cg={};function Sg(c,d,f){c.L=1,c.v=fl(ur(d)),c.m=f,c.P=!0,UD(c,null)}function UD(c,d){c.F=Date.now(),ll(c),c.A=ur(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),eT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new VD,c.g=vT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Nk(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(RD[0]=b.toString()),b=RD);for(var N=0;N<b.length;N++){var F=ID(f,b[N],m||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Pa(),xk(c.i,c.u,c.A,c.l,c.R,c.m)}Br.prototype.ca=function(c){c=c.target;let d=this.M;d&&lr(c)==3?d.j():this.Y(c)},Br.prototype.Y=function(c){try{if(c==this.g)e:{let mt=lr(this.g);var d=this.g.Ba();let zo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||aT(this.g)))){this.J||mt!=4||d==7||(d==8||0>=zo?Pa(3):Pa(2)),Ag(this);var f=this.g.Z();this.X=f;t:if(BD(this)){var m=aT(this.g);c="";var b=m.length,N=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),ka(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(N&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,kk(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ot=this.g;if((be=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(be)){var ye=be;break t}}ye=null}if(f=ye)Bo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rg(this,f);else{this.o=!1,this.s=3,Tt(12),ki(this),ka(this);break e}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<F.length;)if(mn=Lk(this,F),mn==Cg){mt==4&&(this.s=4,Tt(14),f=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==jD){this.s=4,Tt(15),Bo(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Bo(this.i,this.l,mn,null),Rg(this,mn);if(BD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||F.length!=0||this.h.h||(this.s=1,Tt(16),f=!1),this.o=this.o&&f,!f)Bo(this.i,this.l,F,"[Invalid Chunked Response]"),ki(this),ka(this);else if(0<F.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Og(gt),gt.M=!0,Tt(11))}}else Bo(this.i,this.l,F,null),Rg(this,F);mt==4&&ki(this),this.o&&!this.J&&(mt==4?pT(this.j,this):(this.o=!1,ll(this)))}else eO(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),ki(this),ka(this)}}}catch{}finally{}};function BD(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Lk(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Cg:(f=Number(d.substring(f,m)),isNaN(f)?jD:(m+=1,m+f>d.length?Cg:(d=d.slice(m,m+f),c.C=m+f,d)))}Br.prototype.cancel=function(){this.J=!0,ki(this)};function ll(c){c.S=Date.now()+c.I,$D(c,c.I)}function $D(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ma(g(c.ba,c),d)}function Ag(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Ok(this.i,this.A),this.L!=2&&(Pa(),Tt(17)),ki(this),this.s=2,ka(this)):$D(this,this.S-c)};function ka(c){c.j.G==0||c.J||pT(c.j,c)}function ki(c){Ag(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ND(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Rg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Ng(f.h,c))){if(!c.K&&Ng(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)vl(f),ml(f);else break e;kg(f),Tt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ma(g(f.Za,f),6e3));if(1>=qD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fi(f,11)}else if((c.K||f.g==c)&&vl(f),!G(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ye=b[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let gt=ye[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=ye[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let zo=ye[5];zo!=null&&typeof zo=="number"&&0<zo&&(m=1.5*zo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let mn=c.g;if(mn){let El=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(El){var N=m.h;N.g||El.indexOf("spdy")==-1&&El.indexOf("quic")==-1&&El.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Pg(N,N.h),N.h=null))}if(m.D){let Fg=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fg&&(m.ya=Fg,Se(m.I,m.D,Fg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var F=c;if(m.qa=yT(m,m.J?m.ia:null,m.W),F.K){GD(m.h,F);var be=F,ot=m.L;ot&&(be.I=ot),be.B&&(Ag(be),ll(be)),m.g=F}else hT(m);0<f.i.length&&yl(f)}else ye[0]!="stop"&&ye[0]!="close"||Fi(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Fi(f,7):xg(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Pa(4)}catch{}}var Vk=class{constructor(c,d){this.g=c,this.map=d}};function HD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qD(c){return c.h?1:c.g?c.g.size:0}function Ng(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pg(c,d){c.g?c.g.add(d):c.h=d}function GD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}HD.prototype.cancel=function(){if(this.i=WD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function WD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function jk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function Uk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function KD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Uk(c),m=jk(c),b=m.length,N=0;N<b;N++)d.call(void 0,m[N],f&&f[N],c)}var QD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var N=c[f].substring(0,m);b=c[f].substring(m+1)}else N=c[f];d(N,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Oi){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var d=c.i,f=new La;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),YD(this,f),this.m=c.m}else c&&(d=String(c).match(QD))?(this.h=!1,dl(this,d[1]||"",!0),this.o=Oa(d[2]||""),this.g=Oa(d[3]||"",!0),hl(this,d[4]),this.l=Oa(d[5]||"",!0),YD(this,d[6]||"",!0),this.m=Oa(d[7]||"")):(this.h=!1,this.i=new La(null,this.h))}Oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Fa(d,ZD,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Fa(d,ZD,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Fa(f,f.charAt(0)=="/"?zk:Hk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Fa(f,Gk)),c.join("")};function ur(c){return new Oi(c)}function dl(c,d,f){c.j=f?Oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function YD(c,d,f){d instanceof La?(c.i=d,Wk(c.i,c.h)):(f||(d=Fa(d,qk)),c.i=new La(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function fl(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,$k),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function $k(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ZD=/[#\/\?@]/g,Hk=/[#\?:]/g,zk=/[#\?]/g,qk=/[#\?@]/g,Gk=/#/g;function La(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function $r(c){c.g||(c.g=new Map,c.h=0,c.i&&Bk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=La.prototype,n.add=function(c,d){$r(this),this.i=null,c=$o(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function JD(c,d){$r(c),d=$o(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function XD(c,d){return $r(c),d=$o(c,d),c.g.has(d)}n.forEach=function(c,d){$r(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},n.na=function(){$r(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let N=0;N<b.length;N++)f.push(d[m])}return f},n.V=function(c){$r(this);let d=[];if(typeof c=="string")XD(this,c)&&(d=d.concat(this.g.get($o(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return $r(this),this.i=null,c=$o(this,c),XD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function eT(c,d,f){JD(c,d),0<f.length&&(c.i=null,c.g.set($o(c,d),P(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),F=this.V(m);for(m=0;m<F.length;m++){var b=N;F[m]!==""&&(b+="="+encodeURIComponent(String(F[m]))),c.push(b)}}return this.i=c.join("&")};function $o(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Wk(c,d){d&&!c.j&&($r(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(JD(this,m),eT(this,b,f))},c)),c.j=d}function Kk(c,d){let f=new xa;if(a.Image){let m=new Image;m.onload=y(Hr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Hr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Hr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Hr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function Qk(c,d){let f=new xa,m=new AbortController,b=setTimeout(()=>{m.abort(),Hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(b),N.ok?Hr(f,"TestPingServer: ok",!0,d):Hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Hr(f,"TestPingServer: error",!1,d)})}function Hr(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function Yk(){this.g=new Mk}function Zk(c,d,f){let m=f||"";try{KD(c,function(b,N){let F=b;l(b)&&(F=wg(b)),d.push(m+N+"="+encodeURIComponent(F))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Va(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Va,Ig),Va.prototype.g=function(){return new pl(this.l,this.j)},Va.prototype.i=function(c){return function(){return c}}({});function pl(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pl,pt),n=pl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function tT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ja(this):Ua(this),this.readyState==3&&tT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ja(this))},n.Qa=function(c){this.g&&(this.response=c,ja(this))},n.ga=function(){this.g&&ja(this)};function ja(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ua(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function nT(c){let d="";return ve(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Mg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=nT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Fe(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Fe,pt);var Jk=/^https?$/i,Xk=["POST","PUT"];n=Fe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bg.g(),this.v=this.o?PD(this.o):PD(bg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){rT(this,N);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xk,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,F]of f)this.g.setRequestHeader(N,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sT(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){rT(this,N)}};function rT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,iT(c),gl(c)}function iT(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oT(this):this.bb())},n.bb=function(){oT(this)};function oT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)SD(c.Ea,0,c);else if(Dt(c,"readystatechange"),lr(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=F===0){var b=String(c.D).match(QD)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!Jk.test(b?b.toLowerCase():"")}f=m}if(f)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var N=2<lr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",iT(c)}}finally{gl(c)}}}}function gl(c,d){if(c.g){sT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Dt(c,"ready");try{f.onreadystatechange=m}catch{}}}function sT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Pk(d)}};function aT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function eO(c){let d={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var f=T(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[b]||[];d[b]=N,N.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function cT(c){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,c),this.cb=Ba("retryDelaySeedMs",1e4,c),this.Wa=Ba("forwardChannelMaxRetries",2,c),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new HD(c&&c.concurrentRequestLimit),this.Da=new Yk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cT.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Tt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=yT(this,null,this.W),yl(this)};function xg(c){if(uT(c),c.G==3){var d=c.U++,f=ur(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),$a(c,f),d=new Br(c,c.j,d),d.L=2,d.v=fl(ur(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ll(d)}mT(c)}function ml(c){c.g&&(Og(c),c.g.cancel(),c.g=null)}function uT(c){ml(c),c.u&&(a.clearTimeout(c.u),c.u=null),vl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function yl(c){if(!zD(c.h)&&!c.s){c.s=!0;var d=c.Ga;ba||wD(),Ca||(ba(),Ca=!0),hg.add(d,c),c.B=0}}function tO(c,d){return qD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ma(g(c.Ga,c,d),gT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Br(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),I(N,this.S)):N=this.S),this.m!==null||this.O||(b.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dT(this,b,d),f=ur(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),$a(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(nT(N)))+"&"+d:this.m&&Mg(f,this.m,N)),Pg(this.h,b),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),b.T=!0,Sg(b,f,null)):Sg(b,f,d),this.G=2}}else this.G==3&&(c?lT(this,c):this.i.length==0||zD(this.h)||lT(this))};function lT(c,d){var f;d?f=d.l:f=c.U++;let m=ur(c.I);Se(m,"SID",c.K),Se(m,"RID",f),Se(m,"AID",c.T),$a(c,m),c.m&&c.o&&Mg(m,c.m,c.o),f=new Br(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=dT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pg(c.h,f),Sg(f,m,d)}function $a(c,d){c.H&&ve(c.H,function(f,m){Se(d,m,f)}),c.l&&KD({},function(f,m){Se(d,m,f)})}function dT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let N=-1;for(;;){let F=["count="+f];N==-1?0<f?(N=b[0].g,F.push("ofs="+N)):N=0:F.push("ofs="+N);let be=!0;for(let ot=0;ot<f;ot++){let ye=b[ot].g,gt=b[ot].map;if(ye-=N,0>ye)N=Math.max(0,b[ot].g-100),be=!1;else try{Zk(gt,F,"req"+ye+"_")}catch{m&&m(gt)}}if(be){m=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function hT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ba||wD(),Ca||(ba(),Ca=!0),hg.add(d,c),c.v=0}}function kg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ma(g(c.Fa,c),gT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,fT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ma(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),ml(this),fT(this))};function Og(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function fT(c){c.g=new Br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ur(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),$a(c,d),c.m&&c.o&&Mg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=fl(ur(d)),f.m=null,f.P=!0,UD(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ml(this),kg(this),Tt(19))};function vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function pT(c,d){var f=null;if(c.g==d){vl(c),Og(c),c.g=null;var m=2}else if(Ng(c.h,d))f=d.D,GD(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=al(),Dt(m,new FD(m,f)),yl(c)}else hT(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&tO(c,d)||m==2&&kg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Fi(c,5);break;case 4:Fi(c,10);break;case 3:Fi(c,6);break;default:Fi(c,2)}}}function gT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Fi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new Oi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dl(m,"https"),fl(m),b?Kk(m.toString(),f):Qk(m.toString(),f)}else Tt(2);c.G=0,c.l&&c.l.sa(d),mT(c),uT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function mT(c){if(c.G=0,c.ka=[],c.l){let d=WD(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function yT(c,d,f){var m=f instanceof Oi?ur(f):new Oi(f);if(m.g!="")d&&(m.g=d+"."+m.g),hl(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var N=new Oi(null);m&&dl(N,m),d&&(N.g=d),b&&hl(N,b),f&&(N.l=f),m=N}return f=c.D,d=c.ya,f&&d&&Se(m,f,d),Se(m,"VER",c.la),$a(c,m),m}function vT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Fe(new Va({eb:f})):new Fe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _T(){}n=_T.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _l(){}_l.prototype.g=function(c,d){return new Ut(c,d)};function Ut(c,d){pt.call(this),this.g=new cT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ho(this)}C(Ut,pt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){xg(this.g)},Ut.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=wg(c),c=f);d.i.push(new Vk(d.Ya++,c)),d.G==3&&yl(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,xg(this.g),delete this.g,Ut.aa.N.call(this)};function ET(c){Dg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(ET,Dg);function wT(){Tg.call(this),this.status=1}C(wT,Tg);function Ho(c){this.g=c}C(Ho,_T),Ho.prototype.ua=function(){Dt(this.g,"a")},Ho.prototype.ta=function(c){Dt(this.g,new ET(c))},Ho.prototype.sa=function(c){Dt(this.g,new wT)},Ho.prototype.ra=function(){Dt(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,AE=kr.createWebChannelTransport=function(){return new _l},SE=kr.getStatEventTarget=function(){return al()},CE=kr.Event=xi,Bf=kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,Tu=kr.ErrorCode=cl,LD.COMPLETE="complete",bE=kr.EventType=LD,MD.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Qs=kr.WebChannel=MD,v4=kr.FetchXmlHttpFactory=Va,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,TE=kr.XhrIo=Fe}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});var EN="@firebase/firestore",wN="4.7.17";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var ma="11.9.0";var Po=new Yn("@firebase/firestore");function Ys(){return Po.logLevel}function B(n,...e){if(Po.logLevel<=le.DEBUG){let t=e.map(_I);Po.debug(`Firestore (${ma}): ${n}`,...t)}}function Or(n,...e){if(Po.logLevel<=le.ERROR){let t=e.map(_I);Po.error(`Firestore (${ma}): ${n}`,...t)}}function ra(n,...e){if(Po.logLevel<=le.WARN){let t=e.map(_I);Po.warn(`Firestore (${ma}): ${n}`,...t)}}function _I(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fP(n,r,t)}function fP(n,e,t){let r=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Or(r),new Error(r)}function Ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||fP(e,i,r)}function X(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var er=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},OE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},FE=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new er;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new er,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new er)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},LE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},VE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new LE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function pP(){return new TextEncoder}var Yf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=_4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function UE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=pP(),s=E4(o.encode(IN(n,t)),o.encode(IN(e,t)));return s!==0?s:se(r,i)}}t+=r>65535?2:1}return se(n.length,e.length)}function IN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function E4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return se(n[t],e[t]);return se(n.length,e.length)}function ia(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var DN=-62135596800,TN=1e6,ht=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*TN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DN)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TN}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-DN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ht(0,0))}static max(){return new n(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bN="__name__",Zf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):UE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}},Oe=class n extends Zf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,en=class n extends Zf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bN}static keyField(){return new n([bN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Oe.fromString(e))}static fromName(e){return new n(Oe.fromString(e).popFirst(5))}static empty(){return new n(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Oe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Oe(e.slice()))}};var Nu=-1,BE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};BE.UNKNOWN_ID=-1;function I4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new Mo(i,W.empty(),e)}function D4(n){return new Mo(n.readTime,n.key,Nu)}var Mo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),W.empty(),Nu)}static max(){return new n(te.max(),W.empty(),Nu)}};function T4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var b4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$E=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ya(n){return w(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==b4)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function C4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}var EI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),wI=-1;function Mp(n){return n==null}function Pu(n){return n===0&&1/n==-1/0}function S4(n){return typeof n=="number"&&Number.isInteger(n)&&!Pu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var gP="";function A4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CN(e)),e=R4(n.get(t),e);return CN(e)}function R4(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case gP:t+="";break;default:t+=o}}return t}function CN(n){return n+gP+""}var N4="remoteDocuments",mP="owner";var yP="mutationQueues";var vP="mutations";var _P="documentMutations",P4="remoteDocumentsV14";var EP="remoteDocumentGlobal";var wP="targets";var IP="targetDocuments";var DP="targetGlobal",TP="collectionParents";var bP="clientMetadata";var CP="bundles";var SP="namedQueries";var M4="indexConfiguration";var x4="indexState";var k4="indexEntries";var AP="documentOverlays";var O4="globals";var F4=[yP,vP,_P,N4,wP,mP,DP,IP,bP,EP,TP,CP,SP],Lce=[...F4,AP],L4=[yP,vP,_P,P4,wP,mP,DP,IP,bP,EP,TP,CP,SP,AP],V4=L4,j4=[...V4,M4,x4,k4];var Vce=[...j4,O4];function SN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ni(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ea(this.root,e,this.comparator,!0)}},ea=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new tr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jf(this.data.getIterator())}getIteratorFrom(e){return new Jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fn=class n{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new n([])}unionWith(e){let t=new it(en.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var U4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(n){if(Ie(!!n,39018),typeof n=="string"){let e=0,t=U4.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(n.seconds),nanos:xe(n.nanos)}}function xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lr(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var NP="server_timestamp",PP="__type__",MP="__previous_value__",xP="__local_write_time__";function II(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PP])===null||t===void 0?void 0:t.stringValue)===NP}function xp(n){let e=n.mapValue.fields[MP];return II(e)?xp(e):e}function Mu(n){let e=Fr(n.mapValue.fields[xP].timestampValue);return new ht(e.seconds,e.nanos)}var HE=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},ep="(default)",tp=class n{constructor(e,t){this.projectId=e,this.database=t||ep}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ep}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DI="__type__",kP="__max__",$f={mapValue:{fields:{__type__:{stringValue:kP}}}},TI="__vector__",oa="value";function bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?II(n)?4:FP(n)?9007199254740991:OP(n)?10:11:K(28295,{value:n})}function ir(n,e){if(n===e)return!0;let t=bi(n);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mu(n).isEqual(Mu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fr(i.timestampValue),a=Fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Lr(i.bytesValue).isEqual(Lr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),a=xe(o.doubleValue);return s===a?Pu(s)===Pu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ia(n.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(SN(s)!==SN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ir(s[u],a[u])))return!1;return!0}(n,e);default:return K(52216,{left:n})}}function xu(n,e){return(n.values||[]).find(t=>ir(t,e))!==void 0}function sa(n,e){if(n===e)return 0;let t=bi(n),r=bi(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=xe(o.integerValue||o.doubleValue),u=xe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return AN(n.timestampValue,e.timestampValue);case 4:return AN(Mu(n),Mu(e));case 5:return UE(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Lr(o),u=Lr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=se(a[l],u[l]);if(h!==0)return h}return se(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=se(xe(o.latitude),xe(s.latitude));return a!==0?a:se(xe(o.longitude),xe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[oa])===null||a===void 0?void 0:a.arrayValue,C=(u=g[oa])===null||u===void 0?void 0:u.arrayValue,P=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:RN(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===$f.mapValue&&s===$f.mapValue)return 0;if(o===$f.mapValue)return 1;if(s===$f.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=UE(u[p],h[p]);if(g!==0)return g;let y=sa(a[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K(23264,{Pe:t})}}function AN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=Fr(n),r=Fr(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function RN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=sa(t[i],r[i]);if(o)return o}return se(t.length,r.length)}function aa(n){return zE(n)}function zE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=zE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${zE(t.fields[s])}`;return i+"}"}(n.mapValue):K(61005,{value:n})}function qf(n){switch(bi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=xp(n);return e?16+qf(e):16;case 5:return 2*n.stringValue.length;case 6:return Lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+qf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ni(r.fields,(o,s)=>{i+=o.length+qf(s)}),i}(n.mapValue);default:throw K(13486,{value:n})}}function NN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qE(n){return!!n&&"integerValue"in n}function bI(n){return!!n&&"arrayValue"in n}function PN(n){return!!n&&"nullValue"in n}function MN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gf(n){return!!n&&"mapValue"in n}function OP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DI])===null||t===void 0?void 0:t.stringValue)===TI}function Cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ni(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}var Uce={mapValue:{fields:{[DI]:{stringValue:TI},[oa]:{arrayValue:{}}}}};var Xt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(t)}setAll(e){let t=en.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Cu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ni(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Cu(this.value))}};function LP(n){let e=[];return Ni(n.fields,(t,r)=>{let i=new en([t]);if(Gf(r)){let o=LP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new fn(e)}var Pn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),Xt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ca=class{constructor(e,t){this.position=e,this.inclusive=t}};function xN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=sa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ir(n.position[t],e.position[t]))return!1;return!0}var xo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function B4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var np=class{},Qe=class n extends np{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new WE(e,t,r):t==="array-contains"?new YE(e,r):t==="in"?new ZE(e,r):t==="not-in"?new JE(e,r):t==="array-contains-any"?new XE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KE(e,r):new QE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sa(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mn=class n extends np{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return VP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function VP(n){return n.op==="and"}function jP(n){return $4(n)&&VP(n)}function $4(n){for(let e of n.filters)if(e instanceof Mn)return!1;return!0}function GE(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+aa(n.value);if(jP(n))return n.filters.map(e=>GE(e)).join(",");{let e=n.filters.map(t=>GE(t)).join(",");return`${n.op}(${e})`}}function UP(n,e){return n instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&ir(r.value,i.value)}(n,e):n instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&UP(s,i.filters[a]),!0):!1}(n,e):void K(19439)}function BP(n){return n instanceof Qe?function(t){return`${t.field.canonicalString()} ${t.op} ${aa(t.value)}`}(n):n instanceof Mn?function(t){return t.op.toString()+" {"+t.getFilters().map(BP).join(" ,")+"}"}(n):"Filter"}var WE=class extends Qe{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},KE=class extends Qe{constructor(e,t){super(e,"in",t),this.keys=$P("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},QE=class extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=$P("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $P(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var YE=class extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return bI(t)&&xu(t.arrayValue,this.value)}},ZE=class extends Qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}},JE=class extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}},XE=class extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!bI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xu(this.value.arrayValue,r))}};var ew=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function ON(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ew(n,e,t,r,i,o,s)}function CI(n){let e=X(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>GE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>aa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>aa(r)).join(",")),e.Ie=t}return e.Ie}function SI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kN(n.startAt,e.startAt)&&kN(n.endAt,e.endAt)}function tw(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ci=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function H4(n,e,t,r,i,o,s,a){return new Ci(n,e,t,r,i,o,s,a)}function AI(n){return new Ci(n)}function FN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HP(n){return n.collectionGroup!==null}function Su(n){let e=X(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new it(en.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new xo(o,r))}),t.has(en.keyField().canonicalString())||e.Ee.push(new xo(en.keyField(),r))}return e.Ee}function nr(n){let e=X(n);return e.de||(e.de=z4(e,Su(n))),e.de}function z4(n,e){if(n.limitType==="F")return ON(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xo(i.field,o)});let t=n.endAt?new ca(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ca(n.startAt.position,n.startAt.inclusive):null;return ON(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nw(n,e){let t=n.filters.concat([e]);return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rw(n,e,t){return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kp(n,e){return SI(nr(n),nr(e))&&n.limitType===e.limitType}function zP(n){return`${CI(nr(n))}|lt:${n.limitType}`}function Zs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>BP(i)).join(", ")}]`),Mp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>aa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>aa(i)).join(",")),`Target(${r})`}(nr(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Su(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=xN(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Su(r),i)||r.endAt&&!function(s,a,u){let l=xN(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Su(r),i))}(n,e)}function q4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qP(n){return(e,t)=>{let r=!1;for(let i of Su(n)){let o=G4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function G4(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?sa(u,l):K(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var Vr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RP(this.inner)}size(){return this.innerSize}};var W4=new je(W.comparator);function jr(){return W4}var GP=new je(W.comparator);function bu(...n){let e=GP;for(let t of n)e=e.insert(t.key,t);return e}function WP(n){let e=GP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ao(){return Au()}function KP(){return Au()}function Au(){return new Vr(n=>n.toString(),(n,e)=>n.isEqual(e))}var K4=new je(W.comparator),Q4=new it(W.comparator);function he(...n){let e=Q4;for(let t of n)e=e.add(t);return e}var Y4=new it(se);function Z4(){return Y4}function RI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function QP(n){return{integerValue:""+n}}function J4(n,e){return S4(e)?QP(e):RI(n,e)}var ua=class{constructor(){this._=void 0}};function X4(n,e,t){return n instanceof la?function(i,o){let s={fields:{[PP]:{stringValue:NP},[xP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&II(o)&&(o=xp(o)),o&&(s.fields[MP]=o),{mapValue:s}}(t,e):n instanceof ko?ZP(n,e):n instanceof Oo?JP(n,e):function(i,o){let s=YP(i,o),a=LN(s)+LN(i.Re);return qE(s)&&qE(i.Re)?QP(a):RI(i.serializer,a)}(n,e)}function eq(n,e,t){return n instanceof ko?ZP(n,e):n instanceof Oo?JP(n,e):t}function YP(n,e){return n instanceof da?function(r){return qE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var la=class extends ua{},ko=class extends ua{constructor(e){super(),this.elements=e}};function ZP(n,e){let t=XP(e);for(let r of n.elements)t.some(i=>ir(i,r))||t.push(r);return{arrayValue:{values:t}}}var Oo=class extends ua{constructor(e){super(),this.elements=e}};function JP(n,e){let t=XP(e);for(let r of n.elements)t=t.filter(i=>!ir(i,r));return{arrayValue:{values:t}}}var da=class extends ua{constructor(e,t){super(),this.serializer=e,this.Re=t}};function LN(n){return xe(n.integerValue||n.doubleValue)}function XP(n){return bI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function tq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ko&&i instanceof ko||r instanceof Oo&&i instanceof Oo?ia(r.elements,i.elements,ir):r instanceof da&&i instanceof da?ir(r.Re,i.Re):r instanceof la&&i instanceof la}(n.transform,e.transform)}var iw=class{constructor(e,t){this.version=e,this.transformResults=t}},pn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ha=class{};function eM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fa(n.key,pn.none()):new Fo(n.key,n.data,pn.none());{let t=n.data,r=Xt.empty(),i=new it(en.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new or(n.key,r,new fn(i.toArray()),pn.none())}}function nq(n,e,t){n instanceof Fo?function(i,o,s){let a=i.value.clone(),u=jN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof or?function(i,o,s){if(!Wf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ru(n,e,t,r){return n instanceof Fo?function(o,s,a,u){if(!Wf(o.precondition,s))return a;let l=o.value.clone(),h=UN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof or?function(o,s,a,u){if(!Wf(o.precondition,s))return a;let l=UN(o.fieldTransforms,u,s),h=s.data;return h.setAll(tM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Wf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function rq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=YP(r.transform,i||null);o!=null&&(t===null&&(t=Xt.empty()),t.set(r.field,o))}return t||null}function VN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ia(r,i,(o,s)=>tq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fo=class extends ha{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},or=class extends ha{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jN(n,e,t){let r=new Map;Ie(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,eq(s,a,t[i]))}return r}function UN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,X4(o,s,e))}return r}var fa=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ow=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&nq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ru(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ru(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=KP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=eM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(t,r)=>VN(t,r))&&ia(this.baseMutations,e.baseMutations,(t,r)=>VN(t,r))}},aw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return K4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var uw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,ge;function iq(n){switch(n){case M.OK:return K(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function nM(n){if(n===void 0)return Or("GRPC error has no .code"),M.UNKNOWN;switch(n){case We.OK:return M.OK;case We.CANCELLED:return M.CANCELLED;case We.UNKNOWN:return M.UNKNOWN;case We.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case We.INTERNAL:return M.INTERNAL;case We.UNAVAILABLE:return M.UNAVAILABLE;case We.UNAUTHENTICATED:return M.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case We.NOT_FOUND:return M.NOT_FOUND;case We.ALREADY_EXISTS:return M.ALREADY_EXISTS;case We.PERMISSION_DENIED:return M.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case We.ABORTED:return M.ABORTED;case We.OUT_OF_RANGE:return M.OUT_OF_RANGE;case We.UNIMPLEMENTED:return M.UNIMPLEMENTED;case We.DATA_LOSS:return M.DATA_LOSS;default:return K(39323,{code:n})}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var BN=null;var oq=new xr([4294967295,4294967295],0);function $N(n){let e=pP().encode(n),t=new DE;return t.update(e),new Uint8Array(t.digest())}function HN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([t,r],0),new xr([i,o],0)]}var lw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ro(`Invalid padding: ${t}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=xr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(xr.fromNumber(r)));return i.compare(oq)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=$N(e),[r,i]=HN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=$N(e),[r,i]=HN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new je(se),jr(),he())}},ku=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var ta=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},ip=class{constructor(e,t){this.targetId=e,this.Ce=t}},op=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},sp=class{constructor(){this.Fe=0,this.Me=zN(),this.xe=It.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),t=he(),r=he();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new ku(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=zN()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ie(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},dw=class{constructor(e){this.ze=e,this.je=new Map,this.He=jr(),this.Je=Hf(),this.Ye=Hf(),this.Ze=new je(se)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(tw(o))if(r===0){let s=new W(o.path);this.tt(t,s,Pn.newNoDocument(s,te.min()))}else Ie(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}BN?.ht(function(h,p,g,y,C){var P,R,k,G,$,pe;let ze={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ve=p.unchangedNames;return ve&&(ze.bloomFilter={applied:C===0,hashCount:(P=ve?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(G=(k=(R=ve?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&G!==void 0?G:0,padding:(pe=($=ve?.bits)===null||$===void 0?void 0:$.padding)!==null&&pe!==void 0?pe:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),ze}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Lr(r).toUint8Array()}catch(u){if(u instanceof Xf)return ra("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lw(s,i,o)}catch(u){return ra(u instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&tw(a.target)){let u=new W(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,Pn.newNoDocument(u,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=he();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new rp(e,t,this.Ze,this.He,r);return this.He=jr(),this.Je=Hf(),this.Ye=Hf(),this.Ze=new je(se),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new sp,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new it(se),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new it(se),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new sp),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Hf(){return new je(W.comparator)}function zN(){return new je(W.comparator)}var sq={asc:"ASCENDING",desc:"DESCENDING"},aq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cq={and:"AND",or:"OR"},hw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fw(n,e){return n.useProto3Json||Mp(e)?e:{value:e}}function ap(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uq(n,e){return ap(n,e.toTimestamp())}function rr(n){return Ie(!!n,49232),te.fromTimestamp(function(t){let r=Fr(t);return new ht(r.seconds,r.nanos)}(n))}function NI(n,e){return pw(n,e).canonicalString()}function pw(n,e){let t=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function iM(n){let e=Oe.fromString(n);return Ie(uM(e),10190,{key:e.toString()}),e}function gw(n,e){return NI(n.databaseId,e.path)}function RE(n,e){let t=iM(e);if(t.get(1)!==n.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(sM(t))}function oM(n,e){return NI(n.databaseId,e)}function lq(n){let e=iM(n);return e.length===4?Oe.emptyPath():sM(e)}function mw(n){return new Oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sM(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qN(n,e,t){return{name:gw(n,e),fields:t.value.mapValue.fields}}function dq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string",58123),It.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),It.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:nM(l.code);return new U(h,l.message||"")}(s);t=new op(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=RE(n,r.document.name),o=rr(r.document.updateTime),s=r.document.createTime?rr(r.document.createTime):te.min(),a=new Xt({mapValue:{fields:r.document.fields}}),u=Pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ta(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=RE(n,r.document),o=r.readTime?rr(r.readTime):te.min(),s=Pn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ta([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=RE(n,r.document),o=r.removedTargetIds||[];t=new ta([],o,i,null)}else{if(!("filter"in e))return K(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new uw(i,o),a=r.targetId;t=new ip(a,s)}}return t}function hq(n,e){let t;if(e instanceof Fo)t={update:qN(n,e.key,e.value)};else if(e instanceof fa)t={delete:gw(n,e.key)};else if(e instanceof or)t={update:qN(n,e.key,e.data),updateMask:wq(e.fieldMask)};else{if(!(e instanceof ow))return K(16599,{ft:e.type});t={verify:gw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof la)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof da)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:uq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)}(n,e.precondition)),t}function fq(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?rr(i.updateTime):rr(o);return s.isEqual(te.min())&&(s=rr(o)),new iw(s,i.transformResults||[])}(t,e))):[]}function pq(n,e){return{documents:[oM(n,e.path)]}}function gq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oM(n,i);let o=function(l){if(l.length!==0)return cM(Mn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Js(g.field),direction:vq(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=fw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function mq(n){let e=lq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ie(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=aM(p);return g instanceof Mn&&jP(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(C){return new xo(Xs(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Mp(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new ca(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new ca(y,g)}(t.endAt)),H4(e,i,s,o,a,"F",u,l)}function yq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xs(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xs(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xs(t.unaryFilter.field);return Qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xs(t.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(n):n.fieldFilter!==void 0?function(t){return Qe.create(Xs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mn.create(t.compositeFilter.filters.map(r=>aM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(t.compositeFilter.op))}(n):K(30097,{filter:n})}function vq(n){return sq[n]}function _q(n){return aq[n]}function Eq(n){return cq[n]}function Js(n){return{fieldPath:n.canonicalString()}}function Xs(n){return en.fromServerFormat(n.fieldPath)}function cM(n){return n instanceof Qe?function(t){if(t.op==="=="){if(MN(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(PN(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MN(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(PN(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:_q(t.op),value:t.value}}}(n):n instanceof Mn?function(t){let r=t.getFilters().map(i=>cM(i));return r.length===1?r[0]:{compositeFilter:{op:Eq(t.op),filters:r}}}(n):K(54877,{filter:n})}function wq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ou=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yw=class{constructor(e){this.wt=e}};function Iq(n){let e=mq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rw(e,e.limit,"L"):e}var cp=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Pu(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Fr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Lr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?FP(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):OP(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):K(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=oa,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(xe(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),W.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};cp.Wt=new cp;var vw=class{constructor(){this.Cn=new _w}addToCollectionParentIndex(e,t){return this.Cn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Mo.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},_w=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new it(Oe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Oe.comparator)).toArray()}};var Bce=new Uint8Array(0);var GN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lM=41943040,hn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(lM,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);var Fu=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var WN="LruGarbageCollector",Dq=1048576;function KN([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var Ew=class{constructor(e){this.Er=e,this.buffer=new it(KN),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();KN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ww=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){B(WN,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?B(WN,"Ignoring IndexedDB error during garbage collection: ",t):yield ya(t)}yield this.mr(3e5)}))}},Iw=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(EI.le);let r=new Ew(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(GN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GN):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ys()<=le.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Tq(n,e){return new Iw(n,e)}var Dw=class{constructor(){this.changes=new Vr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var bw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ru(r.mutation,i,fn.empty(),ht.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=Ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=bu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=jr(),s=Au(),a=function(){return Au()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof or)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ru(h.mutation,l,h.mutation.getFieldMask(),ht.now())):s.set(l.key,fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Tw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Au(),i=new je((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||fn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=KP();h.forEach(g=>{if(!o.has(g)){let y=eM(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Ao()),a=Nu,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:WP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=bu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=bu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,g){return new Ci(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Pn.newInvalidDocument(h)))});let a=bu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ru(h.mutation,l,fn.empty(),ht.now()),Op(t,l)&&(a=a.insert(u,l))}),a})}};var Cw=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return x.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:rr(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:Iq(i.bundledQuery),readTime:rr(i.readTime)}}(t)),x.resolve()}};var Sw=class{constructor(){this.overlays=new je(W.comparator),this.Qr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ao();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Ao(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ao(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ao(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cw(t,r));let o=this.Qr.get(t);o===void 0&&(o=he(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var Aw=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Lu=class{constructor(){this.$r=new it(Ke.Ur),this.Kr=new it(Ke.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ke(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new W(new Oe([])),r=new Ke(t,e),i=new Ke(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new W(new Oe([])),r=new Ke(t,e),i=new Ke(t,e+1),o=he();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ke(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return W.comparator(e.key,t.key)||se(e.Zr,t.Zr)}static Wr(e,t){return se(e.Zr,t.Zr)||W.comparator(e.key,t.key)}};var Rw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new it(Ke.Ur)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?wI:this.nr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(se);return t.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),x.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new W(o),0),a=new it(se);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),x.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return x.forEach(t.mutations,i=>{let o=new Ke(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Ke(t,0),i=this.Xr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Nw=class{constructor(e){this.ii=e,this.docs=function(){return new je(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=jr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=jr(),s=t.path,a=new W(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||T4(D4(h),r)<=0||(i.has(h.key)||Op(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}si(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Pw(this)}getSize(e){return x.resolve(this.size)}},Pw=class extends Dw{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var Mw=class{constructor(e){this.persistence=e,this.oi=new Vr(t=>CI(t),SI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this._i=0,this.ai=new Lu,this.targetCount=0,this.ui=Fu.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),x.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Tr(t),x.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.ai.containsKey(t))}};var up=class{constructor(e,t){this.ci={},this.overlays={},this.li=new EI(0),this.hi=!1,this.hi=!0,this.Pi=new Aw,this.referenceDelegate=e(this),this.Ti=new Mw(this),this.indexManager=new vw,this.remoteDocumentCache=function(i){return new Nw(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new yw(t),this.Ei=new Cw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Rw(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new xw(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return x.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},xw=class extends $E{constructor(e){super(),this.currentSequenceNumber=e}},kw=class n{constructor(e){this.persistence=e,this.Vi=new Lu,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw K(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.gi,r=>{let i=W.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return x.or([()=>x.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},lp=class n{constructor(e,t){this.persistence=e,this.yi=new Vr(r=>A4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Tq(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return x.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),x.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qf(e.data.value)),t}Dr(e,t,r){return x.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ow=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Fw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Lw=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return zA()?8:C4(nt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Fw;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Ys()<=le.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Zs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),x.resolve()):(Ys()<=le.DEBUG&&B("QueryEngine","Query:",Zs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Ys()<=le.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Zs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(t))):x.resolve())}ws(e,t){if(FN(t))return x.resolve(null);let r=nr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=rw(t,null,"F"),r=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(t,a);return this.Cs(t,l,s,u.readTime)?this.ws(e,rw(t,null,"F")):this.Fs(e,l,t,u)}))})))}bs(e,t,r,i){return FN(t)||i.isEqual(te.min())?x.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?x.resolve(null):(Ys()<=le.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zs(t)),this.Fs(e,s,t,I4(i,Nu)).next(a=>a))})}vs(e,t){let r=new it(qP(e));return t.forEach((i,o)=>{Op(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ys()<=le.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Zs(t)),this.ys.getDocumentsMatchingQuery(e,t,Mo.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PI="LocalStore",bq=3e8,Vw=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new je(se),this.Os=new Vr(o=>CI(o),SI),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bw(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function Cq(n,e,t,r){return new Vw(n,e,t,r)}function dM(n,e){return w(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Sq(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(P=>{let R=l.docVersions.get(C);Ie(R!==null,48541),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function hM(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Aq(n,e){let t=X(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(P,R,k){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=bq?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,h)&&a.push(t.Ti.updateTargetData(o,y))});let u=jr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Rq(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(te.min())){let h=t.Ti.getLastRemoteSnapshotVersion(o).next(p=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.xs=i,o))}function Rq(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=jr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(PI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function Nq(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pq(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new Ou(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function jw(n,e,t){return w(this,null,function*(){let r=X(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!va(s))throw s;B(PI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function QN(n,e,t){let r=X(n),i=te.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),g=p.Os.get(h);return g!==void 0?x.resolve(p.xs.get(g)):p.Ti.getTargetData(l,h)}(r,s,nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:he())).next(a=>(Mq(r,q4(e),a),{documents:a,$s:o})))}function Mq(n,e,t){let r=n.Ns.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var dp=class{constructor(){this.activeTargetIds=Z4()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Uw=class{constructor(){this.xo=new dp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new dp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Bw=class{No(e){}shutdown(){}};var YN="ConnectivityMonitor",hp=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){B(YN,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){B(YN,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zf=null;function $w(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}var NE="RestConnection",xq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Hw=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===ep?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=$w(),a=this.jo(e,t.toUriEncodedString());B(NE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=mi(l);return this.Jo(e,a,u,r,h).then(p=>(B(NE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ra(NE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=xq[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var zw=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var wt="WebChannelConnection",qw=class extends Hw{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=$w();return new Promise((a,u)=>{let l=new TE;l.setWithCredentials(!0),l.listenOnce(bE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Tu.NO_ERROR:let p=l.getResponseJson();B(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Tu.TIMEOUT:B(wt,`RPC '${e}' ${s} timed out`),u(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:let g=l.getStatus();if(B(wt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let P=function(k){let G=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(G)>=0?G:M.UNKNOWN}(C.status);u(new U(P,C.message))}else u(new U(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new U(M.UNAVAILABLE,"Connection failed."));break;default:K(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{B(wt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(wt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}I_(e,t,r){let i=$w(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AE(),a=SE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let g=!1,y=!1,C=new zw({Zo:R=>{y?B(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(B(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),B(wt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),P=(R,k,G)=>{R.listen(k,$=>{try{G($)}catch(pe){setTimeout(()=>{throw pe},0)}})};return P(p,Qs.EventType.OPEN,()=>{y||(B(wt,`RPC '${e}' stream ${i} transport opened.`),C.__())}),P(p,Qs.EventType.CLOSE,()=>{y||(y=!0,B(wt,`RPC '${e}' stream ${i} transport closed`),C.u_(),this.d_(p))}),P(p,Qs.EventType.ERROR,R=>{y||(y=!0,ra(wt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.u_(new U(M.UNAVAILABLE,"The operation could not be completed")))}),P(p,Qs.EventType.MESSAGE,R=>{var k;if(!y){let G=R.data[0];Ie(!!G,16349);let $=G,pe=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(pe){B(wt,`RPC '${e}' stream ${i} received error:`,pe);let ze=pe.status,ve=function(E){let I=We[E];if(I!==void 0)return nM(I)}(ze),D=pe.message;ve===void 0&&(ve=M.INTERNAL,D="Unknown error status: "+ze+" with message "+pe.message),y=!0,C.u_(new U(ve,D)),p.close()}else B(wt,`RPC '${e}' stream ${i} received:`,G),C.c_(G)}}),P(a,CE.STAT_EVENT,R=>{R.stat===Bf.PROXY?B(wt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Bf.NOPROXY&&B(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}};function PE(){return typeof document<"u"?document:null}function Fp(n){return new hw(n,!0)}var fp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var ZN="PersistentStream",pp=class{constructor(e,t,r,i,o,s,a,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new fp(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return w(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return w(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,t){return w(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{let i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){let r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>w(this,null,function*(){this.state=0,this.start()}))}j_(e){return B(ZN,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(B(ZN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gw=class extends pp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=dq(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?rr(s.readTime):te.min()}(e);return this.listener.Y_(t,r)}Z_(e){let t={};t.database=mw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=tw(u)?{documents:pq(o,u)}:{query:gq(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=rM(o,s.resumeToken);let l=fw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=ap(o,s.snapshotVersion.toTimestamp());let l=fw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=yq(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){let t={};t.database=mw(this.serializer),t.removeTarget=e,this.Q_(t)}},Ww=class extends pp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let t=fq(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.ra(r,t)}ia(){let e={};e.database=mw(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hq(this.serializer,r))};this.Q_(t)}};var Kw=class{},Qw=class extends Kw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,pw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,pw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},Yw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Or(t),this.ua=!1):B("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Lo="RemoteStore",Zw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>w(this,null,function*(){jo(this)&&(B(Lo,"Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=X(u);l.da.add(4),yield zu(l),l.Va.set("Unknown"),l.da.delete(4),yield Lp(l)})}(this))}))}),this.Va=new Yw(r,i)}};function Lp(n){return w(this,null,function*(){if(jo(n))for(let e of n.Aa)yield e(!0)})}function zu(n){return w(this,null,function*(){for(let e of n.Aa)yield e(!1)})}function fM(n,e){let t=X(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),OI(t)?kI(t):_a(t).N_()&&xI(t,e))}function MI(n,e){let t=X(n),r=_a(t);t.Ea.delete(e),r.N_()&&pM(t,e),t.Ea.size===0&&(r.N_()?r.k_():jo(t)&&t.Va.set("Unknown"))}function xI(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).Z_(e)}function pM(n,e){n.ma.Ke(e),_a(n).X_(e)}function kI(n){n.ma=new dw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Va.ca()}function OI(n){return jo(n)&&!_a(n).O_()&&n.Ea.size>0}function jo(n){return X(n).da.size===0}function gM(n){n.ma=void 0}function kq(n){return w(this,null,function*(){n.Va.set("Online")})}function Oq(n){return w(this,null,function*(){n.Ea.forEach((e,t)=>{xI(n,e)})})}function Fq(n,e){return w(this,null,function*(){gM(n),OI(n)?(n.Va.Pa(e),kI(n)):n.Va.set("Unknown")})}function Lq(n,e,t){return w(this,null,function*(){if(n.Va.set("Online"),e instanceof op&&e.state===2&&e.cause)try{yield function(i,o){return w(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(n,e)}catch(r){B(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gp(n,r)}else if(e instanceof ta?n.ma.Xe(e):e instanceof ip?n.ma.ot(e):n.ma.nt(e),!t.isEqual(te.min()))try{let r=yield hM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),pM(o,u);let p=new Ou(h.target,u,l,h.sequenceNumber);xI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){B(Lo,"Failed to raise snapshot:",r),yield gp(n,r)}})}function gp(n,e,t){return w(this,null,function*(){if(!va(e))throw e;n.da.add(1),yield zu(n),n.Va.set("Offline"),t||(t=()=>hM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){B(Lo,"Retrying IndexedDB access"),yield t(),n.da.delete(1),yield Lp(n)}))})}function mM(n,e){return e().catch(t=>gp(n,t,e))}function Vp(n){return w(this,null,function*(){let e=X(n),t=Si(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:wI;for(;Vq(e);)try{let i=yield Nq(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,jq(e,i)}catch(i){yield gp(e,i)}yM(e)&&vM(e)})}function Vq(n){return jo(n)&&n.Ia.length<10}function jq(n,e){n.Ia.push(e);let t=Si(n);t.N_()&&t.ea&&t.ta(e.mutations)}function yM(n){return jo(n)&&!Si(n).O_()&&n.Ia.length>0}function vM(n){Si(n).start()}function Uq(n){return w(this,null,function*(){Si(n).ia()})}function Bq(n){return w(this,null,function*(){let e=Si(n);for(let t of n.Ia)e.ta(t.mutations)})}function $q(n,e,t){return w(this,null,function*(){let r=n.Ia.shift(),i=aw.from(r,e,t);yield mM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vp(n)})}function Hq(n,e){return w(this,null,function*(){e&&Si(n).ea&&(yield function(r,i){return w(this,null,function*(){if(function(s){return iq(s)&&s!==M.ABORTED}(i.code)){let o=r.Ia.shift();Si(r).L_(),yield mM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vp(r)}})}(n,e)),yM(n)&&vM(n)})}function JN(n,e){return w(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),B(Lo,"RemoteStore received new credentials");let r=jo(t);t.da.add(3),yield zu(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),yield Lp(t)})}function zq(n,e){return w(this,null,function*(){let t=X(n);e?(t.da.delete(2),yield Lp(t)):e||(t.da.add(2),yield zu(t),t.Va.set("Unknown"))})}function _a(n){return n.fa||(n.fa=function(t,r,i){let o=X(t);return o.oa(),new Gw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:kq.bind(null,n),n_:Oq.bind(null,n),i_:Fq.bind(null,n),Y_:Lq.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.fa.L_(),OI(n)?kI(n):n.Va.set("Unknown")):(yield n.fa.stop(),gM(n))}))),n.fa}function Si(n){return n.ga||(n.ga=function(t,r,i){let o=X(t);return o.oa(),new Ww(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Uq.bind(null,n),i_:Hq.bind(null,n),na:Bq.bind(null,n),ra:$q.bind(null,n)}),n.Aa.push(e=>w(null,null,function*(){e?(n.ga.L_(),yield Vp(n)):(yield n.ga.stop(),n.Ia.length>0&&(B(Lo,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))}))),n.ga}var Jw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function FI(n,e){if(Or("AsyncQueue",`${e}: ${n}`),va(n))return new U(M.UNAVAILABLE,`${e}: ${n}`);throw n}var mp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=bu(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yp=class{constructor(){this.pa=new je(W.comparator)}track(e){let t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):K(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}},pa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,mp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Xw=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},eI=class{constructor(){this.queries=XN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=X(t),o=i.queries;i.queries=XN(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}};function XN(){return new Vr(n=>zP(n),kp)}function _M(n,e){return w(this,null,function*(){let t=X(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new Xw,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield t.onListen(i,!0);break;case 1:o.ba=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=FI(s,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&LI(t)})}function EM(n,e){return w(this,null,function*(){let t=X(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function qq(n,e){let t=X(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&LI(t)}function Gq(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function LI(n){n.Ca.forEach(e=>{e.next()})}var tI,eP;(eP=tI||(tI={})).xa="default",eP.Cache="cache";var vp=class{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;let r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==tI.Cache}};var _p=class{constructor(e){this.key=e}},Ep=class{constructor(e){this.key=e}},nI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.Za=qP(e),this.Xa=new mp(this.Za)}get eu(){return this.Ha}tu(e,t){let r=t?t.nu:new yp,i=t?t.Xa:this.Xa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Op(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?C!==P&&(r.track({type:3,doc:y}),R=!0):this.ru(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Za(y,u)>0||l&&this.Za(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,C){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Vt:R})}};return P(y)-P(C)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=t&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new pa(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new yp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=he(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Ep(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new _p(r))}),t}au(e){this.Ha=e.$s,this.Ya=he();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return pa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},VI="SyncEngine",rI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},iI=class{constructor(e){this.key=e,this.cu=!1}},oI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Vr(a=>zP(a),kp),this.Pu=new Map,this.Tu=new Set,this.Iu=new je(W.comparator),this.Eu=new Map,this.du=new Lu,this.Au={},this.Ru=new Map,this.Vu=Fu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function Wq(n,e,t=!0){return w(this,null,function*(){let r=CM(n),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield wM(r,e,t,!0),i})}function Kq(n,e){return w(this,null,function*(){let t=CM(n);yield wM(t,e,!0,!1)})}function wM(n,e,t,r){return w(this,null,function*(){let i=yield Pq(n.localStore,nr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Qq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&fM(n.remoteStore,i),a})}function Qq(n,e,t,r,i){return w(this,null,function*(){n.fu=(p,g,y)=>function(P,R,k,G){return w(this,null,function*(){let $=R.view.tu(k);$.Cs&&($=yield QN(P.localStore,R.query,!1).then(({documents:D})=>R.view.tu(D,$)));let pe=G&&G.targetChanges.get(R.targetId),ze=G&&G.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges($,P.isPrimaryClient,pe,ze);return nP(P,R.targetId,ve.ou),ve.snapshot})}(n,p,g,y);let o=yield QN(n.localStore,e,!0),s=new nI(e,o.$s),a=s.tu(o.documents),u=ku.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);nP(n,t,l.ou);let h=new rI(e,t,s);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),l.snapshot})}function Yq(n,e,t){return w(this,null,function*(){let r=X(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!kp(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&MI(r.remoteStore,i.targetId),sI(r,i.targetId)}).catch(ya))):(sI(r,i.targetId),yield jw(r.localStore,i.targetId,!0))})}function Zq(n,e){return w(this,null,function*(){let t=X(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),MI(t.remoteStore,r.targetId))})}function Jq(n,e,t){return w(this,null,function*(){let r=o3(n);try{let i=yield function(s,a){let u=X(s),l=ht.now(),h=a.reduce((y,C)=>y.add(C.key),he()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=jr(),P=he();return u.Bs.getEntries(y,h).next(R=>{C=R,C.forEach((k,G)=>{G.isValidDocument()||(P=P.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let k=[];for(let G of a){let $=rq(G,p.get(G.key).overlayedDocument);$!=null&&k.push(new or(G.key,$,LP($.value.mapValue),pn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{g=R;let k=R.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:g.batchId,changes:WP(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new je(se)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,t),yield qu(r,i.changes),yield Vp(r.remoteStore)}catch(i){let o=FI(i,"Failed to persist write");t.reject(o)}})}function IM(n,e){return w(this,null,function*(){let t=X(n);try{let r=yield Aq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?Ie(s.cu,14607):i.removedDocuments.size>0&&(Ie(s.cu,42227),s.cu=!1))}),yield qu(t,r,e)}catch(r){yield ya(r)}})}function tP(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(l=!0)}),l&&LI(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xq(n,e,t){return w(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new je(W.comparator);s=s.insert(o,Pn.newNoDocument(o,te.min()));let a=he().add(o),u=new rp(te.min(),new Map,new je(se),s,a);yield IM(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),jI(r)}else yield jw(r.localStore,e,!1).then(()=>sI(r,e,t)).catch(ya)})}function e3(n,e){return w(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield Sq(t.localStore,e);TM(t,r,null),DM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qu(t,i)}catch(i){yield ya(i)}})}function t3(n,e,t){return w(this,null,function*(){let r=X(n);try{let i=yield function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);TM(r,e,t),DM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qu(r,i)}catch(i){yield ya(i)}})}function DM(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function TM(n,e,t){let r=X(n),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function sI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||bM(n,r)})}function bM(n,e){n.Tu.delete(e.path.canonicalString());let t=n.Iu.get(e);t!==null&&(MI(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),jI(n))}function nP(n,e,t){for(let r of t)r instanceof _p?(n.du.addReference(r.key,e),n3(n,r)):r instanceof Ep?(B(VI,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||bM(n,r.key)):K(19791,{pu:r})}function n3(n,e){let t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(B(VI,"New document in limbo: "+t),n.Tu.add(r),jI(n))}function jI(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){let e=n.Tu.values().next().value;n.Tu.delete(e);let t=new W(Oe.fromString(e)),r=n.Vu.next();n.Eu.set(r,new iI(t)),n.Iu=n.Iu.insert(t,r),fM(n.remoteStore,new Ou(nr(AI(t.path)),r,"TargetPurposeLimboResolution",EI.le))}}function qu(n,e,t){return w(this,null,function*(){let r=X(n),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{s.push(r.fu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Ow.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return w(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.As,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!va(p))throw p;B(PI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.xs.get(g),C=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(C);h.xs=h.xs.insert(g,P)}}})}(r.localStore,o))})}function r3(n,e){return w(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){B(VI,"User change. New user:",e.toKey());let r=yield dM(t.localStore,e);t.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new U(M.CANCELLED,s))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qu(t,r.ks)}})}function i3(n,e){let t=X(n),r=t.Eu.get(e);if(r&&r.cu)return he().add(r.key);{let i=he(),o=t.Pu.get(e);if(!o)return i;for(let s of o){let a=t.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function CM(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xq.bind(null,e),e.lu.Y_=qq.bind(null,e.eventManager),e.lu.gu=Gq.bind(null,e.eventManager),e}function o3(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t3.bind(null,e),e}var SM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=Fp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),yield this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)})}vu(t,r){return null}Cu(t,r){return null}Du(t){return Cq(this.persistence,new Lw,t.initialUser,this.serializer)}Su(t){return new up(kw.fi,this.serializer)}bu(t){return new Uw}terminate(){return w(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),aI=class extends SM{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ie(this.persistence.referenceDelegate instanceof lp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ww(r,e.asyncQueue,t)}Su(e){let t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new up(r=>lp.fi(r,t),this.serializer)}};var s3=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=r3.bind(null,this.syncEngine),yield zq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new eI}()}createDatastore(t){let r=Fp(t.databaseInfo.databaseId),i=function(s){return new qw(s)}(t.databaseInfo);return function(s,a,u,l){return new Qw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Zw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>tP(this.syncEngine,r,0),function(){return hp.C()?new hp:new Bw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new oI(o,s,a,u,l,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var t,r;yield function(o){return w(this,null,function*(){let s=X(o);B(Lo,"RemoteStore shutting down."),s.da.add(5),yield zu(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ai="FirestoreClient",cI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>w(this,null,function*(){B(Ai,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B(Ai,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=FI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ME(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B(Ai,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield dM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function rP(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield a3(n);B(Ai,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JN(e.remoteStore,i)),n._onlineComponents=e})}function a3(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(Ai,"Using user provided OfflineComponentProvider");try{yield ME(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ra("Error using user provided cache. Falling back to memory cache: "+t),yield ME(n,new SM)}}else B(Ai,"Using default OfflineComponentProvider"),yield ME(n,new aI(void 0));return n._offlineComponents})}function AM(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(Ai,"Using user provided OnlineComponentProvider"),yield rP(n,n._uninitializedComponentsProvider._online)):(B(Ai,"Using default OnlineComponentProvider"),yield rP(n,new s3))),n._onlineComponents})}function c3(n){return AM(n).then(e=>e.syncEngine)}function uI(n){return w(this,null,function*(){let e=yield AM(n),t=e.eventManager;return t.onListen=Wq.bind(null,e.syncEngine),t.onUnlisten=Yq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zq.bind(null,e.syncEngine),t})}function u3(n,e,t={}){let r=new er;return n.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return function(o,s,a,u,l){let h=new wp({next:g=>{h.xu(),s.enqueueAndForget(()=>EM(o,p)),g.fromCache&&u.source==="server"?l.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new vp(a,h,{includeMetadataChanges:!0,Qa:!0});return _M(o,p)}(yield uI(n),n.asyncQueue,e,t,r)})),r.promise}function RM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iP=new Map;function NM(n,e,t){if(!t)throw new U(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l3(n,e,t,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oP(n){if(!W.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sP(n){if(W.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jp(n);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var PM="firestore.googleapis.com",aP=!0,Ip=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PM,this.ssl=aP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:aP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dq)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ga=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kE;switch(r.type){case"firstParty":return new VE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=iP.get(t);r&&(B("ComponentProvider","Removing Datastore"),iP.delete(t),r.terminate())}(this),Promise.resolve()}};function MM(n,e,t,r={}){var i;n=Nn(n,ga);let o=mi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(ff(`https://${u}`),pf("Firestore",!0)),s.host!==PM&&s.host!==u&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Qn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=rt.MOCK_USER;else{h=VA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rt(g)}n._authCredentials=new OE(new Kf(h,p))}}var Ri=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ti=class n extends Ri{constructor(e,t,r){super(e,t,AI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xM(n,e,...t){if(n=Le(n),NM("collection","path",e),n instanceof ga){let r=Oe.fromString(e,...t);return sP(r),new Ti(n,null,r)}{if(!(n instanceof jt||n instanceof Ti))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Oe.fromString(e,...t));return sP(r),new Ti(n.firestore,null,r)}}function UI(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Yf.newId()),NM("doc","path",e),n instanceof ga){let r=Oe.fromString(e,...t);return oP(r),new jt(n,null,new W(r))}{if(!(n instanceof jt||n instanceof Ti))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Oe.fromString(e,...t));return oP(r),new jt(n.firestore,n instanceof Ti?n.converter:null,new W(r))}}var cP="AsyncQueue",Dp=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new fp(this,"async_queue_retry"),this.rc=()=>{let r=PE();r&&B(cP,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let t=PE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=PE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new er;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return w(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!va(e))throw e;B(cP,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Or("INTERNAL UNHANDLED ERROR: ",uP(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let i=Jw.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&K(47125,{cc:uP(this.Xu)})}verifyOperationInProgress(){}lc(){return w(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}};function uP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function lP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var sr=class extends ga{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Dp(e),this._firestoreClient=void 0,yield e}})}};function kM(n,e){let t=typeof n=="object"?n:wo(),r=typeof n=="string"?n:e||ep,i=Hs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=LA("firestore");o&&MM(i,...o)}return i}function Up(n){if(n._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d3(n),n._firestoreClient}function d3(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new HE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Vu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ju=class{constructor(e){this._methodName=e}};var Uu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var Bu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var h3=/^__.*__$/,lI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fo(e,this.data,t,this.fieldTransforms)}},Tp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new or(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function OM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ic:n})}}var dI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Cp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(OM(this.Ic)&&h3.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},hI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fp(e)}bc(e,t,r,i=!1){return new dI({Ic:e,methodName:t,wc:r,path:en.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bp(n){let e=n._freezeSettings(),t=Fp(n._databaseId);return new hI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FM(n,e,t,r,i,o={}){let s=n.bc(o.merge||o.mergeFields?2:0,e,t,i);BI("Data must be an object, but it was:",s,r);let a=jM(r,s),u,l;if(o.merge)u=new fn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=fI(e,p,t);if(!s.contains(g))throw new U(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BM(h,g)||h.push(g)}u=new fn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new lI(new Xt(a),u,l)}var bp=class n extends ju{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function LM(n,e,t,r){let i=n.bc(1,e,t);BI("Data must be an object, but it was:",i,r);let o=[],s=Xt.empty();Ni(r,(u,l)=>{let h=$I(e,u,t);l=Le(l);let p=i.mc(h);if(l instanceof bp)o.push(h);else{let g=Gu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new fn(o);return new Tp(s,a,i.fieldTransforms)}function VM(n,e,t,r,i,o){let s=n.bc(1,e,t),a=[fI(e,r,t)],u=[i];if(o.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(fI(e,o[g])),u.push(o[g+1]);let l=[],h=Xt.empty();for(let g=a.length-1;g>=0;--g)if(!BM(l,a[g])){let y=a[g],C=u[g];C=Le(C);let P=s.mc(y);if(C instanceof bp)l.push(y);else{let R=Gu(C,P);R!=null&&(l.push(y),h.set(y,R))}}let p=new fn(l);return new Tp(h,p,s.fieldTransforms)}function f3(n,e,t,r=!1){return Gu(t,n.bc(r?4:3,e))}function Gu(n,e){if(UM(n=Le(n)))return BI("Unsupported field value:",e,n),jM(n,e);if(n instanceof ju)return function(r,i){if(!OM(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Gu(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ht.fromDate(r);return{timestampValue:ap(i.serializer,o)}}if(r instanceof ht){let o=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ap(i.serializer,o)}}if(r instanceof Uu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vu)return{bytesValue:rM(i.serializer,r._byteString)};if(r instanceof jt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:NI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bu)return function(s,a){return{mapValue:{fields:{[DI]:{stringValue:TI},[oa]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return RI(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${jp(r)}`)}(n,e)}function jM(n,e){let t={};return RP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(n,(r,i)=>{let o=Gu(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function UM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof Uu||n instanceof Vu||n instanceof jt||n instanceof ju||n instanceof Bu)}function BI(n,e,t){if(!UM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=jp(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function fI(n,e,t){if((e=Le(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return $I(n,e);throw Cp("Field path arguments must be of type string or ",n,!1,void 0,t)}var p3=new RegExp("[~\\*/\\[\\]]");function $I(n,e,t){if(e.search(p3)>=0)throw Cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch{throw Cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new U(M.INVALID_ARGUMENT,a+n+u)}function BM(n,e){return n.some(t=>t.isEqual(e))}var Sp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($p("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pI=class extends Sp{data(){return super.data()}};function $p(n,e){return typeof e=="string"?$I(n,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}function $M(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $u=class{},Ap=class extends $u{};function HM(n,e,...t){let r=[];e instanceof $u&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof gI).length,a=o.filter(u=>u instanceof Rp).length;if(s>1||s>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Rp=class n extends Ap{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return GM(e._query,t),new Ri(e.firestore,e.converter,nw(e._query,t))}_parse(e){let t=Bp(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hP(p,h);let C=[];for(let P of p)C.push(dP(u,o,P));g={arrayValue:{values:C}}}else g=dP(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hP(p,h),g=f3(a,s,p,h==="in"||h==="not-in");return Qe.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function zM(n,e,t){let r=e,i=$p("where",n);return Rp._create(i,r,t)}var gI=class n extends $u{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Mn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)GM(s,u),s=nw(s,u)}(e._query,t),new Ri(e.firestore,e.converter,nw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var mI=class n extends Ap{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xo(o,s)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ci(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function qM(n,e="asc"){let t=e,r=$p("orderBy",n);return mI._create(r,t)}function dP(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HP(e)&&t.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Oe.fromString(t));if(!W.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NN(n,new W(r))}if(t instanceof jt)return NN(n,t._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(t)}.`)}function hP(n,e){if(!Array.isArray(n)||n.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var yI=class{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ni(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[oa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>xe(s.doubleValue));return new Bu(o)}convertGeoPoint(e){return new Uu(xe(e.latitude),xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=xp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){let t=Fr(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Oe.fromString(e);Ie(uM(r),9688,{name:e});let i=new tp(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||Or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function WM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var No=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Np=class extends Sp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($p("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},na=class extends Np{data(e={}){return super.data(e)}},Pp=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new na(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new na(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new na(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:g3(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function g3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}var Hu=class extends yI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};function KM(n){n=Nn(n,Ri);let e=Nn(n.firestore,sr),t=Up(e),r=new Hu(e);return $M(n._query),u3(t,n._query).then(i=>new Pp(e,r,n,i))}function QM(n,e,t,...r){n=Nn(n,jt);let i=Nn(n.firestore,sr),o=Bp(i),s;return s=typeof(e=Le(e))=="string"||e instanceof Vo?VM(o,"updateDoc",n._key,e,t,r):LM(o,"updateDoc",n._key,e),Hp(i,[s.toMutation(n._key,pn.exists(!0))])}function YM(n){return Hp(Nn(n.firestore,sr),[new fa(n._key,pn.none())])}function ZM(n,e){let t=Nn(n.firestore,sr),r=UI(n),i=WM(n.converter,e);return Hp(t,[FM(Bp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,pn.exists(!1))]).then(()=>r)}function HI(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||lP(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof jt)l=Nn(n.firestore,sr),h=AI(n._key.path),u={next:p=>{e[s]&&e[s](m3(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Nn(n,Ri);l=Nn(p.firestore,sr),h=p._query;let g=new Hu(l);u={next:y=>{e[s]&&e[s](new Pp(l,g,p,y))},error:e[s+1],complete:e[s+2]},$M(n._query)}return function(g,y,C,P){let R=new wp(P),k=new vp(y,R,C);return g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return _M(yield uI(g),k)})),()=>{R.xu(),g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return EM(yield uI(g),k)}))}}(Up(l),h,a,u)}function Hp(n,e){return function(r,i){let o=new er;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return Jq(yield c3(r),i,o)})),o.promise}(Up(n),e)}function m3(n,e,t){let r=t.docs.get(e._key),i=new Hu(n);return new Np(n,i,e._key,r,new No(t.hasPendingWrites,t.fromCache),e.converter)}var vI=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bp(e)}set(e,t,r){this._verifyNotCommitted();let i=xE(e,this._firestore),o=WM(i.converter,t,r),s=FM(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,pn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=xE(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof Vo?VM(this._dataReader,"WriteBatch.update",o._key,t,r,i):LM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,pn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=xE(e,this._firestore);return this._mutations=this._mutations.concat(new fa(t._key,pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function xE(n,e){if((n=Le(n)).firestore!==e)throw new U(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function JM(n){return Up(n=Nn(n,sr)),new vI(n,e=>Hp(n,e))}(function(e,t=!0){(function(i){ma=i})(vi),Sn(new Pt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new sr(new FE(r.getProvider("auth-internal")),new jE(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ve(EN,wN,e),Ve(EN,wN,"esm2017")})();var zp=function(){return zp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zp.apply(this,arguments)};var w3={includeMetadataChanges:!1};function XM(n,e){return e===void 0&&(e=w3),new H(function(t){var r=HI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ex(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:zp(zp({},r),(t={},t[e.idField]=n.id,t))}function tx(n){return XM(n,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function nx(n,e){return e===void 0&&(e={}),tx(n).pipe(Y(function(t){return t.map(function(r){return ex(r,e)})}))}var Uo=class{constructor(e){return e}},rx="firestore",zI=class{constructor(){return qs(rx)}};var qI=new L("angularfire2.firestore-instances");function I3(n,e){let t=du(rx,n,e);return t&&new Uo(t)}function D3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Uo(r)}}var T3={provide:zI,deps:[[new Rt,qI]]},b3={provide:Uo,useFactory:I3,deps:[[new Rt,qI],Rr]};function ix(n,...e){return Ve("angularfire",_i.full,"fst"),zt([b3,T3,{provide:qI,useFactory:D3(n),multi:!0,deps:[ue,Ae,Ei,Do,[new Rt,Du],[new Rt,Gs],...e]}])}var ox=He(nx,!0);var sx=He(ZM,!0,2);var ax=He(xM,!0,2);var cx=He(YM,!0,2);var qp=He(UI,!0,2);var ux=He(KM,!0);var lx=He(kM,!0);var dx=He(qM,!0,2),GI=He(HM,!0,2);var hx=He(QM,!0,2);var WI=He(zM,!0,2),fx=He(JM,!0,2);var px=[];var gx={production:!1,firebaseConfig:{apiKey:"AIzaSyAP6oP_CO8yIvG_d8LxaDCn2R9YXbuehR0",authDomain:"todolist-164b4.firebaseapp.com",projectId:"todolist-164b4",storageBucket:"todolist-164b4.firebasestorage.app",messagingSenderId:"488468917095",appId:"1:488468917095:web:4d467eebe593bff0681dc2",measurementId:"G-LLZ00SYW34"}};var mx={providers:[yv({eventCoalescing:!0}),h_(px),$v(),dR(()=>hR(gx.firebaseConfig)),ix(()=>lx()),fN(()=>gN())]};var bx=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(fe(Es),fe(an))};static \u0275dir=$e({type:n})}return n})(),S3=(()=>{class n extends bx{static \u0275fac=(()=>{let t;return function(i){return(t||(t=co(n)))(i||n)}})();static \u0275dir=$e({type:n,features:[Dn]})}return n})(),Cx=new L("");var A3={provide:Cx,useExisting:On(()=>Xp),multi:!0};function R3(){let n=dn()?dn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var N3=new L(""),Xp=(()=>{class n extends bx{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!R3())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(fe(Es),fe(an),fe(N3,8))};static \u0275dir=$e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&et("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Hn([A3]),Dn]})}return n})();function P3(n){return n==null||M3(n)===0}function M3(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ZI=new L(""),Sx=new L("");function x3(n){return P3(n.value)?{required:!0}:null}function yx(n){return null}function Ax(n){return n!=null}function Rx(n){return Dr(n)?Ee(n):n}function Nx(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function Px(n,e){return e.map(t=>t(n))}function k3(n){return!n.validate}function Mx(n){return n.map(e=>k3(e)?e:t=>e.validate(t))}function O3(n){if(!n)return null;let e=n.filter(Ax);return e.length==0?null:function(t){return Nx(Px(t,e))}}function JI(n){return n!=null?O3(Mx(n)):null}function F3(n){if(!n)return null;let e=n.filter(Ax);return e.length==0?null:function(t){let r=Px(t,e).map(Rx);return im(r).pipe(Y(Nx))}}function XI(n){return n!=null?F3(Mx(n)):null}function vx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function L3(n){return n._rawValidators}function V3(n){return n._rawAsyncValidators}function KI(n){return n?Array.isArray(n)?n:[n]:[]}function Wp(n,e){return Array.isArray(n)?n.includes(e):n===e}function _x(n,e){let t=KI(e);return KI(n).forEach(i=>{Wp(t,i)||t.push(i)}),t}function Ex(n,e){return KI(e).filter(t=>!Wp(n,t))}var Kp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ia=class extends Kp{name;get formDirective(){return null}get path(){return null}},Ju=class extends Kp{_parent=null;name=null;valueAccessor=null},Qp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},j3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Rle=ne(O({},j3),{"[class.ng-submitted]":"isSubmitted"}),xx=(()=>{class n extends Qp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(fe(Ju,2))};static \u0275dir=$e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Tn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Dn]})}return n})(),kx=(()=>{class n extends Qp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(fe(Ia,10))};static \u0275dir=$e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Tn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Dn]})}return n})();var Wu="VALID",Gp="INVALID",Ea="PENDING",Ku="DISABLED",Pi=class{},Yp=class extends Pi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Yu=class extends Pi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Zu=class extends Pi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},wa=class extends Pi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},QI=class extends Pi{source;constructor(e){super(),this.source=e}},YI=class extends Pi{source;constructor(e){super(),this.source=e}};function Ox(n){return(eg(n)?n.validators:n)||null}function U3(n){return Array.isArray(n)?JI(n):n||null}function Fx(n,e){return(eg(e)?e.asyncValidators:n)||null}function B3(n){return Array.isArray(n)?XI(n):n||null}function eg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function $3(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function H3(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Zp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Kt(this.statusReactive)}set status(e){Kt(()=>this.statusReactive.set(e))}_status=bs(()=>this.statusReactive());statusReactive=At(void 0);get valid(){return this.status===Wu}get invalid(){return this.status===Gp}get pending(){return this.status==Ea}get disabled(){return this.status===Ku}get enabled(){return this.status!==Ku}errors;get pristine(){return Kt(this.pristineReactive)}set pristine(e){Kt(()=>this.pristineReactive.set(e))}_pristine=bs(()=>this.pristineReactive());pristineReactive=At(!0);get dirty(){return!this.pristine}get touched(){return Kt(this.touchedReactive)}set touched(e){Kt(()=>this.touchedReactive.set(e))}_touched=bs(()=>this.touchedReactive());touchedReactive=At(!1);get untouched(){return!this.touched}_events=new Z;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_x(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_x(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ex(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ex(e,this._rawAsyncValidators))}hasValidator(e){return Wp(this._rawValidators,e)}hasAsyncValidator(e){return Wp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Zu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Zu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Yu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Yu(!0,r))}markAsPending(e={}){this.status=Ea;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ku,this.errors=null,this._forEachChild(i=>{i.disable(ne(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yp(this.value,r)),this._events.next(new wa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wu,this._forEachChild(r=>{r.enable(ne(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wu||this.status===Ea)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yp(this.value,t)),this._events.next(new wa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ku:Wu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ea,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Rx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new me,this.statusChanges=new me}_calculateStatus(){return this._allControlsDisabled()?Ku:this.errors?Gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ea)?Ea:this._anyControlsHaveStatus(Gp)?Gp:Wu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Yu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Zu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){eg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=U3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=B3(this._rawAsyncValidators)}},Jp=class extends Zp{constructor(e,t,r){super(Ox(t),Fx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){H3(this,!0,e),Object.keys(e).forEach(r=>{$3(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eD=new L("",{providedIn:"root",factory:()=>tD}),tD="always";function z3(n,e){return[...e.path,n]}function Lx(n,e,t=tD){Vx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),G3(n,e),K3(n,e),W3(n,e),q3(n,e)}function wx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function q3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Vx(n,e){let t=L3(n);e.validator!==null?n.setValidators(vx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=V3(n);e.asyncValidator!==null?n.setAsyncValidators(vx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();wx(e._rawValidators,i),wx(e._rawAsyncValidators,i)}function G3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&jx(n,e)})}function W3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&jx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function jx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function K3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Q3(n,e){n==null,Vx(n,e)}function Y3(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Z3(n){return Object.getPrototypeOf(n.constructor)===S3}function J3(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function X3(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Xp?t=o:Z3(o)?r=o:i=o}),i||r||t||null}var eG={provide:Ia,useExisting:On(()=>nD)},Qu=Promise.resolve(),nD=(()=>{class n extends Ia{callSetDisabledState;get submitted(){return Kt(this.submittedReactive)}_submitted=bs(()=>this.submittedReactive());submittedReactive=At(!1);_directives=new Set;form;ngSubmit=new me;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Jp({},JI(t),XI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Qu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Lx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Qu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Qu.then(()=>{let r=this._findContainer(t.path),i=new Jp({});Q3(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Qu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Qu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),J3(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new QI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new YI(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(fe(ZI,10),fe(Sx,10),fe(eD,8))};static \u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&et("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Hn([eG]),Dn]})}return n})();function Ix(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var tG=class extends Zp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Ox(t),Fx(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Dx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ix(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ix(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Dx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var nG={provide:Ju,useExisting:On(()=>rD)},Tx=Promise.resolve(),rD=(()=>{class n extends Ju{_changeDetectorRef;callSetDisabledState;control=new tG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new me;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=X3(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Y3(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Tx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&qn(r);Tx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?z3(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(fe(Ia,9),fe(ZI,10),fe(Sx,10),fe(Cx,10),fe(zn,8),fe(eD,8))};static \u0275dir=$e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Hn([nG]),Dn,Un]})}return n})();var Ux=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var rG=(()=>{class n{_validator=yx;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,features:[Un]})}return n})();var iG={provide:ZI,useExisting:On(()=>iD),multi:!0};var iD=(()=>{class n extends rG{required;inputName="required";normalizeInput=qn;createValidator=t=>x3;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=co(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Hn([iG]),Dn]})}return n})();var oG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wt({type:n});static \u0275inj=Ot({})}return n})();var Bx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eD,useValue:t.callSetDisabledState??tD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wt({type:n});static \u0275inj=Ot({imports:[oG]})}return n})();var oD;function aG(){if(oD==null){let n=typeof document<"u"?document.head:null;oD=!!(n&&(n.createShadowRoot||n.attachShadow))}return oD}function tg(n){if(aG()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Xu(n){return n.composedPath?n.composedPath()[0]:n.target}function $x(n){return n.buttons===0||n.detail===0}function Hx(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function ng(n,e=0){return cG(n)?Number(n):arguments.length===2?e:0}function cG(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function ar(n){return n instanceof an?n.nativeElement:n}var rg=new WeakMap,zx=(()=>{class n{_appRef;_injector=A(Ae);_environmentInjector=A(ke);load(t){let r=this._appRef=this._appRef||this._injector.get(Tr),i=rg.get(r);i||(i={loaders:new Set,refs:[]},rg.set(r,i),r.onDestroy(()=>{rg.get(r)?.refs.forEach(o=>o.destroy()),rg.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(u0(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sD;try{sD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{sD=!1}var aD=(()=>{class n{_platformId=A(Bn);isBrowser=this._platformId?_0(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||sD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uG=new L("cdk-dir-doc",{providedIn:"root",factory:lG});function lG(){return A(Ce)}var dG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function hG(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?dG.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var cD=(()=>{class n{get value(){return this.valueSignal()}valueSignal=At("ltr");change=new me;constructor(){let t=A(uG,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(hG(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fG=20,qx=(()=>{class n{_ngZone=A(ue);_platform=A(aD);_renderer=A(Gt).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Z;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=fG){return this._platform.isBrowser?new H(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(pd(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):z()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(st(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=ar(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pG=20,Gx=(()=>{class n{_platform=A(aD);_listeners;_viewportSize;_change=new Z;_document=A(Ce,{optional:!0});constructor(){let t=A(ue),r=A(Gt).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=pG){return t>0?this._change.pipe(pd(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wx=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wt({type:n});static \u0275inj=Ot({})}return n})();var uD={},Kx=(()=>{class n{_appId=A(_s);getId(t){return this._appId!=="ng"&&(t+=this._appId),uD.hasOwnProperty(t)||(uD[t]=0),`${t}${uD[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qx(n){return Array.isArray(n)?n:[n]}function dk(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?Jx(n,e):(r==="input"||r==="select"||r==="textarea")&&Zx(n,e),Yx("canvas",n,e,Jx),Yx("input, textarea, select",n,e,Zx),e}function Yx(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var gG=0;function Zx(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${gG++}`)}function Jx(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function yD(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function hD(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function mG(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function nl(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function Xx(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:u,height:l}=n,h=u*e,p=l*e;return r>i-p&&r<s+p&&t>a-h&&t<o+h}var ig=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:yD(t)})})}handleScroll(e){let t=Xu(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let l=this.getViewportScrollPosition();o=l.top,s=l.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,u=i.left-s;return this.positions.forEach((l,h)=>{l.clientRect&&t!==h&&t.contains(h)&&nl(l.clientRect,a,u)}),i.top=o,i.left=s,{top:a,left:u}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function hk(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function vD(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function Da(n,e){let t=e?"":"none";vD(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function ek(n,e,t){vD(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function og(n,e){return e&&e!="none"?n+" "+e:n}function tk(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=rl(e.left,e.top)}function rl(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function nk(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function yG(n){let e=getComputedStyle(n),t=lD(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=lD(e,"transition-duration"),s=lD(e,"transition-delay");return nk(o[i])+nk(s[i])}function lD(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var vG=new Set(["position"]),fD=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,u,l,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=u,this._zIndex=l,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),rk(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return yG(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=hk(s,this._document),this._previewEmbeddedView=s,e.matchSize?tk(i,o):i.style.transform=rl(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=dk(this._rootElement),tk(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return vD(i.style,{"pointer-events":"none",margin:rk(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},vG),Da(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function rk(n){return"showPopover"in n}var _G={passive:!0},ik={passive:!1},EG={passive:!1,capture:!0},wG=800,ok=new Set(["position"]),pD=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=At(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Z;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=_e.EMPTY;_pointerUpSubscription=_e.EMPTY;_scrollSubscription=_e.EMPTY;_resizeSubscription=_e.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Da(t,e)))}_disabled=!1;beforeStarted=new Z;started=new Z;released=new Z;ended=new Z;entered=new Z;exited=new Z;dropped=new Z;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new ig(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>ar(r)),this._handles.forEach(r=>Da(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ar(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,ik),r.listen(t,"touchstart",this._pointerDown,_G),r.listen(t,"dragstart",this._nativeDragStart,ik)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ar(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&mG(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,u=s+i;this._rootElement.style.transform=rl(a,u),this._activeTransform={x:a,y:u},this._passiveTransform={x:a,y:u}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Da(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Da(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),u=this._dropContainer;if(!a){this._endDragSequence(e);return}(!u||!u.isDragging()&&!u.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){el(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",IG,EG)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new fD(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),ek(i,!1,ok),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=el(t),o=!i&&t.button!==0,s=this._rootElement,a=Xu(t),u=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+wG>Date.now(),l=i?Hx(t):$x(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||u||l)return;if(this._handles.length){let g=s.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=yD(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){ek(this._rootElement,!0,ok),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Xu(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=hk(this._placeholderRef,this._document)):r=dk(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=el(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),u=s.pageX-o.left-a.left,l=s.pageY-o.top-a.top;return{x:o.left-e.left+u,y:o.top-e.top+l}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=el(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:u,height:l}=this._getPreviewRect(),h=a.top+s,p=a.bottom-(l-s),g=a.left+o,y=a.right-(u-o);r=sk(r,g,y),i=sk(i,h,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Da(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=rl(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=og(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=rl(e,t);this._preview.setTransform(og(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,u=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),u>0&&(t-=u)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:el(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Xu(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&nl(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=tg(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return ar(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function sk(n,e,t){return Math.max(e,Math.min(t,n))}function el(n){return n.type[0]==="t"}function IG(n){n.preventDefault()}function ag(n,e,t){let r=ak(e,n.length-1),i=ak(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function ak(n,e){return Math.max(0,Math.min(e,n))}var sg=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",u=o.findIndex(R=>R.drag===e),l=o[s],h=o[u].clientRect,p=l.clientRect,g=u>s?1:-1,y=this._getItemOffsetPx(h,p,g),C=this._getSiblingOffsetPx(u,o,g),P=o.slice();return ag(o,u,s),o.forEach((R,k)=>{if(P[k]===R)return;let G=R.drag===e,$=G?y:C,pe=G?e.getPlaceholderElement():R.drag.getRootElement();R.offset+=$;let ze=Math.round(R.offset*(1/R.drag.scale));a?(pe.style.transform=og(`translate3d(${ze}px, 0, 0)`,R.initialTransform),nl(R.clientRect,0,$)):(pe.style.transform=og(`translate3d(0, ${ze}px, 0)`,R.initialTransform),nl(R.clientRect,$,0))}),this._previousSwap.overlaps=hD(p,t,r),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:u,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),u=e.getPlaceholderElement(),l=s[o];if(l===e&&(l=s[o+1]),!l&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(l=s[0]),a>-1&&s.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){let h=l.getRootElement();h.parentElement.insertBefore(u,h),s.splice(o,0,e)}else this._element.appendChild(u),s.push(e);u.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{nl(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:yD(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let u=i?"left":"top",l=i?"right":"bottom";r===-1?a-=s.clientRect[u]-o[l]:a+=o[u]-s.clientRect[l]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:u})=>{if(a===e)return!1;if(i){let l=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&l===this._previousSwap.delta)return!1}return o?t>=Math.floor(u.left)&&t<Math.floor(u.right):r>=Math.floor(u.top)&&r<Math.floor(u.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},gD=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let u=this.getItemIndex(e),l=e.getPlaceholderElement(),h=a.getRootElement();o>u?h.after(l):h.before(l),ag(this._activeItems,u,o);let p=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=h===p||h.contains(p),{previousIndex:u,currentIndex:o}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let s=this._activeItems[o],a=this._activeItems.indexOf(e);a>-1&&this._activeItems.splice(a,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,e),s.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=tg(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:u,y:l}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-u,r-l);h<i&&(i=h,o=s)}}return o}},ck=.05,fk=.05,gn=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(gn||{}),Mt=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Mt||{}),mD=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Z;entered=new Z;exited=new Z;dropped=new Z;sorted=new Z;receivingStarted=new Z;receivingStopped=new Z;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=_e.EMPTY;_verticalScrollDirection=gn.NONE;_horizontalScrollDirection=Mt.NONE;_scrollNode;_stopScrollTimers=new Z;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=ar(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new ig(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,u={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:u})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof sg&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new gD(this._document,this._dragDropRegistry);else{let t=new sg(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ar(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!Xx(this._domRect,ck,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=gn.NONE,o=Mt.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||Xx(s.clientRect,ck,e,t)&&([i,o]=DG(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),u={width:s,height:a,top:0,right:s,bottom:a,left:0};i=pk(u,t),o=gk(u,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),om(0,Wl).pipe(kn(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===gn.UP?e.scrollBy(0,-t):this._verticalScrollDirection===gn.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Mt.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Mt.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&hD(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!hD(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=tg(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function pk(n,e){let{top:t,bottom:r,height:i}=n,o=i*fk;return e>=t-o&&e<=t+o?gn.UP:e>=r-o&&e<=r+o?gn.DOWN:gn.NONE}function gk(n,e){let{left:t,right:r,width:i}=n,o=i*fk;return e>=t-o&&e<=t+o?Mt.LEFT:e>=r-o&&e<=r+o?Mt.RIGHT:Mt.NONE}function DG(n,e,t,r,i){let o=pk(e,i),s=gk(e,r),a=gn.NONE,u=Mt.NONE;if(o){let l=n.scrollTop;o===gn.UP?l>0&&(a=gn.UP):n.scrollHeight-l>n.clientHeight&&(a=gn.DOWN)}if(s){let l=n.scrollLeft;t==="rtl"?s===Mt.RIGHT?l<0&&(u=Mt.RIGHT):n.scrollWidth+l>n.clientWidth&&(u=Mt.LEFT):s===Mt.LEFT?l>0&&(u=Mt.LEFT):n.scrollWidth-l>n.clientWidth&&(u=Mt.RIGHT)}return[a,u]}var tl={capture:!0},dD={passive:!1,capture:!0},TG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=un({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),mk=(()=>{class n{_ngZone=A(ue);_document=A(Ce);_styleLoader=A(zx);_renderer=A(Gt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Z;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=At([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new Z;pointerUp=new Z;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,dD)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(TG),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),tl],["selectstart",this._preventDefaultWhileDragging,dD]];i?s.push(["touchend",o,tl],["touchcancel",o,tl]):s.push(["mouseup",o,tl]),i||s.push(["mousemove",a=>this.pointerMove.next(a),dD]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,u,l])=>this._renderer.listen(this._document,a,u,l))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new H(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},tl);return()=>{o()}}))),Qa(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bG={dragStartThreshold:5,pointerDirectionChangeThreshold:5},_D=(()=>{class n{_document=A(Ce);_ngZone=A(ue);_viewportRuler=A(Gx);_dragDropRegistry=A(mk);_renderer=A(Gt).createRenderer(null,null);constructor(){}createDrag(t,r=bG){return new pD(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new mD(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uk=new L("CDK_DRAG_PARENT");var CG=new L("CdkDragHandle");var yk=new L("CDK_DRAG_CONFIG"),vk=new L("CdkDropList"),_k=(()=>{class n{element=A(an);dropContainer=A(vk,{optional:!0,skipSelf:!0});_ngZone=A(ue);_viewContainerRef=A($n);_dir=A(cD,{optional:!0});_changeDetectorRef=A(zn);_selfHandle=A(CG,{optional:!0,self:!0});_parentDrag=A(uk,{optional:!0,skipSelf:!0});_dragDropRegistry=A(mk);_destroyed=new Z;_handles=new Ze([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new me;released=new me;ended=new me;entered=new me;exited=new me;dropped=new me;moved=new H(t=>{let r=this._dragRef.moved.pipe(Y(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=A(Ae);constructor(){let t=this.dropContainer,r=A(yk,{optional:!0}),i=A(_D);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this),t._dropListRef.beforeStarted.pipe(kn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Is(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):ar(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:ng(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe($t(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:u,rootElementSelector:l,previewContainer:h}=t;this.disabled=u??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),l&&(this.rootElementSelector=l),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(qe(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Ue(t=>Qa(...t.map(r=>r._stateChanges.pipe(Xr(r))))),kn(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Tn("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",qn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",c0]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Hn([{provide:uk,useExisting:n}]),Un]})}return n})(),lk=new L("CdkDropListGroup");var Ek=(()=>{class n{element=A(an);_changeDetectorRef=A(zn);_scrollDispatcher=A(qx);_dir=A(cD,{optional:!0});_group=A(lk,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new Z;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=A(Kx).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new me;entered=new me;exited=new me;sorted=new me;_unsortedItems=new Set;constructor(){let t=A(_D),r=A(yk,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,s)=>this.sortPredicate(i,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Xr(this._dir.value),kn(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=Qx(this.connectedTo).map(i=>{if(typeof i=="string"){let o=n._dropLists.find(s=>s.id===i);return o}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=ng(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Qa(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(Ds("id",i.id),Tn("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",qn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",qn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",qn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Hn([{provide:lk,useValue:void 0},{provide:vk,useExisting:n}])]})}return n})();var wk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wt({type:n});static \u0275inj=Ot({providers:[_D],imports:[Wx]})}return n})();var Mi=class n{constructor(e){this.auth=e;this.user$=pN(this.auth)}user$;signInWithGoogle(){let e=new gE;return mN(this.auth,e)}signOut(){return yN(this.auth)}static \u0275fac=function(t){return new(t||n)(q(So))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var cg=class n{constructor(e,t){this.firestore=e;this.authService=t;this.todosCollection=ax(this.firestore,"todos")}todosCollection;getTodos(){return this.authService.user$.pipe(Ue(e=>{if(e){let t=GI(this.todosCollection,WI("userId","==",e.uid),dx("position"));return ox(t,{idField:"id"})}else return z([])}))}addTodo(e){return this.authService.user$.pipe($t(1),Ue(t=>t?Ee(ux(GI(this.todosCollection,WI("userId","==",t.uid)))).pipe(Ue(r=>{let i=r.size,o={title:e,completed:!1,userId:t.uid,position:i};return Ee(sx(this.todosCollection,o))})):z(Promise.reject("User not logged in"))))}updateTodo(e){if(!e.id)return Promise.reject("Todo ID is missing");let t=qp(this.firestore,`todos/${e.id}`),o=e,{id:r}=o,i=Lg(o,["id"]);return hx(t,i)}deleteTodo(e){let t=qp(this.firestore,`todos/${e}`);return cx(t)}updateTodoPosition(e){let t=fx(this.firestore);return e.forEach((r,i)=>{if(r.id){let o=qp(this.firestore,`todos/${r.id}`);t.update(o,{position:i})}}),t.commit()}static \u0275fac=function(t){return new(t||n)(q(Uo),q(Mi))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};function RG(n,e){if(n&1){let t=li();Me(0,"div",15),et("dblclick",function(){ut(t);let i=dt().$implicit,o=dt();return lt(o.editTodo(i))}),Et(1),Re()}if(n&2){let t=dt().$implicit;cn(),Ts(" ",t.title," ")}}function NG(n,e){if(n&1){let t=li();Me(0,"div",8)(1,"div",9)(2,"input",10),et("change",function(){let i=ut(t).$implicit,o=dt();return lt(o.toggleCompletion(i))}),Re(),Ir(3,RG,2,1,"div",11),Me(4,"div",12)(5,"button",13),et("click",function(){let i=ut(t).$implicit,o=dt();return lt(o.editTodo(i))}),Et(6,"Edit"),Re(),Me(7,"button",14),et("click",function(){let i=ut(t).$implicit,o=dt();return lt(o.deleteTodo(i.id))}),Et(8,"Delete"),Re()()()()}if(n&2){let t=e.$implicit,r=dt(),i=Tc(11);Tn("completed",t.completed),cn(2),ui("checked",t.completed),cn(),ui("ngIf",(r.editingTodo==null?null:r.editingTodo.id)!==t.id)("ngIfElse",i)}}function PG(n,e){if(n&1){let t=li();Me(0,"div",16)(1,"input",17),Cc("ngModelChange",function(i){ut(t);let o=dt();return mh(o.editingTodo.title,i)||(o.editingTodo.title=i),lt(i)}),et("keydown.enter",function(){ut(t);let i=dt();return lt(i.saveTodo())})("keydown.escape",function(){ut(t);let i=dt();return lt(i.cancelEdit())}),Re(),Me(2,"div",12)(3,"button",18),et("click",function(){ut(t);let i=dt();return lt(i.saveTodo())}),Et(4,"Save"),Re(),Me(5,"button",19),et("click",function(){ut(t);let i=dt();return lt(i.cancelEdit())}),Et(6,"Cancel"),Re()()()}if(n&2){let t=dt();cn(),bc("ngModel",t.editingTodo.title)}}var ug=class n{constructor(e){this.todoService=e;this.todos$=this.todoService.getTodos(),this.todos$.subscribe(t=>this.todos=t)}todos$;todos=[];newTodoTitle="";editingTodo=null;originalTitle="";ngOnInit(){}drop(e){ag(this.todos,e.previousIndex,e.currentIndex),this.todoService.updateTodoPosition(this.todos)}addTodo(){this.newTodoTitle.trim()&&this.todoService.addTodo(this.newTodoTitle.trim()).subscribe({next:()=>{this.newTodoTitle=""},error:e=>{console.error("Error adding todo:",e)}})}toggleCompletion(e){this.todoService.updateTodo(ne(O({},e),{completed:!e.completed}))}editTodo(e){this.editingTodo=O({},e),this.originalTitle=e.title}saveTodo(){this.editingTodo&&this.editingTodo.title.trim()&&(this.todoService.updateTodo(this.editingTodo),this.editingTodo=null)}cancelEdit(){this.editingTodo=null}deleteTodo(e){e&&this.todoService.deleteTodo(e)}static \u0275fac=function(t){return new(t||n)(fe(cg))};static \u0275cmp=un({type:n,selectors:[["app-todo"]],decls:12,vars:2,consts:[["editTpl",""],[1,"todo-container"],[1,"add-todo-form",3,"ngSubmit"],["type","text","name","newTodoTitle","placeholder","What needs to be done?","required","",1,"todo-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn","add-btn"],[1,"todo-list"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","class","todo-item",3,"completed",4,"ngFor","ngForOf"],["cdkDrag","",1,"todo-item"],[1,"todo-item-details"],["type","checkbox",3,"change","checked"],["class","todo-title",3,"dblclick",4,"ngIf","ngIfElse"],[1,"actions"],[1,"btn","edit-btn",3,"click"],[1,"btn","delete-btn",3,"click"],[1,"todo-title",3,"dblclick"],[1,"edit-mode"],["type","text","name","editingTodoTitle",1,"edit-input",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"btn","save-btn",3,"click"],[1,"btn","cancel-btn",3,"click"]],template:function(t,r){if(t&1){let i=li();Me(0,"div",1)(1,"h2"),Et(2,"My To-Do List"),Re(),Me(3,"form",2),et("ngSubmit",function(){return ut(i),lt(r.addTodo())}),Me(4,"input",3),Cc("ngModelChange",function(s){return ut(i),mh(r.newTodoTitle,s)||(r.newTodoTitle=s),lt(s)}),Re(),Me(5,"button",4),Et(6,"Add"),Re()(),Me(7,"div",5)(8,"div",6),et("cdkDropListDropped",function(s){return ut(i),lt(r.drop(s))}),Ir(9,NG,9,5,"div",7),Re()(),Ir(10,PG,7,1,"ng-template",null,0,Sc),Re()}t&2&&(cn(4),bc("ngModel",r.newTodoTitle),cn(5),ui("ngForOf",r.todos))},dependencies:[hi,Th,Nc,Bx,Ux,Xp,xx,kx,iD,rD,nD,wk,Ek,_k],styles:[".todo-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:1.5rem}.add-todo-form[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.todo-input[_ngcontent-%COMP%]{flex-grow:1;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border:none;border-radius:4px;cursor:pointer;margin-left:.5rem;color:#fff}.add-btn[_ngcontent-%COMP%]{background-color:#28a745}.edit-btn[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545}.save-btn[_ngcontent-%COMP%]{background-color:#007bff}.cancel-btn[_ngcontent-%COMP%]{background-color:#6c757d}.todo-list[_ngcontent-%COMP%]{padding:0}.todo-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem;border-bottom:1px solid #eee;background-color:#fff}.todo-item.completed[_ngcontent-%COMP%]   .todo-title[_ngcontent-%COMP%]{text-decoration:line-through;color:#888}.todo-item-details[_ngcontent-%COMP%], .edit-mode[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}input[type=checkbox][_ngcontent-%COMP%]{margin-right:1rem}.todo-title[_ngcontent-%COMP%]{flex-grow:1;cursor:pointer}.edit-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;font-size:1rem;border:1px solid #ddd;border-radius:4px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .todo-item.cdk-drop-list-dragging[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var lg=class n{constructor(e){this.authService=e}login(){this.authService.signInWithGoogle().catch(e=>{console.error("Login failed:",e)})}static \u0275fac=function(t){return new(t||n)(fe(Mi))};static \u0275cmp=un({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"login-container"],[1,"login-btn",3,"click"],["src","/assets/google-logo.svg","alt","Google logo",1,"google-logo"]],template:function(t,r){t&1&&(Me(0,"div",0)(1,"h2"),Et(2,"Welcome to your To-Do List"),Re(),Me(3,"p"),Et(4,"Please sign in to continue"),Re(),Me(5,"button",1),et("click",function(){return r.login()}),ln(6,"img",2),Et(7," Sign in with Google "),Re()())},dependencies:[hi],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-top:5rem}.login-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#4285f4;color:#fff;padding:10px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px #00000040;transition:box-shadow .3s ease}.login-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000040}.google-logo[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:16px;background-color:#fff;border-radius:50%;padding:2px}"]})};function MG(n,e){if(n&1){let t=li();Me(0,"div")(1,"header")(2,"h1"),Et(3),Re(),Me(4,"button",2),et("click",function(){ut(t);let i=dt();return lt(i.logout())}),Et(5,"Sign Out"),Re()(),ln(6,"app-todo"),Re()}if(n&2){let t=e.ngIf;cn(3),Ts("",t.displayName,"'s To-Do List")}}function xG(n,e){n&1&&ln(0,"app-login")}var dg=class n{constructor(e){this.authService=e;this.user$=this.authService.user$}user$;logout(){this.authService.signOut()}static \u0275fac=function(t){return new(t||n)(fe(Mi))};static \u0275cmp=un({type:n,selectors:[["app-root"]],decls:6,vars:4,consts:[["login",""],[4,"ngIf","ngIfElse"],[1,"logout-btn",3,"click"]],template:function(t,r){if(t&1&&(ln(0,"hr"),Ir(1,MG,7,1,"div",1),fv(2,"async"),Ir(3,xG,1,0,"ng-template",null,0,Sc),ln(5,"router-outlet")),t&2){let i=Tc(4);cn(),ui("ngIf",pv(2,2,r.user$))("ngIfElse",i)}},dependencies:[nu,hi,Nc,Nv,ug,lg],styles:[".container[_ngcontent-%COMP%]{font-family:sans-serif;max-width:600px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#f9f9f9}h1[_ngcontent-%COMP%]{color:#333;text-align:center}p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;color:#555}strong[_ngcontent-%COMP%]{color:#000}.error[_ngcontent-%COMP%]{color:#d9534f;font-weight:700}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.logout-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer}"]})};jv(dg,mx).catch(n=>console.error(n));
